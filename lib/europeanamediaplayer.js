!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery"),require("dashjs")):"function"==typeof define&&define.amd?define("europeanamediaplayer",["jquery","dashjs"],e):"object"==typeof exports?exports.europeanamediaplayer=e(require("jquery"),require("dashjs")):t.europeanamediaplayer=e(t.jquery,t.dashjs)}(window,function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=31)}([function(e,n){e.exports=t},function(t,e,n){var r,i,o;i=[n(0)],void 0===(o="function"==typeof(r=function(t){return t.ui=t.ui||{},t.ui.version="1.12.1"})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1)],void 0===(o="function"==typeof(r=function(t){var e,n="ui-effects-animated",r=t;return t.effects={effect:{}},
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(t,e){var n,r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],o=t.Color=function(e,n,r,i){return new t.Color.fn.parse(e,n,r,i)},a={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},s={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=o.support={},c=t("<p>")[0],l=t.each;function f(t,e,n){var r=s[e.type]||{};return null==t?n||!e.def?null:e.def:(t=r.floor?~~t:parseFloat(t),isNaN(t)?e.def:r.mod?(t+r.mod)%r.mod:0>t?0:r.max<t?r.max:t)}function h(e){var r=o(),s=r._rgba=[];return e=e.toLowerCase(),l(i,function(t,n){var i,o=n.re.exec(e),u=o&&n.parse(o),c=n.space||"rgba";if(u)return i=r[c](u),r[a[c].cache]=i[a[c].cache],s=r._rgba=i._rgba,!1}),s.length?("0,0,0,0"===s.join()&&t.extend(s,n.transparent),r):n[e]}function d(t,e,n){return 6*(n=(n+1)%1)<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}c.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=c.style.backgroundColor.indexOf("rgba")>-1,l(a,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),o.fn=t.extend(o.prototype,{parse:function(e,r,i,s){if(void 0===e)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=t(e).css(r),r=void 0);var u=this,c=t.type(e),d=this._rgba=[];return void 0!==r&&(e=[e,r,i,s],c="array"),"string"===c?this.parse(h(e)||n._default):"array"===c?(l(a.rgba.props,function(t,n){d[n.idx]=f(e[n.idx],n)}),this):"object"===c?(l(a,e instanceof o?function(t,n){e[n.cache]&&(u[n.cache]=e[n.cache].slice())}:function(n,r){var i=r.cache;l(r.props,function(t,n){if(!u[i]&&r.to){if("alpha"===t||null==e[t])return;u[i]=r.to(u._rgba)}u[i][n.idx]=f(e[t],n,!0)}),u[i]&&t.inArray(null,u[i].slice(0,3))<0&&(u[i][3]=1,r.from&&(u._rgba=r.from(u[i])))}),this):void 0},is:function(t){var e=o(t),n=!0,r=this;return l(a,function(t,i){var o,a=e[i.cache];return a&&(o=r[i.cache]||i.to&&i.to(r._rgba)||[],l(i.props,function(t,e){if(null!=a[e.idx])return n=a[e.idx]===o[e.idx]})),n}),n},_space:function(){var t=[],e=this;return l(a,function(n,r){e[r.cache]&&t.push(n)}),t.pop()},transition:function(t,e){var n=o(t),r=n._space(),i=a[r],u=0===this.alpha()?o("transparent"):this,c=u[i.cache]||i.to(u._rgba),h=c.slice();return n=n[i.cache],l(i.props,function(t,r){var i=r.idx,o=c[i],a=n[i],u=s[r.type]||{};null!==a&&(null===o?h[i]=a:(u.mod&&(a-o>u.mod/2?o+=u.mod:o-a>u.mod/2&&(o-=u.mod)),h[i]=f((a-o)*e+o,r)))}),this[r](h)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),r=n.pop(),i=o(e)._rgba;return o(t.map(n,function(t,e){return(1-r)*i[e]+r*t}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),r=n.pop();return e&&n.push(~~(255*r)),"#"+t.map(n,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),o.fn.parse.prototype=o.fn,a.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=t[3],s=Math.max(r,i,o),u=Math.min(r,i,o),c=s-u,l=s+u,f=.5*l;return e=u===s?0:r===s?60*(i-o)/c+360:i===s?60*(o-r)/c+120:60*(r-i)/c+240,n=0===c?0:f<=.5?c/l:c/(2-l),[Math.round(e)%360,n,f,null==a?1:a]},a.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],r=t[2],i=t[3],o=r<=.5?r*(1+n):r+n-r*n,a=2*r-o;return[Math.round(255*d(a,o,e+1/3)),Math.round(255*d(a,o,e)),Math.round(255*d(a,o,e-1/3)),i]},l(a,function(e,n){var i=n.props,a=n.cache,s=n.to,u=n.from;o.fn[e]=function(e){if(s&&!this[a]&&(this[a]=s(this._rgba)),void 0===e)return this[a].slice();var n,r=t.type(e),c="array"===r||"object"===r?e:arguments,h=this[a].slice();return l(i,function(t,e){var n=c["object"===r?t:e.idx];null==n&&(n=h[e.idx]),h[e.idx]=f(n,e)}),u?((n=o(u(h)))[a]=h,n):o(h)},l(i,function(n,i){o.fn[n]||(o.fn[n]=function(o){var a,s=t.type(o),u="alpha"===n?this._hsla?"hsla":"rgba":e,c=this[u](),l=c[i.idx];return"undefined"===s?l:("function"===s&&(o=o.call(this,l),s=t.type(o)),null==o&&i.empty?this:("string"===s&&(a=r.exec(o))&&(o=l+parseFloat(a[2])*("+"===a[1]?1:-1)),c[i.idx]=o,this[u](c)))})})}),o.hook=function(e){var n=e.split(" ");l(n,function(e,n){t.cssHooks[n]={set:function(e,r){var i,a,s="";if("transparent"!==r&&("string"!==t.type(r)||(i=h(r)))){if(r=o(i||r),!u.rgba&&1!==r._rgba[3]){for(a="backgroundColor"===n?e.parentNode:e;(""===s||"transparent"===s)&&a&&a.style;)try{s=t.css(a,"backgroundColor"),a=a.parentNode}catch(t){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{e.style[n]=r}catch(t){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=o(e.elem,n),e.end=o(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}})},o.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return l(["Top","Right","Bottom","Left"],function(n,r){e["border"+r+"Color"]=t}),e}},n=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(r),function(){var e,n=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function o(e){var n,r,i=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(i&&i.length&&i[0]&&i[i[0]])for(r=i.length;r--;)"string"==typeof i[n=i[r]]&&(o[t.camelCase(n)]=i[n]);else for(n in i)"string"==typeof i[n]&&(o[n]=i[n]);return o}t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,n){t.fx.step[n]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(r.style(t.elem,n,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,r,a,s){var u=t.speed(r,a,s);return this.queue(function(){var r,a=t(this),s=a.attr("class")||"",c=u.children?a.find("*").addBack():a;c=c.map(function(){return{el:t(this),start:o(this)}}),(r=function(){t.each(n,function(t,n){e[n]&&a[n+"Class"](e[n])})})(),c=c.map(function(){return this.end=o(this.el[0]),this.diff=function(e,n){var r,o,a={};for(r in n)o=n[r],e[r]!==o&&(i[r]||!t.fx.step[r]&&isNaN(parseFloat(o))||(a[r]=o));return a}(this.start,this.end),this}),a.attr("class",s),c=c.map(function(){var e=this,n=t.Deferred(),r=t.extend({},u,{queue:!1,complete:function(){n.resolve(e)}});return this.el.animate(this.diff,r),n.promise()}),t.when.apply(t,c.get()).done(function(){r(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),u.complete.call(a[0])})})},t.fn.extend({addClass:(e=t.fn.addClass,function(n,r,i,o){return r?t.effects.animateClass.call(this,{add:n},r,i,o):e.apply(this,arguments)}),removeClass:function(e){return function(n,r,i,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:n},r,i,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(n,r,i,o,a){return"boolean"==typeof r||void 0===r?i?t.effects.animateClass.call(this,r?{add:n}:{remove:n},i,o,a):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:n},r,i,o)}}(t.fn.toggleClass),switchClass:function(e,n,r,i,o){return t.effects.animateClass.call(this,{add:n,remove:e},r,i,o)}})}(),function(){var e;function r(e,n,r,i){return t.isPlainObject(e)&&(n=e,e=e.effect),e={effect:e},null==n&&(n={}),t.isFunction(n)&&(i=n,r=null,n={}),("number"==typeof n||t.fx.speeds[n])&&(i=r,r=n,n={}),t.isFunction(r)&&(i=r,r=null),n&&t.extend(e,n),r=r||n.duration,e.duration=t.fx.off?0:"number"==typeof r?r:r in t.fx.speeds?t.fx.speeds[r]:t.fx.speeds._default,e.complete=i||n.complete,e}function i(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||"string"==typeof e&&!t.effects.effect[e]||!!t.isFunction(e)||"object"==typeof e&&!e.effect}function o(t,e){var n=e.outerWidth(),r=e.outerHeight(),i=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,n,r,0];return{top:parseFloat(i[1])||0,right:"auto"===i[2]?n:parseFloat(i[2]),bottom:"auto"===i[3]?r:parseFloat(i[3]),left:parseFloat(i[4])||0}}t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=(e=t.expr.filters.animated,function(r){return!!t(r).data(n)||e(r)})),!1!==t.uiBackCompat&&t.extend(t.effects,{save:function(t,e){for(var n=0,r=e.length;n<r;n++)null!==e[n]&&t.data("ui-effects-"+e[n],t[0].style[e[n]])},restore:function(t,e){for(var n,r=0,i=e.length;r<i;r++)null!==e[r]&&(n=t.data("ui-effects-"+e[r]),t.css(e[r],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var n={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},r=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}return e.wrap(r),(e[0]===o||t.contains(e[0],o))&&t(o).trigger("focus"),r=e.parent(),"static"===e.css("position")?(r.css({position:"relative"}),e.css({position:"relative"})):(t.extend(n,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,r){n[r]=e.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(i),r.css(n).show()},removeWrapper:function(e){var n=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===n||t.contains(e[0],n))&&t(n).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,n,r){return r||(r=n,n="effect"),t.effects.effect[e]=r,t.effects.effect[e].mode=n,r},scaledDimensions:function(t,e,n){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var r="horizontal"!==n?(e||100)/100:1,i="vertical"!==n?(e||100)/100:1;return{height:t.height()*i,width:t.width()*r,outerHeight:t.outerHeight()*i,outerWidth:t.outerWidth()*r}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,n){var r=t.queue();e>1&&r.splice.apply(r,[1,0].concat(r.splice(e,n))),t.dequeue()},saveStyle:function(t){t.data("ui-effects-style",t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data("ui-effects-style")||"",t.removeData("ui-effects-style")},mode:function(t,e){var n=t.is(":hidden");return"toggle"===e&&(e=n?"show":"hide"),(n?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var n,r;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=t[1]/e.width}return{x:r,y:n}},createPlaceholder:function(e){var n,r=e.css("position"),i=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(r)&&(r="absolute",n=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data("ui-effects-placeholder",n)),e.css({position:r,left:i.left,top:i.top}),n},removePlaceholder:function(t){var e="ui-effects-placeholder",n=t.data(e);n&&(n.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,n,r,i){return i=i||{},t.each(n,function(t,n){var o=e.cssUnit(n);o[0]>0&&(i[n]=o[0]*r+o[1])}),i}}),t.fn.extend({effect:function(){var e=r.apply(this,arguments),i=t.effects.effect[e.effect],o=i.mode,a=e.queue,s=a||"fx",u=e.complete,c=e.mode,l=[],f=function(e){var r=t(this),i=t.effects.mode(r,c)||o;r.data(n,!0),l.push(i),o&&("show"===i||i===o&&"hide"===i)&&r.show(),o&&"none"===i||t.effects.saveStyle(r),t.isFunction(e)&&e()};if(t.fx.off||!i)return c?this[c](e.duration,u):this.each(function(){u&&u.call(this)});function h(r){var a=t(this);function s(){t.isFunction(u)&&u.call(a[0]),t.isFunction(r)&&r()}e.mode=l.shift(),!1===t.uiBackCompat||o?"none"===e.mode?(a[c](),s()):i.call(a[0],e,function(){a.removeData(n),t.effects.cleanUp(a),"hide"===e.mode&&a.hide(),s()}):(a.is(":hidden")?"hide"===c:"show"===c)?(a[c](),s()):i.call(a[0],e,s)}return!1===a?this.each(f).each(h):this.queue(s,f).queue(s,h)},show:function(t){return function(e){if(i(e))return t.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(t.fn.show),hide:function(t){return function(e){if(i(e))return t.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(t.fn.hide),toggle:function(t){return function(e){if(i(e)||"boolean"==typeof e)return t.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(t.fn.toggle),cssUnit:function(e){var n=this.css(e),r=[];return t.each(["em","px","%","pt"],function(t,e){n.indexOf(e)>0&&(r=[parseFloat(n),e])}),r},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):o(this.css("clip"),this)},transfer:function(e,n){var r=t(this),i=t(e.to),o="fixed"===i.css("position"),a=t("body"),s=o?a.scrollTop():0,u=o?a.scrollLeft():0,c=i.offset(),l={top:c.top-s,left:c.left-u,height:i.innerHeight(),width:i.innerWidth()},f=r.offset(),h=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:f.top-s,left:f.left-u,height:r.innerHeight(),width:r.innerWidth(),position:o?"fixed":"absolute"}).animate(l,e.duration,e.easing,function(){h.remove(),t.isFunction(n)&&n()})}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=o(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),e={},t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,n){e[n]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,n){t.easing["easeIn"+e]=n,t.easing["easeOut"+e]=function(t){return 1-n(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?n(2*t)/2:1-n(-2*t+2)/2}}),t.effects})?r.apply(e,i):r)||(t.exports=o)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(45),i=n(46),o=n(16);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(r)return V(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return x(this,e,n);case"latin1":case"binary":return M(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function w(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function _(t,e,n,r){return G(V(e,t.length-n),t,n,r)}function E(t,e,n,r){return G(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function b(t,e,n,r){return E(t,e,n,r)}function C(t,e,n,r){return G(H(e),t,n,r)}function S(t,e,n,r){return G(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return b(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function x(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function M(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=B(t[o]);return i}function O(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function N(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function P(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,o){return o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function U(t,e,n,r,o){return o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||N(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||N(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||N(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||N(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||N(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||N(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||N(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||N(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||N(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||k(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||k(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);k(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);k(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return U(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return U(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:V(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(3))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(11),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=f;var o=n(8);o.inherits=n(4);var a=n(20),s=n(24);o.inherits(f,a);for(var u=i(s.prototype),c=0;c<u.length;c++){var l=u[c];f.prototype[l]||(f.prototype[l]=s.prototype[l])}function f(t){if(!(this instanceof f))return new f(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),f.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(5).Buffer)},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),u=null,c=0,l=[],f=n(35);function h(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(y(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(y(r.parts[a],e));o[r.id]={id:r.id,refs:1,parts:s}}}}function d(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function p(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(t.insertAt.before,n);n.insertBefore(e,i)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function v(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return m(e,t.attrs),p(t,e),e}function m(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function y(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=o}if(e.singleton){var a=c++;n=u||(u=v(e)),r=E.bind(null,n,a,!1),i=E.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",m(e,t.attrs),p(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=f(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){g(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return h(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}t&&h(d(t,e),e);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete o[s.id]}}}};var w,_=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function E(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=_(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e,n){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}}:t.exports=e}).call(this,n(6))},function(t,e,n){var r=n(5),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";var r=n(58),i=n(60);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=w,e.resolve=function(t,e){return w(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?w(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=w(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),h=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(61);function w(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(s);c[0]=c[0].replace(/\\/g,"/");var w=t=c.join(s);if(w=w.trim(),!n&&1===t.split("#").length){var _=u.exec(w);if(_)return this.path=w,this.href=w,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var E=a.exec(w);if(E){var b=(E=E[0]).toLowerCase();this.protocol=b,w=w.substr(E.length)}if(n||E||w.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===w.substr(0,2);!C||E&&v[E]||(w=w.substr(2),this.slashes=!0)}if(!v[E]&&(C||E&&!m[E])){for(var S,I,A=-1,T=0;T<h.length;T++){-1!==(x=w.indexOf(h[T]))&&(-1===A||x<A)&&(A=x)}-1!==(I=-1===A?w.lastIndexOf("@"):w.lastIndexOf("@",A))&&(S=w.slice(0,I),w=w.slice(I+1),this.auth=decodeURIComponent(S)),A=-1;for(T=0;T<f.length;T++){var x;-1!==(x=w.indexOf(f[T]))&&(-1===A||x<A)&&(A=x)}-1===A&&(A=w.length),this.host=w.slice(0,A),w=w.slice(A),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var R=this.hostname.split(/\./),O=(T=0,R.length);T<O;T++){var N=R[T];if(N&&!N.match(d)){for(var k="",L=0,P=N.length;L<P;L++)N.charCodeAt(L)>127?k+="x":k+=N[L];if(!k.match(d)){var D=R.slice(0,T),F=R.slice(T+1),U=N.match(p);U&&(D.push(U[1]),F.unshift(U[2])),F.length&&(w="/"+F.join(".")+w),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+j,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==w[0]&&(w="/"+w))}if(!g[b])for(T=0,O=l.length;T<O;T++){var V=l[T];if(-1!==w.indexOf(V)){var H=encodeURIComponent(V);H===V&&(H=escape(V)),w=w.split(V).join(H)}}var G=w.indexOf("#");-1!==G&&(this.hash=w.substr(G),w=w.slice(0,G));var q=w.indexOf("?");if(-1!==q?(this.search=w.substr(q),this.query=w.substr(q+1),e&&(this.query=y.parse(this.query)),w=w.slice(0,q)):e&&(this.search="",this.query={}),w&&(this.pathname=w),m[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var z=this.search||"";this.path=j+z}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(w(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=t[l])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!m[t.protocol]){for(var f=Object.keys(t),h=0;h<f.length;h++){var d=f[h];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||v[t.protocol])n.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var g=n.pathname||"",y=n.search||"";n.path=g+y}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var w=n.pathname&&"/"===n.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),E=_||w||n.host&&t.pathname,b=E,C=n.pathname&&n.pathname.split("/")||[],S=(p=t.pathname&&t.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===C[0]?C[0]=n.host:C.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),E=E&&(""===p[0]||""===C[0])),_)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,C=p;else if(p.length)C||(C=[]),C.pop(),C=C.concat(p),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(S)n.hostname=n.host=C.shift(),(M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=M.shift(),n.host=n.hostname=M.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!C.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var I=C.slice(-1)[0],A=(n.host||t.host||C.length>1)&&("."===I||".."===I)||""===I,T=0,x=C.length;x>=0;x--)"."===(I=C[x])?C.splice(x,1):".."===I?(C.splice(x,1),T++):T&&(C.splice(x,1),T--);if(!E&&!b)for(;T--;T)C.unshift("..");!E||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),A&&"/"!==C.join("/").substr(-1)&&C.push("");var M,R=""===C[0]||C[0]&&"/"===C[0].charAt(0);S&&(n.hostname=n.host=R?"":C.length?C.shift():"",(M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=M.shift(),n.host=n.hostname=M.shift()));return(E=E||n.host&&C.length)&&!R&&C.unshift(""),C.length?n.pathname=C.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1)],void 0===(o="function"==typeof(r=function(t){var e,n=0,r=Array.prototype.slice;return t.cleanData=(e=t.cleanData,function(n){var r,i,o;for(o=0;null!=(i=n[o]);o++)try{(r=t._data(i,"events"))&&r.remove&&t(i).triggerHandler("remove")}catch(t){}e(n)}),t.widget=function(e,n,r){var i,o,a,s={},u=e.split(".")[0],c=u+"-"+(e=e.split(".")[1]);return r||(r=n,n=t.Widget),t.isArray(r)&&(r=t.extend.apply(null,[{}].concat(r))),t.expr[":"][c.toLowerCase()]=function(e){return!!t.data(e,c)},t[u]=t[u]||{},i=t[u][e],o=t[u][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,i,{version:r.version,_proto:t.extend({},r),_childConstructors:[]}),(a=new n).options=t.widget.extend({},a.options),t.each(r,function(e,r){t.isFunction(r)?s[e]=function(){function t(){return n.prototype[e].apply(this,arguments)}function i(t){return n.prototype[e].apply(this,t)}return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=i,e=r.apply(this,arguments),this._super=n,this._superApply=o,e}}():s[e]=r}),o.prototype=t.widget.extend(a,{widgetEventPrefix:i&&a.widgetEventPrefix||e},s,{constructor:o,namespace:u,widgetName:e,widgetFullName:c}),i?(t.each(i._childConstructors,function(e,n){var r=n.prototype;t.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete i._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var n,i,o=r.call(arguments,1),a=0,s=o.length;a<s;a++)for(n in o[a])i=o[a][n],o[a].hasOwnProperty(n)&&void 0!==i&&(t.isPlainObject(i)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],i):t.widget.extend({},i):e[n]=i);return e},t.widget.bridge=function(e,n){var i=n.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,s=r.call(arguments,1),u=this;return a?this.length||"instance"!==o?this.each(function(){var n,r=t.data(this,i);return"instance"===o?(u=r,!1):r?t.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,s))!==r&&void 0!==n?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):u=void 0:(s.length&&(o=t.widget.extend.apply(null,[o].concat(s))),this.each(function(){var e=t.data(this,i);e?(e.option(o||{}),e._init&&e._init()):t.data(this,i,new n(o,this))})),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,r){r=t(r||this.defaultElement||this)[0],this.element=t(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},r!==this&&(t.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===r&&this.destroy()}}),this.document=t(r.style?r.ownerDocument:r.document||r),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,n){e._removeClass(n,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var r,i,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},r=e.split("."),e=r.shift(),r.length){for(i=a[e]=t.widget.extend({},this.options[e]),o=0;o<r.length-1;o++)i[r[o]]=i[r[o]]||{},i=i[r[o]];if(e=r.pop(),1===arguments.length)return void 0===i[e]?null:i[e];i[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var n,r,i;for(n in e)i=this.classesElementLookup[n],e[n]!==this.options.classes[n]&&i&&i.length&&(r=t(i.get()),this._removeClass(i,n),r.addClass(this._classes({element:r,keys:n,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var n=[],r=this;function i(i,o){var a,s;for(s=0;s<i.length;s++)a=r.classesElementLookup[i[s]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),r.classesElementLookup[i[s]]=a,n.push(i[s]),o&&e.classes[i[s]]&&n.push(e.classes[i[s]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(e){var n=this;t.each(n.classesElementLookup,function(r,i){-1!==t.inArray(e.target,i)&&(n.classesElementLookup[r]=t(i.not(e.target).get()))})},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,r){r="boolean"==typeof r?r:n;var i="string"==typeof t||null===t,o={extra:i?e:n,keys:i?t:e,element:i?this.element:t,add:r};return o.element.toggleClass(this._classes(o),r),this},_on:function(e,n,r){var i,o=this;"boolean"!=typeof e&&(r=n,n=e,e=!1),r?(n=i=t(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),t.each(r,function(r,a){function s(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var u=r.match(/^([\w:-]*)\s*(.*)$/),c=u[1]+o.eventNamespace,l=u[2];l?i.on(c,l,s):n.on(c,s)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(n).off(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,r){var i,o,a=this.options[e];if(r=r||{},(n=t.Event(n)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(i in o)i in n||(n[i]=o[i]);return this.element.trigger(n,r),!(t.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(r))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(r,i,o){var a;"string"==typeof i&&(i={effect:i});var s=i?!0===i||"number"==typeof i?n:i.effect||n:e;"number"==typeof(i=i||{})&&(i={duration:i}),a=!t.isEmptyObject(i),i.complete=o,i.delay&&r.delay(i.delay),a&&t.effects&&t.effects.effect[s]?r[e](i):s!==e&&r[s]?r[s](i.duration,i.easing,o):r.queue(function(n){t(this)[e](),o&&o.call(r[0]),n()})}}),t.widget})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){(function(t){var r=n(44),i=n(18),o=n(56),a=n(57),s=n(13),u=e;u.request=function(e,n){e="string"==typeof e?s.parse(e):o(e);var i=-1===t.location.protocol.search(/^https?:$/)?"http:":"",a=e.protocol||i,u=e.hostname||e.host,c=e.port,l=e.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),e.url=(u?a+"//"+u:"")+(c?":"+c:"")+l,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var f=new r(e);return n&&f.on("response",n),f},u.get=function(t,e){var n=u.request(t,e);return n.end(),n},u.ClientRequest=r,u.IncomingMessage=i.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=a,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,n(3))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){e.fetch=s(t.fetch)&&s(t.ReadableStream),e.writableStream=s(t.WritableStream),e.abortController=s(t.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(t){}var n;function r(){if(void 0!==n)return n;if(t.XMLHttpRequest){n=new t.XMLHttpRequest;try{n.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){n=null}}else n=null;return n}function i(t){var e=r();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var o=void 0!==t.ArrayBuffer,a=o&&s(t.ArrayBuffer.prototype.slice);function s(t){return"function"==typeof t}e.arraybuffer=e.fetch||o&&i("arraybuffer"),e.msstream=!e.fetch&&a&&i("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&o&&i("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!r()&&s(r().overrideMimeType),e.vbArray=s(t.VBArray),n=null}).call(this,n(3))},function(t,e,n){(function(t,r,i){var o=n(17),a=n(4),s=n(19),u=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=e.IncomingMessage=function(e,n,a,u){var c=this;if(s.Readable.call(c),c._mode=a,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",function(){t.nextTick(function(){c.emit("close")})}),"fetch"===a){if(c._fetchResponse=n,c.url=n.url,c.statusCode=n.status,c.statusMessage=n.statusText,n.headers.forEach(function(t,e){c.headers[e.toLowerCase()]=t,c.rawHeaders.push(e,t)}),o.writableStream){var l=new WritableStream({write:function(t){return new Promise(function(e,n){c._destroyed?n():c.push(new r(t))?e():c._resumeFetch=e})},close:function(){i.clearTimeout(u),c._destroyed||c.push(null)},abort:function(t){c._destroyed||c.emit("error",t)}});try{return void n.body.pipeTo(l).catch(function(t){i.clearTimeout(u),c._destroyed||c.emit("error",t)})}catch(t){}}var f=n.body.getReader();!function t(){f.read().then(function(e){if(!c._destroyed){if(e.done)return i.clearTimeout(u),void c.push(null);c.push(new r(e.value)),t()}}).catch(function(t){i.clearTimeout(u),c._destroyed||c.emit("error",t)})}()}else{if(c._xhr=e,c._pos=0,c.url=e.responseURL,c.statusCode=e.status,c.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var n=e[1].toLowerCase();"set-cookie"===n?(void 0===c.headers[n]&&(c.headers[n]=[]),c.headers[n].push(e[2])):void 0!==c.headers[n]?c.headers[n]+=", "+e[2]:c.headers[n]=e[2],c.rawHeaders.push(e[1],e[2])}}),c._charset="x-user-defined",!o.overrideMimeType){var h=c.rawHeaders["mime-type"];if(h){var d=h.match(/;\s*charset=([^;])(;|$)/);d&&(c._charset=d[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};a(c,s.Readable),c.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},c.prototype._onXHRProgress=function(){var t=this,e=t._xhr,n=null;switch(t._mode){case"text:vbarray":if(e.readyState!==u.DONE)break;try{n=new i.VBArray(e.responseBody).toArray()}catch(t){}if(null!==n){t.push(new r(n));break}case"text":try{n=e.responseText}catch(e){t._mode="text:vbarray";break}if(n.length>t._pos){var o=n.substr(t._pos);if("x-user-defined"===t._charset){for(var a=new r(o.length),s=0;s<o.length;s++)a[s]=255&o.charCodeAt(s);t.push(a)}else t.push(o,t._charset);t._pos=n.length}break;case"arraybuffer":if(e.readyState!==u.DONE||!e.response)break;n=e.response,t.push(new r(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=e.response,e.readyState!==u.LOADING||!n)break;t.push(new r(new Uint8Array(n)));break;case"ms-stream":if(n=e.response,e.readyState!==u.LOADING)break;var c=new i.MSStreamReader;c.onprogress=function(){c.result.byteLength>t._pos&&(t.push(new r(new Uint8Array(c.result.slice(t._pos)))),t._pos=c.result.byteLength)},c.onload=function(){t.push(null)},c.readAsArrayBuffer(n)}t._xhr.readyState===u.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,n(6),n(5).Buffer,n(3))},function(t,e,n){(e=t.exports=n(20)).Stream=e,e.Readable=e,e.Writable=n(24),e.Duplex=n(7),e.Transform=n(26),e.PassThrough=n(54)},function(t,e,n){"use strict";(function(e,r){var i=n(11);t.exports=w;var o,a=n(16);w.ReadableState=y;n(21).EventEmitter;var s=function(t,e){return t.listeners(e).length},u=n(22),c=n(12).Buffer,l=e.Uint8Array||function(){};var f=n(8);f.inherits=n(4);var h=n(47),d=void 0;d=h&&h.debuglog?h.debuglog("stream"):function(){};var p,g=n(48),v=n(23);f.inherits(w,u);var m=["error","close","destroy","pause","resume"];function y(t,e){t=t||{};var r=e instanceof(o=o||n(7));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(25).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function w(t){if(o=o||n(7),!(this instanceof w))return new w(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function _(t,e,n,r,i){var o,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,S(t)}(t,a)):(i||(o=function(t,e){var n;r=e,c.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):E(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?E(t,a,e,!1):A(t,a)):E(t,a,e,!1))):r||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function E(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&S(t)),A(t,e)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),w.prototype.destroy=v.destroy,w.prototype._undestroy=v.undestroy,w.prototype._destroy=function(t,e){this.push(null),e(t)},w.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),_(this,t,e,!1,n)},w.prototype.unshift=function(t){return _(this,t,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(t){return p||(p=n(25).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var b=8388608;function C(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=b?t=b:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(I,t):I(t))}function I(t){d("emit readable"),t.emit("readable"),R(t)}function A(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(T,t,e))}function T(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function x(t){d("readable nexttick read 0"),t.read(0)}function M(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),R(t),e.flowing&&!e.reading&&t.read(0)}function R(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function O(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function N(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(k,e,t))}function k(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function L(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}w.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?N(this):S(this),null;if(0===(t=C(t,e))&&e.ended)return 0===e.length&&N(this),null;var r,i=e.needReadable;return d("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",i=!0),e.ended||e.reading?d("reading or ended",i=!1):i&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=C(n,e))),null===(r=t>0?O(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&N(this)),null!==r&&this.emit("data",r),r},w.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?l:w;function c(e,r){d("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d("cleanup"),t.removeListener("close",m),t.removeListener("finish",y),t.removeListener("drain",f),t.removeListener("error",v),t.removeListener("unpipe",c),n.removeListener("end",l),n.removeListener("end",w),n.removeListener("data",g),h=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||f())}function l(){d("onend"),t.end()}o.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",c);var f=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,R(t))}}(n);t.on("drain",f);var h=!1;var p=!1;function g(e){d("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==L(o.pipes,t))&&!h&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function v(e){d("onerror",e),w(),t.removeListener("error",v),0===s(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",y),w()}function y(){d("onfinish"),t.removeListener("close",m),w()}function w(){d("unpipe"),n.unpipe(t)}return n.on("data",g),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",v),t.once("close",m),t.once("finish",y),t.emit("pipe",n),o.flowing||(d("pipe resume"),n.resume()),t},w.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=L(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},w.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&S(this):i.nextTick(x,this))}return n},w.prototype.addListener=w.prototype.on,w.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(M,t,e))}(this,t)),this},w.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",function(){if(d("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(i){(d("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))}),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<m.length;o++)t.on(m[o],this.emit.bind(this,m[o]));return this._read=function(e){d("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=O}).call(this,n(3),n(6))},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function l(t,e,n,r){var i,o,a,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function f(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,t))}.bind(r);return i.listener=n,r.wrapFn=i,i}function h(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):p(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,l=p(u,c);for(n=0;n<c;++n)o(l[n],this,e)}return!0},s.prototype.addListener=function(t,e){return l(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return l(this,t,e,!0)},s.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,f(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return h(this,t,!0)},s.prototype.rawListeners=function(t){return h(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){t.exports=n(21).EventEmitter},function(t,e,n){"use strict";var r=n(11);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";(function(e,r,i){var o=n(11);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;y.WritableState=m;var c=n(8);c.inherits=n(4);var l={deprecate:n(52)},f=n(22),h=n(12).Buffer,d=i.Uint8Array||function(){};var p,g=n(23);function v(){}function m(t,e){s=s||n(7),t=t||{};var r=e instanceof s;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,c=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===t.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(S,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),S(t,e))}(t,n,r,e,i);else{var a=b(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||E(t,n),r?u(_,t,n,a,i):_(t,n,a,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(t){if(s=s||n(7),!(p.call(y,this)||this instanceof s))return new y(t);this._writableState=new m(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),f.call(this)}function w(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function _(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),S(t,e)}function E(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,w(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(w(t,e,!1,e.objectMode?1:c.length,c,l,f),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function b(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function C(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),S(t,e)})}function S(t,e){var n=b(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(C,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(y,f),m.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(m.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===y&&(t&&t._writableState instanceof m)}})):p=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,n){var r,i=this._writableState,a=!1,s=!i.objectMode&&(r=t,h.isBuffer(r)||r instanceof d);return s&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=v),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(s||function(t,e,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o.nextTick(r,a),i=!1),i}(this,i,t,n))&&(i.pendingcb++,a=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,n));return e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else w(t,e,!1,s,r,i,o);return u}(this,i,s,t,e,n)),a},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||E(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,S(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(6),n(50).setImmediate,n(3))},function(t,e,n){"use strict";var r=n(53).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=f,e=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function h(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=a;var r=n(7),i=n(8);function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush(function(e,n){u(t,e,n)}):u(this,null,null)}function u(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(4),i.inherits(a,r),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1)],void 0===(o="function"==typeof(r=function(t){return t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(68),n(1),n(14)],void 0===(o="function"==typeof(r=function(t){var e=!1;return t(document).on("mouseup",function(){e=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var r=this,i=1===n.which,o=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&t(n.target).closest(this.options.cancel).length;return!(i&&!o&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return r._mouseMove(t)},this._mouseUpDelegate=function(t){return r._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,0)))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&t.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,e=!1,n.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Scale 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2),n(30)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("scale",function(e,n){var r=t(this),i=e.mode,o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"effect"!==i?0:100),a=t.extend(!0,{from:t.effects.scaledDimensions(r),to:t.effects.scaledDimensions(r,o,e.direction||"both"),origin:e.origin||["middle","center"]},e);e.fade&&(a.from.opacity=1,a.to.opacity=0),t.effects.effect.size.call(this,a,n)})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Size 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("size",function(e,n){var r,i,o,a=t(this),s=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=e.mode,f="effect"!==l,h=e.scale||"both",d=e.origin||["middle","center"],p=a.css("position"),g=a.position(),v=t.effects.scaledDimensions(a),m=e.from||v,y=e.to||t.effects.scaledDimensions(a,0);t.effects.createPlaceholder(a),"show"===l&&(o=m,m=y,y=o),i={from:{y:m.height/v.height,x:m.width/v.width},to:{y:y.height/v.height,x:y.width/v.width}},"box"!==h&&"both"!==h||(i.from.y!==i.to.y&&(m=t.effects.setTransition(a,u,i.from.y,m),y=t.effects.setTransition(a,u,i.to.y,y)),i.from.x!==i.to.x&&(m=t.effects.setTransition(a,c,i.from.x,m),y=t.effects.setTransition(a,c,i.to.x,y))),"content"!==h&&"both"!==h||i.from.y!==i.to.y&&(m=t.effects.setTransition(a,s,i.from.y,m),y=t.effects.setTransition(a,s,i.to.y,y)),d&&(r=t.effects.getBaseline(d,v),m.top=(v.outerHeight-m.outerHeight)*r.y+g.top,m.left=(v.outerWidth-m.outerWidth)*r.x+g.left,y.top=(v.outerHeight-y.outerHeight)*r.y+g.top,y.left=(v.outerWidth-y.outerWidth)*r.x+g.left),a.css(m),"content"!==h&&"both"!==h||(u=u.concat(["marginTop","marginBottom"]).concat(s),c=c.concat(["marginLeft","marginRight"]),a.find("*[width]").each(function(){var n=t(this),r=t.effects.scaledDimensions(n),o={height:r.height*i.from.y,width:r.width*i.from.x,outerHeight:r.outerHeight*i.from.y,outerWidth:r.outerWidth*i.from.x},a={height:r.height*i.to.y,width:r.width*i.to.x,outerHeight:r.height*i.to.y,outerWidth:r.width*i.to.x};i.from.y!==i.to.y&&(o=t.effects.setTransition(n,u,i.from.y,o),a=t.effects.setTransition(n,u,i.to.y,a)),i.from.x!==i.to.x&&(o=t.effects.setTransition(n,c,i.from.x,o),a=t.effects.setTransition(n,c,i.to.x,a)),f&&t.effects.saveStyle(n),n.css(o),n.animate(a,e.duration,e.easing,function(){f&&t.effects.restoreStyle(n)})})),a.animate(y,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){var e=a.offset();0===y.opacity&&a.css("opacity",m.opacity),f||(a.css("position","static"===p?"relative":p).offset(e),t.effects.saveStyle(a)),n()}})})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){t.exports=n(32)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(33);var i,o=n(36),a=(i=o)&&i.__esModule?i:{default:i};var s="",u=void 0,c="",l=e.init=function(e,n,r){var i=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)});t(e).append('<div id="eups-player-'+i+'" class="eups-player"></div>'),Object.prototype.hasOwnProperty.call(r,"manifest")&&(n.manifest=r.manifest),n.source=r.source||n.source,s=r.editor||s,c=r.language||c,(u=new a.default(document.getElementById("eups-player-"+i))).init(n,s,c)};var f=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=arguments.length>2?r:{},l(e,n,r)}return r(t,[{key:"player",get:function(){return u}}]),t}();e.default=f}).call(this,n(0))},function(t,e,n){var r=n(34);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"#eups-content-wrapper {\n    float: left;\n    max-height: inherit;\n    max-width: inherit;\n}\n\n.eups-player {\n    height: 100%;\n    width: 100% !important;\n    max-width: 100%;\n    max-height: 100%;\n}\n\n.editor {\n    width: 60%;\n}\n\n.no-editor {\n    width: 100%;\n    float: left;\n}\n\n#eups-editor-wrapper {\n    float: left;\n}\n\n#eups-annotationeditor {\n    padding-left: 5%;\n}",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(37);var o,a=n(39),s=(o=a)&&o.__esModule?o:{default:o};n(40),n(41),n(42),n(43),n(65),n(66),n(67),n(74);var u=n(88),c=u.handleKeyEvents,l=u.handlePlayPauseEvent,f=u.handleFullScreenEvent,h=u.handleEditorButtonEvent,d=u.toggleSubtitlesEvent,p=u.handleSubtitleMenuEvent,g=u.openEditorTypeEvent,v=n(89).default.locales,m=n(90),y=void 0,w=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.elem=t,this.videoId="",this.avcomponent,this.timeupdate,this.manifest,this.manifesturl,this.editorurl,this.banana)}return i(e,[{key:"init",value:function(t,e,n){this.createAVComponent(),this.createManifest(t),this.editorurl=e,this.state={limitToRange:!1,autoSelectRange:!0,constrainNavigationToRange:!0,virtualCanvasEnabled:!0},0!==n.length&&void 0!==v.find(function(t){return t.code===n})||(n="en");var r=new s.default(n);r.load(m[n],n),this.banana=r}},{key:"createAVComponent",value:function(){var e=this;this.$avcomponent=t('<div class="iiif-av-component" tabindex="0"></div>'),t(this.elem).append(this.$avcomponent);var n=this;this.avcomponent=new IIIFComponents.AVComponent({target:this.$avcomponent[0]}),this.avcomponent.on("mediaerror",function(t){e.handleMediaError(n,t)}),this.avcomponent.on("log",function(t){console.log(t)}),this.avcomponent.on("play",function(){t("#"+n.elem.id+" .playwrapper").hide(),t("#"+n.elem.id+" .button-play").attr("title",n.banana.i18n("player-pause"))}),this.avcomponent.on("pause",function(){clearInterval(n.timeupdate),t("#"+n.elem.id+" .button-play").attr("title",n.banana.i18n("player-play"))}),this.avcomponent.on("mediaready",function(){e.handleMediaReady(n)}),this.avcomponent.on("fullscreen",function(){f(n)}),this.avcomponent.on("volumechanged",function(e){var r=0!==e?"player-mute":"player-unmute";t("#"+n.elem.id+" .volume-mute").attr("title",n.banana.i18n(r))}),this.$avcomponent.on("keydown",function(t){c(n,t)})}},{key:"itemSelectListener",value:function(e){void 0===this.handler&&(this.handler=this),this.handler.videoId=e;var n=this;this.handler.ldManifest(e,function(e){n.manifest=e.manifest;var r=e.getCanvases();r.length>1?initCanvasNavigation(r):t(".canvasNavigationContainer").hide()},function(t){console.error("ERROR: Could not load manifest data.",t)})}},{key:"ldManifest",value:function(t,e,n){var r=this;Manifold.loadManifest({iiifResourceUri:t,collectionIndex:0,manifestIndex:0,sequenceIndex:0,canvasIndex:0}).then(function(t){y=t,r.avcomponent.set({helper:y,limitToRange:r.state.limitToRange,autoSelectRange:r.state.autoSelectRange,constrainNavigationToRange:r.state.constrainNavigationToRange,virtualCanvasEnabled:r.state.virtualCanvasEnabled}),e(y),r.resize()}).catch(function(t){n(t)})}},{key:"resize",value:function(){var e=t("#"+this.elem.id+" .playerContainer");e.height(.75*e.width()),this.avcomponent.resize()}},{key:"createManifest",value:function(t){var e=void 0;t.manifest?e=t.manifest:t.source.startsWith("EUS_")&&(e="https://videoeditor.noterik.com/manifest/euscreenmanifest.php?id="+t.source),this.manifesturl=e,this.itemSelectListener(e)}},{key:"initLanguages",value:function(){var e=this,n=t("#"+this.elem.id+" video")[0].textTracks;if(0!==n.length){t(".btn[data-name=Subtitles]").show();for(var r="<div class='anno subtitlemenu'>",i=function(t){r+="<div class='subtitlemenu-option' data-language='"+n[t].language+"'>"+v.find(function(e){return e.iso===n[t].language}).name+"</div>"},o=0;o<n.length;o++)i(o);r+="</div>",t("#"+this.elem.id+" .canvas-container").append(r),t('button[data-name="Subtitles"]')[0].addEventListener("click",function(t){d(e,t)});var a=this;t(".subtitlemenu-option").on("click",function(t){p(a,t)})}}},{key:"hasEnded",value:function(){return!!t("#"+this.elem.id+" video").length&&t("#"+this.elem.id+" video")[0].ended}},{key:"handleMediaError",value:function(e,n){console.error("media error",n),t("#"+e.elem.id+" .player").removeClass("player--loading");var r=this.banana.i18n("player-error")+": ";switch(n.code){case 1:r+=this.banana.i18n("player-error-loading");break;case 2:r+=this.banana.i18n("player-error-network");break;case 3:r+=this.banana.i18n("player-error-decoding");break;case 4:r+=this.banana.i18n("player-error-format");break;default:r+=this.banana.i18n("player-error-unknown")}t("#"+e.elem.id+" .canvas-container").append("<div class='anno errormessage'>"+r+"</div>")}},{key:"handleMediaReady",value:function(e){e.avcomponent.canvasInstances[0]._canvasWidth<400&&this.optimizeForSmallerScreens(),this.updateAVComponentLanguage(e);var n=this.createButton("Subtitles",this.banana.i18n("player-subtitles"),"av-icon-subtitles");(t("#"+e.elem.id+" .controls-container").append(n),e.editorurl&&e.editorurl.length>0)&&(e.needToShowMenu(e)&&this.addEditorOption(e));t("#"+e.elem.id+" .canvas-container").append("<div class='anno playwrapper'><span class='playcircle'></span></div>"),t("#"+e.elem.id).css({width:e.avcomponent.canvasInstances[0]._canvasWidth,height:e.avcomponent.canvasInstances[0]._canvasHeight}),t("#"+e.elem.id+" .canvas-container").on("click",function(){l(e)})}},{key:"optimizeForSmallerScreens",value:function(){t(".iiif-av-component .controls-container .volume").css({width:80}),t(".iiif-av-component .controls-container .volume .volume-slider").css({width:42})}},{key:"addEditorOption",value:function(e){var n=this.createButton("More",this.banana.i18n("player-more"),"av-icon-more");n[0].addEventListener("click",function(t){h(e,t)}),t("#"+e.elem.id+" .controls-container").append(n),this.handleMenuOptions(e)}},{key:"updateAVComponentLanguage",value:function(e){t("#"+e.elem.id+" .volume-mute").attr("title",e.banana.i18n("player-mute")),t("#"+e.elem.id+" .button-fullscreen").attr("title",e.banana.i18n("player-fullscreen")),t("#"+e.elem.id+" .button-play").attr("title",e.banana.i18n("player-play"))}},{key:"createButton",value:function(e,n,r){return t('<button class="btn" data-name="'+e+'" title="'+n+'"><i class="av-icon '+r+'" aria-hidden="true"></i>'+n+"</button>")}},{key:"handleMenuOptions",value:function(e){var n=this;t("#"+e.elem.id+" .canvas-container").append("<div class='anno moremenu'></div>");var i={embed:!0,annotation:!1,playlist:!1,subtitles:!1};i=e.determineOptionDisplay(e,i);var o=function(r,i){i&&(t("#"+e.elem.id+" .moremenu").append("<div id='create-"+r+"-link' class='moremenu-option'>"+n.banana.i18n("player-create-"+r)+"</div>"),t("#create-"+r+"-link").on("click",function(t){g(e,t,r)}))},a=!0,s=!1,u=void 0;try{for(var c,l=Object.entries(i)[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value,h=r(f,2);o(h[0],h[1])}}catch(t){s=!0,u=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw u}}}},{key:"needToShowMenu",value:function(t){var e=!0,n=!1,i=void 0;try{for(var o,a=Object.entries(t.manifest.__jsonld.rights)[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=o.value,u=r(s,2),c=u[0];if("allowed"===u[1]&&("embed"===c||"annotation"===c||"playlist"===c||"subtitles"===c))return!0}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}return!1}},{key:"determineOptionDisplay",value:function(t,e){var n=!0,i=!1,o=void 0;try{for(var a,s=Object.entries(t.manifest.__jsonld.rights)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,c=r(u,2),l=c[0];"allowed"===c[1]&&(e[l]=!0)}}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return e}}]),e}();e.default=w}).call(this,n(0))},function(t,e,n){var r=n(38);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,".iiif-av-component {\n  position: relative;\n  overflow: hidden;\n  background: #000;\n  height: 100%;\n  width: 100%;\n  margin: 0 auto;\n  font-family: \"Open Sans\";\n  outline: none;\n}\n\n.iiif-av-component .player {\n  width: 100%;\n  height: 100%;\n}\n\n.iiif-av-component .player--loading {\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n  background-image: url(data:image/gif;base64,R0lGODlhFAAUAMQSAGxsbFpaWnh4eEZGRhwcHD8/PzU1NVJSUisrKwgICH5+fkxMTGNjYyUlJXJycnt7exISEoCAgAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1OTFjMzhjNS0xZmQyLTg5NGUtYjMyZi1kYTNkZWQ5NmQ5YjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Qzc0OEE1NDA5OTMzMTFFNUFBRjI5MkI3NTFFODJFRTYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Qzc0OEE1M0Y5OTMzMTFFNUFBRjI5MkI3NTFFODJFRTYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTkxYzM4YzUtMWZkMi04OTRlLWIzMmYtZGEzZGVkOTZkOWIzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU5MWMzOGM1LTFmZDItODk0ZS1iMzJmLWRhM2RlZDk2ZDliMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkAABIALAAAAAAUABQAAAVAoCSOZGmeaKqmSeu+LRpEdG0Hsq1H+DnvtZ7pB+TlikYfMjlcCktE4JMU3U1HVd1VlL2hCIiweExYmc/otHoUAgAh+QQJAAASACwAAAAAFAAUAAAFWqAkjmRpnmgqEgyhnkykHNA7GlEePUXyJg6dzoFQDYTI1gnyQCIVC1PA6YySGlSkwEcCZIWGEu6bA5gSCwW5gWJlAy+EV6io/QrN3MA2ShwUW3wkBGyChocSIQAh+QQFAAASACwAAAAAFAAUAAAFXKAkjmRpnmhaJsuimoYQKcQrNkCkR8wLBbsgApUYKIJBR8LUcCCfBRPh+Aw+IKZDFXkwQR7bHc1UCO96q1yYUTMhtg6DioFUDJaq6S6AtUkWEQANfiMJcoSIiSUhADs=);\n}\n\n.iiif-av-component .poster-container {\n  position: absolute;\n  width: 100%;\n  top: 0;\n}\n\n.iiif-av-component .poster-container .poster-image {\n  position: absolute;\n  background-color: #000;\n  background-size: contain;\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  cursor: pointer;\n}\n\n.iiif-av-component .poster-container .poster-image .btn {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n}\n\n.iiif-av-component .canvas-container {\n  position: relative;\n  width: 100%;\n  height: 100% !important;\n}\n\n.iiif-av-component .canvas-container video {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n\n.iiif-av-component .canvas-container .working-indicator {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  z-index: 10000;\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n  text-align: center;\n  padding-top: 30%;\n  box-sizing: border-box;\n  font-size: 20px;\n}\n\n.iiif-av-component .canvas-container .anno {\n  position: absolute;\n  background: transparent;\n  font-size: 14px;\n  font-weight: bold;\n  color: #fff;\n}\n\n.iiif-av-component .range-timeline-container {\n  background: #14a4c3;\n  height: 4px;\n  border: none;\n  border-radius: 0;\n  cursor: pointer;\n}\n\n.iiif-av-component .canvas-timeline-container {\n  background: rgba(255,255,255,0.4);\n  height: 5px;\n  width: 0px;\n  border: none;\n  cursor: pointer;\n}\n\n.iiif-av-component .hover-preview {\n  position: absolute;\n  z-index: 1;\n  padding-bottom: 7px;\n}\n\n.iiif-av-component .hover-preview .label {\n  background: rgba(66, 66, 66, 0.85);\n  height: 18px;\n  padding: 5px;\n  color: #fff;\n  line-height: 8px;\n}\n\n.iiif-av-component .hover-preview .pointer {\n  height: 6px;\n  position: relative;\n}\n\n.iiif-av-component .hover-preview .pointer .arrow {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  border-top: 6px solid rgba(66, 66, 66, 0.85);\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n}\n\n.iiif-av-component .hover-highlight {\n  position: absolute;\n  background: #e2e2e2;\n  height: 4px;\n}\n\n.iiif-av-component .canvas-timeline-container {\n  border-radius: 0;\n}\n\n.iiif-av-component .canvas-timeline-container .duration-highlight {\n  position: absolute;\n  background: #14a4c3;\n  height: 4px;\n}\n\n.iiif-av-component .timeline-item-container {\n  position: relative;\n  width: 100%;\n  min-height: 6px;\n  background: #cfcfcf;\n  top: 0px;\n  padding-bottom: 3px;\n}\n\n.iiif-av-component .timeline-item-container .line-wrapper {\n  margin-top: 2px;\n}\n\n.iiif-av-component .timeline-item-container .timeline-item {\n  position: relative;\n  height: 6px;\n  box-sizing: border-box;\n  border-right: 1px solid #efefef;\n  border-left: 1px solid #efefef;\n  background: #777;\n}\n\n.iiif-av-component .timeline-item-container .timeline-item.active {\n  background: #333;\n}\n\n.iiif-av-component .canvas-timeline-container .ui-slider-range {\n  background: #79B2E3;\n  box-sizing: border-box;\n  border-radius: 0;\n  cursor: pointer;\n}\n\n.iiif-av-component .canvas-timeline-container .ui-slider-handle {\n  width: 14px;\n  height: 14px;\n  margin-left: -7px;\n  margin-top: 0;\n  border: none;\n  border-radius: 7px;\n  background: #79B2E3;\n  z-index: 2;\n  cursor: pointer;\n}\n\n.iiif-av-component .canvas-timeline-container .ui-slider-handle:focus {\n  outline-width: 0;\n}\n\n.iiif-av-component .range-timeline-container .ui-slider-range {\n  background: #79B2E3;\n  box-sizing: border-box;\n  border-radius: 0;\n  cursor: pointer;\n}\n\n.iiif-av-component .range-timeline-container .ui-slider-handle {\n  width: 14px;\n  height: 14px;\n  margin-left: -7px;\n  margin-top: 0;\n  border: none;\n  border-radius: 7px;\n  background: #79B2E3;\n  z-index: 2;\n  cursor: pointer;\n}\n\nbutton:focus {\n  outline:0;\n}\n\n.iiif-av-component .range-timeline-container .ui-slider-handle:focus {\n  outline-width: 0;\n}\n\n.iiif-av-component .controls-container {\n  overflow: hidden;\n  margin-top: 5px;\n  height: 36px;\n}\n\n.iiif-av-component .controls-container .btn {\n  float: left;\n}\n\n.iiif-av-component .controls-container .pause-button {\n  margin-right: 14px;\n}\n\n.iiif-av-component .controls-container .time-display {\n  float: left;\n  padding: 8px 0px 0 10px;\n  color: rgba(255, 255, 255, 0.5);\n  min-width: 150px;\n  font-size: 14px;\n}\n\n.iiif-av-component .controls-container .time-display .canvas-time {\n  color: #fff;\n}\n\n.iiif-av-component .controls-container .time-display .canvas-duration {\n  color: #fff;\n}\n\n.iiif-av-component .controls-container .volume {\n  float: right;\n  overflow: hidden;\n  width: 140px;\n}\n\n.iiif-av-component .controls-container .volume .volume-mute {\n  float: left;\n  padding-left: 0px;\n  padding-right: 2px;\n}\n\n.iiif-av-component .controls-container .volume .volume-slider {\n  float: left;\n  margin-top: 12px;\n  width: 84px;\n  height: 5px;\n  border: none;\n  border-radius: 0;\n  background-color: rgba(255,255,255,0.4);  \n}\n\n.iiif-av-component .controls-container .volume .volume-slider .ui-slider-handle {\n  top: 0px;\n  width: 14px;\n  height: 14px;\n  margin-left: -7px;\n  margin-top: -4px;\n  border: none;\n  border-radius: 7px;\n  background: #79B2E3;\n  z-index: 1;\n  cursor: pointer;\n}\n\n.iiif-av-component .controls-container .volume .volume-slider .ui-slider-handle:focus {\n  outline: none;\n}\n\n.iiif-av-component .controls-container .volume .volume-slider .ui-slider-range {\n  background: #79B2E3;\n  box-sizing: border-box;\n  border-radius: 0;\n  cursor: pointer;\n}\n\n.iiif-av-component .btn {\n  font-size: 0;\n  background: 0 0;\n  border: 0;\n  box-shadow: none;\n  padding: 0 5px 0 0;\n}\n\n.iiif-av-component .btn i {\n  background-repeat: no-repeat;\n  display: inline-block;\n  height: 30px;\n  vertical-align: middle;\n  width: 25px;\n  cursor: pointer;\n  font-size: 0;\n}\n\n.iiif-av-component .av-icon-mute.on {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='18px' viewBox='0 0 21 18' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Evolume icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-806.000000, -747.000000)' fill='%23D6D9DD'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M724.409666,36.0186916 C724.196024,36.0186916 723.982383,35.9286009 723.81937,35.7478023 C723.493344,35.3862052 723.493344,34.8006155 723.81937,34.4390184 C725.343235,32.7488915 726.182223,30.5021766 726.182223,28.1123038 C726.182223,25.722431 725.343235,23.4757161 723.81937,21.7855892 C723.493344,21.4239921 723.493344,20.8377853 723.81937,20.4768053 C724.145396,20.1152082 724.673936,20.1152082 724.999405,20.4768053 C726.838169,22.5161881 727.851297,25.2281661 727.851297,28.1123038 C727.851297,30.9964415 726.838726,33.7084195 724.999405,35.7478023 C724.836392,35.9286009 724.622751,36.0186916 724.409109,36.0186916 L724.409666,36.0186916 Z M721.369341,34.2610664 C721.167679,34.2610664 720.966017,34.1711506 720.812145,33.9907031 C720.504401,33.6298082 720.504401,33.0453555 720.812145,32.6844605 C722.962152,30.1631228 722.962152,26.0608683 720.812145,23.5395306 C720.504401,23.1786357 720.504401,22.5935671 720.812145,22.233288 C721.119889,21.8723931 721.618792,21.8723931 721.926011,22.233288 C723.26517,23.8037353 724.002495,25.8915063 724.002495,28.1123035 C724.002495,30.3331007 723.26517,32.4208717 721.926011,33.991319 C721.772139,34.1717664 721.570477,34.2616822 721.368815,34.2616822 L721.369341,34.2610664 Z M718.549414,32.5040591 C718.303329,32.5040591 718.057244,32.4144502 717.869476,32.2346187 C717.49394,31.8749556 717.49394,31.2924979 717.869476,30.9328348 C719.493381,29.3775682 719.493381,26.846424 717.869476,25.2911574 C717.49394,24.9314943 717.49394,24.3484228 717.869476,23.9893735 C718.245012,23.6297104 718.853175,23.6297104 719.228711,23.9893735 C721.602406,26.2627387 721.602406,29.9618673 719.228711,32.2352325 C719.040943,32.415064 718.794858,32.5046729 718.548773,32.5046729 L718.549414,32.5040591 Z M715.075595,19.6162444 C715.516558,19.1130715 715.877246,19.2837236 715.877246,19.9951926 L715.877246,36.2291065 C715.877246,36.9405754 715.516558,37.1112276 715.075595,36.6080547 L710.928785,31.8762217 L708.179641,31.8762217 L708.179641,24.34745 L710.928785,24.34745 L715.075595,19.615617 L715.075595,19.6162444 Z' id='volume-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");  \n  margin-top: 5px;\n}\n\n.iiif-av-component .av-icon-mute.on:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='18px' viewBox='0 0 21 18' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Evolume icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-806.000000, -747.000000)' fill='%23FFFFFF'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M724.409666,36.0186916 C724.196024,36.0186916 723.982383,35.9286009 723.81937,35.7478023 C723.493344,35.3862052 723.493344,34.8006155 723.81937,34.4390184 C725.343235,32.7488915 726.182223,30.5021766 726.182223,28.1123038 C726.182223,25.722431 725.343235,23.4757161 723.81937,21.7855892 C723.493344,21.4239921 723.493344,20.8377853 723.81937,20.4768053 C724.145396,20.1152082 724.673936,20.1152082 724.999405,20.4768053 C726.838169,22.5161881 727.851297,25.2281661 727.851297,28.1123038 C727.851297,30.9964415 726.838726,33.7084195 724.999405,35.7478023 C724.836392,35.9286009 724.622751,36.0186916 724.409109,36.0186916 L724.409666,36.0186916 Z M721.369341,34.2610664 C721.167679,34.2610664 720.966017,34.1711506 720.812145,33.9907031 C720.504401,33.6298082 720.504401,33.0453555 720.812145,32.6844605 C722.962152,30.1631228 722.962152,26.0608683 720.812145,23.5395306 C720.504401,23.1786357 720.504401,22.5935671 720.812145,22.233288 C721.119889,21.8723931 721.618792,21.8723931 721.926011,22.233288 C723.26517,23.8037353 724.002495,25.8915063 724.002495,28.1123035 C724.002495,30.3331007 723.26517,32.4208717 721.926011,33.991319 C721.772139,34.1717664 721.570477,34.2616822 721.368815,34.2616822 L721.369341,34.2610664 Z M718.549414,32.5040591 C718.303329,32.5040591 718.057244,32.4144502 717.869476,32.2346187 C717.49394,31.8749556 717.49394,31.2924979 717.869476,30.9328348 C719.493381,29.3775682 719.493381,26.846424 717.869476,25.2911574 C717.49394,24.9314943 717.49394,24.3484228 717.869476,23.9893735 C718.245012,23.6297104 718.853175,23.6297104 719.228711,23.9893735 C721.602406,26.2627387 721.602406,29.9618673 719.228711,32.2352325 C719.040943,32.415064 718.794858,32.5046729 718.548773,32.5046729 L718.549414,32.5040591 Z M715.075595,19.6162444 C715.516558,19.1130715 715.877246,19.2837236 715.877246,19.9951926 L715.877246,36.2291065 C715.877246,36.9405754 715.516558,37.1112276 715.075595,36.6080547 L710.928785,31.8762217 L708.179641,31.8762217 L708.179641,24.34745 L710.928785,24.34745 L715.075595,19.615617 L715.075595,19.6162444 Z' id='volume-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");  \n  margin-top: 5px;\n}\n\n.iiif-av-component .av-icon-mute.off {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gcKDQk0smvw8gAAAOlJREFUSMftlTFKBEEQRd+fXRdBENlATDTyCoJHEA29gxcyNzPXzFSMBTOvYKRgoCDMPgMblGWDYZwZA+dF1VDVv7qqqIaRkZGOyG8vUOfAO7AOkOSl96zVU/VC3SjnagjRY7+4ahNftRQ9Aa7L8a3NHdOGQgfADHgGDoHzVbFqktiZMHADzIHFiirZZ6mrhv7ptcdd8GfCTXt8D2wDr8AusNfXQlqe1ok6KfaO+uA3lz/8qk5LnaROUhf7CTgC7pZfmWQxxObaVB/V28EHRN1Xz9St0o7ZYL9TSWAKrAF1ko/x0x8Z+R98AhcTb2KBHKCUAAAAAElFTkSuQmCC\");\n  margin-top: 5px;\n}\n\n.iiif-av-component .av-icon-previous {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gcJDCgq14wdqwAAAJ9JREFUSMft1TsOQUEUgOETpUYpcmMFEtuwEyvR2oLeQpQ6m6AiEY/Gp0CDK5L7Epm/mzmT+c/JzJyJSCQSdYI1Tuh9WNPGpGzx0Y0sJ97BAmoTo4/VPb77ds9WwYRGEbGMiMFjqvKKMfbKtipx9z6eek/p4gMuGGImn9LFe5wx95n/qbixM278VmfP7xib2sVFOtfP9+pmfqdEIvHTXAHKs7eDn/hqpQAAAABJRU5ErkJggg==\");\n}\n\n.iiif-av-component .av-icon-play.play {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='21px' viewBox='0 0 21 21' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Eplay icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-105.000000, -747.000000)' fill='%23D6D9DD'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M7.09481147,39.4485981 C7.02536685,39.4485981 6.93277401,39.4254499 6.86332938,39.3791535 C6.74758834,39.3097089 6.67814371,39.1708196 6.67814371,39.0319304 L6.67814371,19.8652134 C6.67814371,19.7263242 6.74758834,19.5874349 6.86332938,19.5179903 C7.00221864,19.4253975 7.14110789,19.4253975 7.27999714,19.4948421 L26.4467141,29.0782006 C26.5856033,29.1476452 26.6781962,29.2865344 26.6781962,29.4485719 C26.6781962,29.6106094 26.5856033,29.7494986 26.4467141,29.8189432 L7.27999714,39.4023017 C7.21055252,39.4254499 7.1642561,39.4485981 7.09481147,39.4485981 Z' id='play-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n  margin-top: 8px;\n}\n\n.iiif-av-component .av-icon-play.play:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='21px' viewBox='0 0 21 21' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Eplay icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-105.000000, -747.000000)' fill='%23FFFFFF'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M7.09481147,39.4485981 C7.02536685,39.4485981 6.93277401,39.4254499 6.86332938,39.3791535 C6.74758834,39.3097089 6.67814371,39.1708196 6.67814371,39.0319304 L6.67814371,19.8652134 C6.67814371,19.7263242 6.74758834,19.5874349 6.86332938,19.5179903 C7.00221864,19.4253975 7.14110789,19.4253975 7.27999714,19.4948421 L26.4467141,29.0782006 C26.5856033,29.1476452 26.6781962,29.2865344 26.6781962,29.4485719 C26.6781962,29.6106094 26.5856033,29.7494986 26.4467141,29.8189432 L7.27999714,39.4023017 C7.21055252,39.4254499 7.1642561,39.4485981 7.09481147,39.4485981 Z' id='play-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.iiif-av-component .av-icon-play.pause {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='15px' height='15px' viewBox='0 0 15 15' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Epause icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='annotation-type-dropdown-menu' transform='translate(-19.000000, -212.000000)' fill='%23D6D9DD'%3E%3Cg id='dropdown' transform='translate(5.000000, 0.000000)'%3E%3Cpath d='M18.5156143,226.968748 L15.5156214,226.968748 C14.6874984,226.968748 14.015625,226.296874 14.015625,225.468751 L14.015625,214.468777 C14.015625,213.640654 14.6874984,212.968781 15.5156214,212.968781 L18.5156143,212.968781 C19.3437373,212.968781 20.0156107,213.640654 20.0156107,214.468777 L20.0156107,225.468751 C20.0156107,226.296874 19.3437373,226.968748 18.5156143,226.968748 Z M28.0155916,225.468751 C28.0155916,226.296874 27.3437182,226.968748 26.5155952,226.968748 L23.5156024,226.968748 C22.6874793,226.968748 22.0156059,226.296874 22.0156059,225.468751 L22.0156059,214.468777 C22.0156059,213.640654 22.6874793,212.968781 23.5156024,212.968781 L26.5155952,212.968781 C27.3437182,212.968781 28.0155916,213.640654 28.0155916,214.468777 L28.0155916,225.468751 Z' id='pause-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n  margin-top: 8px;\n}\n\n.iiif-av-component .av-icon-play.pause:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='15px' height='15px' viewBox='0 0 15 15' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Epause icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='annotation-type-dropdown-menu' transform='translate(-19.000000, -212.000000)' fill='%23FFFFFF'%3E%3Cg id='dropdown' transform='translate(5.000000, 0.000000)'%3E%3Cpath d='M18.5156143,226.968748 L15.5156214,226.968748 C14.6874984,226.968748 14.015625,226.296874 14.015625,225.468751 L14.015625,214.468777 C14.015625,213.640654 14.6874984,212.968781 15.5156214,212.968781 L18.5156143,212.968781 C19.3437373,212.968781 20.0156107,213.640654 20.0156107,214.468777 L20.0156107,225.468751 C20.0156107,226.296874 19.3437373,226.968748 18.5156143,226.968748 Z M28.0155916,225.468751 C28.0155916,226.296874 27.3437182,226.968748 26.5155952,226.968748 L23.5156024,226.968748 C22.6874793,226.968748 22.0156059,226.296874 22.0156059,225.468751 L22.0156059,214.468777 C22.0156059,213.640654 22.6874793,212.968781 23.5156024,212.968781 L26.5155952,212.968781 C27.3437182,212.968781 28.0155916,213.640654 28.0155916,214.468777 L28.0155916,225.468751 Z' id='pause-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.iiif-av-component .av-icon-next {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gcJDCkVePEB1wAAAKJJREFUSMftlbENwjAQRb8iqqSgRFHEBEiswRw0TJI2K7ANJR1LQJU0gISUR+MKSJTCOhzpXuPirHu2zz5LjuNYAtRAPhIvgSdwjS0GOAHLgXgV5jxii7uQ+AKsY4izqe4wbiSdgZ1VjVu+OVgc9S8xQBPiK2sxwBHYAj1wn5pzEWFde0mFpJekPvkdz7LG5rf69vmOZ9W5ku/V//mdHMdJmjdBx46OkJJ4sAAAAABJRU5ErkJggg==\");\n}\n\n.iiif-av-component .av-icon-expand.expand {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAMsnpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZlJciM9DoX3PEUfITmAw3E4RvQN+vj9gUxbloca7F704i9FKWWKyQSBh4cHysz//HuZf/EvJBtNkJRjifHiXyihuMqHfJ1/52qvsN/PH/P+zj6Pm9cvHEOeqz9/xnvcVsblcUMK93h7Hjep3+vke6H7i5cFvT7Z8eGel++FvDvj9v7blPu+Gt5s5/7v017idfL7v0PCGUMY9M646a2/eA/6FI8FPvvKNfFufXQ64vnsuOp7+Nx35vXjO+e9fnrnu6ve4/7ZFeaK94T4zkf3uJXPfbc99BS1x5OfvhCxD9ve+W6tkdeaZ3c1RDwVzb2pl63sT0xsuNLv2yKvxH/hc9qvwiuzxY7TB9FsvLqxxTq8vWyww1a77NzXbjsmBjdd4upcx9c6ln1yxfUdlKAvu1zyxQ9DjJzvRM0z7F5tsfu5ZT+v28yTh2WmsyxmuePDy3w2+J3X60JrKXRxcH71FXY5BSBmaOT0nVkExK7bp7L9u1/meo7NS2A9EZTt5swG69XOEk3sA1t+x9kzT65grgN3m8a9AC7i2YIx1hOBK1ovNtorOZesxY+Z+FQsB+SuEQEr4oY1i9h4MiG57PTZ3JPsnuvEnWGohUCIj6RNJkKVYIUg4CeFDIaqeAlGRKIkyVKkRh9DlBhjispRNfkUkqSYUsqppJp9DllyzCnnXHItrngoTEosyZRcSqmVh1aWrtxdmVFrc8230KTFllpupdUOfHro0mNPPffS63DDD9J/xJHMyKOMOu0ESjNMmXGmmWeZdYG15VdYsuJKK6+y6mvU7qg+R82+i9yvo2bvqGnEwp6XHlFjOKWXJazSiWjMiJgLlognjQCAdhqzK9sQnEZOY3YVR1KII2pWNDjDasSIYJjWybKvsXtE7pdxMxL+Km7uq8gZDd3/InJGQ3dH7mPcPonaqLui+B0gzUL16eUXxMaEmavLVWvSt6/mpwv8s9D//UIrXCtHWVdva1oSZgFesnksxVHza3Y7hZHWUmltpbmg9wVULVCda0QGdSRHVllV5yxX9thoMa9Riklrxlh0qKWgwB2ylEGu1Ne++eo8folPzOR9z4zD6vV8RXnnS3N/2zRTED73Clq2nyc+5ukaHxc371b4CxueTTDft+HZBPN9G55NMN+34dkE8/c2ZLSPT9MW8OIaHKTTszlogDlHW33o55Lici3GPpgETJJviJ0qqayR9uw5vOjVu5b4at9lJrJqqcT8dn6sE35A+YLJjUiwemPydmRTyaP7HX7bPnWm1DZV/V0zrh7b9HC2R/snVQkV1i+XjD6u0BIum7VFqkBHsdVGeZkzis0otrlmka5iyQfKiz9by7bVyVZXztiY2epqfL168duIiUd3ECD2wsOjGrLIVdK2+tb3d4tKO0Yia0lhbuqUMxaLea5r73zQAcjeYlt242XZUVfJxztvljuADD9fzrw17yfLmY+7/d5y5uNuv7ecedptAxVWQIWCIhVAMQBFSQoKlJCka0QyAglSa5fswEeII0ZAgfIHFU2Go7fdQe5z48KF5WU/q121A0I0hqvrBL8cKi51p1QRGNyMm5/zSBk0f5lLv0sl86e59LtUMr/JJRQpBYH8n6HMeG/JSt5shGZrspD+afgNyN+nxCfWTnJsIjeXJbXGZVBmZNq8Wo0s4naYg/U97sWCq7FtO7KbSl25sMzI7dJZ07cRVpgoumWaH1eDE6XVXFhHIDME7kDYIVN9dqvYQmPOZg9/1tCm0w1fGoXigcz2UU+uzerXBS94qSvb1P1A69HA0PctG0uJvbhAU1ME2FirXUv2nXe2VUdXV2ZDt9KGNkALkmrWT8Qv5i0t1ZWCPGNgAjJyTrm6L4LynrqOrR1Niduz6gCcbZ0KAYv/S+vs/VoQWkqxuVRsY7Ou11As6vwK8Zq0pV11eoD+0a2JgPDoEg1AhAyXZsLidu+buxDdcyLfVUfPkDv3XrZH+riyog/0IkGLh6bASwI0c/CPD18yYCOn9HSQQ9+tuCn+xo3I1C7dLgXKToAb/mbowEG/QngQbgAs8eiTtuEoc5+rCIXty6v5eoKdv60imr06hmoyi+aBbYx7WpNdUlnF/wnmN48pTaliK4SnnsTMErlhWLrd1Ptb6wj6FQb9Db1wG62DguE7DaODh+iyuumzh30KllzgyRHXPeXQxxSit8NIiPMaTODZXChHsQ4t+5+4KK80puvMn1BIcVIITM4+VDqmmpdtCIkJHjKs7GhFLWhN9IbAdYEq1Q52JR4ELfNxSB49aq8mVfkH0wI06IQS3FzNcflIThonwLYA1WTndM2t6XfoexGyd4fhcE+ZvoKel0pBYBKe3w5WHxj2ePiO3hWmvTZ1v0PtB9Ae2tbFlLY3aSNr5hl6kPYTYt8A9gfKf2P9QdbvtHhCmNSImK89othQOAvJQsaPaCdp2/tqTuhdMRjv0SerE6O2pAJjHXojgrmDkxybFtJ1GfJ9u87KIynewlkr3Qb0A870wqF1ILAismke7jANRlFDAemIvtVWU5Hg47XZAw6ZFwat5KXoMa0k5bUdnuIynFR3MEY1J3eG1JGVz6NVrlpdj4RqpwgPd7UG6fmOFlPqzTfJ5RAlIAX0XGNlMWlQ0RMczwZo70kl9Q1bB3Ux5YKvSJ6kVN30BJZCYK+m7zMpx7WieSAIdns+4KQFN/Z4JLJro87TRikgMChB65lEjWUiHgTIp5zjmGOpu0haVRm1UAtCsh0vu1qJfZF9sBv1BI+uTU8XoPoJQlE+xS0yYM7EpmvxJF0sZgbvqE37hBol4/V+tpkvbLqzd4XfY32Z7zH0R4I232Poj1fzYOiJwMaXsIWfLR38wmGxRSqsV5uxndIHY9OahNa81/MY2zKlKpnL11Qx8FTwrR9uFYl+2BLezbyXRT+cUvVp7pnTCKMdegJwI+o5fco29jh90GIeRrNlNLgLp+hhkgQtnAs6hMZc3aXz8iardydUiHDpEKsA08rulFhHDfYu3mvzqrfO6c8AhQSqZV5Tz7iX7ocu+9d6bAbURdAJzM5bWUbdYA3L6VbQR9GjIShHh9rtmJITznihdn/rh0Pt8HmO+isF1ijAY7/T4TUtUCMz/QL5fwj8gqyZltZz6/uqlQz01kP3aopyZBrJ4hBiAAaSsn2hUIpr8JWf2gP4Zp1BwUAFnuo4C2iyfUFoWlHd6IJRd0XFWai26PouqPp57YJKNvhNy+bBz58VmT+vMebXRebPa4z5YXv9inPzSZHZNmxZdETRlkR6cvzSDkAW1pENsOgiVGXYkQ16PGpmNrwu1ju4v+qvLF3Pmnu12oHb1SeFJAS4uc1rHAF8oT9qgO/BdZsm+5RKcksbM2QJFEyoqWMqgJ0vVnD4YQsh8TuLWSdAL9DlFy1QBTrvGn4KCAkIEoCGXJOO3l4zYM8K0Y/ZuvN3b6ldhXaWu4ub52hNe8vLww8gGwEoAJsc1GTQ4IIR5PHAcw3usGlU2jU08wDC3e5cpQi2KbtVzNDTsubSGqrPgtIPnU10ETqtJSUWK1RTuIB2MQHwNDOiHsFDBYjL+ZAu/Jhdq0Z7ghiD8z57reSgOCu2NMQfrv7E75nkQRk0bwjvC8vLrWR9Xqf0B7+VLHxL4c+1jbwXO8L1Icg32Rsd2nwvB8MN7Qp+NHHjaUJBS+uX+9rOfTW/mODHqxz/VI3LutVKPxZ5r7hue2JEgr99uGJRYEBKBhiG+Ci4AUYlqzOzkTSYnemYkrEUF6J/7S5R7KjtHJApKJMWFCVdOGUfS6hI3Vb0eDymGaeHEW4Zdg97A3TaL5INnoaHvf6uNHvteDRDrKFU56oUdIgyooV4e16im6uiMn16Ku1mn+nknDqIjB0kNpnzS8QVdkpUejCi5116LLKPGq79na11U+29By2Kr3vQHby1396nx/dqesxy1tNjFrrO/XOGLrj+3Cf2UwvNexP/zMJ5jnUQjy9nfWZUmSX58XLYR+WA/JHL+7Cv1nnFIfuwj8Q9xzpvT2lf8WtO7dRj1APgczbzfKTzfKLzpiy+uZrwxRdvr8iV1KHevM9jtX9DU9C8oSoHabvVlXE8EcbDuNLuw1/N7nn3r3LSpHvdwgh1ux7G0OohW5Lpg06KrLez9hw9dpKQ1u9vf9xt/v72rL9JtHDSl5Yksc/h9DzbWsgukdqxuKE/aOjOm+ZjcAhgC6VSW702NlTaND6xJ1Tzk+283Y352e2Pu83Pbn/cbT7crpihYh3MNItfz80bNTBBvJZqZYUMfXOjzCJIWjY99pWAPij7K4H+pWD/6fWfhX5xXLVUthH+/wIEbtPlw9yp7QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+IHEAwVGFiiHIAAAAEYSURBVEjH7ZU/SgNREIe/iQkiCHbW4gEs9ALiBWIhEg+QC3gKxROIfRQLtTBVQCsrwQMIQvAEIlZafDZPkJB/u/tsZD9Y2LdvZ34zj5l5UFNT8+9Rh5ZjOM1vzCEscAHcFYh3B+hERFTJWLVd0KadAp5IY05fqwXjnfl/I1Md9NSTIjaNioIL6jVwAKypkVt4ZYxoAOfALnAJ7EeEOdvpUN0Y+bak3qbCu1GbI/vdWcVV9nj7SfRq3PFmEVYff9pJXVYHSXSgLk6wySKsupfe79O6r7am2HRz9fG6egZsAw+pkL7+elZ/qJ8p09Nck6s5h59WegBe1A7wHBFP6iawNWFWV874VX1T33/dPMdp76js7VRTU5ONb2qOOah9nJH0AAAAAElFTkSuQmCC\");\n}\n\n.iiif-av-component .av-icon-expand.collapse {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAMvnpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZlZduM8DoXfuYpeAudhORzP6R308vsDKTuxK3FVyv3QD39ciWRKgkhc4OKCpeZ//r3Uv/jxyWvlQ8qxxKj58cUXWznJ+vyco9F+/z1f5nXNPI6r+wXLkOPoztd4jZvKePh4IPlrvD2Oq9QvO/kydF24GXTyZsvJdV++DDl7xs31XZXrueo/Lef6dWmbuN/8/B3fFD8Cg84qO51xmr9e3uKYgcuuckz8NS5aGXGcW44ynr/2nbqfPjnvfvbkO12vcffoCqXjdUN88tE1bsLXvtseekDt480PF+IwH3N78t1aI681z+qqj3gqqmtRt6XsM25suNLtxyKfxG/gPO1P4ZNZYsfpAzQbn65MMRZvL+PNMNUsM/exm84UvZ02cbS242sZyy7ZYvsGxcvHLJtccUOBkXUd1BzD9j4Xs99b9vu6ybx5GO60BmOGJ375qK8G/+ZzN7SWhC4OzndfMS8rAcg0BDn5y10AYtbl07D9uz9KP2JzA9aBYNhuziyw6nZMtGA+YsttnB33Be2VPuFu0rgM4CLeHZiMcSCgo3HBRKOTtckY/JjBpzJz67xtIGBCsMOoBTaOTEg2W3k3zySz77XBnmGoBSCCi6RNBqEKWN4H4if5TAzV4IJXIYQYUsihhBpd9DHEGFMUjqrJJZ9CiimlnEqq2WWfQ4455ZxLrsUWB4WFEktSJZdSauWlFdOVpyt31Npsc8230GJLLbfSaid8uu+hx5567qXXYYcbpP+II6mRRxl1mkkoTT/DjDPNPMusi1hbbvkVVlxp5VVWvaN2ofqImnlC7jVq5kJNEPP7vvSBGsMp3UwYoZMgmIGY9QbEkyBAQFvBTGfjvRXkBDNdLEkRLKiZIOAMI4iBoJ/GhmXu2H0g9xI3FfyPcLPfIacEuv8Fckqgu5D7FbcvUBt1VxS3AZIsFJ9qtyA2bpi52lylJv31Ub1r4B9DL45taDdNSV3YlbpGcA0wLfLFuLRml7OmUwlr2TkIhjVWk6pA9LiY2gqYIi7Elty7MAeNrFm5dfUa92Ac1Z0r1wWCRi4tKZligJr9YOD2vHrXwO159a6B2/PqlYFcV6I0thVTXnO0xYMkZUur20A64TdyzbaybFOruZViHzObRpL1bkqPiT96m1t/Np+01HsL+liP+qmBSfTYuK7oySG5NbhPsn9Hz9CLpZd2Yiew1sKaR4t9psQlf4sdCcnjv8ej+u7CdYSIeKNMLcYdtNgUUhphwtF7UXjZ7hn1Ptxe3OTOFmpm8nmbmiwhtunCcKjoJPW2wp9Fh9GH9i1p8KktwqddIX5qg6nnjMFkxM9cs3hthg280W3/oY3G1PvtlfcB90rTIk0mTEwsOJ+Syns2An6diazKmcVkfKZT05ctQeGyJXBctrhjW+Np7KnLoNh7sgYmj/Zezk19TO7F3AhTqQArG8LHl0kf1OAJKmLbc7QlqjYt2FSLMcriSt226hLx4fOwk4ZgjRhqojLZHMf0MU+TKVbRe9qO3HtmZRYxKh1OavXPvRFmQfnGRT0uK7fWHaWxThWyT64nSmAgOa2flXaDAO4ZXWwseJe5QLEZH/gnrcASfw4WsJwlioekwlSIavxm29zuHVUWT9EmolI7I7Q7NHV3O98c1bc3SNhKJG/Bu2N2R6xIm9q63ikpYRyZGdwifDSuyG7irqFv3gJO8CxuG5mAcLwkjm4j29b3GnA+hizSr0o25RD3w8OgUA/e388UfeFR5XYJ/PRwITOk4qpolE7UQYE9oacqs/DV8E6uMAXR86giCKVt6pjGU4T8fnE1x5PMKB72yTOk4SEh10zLw7lOXBpmOn2aYYxQcVBcZHhp2YBqM7wGJdZFtaUalKxj7dXrjqyhTwLEEiWqhTskMUOYwheTmE2pTIMWtbHIe3AhPX5ihVNBgCmbXLwjKllZtihMOqEU67yXVbxPlOUKCQ0sxmbcRAAiwByFoc3sogI62oeC2ButYU7PQIvnZL7ZhUYQN3q5mQc6bKDo2hrMzc1BDBso2MS0bJlOdWmbCzPAUT6aVQAt9sB6TwgMQgCBt7Zq2yOsA95b5bB4qXKkrjFlSPoMZkE+67Ch1j87Kjk5EM7e95FWUiRDlVCNdV3ETYx9UPcmbkmfQfqQiSFltU2Q8Dsa/BIjW41UCVyEbqgr6npwJe/a5iMxJlFtQt5rQXKrJjbdwzQ9mNKkjdA92QtheCKUqozAnjCDb45g2zsSphdebgRbRctseyRYUMvUP76AtbMT8IMn5PzosFKK9Nro6qlp8s2IrTGVHKRF0CcD1alNvQyYheArwawMXRqorDbuG0j+LcFh0Nrp032o3OxkLoVepSL0c2Fp8j1IX0z3XlfD9mOZ7MTbIlhyXL43Hu9Swr2pIdQwfELv6b5SU6YLnVIxeqWpMOIeqqIUSRyZx0lJcA3j1FnhCpvybAQYUb1BgEWKqmSVsIhATkcFkHQZAdHYnCQx9aG5xBpow8hdmAH+74V01D7nkWmR6deIauXoiTPCqcljNNu5JNncgANbGnAM5JFqHLlPFGtnJgYqGNZ7if6ac/QaIEgRzPQFJxANSI7nwH+Me2qliLWUblUGvj+81I3KnbMeWFJOIm7qnHlJbnXrCkKEMkLztM2S6WU5N3tJuIVEWCXITK0IPGUmOSjO7e6veySpA9Jm7UIgC6m3SkAdkOR9lYO7+p8KsPlfHfDqSctTA3YFEO2Q8u8zUfq9fO9FmqE5MNgrVHc6WOiquMGPL2UUXImeNLKzVFwOJBgBLPweRk23NFA/yoOHNChu6iKVj/qj0dnAy3LgBsCva/4qJGHftAzvDnHEaYM0ykgI2JfcMNJigy99P5do0QlPb3RoVvg6IgWCR2rAaDHROXWcFuOCKObUrbVA/aWhdt5YaBqBob2KFLycth3yXpyddwAyQb4LJxL1CVipqBWNs+EOzpOrsAk5Q82g/6IXqTZShwaXi4+FN6N8KSRDNgt9zVJlJQVGDzHQ2eOG5vKhHmQBgS1vstKvZdStBKSWrkAL4ZHGmgKPa1iIiH60PhUM7kOK5GFcrxJLw+LV7jq9ojR+sB36saXppJ2hQ3C57+0DHDXXb7Lvo+qon5ad76qO+mnZ+S7W1U/Lzq3qpIr6MFZEFtgZfCSqiK6BKCaad00utB4oVjMC0kFkVRo1MB/87g+zeXBC1SwXLeRsMilELwLANCINW4g7jeQ9NE84yR4PrdVF82VHIB3LYXlvSCWzWR6GjQrg468Eg4pfxw8dhbJkCUINE+8iIsLRU4XugBdBZ1QCJUwZndtuNiFkRPc6VbYlk4ztp8qWJAlr8qmycr4zepG80rPctzSaKN9RxFviY7Jj4eGy+djL7tn271G/O7Afw5pZqRPWIndfSPawoe+nX/yQTOApEYNkylqRGvYdrr5RtXqXq29Urd7h6gabjNBkF7qqadCsnjoLZ3XY2lv6NOFbktyEniER5I0ksk5GXIsGn6JUIWJfLtJD5KtLW9RxCnuaBGRqA2ip8TAgQRvsJj5ohn6QohCpg6WOWbHYBwWbWSFrIGD0wvKGHo5wEZodo6OykCtbJ8PIRhIsoQUgzSEuGbTvRC1NQkNhIMjospuX5/Ok9aRxR1zkkkVYTDg8lc4ju4mEta4uEs53x8nhbHR0af6VVHnQo/2sqabQpf2A64gkVuv97j4W70T/USIQ9D37jscs/QdxdCQEukKd7gNZEYi3bnI/GRa+yqendOrgfOc79Zn4XqUAGcA0pSF/VGo3oaZuSu3sFLxKg3vnIGNC4R8ELvtHb/UNNwInCRSHnQOg8UzfX273fCLvE/pX4Is+uiJfiv1F3dd+j66y34MfZL9HelkUylYYCbtclJau9gBz2Kn0nCECliusVvZ7ZIvBwBt75Z0qt84GDHmzt0xk8+VswYzw0Xlqde28oILLbj73rlC4NSh/blDdLL5rUD1P8W8Nqu/W/FOD6ndOfGnwUy6oL5NhM2SWRNAST9o3ycRNvEfzQ2C02t2EK0R0UsQIBXmWJDFy9gQHXcpIfkKTNIc8ohFfe0sQ+p3tbAk+J5P682x6nUzqz7Ppu2TyGnYOau2tWiM+iFzuvjom5+ZYM/C1SefSXLw2fU1zMBRcLLIZJVBPXd3/eXCJulr8xox0k+QUf59L58Ielqp734G9KvPtLvV828HrG+OfbTzdp96Zxee71Duz+HyfemcWnyeh3pnF50mor2bxWqRLIu590WCP2EDqbhppdMZCjC7J/wos2Soh/riWZQJRqo071Q79txw9NmwuqUmvIMW+SsAXJUXu78rH41G9a+AfQ//PhghDwofk/C91s+Gn2r/nDwAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+IHEAwVCEUVDOQAAAEeSURBVEjH7ZWxLkRBFIa/s1Y2olcqlQqtTikRkSh4gH0BwTPYRxAPgC1kC1QiCiUeQTbKrRDVinyaKYS1997cuwq5Xzn/P/PPOTmTgZqamr9A7fs7B8nT+bL2qj6rT1lnR0awwAlwPUK+j4gHdQlYAOaBTtKGEdEqU7Hqek7vYfIP1beyrVZtZ3hm1dvkPVL3U6fG0ih5sWmgCywDNxHRBh7z7G2UCG0Bl8AqcAWsJekduJtIq9VQz5J+oU5V/Zx+BKtNtZe0c3Xmm76o7lQanCo9TetdNUbs2c0zXM0Cl4g0SJtAD9iOiFEBL5UOVwrpA8cRsRERH2W62Sxijoi9quYnT8WDgmcOqqp4S50rELwy6d9pHP36b6+p+f98AifrJ8dbm0GVAAAAAElFTkSuQmCC\");\n}\n\n.iiif-av-component .av-icon-more {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='18px' height='5px' viewBox='0 0 18 5' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3EOptions icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-734.000000, -755.000000)' fill='%23D6D9DD'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cpath d='M658.14521,50.953271 C656.964301,50.953271 656.006986,49.9699712 656.006986,48.7570093 C656.006986,47.5440475 656.964301,46.5607477 658.14521,46.5607477 C659.326118,46.5607477 660.283433,47.5440475 660.283433,48.7570093 C660.283433,49.9699712 659.326118,50.953271 658.14521,50.953271 Z M671.82984,50.953271 C670.648932,50.953271 669.691617,49.9699712 669.691617,48.7570093 C669.691617,47.5440475 670.648932,46.5607477 671.82984,46.5607477 C673.010749,46.5607477 673.968064,47.5440475 673.968064,48.7570093 C673.968064,49.9699712 673.010749,50.953271 671.82984,50.953271 Z M664.987525,50.953271 C663.806617,50.953271 662.849301,49.9699712 662.849301,48.7570093 C662.849301,47.5440475 663.806617,46.5607477 664.987525,46.5607477 C666.168433,46.5607477 667.125749,47.5440475 667.125749,48.7570093 C667.125749,49.9699712 666.168433,50.953271 664.987525,50.953271 Z' id='Options-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");  \n  margin-top: 13px;\n}\n\n.iiif-av-component .av-icon-more:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='18px' height='5px' viewBox='0 0 18 5' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3EOptions icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-734.000000, -755.000000)' fill='%23FFFFFF'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cpath d='M658.14521,50.953271 C656.964301,50.953271 656.006986,49.9699712 656.006986,48.7570093 C656.006986,47.5440475 656.964301,46.5607477 658.14521,46.5607477 C659.326118,46.5607477 660.283433,47.5440475 660.283433,48.7570093 C660.283433,49.9699712 659.326118,50.953271 658.14521,50.953271 Z M671.82984,50.953271 C670.648932,50.953271 669.691617,49.9699712 669.691617,48.7570093 C669.691617,47.5440475 670.648932,46.5607477 671.82984,46.5607477 C673.010749,46.5607477 673.968064,47.5440475 673.968064,48.7570093 C673.968064,49.9699712 673.010749,50.953271 671.82984,50.953271 Z M664.987525,50.953271 C663.806617,50.953271 662.849301,49.9699712 662.849301,48.7570093 C662.849301,47.5440475 663.806617,46.5607477 664.987525,46.5607477 C666.168433,46.5607477 667.125749,47.5440475 667.125749,48.7570093 C667.125749,49.9699712 666.168433,50.953271 664.987525,50.953271 Z' id='Options-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");  \n}\n\n.iiif-av-component .av-icon-fullscreen {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='21px' viewBox='0 0 21 21' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Eexpand icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-894.000000, -748.000000)' fill='%23D6D9DD'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M806.689011,33.2668991 L803.170483,36.8085751 L805.971416,39.6095083 C806.064009,39.678953 806.110306,39.794694 806.110306,39.910435 C806.110306,40.1419171 805.92512,40.3271028 805.693638,40.3271028 L796.526947,40.3271028 C796.295465,40.3271028 796.110279,40.1419171 796.110279,39.910435 L796.110279,30.7437443 C796.110279,30.5817069 796.202872,30.4196694 796.36491,30.3502248 C796.526947,30.3039284 796.712133,30.3270766 796.827874,30.4428176 L799.628807,33.2668991 L803.170483,29.7483714 C803.332521,29.5863339 803.587151,29.5863339 803.749188,29.7483714 L806.689011,32.6881939 C806.781604,32.7576385 806.8279,32.8733796 806.8279,32.9891206 C806.8279,33.0817134 806.781604,33.1974545 806.689011,33.2668991 Z M816.110332,20.7437181 L816.110332,29.9104088 C816.110332,30.0724463 816.017739,30.2344837 815.855702,30.3039284 C815.809405,30.3270766 815.739961,30.3270766 815.693664,30.3270766 C815.577923,30.3270766 815.48533,30.2807802 815.392737,30.2113355 L812.591804,27.3872541 L809.050128,30.92893 C808.980684,30.9983746 808.864943,31.0446711 808.77235,31.0446711 C808.656609,31.0446711 808.540868,30.9983746 808.471423,30.92893 L805.508452,27.9659593 C805.346415,27.8039218 805.346415,27.5492915 805.508452,27.3872541 L809.050128,23.8455781 L806.226047,21.0446448 C806.110306,20.9289038 806.087157,20.7437181 806.133454,20.5816806 C806.202899,20.4196432 806.364936,20.3270504 806.526973,20.3270504 L815.693664,20.3270504 C815.925146,20.3270504 816.110332,20.512236 816.110332,20.7437181 Z' id='expand-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n  margin-top: 5px;\n  float: right;\n}\n\n.iiif-av-component .av-icon-fullscreen:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='21px' viewBox='0 0 21 21' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Eexpand icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-894.000000, -748.000000)' fill='%23FFFFFF'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M806.689011,33.2668991 L803.170483,36.8085751 L805.971416,39.6095083 C806.064009,39.678953 806.110306,39.794694 806.110306,39.910435 C806.110306,40.1419171 805.92512,40.3271028 805.693638,40.3271028 L796.526947,40.3271028 C796.295465,40.3271028 796.110279,40.1419171 796.110279,39.910435 L796.110279,30.7437443 C796.110279,30.5817069 796.202872,30.4196694 796.36491,30.3502248 C796.526947,30.3039284 796.712133,30.3270766 796.827874,30.4428176 L799.628807,33.2668991 L803.170483,29.7483714 C803.332521,29.5863339 803.587151,29.5863339 803.749188,29.7483714 L806.689011,32.6881939 C806.781604,32.7576385 806.8279,32.8733796 806.8279,32.9891206 C806.8279,33.0817134 806.781604,33.1974545 806.689011,33.2668991 Z M816.110332,20.7437181 L816.110332,29.9104088 C816.110332,30.0724463 816.017739,30.2344837 815.855702,30.3039284 C815.809405,30.3270766 815.739961,30.3270766 815.693664,30.3270766 C815.577923,30.3270766 815.48533,30.2807802 815.392737,30.2113355 L812.591804,27.3872541 L809.050128,30.92893 C808.980684,30.9983746 808.864943,31.0446711 808.77235,31.0446711 C808.656609,31.0446711 808.540868,30.9983746 808.471423,30.92893 L805.508452,27.9659593 C805.346415,27.8039218 805.346415,27.5492915 805.508452,27.3872541 L809.050128,23.8455781 L806.226047,21.0446448 C806.110306,20.9289038 806.087157,20.7437181 806.133454,20.5816806 C806.202899,20.4196432 806.364936,20.3270504 806.526973,20.3270504 L815.693664,20.3270504 C815.925146,20.3270504 816.110332,20.512236 816.110332,20.7437181 Z' id='expand-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.iiif-av-component .av-icon-subtitles {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='22px' height='20px' viewBox='0 0 22 20' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Esubtitles icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-769.000000, -746.000000)' fill='%23D6D9DD' fill-rule='nonzero'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cpath d='M695.976577,39.5327103 C694.685967,39.5327103 693.639721,40.6185629 693.639721,41.9580299 L693.639721,52.9204747 C693.639721,54.2599418 694.685967,55.3457944 695.976577,55.3457944 L708.408653,55.3457944 C709.699263,55.3457944 710.745509,54.2599418 710.745509,52.9204747 L710.745509,41.9580299 C710.745509,40.6185629 709.699263,39.5327103 708.408653,39.5327103 L695.976577,39.5327103 Z M696.071351,37.7757009 L708.313879,37.7757009 C710.601558,37.7757009 712.456088,39.6938622 712.456088,42.0600341 L712.456088,52.8184706 C712.456088,55.1846425 710.601558,57.1028037 708.313879,57.1028037 L696.071351,57.1028037 C693.783672,57.1028037 691.929142,55.1846425 691.929142,52.8184706 L691.929142,42.0600341 C691.929142,39.6938622 693.783672,37.7757009 696.071351,37.7757009 Z M696.260182,48.317757 L702.993311,48.317757 C703.495825,48.317757 703.903194,47.9244371 703.903194,47.4392523 C703.903194,46.9540676 703.495825,46.5607477 702.993311,46.5607477 L696.260182,46.5607477 C695.757668,46.5607477 695.350299,46.9540676 695.350299,47.4392523 C695.350299,47.9244371 695.757668,48.317757 696.260182,48.317757 Z M707.296761,48.317757 L708.207231,48.317757 C708.664356,48.317757 709.03493,47.9244371 709.03493,47.4392523 C709.03493,46.9540676 708.664356,46.5607477 708.207231,46.5607477 L707.296761,46.5607477 C706.839636,46.5607477 706.469062,46.9540676 706.469062,47.4392523 C706.469062,47.9244371 706.839636,48.317757 707.296761,48.317757 Z M701.391918,51.8317757 L708.125048,51.8317757 C708.627562,51.8317757 709.03493,51.4384558 709.03493,50.953271 C709.03493,50.4680863 708.627562,50.0747664 708.125048,50.0747664 L701.391918,50.0747664 C700.889404,50.0747664 700.482036,50.4680863 700.482036,50.953271 C700.482036,51.4384558 700.889404,51.8317757 701.391918,51.8317757 Z M696.419411,51.8317757 L697.702345,51.8317757 C698.292799,51.8317757 698.771457,51.4384558 698.771457,50.953271 C698.771457,50.4680863 698.292799,50.0747664 697.702345,50.0747664 L696.419411,50.0747664 C695.828957,50.0747664 695.350299,50.4680863 695.350299,50.953271 C695.350299,51.4384558 695.828957,51.8317757 696.419411,51.8317757 Z' id='subtitles-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n  margin-top: 5px;\n}\n\n.iiif-av-component .av-icon-subtitles:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='22px' height='20px' viewBox='0 0 22 20' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Esubtitles icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-769.000000, -746.000000)' fill='%23FFFFFF' fill-rule='nonzero'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cpath d='M695.976577,39.5327103 C694.685967,39.5327103 693.639721,40.6185629 693.639721,41.9580299 L693.639721,52.9204747 C693.639721,54.2599418 694.685967,55.3457944 695.976577,55.3457944 L708.408653,55.3457944 C709.699263,55.3457944 710.745509,54.2599418 710.745509,52.9204747 L710.745509,41.9580299 C710.745509,40.6185629 709.699263,39.5327103 708.408653,39.5327103 L695.976577,39.5327103 Z M696.071351,37.7757009 L708.313879,37.7757009 C710.601558,37.7757009 712.456088,39.6938622 712.456088,42.0600341 L712.456088,52.8184706 C712.456088,55.1846425 710.601558,57.1028037 708.313879,57.1028037 L696.071351,57.1028037 C693.783672,57.1028037 691.929142,55.1846425 691.929142,52.8184706 L691.929142,42.0600341 C691.929142,39.6938622 693.783672,37.7757009 696.071351,37.7757009 Z M696.260182,48.317757 L702.993311,48.317757 C703.495825,48.317757 703.903194,47.9244371 703.903194,47.4392523 C703.903194,46.9540676 703.495825,46.5607477 702.993311,46.5607477 L696.260182,46.5607477 C695.757668,46.5607477 695.350299,46.9540676 695.350299,47.4392523 C695.350299,47.9244371 695.757668,48.317757 696.260182,48.317757 Z M707.296761,48.317757 L708.207231,48.317757 C708.664356,48.317757 709.03493,47.9244371 709.03493,47.4392523 C709.03493,46.9540676 708.664356,46.5607477 708.207231,46.5607477 L707.296761,46.5607477 C706.839636,46.5607477 706.469062,46.9540676 706.469062,47.4392523 C706.469062,47.9244371 706.839636,48.317757 707.296761,48.317757 Z M701.391918,51.8317757 L708.125048,51.8317757 C708.627562,51.8317757 709.03493,51.4384558 709.03493,50.953271 C709.03493,50.4680863 708.627562,50.0747664 708.125048,50.0747664 L701.391918,50.0747664 C700.889404,50.0747664 700.482036,50.4680863 700.482036,50.953271 C700.482036,51.4384558 700.889404,51.8317757 701.391918,51.8317757 Z M696.419411,51.8317757 L697.702345,51.8317757 C698.292799,51.8317757 698.771457,51.4384558 698.771457,50.953271 C698.771457,50.4680863 698.292799,50.0747664 697.702345,50.0747664 L696.419411,50.0747664 C695.828957,50.0747664 695.350299,50.4680863 695.350299,50.953271 C695.350299,51.4384558 695.828957,51.8317757 696.419411,51.8317757 Z' id='subtitles-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.errormessage {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n}\n\n.playwrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n}\n\n.playcircle {\n  border-radius: 50%;\n  background-color: rgba(50,50,50,0.75);\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='21px' viewBox='0 0 21 21' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Eplay icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-105.000000, -747.000000)' fill='%23D6D9DD'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M7.09481147,39.4485981 C7.02536685,39.4485981 6.93277401,39.4254499 6.86332938,39.3791535 C6.74758834,39.3097089 6.67814371,39.1708196 6.67814371,39.0319304 L6.67814371,19.8652134 C6.67814371,19.7263242 6.74758834,19.5874349 6.86332938,19.5179903 C7.00221864,19.4253975 7.14110789,19.4253975 7.27999714,19.4948421 L26.4467141,29.0782006 C26.5856033,29.1476452 26.6781962,29.2865344 26.6781962,29.4485719 C26.6781962,29.6106094 26.5856033,29.7494986 26.4467141,29.8189432 L7.27999714,39.4023017 C7.21055252,39.4254499 7.1642561,39.4485981 7.09481147,39.4485981 Z' id='play-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n  cursor: pointer;\n  width: 15vh;\n  height: 15vh;\n  background-size: 8vh 8vh;\n  background-position: 66% 50%;\n  background-repeat: no-repeat;\n}\n\n.playcircle:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='21px' viewBox='0 0 21 21' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Eplay icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-105.000000, -747.000000)' fill='%23FFFFFF'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M7.09481147,39.4485981 C7.02536685,39.4485981 6.93277401,39.4254499 6.86332938,39.3791535 C6.74758834,39.3097089 6.67814371,39.1708196 6.67814371,39.0319304 L6.67814371,19.8652134 C6.67814371,19.7263242 6.74758834,19.5874349 6.86332938,19.5179903 C7.00221864,19.4253975 7.14110789,19.4253975 7.27999714,19.4948421 L26.4467141,29.0782006 C26.5856033,29.1476452 26.6781962,29.2865344 26.6781962,29.4485719 C26.6781962,29.6106094 26.5856033,29.7494986 26.4467141,29.8189432 L7.27999714,39.4023017 C7.21055252,39.4254499 7.1642561,39.4485981 7.09481147,39.4485981 Z' id='play-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.iiif-av-component .options-container {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: 0;\n  padding: 0 2.5% 0 2.5%;\n  background: linear-gradient(0deg, rgba(50,50,50,0.75) 0%, rgba(29,29,29,0) 100%);\n}\n\n.iiif-av-component .canvas-timeline-container {\n  width: auto !important;\n}\n\n.iiif-av-component .loading-progress {\n  position: absolute;\n  height: 5px;\n  background-color: #CCCCCC;\n  box-shadow: inset 0 -1px 0 0 rgba(255,255,255,0.15), inset 0 1px 0 0 rgba(255,255,255,0.15);\n}\n\n.btn[title=Previous] {\n  display: none;\n}\n\n.btn[title=Next] {\n  display: none;\n}\n\n.btn.button-fullscreen {\n  float: right !important;\n}\n\n.btn[data-name=More] {\n  float: right !important;\n}\n\n.btn[data-name=Subtitles] {\n  display: none;\n  float: right !important;\n}\n\n.moremenu {\n  display: none;\n  font-size: 14px !important;\n  color: #EDEDED !important;\n  background-color: rgba(0,0,0,0.8) !important;\n  font-weight: 600 !important;\n  margin-bottom: 10px !important;\n  padding: 10px !important;\n  z-index: 100;\n  text-align: left;\n}\n\n.moremenu-option {\n  cursor: pointer;\n}\n\n.subtitlemenu {\n  display: none;\n  font-size: 14px !important;\n  color: #EDEDED !important;\n  background-color: rgba(0,0,0,0.8) !important;\n  font-weight: 600 !important;\n  margin-bottom: 10px !important;\n  padding: 10px !important;\n  z-index: 100;\n  text-align: left;\n}\n\n.subtitlemenu-option {\n  cursor: pointer;\n}",""])},function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t){t.exports=JSON.parse('{"ar":"٠١٢٣٤٥٦٧٨٩","fa":"۰۱۲۳۴۵۶۷۸۹","ml":"൦൧൨൩൪൫൬൭൮൯","kn":"೦೧೨೩೪೫೬೭೮೯","lo":"໐໑໒໓໔໕໖໗໘໙","or":"୦୧୨୩୪୫୬୭୮୯","kh":"០១២៣៤៥៦៧៨៩","nqo":"߀߁߂߃߄߅߆߇߈߉","pa":"੦੧੨੩੪੫੬੭੮੯","gu":"૦૧૨૩૪૫૬૭૮૯","hi":"०१२३४५६७८९","my":"၀၁၂၃၄၅၆၇၈၉","ta":"௦௧௨௩௪௫௬௭௮௯","te":"౦౧౨౩౪౫౬౭౮౯","th":"๐๑๒๓๔๕๖๗๘๙","bo":"༠༡༢༣༤༥༦༧༨༩"}')},function(t){t.exports=JSON.parse('{"ab":["ru"],"ace":["id"],"aln":["sq"],"als":["gsw","de"],"an":["es"],"anp":["hi"],"arn":["es"],"arz":["ar"],"av":["ru"],"ay":["es"],"ba":["ru"],"bar":["de"],"bat-smg":["sgs","lt"],"bcc":["fa"],"be-x-old":["be-tarask"],"bh":["bho"],"bjn":["id"],"bm":["fr"],"bpy":["bn"],"bqi":["fa"],"bug":["id"],"cbk-zam":["es"],"ce":["ru"],"crh":["crh-latn"],"crh-cyrl":["ru"],"csb":["pl"],"cv":["ru"],"de-at":["de"],"de-ch":["de"],"de-formal":["de"],"dsb":["de"],"dtp":["ms"],"egl":["it"],"eml":["it"],"ff":["fr"],"fit":["fi"],"fiu-vro":["vro","et"],"frc":["fr"],"frp":["fr"],"frr":["de"],"fur":["it"],"gag":["tr"],"gan":["gan-hant","zh-hant","zh-hans"],"gan-hans":["zh-hans"],"gan-hant":["zh-hant","zh-hans"],"gl":["pt"],"glk":["fa"],"gn":["es"],"gsw":["de"],"hif":["hif-latn"],"hsb":["de"],"ht":["fr"],"ii":["zh-cn","zh-hans"],"inh":["ru"],"iu":["ike-cans"],"jut":["da"],"jv":["id"],"kaa":["kk-latn","kk-cyrl"],"kbd":["kbd-cyrl"],"khw":["ur"],"kiu":["tr"],"kk":["kk-cyrl"],"kk-arab":["kk-cyrl"],"kk-latn":["kk-cyrl"],"kk-cn":["kk-arab","kk-cyrl"],"kk-kz":["kk-cyrl"],"kk-tr":["kk-latn","kk-cyrl"],"kl":["da"],"ko-kp":["ko"],"koi":["ru"],"krc":["ru"],"ks":["ks-arab"],"ksh":["de"],"ku":["ku-latn"],"ku-arab":["ckb"],"kv":["ru"],"lad":["es"],"lb":["de"],"lbe":["ru"],"lez":["ru"],"li":["nl"],"lij":["it"],"liv":["et"],"lmo":["it"],"ln":["fr"],"ltg":["lv"],"lzz":["tr"],"mai":["hi"],"map-bms":["jv","id"],"mg":["fr"],"mhr":["ru"],"min":["id"],"mo":["ro"],"mrj":["ru"],"mwl":["pt"],"myv":["ru"],"mzn":["fa"],"nah":["es"],"nap":["it"],"nds":["de"],"nds-nl":["nl"],"nl-informal":["nl"],"no":["nb"],"os":["ru"],"pcd":["fr"],"pdc":["de"],"pdt":["de"],"pfl":["de"],"pms":["it"],"pt":["pt-br"],"pt-br":["pt"],"qu":["es"],"qug":["qu","es"],"rgn":["it"],"rmy":["ro"],"roa-rup":["rup"],"rue":["uk","ru"],"ruq":["ruq-latn","ro"],"ruq-cyrl":["mk"],"ruq-latn":["ro"],"sa":["hi"],"sah":["ru"],"scn":["it"],"sg":["fr"],"sgs":["lt"],"sli":["de"],"sr":["sr-ec"],"srn":["nl"],"stq":["de"],"su":["id"],"szl":["pl"],"tcy":["kn"],"tg":["tg-cyrl"],"tt":["tt-cyrl","ru"],"tt-cyrl":["ru"],"ty":["fr"],"udm":["ru"],"ug":["ug-arab"],"uk":["ru"],"vec":["it"],"vep":["et"],"vls":["nl"],"vmf":["de"],"vot":["fi"],"vro":["et"],"wa":["fr"],"wo":["fr"],"wuu":["zh-hans"],"xal":["ru"],"xmf":["ka"],"yi":["he"],"za":["zh-hans"],"zea":["nl"],"zh":["zh-hans"],"zh-classical":["lzh"],"zh-cn":["zh-hans"],"zh-hant":["zh-hans"],"zh-hk":["zh-hant","zh-hans"],"zh-min-nan":["nan"],"zh-mo":["zh-hk","zh-hant","zh-hans"],"zh-my":["zh-sg","zh-hans"],"zh-sg":["zh-hans"],"zh-tw":["zh-hant","zh-hans"],"zh-yue":["yue"]}')},function(t,e,n){"use strict";n.r(e);var r=n(0);class i{constructor(t){this.locale=t}convertPlural(t,e){var n=new RegExp("\\d+=","i");if(!e||0===e.length)return"";for(let r=0;r<e.length;r++){let i=e[r];if(n.test(i)){if(parseInt(i.slice(0,i.indexOf("=")),10)===t)return i.slice(i.indexOf("=")+1);e[r]=void 0}}e=e.filter(t=>!!t);let r=this.getPluralForm(t,this.locale);return e[r=Math.min(r,e.length-1)]}getPluralForm(t,e){const n=new Intl.PluralRules(e),r=n.resolvedOptions().pluralCategories,i=n.select(t);return["zero","one","two","few","many","other"].filter(t=>r.includes(t)).indexOf(i)}convertNumber(t,e){let n=this.digitTransformTable(this.locale),r=String(t),i="";if(!n)return t;if(e){if(parseFloat(t,10)===t)return t;let e=[];for(let t in n)e[n[t]]=t;n=e}for(let t=0;t<r.length;t++)n[r[t]]?i+=n[r[t]]:i+=r[t];return e?parseFloat(i,10):i}convertGrammar(t,e){return t}gender(t,e){if(!e||0===e.length)return"";for(;e.length<2;)e.push(e[e.length-1]);return"male"===t?e[0]:"female"===t?e[1]:3===e.length?e[2]:e[0]}digitTransformTable(t){return!!r[t]&&r[t].split("")}}var o={bs:class extends i{convertGrammar(t,e){switch(e){case"instrumental":t="s "+t;break;case"lokativ":t="o "+t}return t}},default:i,dsb:class extends i{convertGrammar(t,e){switch(e){case"instrumental":t="z "+t;break;case"lokatiw":t="wo "+t}return t}},fi:class extends i{convertGrammar(t,e){let n=t.match(/[aou][^äöy]*$/i),r=t;switch(t.match(/wiki$/i)&&(n=!1),t.match(/[bcdfghjklmnpqrstvwxz]$/i)&&(t+="i"),e){case"genitive":t+="n";break;case"elative":t+=n?"sta":"stä";break;case"partitive":t+=n?"a":"ä";break;case"illative":t+=t.slice(-1)+"n";break;case"inessive":t+=n?"ssa":"ssä";break;default:t=r}return t}},ga:class extends i{convertGrammar(t,e){if("ainmlae"===e)switch(t){case"an Domhnach":t="Dé Domhnaigh";break;case"an Luan":t="Dé Luain";break;case"an Mháirt":t="Dé Mháirt";break;case"an Chéadaoin":t="Dé Chéadaoin";break;case"an Déardaoin":t="Déardaoin";break;case"an Aoine":t="Dé hAoine";break;case"an Satharn":t="Dé Sathairn"}return t}},he:class extends i{convertGrammar(t,e){switch(e){case"prefixed":case"תחילית":"ו"===t.slice(0,1)&&"וו"!==t.slice(0,2)&&(t="ו"+t),"ה"===t.slice(0,1)&&(t=t.slice(1)),(t.slice(0,1)<"א"||t.slice(0,1)>"ת")&&(t="־"+t)}return t}},hsb:class extends i{convertGrammar(t,e){switch(e){case"instrumental":t="z "+t;break;case"lokatiw":t="wo "+t}return t}},hu:class extends i{convertGrammar(t,e){switch(e){case"rol":t+="ról";break;case"ba":t+="ba";break;case"k":t+="k"}return t}},hy:class extends i{convertGrammar(t,e){return"genitive"===e&&("ա"===t.slice(-1)?t=t.slice(0,-1)+"այի":"ո"===t.slice(-1)?t=t.slice(0,-1)+"ոյի":"գիրք"===t.slice(-4)?t=t.slice(0,-4)+"գրքի":t+="ի"),t}},la:class extends i{convertGrammar(t,e){switch(e){case"genitive":t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/u[ms]$/i,"i")).replace(/ommunia$/i,"ommunium")).replace(/a$/i,"ae")).replace(/libri$/i,"librorum")).replace(/nuntii$/i,"nuntiorum")).replace(/tio$/i,"tionis")).replace(/ns$/i,"ntis")).replace(/as$/i,"atis")).replace(/es$/i,"ei");break;case"accusative":t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/u[ms]$/i,"um")).replace(/ommunia$/i,"am")).replace(/a$/i,"ommunia")).replace(/libri$/i,"libros")).replace(/nuntii$/i,"nuntios")).replace(/tio$/i,"tionem")).replace(/ns$/i,"ntem")).replace(/as$/i,"atem")).replace(/es$/i,"em");break;case"ablative":t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/u[ms]$/i,"o")).replace(/ommunia$/i,"ommunibus")).replace(/a$/i,"a")).replace(/libri$/i,"libris")).replace(/nuntii$/i,"nuntiis")).replace(/tio$/i,"tione")).replace(/ns$/i,"nte")).replace(/as$/i,"ate")).replace(/es$/i,"e")}return t}},os:class extends i{convertGrammar(t,e){var n,r,i,o;switch(n="мæ",r="",i="",o="",t.match(/тæ$/i)?(t=t.slice(0,-1),n="æм"):t.match(/[аæеёиоыэюя]$/i)?r="й":t.match(/у$/i)?t.slice(-2,-1).match(/[аæеёиоыэюя]$/i)||(r="й"):t.match(/[бвгджзйклмнопрстфхцчшщьъ]$/i)||(i="-"),e){case"genitive":o=i+r+"ы";break;case"dative":o=i+r+"æн";break;case"allative":o=i+n;break;case"ablative":o="й"===r?i+r+"æ":i+r+"æй";break;case"superessive":o=i+r+"ыл";break;case"equative":o=i+r+"ау";break;case"comitative":o=i+"имæ"}return t+o}},ru:class extends i{convertGrammar(t,e){return"genitive"===e&&("ь"===t.slice(-1)?t=t.slice(0,-1)+"я":"ия"===t.slice(-2)?t=t.slice(0,-2)+"ии":"ка"===t.slice(-2)?t=t.slice(0,-2)+"ки":"ти"===t.slice(-2)?t=t.slice(0,-2)+"тей":"ды"===t.slice(-2)?t=t.slice(0,-2)+"дов":"ник"===t.slice(-3)&&(t=t.slice(0,-3)+"ника")),t}},sl:class extends i{convertGrammar(t,e){switch(e){case"mestnik":t="o "+t;break;case"orodnik":t="z "+t}return t}},uk:class extends i{convertGrammar(t,e){switch(e){case"genitive":"ь"===t.slice(-1)?t=t.slice(0,-1)+"я":"ія"===t.slice(-2)?t=t.slice(0,-2)+"ії":"ка"===t.slice(-2)?t=t.slice(0,-2)+"ки":"ти"===t.slice(-2)?t=t.slice(0,-2)+"тей":"ды"===t.slice(-2)?t=t.slice(0,-2)+"дов":"ник"===t.slice(-3)&&(t=t.slice(0,-3)+"ника");break;case"accusative":"ія"===t.slice(-2)&&(t=t.slice(0,-2)+"ію")}return t}}};const a=new RegExp("(?:([A-Za-zªµºÀ-ÖØ-öø-ʸʻ-ˁːˑˠ-ˤˮͰ-ͳͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-҂Ҋ-ԯԱ-Ֆՙ-՟ա-և։ः-हऻऽ-ीॉ-ौॎ-ॐक़-ॡ।-ঀংঃঅ-ঌএঐও-নপ-রলশ-হঽ-ীেৈোৌৎৗড়ঢ়য়-ৡ০-ৱ৴-৺ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਾ-ੀਖ਼-ੜਫ਼੦-੯ੲ-ੴઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽ-ીૉોૌૐૠૡ૦-૰ૹଂଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽାୀେୈୋୌୗଡ଼ଢ଼ୟ-ୡ୦-୷ஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹாிுூெ-ைொ-ௌௐௗ௦-௲ఁ-ఃఅ-ఌఎ-ఐఒ-నప-హఽు-ౄౘ-ౚౠౡ౦-౯౿ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽ-ೄೆ-ೈೊೋೕೖೞೠೡ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ീെ-ൈൊ-ൌൎൗൟ-ൡ൦-൵൹-ൿංඃඅ-ඖක-නඳ-රලව-ෆා-ෑෘ-ෟ෦-෯ෲ-෴ก-ะาำเ-ๆ๏-๛ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆ໐-໙ໜ-ໟༀ-༗༚-༴༶༸༾-ཇཉ-ཬཿ྅ྈ-ྌ྾-࿅࿇-࿌࿎-࿚က-ာေးျြဿ-ၗၚ-ၝၡ-ၰၵ-ႁႃႄႇ-ႌႎ-ႜ႞-ჅჇჍა-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፠-፼ᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙿᚁ-ᚚᚠ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱ᜵᜶ᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳាើ-ៅះៈ។-៚ៜ០-៩᠐-᠙ᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᤣ-ᤦᤩ-ᤫᤰᤱᤳ-ᤸ᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧚ᨀ-ᨖᨙᨚ᨞-ᩕᩗᩡᩣᩤᩭ-ᩲ᪀-᪉᪐-᪙᪠-᪭ᬄ-ᬳᬵᬻᬽ-ᭁᭃ-ᭋ᭐-᭪᭴-᭼ᮂ-ᮡᮦᮧ᮪ᮮ-ᯥᯧᯪ-ᯬᯮ᯲᯳᯼-ᰫᰴᰵ᰻-᱉ᱍ-᱿᳀-᳇᳓᳡ᳩ-ᳬᳮ-ᳳᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎ⅏Ⅰ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵰ⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〮〯〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎ㆐-ㆺㇰ-㈜㈠-㉏㉠-㉻㉿-㊰㋀-㋋㋐-㋾㌀-㍶㍻-㏝㏠-㏾㐀-䶵一-鿕ꀀ-ꒌꓐ-ꘌꘐ-ꘫꙀ-ꙮꚀ-ꚝꚠ-ꛯ꛲-꛷Ꜣ-ꞇ꞉-ꞭꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠤꠧ꠰-꠷ꡀ-ꡳꢀ-ꣃ꣎-꣙ꣲ-ꣽ꤀-ꤥ꤮-ꥆꥒ꥓꥟-ꥼꦃ-ꦲꦴꦵꦺꦻꦽ-꧍ꧏ-꧙꧞-ꧤꧦ-ꧾꨀ-ꨨꨯꨰꨳꨴꩀ-ꩂꩄ-ꩋꩍ꩐-꩙꩜-ꩻꩽ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫫꫮ-ꫵꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭥꭰ-ꯤꯦꯧꯩ-꯬꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ-舘並-龎ﬀ-ﬆﬓ-ﬗＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]|\ud800[\udc00-\udc0b]|\ud800[\udc0d-\udc26]|\ud800[\udc28-\udc3a]|𐀼|𐀽|\ud800[\udc3f-\udc4d]|\ud800[\udc50-\udc5d]|\ud800[\udc80-\udcfa]|𐄀|𐄂|\ud800[\udd07-\udd33]|\ud800[\udd37-\udd3f]|\ud800[\uddd0-\uddfc]|\ud800[\ude80-\ude9c]|\ud800[\udea0-\uded0]|\ud800[\udf00-\udf23]|\ud800[\udf30-\udf4a]|\ud800[\udf50-\udf75]|\ud800[\udf80-\udf9d]|\ud800[\udf9f-\udfc3]|\ud800[\udfc8-\udfd5]|\ud801[\udc00-\udc9d]|\ud801[\udca0-\udca9]|\ud801[\udd00-\udd27]|\ud801[\udd30-\udd63]|𐕯|\ud801[\ude00-\udf36]|\ud801[\udf40-\udf55]|\ud801[\udf60-\udf67]|𑀀|\ud804[\udc02-\udc37]|\ud804[\udc47-\udc4d]|\ud804[\udc66-\udc6f]|\ud804[\udc82-\udcb2]|𑂷|𑂸|\ud804[\udcbb-\udcc1]|\ud804[\udcd0-\udce8]|\ud804[\udcf0-\udcf9]|\ud804[\udd03-\udd26]|𑄬|\ud804[\udd36-\udd43]|\ud804[\udd50-\udd72]|\ud804[\udd74-\udd76]|\ud804[\udd82-\uddb5]|\ud804[\uddbf-\uddc9]|𑇍|\ud804[\uddd0-\udddf]|\ud804[\udde1-\uddf4]|\ud804[\ude00-\ude11]|\ud804[\ude13-\ude2e]|𑈲|𑈳|𑈵|\ud804[\ude38-\ude3d]|\ud804[\ude80-\ude86]|𑊈|\ud804[\ude8a-\ude8d]|\ud804[\ude8f-\ude9d]|\ud804[\ude9f-\udea9]|\ud804[\udeb0-\udede]|\ud804[\udee0-\udee2]|\ud804[\udef0-\udef9]|𑌂|𑌃|\ud804[\udf05-\udf0c]|𑌏|𑌐|\ud804[\udf13-\udf28]|\ud804[\udf2a-\udf30]|𑌲|𑌳|\ud804[\udf35-\udf39]|\ud804[\udf3d-\udf3f]|\ud804[\udf41-\udf44]|𑍇|𑍈|\ud804[\udf4b-\udf4d]|𑍐|𑍗|\ud804[\udf5d-\udf63]|\ud805[\udc80-\udcb2]|𑒹|\ud805[\udcbb-\udcbe]|𑓁|\ud805[\udcc4-\udcc7]|\ud805[\udcd0-\udcd9]|\ud805[\udd80-\uddb1]|\ud805[\uddb8-\uddbb]|𑖾|\ud805[\uddc1-\udddb]|\ud805[\ude00-\ude32]|𑘻|𑘼|𑘾|\ud805[\ude41-\ude44]|\ud805[\ude50-\ude59]|\ud805[\ude80-\udeaa]|𑚬|𑚮|𑚯|𑚶|\ud805[\udec0-\udec9]|\ud805[\udf00-\udf19]|𑜠|𑜡|𑜦|\ud805[\udf30-\udf3f]|\ud806[\udca0-\udcf2]|𑣿|\ud806[\udec0-\udef8]|\ud808[\udc00-\udf99]|\ud809[\udc00-\udc6e]|\ud809[\udc70-\udc74]|\ud809[\udc80-\udd43]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38]|\ud81a[\ude40-\ude5e]|\ud81a[\ude60-\ude69]|𖩮|𖩯|\ud81a[\uded0-\udeed]|𖫵|\ud81a[\udf00-\udf2f]|\ud81a[\udf37-\udf45]|\ud81a[\udf50-\udf59]|\ud81a[\udf5b-\udf61]|\ud81a[\udf63-\udf77]|\ud81a[\udf7d-\udf8f]|\ud81b[\udf00-\udf44]|\ud81b[\udf50-\udf7e]|\ud81b[\udf93-\udf9f]|𛀀|𛀁|\ud82f[\udc00-\udc6a]|\ud82f[\udc70-\udc7c]|\ud82f[\udc80-\udc88]|\ud82f[\udc90-\udc99]|𛲜|𛲟|\ud834[\udc00-\udcf5]|\ud834[\udd00-\udd26]|\ud834[\udd29-\udd66]|\ud834[\udd6a-\udd72]|𝆃|𝆄|\ud834[\udd8c-\udda9]|\ud834[\uddae-\udde8]|\ud834[\udf60-\udf71]|\ud835[\udc00-\udc54]|\ud835[\udc56-\udc9c]|𝒞|𝒟|𝒢|𝒥|𝒦|\ud835[\udca9-\udcac]|\ud835[\udcae-\udcb9]|𝒻|\ud835[\udcbd-\udcc3]|\ud835[\udcc5-\udd05]|\ud835[\udd07-\udd0a]|\ud835[\udd0d-\udd14]|\ud835[\udd16-\udd1c]|\ud835[\udd1e-\udd39]|\ud835[\udd3b-\udd3e]|\ud835[\udd40-\udd44]|𝕆|\ud835[\udd4a-\udd50]|\ud835[\udd52-\udea5]|\ud835[\udea8-\udeda]|\ud835[\udedc-\udf14]|\ud835[\udf16-\udf4e]|\ud835[\udf50-\udf88]|\ud835[\udf8a-\udfc2]|\ud835[\udfc4-\udfcb]|\ud836[\udc00-\uddff]|\ud836[\ude37-\ude3a]|\ud836[\ude6d-\ude74]|\ud836[\ude76-\ude83]|\ud836[\ude85-\ude8b]|\ud83c[\udd10-\udd2e]|\ud83c[\udd30-\udd69]|\ud83c[\udd70-\udd9a]|\ud83c[\udde6-\ude02]|\ud83c[\ude10-\ude3a]|\ud83c[\ude40-\ude48]|🉐|🉑|[\ud840-\ud868][\udc00-\udfff]|\ud869[\udc00-\uded6]|\ud869[\udf00-\udfff]|[\ud86a-\ud86c][\udc00-\udfff]|\ud86d[\udc00-\udf34]|\ud86d[\udf40-\udfff]|\ud86e[\udc00-\udc1d]|\ud86e[\udc20-\udfff]|[\ud86f-\ud872][\udc00-\udfff]|\ud873[\udc00-\udea1]|\ud87e[\udc00-\ude1d]|[\udb80-\udbbe][\udc00-\udfff]|\udbbf[\udc00-\udffd]|[\udbc0-\udbfe][\udc00-\udfff]|\udbff[\udc00-\udffd])|([֐־׀׃׆׈-׿߀-ߪߴߵߺ-ࠕࠚࠤࠨ࠮-ࡘ࡜-࢟‏יִײַ-ﬨשׁ-ﭏ؈؋؍؛-ي٭-ٯٱ-ەۥۦۮۯۺ-ܐܒ-ܯ݋-ޥޱ-޿ࢠ-࣢ﭐ-ﴽ﵀-﷏ﷰ-﷼﷾﷿ﹰ-﻾]|\ud802[\udc00-\udd1e]|\ud802[\udd20-\ude00]|𐨄|\ud802[\ude07-\ude0b]|\ud802[\ude10-\ude37]|\ud802[\ude3b-\ude3e]|\ud802[\ude40-\udee4]|\ud802[\udee7-\udf38]|\ud802[\udf40-\udfff]|\ud803[\udc00-\ude5f]|\ud803[\ude7f-\udfff]|\ud83a[\udc00-\udccf]|\ud83a[\udcd7-\udfff]|\ud83b[\udc00-\uddff]|\ud83b[\udf00-\udfff]|\ud83b[\udf00-\udfff]|\ud83b[\udf00-\udfff]|\ud83b[\udf00-\udfff]|\ud83b[\udf00-\udfff]|\ud83b[\udf00-\udfff]|\ud83b[\udf00-\udfff]|\ud83b[\udf00-\udfff]|\ud83b[\udf00-\udfff]|\ud83b[\udf00-\udfff]|\ud83b[\udf00-\udfff]|\ud83b[\udf00-\udfff]|\ud83b[\udf00-\udfff]|\ud83b[\ude00-\udeef]|\ud83b[\udef2-\udeff]))");var s=class{constructor(t){this.locale=t,this.language=new(o[t]||o.default)(t)}emit(t,e){let n,r,i;switch(typeof t){case"string":case"number":n=t;break;case"object":if(r=t.slice(1).map(t=>this.emit(t,e)),"function"!=typeof this[i=t[0].toLowerCase()])throw new Error('unknown operation "'+i+'"');n=this[i](r,e);break;case"undefined":n="";break;default:throw new Error("unexpected type in AST: "+typeof t)}return n}concat(t){let e="";return t.forEach(t=>{e+=t}),e}replace(t,e){let n=parseInt(t[0],10);return n<e.length?e[n]:"$"+(n+1)}plural(t){let e=parseFloat(this.language.convertNumber(t[0],10)),n=t.slice(1);return n.length?this.language.convertPlural(e,n):""}gender(t){let e=t[0],n=t.slice(1);return this.language.gender(e,n)}grammar(t){let e=t[0],n=t[1];return n&&e&&this.language.convertGrammar(n,e)}bidi(t){var e=function(t){var e=t.match(a);return e?void 0===e[2]?"ltr":"rtl":null}(t[0]);return"ltr"===e?"‪"+t[0]+"‬":"rtl"===e?"‫"+t[0]+"‬":t[0]}};function u(t){let e,n,r,i,o,a,s,u,c,l,f,h,d,p,g,v,m,y,w=0;function _(t){return()=>{for(let e=0;e<t.length;e++){let n=t[e]();if(null!==n)return n}return null}}function E(t){let e=w,n=[];for(let r=0;r<t.length;r++){let i=t[r]();if(null===i)return w=e,null;n.push(i)}return n}function b(t,e){return()=>{let n=w,r=[],i=e();for(;null!==i;)r.push(i),i=e();return r.length<t?(w=n,null):r}}function C(e){let n=e.length;return()=>{let r=null;return t.slice(w,w+n)===e&&(r=e,w+=n),r}}function S(e){return()=>{let n=t.slice(w).match(e);return null===n?null:(w+=n[0].length,n[0])}}function I(){let t=E([r,i]);return null===t?null:t[1]}function A(){let t=E([o,a]);return null===t?null:["REPLACE",parseInt(t[1],10)-1]}var T,x;function M(){let t=E([e,b(0,m)]);if(null===t)return null;let n=t[1];return n.length>1?["CONCAT"].concat(n):n[0]}function R(){let t=E([d,n,A]);return null===t?null:[t[0],t[2]]}function O(){let t=E([d,n,m]);return null===t?null:[t[0],t[2]]}function N(){let t=E([p,h,g]);return null===t?null:t[1]}if(e=C("|"),n=C(":"),r=C("\\"),i=S(/^./),o=C("$"),a=S(/^\d+/),s=S(/^[^{}[\]$\\]/),u=S(/^[^{}[\]$\\|]/),_([I,c=S(/^[^{}[\]$\s]/)]),l=_([I,u]),f=_([I,s]),T=S(/^[ !"$&'()*,.\/0-9;=?@A-Z^_`a-z~\x80-\xFF+-]+/),x=function(t){return t.toString()},d=()=>{let t=T();return null===t?null:x(t)},h=_([function(){let t=E([_([R,O]),b(0,M)]);return null===t?null:t[0].concat(t[1])},function(){let t=E([d,b(0,M)]);return null===t?null:[t[0]].concat(t[1])}]),p=C("{{"),g=C("}}"),v=_([N,A,function(){let t=b(1,f)();return null===t?null:t.join("")}]),m=_([N,A,function(){let t=b(1,l)();return null===t?null:t.join("")}]),null===(y=function(){let t=b(0,v)();return null===t?null:["CONCAT"].concat(t)}())||w!==t.length)throw new Error("Parse error at position "+w.toString()+" in input: "+t);return y}class c{constructor(t){this.locale=t,this.emitter=new s(this.locale)}parse(t,e){if(t.includes("{{")){let n=new u(t);return this.emitter.emit(n,e)}return this.simpleParse(t,e)}simpleParse(t,e){return t.replace(/\$(\d+)/g,(t,n)=>{let r=parseInt(n,10)-1;return void 0!==e[r]?e[r]:"$"+n})}}class l{constructor(t){this.sourceMap=new Map}load(t,e){if("object"!=typeof t)throw Error("Invalid message source. Must be an object");if(e){if(!/^[a-zA-Z0-9-]+$/.test(e))throw Error(`Invalid locale ${e}`);for(let n in t)if(0!==n.indexOf("@")){if("object"==typeof t[n])return this.load(t);if("string"!=typeof t[n])throw Error(`Invalid message for message ${n} in ${e} locale.`);break}this.sourceMap.has(e)?this.sourceMap.set(e,Object.assign(this.sourceMap.get(e),t)):this.sourceMap.set(e,t)}else for(e in t)this.load(t[e],e)}getMessage(t,e){let n=this.sourceMap.get(e);return n?n[t]:null}hasLocale(t){return this.sourceMap.has(t)}}var f=n(1);n.d(e,"default",function(){return h});class h{constructor(t,e){e=e||{},this.locale=t,this.parser=new c(this.locale),this.messageStore=new l,e.messages&&this.load(e.messages,this.locale),this.finalFallback=e.finalFallback||"en"}load(t,e){return this.messageStore.load(t,e||this.locale)}i18n(t,...e){return this.parser.parse(this.getMessage(t),e)}setLocale(t){this.locale=t,this.parser=new c(this.locale)}getFallbackLocales(){return[...f[this.locale]||[],this.finalFallback]}getMessage(t){let e=this.locale,n=0;const r=this.getFallbackLocales(this.locale);for(;e;){let i=e.split("-"),o=i.length;do{let e=i.slice(0,o).join("-"),n=this.messageStore.getMessage(t,e);if(n)return n;o--}while(o);e=r[n],n++}return t}}}]).default},function(t,e,n){(function(t){var e,n;!function(e){var n=function(){function e(e){this.options=e,this.options.data=t.extend(this.data(),e.data)}return e.prototype._init=function(){return this._$element=t(this.options.target),this._$element.length?(this._$element.empty(),!0):(console.warn("element not found"),!1)},e.prototype.data=function(){return{}},e.prototype.on=function(t,e,n){var r=this._e||(this._e={});(r[t]||(r[t]=[])).push({fn:e,ctx:n})},e.prototype.fire=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=[].slice.call(arguments,1),i=((this._e||(this._e={}))[t]||[]).slice(),o=0,a=i.length;o<a;o++)i[o].fn.apply(i[o].ctx,r)},e.prototype._resize=function(){},e.prototype.set=function(t){},e}();e.BaseComponent=n}(e||(e={})),(n=window)._Components||(n._Components=e)}).call(this,n(0))},function(t,e,n){(function(t){var e,n,r,i=this&&this.__extends||(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,n)},function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)});!function(e){var n=function(e){function n(t){var n=e.call(this,t)||this;return n._data=n.data(),n._data=n.options.data,n._init(),n._resize(),n}return i(n,e),n.prototype._init=function(){var r=e.prototype._init.call(this);r||console.error("TreeComponent failed to initialise");var i=this;return this._$tree=t('<ul class="tree"></ul>'),this._$element.append(this._$tree),t.templates({pageTemplate:"{^{for nodes}}                                    {^{tree/}}                                {{/for}}",treeTemplate:'<li>                                    {^{if nodes && nodes.length }}                                        <div class="toggle" data-link="class{merge:expanded toggle=\'expanded\'}"></div>                                    {{else isManifest() || isCollection() }}                                        <div class="toggle"></div>                                    {{else}}                                    <div class="spacer"></div>                                    {{/if}}                                    {^{if multiSelectEnabled}}                                        <input id="tree-checkbox-{{>id}}" type="checkbox" data-link="checked{:multiSelected ? \'checked\' : \'\'}" class="multiSelect" />                                    {{/if}}                                    {^{if selected}}                                        <a id="tree-link-{{>id}}" href="#" title="{{>label}}" class="selected">{{>label}}</a>                                    {{else}}                                        <a id="tree-link-{{>id}}" href="#" title="{{>label}}">{{>label}}</a>                                    {{/if}}                                </li>                                {^{if expanded}}                                    <li>                                        <ul>                                            {^{for nodes}}                                                {^{tree/}}                                            {{/for}}                                        </ul>                                    </li>                                {{/if}}'}),t.views.tags({tree:{toggleExpanded:function(){var t=this.data;t.nodes&&t.nodes.length?i._setNodeExpanded(t,!t.expanded):i.fire(n.Events.TREE_NODE_SELECTED,t)},toggleMultiSelect:function(){var t=this.data;if(i._setNodeMultiSelected(t,!t.multiSelected),t.isRange()){var e=i._getMultiSelectState();e&&e.selectRange(t.data,t.multiSelected)}i.fire(n.Events.TREE_NODE_MULTISELECTED,t)},init:function(t,e,n){this.data=t.view.data},onAfterLink:function(){var t=this;t.contents("li").first().on("click",".toggle",function(){t.toggleExpanded()}).on("click","a",function(e){e.preventDefault();var r=t.data;r.nodes.length&&i._data.branchNodesExpandOnClick&&t.toggleExpanded(),r.multiSelectEnabled?t.toggleMultiSelect():r.nodes.length?i._data.branchNodesSelectable&&(i.fire(n.Events.TREE_NODE_SELECTED,r),i.selectNode(r)):(i.fire(n.Events.TREE_NODE_SELECTED,r),i.selectNode(r))}).on("click","input.multiSelect",function(e){t.toggleMultiSelect()})},template:t.templates.treeTemplate}}),r},n.prototype.set=function(e){var n=this;if(this._data=Object.assign(this._data,e),this._data.helper){this._rootNode=this._data.helper.getTree(this._data.topRangeIndex,this._data.treeSortType),this._allNodes=null,this._multiSelectableNodes=null,this._$tree.link(t.templates.pageTemplate,this._rootNode);var r=this._getMultiSelectState();if(r)for(var i=function(t){var e=r.ranges[t],n=o._getMultiSelectableNodes().en().where(function(t){return t.data.id===e.id}).first();n&&(o._setNodeMultiSelectEnabled(n,e.multiSelectEnabled),o._setNodeMultiSelected(n,e.multiSelected))},o=this,a=0;a<r.ranges.length;a++)i(a);var s=this.getAllNodes();this._data.autoExpand&&s.forEach(function(t,e){t.nodes.length&&n._setNodeExpanded(t,!0)})}},n.prototype._getMultiSelectState=function(){return this._data.helper?this._data.helper.getMultiSelectState():null},n.prototype.data=function(){return{autoExpand:!1,branchNodesExpandOnClick:!0,branchNodesSelectable:!0,helper:null,topRangeIndex:0,treeSortType:Manifold.TreeSortType.NONE}},n.prototype.allNodesSelected=function(){var t=this._getMultiSelectableNodes(),e=this.getMultiSelectedNodes();return t.length===e.length},n.prototype._getMultiSelectableNodes=function(){var t=this;return this._multiSelectableNodes?this._multiSelectableNodes:this._multiSelectableNodes=this.getAllNodes().en().where(function(e){return t._nodeIsMultiSelectable(e)}).toArray()},n.prototype._nodeIsMultiSelectable=function(t){return t.isManifest()&&t.nodes.length>0||t.isRange()},n.prototype.getAllNodes=function(){return this._allNodes?this._allNodes:this._allNodes=this._rootNode.nodes.en().traverseUnique(function(t){return t.nodes}).toArray()},n.prototype.getMultiSelectedNodes=function(){var t=this;return this.getAllNodes().en().where(function(e){return t._nodeIsMultiSelectable(e)&&e.multiSelected}).toArray()},n.prototype.getNodeById=function(t){return this.getAllNodes().en().where(function(e){return e.id===t}).first()},n.prototype.expandParents=function(t,e){t.parentNode&&(this._setNodeExpanded(t.parentNode,e),this.expandParents(t.parentNode,e))},n.prototype._setNodeSelected=function(e,n){t.observable(e).setProperty("selected",n)},n.prototype._setNodeExpanded=function(e,n){t.observable(e).setProperty("expanded",n)},n.prototype._setNodeMultiSelected=function(e,n){t.observable(e).setProperty("multiSelected",n)},n.prototype._setNodeMultiSelectEnabled=function(e,n){t.observable(e).setProperty("multiSelectEnabled",n)},n.prototype.selectPath=function(t){if(this._rootNode){var e=t.split("/");e.length>=1&&e.shift();var n=this.getNodeByPath(this._rootNode,e);this.selectNode(n)}},n.prototype.deselectCurrentNode=function(){this.selectedNode&&this._setNodeSelected(this.selectedNode,!1)},n.prototype.selectNode=function(t){this._rootNode&&(this.deselectCurrentNode(),this.selectedNode=t,this._setNodeSelected(this.selectedNode,!0))},n.prototype.expandNode=function(t,e){this._rootNode&&this._setNodeExpanded(t,e)},n.prototype.getNodeByPath=function(t,e){if(0===e.length)return t;var n=Number(e.shift()),r=t.nodes[n];return this.getNodeByPath(r,e)},n.prototype.show=function(){this._$element.show()},n.prototype.hide=function(){this._$element.hide()},n.prototype._resize=function(){},n}(_Components.BaseComponent);e.TreeComponent=n}(n||(n={})),function(t){!function(t){var e=function(){function t(){}return t.TREE_NODE_MULTISELECTED="treeNodeMultiSelected",t.TREE_NODE_SELECTED="treeNodeSelected",t}();t.Events=e}(t.TreeComponent||(t.TreeComponent={}))}(n||(n={})),(r=window).IIIFComponents?r.IIIFComponents.TreeComponent=n.TreeComponent:r.IIIFComponents=n}).call(this,n(0))},function(t,e,n){(function(t,e){var n,r,i,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});!function(n){var r=function(e){function n(t){var n=e.call(this,t)||this;return n._lastVolume=1,n._data={volume:1},n._init(),n._resize(),n}return o(n,e),n.prototype._init=function(){var n=this,r=e.prototype._init.call(this);r||console.error("Component failed to initialise"),this._$volumeMute=t('\n                                <button class="btn volume-mute" title="'+this.options.data.content.mute+'">\n                                    <i class="av-icon av-icon-mute on" aria-hidden="true"></i>'+this.options.data.content.mute+"\n                                </button>"),this._$volumeSlider=t('<div class="volume-slider"></div>'),this._$element.append(this._$volumeMute,this._$volumeSlider);var o=this;return this._$volumeMute.on("touchstart click",function(t){t.preventDefault(),0!==n._data.volume?(n._lastVolume=n._data.volume,n._data.volume=0):n._data.volume=n._lastVolume,n.fire(i.VOLUME_CHANGED,n._data.volume)}),this._$volumeSlider.slider({value:o._data.volume,step:.1,orientation:"horizontal",range:"min",min:0,max:1,animate:!1,create:function(t,e){},slide:function(t,e){o._data.volume=e.value,0===o._data.volume&&(o._lastVolume=0),o.fire(i.VOLUME_CHANGED,o._data.volume)},stop:function(t,e){}}),r},n.prototype.set=function(t){this._data=Object.assign(this._data,t),this._render()},n.prototype._render=function(){if(void 0!==this._data.volume)if(this._$volumeSlider.slider({value:this._data.volume}),0===this._data.volume){var t=this.options.data.content.unmute;this._$volumeMute.prop("title",t),this._$volumeMute.find("i").switchClass("on","off")}else{t=this.options.data.content.mute;this._$volumeMute.prop("title",t),this._$volumeMute.find("i").switchClass("off","on")}},n.prototype._resize=function(){},n}(_Components.BaseComponent);n.AVVolumeControl=r;var i=function(){function t(){}return t.VOLUME_CHANGED="volumechanged",t}();n.VolumeEvents=i;var a=function(n){function a(e){var r=n.call(this,e)||this;return r._canvasClockFrequency=25,r._canvasClockStartDate=0,r._canvasClockTime=0,r._canvasHeight=0,r._canvasWidth=0,r._data=r.data(),r._highPriorityFrequency=25,r._isPlaying=!1,r._isStalled=!1,r._lowPriorityFrequency=250,r._mediaSyncMarginSecs=1,r._rangeSpanPadding=.25,r._readyMediaCount=0,r._stallRequestedBy=[],r._wasPlaying=!1,r.ranges=[],r.waveforms=[],r.isOnlyCanvasInstance=!1,r.waveformDeltaX=0,r.waveformPageX=0,r._scaleY=function(t,e){return Math.max(r._data.waveformBarWidth,t*e/256)},r._data=r.options.data,r.$playerElement=t('<div class="player player--loading"></div>'),r}return o(a,n),a.prototype.loaded=function(){var t=this;setTimeout(function(){t.$playerElement.removeClass("player--loading")},500)},a.prototype.isPlaying=function(){return this._isPlaying},a.prototype.getClockTime=function(){return this._canvasClockTime},a.prototype.init=function(){var n=this;if(this._data&&this._data.content&&this._data.canvas){this._$hoverPreviewTemplate=t('<div class="hover-preview"><div class="label"></div><div class="pointer"><span class="arrow"></span></div></div>'),this._$canvasContainer=t('<div class="canvas-container"></div>'),this._$optionsContainer=t('<div class="options-container"></div>'),this._$rangeTimelineContainer=t('<div class="range-timeline-container"></div>'),this._$canvasTimelineContainer=t('<div class="canvas-timeline-container"></div>'),this._$canvasHoverPreview=this._$hoverPreviewTemplate.clone(),this._$canvasHoverHighlight=t('<div class="hover-highlight"></div>'),this._$rangeHoverPreview=this._$hoverPreviewTemplate.clone(),this._$rangeHoverHighlight=t('<div class="hover-highlight"></div>'),this._$durationHighlight=t('<div class="duration-highlight"></div>'),this._$timelineItemContainer=t('<div class="timeline-item-container"></div>'),this._$controlsContainer=t('<div class="controls-container"></div>'),this._$prevButton=t('\n                                <button class="btn" title="'+this._data.content.previous+'">\n                                    <i class="av-icon av-icon-previous" aria-hidden="true"></i>'+this._data.content.previous+"\n                                </button>"),this._$playButton=t('\n                                <button class="btn button-play" title="'+this._data.content.play+'">\n                                    <i class="av-icon av-icon-play play" aria-hidden="true"></i>'+this._data.content.play+"\n                                </button>"),this._$nextButton=t('\n                                <button class="btn" title="'+this._data.content.next+'">\n                                    <i class="av-icon av-icon-next" aria-hidden="true"></i>'+this._data.content.next+"\n                                </button>"),this._$timeDisplay=t('<div class="time-display"><span class="canvas-time"></span> / <span class="canvas-duration"></span></div>'),this._$canvasTime=this._$timeDisplay.find(".canvas-time"),this._$canvasDuration=this._$timeDisplay.find(".canvas-duration"),this._$canvasLoadingProgress=t('<div class="loading-progress"></div>'),this._$fullscreenButton=t('\n                                <button class="btn button-fullscreen" title="'+this._data.content.fullscreen+'">\n                                    <i class="av-icon av-icon-fullscreen" aria-hidden="true"></i>'+this._data.content.fullscreen+"\n                                </button>"),this.isVirtual()&&this.$playerElement.addClass("virtual");var o=t('<div class="volume"></div>');if(this._volume=new r({target:o[0],data:Object.assign({},this._data)}),this._volume.on(i.VOLUME_CHANGED,function(t){n.fire(i.VOLUME_CHANGED,t)},!1),this._$controlsContainer.append(this._$prevButton,this._$playButton,this._$nextButton,this._$timeDisplay,this._$fullscreenButton,o),this._$canvasTimelineContainer.append(this._$canvasHoverPreview,this._$canvasHoverHighlight,this._$durationHighlight,this._$canvasLoadingProgress),this._$rangeTimelineContainer.append(this._$rangeHoverPreview,this._$rangeHoverHighlight),this._$optionsContainer.append(this._$canvasTimelineContainer,this._$rangeTimelineContainer,this._$timelineItemContainer,this._$controlsContainer),this.$playerElement.append(this._$canvasContainer,this._$optionsContainer),this._$canvasHoverPreview.hide(),this._$rangeHoverPreview.hide(),this._data&&this._data.helper&&this._data.canvas){var a=[];this.isVirtual()?this._data.canvas.canvases.forEach(function(t){if(n._data&&n._data.helper){var r=n._data.helper.getCanvasRanges(t),i=[];r.forEach(function(t){var r=e.extend(!0,{},t);if(i.push(r),r.canvases&&r.canvases.length)for(var o=0;o<r.canvases.length;o++)r.canvases[o]=c.retargetTemporalComponent(n._data.canvas.canvases,r.__jsonld.items[o].id)}),a.push.apply(a,i)}}):a=a.concat(this._data.helper.getCanvasRanges(this._data.canvas)),a.forEach(function(t){n.ranges.push(t)})}var s=this._data.canvas.getWidth(),u=this._data.canvas.getHeight();this._canvasWidth=s||this.$playerElement.parent().width(),this._canvasHeight=u||this._canvasWidth*this._data.defaultAspectRatio;var l=this,f=0,d=0;this._$prevButton.on("touchstart click",function(t){t.preventDefault(),1===++f?(n._previous(!1),d=setTimeout(function(){f=0,d=0},n._data.doubleClickMS)):(n._previous(!0),clearTimeout(d),f=0,d=0)}),this._$playButton[0].addEventListener("click",function(t){t.preventDefault(),n._isPlaying?n.pause():n.play()},!1),this._$nextButton.on("touchstart click",function(t){t.preventDefault(),n._next()}),this._$canvasTimelineContainer.slider({value:0,step:.01,orientation:"horizontal",range:"min",max:l._getDuration(),animate:!1,create:function(t,e){},slide:function(t,e){l._setCurrentTime(e.value)},stop:function(t,e){}}),this._$canvasTimelineContainer.mouseout(function(){l._$canvasHoverHighlight.width(0),l._$canvasHoverPreview.hide()}),this._$rangeTimelineContainer.mouseout(function(){l._$rangeHoverHighlight.width(0),l._$rangeHoverPreview.hide()}),this._$canvasTimelineContainer.on("mousemove",function(t){n._updateHoverPreview(t,n._$canvasTimelineContainer,n._getDuration())}),this._$rangeTimelineContainer.on("mousemove",function(t){if(n._data.range){var e=n._data.range.getDuration();n._updateHoverPreview(t,n._$rangeTimelineContainer,e?e.getLength():0)}}),this._$fullscreenButton[0].addEventListener("click",function(t){t.preventDefault();var e=document;if(e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement)n.fire(h.Events.FULLSCREEN,"off"),e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen&&e.webkitExitFullscreen();else{var r=n.$playerElement.get(0);n.fire(h.Events.FULLSCREEN,"on"),r.requestFullscreen?r.requestFullscreen():r.msRequestFullscreen?r.msRequestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.webkitRequestFullscreen&&r.webkitRequestFullscreen()}},!1),this._contentAnnotations=[];var p=this._data.canvas.getContent();this._$timelineItemContainer.hide();for(var g=0;g<p.length;g++){var v=p[g],m=void 0,y=v.getBody();if(!y.length)return void console.warn("item has no body");var w=this._getBody(y);if(w){var _=w.getType(),E=w.getFormat();_&&"textualbody"===_.toString()||(m=w.id.split("#")[0]);var b=v.getTarget();if(!b)return void console.warn("item has no target");var C=c.getSpatialComponent(b),S=Manifesto.Utils.getTemporalComponent(b);C||(C=[0,0,this._canvasWidth,this._canvasHeight]),S||(S=[0,this._getDuration()]);var I=parseInt(String(C[0])),A=parseInt(String(C[1])),T=parseInt(String(C[2])),x=parseInt(String(C[3])),M=parseInt(String(S[0])),R=parseInt(String(S[1])),O=this._convertToPercentage(A,this._canvasHeight),N=this._convertToPercentage(I,this._canvasWidth),k=this._convertToPercentage(T,this._canvasWidth),L=this._convertToPercentage(x,this._canvasHeight),P=/[\?|&]t=([^&]+)/g.exec(w.id),D=void 0,F=(D=P&&P[1]?P[1].split(","):[null,null])[0]?parseInt(D[0]):D[0],U={active:!1,end:R,endOffset:D[1]?parseInt(D[1]):D[1],format:E,height:L,left:N,source:m,start:M,startOffset:F,top:O,type:_,width:k};this._renderMediaElement(U);var j=v.getProperty("seeAlso");if(j&&j.length){var B=j[0].id;this.waveforms.push(B)}}else console.warn("unable to find suitable format for",v.id)}this._renderWaveform()}else console.warn("unable to initialise, missing canvas or content")},a.prototype._getBody=function(t){for(var e=0;e<t.length;e++){if((r=(n=t[e]).getFormat())&&c.isHLSFormat(r)&&c.canPlayHls())return n}for(e=0;e<t.length;e++){if((r=(n=t[e]).getFormat())&&c.isMpegDashFormat(r)&&!c.isSafari())return n}for(e=0;e<t.length;e++){var n,r;if((r=(n=t[e]).getFormat())&&!c.isHLSFormat(r)&&!c.isMpegDashFormat(r))return n}return null},a.prototype._getDuration=function(){return this._data&&this._data.canvas?this._data.canvas.getDuration():0},a.prototype.data=function(){return{waveformColor:"#fff",waveformBarSpacing:4,waveformBarWidth:2,volume:1}},a.prototype.isVirtual=function(){return this._data.canvas instanceof l},a.prototype.isVisible=function(){return!!this._data.visible},a.prototype.includesVirtualSubCanvas=function(t){if(this.isVirtual()&&this._data.canvas&&this._data.canvas.canvases)for(var e=0;e<this._data.canvas.canvases.length;e++){var n=this._data.canvas.canvases[e];if(Manifesto.Utils.normaliseUrl(n.id)===t)return!0}return!1},a.prototype.set=function(e){var n=this,r=Object.assign({},this._data);this._data=Object.assign(this._data,e);var i=c.diff(r,this._data);if(i.includes("visible")&&this._data.canvas&&(this._data.visible?(this._rewind(),this.$playerElement.show()):(this.$playerElement.hide(),this.pause()),this.resize()),i.includes("range")&&this._data.helper)if(this._data.range){var o=this._data.range.getDuration();o&&((o.start>=this._canvasClockTime||o.end<=this._canvasClockTime)&&this._setCurrentTime(o.start),this._data.autoPlay&&this.play(),this.fire(h.Events.RANGE_CHANGED,this._data.range.id,this._data.range))}else this.fire(h.Events.RANGE_CHANGED,null);i.includes("volume")?this._contentAnnotations.forEach(function(e){var r=void 0!==n._data.volume?n._data.volume:1;t(e.element).prop("volume",r),n._volume.set({volume:n._data.volume})}):this._render(),i.includes("limitToRange")&&this._render()},a.prototype._hasRangeChanged=function(){var t=this._getRangeForCurrentTime();t&&!this._data.limitToRange&&(!this._data.range||this._data.range&&t.id!==this._data.range.id)&&this.set({range:e.extend(!0,{autoChanged:!0},t)})},a.prototype._getRangeForCurrentTime=function(t){var e;e=t?t.getRanges():this.ranges;for(var n=0;n<e.length;n++){var r=e[n];if(this._rangeSpansCurrentTime(r)){if(this._rangeNavigable(r))return r;for(var i=r.getRanges(),o=0;o<i.length;o++){var a=i[o];if(this._rangeSpansCurrentTime(a))return this._getRangeForCurrentTime(a)}return r.parentRange}}},a.prototype._rangeSpansCurrentTime=function(t){return!!t.spansTime(Math.ceil(this._canvasClockTime)+this._rangeSpanPadding)},a.prototype._rangeNavigable=function(t){var e=t.getBehavior();return!e||e.toString()!==manifesto.Behavior.nonav().toString()},a.prototype._render=function(){if(this._data.range){var t=this._data.range.getDuration();if(t){var e=this._getDuration(),n=this._$canvasTimelineContainer.width()/e,r=t.start*n,i=t.end*n;(i>e||i<r)&&(i=e);var o=i-r;this.isVirtual()||this.isOnlyCanvasInstance?(this._$durationHighlight.show(),this._$durationHighlight.css({left:r,width:o})):this._$durationHighlight.hide();var a=this;this._$rangeTimelineContainer.data("ui-sortable")&&this._$rangeTimelineContainer.slider("destroy"),this._$rangeTimelineContainer.slider({value:t.start,step:.01,orientation:"horizontal",range:"min",min:t.start,max:t.end,animate:!1,create:function(t,e){},slide:function(t,e){a._setCurrentTime(e.value)},stop:function(t,e){}})}}else this._$durationHighlight.hide();this._data.limitToRange&&this._data.range?(this._$canvasTimelineContainer.hide(),this._$rangeTimelineContainer.show()):(this._$canvasTimelineContainer.show(),this._$rangeTimelineContainer.hide()),this._updateCurrentTimeDisplay(),this._updateDurationDisplay(),this._drawWaveform()},a.prototype.getCanvasId=function(){if(this._data&&this._data.canvas)return this._data.canvas.id},a.prototype._updateHoverPreview=function(t,e,n){var r=e.offset(),i=t.pageX-r.left,o=e.find(".arrow"),a=e.find(".hover-highlight"),s=e.find(".hover-preview");a.width(i);var u=e.width(),l=i/u,f=Math.min(n*l);s.find(".label").text(c.formatTime(f));var h=s.outerWidth(),d=s.outerHeight(),p=i-.5*h,g=.5*h-6;p<0&&(p=0,g=i-6),p+h>u&&(p=u-h,g=h-(u-i)-6),s.css({left:p,top:-1*d+"px"}).show(),o.css({left:g})},a.prototype._previous=function(t){this._data.limitToRange?t?this._isNavigationConstrainedToRange()?this._rewind():this.fire(s.PREVIOUS_RANGE):this._rewind():this._data.range?t?(this.set({range:void 0}),this._rewind()):this.fire(s.PREVIOUS_RANGE):this._rewind()},a.prototype._next=function(){this._data.limitToRange&&this._isNavigationConstrainedToRange()?this._fastforward():this.fire(s.NEXT_RANGE)},a.prototype.destroy=function(){window.clearInterval(this._highPriorityInterval),window.clearInterval(this._lowPriorityInterval),window.clearInterval(this._canvasClockInterval)},a.prototype._convertToPercentage=function(t,e){return t/e*100},a.prototype._renderMediaElement=function(e){var n,r=this;switch(e.type.toString().toLowerCase()){case"video":n=t('<video class="anno" />');break;case"sound":case"audio":n=t('<audio class="anno" />');break;default:return}var i=n[0];if(i.onerror=function(){r.fire(h.Events.MEDIA_ERROR,i.error)},e.format&&"application/dash+xml"===e.format.toString()){n.attr("data-dashjs-player","");var o=dashjs.MediaPlayer().create();o.getDebug().setLogToBrowserConsole(!1),this._data.adaptiveAuthEnabled&&o.setXHRWithCredentialsForType("MPD",!0),o.initialize(i,e.source)}else if(e.format&&"application/vnd.apple.mpegurl"===e.format.toString())if(Hls.isSupported()){var a=new Hls;a=this._data.adaptiveAuthEnabled?new Hls({xhrSetup:function(t){t.withCredentials=!0}}):new Hls,this._data.adaptiveAuthEnabled,a.loadSource(e.source),a.attachMedia(i)}else i.canPlayType("application/vnd.apple.mpegurl")&&(i.src=e.source);else n.attr("src",e.source);n.css({top:e.top+"%",left:e.left+"%",width:e.width+"%",height:e.height+"%"}).hide(),e.element=n,e.timeout=null;var s=this;e.checkForStall=function(){var t=this;this.active?(s._checkMediaSynchronization(),this.element.get(0).readyState>0&&!this.outOfSync?s._playbackStalled(!1,t):(s._playbackStalled(!0,t),this.timeout&&window.clearTimeout(this.timeout),this.timeout=window.setTimeout(function(){t.checkForStall()},1e3))):s._playbackStalled(!1,t)},this._contentAnnotations.push(e),this.$playerElement&&this._$canvasContainer.append(n),n.on("loadstart",function(){}),n.on("waiting",function(){}),n.on("seeking",function(){}),n.on("loadedmetadata",function(){r._readyMediaCount++,n.trigger("progress"),r._readyMediaCount===r._contentAnnotations.length&&(r._data.autoPlay?(console.log("autoplay"),r.play()):r.pause(),r._updateDurationDisplay(),r.fire(h.Events.MEDIA_READY))}),n.on("progress",function(){if(i.buffered.length>0){var e=i.duration,n=i.buffered.end(i.buffered.length-1);e>0&&t(".loading-progress").width(n/e*100+"%")}}),n.attr("preload","auto"),n.get(0).load(),this._renderSyncIndicator(e)},a.prototype._getWaveformData=function(e){return new Promise(function(n,r){t.ajax({url:e,type:"GET",dataType:"binary",responseType:"arraybuffer",processData:!1}).done(function(t){n(WaveformData.create(t))}).fail(function(t){r(new Error("Network Error"))})})},a.prototype._renderWaveform=function(){var t=this;if(this.waveforms.length){var e=this.waveforms.map(function(e){return t._getWaveformData(e)});Promise.all(e).then(function(e){t._waveformCanvas=document.createElement("canvas"),t._waveformCanvas.classList.add("waveform"),t._$canvasContainer.append(t._waveformCanvas),t.waveformPageX=t._waveformCanvas.getBoundingClientRect().left;var n=t._drawWaveform.bind(t);t._waveformCanvas.addEventListener("mousein",function(){t.waveformDeltaX=0}),t._$canvasTimelineContainer.on("mouseout",function(){t.waveformDeltaX=0,requestAnimationFrame(n)}),t._waveformCanvas.addEventListener("mouseout",function(){t.waveformDeltaX=0,requestAnimationFrame(n)}),t._waveformCanvas.addEventListener("mousemove",function(e){t.waveformDeltaX=e.clientX-t.waveformPageX,requestAnimationFrame(n)}),t._$canvasTimelineContainer.on("mousemove",function(e){t.waveformDeltaX=e.clientX-t.waveformPageX,requestAnimationFrame(n)}),t._waveformCanvas.addEventListener("click",function(){var e=t._waveformCanvas.getBoundingClientRect().width||0;e&&t.setCurrentTime(t._getDuration()*(t.waveformDeltaX/e))}),t._waveformCtx=t._waveformCanvas.getContext("2d"),t._waveformCtx&&(t._waveformCtx.fillStyle=t._data.waveformColor,t._compositeWaveform=new u(e),t.fire(h.Events.WAVEFORM_READY))})}},a.prototype._drawWaveform=function(){if(this._waveformCtx){var t,e=0,n=this._compositeWaveform.duration;this._data.range&&(t=this._data.range.getDuration()),this._data.limitToRange&&t&&(e=t.start,n=t.end);var r=Math.min(this.getClockTime()/this._getDuration(),1),i=e*this._compositeWaveform.pixelsPerSecond,o=n*this._compositeWaveform.pixelsPerSecond,a=this._waveformCtx.canvas.width,s=this._waveformCtx.canvas.height,u=this._data.waveformBarSpacing,l=this._data.waveformBarWidth,f=Math.floor((o-i)/a*u),h=a/u;this._waveformCtx.clearRect(0,0,a,s),this._waveformCtx.fillStyle=this._data.waveformColor;for(var d=i;d<o;d+=f){var p=this._getWaveformMaxAndMin(this._compositeWaveform,d,h),g=this._scaleY(p.max-p.min,s),v=(s-g)/2,m=a*c.normalise(d,i,o),y=m/a<r,w=this.waveformDeltaX/a,_=this._data.waveformColor;y?_=0===this.waveformDeltaX?"#14A4C3":m/a<w?"#11758e":"#14A4C3":m/a<w&&(_="#86b3c3"),this._waveformCtx.fillStyle=_,this._waveformCtx.fillRect(m,v,l,g)}}},a.prototype._getWaveformMaxAndMin=function(t,e,n){for(var r=-127,i=128,o=e;o<e+n;o++){var a=t.max(o),s=t.min(o);a>r&&(r=a),s<i&&(i=s)}return{max:r,min:i}},a.prototype._updateCurrentTimeDisplay=function(){var t;if(this._data.range&&(t=this._data.range.getDuration()),this._data.limitToRange&&t){var e=this._canvasClockTime-t.start;this._$canvasTime.text(c.formatTime(e))}else this._$canvasTime.text(c.formatTime(this._canvasClockTime))},a.prototype._updateDurationDisplay=function(){var t;this._data.range&&(t=this._data.range.getDuration()),this._data.limitToRange&&t?this._$canvasDuration.text(c.formatTime(t.getLength())):this._$canvasDuration.text(c.formatTime(this._getDuration()))},a.prototype._renderSyncIndicator=function(e){var n=this._convertToPercentage(e.start,this._getDuration()),r=this._convertToPercentage(e.end-e.start,this._getDuration()),i=t('<div class="timeline-item" title="'+e.source+'" data-start="'+e.start+'" data-end="'+e.end+'"></div>');i.css({left:n+"%",width:r+"%"});var o=t('<div class="line-wrapper"></div>');i.appendTo(o),e.timelineElement=i,this.$playerElement&&this._$timelineItemContainer.append(o)},a.prototype.setCurrentTime=function(t){return this._setCurrentTime(t)},a.prototype._setCurrentTime=function(t){this._canvasClockTime=t,this._canvasClockStartDate=Date.now()-1e3*this._canvasClockTime,this.logMessage("SET CURRENT TIME to: "+this._canvasClockTime+" seconds."),this._canvasClockUpdater(),this._highPriorityUpdater(),this._lowPriorityUpdater(),this._synchronizeMedia()},a.prototype._rewind=function(t){var e;this.pause(),this._data.range&&(e=this._data.range.getDuration()),this._data.limitToRange&&e?this.setCurrentTime(e.start):this.setCurrentTime(0),this._data.limitToRange||this._data&&this._data.helper&&this.set({range:void 0})},a.prototype._fastforward=function(){var t;this._data.range&&(t=this._data.range.getDuration()),this._data.limitToRange&&t?this._canvasClockTime=t.end:this._canvasClockTime=this._getDuration(),this.pause()},a.prototype.play=function(t){var e=this;if(!this._isPlaying){var n;this._data.range&&(n=this._data.range.getDuration()),this._data.limitToRange&&n&&this._canvasClockTime>=n.end&&(this._canvasClockTime=n.start),this._canvasClockTime===this._getDuration()&&(this._canvasClockTime=0),this._canvasClockStartDate=Date.now()-1e3*this._canvasClockTime,this._highPriorityInterval&&clearInterval(this._highPriorityInterval),this._highPriorityInterval=window.setInterval(function(){e._highPriorityUpdater()},this._highPriorityFrequency),this._lowPriorityInterval&&clearInterval(this._lowPriorityInterval),this._lowPriorityInterval=window.setInterval(function(){e._lowPriorityUpdater()},this._lowPriorityFrequency),this._canvasClockInterval&&clearInterval(this._canvasClockInterval),this._canvasClockInterval=window.setInterval(function(){e._canvasClockUpdater()},this._canvasClockFrequency),this._isPlaying=!0,t||this._synchronizeMedia();var r=this._data&&this._data.content?this._data.content.pause:"";this._$playButton.prop("title",r),this._$playButton.find("i").switchClass("play","pause"),this.fire(s.PLAYCANVAS),this.logMessage("PLAY canvas")}},a.prototype.pause=function(t){window.clearInterval(this._highPriorityInterval),window.clearInterval(this._lowPriorityInterval),window.clearInterval(this._canvasClockInterval),this._isPlaying=!1,t||(this._highPriorityUpdater(),this._lowPriorityUpdater(),this._synchronizeMedia());var e=this._data&&this._data.content?this._data.content.play:"";this._$playButton.prop("title",e),this._$playButton.find("i").switchClass("pause","play"),this.fire(s.PAUSECANVAS),this.logMessage("PAUSE canvas")},a.prototype._isNavigationConstrainedToRange=function(){return this._data.constrainNavigationToRange},a.prototype._canvasClockUpdater=function(){var t;this._canvasClockTime=(Date.now()-this._canvasClockStartDate)/1e3,this._data.range&&(t=this._data.range.getDuration()),this._data.limitToRange&&t&&this._canvasClockTime>=t.end&&this.pause(),this._canvasClockTime>=this._getDuration()&&(this._canvasClockTime=this._getDuration(),this.pause())},a.prototype._highPriorityUpdater=function(){this._$rangeTimelineContainer.slider({value:this._canvasClockTime}),this._$canvasTimelineContainer.slider({value:this._canvasClockTime}),this._updateCurrentTimeDisplay(),this._updateDurationDisplay(),this._drawWaveform()},a.prototype._lowPriorityUpdater=function(){this._updateMediaActiveStates(),this._data.autoSelectRange&&(this.isVirtual()||this.isOnlyCanvasInstance)&&this._hasRangeChanged()},a.prototype._updateMediaActiveStates=function(){for(var t,e=0;e<this._contentAnnotations.length;e++)(t=this._contentAnnotations[e]).start<=this._canvasClockTime&&t.end>=this._canvasClockTime?(this._checkMediaSynchronization(),t.active||(this._synchronizeMedia(),t.active=!0,t.element.show(),t.timelineElement.addClass("active")),t.element[0].currentTime>t.element[0].duration-t.endOffset&&this._pauseMedia(t.element[0])):t.active&&(t.active=!1,t.element.hide(),t.timelineElement.removeClass("active"),this._pauseMedia(t.element[0]))},a.prototype._pauseMedia=function(t){t.pause()},a.prototype._setMediaCurrentTime=function(t,e){isNaN(t.duration)||(t.currentTime=e)},a.prototype._synchronizeMedia=function(){for(var t,e=0;e<this._contentAnnotations.length;e++){if(t=this._contentAnnotations[e],this._setMediaCurrentTime(t.element[0],this._canvasClockTime-t.start+t.startOffset),t.start<=this._canvasClockTime&&t.end>=this._canvasClockTime)if(this._isPlaying){if(t.element[0].paused){var n=t.element[0].play();n&&n.catch(function(){})}}else this._pauseMedia(t.element[0]);else this._pauseMedia(t.element[0]);t.element[0].currentTime>t.element[0].duration-t.endOffset&&this._pauseMedia(t.element[0])}this.logMessage("SYNC MEDIA at: "+this._canvasClockTime+" seconds.")},a.prototype._checkMediaSynchronization=function(){for(var t,e=0,n=this._contentAnnotations.length;e<n;e++)if((t=this._contentAnnotations[e]).start<=this._canvasClockTime&&t.end>=this._canvasClockTime){var r=this._canvasClockTime-t.start+t.startOffset,i=t.element[0].currentTime;if(Math.abs(i-r)>this._mediaSyncMarginSecs){t.outOfSync=!0;var o=Math.abs(i-r);this.logMessage("DETECTED synchronization lag: "+Math.abs(o)),this._setMediaCurrentTime(t.element[0],r)}else t.outOfSync=!1}},a.prototype._playbackStalled=function(t,e){if(t)this._stallRequestedBy.indexOf(e)<0&&this._stallRequestedBy.push(e),this._isStalled||(this.$playerElement,this._wasPlaying=this._isPlaying,this.pause(!0),this._isStalled=t);else{var n=this._stallRequestedBy.indexOf(e);n>=0&&this._stallRequestedBy.splice(n,1),0===this._stallRequestedBy.length&&(this._isStalled&&this._wasPlaying&&this.play(!0),this._isStalled=t)}},a.prototype.resize=function(){if(this.$playerElement){var t=this._$canvasContainer.width();if(t){this._$canvasTimelineContainer.width(t);var e=this.$playerElement.find(".options-container");void 0!==this._data.halveAtWidth&&this.$playerElement.parent().width()<this._data.halveAtWidth?this._$canvasContainer.height(this.$playerElement.parent().height()/2):this._$canvasContainer.height(this.$playerElement.parent().height()-e.height())}if(this._waveformCanvas){var n=this._$canvasContainer.width(),r=this._$canvasContainer.height();this._waveformCanvas.width=n,this._waveformCanvas.height=r,this.waveformPageX=this._waveformCanvas.getBoundingClientRect().left}this._render()}},a}(_Components.BaseComponent);n.CanvasInstance=a;var s=function(){function t(){}return t.NEXT_RANGE="nextrange",t.PAUSECANVAS="pause",t.PLAYCANVAS="play",t.PREVIOUS_RANGE="previousrange",t}();n.CanvasInstanceEvents=s;var u=function(){function t(t){var e=this;this.length=0,this.duration=0,this.pixelsPerSecond=Number.MAX_VALUE,this.secondsPerPixel=Number.MAX_VALUE,this.timeIndex={},this.minIndex={},this.maxIndex={},this._waveforms=[],t.forEach(function(t){e._waveforms.push({start:e.length,end:e.length+t.adapter.length,waveform:t}),e.length+=t.adapter.length,e.duration+=t.duration,e.pixelsPerSecond=Math.min(e.pixelsPerSecond,t.pixels_per_second),e.secondsPerPixel=Math.min(e.secondsPerPixel,t.seconds_per_pixel)})}return t.prototype.min=function(t){if(void 0===this.minIndex[t]){var e=this._find(t);this.minIndex[t]=e?e.waveform.min_sample(t-e.start):0}return this.minIndex[t]},t.prototype.max=function(t){if(void 0===this.maxIndex[t]){var e=this._find(t);this.maxIndex[t]=e?e.waveform.max_sample(t-e.start):0}return this.maxIndex[t]},t.prototype._find=function(t){if(void 0===this.timeIndex[t]){var e=this._waveforms.find(function(e){return t>=e.start&&t<e.end});if(!e)return null;this.timeIndex[t]=e}return this.timeIndex[t]},t}();n.CompositeWaveform=u;var c=function(){function t(){}return t._compare=function(t,e){var n=[];return Object.keys(t).forEach(function(r){Object.is(e[r],t[r])||n.push(r)}),n},t.diff=function(e,n){return Array.from(new Set(t._compare(e,n).concat(t._compare(n,e))))},t.getSpatialComponent=function(t){var e=/[\?|&]xywh=([^&]+)/g.exec(t),n=null;return e&&e[1]&&(n=e[1].split(",")),n},t.getFirstTargetedCanvasId=function(e){var n;if(e.canvases&&e.canvases.length)n=e.canvases[0];else{var r=e.getRanges();if(r.length)return t.getFirstTargetedCanvasId(r[0])}if(void 0!==n)return Manifesto.Utils.normaliseUrl(n)},t.getTimestamp=function(){return String((new Date).valueOf())},t.retargetTemporalComponent=function(t,e){var n=Manifesto.Utils.getTemporalComponent(e);if(n){for(var r=0,i=e.substr(0,e.indexOf("#")),o=0;o<t.length;o++){var a=t[o];if(a.id.includes(i))break;var s=a.getDuration();s&&(r+=s)}return n[0]=Number(n[0])+r,n[1]=Number(n[1])+r,i+"#t="+n[0]+","+n[1]}},t.formatTime=function(t){var e,n,r;return r=Math.ceil(t),((e=(e=Math.floor(r/3600))>=10?e:"0"+e)>=1?e+":":"")+(n=(n=Math.floor(r%3600/60))>=10?n:"0"+n)+":"+(r=(r=Math.floor(r%3600%60))>=10?r:"0"+r)},t.isIE=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("Edge/");return r>0&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)},t.isSafari=function(){var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return console.log("isSafari",t),t},t.debounce=function(t,e){return e=e||100,function(){if(!t.debouncing){var n=Array.prototype.slice.apply(arguments);t.lastReturnVal=t.apply(window,n),t.debouncing=!0}return clearTimeout(t.debounceTimeout),t.debounceTimeout=setTimeout(function(){t.debouncing=!1},e),t.lastReturnVal}},t.normalise=function(t,e,n){return(t-e)/(n-e)},t.isHLSFormat=function(t){return this.hlsMimeTypes.includes(t.toString())},t.isMpegDashFormat=function(t){return"application/dash+xml"===t.toString()},t.canPlayHls=function(){var t="object"==typeof document&&document,e=t&&t.createElement("video");return Boolean(e&&e.canPlayType)&&this.hlsMimeTypes.some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})},t.hlsMimeTypes=["application/vnd.apple.mpegurl","vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],t}();n.AVComponentUtils=c;var l=function(){function t(){this.canvases=[],this.id=c.getTimestamp()}return t.prototype.addCanvas=function(t){this.canvases.push(e.extend(!0,{},t))},t.prototype.getContent=function(){var t=this,e=[];return this.canvases.forEach(function(n){var r=n.getContent();r.forEach(function(t){var e=t.getTarget();e&&(Manifesto.Utils.getTemporalComponent(e)||(t.__jsonld.target+="#t=0,"+n.getDuration()))}),r.forEach(function(e){var n=e.getTarget();n&&(e.__jsonld.target=c.retargetTemporalComponent(t.canvases,n))}),e.push.apply(e,r)}),e},t.prototype.getDuration=function(){var t=0;return this.canvases.forEach(function(e){var n=e.getDuration();n&&(t+=n)}),t},t.prototype.getWidth=function(){return this.canvases.length?this.canvases[0].getWidth():0},t.prototype.getHeight=function(){return this.canvases.length?this.canvases[0].getHeight():0},t}();n.VirtualCanvas=l;var f=function(){};n.Waveform=f;var h=function(n){function r(t){var e=n.call(this,t)||this;return e._data=e.data(),e.canvasInstances=[],e._readyMedia=0,e._readyWaveforms=0,e._posterCanvasWidth=0,e._posterCanvasHeight=0,e._posterImageExpanded=!1,console.log("av component from local"),e._init(),e._resize(),e}return o(r,n),r.prototype._init=function(){var t=n.prototype._init.call(this);return t||console.error("Component failed to initialise"),t},r.prototype.getCurrentCanvasInstance=function(){var t=this._data.helper.getRangeById(this._data.range.id);if(!t)return null;var e=c.getFirstTargetedCanvasId(t);return e?this._data.helper.getCanvasById(e):null},r.prototype.data=function(){return{autoPlay:!1,constrainNavigationToRange:!1,defaultAspectRatio:.56,doubleClickMS:350,halveAtWidth:200,limitToRange:!1,posterImageRatio:.3,virtualCanvasEnabled:!0,content:{currentTime:"Current Time",collapse:"Collapse",duration:"Duration",expand:"Expand",mute:"Mute",next:"Next",pause:"Pause",play:"Play",previous:"Previous",unmute:"Unmute",fullscreen:"Fullscreen"}}},r.prototype.set=function(t){var n=this,r=Object.assign({},this._data);this._data=Object.assign(this._data,t);var i=c.diff(r,this._data);if(i.includes("helper")&&this._reset(),this._data.helper){if(i.includes("limitToRange")&&this._data.canvasId&&this.canvasInstances.forEach(function(t,e){t.set({limitToRange:n._data.limitToRange})}),i.includes("constrainNavigationToRange")&&this._data.canvasId&&this.canvasInstances.forEach(function(t,e){t.set({constrainNavigationToRange:n._data.constrainNavigationToRange})}),i.includes("autoSelectRange")&&this._data.canvasId&&this.canvasInstances.forEach(function(t,e){t.set({autoSelectRange:n._data.autoSelectRange})}),i.includes("canvasId")&&this._data.canvasId){var o=this._getCanvasInstanceById(this._data.canvasId);o&&this.canvasInstances.forEach(function(t){t.getCanvasId()!==o.getCanvasId()?t.set({visible:!1}):i.includes("range")?t.set({visible:!0,range:n._data.range?e.extend(!0,{},n._data.range):void 0}):t.set({visible:!0})})}if(i.includes("virtualCanvasEnabled")&&(this.set({range:void 0}),this._data.virtualCanvasEnabled&&this.canvasInstances.forEach(function(t){t.isVirtual()&&n.set({canvasId:t.getCanvasId(),range:void 0})})),i.includes("range")&&this._data.range){var a=this._data.helper.getRangeById(this._data.range.id);if(a){var s=c.getFirstTargetedCanvasId(a);if(s){var u=this._getCanvasInstanceById(s);if(u){if(u.isVirtual()&&this._data.virtualCanvasEnabled&&u.includesVirtualSubCanvas(s)){s=u.getCanvasId();for(var l=0;l<u.ranges.length;l++){var f=u.ranges[l];if(f.id===a.id){a=f;break}}}this._data.canvasId&&(this._data.canvasId.includes("://")?Manifesto.Utils.normaliseUrl(this._data.canvasId):this._data.canvasId)!==s?this.set({canvasId:s,range:e.extend(!0,{},a)}):u.set({range:e.extend(!0,{},a)})}}}else console.warn("range not found")}this._render(),this._resize()}else console.warn("must pass a helper object")},r.prototype._render=function(){},r.prototype.reset=function(){this._reset()},r.prototype._reset=function(){var e=this;if(this._readyMedia=0,this._readyWaveforms=0,this._posterCanvasWidth=0,this._posterCanvasHeight=0,clearInterval(this._checkAllMediaReadyInterval),clearInterval(this._checkAllWaveformsReadyInterval),this.canvasInstances.forEach(function(t){t.destroy()}),this.canvasInstances=[],this._$element.empty(),this._data&&this._data.helper){var n=this._data.helper.manifest.getBehavior(),r=this._getCanvases();if(n&&n.toString()===manifesto.Behavior.autoadvance().toString()){var i=new l;r.forEach(function(t){i.addCanvas(t)}),this._initCanvas(i)}r.forEach(function(t){e._initCanvas(t)}),this.canvasInstances.length>0&&(this._data.canvasId=this.canvasInstances[0].getCanvasId()),this._checkAllMediaReadyInterval=setInterval(this._checkAllMediaReady.bind(this),100),this._checkAllWaveformsReadyInterval=setInterval(this._checkAllWaveformsReady.bind(this),100),this._$posterContainer=t('<div class="poster-container"></div>'),this._$element.append(this._$posterContainer),this._$posterImage=t('<div class="poster-image"></div>'),this._$posterExpandButton=t('\n                    <button class="btn" title="'+(this._data&&this._data.content?this._data.content.expand:"")+'">\n                        <i class="av-icon  av-icon-expand expand" aria-hidden="true"></i><span>'+(this._data&&this._data.content?this._data.content.expand:"")+"</span>\n                    </button>\n                "),this._$posterImage.append(this._$posterExpandButton),this._$posterImage.on("touchstart click",function(t){t.preventDefault();var n=e._getPosterImageCss(!e._posterImageExpanded);if(e._$posterImage.animate(n),e._posterImageExpanded=!e._posterImageExpanded,e._data.content)if(e._posterImageExpanded){var r=e._data.content.collapse;e._$posterExpandButton.prop("title",r),e._$posterExpandButton.find("i").switchClass("expand","collapse")}else{r=e._data.content.expand;e._$posterExpandButton.prop("title",r),e._$posterExpandButton.find("i").switchClass("collapse","expand")}});var o=this._data.helper.getPosterCanvas();if(o){this._posterCanvasWidth=o.getWidth(),this._posterCanvasHeight=o.getHeight();var a=this._data.helper.getPosterImage();if(a){this._$posterContainer.append(this._$posterImage);var s=this._getPosterImageCss(this._posterImageExpanded);s=Object.assign({},s,{"background-image":"url("+a+")"}),this._$posterImage.css(s)}}}},r.prototype.setCurrentTime=function(t){var e=this._getCurrentCanvas();if(e)return e.setCurrentTime(t)},r.prototype.getCurrentTime=function(){var t=this._getCurrentCanvas();return t?t.getClockTime():0},r.prototype.isPlaying=function(){return this.canvasInstances.reduce(function(t,e){return t||e.isPlaying()},!1)},r.prototype._checkAllMediaReady=function(){console.log("loading media"),this._readyMedia===this.canvasInstances.length&&(console.log("all media ready"),clearInterval(this._checkAllMediaReadyInterval),this.fire(r.Events.MEDIA_READY),this.resize())},r.prototype._checkAllWaveformsReady=function(){console.log("loading waveforms"),this._readyWaveforms===this._getCanvasInstancesWithWaveforms().length&&(console.log("waveforms ready"),clearInterval(this._checkAllWaveformsReadyInterval),this.fire(r.Events.WAVEFORMS_READY),this.resize())},r.prototype._getCanvasInstancesWithWaveforms=function(){return this.canvasInstances.filter(function(t){return t.waveforms.length>0})},r.prototype._getCanvases=function(){return this._data.helper?this._data.helper.getCanvases():[]},r.prototype._initCanvas=function(t){var e=this,n=new a({target:document.createElement("div"),data:Object.assign({},{canvas:t},this._data)});n.logMessage=this._logMessage.bind(this),n.isOnlyCanvasInstance=1===this._getCanvases().length,this._$element.append(n.$playerElement),n.init(),this.canvasInstances.push(n),n.on("play",function(){e.fire(r.Events.PLAY,n)},!1),n.on("pause",function(){e.fire(r.Events.PAUSE,n)},!1),n.on(r.Events.MEDIA_READY,function(){e._readyMedia++,n.loaded()},!1),n.on(r.Events.WAVEFORM_READY,function(){e._readyWaveforms++},!1),n.on(s.PREVIOUS_RANGE,function(){e._prevRange(),e.play()},!1),n.on(s.NEXT_RANGE,function(){e._nextRange(),e.play()},!1),n.on(r.Events.RANGE_CHANGED,function(t){e.fire(r.Events.RANGE_CHANGED,t)},!1),n.on(i.VOLUME_CHANGED,function(t){e._setCanvasInstanceVolumes(t),e.fire(i.VOLUME_CHANGED,t)},!1),n.on(r.Events.MEDIA_ERROR,function(t){clearInterval(e._checkAllMediaReadyInterval),e.fire(r.Events.MEDIA_ERROR,t)},!1),n.on(r.Events.FULLSCREEN,function(t){e.fire(r.Events.FULLSCREEN,t)},!1)},r.prototype.getCurrentRange=function(){var t=this._data.helper.getCurrentRange().id;return this._getCurrentCanvas().ranges.find(function(e){return e.id===t})||null},r.prototype._prevRange=function(){if(this._data&&this._data.helper){var t=this.getCurrentRange();if(t){var e=this.getCurrentTime(),n=t.getDuration().start||0;if(e-n>5)return void this.setCurrentTime(n)}var r=this._data.helper.getPreviousRange();r?this.playRange(r.id):this._rewind()}},r.prototype._nextRange=function(){if(this._data&&this._data.helper){var t=this._data.helper.getNextRange();t&&this.playRange(t.id)}},r.prototype._setCanvasInstanceVolumes=function(t){this.canvasInstances.forEach(function(e){e.set({volume:t})})},r.prototype._getNormaliseCanvasId=function(t){return t.includes("://")?Manifesto.Utils.normaliseUrl(t):t},r.prototype._getCanvasInstanceById=function(t){if(t=this._getNormaliseCanvasId(t),this._data.virtualCanvasEnabled)for(var e=0;e<this.canvasInstances.length;e++){var n=(r=this.canvasInstances[e]).getCanvasId();if(n&&(n=this._getNormaliseCanvasId(n),(r.isVirtual()||1===this.canvasInstances.length)&&n===t||r.includesVirtualSubCanvas(t)))return r}else for(e=0;e<this.canvasInstances.length;e++){var r,i=(r=this.canvasInstances[e]).getCanvasId();if(i)if(Manifesto.Utils.normaliseUrl(i)===t)return r}},r.prototype._getCurrentCanvas=function(){if(this._data.canvasId)return this._getCanvasInstanceById(this._data.canvasId)},r.prototype._rewind=function(){if(!this._data.limitToRange){var t=this._getCurrentCanvas();t&&t.set({range:void 0})}},r.prototype.play=function(){var t=this._getCurrentCanvas();t&&t.play()},r.prototype.pause=function(){var t=this._getCurrentCanvas();t&&t.pause()},r.prototype.playRange=function(t,n){if(void 0===n&&(n=!1),this._data.helper){var r=this._data.helper.getRangeById(t);r&&this.set({range:e.extend(!0,{autoChanged:n},r)})}},r.prototype.showCanvas=function(t){var e=this._getCurrentCanvas();e&&e.getCanvasId()===t&&!e.isVisible()?e.set({visible:!0}):this.set({canvasId:t})},r.prototype._logMessage=function(t){this.fire(r.Events.LOG,t)},r.prototype._getPosterImageCss=function(t){var e=this._getCurrentCanvas();if(e){var n=e.$playerElement.find(".options-container"),r=e.$playerElement.parent().width(),i=e.$playerElement.parent().height()-n.height();if(t)return{top:0,left:0,width:r,height:i};var o=void 0,a=void 0,s=void 0;return this._posterCanvasWidth>this._posterCanvasHeight?(o=this._posterCanvasHeight/this._posterCanvasWidth,s=(a=r*this._data.posterImageRatio)*o):(o=this._posterCanvasWidth/this._posterCanvasHeight,a=(s=i*this._data.posterImageRatio)*o),{top:0,left:r-a,width:a,height:s}}return null},r.prototype.resize=function(){this.canvasInstances.forEach(function(t){t.resize()}),this._getCurrentCanvas()&&this._$posterImage&&this._$posterImage.is(":visible")&&(this._posterImageExpanded?this._$posterImage.css(this._getPosterImageCss(!0)):this._$posterImage.css(this._getPosterImageCss(!1)))},r}(_Components.BaseComponent);n.AVComponent=h}(r||(r={})),function(t){!function(t){var e=function(){function t(){}return t.PLAY="play",t.PAUSE="pause",t.MEDIA_READY="mediaready",t.MEDIA_ERROR="mediaerror",t.LOG="log",t.RANGE_CHANGED="rangechanged",t.WAVEFORM_READY="waveformready",t.WAVEFORMS_READY="waveformsready",t.FULLSCREEN="fullscreen",t}();t.Events=e}(t.AVComponent||(t.AVComponent={}))}(r||(r={})),(i=window).IIIFComponents?i.IIIFComponents.AVComponent=r.AVComponent:i.IIIFComponents=r}).call(this,n(0),n(0))},function(t,e,n){(function(e){var r,i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});(a||(a={})).version="0.5.0",a||(a={}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),function(t){var e=function(){function t(){}return t.prototype.getEnumerator=function(){return{moveNext:function(){return!1},current:void 0}},t.prototype.aggregate=function(t,e){for(var n=t,r=this.getEnumerator();r.moveNext();)n=e(n,r.current);return n},t.prototype.all=function(t){if(t)for(var e=this.getEnumerator(),n=0;e.moveNext();){if(!t(e.current,n))return!1;n++}return!0},t.prototype.any=function(t){for(var e=this.getEnumerator(),n=0;e.moveNext();){if(!t)return!0;if(t(e.current,n))return!0;n++}return!1},t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Not implemented")},t.prototype.apply=function(t){throw new Error("Not implemented")},t.prototype.at=function(t){for(var e=this.getEnumerator(),n=0;e.moveNext();){if(n===t)return e.current;n++}},t.prototype.average=function(t){var e=0,n=0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var r=this.getEnumerator();r.moveNext();)n+=t(r.current),e++;return 0===e?0:n/e},t.prototype.concat=function(t){throw new Error("Not implemented")},t.prototype.count=function(t){for(var e=0,n=this.getEnumerator();n.moveNext();)t&&!t(n.current)||e++;return e},t.prototype.difference=function(t,e){return e=e||function(t,e){return t===e},t instanceof Array&&(t=t.en()),{intersection:this.intersect(t,e).toArray().en(),aNotB:this.except(t,e).toArray().en(),bNotA:t.except(this,e).toArray().en()}},t.prototype.distinct=function(t){throw new Error("Not implemented")},t.prototype.except=function(t,e){throw new Error("Not implemented")},t.prototype.first=function(t){for(var e=this.getEnumerator();e.moveNext();)if(!t||t(e.current))return e.current},t.prototype.firstIndex=function(t){for(var e=this.getEnumerator(),n=0;e.moveNext();n++)if(!t||t(e.current))return n;return-1},t.prototype.forEach=function(t){for(var e=this.getEnumerator();e.moveNext();)t(e.current)},t.prototype.groupBy=function(t,e){throw new Error("Not implemented")},t.prototype.intersect=function(t,e){throw new Error("Not implemented")},t.prototype.join=function(t,e,n,r,i){throw new Error("Not implemented")},t.prototype.last=function(t){for(var e,n=this.getEnumerator();n.moveNext();)t&&!t(n.current)||(e=n.current);return e},t.prototype.lastIndex=function(t){for(var e=-1,n=this.getEnumerator(),r=0;n.moveNext();r++)t&&!t(n.current)||(e=r);return e},t.prototype.max=function(t){var e=this.getEnumerator();if(!e.moveNext())return 0;for(var n=(t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t})(e.current);e.moveNext();)n=Math.max(n,t(e.current));return n},t.prototype.min=function(t){var e=this.getEnumerator();if(!e.moveNext())return 0;for(var n=(t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t})(e.current);e.moveNext();)n=Math.min(n,t(e.current));return n},t.prototype.orderBy=function(t,e){throw new Error("Not implemented")},t.prototype.orderByDescending=function(t,e){throw new Error("Not implemented")},t.prototype.prepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Not implemented")},t.prototype.reverse=function(){throw new Error("Not implemented")},t.prototype.select=function(t){throw new Error("Not implemented")},t.prototype.selectMany=function(t){throw new Error("Not implemented")},t.prototype.skip=function(t){throw new Error("Not implemented")},t.prototype.skipWhile=function(t){throw new Error("Not implemented")},t.prototype.standardDeviation=function(t){var e=this.average(t),n=0,r=0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var i=this.getEnumerator();i.moveNext();){var o=t(i.current)-e;n+=o*o,r++}return Math.sqrt(n/r)},t.prototype.sum=function(t){var e=0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var n=this.getEnumerator();n.moveNext();)e+=t(n.current);return e},t.prototype.take=function(t){throw new Error("Not implemented")},t.prototype.takeWhile=function(t){throw new Error("Not implemented")},t.prototype.traverse=function(t){throw new Error("Not implemented")},t.prototype.traverseUnique=function(t,e){throw new Error("Not implemented")},t.prototype.toArray=function(){for(var t=[],e=this.getEnumerator();e.moveNext();)t.push(e.current);return t},t.prototype.toMap=function(t,e){throw new Error("Not implemented")},t.prototype.toList=function(){throw new Error("Not implemented")},t.prototype.union=function(t,e){throw new Error("Not implemented")},t.prototype.where=function(t){throw new Error("Not implemented")},t.prototype.zip=function(t,e){throw new Error("Not implemented")},t}();t.Enumerable=e}(a||(a={})),function(t){var e=function(){function e(t){var e;if(this.size=0,this._keys=[],this._values=[],t instanceof Array?e=t.en():t&&t.getEnumerator instanceof Function&&(e=t),e)for(var n=e.getEnumerator();n&&n.moveNext();)this.set(n.current[0],n.current[1])}return e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype.delete=function(t){var e=this._keys.indexOf(t);return e>-1&&(this._keys.splice(e,1),this._values.splice(e,1),this.size--,!0)},e.prototype.entries=function(){var e=this;return t.range(0,this.size).select(function(t){return[e._keys[t],e._values[t]]})},e.prototype.forEach=function(t,e){null==e&&(e=this);for(var n=0,r=this._keys,i=this._values,o=r.length;n<o;n++)t.call(e,i[n],r[n],this)},e.prototype.get=function(t){var e=this._keys.indexOf(t);return this._values[e]},e.prototype.has=function(t){return this._keys.indexOf(t)>-1},e.prototype.keys=function(){return this._keys.en()},e.prototype.set=function(t,e){var n=this._keys.indexOf(t);n>-1?this._values[n]=e:(this._keys.push(t),this._values.push(e),this.size++)},e.prototype.values=function(){return this._values.en()},e}();t.Map3=e,t.Enumerable.prototype.toMap=function(t,n){for(var r=new e,i=this.getEnumerator();i.moveNext();)r.set(t(i.current),n(i.current));return r},t.List&&(t.List.prototype.toMap=t.Enumerable.prototype.toMap)}(a||(a={})),function(t){t.Map||(t.Map=a.Map3)}("undefined"==typeof window?e:window),function(t){t.anonymous=function(e){var n=new t.Enumerable;return n.getEnumerator=function(){var t={current:void 0,moveNext:function(){return e(t)}};return t},n}}(a||(a={})),function(t){function e(t,e){var n,r,i=1,o={current:void 0,moveNext:function(){if(i<2){if((n=n||t.getEnumerator()).moveNext())return o.current=n.current,!0;i++}return(r=r||e.en().getEnumerator()).moveNext()?(o.current=r.current,!0):(o.current=void 0,!1)}};return o}t.Enumerable.prototype.append=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=new t.Enumerable;return o.getEnumerator=function(){return e(n,r)},o},t.List&&(t.List.prototype.append=t.Enumerable.prototype.append)}(a||(a={})),function(t){t.Enumerable.prototype.apply=function(e){var n=this,r=new t.Enumerable;return r.getEnumerator=function(){return function(t,e){var n,r=0,i={current:void 0,moveNext:function(){return n||(n=t.getEnumerator()),!!n.moveNext()&&(e(i.current=n.current,r),r++,!0)}};return i}(n,e)},r},t.List&&(t.List.prototype.apply=t.Enumerable.prototype.apply)}(a||(a={})),function(t){function e(){return this&&Array.isArray(this)?new n(this):new t.Enumerable}var n=function(t){function e(e){var n=t.call(this)||this;return n.getEnumerator=function(){return function(t){var e=t.length,n={moveNext:void 0,current:void 0},r=-1;return n.moveNext=function(){return++r>=e?(n.current=void 0,!1):(n.current=t[r],!0)},n}(e)},n.toArray=function(){return e.slice(0)},n}return o(e,t),e}(t.Enumerable);try{Object.defineProperty(Array.prototype,"en",{value:e,enumerable:!1,writable:!1,configurable:!1})}catch(t){Array.prototype.en=e}}(a||(a={})),function(t){t.Enumerable.prototype.concat=function(e){var n=this,r=e instanceof Array?e.en():e,i=new t.Enumerable;return i.getEnumerator=function(){return function(t,e){var n,r=!1,i={current:void 0,moveNext:function(){return n||(n=t.getEnumerator()),i.current=void 0,n.moveNext()?(i.current=n.current,!0):!r&&(r=!0,!!(n=e.getEnumerator()).moveNext()&&(i.current=n.current,!0))}};return i}(n,r)},i},t.List&&(t.List.prototype.concat=t.Enumerable.prototype.concat)}(a||(a={})),function(t){t.Enumerable.prototype.distinct=function(e){var n=this,r=new t.Enumerable;return r.getEnumerator=function(){return function(t,e){var n,r=[],i={current:void 0,moveNext:function(){if(n||(n=t.getEnumerator()),i.current=void 0,!e){for(;n.moveNext();)if(r.indexOf(n.current)<0)return r.push(i.current=n.current),!0;return!1}for(;n.moveNext();){for(var o=0,a=r.length,s=!1;o<a&&!s;o++)s=!!e(r[o],n.current);if(!s)return r.push(i.current=n.current),!0}return!1}};return i}(n,e)},r},t.List&&(t.List.prototype.distinct=t.Enumerable.prototype.distinct)}(a||(a={})),function(t){t.Enumerable.prototype.except=function(e,n){var r=this,i=e instanceof Array?e.en():e,o=new t.Enumerable;return o.getEnumerator=function(){return function(t,e,n){n=n||function(t,e){return t===e};var r,i={current:void 0,moveNext:function(){for(r||(r=t.getEnumerator()),i.current=void 0;r.moveNext();){for(var o=!1,a=e.getEnumerator();a.moveNext()&&!o;)o=n(r.current,a.current);if(!o)return i.current=r.current,!0}return!1}};return i}(r,i,n)},o},t.List&&(t.List.prototype.except=t.Enumerable.prototype.except)}(a||(a={})),Function.prototype.fromJson=function(t,e){function n(t,e){if(null==t)return t;if(e instanceof Function)return e(t);if(e instanceof Array){if(!((e=e[0])instanceof Function&&t instanceof Array))return;for(var n=[],r=0;r<t.length;r++)n.push(e(t[r]));return n}}var r=new this;if(null==t)return r;var i=[];for(var o in e){void 0!==(a=n(t[o],e[o]))&&(r[o]=a,i.push(o))}for(var o in this.$jsonMappings)if(!(i.indexOf(o)>-1)){var a;void 0!==(a=n(t[o],this.$jsonMappings[o]))&&(r[o]=a,i.push(o))}for(var o in t)i.indexOf(o)>-1||(r[o]=t[o]);return r},function(t){function e(t,e,r){var i,o=0,a={current:void 0,moveNext:function(){return i||(i=n(t,e,r)),a.current=void 0,!(o>=i.length||(a.current=i[o],o++,0))}};return a}function n(t,e,n){n=n||function(t,e){return t===e};for(var i,o=[],a=[],s=t.getEnumerator();s.moveNext();){i=e(s.current);for(var u=-1,c=0,l=a.length;c<l;c++)if(n(i,a[c])){u=c;break}var f;u<0?(a.push(i),o.push(f=new r(i))):f=o[u],f._add(s.current)}return o}var r=function(t){function e(e){var n=t.call(this)||this;return n.key=e,n._arr=[],n.getEnumerator=function(){return n._arr.en().getEnumerator()},n}return o(e,t),e.prototype._add=function(t){this._arr.push(t)},e}(t.Enumerable);t.Enumerable.prototype.groupBy=function(n,r){var i=this,o=new t.Enumerable;return o.getEnumerator=function(){return e(i,n,r)},o},t.List&&(t.List.prototype.groupBy=t.Enumerable.prototype.groupBy)}(a||(a={})),function(t){t.Enumerable.prototype.intersect=function(e,n){var r=this,i=e instanceof Array?e.en():e,o=new t.Enumerable;return o.getEnumerator=function(){return function(e,n,r){r=r||function(t,e){return t===e};var i,o={current:void 0,moveNext:function(){for(i||(i=t.en(e).distinct().getEnumerator()),o.current=void 0;i.moveNext();){for(var a=!1,s=n.getEnumerator();s.moveNext()&&!a;)a=r(i.current,s.current);if(a)return o.current=i.current,!0}return!1}};return o}(r,i,n)},o},t.List&&(t.List.prototype.intersect=t.Enumerable.prototype.intersect)}(a||(a={})),function(t){t.Enumerable.prototype.join=function(e,n,r,i,o){var a=this,s=e instanceof Array?e.en():e,u=new t.Enumerable;return u.getEnumerator=function(){return function(e,n,r,i,o,a){a=a||function(t,e){return t===e};var s,u,c=0,l={current:void 0,moveNext:function(){if(l.current=void 0,!s){if(!(s=e.getEnumerator()).moveNext())return!1;u=t.en(n).toArray()}var f;do{for(;c<u.length;c++)if(f=u[c],a(r(s.current),i(f)))return c++,l.current=o(s.current,f),!0;c=0}while(s.moveNext());return!1}};return l}(a,s,n,r,i,o)},u},t.List&&(t.List.prototype.join=t.Enumerable.prototype.join)}(a||(a={})),function(t){function e(){this.constructor=n}t.Enumerable.prototype.toList=function(){for(var t=new n,e=this.getEnumerator();e.moveNext();)t.push(e.current);return t};var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toString=function(){throw new Error("Not implemented")},e.prototype.toLocaleString=function(){throw new Error("Not implemented")},e.prototype.pop=function(){throw new Error("Not implemented")},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Not implemented")},e.prototype.shift=function(){throw new Error("Not implemented")},e.prototype.slice=function(t,e){throw new Error("Not implemented")},e.prototype.sort=function(t){throw new Error("Not implemented")},e.prototype.splice=function(){throw new Error("Not implemented")},e.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Not implemented")},e.prototype.indexOf=function(t,e){throw new Error("Not implemented")},e.prototype.lastIndexOf=function(t,e){throw new Error("Not implemented")},e.prototype.every=function(t,e){throw new Error("Not implemented")},e.prototype.some=function(t,e){throw new Error("Not implemented")},e.prototype.forEach=function(t,e){throw new Error("Not implemented")},e.prototype.map=function(t,e){throw new Error("Not implemented")},e.prototype.filter=function(t,e){throw new Error("Not implemented")},e.prototype.reduce=function(t,e){throw new Error("Not implemented")},e.prototype.reduceRight=function(t,e){throw new Error("Not implemented")},e.prototype.remove=function(t){throw new Error("Not implemented")},e.prototype.removeWhere=function(t){throw new Error("Not implemented")},e}(t.Enumerable);for(var r in t.List=n,Array)Array.hasOwnProperty(r)&&(n[r]=Array[r]);for(var i in e.prototype=Array.prototype,n.prototype=new e,t.Enumerable.prototype)"getEnumerator"!==i&&(n.prototype[i]=t.Enumerable.prototype[i]);n.prototype.getEnumerator=function(){var t=this,e=t.length,n={moveNext:void 0,current:void 0},r=-1;return n.moveNext=function(){return++r>=e?(n.current=void 0,!1):(n.current=t[r],!0)},n},n.prototype.remove=function(t){return this.removeWhere(function(e){return e===t}).any()},n.prototype.removeWhere=function(t){for(var e,n=[],r=this.length-1;r>=0;r--)!0===t(e=this[r],r)&&(this.splice(r,1),n.push(e));return n.en().reverse()}}(a||(a={})),function(t){function e(t,e,r,i){return new n(t,e,r,i)}var n=function(e){function n(t,n,r,i){var o=e.call(this)||this;o.Source=t,i=i||function(t,e){return t>e?1:t<e?-1:0};var a=!0===r?-1:1;return o.Sorter=function(t,e){return a*i(n(t),n(e))},o}return o(n,e),n.prototype.getEnumerator=function(){var e,n=this.Source,r=this.Sorter,i=0,o={current:void 0,moveNext:function(){return e||(e=t.en(n).toArray()).sort(r),o.current=void 0,!(i>=e.length||(o.current=e[i],i++,0))}};return o},n.prototype.thenBy=function(t,e){return new r(this,t,!1,e)},n.prototype.thenByDescending=function(t,e){return new r(this,t,!0,e)},n}(t.Enumerable),r=function(t){function e(e,n,r,i){var o=t.call(this,e,n,r,i)||this,a=e.Sorter,s=o.Sorter;return o.Sorter=function(t,e){return a(t,e)||s(t,e)},o}return o(e,t),e}(n),i=t.Enumerable.prototype;i.orderBy=function(t,n){return e(this,t,!1,n)},i.orderByDescending=function(t,n){return e(this,t,!0,n)},t.List&&(t.List.prototype.orderBy=t.Enumerable.prototype.orderBy,t.List.prototype.orderByDescending=t.Enumerable.prototype.orderByDescending)}(a||(a={})),function(t){function e(t,e){var n,r,i=1,o={current:void 0,moveNext:function(){if(i<2){if((n=n||e.en().getEnumerator()).moveNext())return o.current=n.current,!0;i++}return(r=r||t.getEnumerator()).moveNext()?(o.current=r.current,!0):(o.current=void 0,!1)}};return o}t.Enumerable.prototype.prepend=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=new t.Enumerable;return o.getEnumerator=function(){return e(n,r)},o},t.List&&(t.List.prototype.prepend=t.Enumerable.prototype.prepend)}(a||(a={})),function(t){t.range=function(e,n,r){if((e=e||0)>(n=n||0))throw new Error("Start cannot be greater than end.");null==r&&(r=1);var i=new t.Enumerable;return i.getEnumerator=function(){return function(t,e,n){var r=t-n,i={current:void 0,moveNext:function(){return!((r+=n)>=e||(i.current=r,0))}};return i}(e,n,r)},i}}(a||(a={})),function(t){t.Enumerable.prototype.reverse=function(){var e=this,n=new t.Enumerable;return n.getEnumerator=function(){return function(e){var n,r=0,i={current:void 0,moveNext:function(){return n||(n=t.en(e).toArray(),r=n.length),r--,i.current=n[r],r>=0}};return i}(e)},n},t.List&&(t.List.prototype.reverse=t.Enumerable.prototype.reverse)}(a||(a={})),(a||(a={})).round=function(t,e){if(0===(e=e||0))return Math.round(t);var n=Math.pow(10,e);return Math.round(t*n)/n},function(t){t.Enumerable.prototype.select=function(e){var n=this,r=new t.Enumerable;return r.getEnumerator=function(){return function(t,e){var n,r=0,i={current:void 0,moveNext:function(){return n||(n=t.getEnumerator()),!!n.moveNext()&&(i.current=e(n.current,r),r++,!0)}};return i}(n,e)},r},t.Enumerable.prototype.selectMany=function(e){var n=this,r=new t.Enumerable;return r.getEnumerator=function(){return function(e,n){var r,i,o={current:void 0,moveNext:function(){for(o.current=void 0,r||(r=e.getEnumerator());!i||!i.moveNext();){if(!r.moveNext())return!1;i=t.selectorEnumerator(n(r.current))}return o.current=i.current,!0}};return o}(n,e)},r},t.List&&(t.List.prototype.select=t.Enumerable.prototype.select,t.List.prototype.selectMany=t.Enumerable.prototype.selectMany)}(a||(a={})),(a||(a={})).selectorEnumerator=function(t){return Array.isArray(t)?t.en().getEnumerator():null!=t&&"function"==typeof t.getEnumerator?t.getEnumerator():null},function(t){t.Enumerable.prototype.skip=function(e){var n=this,r=new t.Enumerable;return r.getEnumerator=function(){return function(t,e){var n,r={current:void 0,moveNext:function(){if(!n){n=t.getEnumerator();for(var i=0;i<e;i++)if(!n.moveNext())return!1}return n.moveNext()?(r.current=n.current,!0):(r.current=void 0,!1)}};return r}(n,e)},r},t.Enumerable.prototype.skipWhile=function(e){var n=this,r=new t.Enumerable;return r.getEnumerator=function(){return function(t,e){var n,r={current:void 0,moveNext:function(){if(!n){n=t.getEnumerator();for(var i=0;n.moveNext();i++)if(!e(r.current=n.current,i))return!0;return r.current=void 0,!1}return n.moveNext()?(r.current=n.current,!0):(r.current=void 0,!1)}};return r}(n,e)},r},t.List&&(t.List.prototype.skip=t.Enumerable.prototype.skip,t.List.prototype.skipWhile=t.Enumerable.prototype.skipWhile)}(a||(a={})),function(t){t.Enumerable.prototype.take=function(e){var n=this,r=new t.Enumerable;return r.getEnumerator=function(){return function(t,e){var n,r=0,i={current:void 0,moveNext:function(){return n||(n=t.getEnumerator()),!(++r>e||(i.current=void 0,!n.moveNext()||(i.current=n.current,0)))}};return i}(n,e)},r},t.Enumerable.prototype.takeWhile=function(e){var n=this,r=new t.Enumerable;return r.getEnumerator=function(){return function(t,e){var n,r=0,i={current:void 0,moveNext:function(){return n||(n=t.getEnumerator()),n.moveNext()&&e(n.current,r)?(r++,i.current=n.current,!0):(i.current=void 0,!1)}};return i}(n,e)},r},t.List&&(t.List.prototype.take=t.Enumerable.prototype.take,t.List.prototype.takeWhile=t.Enumerable.prototype.takeWhile)}(a||(a={})),function(t){function e(e,n,r){var i,o=!1,a=[],s={current:void 0,moveNext:function(){if(o){if(null==i)return!1;a.push(i),i=t.selectorEnumerator(n(s.current))}else i=e.getEnumerator(),o=!0;do{for(;!(i&&i.moveNext()||a.length<1);)i=a.pop();s.current=null==i?void 0:i.current}while(r(s.current));return void 0!==s.current}};return s}t.Enumerable.prototype.traverse=function(e){var n=this,r=new t.Enumerable;return r.getEnumerator=function(){return function(e,n){var r,i=!1,o=[],a={current:void 0,moveNext:function(){if(i){if(null==r)return!1;o.push(r),r=t.selectorEnumerator(n(a.current))}else r=e.getEnumerator(),i=!0;for(;!(r&&r.moveNext()||o.length<1);)r=o.pop();return a.current=null==r?void 0:r.current,void 0!==a.current}};return a}(n,e)},r},t.Enumerable.prototype.traverseUnique=function(n,r){var i=this,o=[],a=new t.Enumerable;return a.getEnumerator=r?function(){return e(i,n,function(t){return!!o.some(function(e){return r(t,e)})||(o.push(t),!1)})}:function(){return e(i,n,function(t){return o.indexOf(t)>-1||(o.push(t),!1)})},a},t.List&&(t.List.prototype.traverse=t.Enumerable.prototype.traverse,t.List.prototype.traverseUnique=t.Enumerable.prototype.traverseUnique)}(a||(a={})),function(t){t.Enumerable.prototype.union=function(e,n){var r=this,i=e instanceof Array?e.en():e,o=new t.Enumerable;return o.getEnumerator=function(){return function(e,n,r){r=r||function(t,e){return t===e};var i,o,a=[],s={current:void 0,moveNext:function(){if(i||(i=t.en(e).distinct().getEnumerator()),s.current=void 0,!o&&i.moveNext())return a.push(s.current=i.current),!0;for(o=o||t.en(n).distinct().getEnumerator();o.moveNext();){for(var u=0,c=!1,l=a.length;u<l&&!c;u++)c=r(a[u],o.current);if(!c)return s.current=o.current,!0}return!1}};return s}(r,i,n)},o},t.List&&(t.List.prototype.union=t.Enumerable.prototype.union)}(a||(a={})),function(t){t.Enumerable.prototype.where=function(e){var n=this,r=new t.Enumerable;return r.getEnumerator=function(){return function(t,e){var n,r={current:void 0,moveNext:function(){n||(n=t.getEnumerator());for(var i;n.moveNext();)if(e(i=n.current))return r.current=i,!0;return!1}};return r}(n,e)},r},t.List&&(t.List.prototype.where=t.Enumerable.prototype.where)}(a||(a={})),function(t){t.en=function(e){var n=new t.Enumerable;return n.getEnumerator=function(){return function(t){var e=t.getEnumerator(),n={current:void 0,moveNext:void 0};return n.moveNext=function(){return e.moveNext()?(n.current=e.current,!0):(n.current=void 0,!1)},n}(e)},n}}(a||(a={}));var a;a.en;!function(t){t.Enumerable.prototype.zip=function(e,n){var r=this,i=e instanceof Array?e.en():e,o=new t.Enumerable;return o.getEnumerator=function(){return function(t,e,n){var r,i,o={current:void 0,moveNext:function(){return r||(r=t.getEnumerator()),i||(i=e.getEnumerator()),o.current=void 0,!(!r.moveNext()||!i.moveNext()||(o.current=n(r.current,i.current),0))}};return o}(r,i,n)},o},t.List&&(t.List.prototype.zip=t.Enumerable.prototype.zip)}(a||(a={})),t.exports=function t(e,n,i){function o(s,u){if(!n[s]){if(!e[s]){if(!u&&"function"==typeof r&&r)return r(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n||t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,n,r){(function(t){var e,n;!function(t){t.CONTINUE=100,t.SWITCHING_PROTOCOLS=101,t.PROCESSING=102,t.OK=200,t.CREATED=201,t.ACCEPTED=202,t.NON_AUTHORITATIVE_INFORMATION=203,t.NO_CONTENT=204,t.RESET_CONTENT=205,t.PARTIAL_CONTENT=206,t.MULTI_STATUS=207,t.MULTIPLE_CHOICES=300,t.MOVED_PERMANENTLY=301,t.MOVED_TEMPORARILY=302,t.SEE_OTHER=303,t.NOT_MODIFIED=304,t.USE_PROXY=305,t.TEMPORARY_REDIRECT=307,t.BAD_REQUEST=400,t.UNAUTHORIZED=401,t.PAYMENT_REQUIRED=402,t.FORBIDDEN=403,t.NOT_FOUND=404,t.METHOD_NOT_ALLOWED=405,t.NOT_ACCEPTABLE=406,t.PROXY_AUTHENTICATION_REQUIRED=407,t.REQUEST_TIME_OUT=408,t.CONFLICT=409,t.GONE=410,t.LENGTH_REQUIRED=411,t.PRECONDITION_FAILED=412,t.REQUEST_ENTITY_TOO_LARGE=413,t.REQUEST_URI_TOO_LARGE=414,t.UNSUPPORTED_MEDIA_TYPE=415,t.REQUESTED_RANGE_NOT_SATISFIABLE=416,t.EXPECTATION_FAILED=417,t.IM_A_TEAPOT=418,t.UNPROCESSABLE_ENTITY=422,t.LOCKED=423,t.FAILED_DEPENDENCY=424,t.UNORDERED_COLLECTION=425,t.UPGRADE_REQUIRED=426,t.PRECONDITION_REQUIRED=428,t.TOO_MANY_REQUESTS=429,t.REQUEST_HEADER_FIELDS_TOO_LARGE=431,t.INTERNAL_SERVER_ERROR=500,t.NOT_IMPLEMENTED=501,t.BAD_GATEWAY=502,t.SERVICE_UNAVAILABLE=503,t.GATEWAY_TIME_OUT=504,t.HTTP_VERSION_NOT_SUPPORTED=505,t.VARIANT_ALSO_NEGOTIATES=506,t.INSUFFICIENT_STORAGE=507,t.BANDWIDTH_LIMIT_EXCEEDED=509,t.NOT_EXTENDED=510,t.NETWORK_AUTHENTICATION_REQUIRED=511}(e||(e={})),(n=t).HTTPStatusCode||(n.HTTPStatusCode=e)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1),function(t){var e=function(){function t(t){this.value="",t&&(this.value=t.toLowerCase())}return t.prototype.toString=function(){return this.value},t}();t.StringValue=e}(d||(d={})),function(t){var e=function(){function t(t,e){this.start=t,this.end=e}return t.prototype.getLength=function(){return this.end-this.start},t}();t.Duration=e}(d||(d={}));var s;o=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.bookmarking=function(){return new e(e.BOOKMARKING.toString())},e.prototype.classifying=function(){return new e(e.CLASSIFYING.toString())},e.prototype.commenting=function(){return new e(e.COMMENTING.toString())},e.prototype.describing=function(){return new e(e.DESCRIBING.toString())},e.prototype.editing=function(){return new e(e.EDITING.toString())},e.prototype.highlighting=function(){return new e(e.HIGHLIGHTING.toString())},e.prototype.identifying=function(){return new e(e.IDENTIFYING.toString())},e.prototype.linking=function(){return new e(e.LINKING.toString())},e.prototype.moderating=function(){return new e(e.MODERATING.toString())},e.prototype.painting=function(){return new e(e.PAINTING.toString())},e.prototype.questioning=function(){return new e(e.QUESTIONING.toString())},e.prototype.replying=function(){return new e(e.REPLYING.toString())},e.prototype.tagging=function(){return new e(e.TAGGING.toString())},e.prototype.transcribing=function(){return new e(e.TRANSCRIBING.toString())},e.BOOKMARKING=new e("oa:bookmarking"),e.CLASSIFYING=new e("oa:classifying"),e.COMMENTING=new e("oa:commenting"),e.DESCRIBING=new e("oa:describing"),e.EDITING=new e("oa:editing"),e.HIGHLIGHTING=new e("oa:highlighting"),e.IDENTIFYING=new e("oa:identifying"),e.LINKING=new e("oa:linking"),e.MODERATING=new e("oa:moderating"),e.PAINTING=new e("sc:painting"),e.QUESTIONING=new e("oa:questioning"),e.REPLYING=new e("oa:replying"),e.TAGGING=new e("oa:tagging"),e.TRANSCRIBING=new e("oad:transcribing"),e}(t.StringValue);t.AnnotationMotivation=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.autoadvance=function(){return new e(e.AUTOADVANCE.toString())},e.prototype.nonav=function(){return new e(e.NONAV.toString())},e.prototype.paged=function(){return new e(e.PAGED.toString())},e.AUTOADVANCE=new e("auto-advance"),e.NONAV=new e("no-nav"),e.PAGED=new e("paged"),e}(t.StringValue);t.Behavior=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.annotation=function(){return new e(e.ANNOTATION.toString())},e.prototype.canvas=function(){return new e(e.CANVAS.toString())},e.prototype.collection=function(){return new e(e.COLLECTION.toString())},e.prototype.manifest=function(){return new e(e.MANIFEST.toString())},e.prototype.range=function(){return new e(e.RANGE.toString())},e.prototype.sequence=function(){return new e(e.SEQUENCE.toString())},e.ANNOTATION=new e("annotation"),e.CANVAS=new e("canvas"),e.COLLECTION=new e("collection"),e.MANIFEST=new e("manifest"),e.RANGE=new e("range"),e.SEQUENCE=new e("sequence"),e}(t.StringValue);t.IIIFResourceType=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.empty=function(){return new e(e.EMPTY.toString())},e.prototype.manuscript=function(){return new e(e.MANUSCRIPT.toString())},e.prototype.monograph=function(){return new e(e.MONOGRAPH.toString())},e.EMPTY=new e(""),e.MANUSCRIPT=new e("manuscript"),e.MONOGRAPH=new e("monograph"),e}(t.StringValue);t.ManifestType=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.pdf=function(){return new e(e.PDF.toString())},e.prototype.doc=function(){return new e(e.DOC.toString())},e.prototype.docx=function(){return new e(e.DOCX.toString())},e.PDF=new e("application/pdf"),e.DOC=new e("application/msword"),e.DOCX=new e("application/vnd.openxmlformats-officedocument.wordprocessingml.document"),e}(t.StringValue);t.RenderingFormat=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.jpg=function(){return new e(e.JPG.toString())},e.prototype.mp4=function(){return new e(e.MP4.toString())},e.prototype.pdf=function(){return new e(e.PDF.toString())},e.prototype.threejs=function(){return new e(e.THREEJS.toString())},e.prototype.webm=function(){return new e(e.WEBM.toString())},e.JPG=new e("image/jpeg"),e.MP4=new e("video/mp4"),e.PDF=new e("application/pdf"),e.THREEJS=new e("application/vnd.threejs+json"),e.WEBM=new e("video/webm"),e}(t.StringValue);t.MediaType=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.canvas=function(){return new e(e.CANVAS.toString())},e.prototype.choice=function(){return new e(e.CHOICE.toString())},e.prototype.document=function(){return new e(e.DOCUMENT.toString())},e.prototype.image=function(){return new e(e.IMAGE.toString())},e.prototype.movingimage=function(){return new e(e.MOVINGIMAGE.toString())},e.prototype.physicalobject=function(){return new e(e.PHYSICALOBJECT.toString())},e.prototype.sound=function(){return new e(e.SOUND.toString())},e.prototype.text=function(){return new e(e.TEXT.toString())},e.CANVAS=new e("canvas"),e.CHOICE=new e("choice"),e.DOCUMENT=new e("document"),e.IMAGE=new e("image"),e.MOVINGIMAGE=new e("movingimage"),e.PHYSICALOBJECT=new e("physicalobject"),e.SOUND=new e("sound"),e.TEXT=new e("textualbody"),e}(t.StringValue);t.ResourceType=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.auth1Clickthrough=function(){return new e(e.AUTH1CLICKTHROUGH.toString())},e.prototype.auth1External=function(){return new e(e.AUTH1EXTERNAL.toString())},e.prototype.auth1Kiosk=function(){return new e(e.AUTH1KIOSK.toString())},e.prototype.auth1Login=function(){return new e(e.AUTH1LOGIN.toString())},e.prototype.auth1Logout=function(){return new e(e.AUTH1LOGOUT.toString())},e.prototype.auth1Probe=function(){return new e(e.AUTH1PROBE.toString())},e.prototype.auth1Token=function(){return new e(e.AUTH1TOKEN.toString())},e.prototype.autoComplete=function(){return new e(e.AUTOCOMPLETE.toString())},e.prototype.iiif1ImageLevel1=function(){return new e(e.IIIF1IMAGELEVEL1.toString())},e.prototype.iiif1ImageLevel2=function(){return new e(e.IIIF1IMAGELEVEL2.toString())},e.prototype.iiif2ImageLevel1=function(){return new e(e.IIIF2IMAGELEVEL1.toString())},e.prototype.iiif2ImageLevel2=function(){return new e(e.IIIF2IMAGELEVEL2.toString())},e.prototype.ixif=function(){return new e(e.IXIF.toString())},e.prototype.login=function(){return new e(e.AUTHLOGIN.toString())},e.prototype.clickThrough=function(){return new e(e.AUTHCLICKTHROUGH.toString())},e.prototype.restricted=function(){return new e(e.AUTHRESTRICTED.toString())},e.prototype.logout=function(){return new e(e.AUTHLOGOUT.toString())},e.prototype.otherManifestations=function(){return new e(e.OTHERMANIFESTATIONS.toString())},e.prototype.search=function(){return new e(e.SEARCH.toString())},e.prototype.stanfordIIIFImageCompliance1=function(){return new e(e.STANFORDIIIFIMAGECOMPLIANCE1.toString())},e.prototype.stanfordIIIFImageCompliance2=function(){return new e(e.STANFORDIIIFIMAGECOMPLIANCE2.toString())},e.prototype.stanfordIIIFImageConformance1=function(){return new e(e.STANFORDIIIFIMAGECONFORMANCE1.toString())},e.prototype.stanfordIIIFImageConformance2=function(){return new e(e.STANFORDIIIFIMAGECONFORMANCE2.toString())},e.prototype.stanfordIIIF1ImageCompliance1=function(){return new e(e.STANFORDIIIF1IMAGECOMPLIANCE1.toString())},e.prototype.stanfordIIIF1ImageCompliance2=function(){return new e(e.STANFORDIIIF1IMAGECOMPLIANCE2.toString())},e.prototype.stanfordIIIF1ImageConformance1=function(){return new e(e.STANFORDIIIF1IMAGECONFORMANCE1.toString())},e.prototype.stanfordIIIF1ImageConformance2=function(){return new e(e.STANFORDIIIF1IMAGECONFORMANCE2.toString())},e.prototype.token=function(){return new e(e.AUTHTOKEN.toString())},e.prototype.trackingExtensions=function(){return new e(e.TRACKINGEXTENSIONS.toString())},e.prototype.uiExtensions=function(){return new e(e.UIEXTENSIONS.toString())},e.prototype.printExtensions=function(){return new e(e.PRINTEXTENSIONS.toString())},e.prototype.shareExtensions=function(){return new e(e.SHAREEXTENSIONS.toString())},e.STANFORDIIIFIMAGECOMPLIANCE0=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level0"),e.STANFORDIIIFIMAGECOMPLIANCE1=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level1"),e.STANFORDIIIFIMAGECOMPLIANCE2=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level2"),e.STANFORDIIIFIMAGECONFORMANCE0=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level0"),e.STANFORDIIIFIMAGECONFORMANCE1=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level1"),e.STANFORDIIIFIMAGECONFORMANCE2=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level2"),e.STANFORDIIIF1IMAGECOMPLIANCE0=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0"),e.STANFORDIIIF1IMAGECOMPLIANCE1=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1"),e.STANFORDIIIF1IMAGECOMPLIANCE2=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2"),e.STANFORDIIIF1IMAGECONFORMANCE0=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0"),e.STANFORDIIIF1IMAGECONFORMANCE1=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1"),e.STANFORDIIIF1IMAGECONFORMANCE2=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2"),e.IIIF1IMAGELEVEL0=new e("http://iiif.io/api/image/1/level0.json"),e.IIIF1IMAGELEVEL0PROFILE=new e("http://iiif.io/api/image/1/profiles/level0.json"),e.IIIF1IMAGELEVEL1=new e("http://iiif.io/api/image/1/level1.json"),e.IIIF1IMAGELEVEL1PROFILE=new e("http://iiif.io/api/image/1/profiles/level1.json"),e.IIIF1IMAGELEVEL2=new e("http://iiif.io/api/image/1/level2.json"),e.IIIF1IMAGELEVEL2PROFILE=new e("http://iiif.io/api/image/1/profiles/level2.json"),e.IIIF2IMAGELEVEL0=new e("http://iiif.io/api/image/2/level0.json"),e.IIIF2IMAGELEVEL0PROFILE=new e("http://iiif.io/api/image/2/profiles/level0.json"),e.IIIF2IMAGELEVEL1=new e("http://iiif.io/api/image/2/level1.json"),e.IIIF2IMAGELEVEL1PROFILE=new e("http://iiif.io/api/image/2/profiles/level1.json"),e.IIIF2IMAGELEVEL2=new e("http://iiif.io/api/image/2/level2.json"),e.IIIF2IMAGELEVEL2PROFILE=new e("http://iiif.io/api/image/2/profiles/level2.json"),e.AUTHCLICKTHROUGH=new e("http://iiif.io/api/auth/0/login/clickthrough"),e.AUTHLOGIN=new e("http://iiif.io/api/auth/0/login"),e.AUTHLOGOUT=new e("http://iiif.io/api/auth/0/logout"),e.AUTHRESTRICTED=new e("http://iiif.io/api/auth/0/login/restricted"),e.AUTHTOKEN=new e("http://iiif.io/api/auth/0/token"),e.AUTH1CLICKTHROUGH=new e("http://iiif.io/api/auth/1/clickthrough"),e.AUTH1EXTERNAL=new e("http://iiif.io/api/auth/1/external"),e.AUTH1KIOSK=new e("http://iiif.io/api/auth/1/kiosk"),e.AUTH1LOGIN=new e("http://iiif.io/api/auth/1/login"),e.AUTH1LOGOUT=new e("http://iiif.io/api/auth/1/logout"),e.AUTH1PROBE=new e("http://iiif.io/api/auth/1/probe"),e.AUTH1TOKEN=new e("http://iiif.io/api/auth/1/token"),e.AUTOCOMPLETE=new e("http://iiif.io/api/search/0/autocomplete"),e.SEARCH=new e("http://iiif.io/api/search/0/search"),e.TRACKINGEXTENSIONS=new e("http://universalviewer.io/tracking-extensions-profile"),e.UIEXTENSIONS=new e("http://universalviewer.io/ui-extensions-profile"),e.PRINTEXTENSIONS=new e("http://universalviewer.io/print-extensions-profile"),e.SHAREEXTENSIONS=new e("http://universalviewer.io/share-extensions-profile"),e.OTHERMANIFESTATIONS=new e("http://iiif.io/api/otherManifestations.json"),e.IXIF=new e("http://wellcomelibrary.org/ld/ixif/0/alpha.json"),e}(t.StringValue);t.ServiceProfile=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.leftToRight=function(){return new e(e.LEFTTORIGHT.toString())},e.prototype.rightToLeft=function(){return new e(e.RIGHTTOLEFT.toString())},e.prototype.topToBottom=function(){return new e(e.TOPTOBOTTOM.toString())},e.prototype.bottomToTop=function(){return new e(e.BOTTOMTOTOP.toString())},e.LEFTTORIGHT=new e("left-to-right"),e.RIGHTTOLEFT=new e("right-to-left"),e.TOPTOBOTTOM=new e("top-to-bottom"),e.BOTTOMTOTOP=new e("bottom-to-top"),e}(t.StringValue);t.ViewingDirection=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.continuous=function(){return new e(e.CONTINUOUS.toString())},e.prototype.empty=function(){return new e(e.EMPTY.toString())},e.prototype.individuals=function(){return new e(e.INDIVIDUALS.toString())},e.prototype.nonPaged=function(){return new e(e.NONPAGED.toString())},e.prototype.paged=function(){return new e(e.PAGED.toString())},e.prototype.top=function(){return new e(e.TOP.toString())},e.CONTINUOUS=new e("continuous"),e.EMPTY=new e(""),e.INDIVIDUALS=new e("individuals"),e.NONPAGED=new e("non-paged"),e.PAGED=new e("paged"),e.TOP=new e("top"),e}(t.StringValue);t.ViewingHint=e}(d||(d={})),function(t){var e=function(){function t(t){this.__jsonld=t,this.context=this.getProperty("context"),this.id=this.getProperty("id")}return t.prototype.getProperty=function(t){var e=null;return this.__jsonld&&((e=this.__jsonld[t])||(e=this.__jsonld["@"+t])),e},t}();t.JSONLDResource=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t)||this;return r.options=n,r}return o(n,e),n.prototype.getIIIFResourceType=function(){return new t.IIIFResourceType(t.Utils.normaliseType(this.getProperty("type")))},n.prototype.getLabel=function(){var e=this.getProperty("label");return e?t.LanguageMap.parse(e,this.options.locale):[]},n.prototype.getDefaultLabel=function(){return t.LanguageMap.getValue(this.getLabel())},n.prototype.getMetadata=function(){var e=this.getProperty("metadata"),n=[];if(!e)return n;for(var r=0;r<e.length;r++){var i=e[r],o=new t.LabelValuePair(this.options.locale);o.parse(i),n.push(o)}return n},n.prototype.getRendering=function(t){var e=this.getRenderings();"string"!=typeof t&&(t=t.toString());for(var n=0;n<e.length;n++){var r=e[n];if(r.getFormat().toString()===t)return r}return null},n.prototype.getRenderings=function(){var e,n=[];if(!(e=this.__jsonld?this.__jsonld.rendering:this.rendering))return n;Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var i=e[r];n.push(new t.Rendering(i,this.options))}return n},n.prototype.getService=function(e){return t.Utils.getService(this,e)},n.prototype.getServices=function(){return t.Utils.getServices(this)},n.prototype.getThumbnail=function(){var e=this.getProperty("thumbnail");return Array.isArray(e)&&(e=e[0]),e?new t.Thumbnail(e,this.options):null},n.prototype.isAnnotation=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.ANNOTATION.toString()},n.prototype.isCanvas=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.CANVAS.toString()},n.prototype.isCollection=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.COLLECTION.toString()},n.prototype.isManifest=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.MANIFEST.toString()},n.prototype.isRange=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.RANGE.toString()},n.prototype.isSequence=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.SEQUENCE.toString()},n}(t.JSONLDResource);t.ManifestResource=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return o(n,e),n.prototype.getFormat=function(){var e=this.getProperty("format");return e?new t.MediaType(e.toLowerCase()):null},n.prototype.getResources=function(){var e=[];if(!this.__jsonld.resources)return e;for(var n=0;n<this.__jsonld.resources.length;n++){var r=this.__jsonld.resources[n],i=new t.Annotation(r,this.options);e.push(i)}return e},n.prototype.getType=function(){var e=this.getProperty("type");return e?new t.ResourceType(t.Utils.normaliseType(e)):null},n.prototype.getWidth=function(){return this.getProperty("width")},n.prototype.getHeight=function(){return this.getProperty("height")},n.prototype.getMaxWidth=function(){return this.getProperty("maxWidth")},n.prototype.getMaxHeight=function(){return this.getProperty("maxHeight")?null:this.getMaxWidth()},n}(t.ManifestResource);t.Resource=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return o(n,e),n.prototype.getCanonicalImageUri=function(e){var n,r=null,i="default",o=e;if(this.externalResource&&this.externalResource.data&&this.externalResource.data["@id"])r=this.externalResource.data["@id"],o||(o=this.externalResource.data.width),this.externalResource.data["@context"]&&(this.externalResource.data["@context"].indexOf("/1.0/context.json")>-1||this.externalResource.data["@context"].indexOf("/1.1/context.json")>-1||this.externalResource.data["@context"].indexOf("/1/context.json")>-1)&&(i="native");else{var a=this.getImages();if(a&&a.length){var s=a[0].getResource(),u=s.getServices();if(o||(o=s.getWidth()),u.length){var c=u[0];r=c.id,i=t.Utils.getImageQuality(c.getProfile())}else if(o===s.getWidth())return s.id}if(!r){var l=this.getProperty("thumbnail");if(l){if("string"==typeof l)return l;if(l["@id"])return l["@id"];if(l.length)return l[0].id}}}return n=o+",",r&&r.endsWith("/")&&(r=r.substr(0,r.length-1)),[r,"full",n,0,i+".jpg"].join("/")},n.prototype.getMaxDimensions=function(){var e,n=null;return this.externalResource.data&&this.externalResource.data.profile&&(e=this.externalResource.data.profile,Array.isArray(e)&&(e=e.en().where(function(t){return t.maxWidth}).first())&&(n=new t.Size(e.maxWidth,e.maxHeight?e.maxHeight:e.maxWidth))),n},n.prototype.getContent=function(){var e=[],n=this.__jsonld.items||this.__jsonld.content;if(!n)return e;var r=null;if(n.length&&(r=new t.AnnotationPage(n[0],this.options)),!r)return e;for(var i=r.getItems(),o=0;o<i.length;o++){var a=i[o],s=new t.Annotation(a,this.options);e.push(s)}return e},n.prototype.getDuration=function(){return this.getProperty("duration")},n.prototype.getImages=function(){var e=[];if(!this.__jsonld.images)return e;for(var n=0;n<this.__jsonld.images.length;n++){var r=this.__jsonld.images[n],i=new t.Annotation(r,this.options);e.push(i)}return e},n.prototype.getIndex=function(){return this.getProperty("index")},n.prototype.getOtherContent=function(){var e=this,n=Array.isArray(this.getProperty("otherContent"))?this.getProperty("otherContent"):[this.getProperty("otherContent")],r=n.filter(function(t){return t&&(e=t["@type"],n="sc:AnnotationList","string"==typeof e&&"string"==typeof n&&e.toLowerCase()==e.toLowerCase());var e,n}).map(function(n,r){return new t.AnnotationList(n.label||"Annotation list "+r,n,e.options)}).map(function(t){return t.load()});return Promise.all(r)},n.prototype.getWidth=function(){return this.getProperty("width")},n.prototype.getHeight=function(){return this.getProperty("height")},n}(t.Resource);t.Canvas=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.index=-1,r.isLoaded=!1;var i={defaultLabel:"-",locale:"en-GB",resource:r,pessimisticAccessControl:!1};return r.options=Object.assign(i,n),r}return o(n,e),n.prototype.getAttribution=function(){console.warn("getAttribution will be deprecated, use getRequiredStatement instead.");var e=this.getProperty("attribution");return e?t.LanguageMap.parse(e,this.options.locale):[]},n.prototype.getDescription=function(){var e=this.getProperty("description");return e?t.LanguageMap.parse(e,this.options.locale):[]},n.prototype.getIIIFResourceType=function(){return new t.IIIFResourceType(t.Utils.normaliseType(this.getProperty("type")))},n.prototype.getLogo=function(){var t=this.getProperty("logo");return t?"string"==typeof t?t:(Array.isArray(t)&&t.length&&(t=t[0]),t["@id"]||t.id):null},n.prototype.getLicense=function(){return t.Utils.getLocalisedValue(this.getProperty("license"),this.options.locale)},n.prototype.getNavDate=function(){return new Date(this.getProperty("navDate"))},n.prototype.getRelated=function(){return this.getProperty("related")},n.prototype.getSeeAlso=function(){return this.getProperty("seeAlso")},n.prototype.getDefaultTree=function(){return this.defaultTree=new t.TreeNode("root"),this.defaultTree.data=this,this.defaultTree},n.prototype.getRequiredStatement=function(){var e=null,n=this.getProperty("requiredStatement");if(n)(e=new t.LabelValuePair(this.options.locale)).parse(n);else{var r=this.getAttribution();r&&((e=new t.LabelValuePair(this.options.locale)).value=r)}return e},n.prototype.isCollection=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.COLLECTION.toString()},n.prototype.isManifest=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.MANIFEST.toString()},n.prototype.load=function(){var e=this;return new Promise(function(n,r){if(e.isLoaded)n(e);else{var i=e.options;i.navDate=e.getNavDate();var o=e.__jsonld.id;o||(o=e.__jsonld["@id"]),t.Utils.loadResource(o).then(function(r){e.parentLabel=t.LanguageMap.getValue(e.getLabel(),i.locale);var o=t.Deserialiser.parse(r,i);(e=Object.assign(e,o)).index=i.index,n(e)})}})},n}(t.ManifestResource);t.IIIFResource=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;if(r.index=0,r._allRanges=null,r.items=[],r._topRanges=[],r.__jsonld.structures&&r.__jsonld.structures.length)for(var i=r._getTopRanges(),o=0;o<i.length;o++){var a=i[o];r._parseRanges(a,String(o))}return r}return o(n,e),n.prototype.getPosterCanvas=function(){var e=this.getProperty("posterCanvas");return e&&(e=new t.Canvas(e,this.options)),e},n.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e?new t.Behavior(e):null},n.prototype.getDefaultTree=function(){if(e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=t.Utils.normaliseType(t.TreeNodeType.MANIFEST.toString()),!this.isLoaded)return this.defaultTree;var n=this.getTopRanges();return n.length&&n[0].getTree(this.defaultTree),t.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},n.prototype._getTopRanges=function(){var e=[];if(this.__jsonld.structures&&this.__jsonld.structures.length){for(var n=0;n<this.__jsonld.structures.length;n++){var r=this.__jsonld.structures[n];r.viewingHint===t.ViewingHint.TOP.toString()&&e.push(r)}if(!e.length){var i={};i.ranges=this.__jsonld.structures,e.push(i)}}return e},n.prototype.getTopRanges=function(){return this._topRanges},n.prototype._getRangeById=function(t){if(this.__jsonld.structures&&this.__jsonld.structures.length)for(var e=0;e<this.__jsonld.structures.length;e++){var n=this.__jsonld.structures[e];if(n["@id"]===t||n.id===t)return n}return null},n.prototype._parseRanges=function(e,n,r){var i,o=null;if("string"==typeof e&&(o=e,e=this._getRangeById(o)),e){(i=new t.Range(e,this.options)).parentRange=r,i.path=n,r?r.items.push(i):this._topRanges.push(i);var a=e.items||e.members;if(a)for(var s=0;s<a.length;s++){var u=a[s];if(u["@type"]&&"sc:range"===u["@type"].toLowerCase()||u.type&&"range"===u.type.toLowerCase())this._parseRanges(u,n+"/"+s,i);else if(u["@type"]&&"sc:canvas"===u["@type"].toLowerCase()||u.type&&"canvas"===u.type.toLowerCase()){i.canvases||(i.canvases=[]);var c=u.id||u["@id"];i.canvases.push(c)}}else if(e.ranges)for(s=0;s<e.ranges.length;s++)this._parseRanges(e.ranges[s],n+"/"+s,i)}else console.warn("Range:",o,"does not exist")},n.prototype.getAllRanges=function(){if(null!=this._allRanges)return this._allRanges;this._allRanges=[];for(var t=this.getTopRanges(),e=0;e<t.length;e++){var n=t[e];n.id&&this._allRanges.push(n);var r=n.getRanges();this._allRanges=this._allRanges.concat(r.en().traverseUnique(function(t){return t.getRanges()}).toArray())}return this._allRanges},n.prototype.getRangeById=function(t){for(var e=this.getAllRanges(),n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}return null},n.prototype.getRangeByPath=function(t){for(var e=this.getAllRanges(),n=0;n<e.length;n++){var r=e[n];if(r.path===t)return r}return null},n.prototype.getSequences=function(){if(this.items.length)return this.items;var e=this.__jsonld.mediaSequences||this.__jsonld.sequences;if(e)for(var n=0;n<e.length;n++){var r=e[n],i=new t.Sequence(r,this.options);this.items.push(i)}else if(this.__jsonld.items){i=new t.Sequence(this.__jsonld.items,this.options);this.items.push(i)}return this.items},n.prototype.getSequenceByIndex=function(t){return this.getSequences()[t]},n.prototype.getTotalSequences=function(){return this.getSequences().length},n.prototype.getManifestType=function(){var e=this.getService(t.ServiceProfile.UIEXTENSIONS);return e?new t.ManifestType(e.getProperty("manifestType")):new t.ManifestType("")},n.prototype.getTrackingLabel=function(){var e=this.getService(t.ServiceProfile.TRACKINGEXTENSIONS);return e?e.getProperty("trackingLabel"):""},n.prototype.isMultiSequence=function(){return this.getTotalSequences()>1},n.prototype.isPagingEnabled=function(){var e=this.getViewingHint();if(e)return e.toString()===t.ViewingHint.PAGED.toString();var n=this.getBehavior();return!!n&&n.toString()===t.Behavior.PAGED.toString()},n.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):null},n.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):null},n}(t.IIIFResource);t.Manifest=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.items=[],r._collections=null,r._manifests=null,t.__collection=r,r}return o(n,e),n.prototype.getCollections=function(){return this._collections?this._collections:this._collections=this.items.en().where(function(t){return t.isCollection()}).toArray()},n.prototype.getManifests=function(){return this._manifests?this._manifests:this._manifests=this.items.en().where(function(t){return t.isManifest()}).toArray()},n.prototype.getCollectionByIndex=function(t){var e=this.getCollections();if(!e[t])throw new Error("Collection index is outside range of array");var n=e[t];return n.options.index=t,n.load()},n.prototype.getManifestByIndex=function(t){var e=this.getManifests();if(!e[t])throw new Error("Manifest index is outside range of array");var n=e[t];return n.options.index=t,n.load()},n.prototype.getTotalCollections=function(){return this.getCollections().length},n.prototype.getTotalManifests=function(){return this.getManifests().length},n.prototype.getTotalItems=function(){return this.items.length},n.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):t.ViewingDirection.LEFTTORIGHT},n.prototype.getDefaultTree=function(){return e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=t.Utils.normaliseType(t.TreeNodeType.COLLECTION.toString()),this._parseManifests(this),this._parseCollections(this),t.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},n.prototype._parseManifests=function(e){if(e.getManifests()&&e.getManifests().length)for(var n=0;n<e.getManifests().length;n++){var r=e.getManifests()[n],i=r.getDefaultTree();i.label=r.parentLabel||t.LanguageMap.getValue(r.getLabel(),this.options.locale)||"manifest "+(n+1),i.navDate=r.getNavDate(),i.data.id=r.id,i.data.type=t.Utils.normaliseType(t.TreeNodeType.MANIFEST.toString()),e.defaultTree.addNode(i)}},n.prototype._parseCollections=function(e){if(e.getCollections()&&e.getCollections().length)for(var n=0;n<e.getCollections().length;n++){var r=e.getCollections()[n],i=r.getDefaultTree();i.label=r.parentLabel||t.LanguageMap.getValue(r.getLabel(),this.options.locale)||"collection "+(n+1),i.navDate=r.getNavDate(),i.data.id=r.id,i.data.type=t.Utils.normaliseType(t.TreeNodeType.COLLECTION.toString()),e.defaultTree.addNode(i),this._parseCollections(r)}},n}(t.IIIFResource);t.Collection=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._ranges=null,r.canvases=null,r.items=[],r}return o(n,e),n.prototype.getCanvasIds=function(){return this.__jsonld.canvases?this.__jsonld.canvases:this.canvases?this.canvases:[]},n.prototype.getDuration=function(){var e,n;if(this.canvases&&this.canvases.length)for(var r=0;r<this.canvases.length;r++){var i=this.canvases[r],o=t.Utils.getTemporalComponent(i);o&&o.length>1&&(0===r&&(e=Number(o[0])),r===this.canvases.length-1&&(n=Number(o[1])))}else{var a=this.getRanges();for(r=0;r<a.length;r++){var s=a[r].getDuration();s&&(0===r&&(e=s.start),r===a.length-1&&(n=s.end))}}if(void 0!==e&&void 0!==n)return new t.Duration(e,n)},n.prototype.getRanges=function(){return this._ranges?this._ranges:this._ranges=this.items.en().where(function(t){return t.isRange()}).toArray()},n.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e?new t.Behavior(e):null},n.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):null},n.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):null},n.prototype.getTree=function(e){e.data=this,this.treeNode=e;var n=this.getRanges();if(n&&n.length)for(var r=0;r<n.length;r++){var i=n[r],o=new t.TreeNode;e.addNode(o),this._parseTreeNode(o,i)}return t.Utils.generateTreeNodeIds(e),e},n.prototype.spansTime=function(t){var e=this.getDuration();return!!(e&&t>=e.start&&t<=e.end)},n.prototype._parseTreeNode=function(e,n){e.label=t.LanguageMap.getValue(n.getLabel(),this.options.locale),e.data=n,e.data.type=t.Utils.normaliseType(t.TreeNodeType.RANGE.toString()),n.treeNode=e;var r=n.getRanges();if(r&&r.length)for(var i=0;i<r.length;i++){var o=r[i],a=o.getBehavior();if(!a||a.toString()!==t.Behavior.NONAV.toString()){var s=new t.TreeNode;e.addNode(s),this._parseTreeNode(s,o)}}},n}(t.ManifestResource);t.Range=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return o(n,e),n.prototype.getFormat=function(){return new t.RenderingFormat(this.getProperty("format"))},n}(t.ManifestResource);t.Rendering=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.items=[],r._thumbnails=null,r}return o(n,e),n.prototype.getCanvases=function(){if(this.items.length)return this.items;var e=this.__jsonld.canvases||this.__jsonld.elements;if(e)for(var n=0;n<e.length;n++){var r=e[n];(i=new t.Canvas(r,this.options)).index=n,this.items.push(i)}else if(this.__jsonld)for(n=0;n<this.__jsonld.length;n++){var i;r=this.__jsonld[n];(i=new t.Canvas(r,this.options)).index=n,this.items.push(i)}return this.items},n.prototype.getCanvasById=function(e){for(var n=0;n<this.getTotalCanvases();n++){var r=this.getCanvasByIndex(n),i=t.Utils.normaliseUrl(r.id);if(t.Utils.normaliseUrl(e)===i)return r}return null},n.prototype.getCanvasByIndex=function(t){return this.getCanvases()[t]},n.prototype.getCanvasIndexById=function(t){for(var e=0;e<this.getTotalCanvases();e++){if(this.getCanvasByIndex(e).id===t)return e}return null},n.prototype.getCanvasIndexByLabel=function(e,n){e=e.trim(),isNaN(e)||(e=parseInt(e,10).toString(),n&&(e+="r"));for(var r,i,o,a=/(\d*)\D+(\d*)/,s=0;s<this.getTotalCanvases();s++){var u=this.getCanvasByIndex(s);if(t.LanguageMap.getValue(u.getLabel(),this.options.locale)===e)return s;if((r=a.exec(e))&&(i=r[1],(o=r[2])&&new RegExp("^"+i+"\\D+"+o+"$").test(u.getLabel().toString())))return s}return-1},n.prototype.getLastCanvasLabel=function(e){for(var n=this.getTotalCanvases()-1;n>=0;n--){var r=this.getCanvasByIndex(n),i=t.LanguageMap.getValue(r.getLabel(),this.options.locale);if(e){if(/^[a-zA-Z0-9]*$/.test(i))return i}else if(i)return i}return this.options.defaultLabel},n.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},n.prototype.getNextPageIndex=function(e,n){var r;if(n){var i=this.getPagedIndices(e),o=this.getViewingDirection();r=o&&o.toString()===t.ViewingDirection.RIGHTTOLEFT.toString()?i[0]+1:i[i.length-1]+1}else r=e+1;return r>this.getLastPageIndex()?-1:r},n.prototype.getPagedIndices=function(e,n){var r=[];if(n){r=this.isFirstCanvas(e)||this.isLastCanvas(e)?[e]:e%2?[e,e+1]:[e-1,e];var i=this.getViewingDirection();i&&i.toString()===t.ViewingDirection.RIGHTTOLEFT.toString()&&(r=r.reverse())}else r.push(e);return r},n.prototype.getPrevPageIndex=function(e,n){var r;if(n){var i=this.getPagedIndices(e),o=this.getViewingDirection();r=o&&o.toString()===t.ViewingDirection.RIGHTTOLEFT.toString()?i[i.length-1]-1:i[0]-1}else r=e-1;return r},n.prototype.getStartCanvasIndex=function(){var t=this.getStartCanvas();if(t)for(var e=0;e<this.getTotalCanvases();e++){if(this.getCanvasByIndex(e).id===t)return e}return 0},n.prototype.getThumbs=function(e,n){console.warn("getThumbs will be deprecated, use getThumbnails instead");for(var r=[],i=this.getTotalCanvases(),o=0;o<i;o++){var a=this.getCanvasByIndex(o),s=new t.Thumb(e,a);r.push(s)}return r},n.prototype.getThumbnails=function(){if(null!=this._thumbnails)return this._thumbnails;this._thumbnails=[];for(var t=this.getCanvases(),e=0;e<t.length;e++){var n=t[e].getThumbnail();n&&this._thumbnails.push(n)}return this._thumbnails},n.prototype.getStartCanvas=function(){return this.getProperty("startCanvas")},n.prototype.getTotalCanvases=function(){return this.getCanvases().length},n.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):this.options.resource.getViewingDirection?this.options.resource.getViewingDirection():null},n.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):null},n.prototype.isCanvasIndexOutOfRange=function(t){return t>this.getTotalCanvases()-1},n.prototype.isFirstCanvas=function(t){return 0===t},n.prototype.isLastCanvas=function(t){return t===this.getTotalCanvases()-1},n.prototype.isMultiCanvas=function(){return this.getTotalCanvases()>1},n.prototype.isPagingEnabled=function(){var e=this.getViewingHint();return!!e&&e.toString()===t.ViewingHint.PAGED.toString()},n.prototype.isTotalCanvasesEven=function(){return this.getTotalCanvases()%2==0},n}(t.ManifestResource);t.Sequence=e}(d||(d={})),function(t){var e=function(){function e(){}return e.parse=function(t,e){return"string"==typeof t&&(t=JSON.parse(t)),this.parseJson(t,e)},e.parseJson=function(t,e){var n;if(e&&e.navDate&&!isNaN(e.navDate.getTime())&&(t.navDate=e.navDate.toString()),t["@type"])switch(t["@type"]){case"sc:Collection":n=this.parseCollection(t,e);break;case"sc:Manifest":n=this.parseManifest(t,e);break;default:return null}else switch(t.type){case"Collection":n=this.parseCollection(t,e);break;case"Manifest":n=this.parseManifest(t,e);break;default:return null}return n.isLoaded=!0,n},e.parseCollection=function(e,n){var r=new t.Collection(e,n);return r.index=n&&n.index||0,this.parseCollections(r,n),this.parseManifests(r,n),this.parseItems(r,n),r},e.parseCollections=function(t,e){var n;if(t.__jsonld.collections?n=t.__jsonld.collections:t.__jsonld.items&&(n=t.__jsonld.items.en().where(function(t){return"collection"===t.type.toLowerCase()}).toArray()),n)for(var r=0;r<n.length;r++){e&&(e.index=r);var i=this.parseCollection(n[r],e);i.index=r,i.parentCollection=t,t.items.push(i)}},e.parseManifest=function(e,n){return new t.Manifest(e,n)},e.parseManifests=function(t,e){var n;if(t.__jsonld.manifests?n=t.__jsonld.manifests:t.__jsonld.items&&(n=t.__jsonld.items.en().where(function(t){return"manifest"===t.type.toLowerCase()}).toArray()),n)for(var r=0;r<n.length;r++){var i=this.parseManifest(n[r],e);i.index=r,i.parentCollection=t,t.items.push(i)}},e.parseItem=function(t,e){if(t["@type"]){if("sc:manifest"===t["@type"].toLowerCase())return this.parseManifest(t,e);if("sc:collection"===t["@type"].toLowerCase())return this.parseCollection(t,e)}else if(t.type){if("manifest"===t.type.toLowerCase())return this.parseManifest(t,e);if("collection"===t.type.toLowerCase())return this.parseCollection(t,e)}return null},e.parseItems=function(t,e){var n=t.__jsonld.members||t.__jsonld.items;if(n)for(var r=function(r){e&&(e.index=r);var o=i.parseItem(n[r],e);return o?t.items.en().where(function(t){return t.id===o.id}).first()?"continue":(o.index=r,o.parentCollection=t,void t.items.push(o)):{value:void 0}},i=this,o=0;o<n.length;o++){var a=r(o);if("object"==typeof a)return a.value}},e}();t.Deserialiser=e;var n=function(){function t(){}return t.serialise=function(t){return""},t}();t.Serialiser=n}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return o(n,e),n.prototype.getProfile=function(){var e=this.getProperty("profile");return e||(e=this.getProperty("dcterms:conformsTo")),Array.isArray(e)?new t.ServiceProfile(e[0]):new t.ServiceProfile(e)},n.prototype.getConfirmLabel=function(){return t.Utils.getLocalisedValue(this.getProperty("confirmLabel"),this.options.locale)},n.prototype.getDescription=function(){return t.Utils.getLocalisedValue(this.getProperty("description"),this.options.locale)},n.prototype.getFailureDescription=function(){return t.Utils.getLocalisedValue(this.getProperty("failureDescription"),this.options.locale)},n.prototype.getFailureHeader=function(){return t.Utils.getLocalisedValue(this.getProperty("failureHeader"),this.options.locale)},n.prototype.getHeader=function(){return t.Utils.getLocalisedValue(this.getProperty("header"),this.options.locale)},n.prototype.getServiceLabel=function(){return t.Utils.getLocalisedValue(this.getProperty("label"),this.options.locale)},n.prototype.getInfoUri=function(){var t=this.id;return t.endsWith("/")||(t+="/"),t+="info.json"},n}(t.ManifestResource);t.Service=e}(d||(d={})),function(t){var e=function(e,n){this.data=n,this.index=n.index,this.width=e;var r=n.getHeight()/n.getWidth();this.height=r?Math.floor(this.width*r):e,this.uri=n.getCanonicalImageUri(e),this.label=t.LanguageMap.getValue(n.getLabel())};t.Thumb=e}(d||(d={})),function(t){var e=function(){function e(t,e){this.label=t,this.data=e||{},this.nodes=[]}return e.prototype.addNode=function(t){this.nodes.push(t),t.parentNode=this},e.prototype.isCollection=function(){return this.data.type===t.Utils.normaliseType(t.TreeNodeType.COLLECTION.toString())},e.prototype.isManifest=function(){return this.data.type===t.Utils.normaliseType(t.TreeNodeType.MANIFEST.toString())},e.prototype.isRange=function(){return this.data.type===t.Utils.normaliseType(t.TreeNodeType.RANGE.toString())},e}();t.TreeNode=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.collection=function(){return new e(e.COLLECTION.toString())},e.prototype.manifest=function(){return new e(e.MANIFEST.toString())},e.prototype.range=function(){return new e(e.RANGE.toString())},e.COLLECTION=new e("collection"),e.MANIFEST=new e("manifest"),e.RANGE=new e("range"),e}(t.StringValue);t.TreeNodeType=e}(d||(d={}));var u=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=n(15),f=n(64),h=n(13);!function(t){var e=function(){function e(){}return e.getMediaType=function(t){return(t=(t=t.toLowerCase()).split(";")[0]).trim()},e.getImageQuality=function(e){var n=e.toString();return n===t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString()||n===t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString()||n===t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE1.toString()||n===t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString()||n===t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString()||n===t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString()||n===t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString()||n===t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString()||n===t.ServiceProfile.IIIF1IMAGELEVEL1.toString()||n===t.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString()||n===t.ServiceProfile.IIIF1IMAGELEVEL2.toString()||n===t.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString()?"native":"default"},e.getInexactLocale=function(t){return-1!==t.indexOf("-")?t.substr(0,t.indexOf("-")):t},e.getLocalisedValue=function(t,e){if(!Array.isArray(t))return t;for(var n=0;n<t.length;n++){var r=t[n];if(e===r["@language"])return r["@value"]}var i=e.substr(0,e.indexOf("-"));for(n=0;n<t.length;n++){var o=t[n];if(o["@language"]===i)return o["@value"]}return null},e.generateTreeNodeIds=function(t,n){var r;void 0===n&&(n=0),r=t.parentNode?t.parentNode.id+"-"+n:"0",t.id=r;for(var i=0;i<t.nodes.length;i++){var o=t.nodes[i];e.generateTreeNodeIds(o,i)}},e.normaliseType=function(t){return-1!==(t=t.toLowerCase()).indexOf(":")?t.split(":")[1]:t},e.normaliseUrl=function(t){return-1!==(t=t.substr(t.indexOf("://"))).indexOf("#")&&(t=t.split("#")[0]),t},e.normalisedUrlsMatch=function(t,n){return e.normaliseUrl(t)===e.normaliseUrl(n)},e.isImageProfile=function(n){return"string"==typeof n&&(n=new t.ServiceProfile(n)),!!(e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2PROFILE.toString()))},e.isLevel0ImageProfile=function(n){return"string"==typeof n&&(n=new t.ServiceProfile(n)),!!(e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0PROFILE.toString()))},e.isLevel1ImageProfile=function(n){return"string"==typeof n&&(n=new t.ServiceProfile(n)),!!(e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1PROFILE.toString()))},e.isLevel2ImageProfile=function(n){return"string"==typeof n&&(n=new t.ServiceProfile(n)),!!(e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2PROFILE.toString()))},e.loadResource=function(t){return new Promise(function(e,n){var r,i=h.parse(t),o={host:i.hostname,port:i.port,path:i.path,method:"GET",withCredentials:!1};switch(i.protocol){case"https:":(r=f.request(o,function(t){var n="";t.on("data",function(t){n+=t}),t.on("end",function(){e(n)})})).on("error",function(t){n(t)}),r.end();break;case"dat:":var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&e(a.response)},a.open("GET",t,!0),a.send();break;default:(r=l.request(o,function(t){var n="";t.on("data",function(t){n+=t}),t.on("end",function(){e(n)})})).on("error",function(t){n(t)}),r.end()}})},e.loadExternalResourcesAuth1=function(t,n,r,i,o,a,s,u){return new Promise(function(c,l){var f=t.map(function(t){return e.loadExternalResourceAuth1(t,n,r,i,o,a,s,u)});Promise.all(f).then(function(){c(t)}).catch(function(t){l(t)})})},e.loadExternalResourceAuth1=function(t,n,r,i,o,a,s,l){return u(this,void 0,void 0,function(){var u;return c(this,function(c){switch(c.label){case 0:return[4,i(t)];case 1:return(u=c.sent())?[4,t.getData(u)]:[3,6];case 2:return c.sent(),t.status!==HTTPStatusCode.OK?[3,3]:[2,t];case 3:return[4,e.doAuthChain(t,n,r,o,a,s,l)];case 4:c.sent(),c.label=5;case 5:if(t.status===HTTPStatusCode.OK||t.status===HTTPStatusCode.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError();case 6:return[4,t.getData()];case 7:return c.sent(),t.status!==HTTPStatusCode.MOVED_TEMPORARILY&&t.status!==HTTPStatusCode.UNAUTHORIZED?[3,9]:[4,e.doAuthChain(t,n,r,o,a,s,l)];case 8:c.sent(),c.label=9;case 9:if(t.status===HTTPStatusCode.OK||t.status===HTTPStatusCode.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError()}})})},e.doAuthChain=function(t,n,r,i,o,a,s){return u(this,void 0,void 0,function(){var u,l,f,h,d,p,g,v;return c(this,function(c){switch(c.label){case 0:return t.isAccessControlled()?((u=t.externalService)&&(u.options=t.options),(l=t.kioskService)&&(l.options=t.options),(f=t.clickThroughService)&&(f.options=t.options),(h=t.loginService)&&(h.options=t.options),t.isResponseHandled||t.status!==HTTPStatusCode.MOVED_TEMPORARILY?[3,2]:[4,a(t)]):[2,t];case 1:return c.sent(),[2,t];case 2:return d=null,p=null,(d=u)?(p=d,[4,e.attemptResourceWithToken(t,r,d)]):[3,4];case 3:return c.sent(),[2,t];case 4:return(d=l)?(p=d,(g=n(d))?[4,i(g)]:[3,7]):[3,7];case 5:return c.sent(),[4,e.attemptResourceWithToken(t,r,d)];case 6:return c.sent(),[2,t];case 7:return(d=f)?(p=d,[4,o(t,d)]):[3,11];case 8:return(v=c.sent())?[4,i(v)]:[3,11];case 9:return c.sent(),[4,e.attemptResourceWithToken(t,r,d)];case 10:return c.sent(),[2,t];case 11:return(d=h)?(p=d,[4,o(t,d)]):[3,15];case 12:return(v=c.sent())?[4,i(v)]:[3,15];case 13:return c.sent(),[4,e.attemptResourceWithToken(t,r,d)];case 14:return c.sent(),[2,t];case 15:return p&&s(t,p),[2]}})})},e.attemptResourceWithToken=function(e,n,r){return u(this,void 0,void 0,function(){var i,o;return c(this,function(a){switch(a.label){case 0:return(i=r.getService(t.ServiceProfile.AUTH1TOKEN.toString()))?[4,n(e,i)]:[3,3];case 1:return(o=a.sent())&&o.accessToken?[4,e.getData(o)]:[3,3];case 2:return a.sent(),[2,e];case 3:return[2]}})})},e.loadExternalResourcesAuth09=function(t,n,r,i,o,a,s,u,c,l){return new Promise(function(f,h){var d=t.map(function(t){return e.loadExternalResourceAuth09(t,n,r,i,o,a,s,u,c,l)});Promise.all(d).then(function(){f(t)}).catch(function(t){h(t)})})},e.loadExternalResourceAuth09=function(t,n,r,i,o,a,s,u,c,l){return new Promise(function(f,h){l&&l.pessimisticAccessControl?t.getData().then(function(){t.isAccessControlled()?t.clickThroughService?(f(r(t)),f(i(t))):o(t).then(function(){a(t,!0).then(function(n){t.getData(n).then(function(){f(c(t))}).catch(function(t){h(e.createInternalServerError(t))})}).catch(function(t){h(e.createInternalServerError(t))})}).catch(function(t){h(e.createInternalServerError(t))}):f(t)}).catch(function(t){h(e.createInternalServerError(t))}):u(t,n).then(function(l){l?t.getData(l).then(function(){t.status===HTTPStatusCode.OK?f(c(t)):e.authorize(t,n,r,i,o,a,s,u).then(function(){f(c(t))}).catch(function(t){h(e.createAuthorizationFailedError())})}).catch(function(t){h(e.createAuthorizationFailedError())}):e.authorize(t,n,r,i,o,a,s,u).then(function(){f(c(t))}).catch(function(t){h(e.createAuthorizationFailedError())})}).catch(function(t){h(e.createAuthorizationFailedError())})})},e.createError=function(t,e){var n=new Error;return n.message=e,n.name=t,n},e.createAuthorizationFailedError=function(){return e.createError(manifesto.StatusCodes.AUTHORIZATION_FAILED.toString(),"Authorization failed")},e.createRestrictedError=function(){return e.createError(manifesto.StatusCodes.RESTRICTED.toString(),"Restricted")},e.createInternalServerError=function(t){return e.createError(manifesto.StatusCodes.INTERNAL_SERVER_ERROR.toString(),t)},e.authorize=function(t,n,r,i,o,a,s,u){return new Promise(function(c,l){t.getData().then(function(){t.isAccessControlled()?u(t,n).then(function(u){u?t.getData(u).then(function(){t.status===HTTPStatusCode.OK?c(t):e.showAuthInteraction(t,n,r,i,o,a,s,c,l)}).catch(function(t){l(e.createInternalServerError(t))}):a(t,!1).then(function(u){u?s(t,u,n).then(function(){t.getData(u).then(function(){t.status===HTTPStatusCode.OK?c(t):e.showAuthInteraction(t,n,r,i,o,a,s,c,l)}).catch(function(t){l(e.createInternalServerError(t))})}).catch(function(t){l(e.createInternalServerError(t))}):e.showAuthInteraction(t,n,r,i,o,a,s,c,l)})}).catch(function(t){l(e.createInternalServerError(t))}):c(t)})})},e.showAuthInteraction=function(t,n,r,i,o,a,s,u,c){t.status!==HTTPStatusCode.MOVED_TEMPORARILY||t.isResponseHandled?t.clickThroughService&&!t.isResponseHandled?r(t).then(function(){a(t,!0).then(function(r){s(t,r,n).then(function(){t.getData(r).then(function(){u(t)}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))})}):o(t).then(function(){a(t,!0).then(function(r){s(t,r,n).then(function(){t.getData(r).then(function(){u(t)}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))})}):u(t)},e.getService=function(t,e){var n=this.getServices(t);"string"!=typeof e&&(e=e.toString());for(var r=0;r<n.length;r++){var i=n[r];if(i.getProfile().toString()===e)return i}return null},e.getResourceById=function(t,n){return[t.__jsonld].en().traverseUnique(function(t){return e.getAllArrays(t)}).first(function(t){return t["@id"]===n})},e.getAllArrays=function(t){var e=[].en();if(!t)return e;for(var n in t){var r=t[n];Array.isArray(r)&&(e=e.concat(r))}return e},e.getServices=function(e){var n,r=[];if(!(n=e.__jsonld?e.__jsonld.service:e.service))return r;Array.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var o=n[i];if("string"==typeof o){var a=this.getResourceById(e.options.resource,o);a&&r.push(new t.Service(a.__jsonld||a,e.options))}else r.push(new t.Service(o,e.options))}return r},e.getTemporalComponent=function(t){var e=/t=([^&]+)/g.exec(t),n=null;return e&&e[1]&&(n=e[1].split(",")),n},e}();t.Utils=e}(d||(d={})),function(t){var e=function(t,e){Array.isArray(t)?1===t.length?this.value=t[0]:this.value=t.join("<br/>"):this.value=t,this.locale=e};t.Language=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o(n,e),n.parse=function(e,n){var r,i=[];if(!e)return i;if(Array.isArray(e))for(var o=0;o<e.length;o++){var a=e[o];r="string"==typeof a?new t.Language(a,n):new t.Language(a["@value"],a["@language"]||n),i.push(r)}else{if("string"==typeof e)return r=new t.Language(e,n),i.push(r),i;e["@value"]?(r=new t.Language(e["@value"],e["@language"]||n),i.push(r)):Object.keys(e).forEach(function(n){if(!e[n].length)throw new Error("language must have a value");r=new t.Language(e[n],n),i.push(r)})}return i},n.getValue=function(e,n){if(e.length){if(n){var r=e.en().where(function(e){return e.locale===n||t.Utils.getInexactLocale(e.locale)===t.Utils.getInexactLocale(n)}).first();if(r)return r.value}return e[0].value}return null},n}(Array);t.LanguageMap=e}(d||(d={})),function(t){var e=function(){function e(t){this.defaultLocale=t}return e.prototype.parse=function(e){this.resource=e,this.label=t.LanguageMap.parse(this.resource.label,this.defaultLocale),this.value=t.LanguageMap.parse(this.resource.value,this.defaultLocale)},e.prototype.getLabel=function(){return this.label?t.LanguageMap.getValue(this.label,this.defaultLocale):null},e.prototype.setLabel=function(e){var n=this;if(this.label&&this.label.length){var r=this.label.en().where(function(e){return e.locale===n.defaultLocale||e.locale===t.Utils.getInexactLocale(n.defaultLocale)}).first();r&&(r.value=e)}},e.prototype.getValue=function(){if(this.value){var e=this.defaultLocale;return this.label&&this.label.length&&this.label[0].locale&&(e=this.label[0].locale),t.LanguageMap.getValue(this.value,e)}return null},e.prototype.setValue=function(e){var n=this;if(this.value&&this.value.length){var r=this.value.en().where(function(e){return e.locale===n.defaultLocale||e.locale===t.Utils.getInexactLocale(n.defaultLocale)}).first();r&&(r.value=e)}},e}();t.LabelValuePair=e}(d||(d={})),function(t){var e=function(t,e){this.width=t,this.height=e};t.Size=e}(d||(d={})),e.manifesto=e.Manifesto=t.exports={AnnotationMotivation:new d.AnnotationMotivation,Behavior:new d.Behavior,IIIFResourceType:new d.IIIFResourceType,LabelValuePair:d.LabelValuePair,Language:d.Language,LanguageMap:d.LanguageMap,ManifestType:new d.ManifestType,MediaType:new d.MediaType,RenderingFormat:new d.RenderingFormat,ResourceType:new d.ResourceType,ServiceProfile:new d.ServiceProfile,Size:d.Size,TreeNode:d.TreeNode,TreeNodeType:new d.TreeNodeType,Utils:d.Utils,ViewingDirection:new d.ViewingDirection,ViewingHint:new d.ViewingHint,StatusCodes:{AUTHORIZATION_FAILED:1,FORBIDDEN:2,INTERNAL_SERVER_ERROR:3,RESTRICTED:4},create:function(t,e){return d.Deserialiser.parse(t,e)},loadManifest:function(t){return d.Utils.loadResource(t)}};o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return o(n,e),n.prototype.getBody=function(){var e=[],n=this.getProperty("body");if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++){if((a=n[r]).items)for(var i=0;i<a.items.length;i++){var o=a.items[i];e.push(new t.AnnotationBody(o,this.options))}else e.push(new t.AnnotationBody(a,this.options))}else if(n.items)for(r=0;r<n.items.length;r++){var a=n.items[r];e.push(new t.AnnotationBody(a,this.options))}else e.push(new t.AnnotationBody(n,this.options));return e},n.prototype.getMotivation=function(){var e=this.getProperty("motivation");return e?new t.AnnotationMotivation(e.toLowerCase()):null},n.prototype.getOn=function(){return this.getProperty("on")},n.prototype.getTarget=function(){return this.getProperty("target")},n.prototype.getResource=function(){return new t.Resource(this.getProperty("resource"),this.options)},n}(t.ManifestResource);t.Annotation=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return o(n,e),n.prototype.getFormat=function(){var e=this.getProperty("format");return e?new t.MediaType(t.Utils.getMediaType(e)):null},n.prototype.getType=function(){return this.getProperty("type")?new t.ResourceType(t.Utils.normaliseType(this.getProperty("type"))):null},n.prototype.getWidth=function(){return this.getProperty("width")},n.prototype.getHeight=function(){return this.getProperty("height")},n}(t.ManifestResource);t.AnnotationBody=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n,r){var i=e.call(this,n)||this;return i.label=t,i.options=r,i}return o(n,e),n.prototype.getIIIFResourceType=function(){return new t.IIIFResourceType(t.Utils.normaliseType(this.getProperty("type")))},n.prototype.getLabel=function(){return this.label},n.prototype.getResources=function(){var e=this;return this.getProperty("resources").map(function(n){return new t.Annotation(n,e.options)})},n.prototype.load=function(){var e=this;return new Promise(function(n,r){if(e.isLoaded)n(e);else{var i=e.__jsonld.id;i||(i=e.__jsonld["@id"]),t.Utils.loadResource(i).then(function(t){e.__jsonld=JSON.parse(t),e.context=e.getProperty("context"),e.id=e.getProperty("id"),e.isLoaded=!0,n(e)}).catch(r)}})},n}(t.JSONLDResource);t.AnnotationList=e}(d||(d={}));o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype.getItems=function(){return this.getProperty("items")},e}(t.ManifestResource);t.AnnotationPage=e}(d||(d={}));var d;o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e}(t.Resource);t.Thumbnail=e}(d||(d={}))}).call(this,n(3))},function(t,e,n){(function(e,r,i){var o=n(17),a=n(4),s=n(18),u=n(19),c=n(55),l=s.IncomingMessage,f=s.readyStates;var h=t.exports=function(t){var n,r=this;u.Writable.call(r),r._opts=t,r._body=[],r._headers={},t.auth&&r.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(e){r.setHeader(e,t.headers[e])});var i=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!o.abortController)i=!1,n=!0;else if("prefer-streaming"===t.mode)n=!1;else if("allow-wrong-content-type"===t.mode)n=!o.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");n=!0}r._mode=function(t,e){return o.fetch&&e?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&t?"arraybuffer":o.vbArray&&t?"text:vbarray":"text"}(n,i),r._fetchTimer=null,r.on("finish",function(){r._onFinish()})};a(h,u.Writable),h.prototype.setHeader=function(t,e){var n=t.toLowerCase();-1===d.indexOf(n)&&(this._headers[n]={name:t,value:e})},h.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},h.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},h.prototype._onFinish=function(){var t=this;if(!t._destroyed){var n=t._opts,a=t._headers,s=null;"GET"!==n.method&&"HEAD"!==n.method&&(s=o.arraybuffer?c(e.concat(t._body)):o.blobConstructor?new r.Blob(t._body.map(function(t){return c(t)}),{type:(a["content-type"]||{}).value||""}):e.concat(t._body).toString());var u=[];if(Object.keys(a).forEach(function(t){var e=a[t].name,n=a[t].value;Array.isArray(n)?n.forEach(function(t){u.push([e,t])}):u.push([e,n])}),"fetch"===t._mode){var l=null;if(o.abortController){var h=new AbortController;l=h.signal,t._fetchAbortController=h,"requestTimeout"in n&&0!==n.requestTimeout&&(t._fetchTimer=r.setTimeout(function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()},n.requestTimeout))}r.fetch(t._opts.url,{method:t._opts.method,headers:u,body:s||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin",signal:l}).then(function(e){t._fetchResponse=e,t._connect()},function(e){r.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)})}else{var d=t._xhr=new r.XMLHttpRequest;try{d.open(t._opts.method,t._opts.url,!0)}catch(e){return void i.nextTick(function(){t.emit("error",e)})}"responseType"in d&&(d.responseType=t._mode.split(":")[0]),"withCredentials"in d&&(d.withCredentials=!!n.withCredentials),"text"===t._mode&&"overrideMimeType"in d&&d.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in n&&(d.timeout=n.requestTimeout,d.ontimeout=function(){t.emit("requestTimeout")}),u.forEach(function(t){d.setRequestHeader(t[0],t[1])}),t._response=null,d.onreadystatechange=function(){switch(d.readyState){case f.LOADING:case f.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(d.onprogress=function(){t._onXHRProgress()}),d.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{d.send(s)}catch(e){return void i.nextTick(function(){t.emit("error",e)})}}}},h.prototype._onXHRProgress=function(){(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},h.prototype._connect=function(){var t=this;t._destroyed||(t._response=new l(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",function(e){t.emit("error",e)}),t.emit("response",t._response))},h.prototype._write=function(t,e,n){this._body.push(t),n()},h.prototype.abort=h.prototype.destroy=function(){this._destroyed=!0,r.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},h.prototype.end=function(t,e,n){"function"==typeof t&&(n=t,t=void 0),u.Writable.prototype.end.call(this,t,e,n)},h.prototype.flushHeaders=function(){},h.prototype.setTimeout=function(){},h.prototype.setNoDelay=function(){},h.prototype.setSocketKeepAlive=function(){};var d=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,n(5).Buffer,n(3),n(6))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],s=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*g}},function(t,e){},function(t,e,n){"use strict";var r=n(12).Buffer,i=n(49);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,o=r.allocUnsafe(t>>>0),a=this.head,s=0;a;)e=a.data,n=o,i=s,e.copy(n,i),s+=a.data.length,a=a.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(51),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,u=1,c={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},h.clearImmediate=d}function d(t){delete c[t]}function p(t){if(l)setTimeout(p,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{d(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(3),n(6))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(3))},function(t,e,n){var r=n(5),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";t.exports=o;var r=n(26),i=n(8);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(4),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){var r=n(5).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,i=0;i<n;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,n){(function(t,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,c=36,l=1,f=26,h=38,d=700,p=72,g=128,v="-",m=/^xn--/,y=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=c-l,b=Math.floor,C=String.fromCharCode;function S(t){throw new RangeError(_[t])}function I(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function A(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+I((t=t.replace(w,".")).split("."),e).join(".")}function T(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function x(t){return I(t,function(t){var e="";return t>65535&&(e+=C((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=C(t)}).join("")}function M(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function R(t,e,n){var r=0;for(t=n?b(t/d):t>>1,t+=b(t/e);t>E*f>>1;r+=c)t=b(t/E);return b(r+(E+1)*t/(t+h))}function O(t){var e,n,r,i,o,a,s,h,d,m,y,w=[],_=t.length,E=0,C=g,I=p;for((n=t.lastIndexOf(v))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&S("not-basic"),w.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<_;){for(o=E,a=1,s=c;i>=_&&S("invalid-input"),((h=(y=t.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:c)>=c||h>b((u-E)/a))&&S("overflow"),E+=h*a,!(h<(d=s<=I?l:s>=I+f?f:s-I));s+=c)a>b(u/(m=c-d))&&S("overflow"),a*=m;I=R(E-o,e=w.length+1,0==o),b(E/e)>u-C&&S("overflow"),C+=b(E/e),E%=e,w.splice(E++,0,C)}return x(w)}function N(t){var e,n,r,i,o,a,s,h,d,m,y,w,_,E,I,A=[];for(w=(t=T(t)).length,e=g,n=0,o=p,a=0;a<w;++a)(y=t[a])<128&&A.push(C(y));for(r=i=A.length,i&&A.push(v);r<w;){for(s=u,a=0;a<w;++a)(y=t[a])>=e&&y<s&&(s=y);for(s-e>b((u-n)/(_=r+1))&&S("overflow"),n+=(s-e)*_,e=s,a=0;a<w;++a)if((y=t[a])<e&&++n>u&&S("overflow"),y==e){for(h=n,d=c;!(h<(m=d<=o?l:d>=o+f?f:d-o));d+=c)I=h-m,E=c-m,A.push(C(M(m+I%E,0))),h=b(I/E);A.push(C(M(h,0))),o=R(n,_,r==i),n=0,++r}++n,++e}return A.join("")}s={version:"1.4.1",ucs2:{decode:T,encode:x},decode:O,encode:N,toASCII:function(t){return A(t,function(t){return y.test(t)?"xn--"+N(t):t})},toUnicode:function(t){return A(t,function(t){return m.test(t)?O(t.slice(4).toLowerCase()):t})}},void 0===(i=function(){return s}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(59)(t),n(3))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(62),e.encode=e.stringify=n(63)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,d,p,g=t[l].replace(s,"%20"),v=g.indexOf(n);v>=0?(f=g.substr(0,v),h=g.substr(v+1)):(f=g,h=""),d=decodeURIComponent(f),p=decodeURIComponent(h),r(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(a(t),function(a){var s=encodeURIComponent(r(a))+n;return i(t[a])?o(t[a],function(t){return s+encodeURIComponent(r(t))}).join(e):s+encodeURIComponent(r(t[a]))}).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){var r=n(15),i=n(13),o=t.exports;for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);function s(t){if("string"==typeof t&&(t=i.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}o.request=function(t,e){return t=s(t),r.request.call(this,t,e)},o.get=function(t,e){return t=s(t),r.get.call(this,t,e)}},function(t,e,n){(function(e,n){var r;t.exports=function t(e,n,i){function o(s,u){if(!n[s]){if(!e[s]){if(!u&&"function"==typeof r&&r)return r(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){return o(e[s][1][t]||t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,r,i){(function(t){!function(t){var e=function(){function t(t){this.value="",t&&(this.value=t.toLowerCase())}return t.prototype.toString=function(){return this.value},t}();t.StringValue=e}(i||(i={}));var e,r,i,o=this&&this.__extends||(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)});!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.date=function(){return new e(e.DATE.toString())},e.prototype.none=function(){return new e(e.NONE.toString())},e.DATE=new e("date"),e.NONE=new e("none"),e}(t.StringValue);t.TreeSortType=e}(i||(i={})),function(t){var e=function(){function e(t,e){this.rects=[],this.canvasIndex=e,this.addRect(t)}return e.prototype.addRect=function(e){var n=new t.AnnotationRect(e);n.canvasIndex=this.canvasIndex,n.index=this.rects.length,this.rects.push(n),this.rects.sort(function(t,e){return t.index-e.index})},e}();t.AnnotationGroup=e}(i||(i={})),function(t){var e=function(t){this.isVisible=!0;var e=t.on.match(/.*xywh=(\d*),(\d*),(\d*),(\d*)/);this.x=Number(e[1]),this.y=Number(e[2]),this.width=Number(e[3]),this.height=Number(e[4]),this.chars=t.resource.chars};t.AnnotationRect=e}(i||(i={})),function(e){var r=function(){function r(t){this._options=t,this._options.locale=this._options.locale||"en-GB"}return r.prototype.bootstrap=function(e,r){var i=this;return new Promise(function(o,a){e&&r&&(o=e,a=r);var s=i._detectIE();if(!1===s)manifesto.loadManifest(i._options.iiifResourceUri).then(function(t){i._loaded(i,t,o,a)});else if(s>0)if(9===s){var u={url:i._options.iiifResourceUri,type:"GET",dataType:"jsonp",jsonp:"callback",jsonpCallback:"manifestCallback"};n.ajax(u),t.manifestCallback=function(t){i._loaded(i,JSON.stringify(t),o,a)}}else n.getJSON(i._options.iiifResourceUri,function(t){i._loaded(i,JSON.stringify(t),o,a)})})},r.prototype._loaded=function(t,n,r,i){var o=manifesto.create(n,{locale:t._options.locale});t._options.iiifResource||(t._options.iiifResource=o);var a=t._options.collectionIndex,s=t._options.manifestIndex;if(o.getIIIFResourceType().toString()===manifesto.IIIFResourceType.collection().toString()||"collection"===o.getIIIFResourceType().toString().toLowerCase()){var u=o.getManifests(),c=o.getCollections();u.length||void 0!==a||(a=0),void 0!==a&&c&&c.length?o.getCollectionByIndex(a).then(function(n){n||i("Collection index not found"),0===n.getTotalManifests()&&0===s&&n.getTotalCollections()>0?(t._options.collectionIndex=0,t._options.iiifResourceUri=n.id,t.bootstrap(r,i)):n.getManifestByIndex(s).then(function(n){t._options.manifest=n;var i=new e.Helper(t._options);r(i)})}):o.getManifestByIndex(t._options.manifestIndex).then(function(n){t._options.manifest=n;var i=new e.Helper(t._options);r(i)})}else{t._options.manifest=o;var l=new e.Helper(t._options);r(l)}},r.prototype._detectIE=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("Edge/");return r>0&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)},r}();e.Bootstrapper=r}(i||(i={})),function(t){var e=function(){function t(t,e){this.authHoldingPage=null,this.clickThroughService=null,this.externalService=null,this.isProbed=!1,this.isResponseHandled=!1,this.kioskService=null,this.loginService=null,this.logoutService=null,this.probeService=null,this.restrictedService=null,this.tokenService=null,t.externalResource=this,this.dataUri=this._getDataUri(t),this.index=t.index,this.authAPIVersion=e.authApiVersion,this._parseAuthServices(t),this._parseDimensions(t)}return t.prototype._getImageServiceDescriptor=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.id;i.endsWith("/")||(i+="/"),manifesto.Utils.isImageProfile(r.getProfile())&&(e=i+"info.json")}return e},t.prototype._getDataUri=function(t){var e=t.getContent(),n=t.getImages(),r=null;if(e&&e.length){var i=e[0].getBody();return i.length?(o=i[0].getServices()).length&&(r=this._getImageServiceDescriptor(o))?r:i[0].id:null}if(n&&n.length){var o,a=n[0].getResource();return(o=a.getServices()).length&&(r=this._getImageServiceDescriptor(o))?r:a.id}var s=t.getService(manifesto.ServiceProfile.ixif());return s?s.getInfoUri():t.id},t.prototype._parseAuthServices=function(t){if(.9===this.authAPIVersion)this.clickThroughService=manifesto.Utils.getService(t,manifesto.ServiceProfile.clickThrough().toString()),this.loginService=manifesto.Utils.getService(t,manifesto.ServiceProfile.login().toString()),this.restrictedService=manifesto.Utils.getService(t,manifesto.ServiceProfile.restricted().toString()),this.clickThroughService?(this.logoutService=this.clickThroughService.getService(manifesto.ServiceProfile.logout().toString()),this.tokenService=this.clickThroughService.getService(manifesto.ServiceProfile.token().toString())):this.loginService?(this.logoutService=this.loginService.getService(manifesto.ServiceProfile.logout().toString()),this.tokenService=this.loginService.getService(manifesto.ServiceProfile.token().toString())):this.restrictedService&&(this.logoutService=this.restrictedService.getService(manifesto.ServiceProfile.logout().toString()),this.tokenService=this.restrictedService.getService(manifesto.ServiceProfile.token().toString()));else{if(void 0!==t.isCanvas&&t.isCanvas()){var e=t.getContent();if(e&&e.length){var n=e[0].getBody();n&&n.length&&(t=n[0])}}this.clickThroughService=manifesto.Utils.getService(t,manifesto.ServiceProfile.auth1Clickthrough().toString()),this.loginService=manifesto.Utils.getService(t,manifesto.ServiceProfile.auth1Login().toString()),this.externalService=manifesto.Utils.getService(t,manifesto.ServiceProfile.auth1External().toString()),this.kioskService=manifesto.Utils.getService(t,manifesto.ServiceProfile.auth1Kiosk().toString()),this.clickThroughService?(this.logoutService=this.clickThroughService.getService(manifesto.ServiceProfile.auth1Logout().toString()),this.tokenService=this.clickThroughService.getService(manifesto.ServiceProfile.auth1Token().toString()),this.probeService=this.clickThroughService.getService(manifesto.ServiceProfile.auth1Probe().toString())):this.loginService?(this.logoutService=this.loginService.getService(manifesto.ServiceProfile.auth1Logout().toString()),this.tokenService=this.loginService.getService(manifesto.ServiceProfile.auth1Token().toString()),this.probeService=this.loginService.getService(manifesto.ServiceProfile.auth1Probe().toString())):this.externalService?(this.logoutService=this.externalService.getService(manifesto.ServiceProfile.auth1Logout().toString()),this.tokenService=this.externalService.getService(manifesto.ServiceProfile.auth1Token().toString()),this.probeService=this.externalService.getService(manifesto.ServiceProfile.auth1Probe().toString())):this.kioskService&&(this.logoutService=this.kioskService.getService(manifesto.ServiceProfile.auth1Logout().toString()),this.tokenService=this.kioskService.getService(manifesto.ServiceProfile.auth1Token().toString()),this.probeService=this.kioskService.getService(manifesto.ServiceProfile.auth1Probe().toString()))}},t.prototype._parseDimensions=function(t){var e=t.getImages();if(e&&e.length){var n=e[0].getResource();this.width=n.getWidth(),this.height=n.getHeight()}else if((e=t.getContent()).length){var r=e[0].getBody();r.length&&(this.width=r[0].getWidth(),this.height=r[0].getHeight())}},t.prototype.isAccessControlled=function(){return!!(this.clickThroughService||this.loginService||this.externalService||this.kioskService||this.probeService)},t.prototype.hasServiceDescriptor=function(){return!!this.dataUri&&this.dataUri.endsWith("info.json")},t.prototype.getData=function(t){var e=this,r=this;return r.data={},new Promise(function(i,o){if(e.dataUri||o("There is no dataUri to fetch"),r.probeService&&!r.isProbed)r.isProbed=!0,n.ajax({url:r.probeService.id,type:"GET",dataType:"json"}).done(function(t){unescape(t.contentLocation)!==r.dataUri?r.status=HTTPStatusCode.MOVED_TEMPORARILY:r.status=HTTPStatusCode.OK,i(r)}).fail(function(t){r.status=t.status,r.error=t,i(r)});else{var a="GET";if(!r.hasServiceDescriptor()){if(!r.isAccessControlled())return r.status=HTTPStatusCode.OK,void i(r);a="HEAD"}n.ajax({url:r.dataUri,type:a,dataType:"json",beforeSend:function(e){t&&e.setRequestHeader("Authorization","Bearer "+t.accessToken)}}).done(function(t){if(t){var e=unescape(t["@id"]);r.data=t,r._parseAuthServices(r.data),e.endsWith("/info.json")&&(e=e.substr(0,e.lastIndexOf("/")));var n=r.dataUri;n&&n.endsWith("/info.json")&&(n=n.substr(0,n.lastIndexOf("/"))),e!==n&&r.loginService?r.status=HTTPStatusCode.MOVED_TEMPORARILY:r.status=HTTPStatusCode.OK,i(r)}else r.status=HTTPStatusCode.OK,i(r)}).fail(function(t){r.status=t.status,r.error=t,t.responseJSON&&r._parseAuthServices(t.responseJSON),i(r)})}})},t}();t.ExternalResource=e}(i||(i={})),function(t){var e=function(){function e(t){this.options=t,this.iiifResource=this.options.iiifResource,this.iiifResourceUri=this.options.iiifResourceUri,this.manifest=this.options.manifest,this.collectionIndex=this.options.collectionIndex,this.manifestIndex=this.options.manifestIndex||0,this.sequenceIndex=this.options.sequenceIndex||0,this.canvasIndex=this.options.canvasIndex||0}return e.prototype.getAutoCompleteService=function(){var t=this.getSearchService();return t?t.getService(manifesto.ServiceProfile.autoComplete()):null},e.prototype.getAttribution=function(){console.warn("getAttribution will be deprecated, use getRequiredStatement instead.");var t=this.manifest.getAttribution();return t?Manifesto.LanguageMap.getValue(t,this.options.locale):null},e.prototype.getCanvases=function(){return this.getCurrentSequence().getCanvases()},e.prototype.getCanvasById=function(t){return this.getCurrentSequence().getCanvasById(t)},e.prototype.getCanvasesById=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=this.getCanvasById(r);i&&e.push(i)}return e},e.prototype.getCanvasByIndex=function(t){return this.getCurrentSequence().getCanvasByIndex(t)},e.prototype.getCanvasIndexById=function(t){return this.getCurrentSequence().getCanvasIndexById(t)},e.prototype.getCanvasIndexByLabel=function(t){var e=this.getManifestType().toString()===manifesto.ManifestType.manuscript().toString();return this.getCurrentSequence().getCanvasIndexByLabel(t,e)},e.prototype.getCanvasRange=function(t,e){var n=this.getCanvasRanges(t);if(e){for(var r=0;r<n.length;r++){var i=n[r];if(i.path===e)return i}return null}return n[0]},e.prototype.getCanvasRanges=function(t){return t.ranges?t.ranges:(t.ranges=this.manifest.getAllRanges().en().where(function(e){return e.getCanvasIds().en().any(function(e){return manifesto.Utils.normaliseUrl(e)===manifesto.Utils.normaliseUrl(t.id)})}).toArray(),t.ranges)},e.prototype.getCollectionIndex=function(t){if(!t.parentCollection||t.parentCollection.parentCollection)return t.parentCollection?t.parentCollection.index:void 0},e.prototype.getCurrentCanvas=function(){return this.getCurrentSequence().getCanvasByIndex(this.canvasIndex)},e.prototype.getCurrentSequence=function(){return this.getSequenceByIndex(this.sequenceIndex)},e.prototype.getDescription=function(){var t=this.manifest.getDescription();return t?Manifesto.LanguageMap.getValue(t,this.options.locale):null},e.prototype.getFirstPageIndex=function(){return 0},e.prototype.getLabel=function(){var t=this.manifest.getLabel();return t?Manifesto.LanguageMap.getValue(t,this.options.locale):null},e.prototype.getLastCanvasLabel=function(t){return this.getCurrentSequence().getLastCanvasLabel(t)},e.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},e.prototype.getLicense=function(){return this.manifest.getLicense()},e.prototype.getLogo=function(){return this.manifest.getLogo()},e.prototype.getManifestType=function(){var t=this.manifest.getManifestType();return""===t.toString()&&(t=manifesto.ManifestType.monograph()),t},e.prototype.getMetadata=function(e){var n=[],r=this.manifest.getMetadata(),i=new t.MetadataGroup(this.manifest);r&&r.length&&i.addMetadata(r,!0),this.manifest.getDescription().length&&((o=new Manifesto.LabelValuePair(this.options.locale)).label=[new Manifesto.Language("description",this.options.locale)],o.value=this.manifest.getDescription(),o.isRootLevel=!0,i.addItem(o)),this.manifest.getAttribution().length&&((o=new Manifesto.LabelValuePair(this.options.locale)).label=[new Manifesto.Language("attribution",this.options.locale)],o.value=this.manifest.getAttribution(),o.isRootLevel=!0,i.addItem(o));var o,a=this.manifest.getLicense();if(a){var s={label:"license",value:e&&e.licenseFormatter?e.licenseFormatter.format(a):a};(o=new Manifesto.LabelValuePair(this.options.locale)).parse(s),o.isRootLevel=!0,i.addItem(o)}return this.manifest.getLogo()&&(s={label:"logo",value:'<img src="'+this.manifest.getLogo()+'"/>'},(o=new Manifesto.LabelValuePair(this.options.locale)).parse(s),o.isRootLevel=!0,i.addItem(o)),n.push(i),e?this._parseMetadataOptions(e,n):n},e.prototype.getRequiredStatement=function(){var t=this.manifest.getRequiredStatement();return t?{label:t.getLabel(),value:t.getValue()}:null},e.prototype._parseMetadataOptions=function(e,n){var r=this.getCurrentSequence(),i=r.getMetadata();if(i&&i.length){var o=new t.MetadataGroup(r);o.addMetadata(i),n.push(o)}if(e.range){var a=this._getRangeMetadata([],e.range);a=a.reverse(),n=n.concat(a)}if(e.canvases&&e.canvases.length)for(var s=0;s<e.canvases.length;s++){var u=e.canvases[s],c=u.getMetadata();if(c&&c.length){var l=new t.MetadataGroup(u);l.addMetadata(u.getMetadata()),n.push(l)}for(var f=u.getImages(),h=0;h<f.length;h++){var d=f[h],p=d.getMetadata();if(p&&p.length){var g=new t.MetadataGroup(d);g.addMetadata(p),n.push(g)}}}return n},e.prototype._getRangeMetadata=function(e,n){var r=n.getMetadata();if(r&&r.length){var i=new t.MetadataGroup(n);i.addMetadata(r),e.push(i)}else if(n.parentRange)return this._getRangeMetadata(e,n.parentRange);return e},e.prototype.getMultiSelectState=function(){return this._multiSelectState||(this._multiSelectState=new t.MultiSelectState,this._multiSelectState.ranges=this.getRanges().slice(0),this._multiSelectState.canvases=this.getCurrentSequence().getCanvases().slice(0)),this._multiSelectState},e.prototype.getCurrentRange=function(){return this.rangeId?this.getRangeById(this.rangeId):null},e.prototype.getPosterCanvas=function(){return this.manifest.getPosterCanvas()},e.prototype.getPosterImage=function(){var t=this.getPosterCanvas();if(t){var e=t.getContent();if(e&&e.length)return e[0].getBody()[0].id}return null},e.prototype.getPreviousRange=function(t){var e=null;if(e=t||this.getCurrentRange())for(var n=this.getFlattenedTree(),r=0;r<n.length;r++)if(n[r].data.id===e.id){for(;r>0;)return n[--r].data;break}return null},e.prototype.getNextRange=function(t){var e=null;if(e=t||this.getCurrentRange())for(var n=this.getFlattenedTree(),r=0;r<n.length;r++)if(n[r].data.id===e.id){for(;r<n.length-1;){var i=n[++r];if(i.data.canvases&&i.data.canvases.length)return i.data}break}return null},e.prototype.getFlattenedTree=function(){return this._flattenTree(this.getTree(),"nodes")},e.prototype._flattenTree=function(t,e){var n=this,r=[Object.assign({},t)];return delete r[0][e],t[e]&&t[e].length>0?r.concat(t[e].map(function(t){return n._flattenTree(t,e)}).reduce(function(t,e){return t.concat(e)},[])):r},e.prototype.getRanges=function(){return this.manifest.getAllRanges()},e.prototype.getRangeByPath=function(t){return this.manifest.getRangeByPath(t)},e.prototype.getRangeById=function(t){return this.manifest.getRangeById(t)},e.prototype.getRangeCanvases=function(t){var e=t.getCanvasIds();return this.getCanvasesById(e)},e.prototype.getRelated=function(){return this.manifest.getRelated()},e.prototype.getSearchService=function(){return this.manifest.getService(manifesto.ServiceProfile.search())},e.prototype.getSeeAlso=function(){return this.manifest.getSeeAlso()},e.prototype.getSequenceByIndex=function(t){return this.manifest.getSequenceByIndex(t)},e.prototype.getShareServiceUrl=function(){var t=null,e=this.manifest.getService(manifesto.ServiceProfile.shareExtensions());return e&&(e.length&&(e=e[0]),t=e.__jsonld.shareUrl),t},e.prototype.getSortedTreeNodesByDate=function(t,e){var n=e.nodes.en().traverseUnique(function(t){return t.nodes}).where(function(t){return t.data.type===manifesto.TreeNodeType.collection().toString()||t.data.type===manifesto.TreeNodeType.manifest().toString()}).toArray(),r=e.nodes.en().traverseUnique(function(t){return t.nodes}).where(function(t){return t.data.type===manifesto.TreeNodeType.manifest().toString()}).toArray();this.createDecadeNodes(t,n),this.sortDecadeNodes(t),this.createYearNodes(t,n),this.sortYearNodes(t),this.createMonthNodes(t,r),this.sortMonthNodes(t),this.createDateNodes(t,r),this.pruneDecadeNodes(t)},e.prototype.getStartCanvasIndex=function(){return this.getCurrentSequence().getStartCanvasIndex()},e.prototype.getThumbs=function(t,e){return this.getCurrentSequence().getThumbs(t,e)},e.prototype.getTopRanges=function(){return this.manifest.getTopRanges()},e.prototype.getTotalCanvases=function(){return this.getCurrentSequence().getTotalCanvases()},e.prototype.getTrackingLabel=function(){return this.manifest.getTrackingLabel()},e.prototype._getTopRanges=function(){return this.iiifResource.getTopRanges()},e.prototype.getTree=function(e,n){if(void 0===e&&(e=0),void 0===n&&(n=t.TreeSortType.NONE),!this.iiifResource)return null;var r;if(this.iiifResource.isCollection())r=this.iiifResource.getDefaultTree();else{var i=this._getTopRanges(),o=new manifesto.TreeNode;if(o.label="root",o.data=this.iiifResource,!i.length)return o;r=i[e].getTree(o)}var a=new manifesto.TreeNode;switch(n.toString()){case t.TreeSortType.DATE.toString():if(this.treeHasNavDates(r)){this.getSortedTreeNodesByDate(a,r);break}default:a=r}return a},e.prototype.treeHasNavDates=function(t){return!!t.nodes.en().traverseUnique(function(t){return t.nodes}).where(function(t){return!isNaN(t.navDate)}).first()},e.prototype.getViewingDirection=function(){var t=this.getCurrentSequence().getViewingDirection();return t||(t=this.manifest.getViewingDirection()),t},e.prototype.getViewingHint=function(){var t=this.getCurrentSequence().getViewingHint();return t||(t=this.manifest.getViewingHint()),t},e.prototype.hasParentCollection=function(){return!!this.manifest.parentCollection},e.prototype.hasRelatedPage=function(){var t=this.getRelated();return!!t&&(t.length&&(t=t[0]),"text/html"===t.format)},e.prototype.hasResources=function(){return this.getCurrentCanvas().getResources().length>0},e.prototype.isBottomToTop=function(){var t=this.getViewingDirection();return!!t&&t.toString()===manifesto.ViewingDirection.bottomToTop().toString()},e.prototype.isCanvasIndexOutOfRange=function(t){return this.getCurrentSequence().isCanvasIndexOutOfRange(t)},e.prototype.isContinuous=function(){var t=this.getViewingHint();return!!t&&t.toString()===manifesto.ViewingHint.continuous().toString()},e.prototype.isFirstCanvas=function(t){return void 0!==t?this.getCurrentSequence().isFirstCanvas(t):this.getCurrentSequence().isFirstCanvas(this.canvasIndex)},e.prototype.isHorizontallyAligned=function(){return this.isLeftToRight()||this.isRightToLeft()},e.prototype.isLastCanvas=function(t){return void 0!==t?this.getCurrentSequence().isLastCanvas(t):this.getCurrentSequence().isLastCanvas(this.canvasIndex)},e.prototype.isLeftToRight=function(){var t=this.getViewingDirection();return!!t&&t.toString()===manifesto.ViewingDirection.leftToRight().toString()},e.prototype.isMultiCanvas=function(){return this.getCurrentSequence().isMultiCanvas()},e.prototype.isMultiSequence=function(){return this.manifest.isMultiSequence()},e.prototype.isPaged=function(){var t=this.getViewingHint();return t?t.toString()===manifesto.ViewingHint.paged().toString():this.manifest.isPagingEnabled()},e.prototype.isPagingAvailable=function(){return this.isPagingEnabled()&&this.getTotalCanvases()>2},e.prototype.isPagingEnabled=function(){return this.manifest.isPagingEnabled()||this.getCurrentSequence().isPagingEnabled()},e.prototype.isRightToLeft=function(){var t=this.getViewingDirection();return!!t&&t.toString()===manifesto.ViewingDirection.rightToLeft().toString()},e.prototype.isTopToBottom=function(){var t=this.getViewingDirection();return!!t&&t.toString()===manifesto.ViewingDirection.topToBottom().toString()},e.prototype.isTotalCanvasesEven=function(){return this.getCurrentSequence().isTotalCanvasesEven()},e.prototype.isUIEnabled=function(t){var e=this.manifest.getService(manifesto.ServiceProfile.uiExtensions());if(e){var n=e.getProperty("disableUI");if(n&&(-1!==n.indexOf(t)||-1!==n.indexOf(t.toLowerCase())))return!1}return!0},e.prototype.isVerticallyAligned=function(){return this.isTopToBottom()||this.isBottomToTop()},e.prototype.createDateNodes=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=this.getNodeYear(r),o=this.getNodeMonth(r),a=new manifesto.TreeNode;a.id=r.id,a.label=this.getNodeDisplayDate(r),a.data=r.data,a.data.type=manifesto.TreeNodeType.manifest().toString(),a.data.year=i,a.data.month=o;var s=this.getDecadeNode(t,i);if(s){var u=this.getYearNode(s,i);if(u){var c=this.getMonthNode(u,o);c&&c.addNode(a)}}}},e.prototype.createDecadeNodes=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=this.getNodeYear(r),o=Number(i.toString().substr(0,3)+"9");if(!this.getDecadeNode(t,i)){var a=new manifesto.TreeNode;a.label=i+" - "+o,a.navDate=r.navDate,a.data.startYear=i,a.data.endYear=o,t.addNode(a)}}},e.prototype.createMonthNodes=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=this.getNodeYear(r),o=this.getNodeMonth(r),a=this.getDecadeNode(t,i),s=null;if(a&&(s=this.getYearNode(a,i)),a&&s&&!this.getMonthNode(s,o)){var u=new manifesto.TreeNode;u.label=this.getNodeDisplayMonth(r),u.navDate=r.navDate,u.data.year=i,u.data.month=o,s.addNode(u)}}},e.prototype.createYearNodes=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=this.getNodeYear(r),o=this.getDecadeNode(t,i);if(o&&!this.getYearNode(o,i)){var a=new manifesto.TreeNode;a.label=i.toString(),a.navDate=r.navDate,a.data.year=i,o.addNode(a)}}},e.prototype.getDecadeNode=function(t,e){for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(e>=r.data.startYear&&e<=r.data.endYear)return r}return null},e.prototype.getMonthNode=function(t,e){for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(e===this.getNodeMonth(r))return r}return null},e.prototype.getNodeDisplayDate=function(t){return t.navDate.toDateString()},e.prototype.getNodeDisplayMonth=function(t){return["January","February","March","April","May","June","July","August","September","October","November","December"][t.navDate.getMonth()]},e.prototype.getNodeMonth=function(t){return t.navDate.getMonth()},e.prototype.getNodeYear=function(t){return t.navDate.getFullYear()},e.prototype.getYearNode=function(t,e){for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(e===this.getNodeYear(r))return r}return null},e.prototype.pruneDecadeNodes=function(t){for(var e=[],n=0;n<t.nodes.length;n++){var r=t.nodes[n];r.nodes.length||e.push(r)}for(var i=0;i<e.length;i++){var o=e[i],a=t.nodes.indexOf(o);a>-1&&t.nodes.splice(a,1)}},e.prototype.sortDecadeNodes=function(t){t.nodes=t.nodes.sort(function(t,e){return t.data.startYear-e.data.startYear})},e.prototype.sortMonthNodes=function(t){for(var e=this,n=0;n<t.nodes.length;n++)for(var r=t.nodes[n],i=0;i<r.nodes.length;i++){var o=r.nodes[i];o.nodes=o.nodes.sort(function(t,n){return e.getNodeMonth(t)-e.getNodeMonth(n)})}},e.prototype.sortYearNodes=function(t){for(var e=this,n=0;n<t.nodes.length;n++){var r=t.nodes[n];r.nodes=r.nodes.sort(function(t,n){return e.getNodeYear(t)-e.getNodeYear(n)})}},e}();t.Helper=e}(i||(i={})),function(t){var e=function(){};t.ILabelValuePair=e}(i||(i={})),function(t){t.loadManifest=function(e){return new t.Bootstrapper(e).bootstrap()}}(i||(i={})),(r=t).Manifold||(r.Manifold=i),function(t){var e=function(){function t(t,e){this.items=[],this.resource=t,this.label=e}return t.prototype.addItem=function(t){this.items.push(t)},t.prototype.addMetadata=function(t,e){void 0===e&&(e=!1);for(var n=0;n<t.length;n++){var r=t[n];r.isRootLevel=e,this.addItem(r)}},t}();t.MetadataGroup=e}(i||(i={})),function(t){var e=function(){};t.MetadataOptions=e}(i||(i={})),function(t){var e=function(){function t(){this.isEnabled=!1,this.ranges=[],this.canvases=[]}return t.prototype.allCanvasesSelected=function(){return this.canvases.length>0&&this.getAllSelectedCanvases().length===this.canvases.length},t.prototype.allRangesSelected=function(){return this.ranges.length>0&&this.getAllSelectedRanges().length===this.ranges.length},t.prototype.allSelected=function(){return this.allRangesSelected()&&this.allCanvasesSelected()},t.prototype.getAll=function(){return this.canvases.concat(this.ranges)},t.prototype.getAllSelectedCanvases=function(){return this.canvases.en().where(function(t){return t.multiSelected}).toArray()},t.prototype.getAllSelectedRanges=function(){return this.ranges.en().where(function(t){return t.multiSelected}).toArray()},t.prototype.getCanvasById=function(t){return this.canvases.en().where(function(e){return manifesto.Utils.normaliseUrl(e.id)===manifesto.Utils.normaliseUrl(t)}).first()},t.prototype.getCanvasesByIds=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(this.getCanvasById(r))}return e},t.prototype.getRangeCanvases=function(t){var e=t.getCanvasIds();return this.getCanvasesByIds(e)},t.prototype.selectAll=function(t){this.selectRanges(this.ranges,t),this.selectCanvases(this.canvases,t)},t.prototype.selectCanvas=function(t,e){this.canvases.en().where(function(e){return e.id===t.id}).first().multiSelected=e},t.prototype.selectAllCanvases=function(t){this.selectCanvases(this.canvases,t)},t.prototype.selectCanvases=function(t,e){for(var n=0;n<t.length;n++)t[n].multiSelected=e},t.prototype.selectRange=function(t,e){var n=this.ranges.en().where(function(e){return e.id===t.id}).first();n.multiSelected=e;var r=this.getRangeCanvases(n);this.selectCanvases(r,e)},t.prototype.selectAllRanges=function(t){this.selectRanges(this.ranges,t)},t.prototype.selectRanges=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.multiSelected=e;var i=this.getCanvasesByIds(r.getCanvasIds());this.selectCanvases(i,e)}},t.prototype.setEnabled=function(t){this.isEnabled=t;for(var e=this.getAll(),n=0;n<e.length;n++){var r=e[n];r.multiSelectEnabled=this.isEnabled,t||(r.multiSelected=!1)}},t}();t.MultiSelectState=e}(i||(i={})),function(t){var e=function(t,e){this.value=t,this.locale=e};t.Translation=e}(i||(i={})),function(t){var e=function(){function t(t){this.labels=t}return t.prototype.format=function(t){return-1!=t.indexOf("<a")?t:'<a href="'+t+'">'+(this.labels[t]?this.labels[t]:t)+"</a>"},t}();t.UriLabeller=e}(i||(i={}))}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}).call(this,n(3),n(0))},function(t,n){t.exports=e},function(t,e,n){n(14),n(27),n(28),n(69),n(70),n(72)},function(t,e,n){var r,i,o;i=[n(0),n(1)],void 0===(o="function"==typeof(r=function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Slider 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(28),n(27),n(1),n(14)],void 0===(o="function"==typeof(r=function(t){return t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,r=this.options,i=this.element.find(".ui-slider-handle"),o=[];for(n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n)),e=i.length;e<n;e++)o.push("<span tabindex='0'></span>");this.handles=i.add(t(o.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var n,r,i,o,a,s,u,c=this,l=this.options;return!l.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var n=Math.abs(r-c.values(e));(i>n||i===n&&(e===c._lastChangedValue||c.values(e)===l.min))&&(i=n,o=t(this),a=e)}),!1!==this._start(e,a)&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),s=o.offset(),u=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:e.pageX-s.left-o.width()/2,top:e.pageY-s.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,r,i,o;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(r=n/e)>1&&(r=1),r<0&&(r=0),"vertical"===this.orientation&&(r=1-r),i=this._valueMax()-this._valueMin(),o=this._valueMin()+r*i,this._trimAlignValue(o)},_uiHash:function(t,e,n){var r={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(r.value=void 0!==e?e:this.values(t),r.values=n||this.values()),r},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,n){var r,i=this.value(),o=this.values();this._hasMultipleValues()&&(r=this.values(e?0:1),i=this.values(e),2===this.options.values.length&&!0===this.options.range&&(n=0===e?Math.min(r,n):Math.max(r,n)),o[e]=n),n!==i&&!1!==this._trigger("slide",t,this._uiHash(e,n,o))&&(this._hasMultipleValues()?this.values(e,n):this.value(n))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,n){var r,i,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(r=this.options.values,i=arguments[0],o=0;o<r.length;o+=1)r[o]=this._trimAlignValue(i[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,n){var r,i=0;switch("range"===e&&!0===this.options.range&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(i=this.options.values.length),this._super(e,n),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(n),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=i-1;r>=0;r--)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,r;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(n=this.options.values.slice(),r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,r=t-n;return 2*Math.abs(n)>=e&&(r+=n>0?e:-e),parseFloat(r.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),n=this.options.step;(t=Math.round((t-e)/n)*n+e)>this.options.max&&(t-=n),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,n,r,i,o,a=this.options.range,s=this.options,u=this,c=!this._animateOff&&s.animate,l={};this._hasMultipleValues()?this.handles.each(function(r){n=(u.values(r)-u._valueMin())/(u._valueMax()-u._valueMin())*100,l["horizontal"===u.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[c?"animate":"css"](l,s.animate),!0===u.options.range&&("horizontal"===u.orientation?(0===r&&u.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},s.animate),1===r&&u.range[c?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:s.animate})):(0===r&&u.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},s.animate),1===r&&u.range[c?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:s.animate}))),e=n}):(r=this.value(),i=this._valueMin(),o=this._valueMax(),n=o!==i?(r-i)/(o-i)*100:0,l["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](l,s.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},s.animate),"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-n+"%"},s.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},s.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-n+"%"},s.animate))},_handleEvents:{keydown:function(e){var n,r,i,o=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,o)))return}switch(i=this.options.step,n=r=this._hasMultipleValues()?this.values(o):this.value(),e.keyCode){case t.ui.keyCode.HOME:r=this._valueMin();break;case t.ui.keyCode.END:r=this._valueMax();break;case t.ui.keyCode.PAGE_UP:r=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;r=this._trimAlignValue(n+i);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;r=this._trimAlignValue(n-i)}this._slide(e,o,r)},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),this._removeClass(t(e.target),null,"ui-state-active"))}}})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r=n(71);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,'/*!\n * jQuery UI CSS Framework 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/theming/\n */\n\n/* Layout helpers\n----------------------------------*/\n.ui-helper-hidden {\n\tdisplay: none;\n}\n.ui-helper-hidden-accessible {\n\tborder: 0;\n\tclip: rect(0 0 0 0);\n\theight: 1px;\n\tmargin: -1px;\n\toverflow: hidden;\n\tpadding: 0;\n\tposition: absolute;\n\twidth: 1px;\n}\n.ui-helper-reset {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\toutline: 0;\n\tline-height: 1.3;\n\ttext-decoration: none;\n\tfont-size: 100%;\n\tlist-style: none;\n}\n.ui-helper-clearfix:before,\n.ui-helper-clearfix:after {\n\tcontent: "";\n\tdisplay: table;\n\tborder-collapse: collapse;\n}\n.ui-helper-clearfix:after {\n\tclear: both;\n}\n.ui-helper-zfix {\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\topacity: 0;\n\tfilter:Alpha(Opacity=0); /* support: IE8 */\n}\n\n.ui-front {\n\tz-index: 100;\n}\n\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-disabled {\n\tcursor: default !important;\n\tpointer-events: none;\n}\n\n\n/* Icons\n----------------------------------*/\n.ui-icon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tmargin-top: -.25em;\n\tposition: relative;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n}\n\n.ui-widget-icon-block {\n\tleft: 50%;\n\tmargin-left: -8px;\n\tdisplay: block;\n}\n\n/* Misc visuals\n----------------------------------*/\n\n/* Overlays */\n.ui-widget-overlay {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n',""])},function(t,e,n){var r=n(73);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"/*!\n * jQuery UI Slider 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/slider/#theming\n */\n.ui-slider {\n\tposition: relative;\n\ttext-align: left;\n}\n.ui-slider .ui-slider-handle {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 1.2em;\n\theight: 1.2em;\n\tcursor: default;\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n.ui-slider .ui-slider-range {\n\tposition: absolute;\n\tz-index: 1;\n\tfont-size: .7em;\n\tdisplay: block;\n\tborder: 0;\n\tbackground-position: 0 0;\n}\n\n/* support: IE8 - See #6727 */\n.ui-slider.ui-state-disabled .ui-slider-handle,\n.ui-slider.ui-state-disabled .ui-slider-range {\n\tfilter: inherit;\n}\n\n.ui-slider-horizontal {\n\theight: .8em;\n}\n.ui-slider-horizontal .ui-slider-handle {\n\ttop: -.3em;\n\tmargin-left: -.6em;\n}\n.ui-slider-horizontal .ui-slider-range {\n\ttop: 0;\n\theight: 100%;\n}\n.ui-slider-horizontal .ui-slider-range-min {\n\tleft: 0;\n}\n.ui-slider-horizontal .ui-slider-range-max {\n\tright: 0;\n}\n\n.ui-slider-vertical {\n\twidth: .8em;\n\theight: 100px;\n}\n.ui-slider-vertical .ui-slider-handle {\n\tleft: -.3em;\n\tmargin-left: 0;\n\tmargin-bottom: -.6em;\n}\n.ui-slider-vertical .ui-slider-range {\n\tleft: 0;\n\twidth: 100%;\n}\n.ui-slider-vertical .ui-slider-range-min {\n\tbottom: 0;\n}\n.ui-slider-vertical .ui-slider-range-max {\n\ttop: 0;\n}\n",""])},function(t,e,n){n(2),n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(29),n(85),n(30),n(86),n(87)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Blind 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("blind","hide",function(e,n){var r={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},i=t(this),o=e.direction||"up",a=i.cssClip(),s={clip:t.extend({},a)},u=t.effects.createPlaceholder(i);s.clip[r[o][0]]=s.clip[r[o][1]],"show"===e.mode&&(i.cssClip(s.clip),u&&u.css(t.effects.clipToBox(s)),s.clip=a),u&&u.animate(t.effects.clipToBox(s),e.duration,e.easing),i.animate(s,{queue:!1,duration:e.duration,easing:e.easing,complete:n})})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Bounce 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("bounce",function(e,n){var r,i,o,a=t(this),s=e.mode,u="hide"===s,c="show"===s,l=e.direction||"up",f=e.distance,h=e.times||5,d=2*h+(c||u?1:0),p=e.duration/d,g=e.easing,v="up"===l||"down"===l?"top":"left",m="up"===l||"left"===l,y=0,w=a.queue().length;for(t.effects.createPlaceholder(a),o=a.css(v),f||(f=a["top"===v?"outerHeight":"outerWidth"]()/3),c&&((i={opacity:1})[v]=o,a.css("opacity",0).css(v,m?2*-f:2*f).animate(i,p,g)),u&&(f/=Math.pow(2,h-1)),(i={})[v]=o;y<h;y++)(r={})[v]=(m?"-=":"+=")+f,a.animate(r,p,g).animate(i,p,g),f=u?2*f:f/2;u&&((r={opacity:0})[v]=(m?"-=":"+=")+f,a.animate(r,p,g)),a.queue(n),t.effects.unshift(a,w,d+1)})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Clip 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("clip","hide",function(e,n){var r,i={},o=t(this),a=e.direction||"vertical",s="both"===a,u=s||"horizontal"===a,c=s||"vertical"===a;r=o.cssClip(),i.clip={top:c?(r.bottom-r.top)/2:r.top,right:u?(r.right-r.left)/2:r.right,bottom:c?(r.bottom-r.top)/2:r.bottom,left:u?(r.right-r.left)/2:r.left},t.effects.createPlaceholder(o),"show"===e.mode&&(o.cssClip(i.clip),i.clip=r),o.animate(i,{queue:!1,duration:e.duration,easing:e.easing,complete:n})})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Drop 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("drop","hide",function(e,n){var r,i=t(this),o="show"===e.mode,a=e.direction||"left",s="up"===a||"down"===a?"top":"left",u="up"===a||"left"===a?"-=":"+=",c="+="===u?"-=":"+=",l={opacity:0};t.effects.createPlaceholder(i),r=e.distance||i["top"===s?"outerHeight":"outerWidth"](!0)/2,l[s]=u+r,o&&(i.css(l),l[s]=c+r,l.opacity=1),i.animate(l,{queue:!1,duration:e.duration,easing:e.easing,complete:n})})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Explode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("explode","hide",function(e,n){var r,i,o,a,s,u,c=e.pieces?Math.round(Math.sqrt(e.pieces)):3,l=c,f=t(this),h="show"===e.mode,d=f.show().css("visibility","hidden").offset(),p=Math.ceil(f.outerWidth()/l),g=Math.ceil(f.outerHeight()/c),v=[];function m(){v.push(this),v.length===c*l&&(f.css({visibility:"visible"}),t(v).remove(),n())}for(r=0;r<c;r++)for(a=d.top+r*g,u=r-(c-1)/2,i=0;i<l;i++)o=d.left+i*p,s=i-(l-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-i*p,top:-r*g}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:g,left:o+(h?s*p:0),top:a+(h?u*g:0),opacity:h?0:1}).animate({left:o+(h?0:s*p),top:a+(h?0:u*g),opacity:h?1:0},e.duration||500,e.easing,m)})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Fade 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("fade","toggle",function(e,n){var r="show"===e.mode;t(this).css("opacity",r?0:1).animate({opacity:r?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:n})})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Fold 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("fold","hide",function(e,n){var r=t(this),i=e.mode,o="show"===i,a="hide"===i,s=e.size||15,u=/([0-9]+)%/.exec(s),c=e.horizFirst?["right","bottom"]:["bottom","right"],l=e.duration/2,f=t.effects.createPlaceholder(r),h=r.cssClip(),d={clip:t.extend({},h)},p={clip:t.extend({},h)},g=[h[c[0]],h[c[1]]],v=r.queue().length;u&&(s=parseInt(u[1],10)/100*g[a?0:1]),d.clip[c[0]]=s,p.clip[c[0]]=s,p.clip[c[1]]=0,o&&(r.cssClip(p.clip),f&&f.css(t.effects.clipToBox(p)),p.clip=h),r.queue(function(n){f&&f.animate(t.effects.clipToBox(d),l,e.easing).animate(t.effects.clipToBox(p),l,e.easing),n()}).animate(d,l,e.easing).animate(p,l,e.easing).queue(n),t.effects.unshift(r,v,4)})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Highlight 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("highlight","show",function(e,n){var r=t(this),i={backgroundColor:r.css("backgroundColor")};"hide"===e.mode&&(i.opacity=0),t.effects.saveStyle(r),r.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(i,{queue:!1,duration:e.duration,easing:e.easing,complete:n})})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Puff 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2),n(29)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("puff","hide",function(e,n){var r=t.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150});t.effects.effect.scale.call(this,r,n)})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Pulsate 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("pulsate","show",function(e,n){var r=t(this),i=e.mode,o="show"===i,a=o||"hide"===i,s=2*(e.times||5)+(a?1:0),u=e.duration/s,c=0,l=1,f=r.queue().length;for(!o&&r.is(":visible")||(r.css("opacity",0).show(),c=1);l<s;l++)r.animate({opacity:c},u,e.easing),c=1-c;r.animate({opacity:c},u,e.easing),r.queue(n),t.effects.unshift(r,f,s+1)})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Shake 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("shake",function(e,n){var r=1,i=t(this),o=e.direction||"left",a=e.distance||20,s=e.times||3,u=2*s+1,c=Math.round(e.duration/u),l="up"===o||"down"===o?"top":"left",f="up"===o||"left"===o,h={},d={},p={},g=i.queue().length;for(t.effects.createPlaceholder(i),h[l]=(f?"-=":"+=")+a,d[l]=(f?"+=":"-=")+2*a,p[l]=(f?"-=":"+=")+2*a,i.animate(h,c,e.easing);r<s;r++)i.animate(d,c,e.easing).animate(p,c,e.easing);i.animate(d,c,e.easing).animate(h,c/2,e.easing).queue(n),t.effects.unshift(i,g,u+1)})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Slide 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2)],void 0===(o="function"==typeof(r=function(t){return t.effects.define("slide","show",function(e,n){var r,i,o=t(this),a={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},s=e.mode,u=e.direction||"left",c="up"===u||"down"===u?"top":"left",l="up"===u||"left"===u,f=e.distance||o["top"===c?"outerHeight":"outerWidth"](!0),h={};t.effects.createPlaceholder(o),r=o.cssClip(),i=o.position()[c],h[c]=(l?-1:1)*f+i,h.clip=o.cssClip(),h.clip[a[u][1]]=h.clip[a[u][0]],"show"===s&&(o.cssClip(h.clip),o.css(c,h[c]),h.clip=r,h[c]=i),o.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:n})})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r,i,o;
/*!
 * jQuery UI Effects Transfer 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[n(0),n(1),n(2)],void 0===(o="function"==typeof(r=function(t){var e;return!1!==t.uiBackCompat&&(e=t.effects.define("transfer",function(e,n){t(this).transfer(e,n)})),e})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){"use strict";(function(e){function n(t,n){var r=e("#"+t.elem.id+" .volume-slider").slider("option","value");r=function(t,e){return e<0?function(t,e){return t<e?0:t+e}(t,e):function(t,e){return t>e+t>1?1:t+e}(t,e)}(r,n),e("#"+t.elem.id+" .volume-slider").slider("value",r)}function r(t,n,r,i){n.preventDefault(),e("#"+t.elem.id+" ."+r).is(":visible")?e("#"+t.elem.id+" ."+r).hide():(e("#"+t.elem.id+" ."+r).css({bottom:e("#"+t.elem.id+" .options-container").height(),left:e("#"+t.elem.id+' .btn[data-name="'+i+'"]').offset().left-e("#"+t.elem.id+" .player").offset().left-e("#"+t.elem.id+" ."+r).width()/2}),e("#"+t.elem.id+" ."+r).show())}t.exports={handleKeyEvents:function(t,r){32!==r.keyCode&&75!==r.keyCode||t.handlePlayPause(t),70===r.keyCode&&e("#"+t.elem.id+" .button-fullscreen").click(),38===r.keyCode&&n(t,.1),40===r.keyCode&&n(t,-.1)},handlePlayPauseEvent:function(t){t.avcomponent.canvasInstances[0].isPlaying()?t.avcomponent.canvasInstances[0].pause():(e("#"+t.elem.id+" .playwrapper").is(":visible")&&e("#"+t.elem.id+" .playwrapper").hide(),t.avcomponent.canvasInstances[0].play())},handleFullScreenEvent:function(t){e("#"+t.elem.id+" .moremenu").hide(),e("#"+t.elem.id+" .subtitlemenu").hide()},handleEditorButtonEvent:function(t,e){r(t,e,"moremenu","More")},toggleSubtitlesEvent:function(t,e){r(t,e,"subtitlemenu","Subtitles")},handleSubtitleMenuEvent:function(t,n){e("#"+t.elem.id+" .subtitlemenu").hide();for(var r=e("#"+t.elem.id+" video")[0].textTracks,i=0;i<r.length;i++)e(this).data("language")===r[i].language?r[i].mode="showing":r[i].mode="hidden";n.stopPropagation()},openEditorTypeEvent:function(t,e,n){e.stopPropagation(),window.open(t.editorurl+"?manifest="+encodeURIComponent(t.manifesturl)+"#"+n,"_blank")}}}).call(this,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={locales:[{name:"Български",code:"bg",iso:"bg-BG"},{name:"Čeština",code:"cs",iso:"cs-CZ"},{name:"Dansk",code:"da",iso:"da-DK"},{name:"Deutsch",code:"de",iso:"de-DE"},{name:"Ελληνικά",code:"el",iso:"el-GR"},{name:"English",code:"en",iso:"en-GB"},{name:"Español",code:"es",iso:"es-ES"},{name:"Eesti",code:"et",iso:"et-EE"},{name:"Euskara",code:"eu",iso:"eu-ES"},{name:"Suomi",code:"fi",iso:"fi-FI"},{name:"Français",code:"fr",iso:"fr-FR"},{name:"Gaeilge",code:"ga",iso:"ga-IE"},{name:"Hrvatski",code:"hr",iso:"hr-HR"},{name:"Magyar",code:"hu",iso:"hu-HU"},{name:"Italiano",code:"it",iso:"it-IT"},{name:"Lietuvių",code:"lt",iso:"lt-LT"},{name:"Latviešu",code:"lv",iso:"lv-LV"},{name:"Malti",code:"mt",iso:"mt-MT"},{name:"Nederlands",code:"nl",iso:"nl-NL"},{name:"Polski",code:"pl",iso:"pl-PL"},{name:"Português",code:"pt",iso:"pt-PT"},{name:"Română",code:"ro",iso:"ro-RO"},{name:"Slovenčina",code:"sk",iso:"sk-SK"},{name:"Slovenščina",code:"sl",iso:"sl-SI"},{name:"Svenska",code:"sv",iso:"sv-SE"}]}},function(t){t.exports=JSON.parse('{"en":{"player-play":"Play","player-pause":"Pause","player-fullscreen":"Fullscreen","player-mute":"Mute","player-unmute":"Unmute","player-subtitles":"Subtitles","player-more":"More","player-create-annotations":"Create annotations","player-create-embed":"Create embed","player-create-playlist":"Create playlist","player-create-subtitles":"Create subtitles","player-error":"Error","player-error-loading":"loading aborted","player-error-network":"network error","player-error-decoding":"decoding of media failed","player-error-format":"media format not suppported by this browser","player-error-unknown":"unknown"},"nl":{"player-play":"Afspelen","player-pause":"Pauzeren","player-fullscreen":"Volledig scherm","player-mute":"Dempen","player-unmute":"Dempen opheffen","player-subtitles":"Ondertitels","player-more":"Meer","player-create-annotation":"Maak annotaties","player-create-embed":"Maak een embed","player-create-playlist":"Maak een playlist","player-create-subtitles":"Maak ondertitels","player-error":"Error","player-error-loading":"laden geannuleerd","player-error-network":"netwerk error","player-error-decoding":"media decoderen mislukt","player-error-format":"media formaat wordt niet ondersteund door deze browser","player-error-unknown":"onbekend"}}')}])});