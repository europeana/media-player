!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("europeanamediaplayer",[],e):"object"==typeof exports?exports.europeanamediaplayer=e():t.europeanamediaplayer=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=148)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=void 0,e=[],i={},n={};function o(t,i){for(var n in e){var o=e[n];if(o.context===t&&o.name===i)return o.instance}return null}function r(t,e){return e[t]}function a(t,e,i){t in i&&(i[t]=e)}function s(e,i,n){var o=void 0,r=e.__dashjs_factory_name,a=i[r];if(a){var s=a.instance;if(!a.override)return s.apply({context:i,factory:t},n);for(var l in o=e.apply({context:i},n),s=s.apply({context:i,factory:t,parent:o},n))o.hasOwnProperty(l)&&(o[l]=s[l])}else o=e.apply({context:i},n);return o.getClassName=function(){return r},o}return t={extend:function(t,e,i,n){!n[t]&&e&&(n[t]={instance:e,override:i})},getSingletonInstance:o,setSingletonInstance:function(t,i,n){for(var o in e){var r=e[o];if(r.context===t&&r.name===i)return void(e[o].instance=n)}e.push({name:i,context:t,instance:n})},getSingletonFactory:function(t){var n=r(t.__dashjs_factory_name,i);return n||(n=function(i){var n=void 0;return void 0===i&&(i={}),{getInstance:function(){return n||(n=o(i,t.__dashjs_factory_name)),n||(n=s(t,i,arguments),e.push({name:t.__dashjs_factory_name,context:i,instance:n})),n}}},i[t.__dashjs_factory_name]=n),n},getSingletonFactoryByName:function(t){return r(t,i)},updateSingletonFactory:function(t,e){a(t,e,i)},getClassFactory:function(t){var e=r(t.__dashjs_factory_name,n);return e||(e=function(e){return void 0===e&&(e={}),{create:function(){return s(t,e,arguments)}}},n[t.__dashjs_factory_name]=e),e},getClassFactoryByName:function(t){return r(t,n)},updateClassFactory:function(t,e){a(t,e,n)}}}();e.default=n,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}return n(t,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.UTF8="utf-8",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)"}}]),t}());e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n},a=0;function s(){var t={};function e(e,i,n){var o=-1;return t[e]?(t[e].some(function(t,e){if(t&&t.callback===i&&(!n||n===t.scope))return o=e,!0}),o):o}return{on:function(i,n,o){var r=arguments.length<=3||void 0===arguments[3]?a:arguments[3];if(!i)throw new Error("event type cannot be null or undefined");if(!n||"function"!=typeof n)throw new Error("listener must be a function: "+n);if(!(e(i,n,o)>=0)){t[i]=t[i]||[];var s={callback:n,scope:o,priority:r};t[i].some(function(e,n){if(e&&r>e.priority)return t[i].splice(n,0,s),!0})||t[i].push(s)}},off:function(i,n,o){if(i&&n&&t[i]){var r=e(i,n,o);r<0||(t[i][r]=null)}},trigger:function(e,i){if(e&&t[e]){if((i=i||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");i.type=e,t[e]=t[e].filter(function(t){return t}),t[e].forEach(function(t){return t&&t.callback.call(t.scope,i)})}},reset:function(){t={}}}}s.__dashjs_factory_name="EventBus";var l=r.default.getSingletonFactory(s);l.EVENT_PRIORITY_LOW=a,l.EVENT_PRIORITY_HIGH=5e3,r.default.updateSingletonFactory(s.__dashjs_factory_name,l),e.default=l,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(2)),r=n(i(4)),a=n(i(0)),s=0,l=1,u=2,d=3,h=4,c=5;function f(){var t,e=this.context,i=(0,o.default)(e).getInstance(),n=[],a=void 0,f=void 0,p=void 0,g=void 0;function m(t){return t&&t.bind?t.bind(window.console):window.console.log.bind(window.console)}function v(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];w.apply(void 0,[l,this].concat(e))}function y(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];w.apply(void 0,[u,this].concat(e))}function _(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];w.apply(void 0,[d,this].concat(e))}function b(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];w.apply(void 0,[h,this].concat(e))}function E(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];w.apply(void 0,[c,this].concat(e))}function w(t,e){var o="",s=null;a&&(s=(new Date).getTime(),o+="["+(s-p)+"]"),f&&e&&e.getClassName&&(o+="["+e.getClassName()+"]",e.getType&&(o+="["+e.getType()+"]")),o.length>0&&(o+=" ");for(var l=arguments.length,u=Array(l>2?l-2:0),d=2;d<l;d++)u[d-2]=arguments[d];Array.apply(null,u).forEach(function(t){o+=t+" "}),n[t]&&g>=t&&n[t](o),i.trigger(r.default.LOG,{message:o,level:t})}return t={getLogger:function(t){return{fatal:v.bind(t),error:y.bind(t),warn:_.bind(t),info:b.bind(t),debug:E.bind(t)}},setLogTimestampVisible:function(t){a=t},setCalleeNameVisible:function(t){f=t},setLogToBrowserConsole:function(t){g=t?c:s},getLogToBrowserConsole:function(){return g!==s},setLogLevel:function(t){g=t},getLogLevel:function(){return g}},a=!0,f=!0,g=d,p=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(n[l]=m(window.console.error),n[u]=m(window.console.error),n[d]=m(window.console.warn),n[h]=m(window.console.info),n[c]=m(window.console.debug)),t}f.__dashjs_factory_name="Debug";var p=a.default.getSingletonFactory(f);p.LOG_LEVEL_NONE=s,p.LOG_LEVEL_FATAL=l,p.LOG_LEVEL_ERROR=u,p.LOG_LEVEL_WARNING=d,p.LOG_LEVEL_INFO=h,p.LOG_LEVEL_DEBUG=c,a.default.updateSingletonFactory(f.__dashjs_factory_name,p),e.default=p,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};var o,r=i(183),a=(o=r)&&o.__esModule?o:{default:o},s=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a["default"]),e}());e.default=s,t.exports=e.default},function(t,e,i){var n;
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */!function(e,i){"use strict";"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(e)}("undefined"!=typeof window?window:this,function(i,o){"use strict";var r=[],a=i.document,s=Object.getPrototypeOf,l=r.slice,u=r.concat,d=r.push,h=r.indexOf,c={},f=c.toString,p=c.hasOwnProperty,g=p.toString,m=g.call(Object),v={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},_=function(t){return null!=t&&t===t.window},b={type:!0,src:!0,nonce:!0,noModule:!0};function E(t,e,i){var n,o,r=(i=i||a).createElement("script");if(r.text=t,e)for(n in b)(o=e[n]||e.getAttribute&&e.getAttribute(n))&&r.setAttribute(n,o);i.head.appendChild(r).parentNode.removeChild(r)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[f.call(t)]||"object":typeof t}var T=function(t,e){return new T.fn.init(t,e)},S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function x(t){var e=!!t&&"length"in t&&t.length,i=w(t);return!y(t)&&!_(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}T.fn=T.prototype={jquery:"3.4.1",constructor:T,length:0,toArray:function(){return l.call(this)},get:function(t){return null==t?l.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(t){return this.pushStack(T.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:d,sort:r.sort,splice:r.splice},T.extend=T.fn.extend=function(){var t,e,i,n,o,r,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=t[e],"__proto__"!==e&&a!==n&&(u&&n&&(T.isPlainObject(n)||(o=Array.isArray(n)))?(i=a[e],r=o&&!Array.isArray(i)?[]:o||T.isPlainObject(i)?i:{},o=!1,a[e]=T.extend(u,r,n)):void 0!==n&&(a[e]=n));return a},T.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==f.call(t))&&(!(e=s(t))||"function"==typeof(i=p.call(e,"constructor")&&e.constructor)&&g.call(i)===m)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){E(t,{nonce:e&&e.nonce})},each:function(t,e){var i,n=0;if(x(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(S,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(x(Object(t))?T.merge(i,"string"==typeof t?[t]:t):d.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:h.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;n++)t[o++]=e[n];return t.length=o,t},grep:function(t,e,i){for(var n=[],o=0,r=t.length,a=!i;o<r;o++)!e(t[o],o)!==a&&n.push(t[o]);return n},map:function(t,e,i){var n,o,r=0,a=[];if(x(t))for(n=t.length;r<n;r++)null!=(o=e(t[r],r,i))&&a.push(o);else for(r in t)null!=(o=e(t[r],r,i))&&a.push(o);return u.apply([],a)},guid:1,support:v}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=r[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){c["[object "+e+"]"]=e.toLowerCase()});var C=
/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */
function(t){var e,i,n,o,r,a,s,l,u,d,h,c,f,p,g,m,v,y,_,b="sizzle"+1*new Date,E=t.document,w=0,T=0,S=lt(),x=lt(),C=lt(),I=lt(),A=function(t,e){return t===e&&(h=!0),0},M={}.hasOwnProperty,O=[],D=O.pop,R=O.push,N=O.push,k=O.slice,P=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",U="\\["+F+"*("+B+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+F+"*\\]",j=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",H=new RegExp(F+"+","g"),G=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),z=new RegExp("^"+F+"*,"+F+"*"),Y=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),V=new RegExp(F+"|>"),q=new RegExp(j),W=new RegExp("^"+B+"$"),K={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),it=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},nt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ot=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){c()},at=bt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{N.apply(O=k.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(t){N={apply:O.length?function(t,e){R.apply(t,k.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function st(t,e,n,o){var r,s,u,d,h,p,v,y=e&&e.ownerDocument,w=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return n;if(!o&&((e?e.ownerDocument||e:E)!==f&&c(e),e=e||f,g)){if(11!==w&&(h=$.exec(t)))if(r=h[1]){if(9===w){if(!(u=e.getElementById(r)))return n;if(u.id===r)return n.push(u),n}else if(y&&(u=y.getElementById(r))&&_(e,u)&&u.id===r)return n.push(u),n}else{if(h[2])return N.apply(n,e.getElementsByTagName(t)),n;if((r=h[3])&&i.getElementsByClassName&&e.getElementsByClassName)return N.apply(n,e.getElementsByClassName(r)),n}if(i.qsa&&!I[t+" "]&&(!m||!m.test(t))&&(1!==w||"object"!==e.nodeName.toLowerCase())){if(v=t,y=e,1===w&&V.test(t)){for((d=e.getAttribute("id"))?d=d.replace(nt,ot):e.setAttribute("id",d=b),s=(p=a(t)).length;s--;)p[s]="#"+d+" "+_t(p[s]);v=p.join(","),y=tt.test(t)&&vt(e.parentNode)||e}try{return N.apply(n,y.querySelectorAll(v)),n}catch(e){I(t,!0)}finally{d===b&&e.removeAttribute("id")}}}return l(t.replace(G,"$1"),e,n,o)}function lt(){var t=[];return function e(i,o){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=o}}function ut(t){return t[b]=!0,t}function dt(t){var e=f.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var i=t.split("|"),o=i.length;o--;)n.attrHandle[i[o]]=e}function ct(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function ft(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return ut(function(e){return e=+e,ut(function(i,n){for(var o,r=t([],i.length,e),a=r.length;a--;)i[o=r[a]]&&(i[o]=!(n[o]=i[o]))})})}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=st.support={},r=st.isXML=function(t){var e=t.namespaceURI,i=(t.ownerDocument||t).documentElement;return!X.test(e||i&&i.nodeName||"HTML")},c=st.setDocument=function(t){var e,o,a=t?t.ownerDocument||t:E;return a!==f&&9===a.nodeType&&a.documentElement?(p=(f=a).documentElement,g=!r(f),E!==f&&(o=f.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",rt,!1):o.attachEvent&&o.attachEvent("onunload",rt)),i.attributes=dt(function(t){return t.className="i",!t.getAttribute("className")}),i.getElementsByTagName=dt(function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length}),i.getElementsByClassName=J.test(f.getElementsByClassName),i.getById=dt(function(t){return p.appendChild(t).id=b,!f.getElementsByName||!f.getElementsByName(b).length}),i.getById?(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var i=e.getElementById(t);return i?[i]:[]}}):(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var i,n,o,r=e.getElementById(t);if(r){if((i=r.getAttributeNode("id"))&&i.value===t)return[r];for(o=e.getElementsByName(t),n=0;r=o[n++];)if((i=r.getAttributeNode("id"))&&i.value===t)return[r]}return[]}}),n.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},n.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(i.qsa=J.test(f.querySelectorAll))&&(dt(function(t){p.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+L+")"),t.querySelectorAll("[id~="+b+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]")}),dt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(i.matchesSelector=J.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&dt(function(t){i.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",j)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=J.test(p.compareDocumentPosition),_=e||J.test(p.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return h=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t===f||t.ownerDocument===E&&_(E,t)?-1:e===f||e.ownerDocument===E&&_(E,e)?1:d?P(d,t)-P(d,e):0:4&n?-1:1)}:function(t,e){if(t===e)return h=!0,0;var i,n=0,o=t.parentNode,r=e.parentNode,a=[t],s=[e];if(!o||!r)return t===f?-1:e===f?1:o?-1:r?1:d?P(d,t)-P(d,e):0;if(o===r)return ct(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?ct(a[n],s[n]):a[n]===E?-1:s[n]===E?1:0},f):f},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if((t.ownerDocument||t)!==f&&c(t),i.matchesSelector&&g&&!I[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var n=y.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){I(e,!0)}return st(e,f,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!==f&&c(t),_(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!==f&&c(t);var o=n.attrHandle[e.toLowerCase()],r=o&&M.call(n.attrHandle,e.toLowerCase())?o(t,e,!g):void 0;return void 0!==r?r:i.attributes||!g?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},st.escape=function(t){return(t+"").replace(nt,ot)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,n=[],o=0,r=0;if(h=!i.detectDuplicates,d=!i.sortStable&&t.slice(0),t.sort(A),h){for(;e=t[r++];)e===t[r]&&(o=n.push(r));for(;o--;)t.splice(n[o],1)}return d=null,t},o=st.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=o(e);return i},(n=st.selectors={cacheLength:50,createPseudo:ut,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[3]||t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&q.test(i)&&(e=a(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&S(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(n){var o=st.attr(n,t);return null==o?"!="===e:!e||(o+="","="===e?o===i:"!="===e?o!==i:"^="===e?i&&0===o.indexOf(i):"*="===e?i&&o.indexOf(i)>-1:"$="===e?i&&o.slice(-i.length)===i:"~="===e?(" "+o.replace(H," ")+" ").indexOf(i)>-1:"|="===e&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,o){var r="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var u,d,h,c,f,p,g=r!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s,_=!1;if(m){if(r){for(;g;){for(c=e;c=c[g];)if(s?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(_=(f=(u=(d=(h=(c=m)[b]||(c[b]={}))[c.uniqueID]||(h[c.uniqueID]={}))[t]||[])[0]===w&&u[1])&&u[2],c=f&&m.childNodes[f];c=++f&&c&&c[g]||(_=f=0)||p.pop();)if(1===c.nodeType&&++_&&c===e){d[t]=[w,f,_];break}}else if(y&&(_=f=(u=(d=(h=(c=e)[b]||(c[b]={}))[c.uniqueID]||(h[c.uniqueID]={}))[t]||[])[0]===w&&u[1]),!1===_)for(;(c=++f&&c&&c[g]||(_=f=0)||p.pop())&&((s?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++_||(y&&((d=(h=c[b]||(c[b]={}))[c.uniqueID]||(h[c.uniqueID]={}))[t]=[w,_]),c!==e)););return(_-=o)===n||_%n==0&&_/n>=0}}},PSEUDO:function(t,e){var i,o=n.pseudos[t]||n.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return o[b]?o(e):o.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?ut(function(t,i){for(var n,r=o(t,e),a=r.length;a--;)t[n=P(t,r[a])]=!(i[n]=r[a])}):function(t){return o(t,0,i)}):o}},pseudos:{not:ut(function(t){var e=[],i=[],n=s(t.replace(G,"$1"));return n[b]?ut(function(t,e,i,o){for(var r,a=n(t,null,o,[]),s=t.length;s--;)(r=a[s])&&(t[s]=!(e[s]=r))}):function(t,o,r){return e[0]=t,n(e,null,r,i),e[0]=null,!i.pop()}}),has:ut(function(t){return function(e){return st(t,e).length>0}}),contains:ut(function(t){return t=t.replace(et,it),function(e){return(e.textContent||o(e)).indexOf(t)>-1}}),lang:ut(function(t){return W.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,it).toLowerCase(),function(e){var i;do{if(i=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return Q.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt(function(){return[0]}),last:mt(function(t,e){return[e-1]}),eq:mt(function(t,e,i){return[i<0?i+e:i]}),even:mt(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:mt(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:mt(function(t,e,i){for(var n=i<0?i+e:i>e?e:i;--n>=0;)t.push(n);return t}),gt:mt(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=ft(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=pt(e);function yt(){}function _t(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function bt(t,e,i){var n=e.dir,o=e.next,r=o||n,a=i&&"parentNode"===r,s=T++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||a)return t(e,i,o);return!1}:function(e,i,l){var u,d,h,c=[w,s];if(l){for(;e=e[n];)if((1===e.nodeType||a)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||a)if(d=(h=e[b]||(e[b]={}))[e.uniqueID]||(h[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[n]||e;else{if((u=d[r])&&u[0]===w&&u[1]===s)return c[2]=u[2];if(d[r]=c,c[2]=t(e,i,l))return!0}return!1}}function Et(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function wt(t,e,i,n,o){for(var r,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(r=t[s])&&(i&&!i(r,n,o)||(a.push(r),u&&e.push(s)));return a}function Tt(t,e,i,n,o,r){return n&&!n[b]&&(n=Tt(n)),o&&!o[b]&&(o=Tt(o,r)),ut(function(r,a,s,l){var u,d,h,c=[],f=[],p=a.length,g=r||function(t,e,i){for(var n=0,o=e.length;n<o;n++)st(t,e[n],i);return i}(e||"*",s.nodeType?[s]:s,[]),m=!t||!r&&e?g:wt(g,c,t,s,l),v=i?o||(r?t:p||n)?[]:a:m;if(i&&i(m,v,s,l),n)for(u=wt(v,f),n(u,[],s,l),d=u.length;d--;)(h=u[d])&&(v[f[d]]=!(m[f[d]]=h));if(r){if(o||t){if(o){for(u=[],d=v.length;d--;)(h=v[d])&&u.push(m[d]=h);o(null,v=[],u,l)}for(d=v.length;d--;)(h=v[d])&&(u=o?P(r,h):c[d])>-1&&(r[u]=!(a[u]=h))}}else v=wt(v===a?v.splice(p,v.length):v),o?o(null,a,v,l):N.apply(a,v)})}function St(t){for(var e,i,o,r=t.length,a=n.relative[t[0].type],s=a||n.relative[" "],l=a?1:0,d=bt(function(t){return t===e},s,!0),h=bt(function(t){return P(e,t)>-1},s,!0),c=[function(t,i,n){var o=!a&&(n||i!==u)||((e=i).nodeType?d(t,i,n):h(t,i,n));return e=null,o}];l<r;l++)if(i=n.relative[t[l].type])c=[bt(Et(c),i)];else{if((i=n.filter[t[l].type].apply(null,t[l].matches))[b]){for(o=++l;o<r&&!n.relative[t[o].type];o++);return Tt(l>1&&Et(c),l>1&&_t(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(G,"$1"),i,l<o&&St(t.slice(l,o)),o<r&&St(t=t.slice(o)),o<r&&_t(t))}c.push(i)}return Et(c)}return yt.prototype=n.filters=n.pseudos,n.setFilters=new yt,a=st.tokenize=function(t,e){var i,o,r,a,s,l,u,d=x[t+" "];if(d)return e?0:d.slice(0);for(s=t,l=[],u=n.preFilter;s;){for(a in i&&!(o=z.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),i=!1,(o=Y.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(G," ")}),s=s.slice(i.length)),n.filter)!(o=K[a].exec(s))||u[a]&&!(o=u[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return e?s.length:s?st.error(t):x(t,l).slice(0)},s=st.compile=function(t,e){var i,o=[],r=[],s=C[t+" "];if(!s){for(e||(e=a(t)),i=e.length;i--;)(s=St(e[i]))[b]?o.push(s):r.push(s);(s=C(t,function(t,e){var i=e.length>0,o=t.length>0,r=function(r,a,s,l,d){var h,p,m,v=0,y="0",_=r&&[],b=[],E=u,T=r||o&&n.find.TAG("*",d),S=w+=null==E?1:Math.random()||.1,x=T.length;for(d&&(u=a===f||a||d);y!==x&&null!=(h=T[y]);y++){if(o&&h){for(p=0,a||h.ownerDocument===f||(c(h),s=!g);m=t[p++];)if(m(h,a||f,s)){l.push(h);break}d&&(w=S)}i&&((h=!m&&h)&&v--,r&&_.push(h))}if(v+=y,i&&y!==v){for(p=0;m=e[p++];)m(_,b,a,s);if(r){if(v>0)for(;y--;)_[y]||b[y]||(b[y]=D.call(l));b=wt(b)}N.apply(l,b),d&&!r&&b.length>0&&v+e.length>1&&st.uniqueSort(l)}return d&&(w=S,u=E),_};return i?ut(r):r}(r,o))).selector=t}return s},l=st.select=function(t,e,i,o){var r,l,u,d,h,c="function"==typeof t&&t,f=!o&&a(t=c.selector||t);if(i=i||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===e.nodeType&&g&&n.relative[l[1].type]){if(!(e=(n.find.ID(u.matches[0].replace(et,it),e)||[])[0]))return i;c&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(r=K.needsContext.test(t)?0:l.length;r--&&(u=l[r],!n.relative[d=u.type]);)if((h=n.find[d])&&(o=h(u.matches[0].replace(et,it),tt.test(l[0].type)&&vt(e.parentNode)||e))){if(l.splice(r,1),!(t=o.length&&_t(l)))return N.apply(i,o),i;break}}return(c||s(t,f))(o,e,!g,i,!e||tt.test(t)&&vt(e.parentNode)||e),i},i.sortStable=b.split("").sort(A).join("")===b,i.detectDuplicates=!!h,c(),i.sortDetached=dt(function(t){return 1&t.compareDocumentPosition(f.createElement("fieldset"))}),dt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ht("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),i.attributes&&dt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ht("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),dt(function(t){return null==t.getAttribute("disabled")})||ht(L,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),st}(i);T.find=C,T.expr=C.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=C.uniqueSort,T.text=C.getText,T.isXMLDoc=C.isXML,T.contains=C.contains,T.escapeSelector=C.escape;var I=function(t,e,i){for(var n=[],o=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&T(t).is(i))break;n.push(t)}return n},A=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},M=T.expr.match.needsContext;function O(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function R(t,e,i){return y(e)?T.grep(t,function(t,n){return!!e.call(t,n,t)!==i}):e.nodeType?T.grep(t,function(t){return t===e!==i}):"string"!=typeof e?T.grep(t,function(t){return h.call(e,t)>-1!==i}):T.filter(e,t,i)}T.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?T.find.matchesSelector(n,t)?[n]:[]:T.find.matches(t,T.grep(e,function(t){return 1===t.nodeType}))},T.fn.extend({find:function(t){var e,i,n=this.length,o=this;if("string"!=typeof t)return this.pushStack(T(t).filter(function(){for(e=0;e<n;e++)if(T.contains(o[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)T.find(t,o[e],i);return n>1?T.uniqueSort(i):i},filter:function(t){return this.pushStack(R(this,t||[],!1))},not:function(t){return this.pushStack(R(this,t||[],!0))},is:function(t){return!!R(this,"string"==typeof t&&M.test(t)?T(t):t||[],!1).length}});var N,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,i){var n,o;if(!t)return this;if(i=i||N,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:k.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:a,!0)),D.test(n[1])&&T.isPlainObject(e))for(n in e)y(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(o=a.getElementById(n[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==i.ready?i.ready(t):t(T):T.makeArray(t,this)}).prototype=T.fn,N=T(a);var P=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function F(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(T.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,o=this.length,r=[],a="string"!=typeof t&&T(t);if(!M.test(t))for(;n<o;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&T.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(r.length>1?T.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?h.call(T(t),this[0]):h.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return I(t,"parentNode")},parentsUntil:function(t,e,i){return I(t,"parentNode",i)},next:function(t){return F(t,"nextSibling")},prev:function(t){return F(t,"previousSibling")},nextAll:function(t){return I(t,"nextSibling")},prevAll:function(t){return I(t,"previousSibling")},nextUntil:function(t,e,i){return I(t,"nextSibling",i)},prevUntil:function(t,e,i){return I(t,"previousSibling",i)},siblings:function(t){return A((t.parentNode||{}).firstChild,t)},children:function(t){return A(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(O(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},function(t,e){T.fn[t]=function(i,n){var o=T.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=T.filter(n,o)),this.length>1&&(L[t]||T.uniqueSort(o),P.test(t)&&o.reverse()),this.pushStack(o)}});var B=/[^\x20\t\r\n\f]+/g;function U(t){return t}function j(t){throw t}function H(t,e,i,n){var o;try{t&&y(o=t.promise)?o.call(t).done(e).fail(i):t&&y(o=t.then)?o.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}T.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return T.each(t.match(B)||[],function(t,i){e[i]=!0}),e}(t):T.extend({},t);var e,i,n,o,r=[],a=[],s=-1,l=function(){for(o=o||t.once,n=e=!0;a.length;s=-1)for(i=a.shift();++s<r.length;)!1===r[s].apply(i[0],i[1])&&t.stopOnFalse&&(s=r.length,i=!1);t.memory||(i=!1),e=!1,o&&(r=i?[]:"")},u={add:function(){return r&&(i&&!e&&(s=r.length-1,a.push(i)),function e(i){T.each(i,function(i,n){y(n)?t.unique&&u.has(n)||r.push(n):n&&n.length&&"string"!==w(n)&&e(n)})}(arguments),i&&!e&&l()),this},remove:function(){return T.each(arguments,function(t,e){for(var i;(i=T.inArray(e,r,i))>-1;)r.splice(i,1),i<=s&&s--}),this},has:function(t){return t?T.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=a=[],r=i="",this},disabled:function(){return!r},lock:function(){return o=a=[],i||e||(r=i=""),this},locked:function(){return!!o},fireWith:function(t,i){return o||(i=[t,(i=i||[]).slice?i.slice():i],a.push(i),e||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},T.extend({Deferred:function(t){var e=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return T.Deferred(function(i){T.each(e,function(e,n){var o=y(t[n[4]])&&t[n[4]];r[n[1]](function(){var t=o&&o.apply(this,arguments);t&&y(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,o?[t]:arguments)})}),t=null}).promise()},then:function(t,n,o){var r=0;function a(t,e,n,o){return function(){var s=this,l=arguments,u=function(){var i,u;if(!(t<r)){if((i=n.apply(s,l))===e.promise())throw new TypeError("Thenable self-resolution");u=i&&("object"==typeof i||"function"==typeof i)&&i.then,y(u)?o?u.call(i,a(r,e,U,o),a(r,e,j,o)):(r++,u.call(i,a(r,e,U,o),a(r,e,j,o),a(r,e,U,e.notifyWith))):(n!==U&&(s=void 0,l=[i]),(o||e.resolveWith)(s,l))}},d=o?u:function(){try{u()}catch(i){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(i,d.stackTrace),t+1>=r&&(n!==j&&(s=void 0,l=[i]),e.rejectWith(s,l))}};t?d():(T.Deferred.getStackHook&&(d.stackTrace=T.Deferred.getStackHook()),i.setTimeout(d))}}return T.Deferred(function(i){e[0][3].add(a(0,i,y(o)?o:U,i.notifyWith)),e[1][3].add(a(0,i,y(t)?t:U)),e[2][3].add(a(0,i,y(n)?n:j))}).promise()},promise:function(t){return null!=t?T.extend(t,o):o}},r={};return T.each(e,function(t,i){var a=i[2],s=i[5];o[i[1]]=a.add,s&&a.add(function(){n=s},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(i[3].fire),r[i[0]]=function(){return r[i[0]+"With"](this===r?void 0:this,arguments),this},r[i[0]+"With"]=a.fireWith}),o.promise(r),t&&t.call(r,r),r},when:function(t){var e=arguments.length,i=e,n=Array(i),o=l.call(arguments),r=T.Deferred(),a=function(t){return function(i){n[t]=this,o[t]=arguments.length>1?l.call(arguments):i,--e||r.resolveWith(n,o)}};if(e<=1&&(H(t,r.done(a(i)).resolve,r.reject,!e),"pending"===r.state()||y(o[i]&&o[i].then)))return r.then();for(;i--;)H(o[i],a(i),r.reject);return r.promise()}});var G=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&G.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){i.setTimeout(function(){throw t})};var z=T.Deferred();function Y(){a.removeEventListener("DOMContentLoaded",Y),i.removeEventListener("load",Y),T.ready()}T.fn.ready=function(t){return z.then(t).catch(function(t){T.readyException(t)}),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==t&&--T.readyWait>0||z.resolveWith(a,[T]))}}),T.ready.then=z.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?i.setTimeout(T.ready):(a.addEventListener("DOMContentLoaded",Y),i.addEventListener("load",Y));var V=function(t,e,i,n,o,r,a){var s=0,l=t.length,u=null==i;if("object"===w(i))for(s in o=!0,i)V(t,e,s,i[s],!0,r,a);else if(void 0!==n&&(o=!0,y(n)||(a=!0),u&&(a?(e.call(t,n),e=null):(u=e,e=function(t,e,i){return u.call(T(t),i)})),e))for(;s<l;s++)e(t[s],i,a?n:n.call(t[s],s,e(t[s],i)));return o?t:u?e.call(t):l?e(t[0],i):r},q=/^-ms-/,W=/-([a-z])/g;function K(t,e){return e.toUpperCase()}function X(t){return t.replace(q,"ms-").replace(W,K)}var Q=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Z(){this.expando=T.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Q(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,o=this.cache(t);if("string"==typeof e)o[X(e)]=i;else for(n in e)o[X(n)]=e[n];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][X(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(X):(e=X(e))in n?[e]:e.match(B)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||T.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var J=new Z,$=new Z,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function it(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(i)}catch(t){}$.set(t,e,i)}else i=void 0;return i}T.extend({hasData:function(t){return $.hasData(t)||J.hasData(t)},data:function(t,e,i){return $.access(t,e,i)},removeData:function(t,e){$.remove(t,e)},_data:function(t,e,i){return J.access(t,e,i)},_removeData:function(t,e){J.remove(t,e)}}),T.fn.extend({data:function(t,e){var i,n,o,r=this[0],a=r&&r.attributes;if(void 0===t){if(this.length&&(o=$.get(r),1===r.nodeType&&!J.get(r,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&0===(n=a[i].name).indexOf("data-")&&(n=X(n.slice(5)),it(r,n,o[n]));J.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each(function(){$.set(this,t)}):V(this,function(e){var i;if(r&&void 0===e)return void 0!==(i=$.get(r,t))?i:void 0!==(i=it(r,t))?i:void 0;this.each(function(){$.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){$.remove(this,t)})}}),T.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=J.get(t,e),i&&(!n||Array.isArray(i)?n=J.access(t,e,T.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=T.queue(t,e),n=i.length,o=i.shift(),r=T._queueHooks(t,e);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete r.stop,o.call(t,function(){T.dequeue(t,e)},r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return J.get(t,i)||J.access(t,i,{empty:T.Callbacks("once memory").add(function(){J.remove(t,[e+"queue",i])})})}}),T.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?T.queue(this[0],t):void 0===e?this:this.each(function(){var i=T.queue(this,t,e);T._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&T.dequeue(this,t)})},dequeue:function(t){return this.each(function(){T.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=T.Deferred(),r=this,a=this.length,s=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(i=J.get(r[a],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),o.promise(e)}});var nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ot=new RegExp("^(?:([+-])=|)("+nt+")([a-z%]*)$","i"),rt=["Top","Right","Bottom","Left"],at=a.documentElement,st=function(t){return T.contains(t.ownerDocument,t)},lt={composed:!0};at.getRootNode&&(st=function(t){return T.contains(t.ownerDocument,t)||t.getRootNode(lt)===t.ownerDocument});var ut=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&st(t)&&"none"===T.css(t,"display")},dt=function(t,e,i,n){var o,r,a={};for(r in e)a[r]=t.style[r],t.style[r]=e[r];for(r in o=i.apply(t,n||[]),e)t.style[r]=a[r];return o};function ht(t,e,i,n){var o,r,a=20,s=n?function(){return n.cur()}:function(){return T.css(t,e,"")},l=s(),u=i&&i[3]||(T.cssNumber[e]?"":"px"),d=t.nodeType&&(T.cssNumber[e]||"px"!==u&&+l)&&ot.exec(T.css(t,e));if(d&&d[3]!==u){for(l/=2,u=u||d[3],d=+l||1;a--;)T.style(t,e,d+u),(1-r)*(1-(r=s()/l||.5))<=0&&(a=0),d/=r;d*=2,T.style(t,e,d+u),i=i||[]}return i&&(d=+d||+l||0,o=i[1]?d+(i[1]+1)*i[2]:+i[2],n&&(n.unit=u,n.start=d,n.end=o)),o}var ct={};function ft(t){var e,i=t.ownerDocument,n=t.nodeName,o=ct[n];return o||(e=i.body.appendChild(i.createElement(n)),o=T.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),ct[n]=o,o)}function pt(t,e){for(var i,n,o=[],r=0,a=t.length;r<a;r++)(n=t[r]).style&&(i=n.style.display,e?("none"===i&&(o[r]=J.get(n,"display")||null,o[r]||(n.style.display="")),""===n.style.display&&ut(n)&&(o[r]=ft(n))):"none"!==i&&(o[r]="none",J.set(n,"display",i)));for(r=0;r<a;r++)null!=o[r]&&(t[r].style.display=o[r]);return t}T.fn.extend({show:function(){return pt(this,!0)},hide:function(){return pt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){ut(this)?T(this).show():T(this).hide()})}});var gt=/^(?:checkbox|radio)$/i,mt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,vt=/^$|^module$|\/(?:java|ecma)script/i,yt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function _t(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&O(t,e)?T.merge([t],i):i}function bt(t,e){for(var i=0,n=t.length;i<n;i++)J.set(t[i],"globalEval",!e||J.get(e[i],"globalEval"))}yt.optgroup=yt.option,yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td;var Et,wt,Tt=/<|&#?\w+;/;function St(t,e,i,n,o){for(var r,a,s,l,u,d,h=e.createDocumentFragment(),c=[],f=0,p=t.length;f<p;f++)if((r=t[f])||0===r)if("object"===w(r))T.merge(c,r.nodeType?[r]:r);else if(Tt.test(r)){for(a=a||h.appendChild(e.createElement("div")),s=(mt.exec(r)||["",""])[1].toLowerCase(),l=yt[s]||yt._default,a.innerHTML=l[1]+T.htmlPrefilter(r)+l[2],d=l[0];d--;)a=a.lastChild;T.merge(c,a.childNodes),(a=h.firstChild).textContent=""}else c.push(e.createTextNode(r));for(h.textContent="",f=0;r=c[f++];)if(n&&T.inArray(r,n)>-1)o&&o.push(r);else if(u=st(r),a=_t(h.appendChild(r),"script"),u&&bt(a),i)for(d=0;r=a[d++];)vt.test(r.type||"")&&i.push(r);return h}Et=a.createDocumentFragment().appendChild(a.createElement("div")),(wt=a.createElement("input")).setAttribute("type","radio"),wt.setAttribute("checked","checked"),wt.setAttribute("name","t"),Et.appendChild(wt),v.checkClone=Et.cloneNode(!0).cloneNode(!0).lastChild.checked,Et.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!Et.cloneNode(!0).lastChild.defaultValue;var xt=/^key/,Ct=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,It=/^([^.]*)(?:\.(.+)|)/;function At(){return!0}function Mt(){return!1}function Ot(t,e){return t===function(){try{return a.activeElement}catch(t){}}()==("focus"===e)}function Dt(t,e,i,n,o,r){var a,s;if("object"==typeof e){for(s in"string"!=typeof i&&(n=n||i,i=void 0),e)Dt(t,s,i,n,e[s],r);return t}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=Mt;else if(!o)return t;return 1===r&&(a=o,(o=function(t){return T().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=T.guid++)),t.each(function(){T.event.add(this,e,o,n,i)})}function Rt(t,e,i){i?(J.set(t,e,!1),T.event.add(t,e,{namespace:!1,handler:function(t){var n,o,r=J.get(this,e);if(1&t.isTrigger&&this[e]){if(r.length)(T.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=l.call(arguments),J.set(this,e,r),n=i(this,e),this[e](),r!==(o=J.get(this,e))||n?J.set(this,e,!1):o={},r!==o)return t.stopImmediatePropagation(),t.preventDefault(),o.value}else r.length&&(J.set(this,e,{value:T.event.trigger(T.extend(r[0],T.Event.prototype),r.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===J.get(t,e)&&T.event.add(t,e,At)}T.event={global:{},add:function(t,e,i,n,o){var r,a,s,l,u,d,h,c,f,p,g,m=J.get(t);if(m)for(i.handler&&(i=(r=i).handler,o=r.selector),o&&T.find.matchesSelector(at,o),i.guid||(i.guid=T.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(e){return void 0!==T&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(B)||[""]).length;u--;)f=g=(s=It.exec(e[u])||[])[1],p=(s[2]||"").split(".").sort(),f&&(h=T.event.special[f]||{},f=(o?h.delegateType:h.bindType)||f,h=T.event.special[f]||{},d=T.extend({type:f,origType:g,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&T.expr.match.needsContext.test(o),namespace:p.join(".")},r),(c=l[f])||((c=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,n,p,a)||t.addEventListener&&t.addEventListener(f,a)),h.add&&(h.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),o?c.splice(c.delegateCount++,0,d):c.push(d),T.event.global[f]=!0)},remove:function(t,e,i,n,o){var r,a,s,l,u,d,h,c,f,p,g,m=J.hasData(t)&&J.get(t);if(m&&(l=m.events)){for(u=(e=(e||"").match(B)||[""]).length;u--;)if(f=g=(s=It.exec(e[u])||[])[1],p=(s[2]||"").split(".").sort(),f){for(h=T.event.special[f]||{},c=l[f=(n?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=c.length;r--;)d=c[r],!o&&g!==d.origType||i&&i.guid!==d.guid||s&&!s.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(c.splice(r,1),d.selector&&c.delegateCount--,h.remove&&h.remove.call(t,d));a&&!c.length&&(h.teardown&&!1!==h.teardown.call(t,p,m.handle)||T.removeEvent(t,f,m.handle),delete l[f])}else for(f in l)T.event.remove(t,f+e[u],i,n,!0);T.isEmptyObject(l)&&J.remove(t,"handle events")}},dispatch:function(t){var e,i,n,o,r,a,s=T.event.fix(t),l=new Array(arguments.length),u=(J.get(this,"events")||{})[s.type]||[],d=T.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,s)){for(a=T.event.handlers.call(this,s,u),e=0;(o=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==r.namespace&&!s.rnamespace.test(r.namespace)||(s.handleObj=r,s.data=r.data,void 0!==(n=((T.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,s),s.result}},handlers:function(t,e){var i,n,o,r,a,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&t.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(r=[],a={},i=0;i<l;i++)void 0===a[o=(n=e[i]).selector+" "]&&(a[o]=n.needsContext?T(o,this).index(u)>-1:T.find(o,this,null,[u]).length),a[o]&&r.push(n);r.length&&s.push({elem:u,handlers:r})}return u=this,l<e.length&&s.push({elem:u,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(T.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return gt.test(e.type)&&e.click&&O(e,"input")&&Rt(e,"click",At),!1},trigger:function(t){var e=this||t;return gt.test(e.type)&&e.click&&O(e,"input")&&Rt(e,"click"),!0},_default:function(t){var e=t.target;return gt.test(e.type)&&e.click&&O(e,"input")&&J.get(e,"click")||O(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?At:Mt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Mt,isPropagationStopped:Mt,isImmediatePropagationStopped:Mt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=At,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=At,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=At,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&xt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Ct.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},function(t,e){T.event.special[t]={setup:function(){return Rt(this,t,Ot),!1},trigger:function(){return Rt(this,t),!0},delegateType:e}}),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){T.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,r=t.handleObj;return o&&(o===n||T.contains(n,o))||(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}}),T.fn.extend({on:function(t,e,i,n){return Dt(this,t,e,i,n)},one:function(t,e,i,n){return Dt(this,t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,T(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=Mt),this.each(function(){T.event.remove(this,t,i,e)})}});var Nt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,kt=/<script|<style|<link/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,Lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ft(t,e){return O(t,"table")&&O(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function Bt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Ut(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function jt(t,e){var i,n,o,r,a,s,l,u;if(1===e.nodeType){if(J.hasData(t)&&(r=J.access(t),a=J.set(e,r),u=r.events))for(o in delete a.handle,a.events={},u)for(i=0,n=u[o].length;i<n;i++)T.event.add(e,o,u[o][i]);$.hasData(t)&&(s=$.access(t),l=T.extend({},s),$.set(e,l))}}function Ht(t,e){var i=e.nodeName.toLowerCase();"input"===i&&gt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Gt(t,e,i,n){e=u.apply([],e);var o,r,a,s,l,d,h=0,c=t.length,f=c-1,p=e[0],g=y(p);if(g||c>1&&"string"==typeof p&&!v.checkClone&&Pt.test(p))return t.each(function(o){var r=t.eq(o);g&&(e[0]=p.call(this,o,r.html())),Gt(r,e,i,n)});if(c&&(r=(o=St(e,t[0].ownerDocument,!1,t,n)).firstChild,1===o.childNodes.length&&(o=r),r||n)){for(s=(a=T.map(_t(o,"script"),Bt)).length;h<c;h++)l=o,h!==f&&(l=T.clone(l,!0,!0),s&&T.merge(a,_t(l,"script"))),i.call(t[h],l,h);if(s)for(d=a[a.length-1].ownerDocument,T.map(a,Ut),h=0;h<s;h++)l=a[h],vt.test(l.type||"")&&!J.access(l,"globalEval")&&T.contains(d,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?T._evalUrl&&!l.noModule&&T._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")}):E(l.textContent.replace(Lt,""),l,d))}return t}function zt(t,e,i){for(var n,o=e?T.filter(e,t):t,r=0;null!=(n=o[r]);r++)i||1!==n.nodeType||T.cleanData(_t(n)),n.parentNode&&(i&&st(n)&&bt(_t(n,"script")),n.parentNode.removeChild(n));return t}T.extend({htmlPrefilter:function(t){return t.replace(Nt,"<$1></$2>")},clone:function(t,e,i){var n,o,r,a,s=t.cloneNode(!0),l=st(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(a=_t(s),n=0,o=(r=_t(t)).length;n<o;n++)Ht(r[n],a[n]);if(e)if(i)for(r=r||_t(t),a=a||_t(s),n=0,o=r.length;n<o;n++)jt(r[n],a[n]);else jt(t,s);return(a=_t(s,"script")).length>0&&bt(a,!l&&_t(t,"script")),s},cleanData:function(t){for(var e,i,n,o=T.event.special,r=0;void 0!==(i=t[r]);r++)if(Q(i)){if(e=i[J.expando]){if(e.events)for(n in e.events)o[n]?T.event.remove(i,n):T.removeEvent(i,n,e.handle);i[J.expando]=void 0}i[$.expando]&&(i[$.expando]=void 0)}}}),T.fn.extend({detach:function(t){return zt(this,t,!0)},remove:function(t){return zt(this,t)},text:function(t){return V(this,function(t){return void 0===t?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Gt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ft(this,t).appendChild(t)})},prepend:function(){return Gt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ft(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Gt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Gt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(_t(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return T.clone(this,t,e)})},html:function(t){return V(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!kt.test(t)&&!yt[(mt.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(T.cleanData(_t(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Gt(this,arguments,function(e){var i=this.parentNode;T.inArray(this,t)<0&&(T.cleanData(_t(this)),i&&i.replaceChild(e,this))},t)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){T.fn[t]=function(t){for(var i,n=[],o=T(t),r=o.length-1,a=0;a<=r;a++)i=a===r?this:this.clone(!0),T(o[a])[e](i),d.apply(n,i.get());return this.pushStack(n)}});var Yt=new RegExp("^("+nt+")(?!px)[a-z%]+$","i"),Vt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},qt=new RegExp(rt.join("|"),"i");function Wt(t,e,i){var n,o,r,a,s=t.style;return(i=i||Vt(t))&&(""!==(a=i.getPropertyValue(e)||i[e])||st(t)||(a=T.style(t,e)),!v.pixelBoxStyles()&&Yt.test(a)&&qt.test(e)&&(n=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=o,s.maxWidth=r)),void 0!==a?a+"":a}function Kt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(d){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",at.appendChild(u).appendChild(d);var t=i.getComputedStyle(d);n="1%"!==t.top,l=12===e(t.marginLeft),d.style.right="60%",s=36===e(t.right),o=36===e(t.width),d.style.position="absolute",r=12===e(d.offsetWidth/3),at.removeChild(u),d=null}}function e(t){return Math.round(parseFloat(t))}var n,o,r,s,l,u=a.createElement("div"),d=a.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===d.style.backgroundClip,T.extend(v,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),r}}))}();var Xt=["Webkit","Moz","ms"],Qt=a.createElement("div").style,Zt={};function Jt(t){var e=T.cssProps[t]||Zt[t];return e||(t in Qt?t:Zt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=Xt.length;i--;)if((t=Xt[i]+e)in Qt)return t}(t)||t)}var $t=/^(none|table(?!-c[ea]).+)/,te=/^--/,ee={position:"absolute",visibility:"hidden",display:"block"},ie={letterSpacing:"0",fontWeight:"400"};function ne(t,e,i){var n=ot.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function oe(t,e,i,n,o,r){var a="width"===e?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=T.css(t,i+rt[a],!0,o)),n?("content"===i&&(l-=T.css(t,"padding"+rt[a],!0,o)),"margin"!==i&&(l-=T.css(t,"border"+rt[a]+"Width",!0,o))):(l+=T.css(t,"padding"+rt[a],!0,o),"padding"!==i?l+=T.css(t,"border"+rt[a]+"Width",!0,o):s+=T.css(t,"border"+rt[a]+"Width",!0,o));return!n&&r>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-s-.5))||0),l}function re(t,e,i){var n=Vt(t),o=(!v.boxSizingReliable()||i)&&"border-box"===T.css(t,"boxSizing",!1,n),r=o,a=Wt(t,e,n),s="offset"+e[0].toUpperCase()+e.slice(1);if(Yt.test(a)){if(!i)return a;a="auto"}return(!v.boxSizingReliable()&&o||"auto"===a||!parseFloat(a)&&"inline"===T.css(t,"display",!1,n))&&t.getClientRects().length&&(o="border-box"===T.css(t,"boxSizing",!1,n),(r=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+oe(t,e,i||(o?"border":"content"),r,n,a)+"px"}function ae(t,e,i,n,o){return new ae.prototype.init(t,e,i,n,o)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Wt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,a,s=X(e),l=te.test(e),u=t.style;if(l||(e=Jt(s)),a=T.cssHooks[e]||T.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(o=a.get(t,!1,n))?o:u[e];"string"===(r=typeof i)&&(o=ot.exec(i))&&o[1]&&(i=ht(t,e,o),r="number"),null!=i&&i==i&&("number"!==r||l||(i+=o&&o[3]||(T.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==i||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(i=a.set(t,i,n))||(l?u.setProperty(e,i):u[e]=i))}},css:function(t,e,i,n){var o,r,a,s=X(e);return te.test(e)||(e=Jt(s)),(a=T.cssHooks[e]||T.cssHooks[s])&&"get"in a&&(o=a.get(t,!0,i)),void 0===o&&(o=Wt(t,e,n)),"normal"===o&&e in ie&&(o=ie[e]),""===i||i?(r=parseFloat(o),!0===i||isFinite(r)?r||0:o):o}}),T.each(["height","width"],function(t,e){T.cssHooks[e]={get:function(t,i,n){if(i)return!$t.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?re(t,e,n):dt(t,ee,function(){return re(t,e,n)})},set:function(t,i,n){var o,r=Vt(t),a=!v.scrollboxSize()&&"absolute"===r.position,s=(a||n)&&"border-box"===T.css(t,"boxSizing",!1,r),l=n?oe(t,e,n,s,r):0;return s&&a&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-oe(t,e,"border",!1,r)-.5)),l&&(o=ot.exec(i))&&"px"!==(o[3]||"px")&&(t.style[e]=i,i=T.css(t,e)),ne(0,i,l)}}}),T.cssHooks.marginLeft=Kt(v.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Wt(t,"marginLeft"))||t.getBoundingClientRect().left-dt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(t,e){T.cssHooks[t+e]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];n<4;n++)o[t+rt[n]+e]=r[n]||r[n-2]||r[0];return o}},"margin"!==t&&(T.cssHooks[t+e].set=ne)}),T.fn.extend({css:function(t,e){return V(this,function(t,e,i){var n,o,r={},a=0;if(Array.isArray(e)){for(n=Vt(t),o=e.length;a<o;a++)r[e[a]]=T.css(t,e[a],!1,n);return r}return void 0!==i?T.style(t,e,i):T.css(t,e)},t,e,arguments.length>1)}}),T.Tween=ae,ae.prototype={constructor:ae,init:function(t,e,i,n,o,r){this.elem=t,this.prop=i,this.easing=o||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(T.cssNumber[i]?"":"px")},cur:function(){var t=ae.propHooks[this.prop];return t&&t.get?t.get(this):ae.propHooks._default.get(this)},run:function(t){var e,i=ae.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):ae.propHooks._default.set(this),this}},ae.prototype.init.prototype=ae.prototype,ae.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||!T.cssHooks[t.prop]&&null==t.elem.style[Jt(t.prop)]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}},ae.propHooks.scrollTop=ae.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=ae.prototype.init,T.fx.step={};var se,le,ue=/^(?:toggle|show|hide)$/,de=/queueHooks$/;function he(){le&&(!1===a.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(he):i.setTimeout(he,T.fx.interval),T.fx.tick())}function ce(){return i.setTimeout(function(){se=void 0}),se=Date.now()}function fe(t,e){var i,n=0,o={height:t};for(e=e?1:0;n<4;n+=2-e)o["margin"+(i=rt[n])]=o["padding"+i]=t;return e&&(o.opacity=o.width=t),o}function pe(t,e,i){for(var n,o=(ge.tweeners[e]||[]).concat(ge.tweeners["*"]),r=0,a=o.length;r<a;r++)if(n=o[r].call(i,e,t))return n}function ge(t,e,i){var n,o,r=0,a=ge.prefilters.length,s=T.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=se||ce(),i=Math.max(0,u.startTime+u.duration-e),n=1-(i/u.duration||0),r=0,a=u.tweens.length;r<a;r++)u.tweens[r].run(n);return s.notifyWith(t,[u,n,i]),n<1&&a?i:(a||s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:T.extend({},e),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},i),originalProperties:e,originalOptions:i,startTime:se||ce(),duration:i.duration,tweens:[],createTween:function(e,i){var n=T.Tween(t,u.opts,e,i,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var i=0,n=e?u.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)u.tweens[i].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),d=u.props;for(!function(t,e){var i,n,o,r,a;for(i in t)if(o=e[n=X(i)],r=t[i],Array.isArray(r)&&(o=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),(a=T.cssHooks[n])&&"expand"in a)for(i in r=a.expand(r),delete t[n],r)i in t||(t[i]=r[i],e[i]=o);else e[n]=o}(d,u.opts.specialEasing);r<a;r++)if(n=ge.prefilters[r].call(u,t,d,u.opts))return y(n.stop)&&(T._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return T.map(d,pe,u),y(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),T.fx.timer(T.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u}T.Animation=T.extend(ge,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return ht(i.elem,t,ot.exec(e),i),i}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(B);for(var i,n=0,o=t.length;n<o;n++)i=t[n],ge.tweeners[i]=ge.tweeners[i]||[],ge.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,o,r,a,s,l,u,d,h="width"in e||"height"in e,c=this,f={},p=t.style,g=t.nodeType&&ut(t),m=J.get(t,"fxshow");for(n in i.queue||(null==(a=T._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,T.queue(t,"fx").length||a.empty.fire()})})),e)if(o=e[n],ue.test(o)){if(delete e[n],r=r||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!m||void 0===m[n])continue;g=!0}f[n]=m&&m[n]||T.style(t,n)}if((l=!T.isEmptyObject(e))||!T.isEmptyObject(f))for(n in h&&1===t.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=m&&m.display)&&(u=J.get(t,"display")),"none"===(d=T.css(t,"display"))&&(u?d=u:(pt([t],!0),u=t.style.display||u,d=T.css(t,"display"),pt([t]))),("inline"===d||"inline-block"===d&&null!=u)&&"none"===T.css(t,"float")&&(l||(c.done(function(){p.display=u}),null==u&&(d=p.display,u="none"===d?"":d)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1,f)l||(m?"hidden"in m&&(g=m.hidden):m=J.access(t,"fxshow",{display:u}),r&&(m.hidden=!g),g&&pt([t],!0),c.done(function(){for(n in g||pt([t]),J.remove(t,"fxshow"),f)T.style(t,n,f[n])})),l=pe(g?m[n]:0,n,c),n in m||(m[n]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ge.prefilters.unshift(t):ge.prefilters.push(t)}}),T.speed=function(t,e,i){var n=t&&"object"==typeof t?T.extend({},t):{complete:i||!i&&e||y(t)&&t,duration:t,easing:i&&e||e&&!y(e)&&e};return T.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in T.fx.speeds?n.duration=T.fx.speeds[n.duration]:n.duration=T.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&T.dequeue(this,n.queue)},n},T.fn.extend({fadeTo:function(t,e,i,n){return this.filter(ut).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=T.isEmptyObject(t),r=T.speed(e,i,n),a=function(){var e=ge(this,T.extend({},t),r);(o||J.get(this,"finish"))&&e.stop(!0)};return a.finish=a,o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=T.timers,a=J.get(this);if(o)a[o]&&a[o].stop&&n(a[o]);else for(o in a)a[o]&&a[o].stop&&de.test(o)&&n(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(i),e=!1,r.splice(o,1));!e&&i||T.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=J.get(this),n=i[t+"queue"],o=i[t+"queueHooks"],r=T.timers,a=n?n.length:0;for(i.finish=!0,T.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<a;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),T.each(["toggle","show","hide"],function(t,e){var i=T.fn[e];T.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(fe(e,!0),t,n,o)}}),T.each({slideDown:fe("show"),slideUp:fe("hide"),slideToggle:fe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){T.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),T.timers=[],T.fx.tick=function(){var t,e=0,i=T.timers;for(se=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||T.fx.stop(),se=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){le||(le=!0,he())},T.fx.stop=function(){le=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(t,e){return t=T.fx&&T.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,n){var o=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(o)}})},function(){var t=a.createElement("input"),e=a.createElement("select").appendChild(a.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=a.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var me,ve=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return V(this,T.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){T.removeAttr(this,t)})}}),T.extend({attr:function(t,e,i){var n,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?T.prop(t,e,i):(1===r&&T.isXMLDoc(t)||(o=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?me:void 0)),void 0!==i?null===i?void T.removeAttr(t,e):o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:(t.setAttribute(e,i+""),i):o&&"get"in o&&null!==(n=o.get(t,e))?n:null==(n=T.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&O(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,o=e&&e.match(B);if(o&&1===t.nodeType)for(;i=o[n++];)t.removeAttribute(i)}}),me={set:function(t,e,i){return!1===e?T.removeAttr(t,i):t.setAttribute(i,i),i}},T.each(T.expr.match.bool.source.match(/\w+/g),function(t,e){var i=ve[e]||T.find.attr;ve[e]=function(t,e,n){var o,r,a=e.toLowerCase();return n||(r=ve[a],ve[a]=o,o=null!=i(t,e,n)?a:null,ve[a]=r),o}});var ye=/^(?:input|select|textarea|button)$/i,_e=/^(?:a|area)$/i;function be(t){return(t.match(B)||[]).join(" ")}function Ee(t){return t.getAttribute&&t.getAttribute("class")||""}function we(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(B)||[]}T.fn.extend({prop:function(t,e){return V(this,T.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[T.propFix[t]||t]})}}),T.extend({prop:function(t,e,i){var n,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&T.isXMLDoc(t)||(e=T.propFix[e]||e,o=T.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):ye.test(t.nodeName)||_e.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(t){var e,i,n,o,r,a,s,l=0;if(y(t))return this.each(function(e){T(this).addClass(t.call(this,e,Ee(this)))});if((e=we(t)).length)for(;i=this[l++];)if(o=Ee(i),n=1===i.nodeType&&" "+be(o)+" "){for(a=0;r=e[a++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o!==(s=be(n))&&i.setAttribute("class",s)}return this},removeClass:function(t){var e,i,n,o,r,a,s,l=0;if(y(t))return this.each(function(e){T(this).removeClass(t.call(this,e,Ee(this)))});if(!arguments.length)return this.attr("class","");if((e=we(t)).length)for(;i=this[l++];)if(o=Ee(i),n=1===i.nodeType&&" "+be(o)+" "){for(a=0;r=e[a++];)for(;n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");o!==(s=be(n))&&i.setAttribute("class",s)}return this},toggleClass:function(t,e){var i=typeof t,n="string"===i||Array.isArray(t);return"boolean"==typeof e&&n?e?this.addClass(t):this.removeClass(t):y(t)?this.each(function(i){T(this).toggleClass(t.call(this,i,Ee(this),e),e)}):this.each(function(){var e,o,r,a;if(n)for(o=0,r=T(this),a=we(t);e=a[o++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==i||((e=Ee(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+be(Ee(i))+" ").indexOf(e)>-1)return!0;return!1}});var Te=/\r/g;T.fn.extend({val:function(t){var e,i,n,o=this[0];return arguments.length?(n=y(t),this.each(function(i){var o;1===this.nodeType&&(null==(o=n?t.call(this,i,T(this).val()):t)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=T.map(o,function(t){return null==t?"":t+""})),(e=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))})):o?(e=T.valHooks[o.type]||T.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(o,"value"))?i:"string"==typeof(i=o.value)?i.replace(Te,""):null==i?"":i:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:be(T.text(t))}},select:{get:function(t){var e,i,n,o=t.options,r=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?r+1:o.length;for(n=r<0?l:a?r:0;n<l;n++)if(((i=o[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!O(i.parentNode,"optgroup"))){if(e=T(i).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var i,n,o=t.options,r=T.makeArray(e),a=o.length;a--;)((n=o[a]).selected=T.inArray(T.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=T.inArray(T(t).val(),e)>-1}},v.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),v.focusin="onfocusin"in i;var Se=/^(?:focusinfocus|focusoutblur)$/,xe=function(t){t.stopPropagation()};T.extend(T.event,{trigger:function(t,e,n,o){var r,s,l,u,d,h,c,f,g=[n||a],m=p.call(t,"type")?t.type:t,v=p.call(t,"namespace")?t.namespace.split("."):[];if(s=f=l=n=n||a,3!==n.nodeType&&8!==n.nodeType&&!Se.test(m+T.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),d=m.indexOf(":")<0&&"on"+m,(t=t[T.expando]?t:new T.Event(m,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:T.makeArray(e,[t]),c=T.event.special[m]||{},o||!c.trigger||!1!==c.trigger.apply(n,e))){if(!o&&!c.noBubble&&!_(n)){for(u=c.delegateType||m,Se.test(u+m)||(s=s.parentNode);s;s=s.parentNode)g.push(s),l=s;l===(n.ownerDocument||a)&&g.push(l.defaultView||l.parentWindow||i)}for(r=0;(s=g[r++])&&!t.isPropagationStopped();)f=s,t.type=r>1?u:c.bindType||m,(h=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&h.apply(s,e),(h=d&&s[d])&&h.apply&&Q(s)&&(t.result=h.apply(s,e),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(g.pop(),e)||!Q(n)||d&&y(n[m])&&!_(n)&&((l=n[d])&&(n[d]=null),T.event.triggered=m,t.isPropagationStopped()&&f.addEventListener(m,xe),n[m](),t.isPropagationStopped()&&f.removeEventListener(m,xe),T.event.triggered=void 0,l&&(n[d]=l)),t.result}},simulate:function(t,e,i){var n=T.extend(new T.Event,i,{type:t,isSimulated:!0});T.event.trigger(n,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each(function(){T.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return T.event.trigger(t,e,i,!0)}}),v.focusin||T.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){T.event.simulate(e,t.target,T.event.fix(t))};T.event.special[e]={setup:function(){var n=this.ownerDocument||this,o=J.access(n,e);o||n.addEventListener(t,i,!0),J.access(n,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=J.access(n,e)-1;o?J.access(n,e,o):(n.removeEventListener(t,i,!0),J.remove(n,e))}}});var Ce=i.location,Ie=Date.now(),Ae=/\?/;T.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+t),e};var Me=/\[\]$/,Oe=/\r?\n/g,De=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;function Ne(t,e,i,n){var o;if(Array.isArray(e))T.each(e,function(e,o){i||Me.test(t)?n(t,o):Ne(t+"["+("object"==typeof o&&null!=o?e:"")+"]",o,i,n)});else if(i||"object"!==w(e))n(t,e);else for(o in e)Ne(t+"["+o+"]",e[o],i,n)}T.param=function(t,e){var i,n=[],o=function(t,e){var i=y(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,function(){o(this.name,this.value)});else for(i in t)Ne(i,t[i],e,o);return n.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&Re.test(this.nodeName)&&!De.test(t)&&(this.checked||!gt.test(t))}).map(function(t,e){var i=T(this).val();return null==i?null:Array.isArray(i)?T.map(i,function(t){return{name:e.name,value:t.replace(Oe,"\r\n")}}):{name:e.name,value:i.replace(Oe,"\r\n")}}).get()}});var ke=/%20/g,Pe=/#.*$/,Le=/([?&])_=[^&]*/,Fe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Be=/^(?:GET|HEAD)$/,Ue=/^\/\//,je={},He={},Ge="*/".concat("*"),ze=a.createElement("a");function Ye(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,r=e.toLowerCase().match(B)||[];if(y(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Ve(t,e,i,n){var o={},r=t===He;function a(s){var l;return o[s]=!0,T.each(t[s]||[],function(t,s){var u=s(e,i,n);return"string"!=typeof u||r||o[u]?r?!(l=u):void 0:(e.dataTypes.unshift(u),a(u),!1)}),l}return a(e.dataTypes[0])||!o["*"]&&a("*")}function qe(t,e){var i,n,o=T.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&T.extend(!0,t,n),t}ze.href=Ce.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ge,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?qe(qe(t,T.ajaxSettings),e):qe(T.ajaxSettings,t)},ajaxPrefilter:Ye(je),ajaxTransport:Ye(He),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,o,r,s,l,u,d,h,c,f,p=T.ajaxSetup({},e),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?T(g):T.event,v=T.Deferred(),y=T.Callbacks("once memory"),_=p.statusCode||{},b={},E={},w="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(d){if(!s)for(s={};e=Fe.exec(r);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return d?r:null},setRequestHeader:function(t,e){return null==d&&(t=E[t.toLowerCase()]=E[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==d&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(d)S.always(t[S.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||w;return n&&n.abort(e),x(0,e),this}};if(v.promise(S),p.url=((t||p.url||Ce.href)+"").replace(Ue,Ce.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(B)||[""],null==p.crossDomain){u=a.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=ze.protocol+"//"+ze.host!=u.protocol+"//"+u.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=T.param(p.data,p.traditional)),Ve(je,p,e,S),d)return S;for(c in(h=T.event&&p.global)&&0==T.active++&&T.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Be.test(p.type),o=p.url.replace(Pe,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(ke,"+")):(f=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(Ae.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Le,"$1"),f=(Ae.test(o)?"&":"?")+"_="+Ie+++f),p.url=o+f),p.ifModified&&(T.lastModified[o]&&S.setRequestHeader("If-Modified-Since",T.lastModified[o]),T.etag[o]&&S.setRequestHeader("If-None-Match",T.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ge+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(c,p.headers[c]);if(p.beforeSend&&(!1===p.beforeSend.call(g,S,p)||d))return S.abort();if(w="abort",y.add(p.complete),S.done(p.success),S.fail(p.error),n=Ve(He,p,e,S)){if(S.readyState=1,h&&m.trigger("ajaxSend",[S,p]),d)return S;p.async&&p.timeout>0&&(l=i.setTimeout(function(){S.abort("timeout")},p.timeout));try{d=!1,n.send(b,x)}catch(t){if(d)throw t;x(-1,t)}}else x(-1,"No Transport");function x(t,e,a,s){var u,c,f,b,E,w=e;d||(d=!0,l&&i.clearTimeout(l),n=void 0,r=s||"",S.readyState=t>0?4:0,u=t>=200&&t<300||304===t,a&&(b=function(t,e,i){for(var n,o,r,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(o in s)if(s[o]&&s[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}a||(a=o)}r=r||a}if(r)return r!==l[0]&&l.unshift(r),i[r]}(p,S,a)),b=function(t,e,i,n){var o,r,a,s,l,u={},d=t.dataTypes.slice();if(d[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(r=d.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=d.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=u[l+" "+r]||u["* "+r]))for(o in u)if((s=o.split(" "))[1]===r&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[o]:!0!==u[o]&&(r=s[0],d.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(p,b,S,u),u?(p.ifModified&&((E=S.getResponseHeader("Last-Modified"))&&(T.lastModified[o]=E),(E=S.getResponseHeader("etag"))&&(T.etag[o]=E)),204===t||"HEAD"===p.type?w="nocontent":304===t?w="notmodified":(w=b.state,c=b.data,u=!(f=b.error))):(f=w,!t&&w||(w="error",t<0&&(t=0))),S.status=t,S.statusText=(e||w)+"",u?v.resolveWith(g,[c,w,S]):v.rejectWith(g,[S,w,f]),S.statusCode(_),_=void 0,h&&m.trigger(u?"ajaxSuccess":"ajaxError",[S,p,u?c:f]),y.fireWith(g,[S,w]),h&&(m.trigger("ajaxComplete",[S,p]),--T.active||T.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,i){return T.get(t,e,i,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],function(t,e){T[e]=function(t,i,n,o){return y(i)&&(o=o||n,n=i,i=void 0),T.ajax(T.extend({url:t,type:e,dataType:o,data:i,success:n},T.isPlainObject(t)&&t))}}),T._evalUrl=function(t,e){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){T.globalEval(t,e)}})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return y(t)?this.each(function(e){T(this).wrapInner(t.call(this,e))}):this.each(function(){var e=T(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=y(t);return this.each(function(i){T(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var We={0:200,1223:204},Ke=T.ajaxSettings.xhr();v.cors=!!Ke&&"withCredentials"in Ke,v.ajax=Ke=!!Ke,T.ajaxTransport(function(t){var e,n;if(v.cors||Ke&&!t.crossDomain)return{send:function(o,r){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(a,o[a]);e=function(t){return function(){e&&(e=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(We[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),n=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&i.setTimeout(function(){e&&n()})},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),T.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),T.ajaxTransport("script",function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(n,o){e=T("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&o("error"===t.type?404:200,t.type)}),a.head.appendChild(e[0])},abort:function(){i&&i()}}});var Xe,Qe=[],Ze=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Qe.pop()||T.expando+"_"+Ie++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",function(t,e,n){var o,r,a,s=!1!==t.jsonp&&(Ze.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ze.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ze,"$1"+o):!1!==t.jsonp&&(t.url+=(Ae.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||T.error(o+" was not called"),a[0]},t.dataTypes[0]="json",r=i[o],i[o]=function(){a=arguments},n.always(function(){void 0===r?T(i).removeProp(o):i[o]=r,t[o]&&(t.jsonpCallback=e.jsonpCallback,Qe.push(o)),a&&y(r)&&r(a[0]),a=r=void 0}),"script"}),v.createHTMLDocument=((Xe=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xe.childNodes.length),T.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(v.createHTMLDocument?((n=(e=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,e.head.appendChild(n)):e=a),r=!i&&[],(o=D.exec(t))?[e.createElement(o[1])]:(o=St([t],e,r),r&&r.length&&T(r).remove(),T.merge([],o.childNodes)));var n,o,r},T.fn.load=function(t,e,i){var n,o,r,a=this,s=t.indexOf(" ");return s>-1&&(n=be(t.slice(s)),t=t.slice(0,s)),y(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),a.length>0&&T.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){r=arguments,a.html(n?T("<div>").append(T.parseHTML(t)).find(n):t)}).always(i&&function(t,e){a.each(function(){i.apply(this,r||[t.responseText,e,t])})}),this},T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){T.fn[e]=function(t){return this.on(e,t)}}),T.expr.pseudos.animated=function(t){return T.grep(T.timers,function(e){return t===e.elem}).length},T.offset={setOffset:function(t,e,i){var n,o,r,a,s,l,u=T.css(t,"position"),d=T(t),h={};"static"===u&&(t.style.position="relative"),s=d.offset(),r=T.css(t,"top"),l=T.css(t,"left"),("absolute"===u||"fixed"===u)&&(r+l).indexOf("auto")>-1?(a=(n=d.position()).top,o=n.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),y(e)&&(e=e.call(t,i,T.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+o),"using"in e?e.using.call(t,h):d.css(h)}},T.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){T.offset.setOffset(this,t,e)});var e,i,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],o={top:0,left:0};if("fixed"===T.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((o=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),o.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-T.css(n,"marginTop",!0),left:e.left-o.left-T.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||at})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;T.fn[t]=function(n){return V(this,function(t,n,o){var r;if(_(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===o)return r?r[e]:t[n];r?r.scrollTo(i?r.pageXOffset:o,i?o:r.pageYOffset):t[n]=o},t,n,arguments.length)}}),T.each(["top","left"],function(t,e){T.cssHooks[e]=Kt(v.pixelPosition,function(t,i){if(i)return i=Wt(t,e),Yt.test(i)?T(t).position()[e]+"px":i})}),T.each({Height:"height",Width:"width"},function(t,e){T.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){T.fn[n]=function(o,r){var a=arguments.length&&(i||"boolean"!=typeof o),s=i||(!0===o||!0===r?"margin":"border");return V(this,function(e,i,o){var r;return _(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===o?T.css(e,i,s):T.style(e,i,o,s)},e,a?o:void 0,a)}})}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){T.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),T.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),T.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),T.proxy=function(t,e){var i,n,o;if("string"==typeof e&&(i=t[e],e=t,t=i),y(t))return n=l.call(arguments,2),(o=function(){return t.apply(e||this,n.concat(l.call(arguments)))}).guid=t.guid=t.guid||T.guid++,o},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=O,T.isFunction=y,T.isWindow=_,T.camelCase=X,T.type=w,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(n=function(){return T}.apply(e,[]))||(t.exports=n);var Je=i.jQuery,$e=i.$;return T.noConflict=function(t){return i.$===T&&(i.$=$e),t&&i.jQuery===T&&(i.jQuery=Je),T},o||(i.jQuery=i.$=T),T})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.code=e||null,this.message=i||null,this.data=n||null},t.exports=e.default},function(t,e,i){var n,o,r;o=[i(5)],void 0===(r="function"==typeof(n=function(t){return t.ui=t.ui||{},t.ui.version="1.12.1"})?n.apply(e,o):n)||(t.exports=r)},function(t,e){var i=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=i)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};var o,r=i(110),a=(o=r)&&o.__esModule?o:{default:o},s=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,this.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_MANIFEST="manifest",this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_CONTENT="content",this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.DOWNLOAD_ERROR_ID_XLINK="xlink",this.MANIFEST_ERROR_ID_CODEC_CODE=30,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="buffer is not defined",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : "}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a["default"]),e}());e.default=s,t.exports=e.default},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function t(){n(this,t),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null};o.GET="GET",o.HEAD="HEAD",o.MPD_TYPE="MPD",o.XLINK_EXPANSION_TYPE="XLinkExpansion",o.INIT_SEGMENT_TYPE="InitializationSegment",o.INDEX_SEGMENT_TYPE="IndexSegment",o.MEDIA_SEGMENT_TYPE="MediaSegment",o.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",o.OTHER_TYPE="other",e.HTTPRequest=o,e.HTTPRequestTrace=function t(){n(this,t),this.s=null,this.d=null,this.b=[]}},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7)],void 0===(r="function"==typeof(n=function(t){var e,i="ui-effects-animated",n=t;return t.effects={effect:{}},
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(t,e){var i,n=/^([\-+])=\s*(\d+\.?\d*)/,o=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],r=t.Color=function(e,i,n,o){return new t.Color.fn.parse(e,i,n,o)},a={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},s={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},l=r.support={},u=t("<p>")[0],d=t.each;function h(t,e,i){var n=s[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:n.max<t?n.max:t)}function c(e){var n=r(),s=n._rgba=[];return e=e.toLowerCase(),d(o,function(t,i){var o,r=i.re.exec(e),l=r&&i.parse(r),u=i.space||"rgba";if(l)return o=n[u](l),n[a[u].cache]=o[a[u].cache],s=n._rgba=o._rgba,!1}),s.length?("0,0,0,0"===s.join()&&t.extend(s,i.transparent),n):i[e]}function f(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}u.style.cssText="background-color:rgba(1,1,1,.5)",l.rgba=u.style.backgroundColor.indexOf("rgba")>-1,d(a,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),r.fn=t.extend(r.prototype,{parse:function(e,n,o,s){if(void 0===e)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=t(e).css(n),n=void 0);var l=this,u=t.type(e),f=this._rgba=[];return void 0!==n&&(e=[e,n,o,s],u="array"),"string"===u?this.parse(c(e)||i._default):"array"===u?(d(a.rgba.props,function(t,i){f[i.idx]=h(e[i.idx],i)}),this):"object"===u?(d(a,e instanceof r?function(t,i){e[i.cache]&&(l[i.cache]=e[i.cache].slice())}:function(i,n){var o=n.cache;d(n.props,function(t,i){if(!l[o]&&n.to){if("alpha"===t||null==e[t])return;l[o]=n.to(l._rgba)}l[o][i.idx]=h(e[t],i,!0)}),l[o]&&t.inArray(null,l[o].slice(0,3))<0&&(l[o][3]=1,n.from&&(l._rgba=n.from(l[o])))}),this):void 0},is:function(t){var e=r(t),i=!0,n=this;return d(a,function(t,o){var r,a=e[o.cache];return a&&(r=n[o.cache]||o.to&&o.to(n._rgba)||[],d(o.props,function(t,e){if(null!=a[e.idx])return i=a[e.idx]===r[e.idx]})),i}),i},_space:function(){var t=[],e=this;return d(a,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var i=r(t),n=i._space(),o=a[n],l=0===this.alpha()?r("transparent"):this,u=l[o.cache]||o.to(l._rgba),c=u.slice();return i=i[o.cache],d(o.props,function(t,n){var o=n.idx,r=u[o],a=i[o],l=s[n.type]||{};null!==a&&(null===r?c[o]=a:(l.mod&&(a-r>l.mod/2?r+=l.mod:r-a>l.mod/2&&(r-=l.mod)),c[o]=h((a-r)*e+r,n)))}),this[n](c)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=r(e)._rgba;return r(t.map(i,function(t,e){return(1-n)*o[e]+n*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),r.fn.parse.prototype=r.fn,a.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,o=t[1]/255,r=t[2]/255,a=t[3],s=Math.max(n,o,r),l=Math.min(n,o,r),u=s-l,d=s+l,h=.5*d;return e=l===s?0:n===s?60*(o-r)/u+360:o===s?60*(r-n)/u+120:60*(n-o)/u+240,i=0===u?0:h<=.5?u/d:u/(2-d),[Math.round(e)%360,i,h,null==a?1:a]},a.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],o=t[3],r=n<=.5?n*(1+i):n+i-n*i,a=2*n-r;return[Math.round(255*f(a,r,e+1/3)),Math.round(255*f(a,r,e)),Math.round(255*f(a,r,e-1/3)),o]},d(a,function(e,i){var o=i.props,a=i.cache,s=i.to,l=i.from;r.fn[e]=function(e){if(s&&!this[a]&&(this[a]=s(this._rgba)),void 0===e)return this[a].slice();var i,n=t.type(e),u="array"===n||"object"===n?e:arguments,c=this[a].slice();return d(o,function(t,e){var i=u["object"===n?t:e.idx];null==i&&(i=c[e.idx]),c[e.idx]=h(i,e)}),l?((i=r(l(c)))[a]=c,i):r(c)},d(o,function(i,o){r.fn[i]||(r.fn[i]=function(r){var a,s=t.type(r),l="alpha"===i?this._hsla?"hsla":"rgba":e,u=this[l](),d=u[o.idx];return"undefined"===s?d:("function"===s&&(r=r.call(this,d),s=t.type(r)),null==r&&o.empty?this:("string"===s&&(a=n.exec(r))&&(r=d+parseFloat(a[2])*("+"===a[1]?1:-1)),u[o.idx]=r,this[l](u)))})})}),r.hook=function(e){var i=e.split(" ");d(i,function(e,i){t.cssHooks[i]={set:function(e,n){var o,a,s="";if("transparent"!==n&&("string"!==t.type(n)||(o=c(n)))){if(n=r(o||n),!l.rgba&&1!==n._rgba[3]){for(a="backgroundColor"===i?e.parentNode:e;(""===s||"transparent"===s)&&a&&a.style;)try{s=t.css(a,"backgroundColor"),a=a.parentNode}catch(t){}n=n.blend(s&&"transparent"!==s?s:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(t){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=r(e.elem,i),e.end=r(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},r.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return d(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},i=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(n),function(){var e,i=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function r(e){var i,n,o=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(n=o.length;n--;)"string"==typeof o[i=o[n]]&&(r[t.camelCase(i)]=o[i]);else for(i in o)"string"==typeof o[i]&&(r[i]=o[i]);return r}t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(n.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,n,a,s){var l=t.speed(n,a,s);return this.queue(function(){var n,a=t(this),s=a.attr("class")||"",u=l.children?a.find("*").addBack():a;u=u.map(function(){return{el:t(this),start:r(this)}}),(n=function(){t.each(i,function(t,i){e[i]&&a[i+"Class"](e[i])})})(),u=u.map(function(){return this.end=r(this.el[0]),this.diff=function(e,i){var n,r,a={};for(n in i)r=i[n],e[n]!==r&&(o[n]||!t.fx.step[n]&&isNaN(parseFloat(r))||(a[n]=r));return a}(this.start,this.end),this}),a.attr("class",s),u=u.map(function(){var e=this,i=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,u.get()).done(function(){n(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(a[0])})})},t.fn.extend({addClass:(e=t.fn.addClass,function(i,n,o,r){return n?t.effects.animateClass.call(this,{add:i},n,o,r):e.apply(this,arguments)}),removeClass:function(e){return function(i,n,o,r){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,o,r):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,n,o,r,a){return"boolean"==typeof n||void 0===n?o?t.effects.animateClass.call(this,n?{add:i}:{remove:i},o,r,a):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},n,o,r)}}(t.fn.toggleClass),switchClass:function(e,i,n,o,r){return t.effects.animateClass.call(this,{add:i,remove:e},n,o,r)}})}(),function(){var e;function n(e,i,n,o){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(o=n,n=i,i={}),t.isFunction(n)&&(o=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=o||i.complete,e}function o(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||"string"==typeof e&&!t.effects.effect[e]||!!t.isFunction(e)||"object"==typeof e&&!e.effect}function r(t,e){var i=e.outerWidth(),n=e.outerHeight(),o=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,i,n,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?i:parseFloat(o[2]),bottom:"auto"===o[3]?n:parseFloat(o[3]),left:parseFloat(o[4])||0}}t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=(e=t.expr.filters.animated,function(n){return!!t(n).data(i)||e(n)})),!1!==t.uiBackCompat&&t.extend(t.effects,{save:function(t,e){for(var i=0,n=e.length;i<n;i++)null!==e[i]&&t.data("ui-effects-"+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,n=0,o=e.length;n<o;n++)null!==e[n]&&(i=t.data("ui-effects-"+e[n]),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:e.width(),height:e.height()},r=document.activeElement;try{r.id}catch(t){r=document.body}return e.wrap(n),(e[0]===r||t.contains(e[0],r))&&t(r).trigger("focus"),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(o),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,i,n){return n||(n=i,i="effect"),t.effects.effect[e]=n,t.effects.effect[e].mode=i,n},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==i?(e||100)/100:1,o="vertical"!==i?(e||100)/100:1;return{height:t.height()*o,width:t.width()*n,outerHeight:t.outerHeight()*o,outerWidth:t.outerWidth()*n}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var n=t.queue();e>1&&n.splice.apply(n,[1,0].concat(n.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data("ui-effects-style",t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data("ui-effects-style")||"",t.removeData("ui-effects-style")},mode:function(t,e){var i=t.is(":hidden");return"toggle"===e&&(e=i?"show":"hide"),(i?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createPlaceholder:function(e){var i,n=e.css("position"),o=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",i=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data("ui-effects-placeholder",i)),e.css({position:n,left:o.left,top:o.top}),i},removePlaceholder:function(t){var e="ui-effects-placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,i,n,o){return o=o||{},t.each(i,function(t,i){var r=e.cssUnit(i);r[0]>0&&(o[i]=r[0]*n+r[1])}),o}}),t.fn.extend({effect:function(){var e=n.apply(this,arguments),o=t.effects.effect[e.effect],r=o.mode,a=e.queue,s=a||"fx",l=e.complete,u=e.mode,d=[],h=function(e){var n=t(this),o=t.effects.mode(n,u)||r;n.data(i,!0),d.push(o),r&&("show"===o||o===r&&"hide"===o)&&n.show(),r&&"none"===o||t.effects.saveStyle(n),t.isFunction(e)&&e()};if(t.fx.off||!o)return u?this[u](e.duration,l):this.each(function(){l&&l.call(this)});function c(n){var a=t(this);function s(){t.isFunction(l)&&l.call(a[0]),t.isFunction(n)&&n()}e.mode=d.shift(),!1===t.uiBackCompat||r?"none"===e.mode?(a[u](),s()):o.call(a[0],e,function(){a.removeData(i),t.effects.cleanUp(a),"hide"===e.mode&&a.hide(),s()}):(a.is(":hidden")?"hide"===u:"show"===u)?(a[u](),s()):o.call(a[0],e,s)}return!1===a?this.each(h).each(c):this.queue(s,h).queue(s,c)},show:function(t){return function(e){if(o(e))return t.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(o(e))return t.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(o(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):r(this.css("clip"),this)},transfer:function(e,i){var n=t(this),o=t(e.to),r="fixed"===o.css("position"),a=t("body"),s=r?a.scrollTop():0,l=r?a.scrollLeft():0,u=o.offset(),d={top:u.top-s,left:u.left-l,height:o.innerHeight(),width:o.innerWidth()},h=n.offset(),c=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:h.top-s,left:h.left-l,height:n.innerHeight(),width:n.innerWidth(),position:r?"fixed":"absolute"}).animate(d,e.duration,e.easing,function(){c.remove(),t.isFunction(i)&&i()})}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=r(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),e={},t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}}),t.effects})?n.apply(e,o):n)||(t.exports=r)},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}return n(t,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight"}}]),t}());e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n},a=-1,s={DEFAULT:.5,STRONG:1,WEAK:0};function l(t,e,i){return{quality:void 0===t?a:t,reason:void 0===e?null:e,priority:function(t){var e=s.DEFAULT;return t!==s.DEFAULT&&t!==s.STRONG&&t!==s.WEAK||(e=t),e}(i)}}l.__dashjs_factory_name="SwitchRequest";var u=r.default.getClassFactory(l);u.NO_CHANGE=a,u.PRIORITY=s,r.default.updateClassFactory(l.__dashjs_factory_name,u),e.default=u,t.exports=e.default},function(t,e,i){var n=i(22),o=i(8),r=i(133),a=i(37),s=i(30),l=function(t,e,i){var u,d,h,c=t&l.F,f=t&l.G,p=t&l.S,g=t&l.P,m=t&l.B,v=t&l.W,y=f?o:o[e]||(o[e]={}),_=y.prototype,b=f?n:p?n[e]:(n[e]||{}).prototype;for(u in f&&(i=e),i)(d=!c&&b&&void 0!==b[u])&&s(y,u)||(h=d?b[u]:i[u],y[u]=f&&"function"!=typeof b[u]?i[u]:m&&d?r(h,n):v&&b[u]==h?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):g&&"function"==typeof h?r(Function.call,h):h,g&&((y.virtual||(y.virtual={}))[u]=h,t&l.R&&_&&!_[u]&&a(_,u,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){t.exports=!i(38)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var o=(a=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),r=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[i].concat(r).concat([o]).join("\n")}var a;return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var r=this[o][0];null!=r&&(n[r]=!0)}for(o=0;o<t.length;o++){var a=t[o];null!=a[0]&&n[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="("+a[2]+") and ("+i+")"),e.push(a))}},e}},function(t,e,i){var n,o,r={},a=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),s=function(t){var e={};return function(t,i){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,i);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),l=null,u=0,d=[],h=i(154);function c(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=r[n.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](n.parts[a]);for(;a<n.parts.length;a++)o.parts.push(y(n.parts[a],e))}else{var s=[];for(a=0;a<n.parts.length;a++)s.push(y(n.parts[a],e));r[n.id]={id:n.id,refs:1,parts:s}}}}function f(t,e){for(var i=[],n={},o=0;o<t.length;o++){var r=t[o],a=e.base?r[0]+e.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};n[a]?n[a].parts.push(s):i.push(n[a]={id:a,parts:[s]})}return i}function p(t,e){var i=s(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=d[d.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),d.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(t.insertAt.before,i);i.insertBefore(e,o)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=d.indexOf(t);e>=0&&d.splice(e,1)}function m(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=function(){0;return i.nc}();n&&(t.attrs.nonce=n)}return v(e,t.attrs),p(t,e),e}function v(t,e){Object.keys(e).forEach(function(i){t.setAttribute(i,e[i])})}function y(t,e){var i,n,o,r;if(e.transform&&t.css){if(!(r="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=r}if(e.singleton){var a=u++;i=l||(l=m(e)),n=E.bind(null,i,a,!1),o=E.bind(null,i,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),p(t,e),e}(e),n=function(t,e,i){var n=i.css,o=i.sourceMap,r=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||r)&&(n=h(n));o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([n],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,i,e),o=function(){g(i),i.href&&URL.revokeObjectURL(i.href)}):(i=m(e),n=function(t,e){var i=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),o=function(){g(i)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var i=f(t,e);return c(i,e),function(t){for(var n=[],o=0;o<i.length;o++){var a=i[o];(s=r[a.id]).refs--,n.push(s)}t&&c(f(t,e),e);for(o=0;o<n.length;o++){var s;if(0===(s=n[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete r[s.id]}}}};var _,b=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function E(t,e,i,n){var o=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=b(e,o);else{var r=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function a(){var t=void 0,e=/^[a-z][a-z0-9+\-.]*:/i,i=/^https?:\/\//i,n=/^https:\/\//i,o=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,r=function(t,e){try{return new window.URL(t,e).toString()}catch(e){return t}},a=function(t,e){var i=s;if(!e)return t;if(!d(t))return t;h(t)&&(i=l),c(t)&&(i=u);var n=i(e),o="/"!==n.charAt(n.length-1)&&"/"!==t.charAt(0)?"/":"";return[n,t].join(o)};function s(t){var e=t.indexOf("/"),i=t.lastIndexOf("/");return-1!==e?i===e+1?t:(-1!==t.indexOf("?")&&(t=t.substring(0,t.indexOf("?"))),t.substring(0,i+1)):""}function l(t){var e=t.match(o);return e?e[1]:""}function u(t){var i=t.match(e);return i?i[0]:""}function d(t){return!e.test(t)}function h(t){return d(t)&&"/"===t.charAt(0)}function c(t){return 0===t.indexOf("//")}return function(){try{new window.URL("x","http://y");t=r}catch(t){}finally{t=t||a}}(),{parseBaseUrl:s,parseOrigin:l,parseScheme:u,isRelative:d,isPathAbsolute:h,isSchemeRelative:c,isHTTPURL:function(t){return i.test(t)},isHTTPS:function(t){return n.test(t)},resolve:function(e,i){return t(e,i)}}}a.__dashjs_factory_name="URLUtils",e.default=r.default.getSingletonFactory(a),t.exports=e.default},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=i(160),o=i(161),r=i(97);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return u(this,t,e,i)}function u(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=c(t,e);return t}(t,e,i,n):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,i),o=(t=s(t,n)).write(e,i);o!==n&&(t=t.slice(0,o));return t}(t,e,i):function(t,e){if(l.isBuffer(e)){var i=0|f(e.length);return 0===(t=s(t,i)).length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):c(t,e);if("Buffer"===e.type&&r(e.data))return c(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function d(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(d(e),t=s(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function c(t,e){var i=e.length<0?0:0|f(e.length);t=s(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return G(t).length;default:if(n)return H(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,i);case"utf8":case"utf-8":return C(this,e,i);case"ascii":return A(this,e,i);case"latin1":case"binary":return M(this,e,i);case"base64":return x(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function v(t,e,i,n,o){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=o?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(o)return-1;i=t.length-1}else if(i<0){if(!o)return-1;i=0}if("string"==typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:y(t,e,i,n,o);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):y(t,[e],i,n,o);throw new TypeError("val must be string, number or Buffer")}function y(t,e,i,n,o){var r,a=1,s=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,i/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var d=-1;for(r=i;r<s;r++)if(u(t,r)===u(e,-1===d?0:r-d)){if(-1===d&&(d=r),r-d+1===l)return d*a}else-1!==d&&(r-=r-d),d=-1}else for(i+l>s&&(i=s-l),r=i;r>=0;r--){for(var h=!0,c=0;c<l;c++)if(u(t,r+c)!==u(e,c)){h=!1;break}if(h)return r}return-1}function _(t,e,i,n){i=Number(i)||0;var o=t.length-i;n?(n=Number(n))>o&&(n=o):n=o;var r=e.length;if(r%2!=0)throw new TypeError("Invalid hex string");n>r/2&&(n=r/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[i+a]=s}return a}function b(t,e,i,n){return z(H(e,t.length-i),t,i,n)}function E(t,e,i,n){return z(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function w(t,e,i,n){return E(t,e,i,n)}function T(t,e,i,n){return z(G(e),t,i,n)}function S(t,e,i,n){return z(function(t,e){for(var i,n,o,r=[],a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),n=i>>8,o=i%256,r.push(o),r.push(n);return r}(e,t.length-i),t,i,n)}function x(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function C(t,e,i){i=Math.min(t.length,i);for(var n=[],o=e;o<i;){var r,a,s,l,u=t[o],d=null,h=u>239?4:u>223?3:u>191?2:1;if(o+h<=i)switch(h){case 1:u<128&&(d=u);break;case 2:128==(192&(r=t[o+1]))&&(l=(31&u)<<6|63&r)>127&&(d=l);break;case 3:r=t[o+1],a=t[o+2],128==(192&r)&&128==(192&a)&&(l=(15&u)<<12|(63&r)<<6|63&a)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:r=t[o+1],a=t[o+2],s=t[o+3],128==(192&r)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&r)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(d=l)}null===d?(d=65533,h=1):d>65535&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|1023&d),n.push(d),o+=h}return function(t){var e=t.length;if(e<=I)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=I));return i}(n)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,i){return u(null,t,e,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,i){return function(t,e,i,n){return d(e),e<=0?s(t,e):void 0!==i?"string"==typeof n?s(t,e).fill(i,n):s(t,e).fill(i):s(t,e)}(null,t,e,i)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,o=0,r=Math.min(i,n);o<r;++o)if(t[o]!==e[o]){i=t[o],n=e[o];break}return i<n?-1:n<i?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!r(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=l.allocUnsafe(e),o=0;for(i=0;i<t.length;++i){var a=t[i];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):g.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,i,n,o){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||i>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=i)return 0;if(n>=o)return-1;if(e>=i)return 1;if(this===t)return 0;for(var r=(o>>>=0)-(n>>>=0),a=(i>>>=0)-(e>>>=0),s=Math.min(r,a),u=this.slice(n,o),d=t.slice(e,i),h=0;h<s;++h)if(u[h]!==d[h]){r=u[h],a=d[h];break}return r<a?-1:a<r?1:0},l.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},l.prototype.indexOf=function(t,e,i){return v(this,t,e,i,!0)},l.prototype.lastIndexOf=function(t,e,i){return v(this,t,e,i,!1)},l.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var o=this.length-e;if((void 0===i||i>o)&&(i=o),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var r=!1;;)switch(n){case"hex":return _(this,t,e,i);case"utf8":case"utf-8":return b(this,t,e,i);case"ascii":return E(this,t,e,i);case"latin1":case"binary":return w(this,t,e,i);case"base64":return T(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,i);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),r=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function A(t,e,i){var n="";i=Math.min(t.length,i);for(var o=e;o<i;++o)n+=String.fromCharCode(127&t[o]);return n}function M(t,e,i){var n="";i=Math.min(t.length,i);for(var o=e;o<i;++o)n+=String.fromCharCode(t[o]);return n}function O(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var o="",r=e;r<i;++r)o+=j(t[r]);return o}function D(t,e,i){for(var n=t.slice(e,i),o="",r=0;r<n.length;r+=2)o+=String.fromCharCode(n[r]+256*n[r+1]);return o}function R(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,i,n,o,r){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<r)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function k(t,e,i,n){e<0&&(e=65535+e+1);for(var o=0,r=Math.min(t.length-i,2);o<r;++o)t[i+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function P(t,e,i,n){e<0&&(e=4294967295+e+1);for(var o=0,r=Math.min(t.length-i,4);o<r;++o)t[i+o]=e>>>8*(n?o:3-o)&255}function L(t,e,i,n,o,r){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function F(t,e,i,n,r){return r||L(t,0,i,4),o.write(t,e,i,n,23,4),i+4}function B(t,e,i,n,r){return r||L(t,0,i,8),o.write(t,e,i,n,52,8),i+8}l.prototype.slice=function(t,e){var i,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=l.prototype;else{var o=e-t;i=new l(o,void 0);for(var r=0;r<o;++r)i[r]=this[r+t]}return i},l.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||R(t,e,this.length);for(var n=this[t],o=1,r=0;++r<e&&(o*=256);)n+=this[t+r]*o;return n},l.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||R(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},l.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||R(t,e,this.length);for(var n=this[t],o=1,r=0;++r<e&&(o*=256);)n+=this[t+r]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||R(t,e,this.length);for(var n=e,o=1,r=this[t+--n];n>0&&(o*=256);)r+=this[t+--n]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||N(this,t,e,i,Math.pow(2,8*i)-1,0);var o=1,r=0;for(this[e]=255&t;++r<i&&(o*=256);)this[e+r]=t/o&255;return e+i},l.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||N(this,t,e,i,Math.pow(2,8*i)-1,0);var o=i-1,r=1;for(this[e+o]=255&t;--o>=0&&(r*=256);)this[e+o]=t/r&255;return e+i},l.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*i-1);N(this,t,e,i,o-1,-o)}var r=0,a=1,s=0;for(this[e]=255&t;++r<i&&(a*=256);)t<0&&0===s&&0!==this[e+r-1]&&(s=1),this[e+r]=(t/a>>0)-s&255;return e+i},l.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*i-1);N(this,t,e,i,o-1,-o)}var r=i-1,a=1,s=0;for(this[e+r]=255&t;--r>=0&&(a*=256);)t<0&&0===s&&0!==this[e+r+1]&&(s=1),this[e+r]=(t/a>>0)-s&255;return e+i},l.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,i){return F(this,t,e,!0,i)},l.prototype.writeFloatBE=function(t,e,i){return F(this,t,e,!1,i)},l.prototype.writeDoubleLE=function(t,e,i){return B(this,t,e,!0,i)},l.prototype.writeDoubleBE=function(t,e,i){return B(this,t,e,!1,i)},l.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var o,r=n-i;if(this===t&&i<e&&e<n)for(o=r-1;o>=0;--o)t[o+e]=this[o+i];else if(r<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<r;++o)t[o+e]=this[o+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+r),e);return r},l.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var r;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(r=e;r<i;++r)this[r]=t;else{var a=l.isBuffer(t)?t:H(new l(t,n).toString()),s=a.length;for(r=0;r<i-e;++r)this[r+e]=a[r%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){var i;e=e||1/0;for(var n=t.length,o=null,r=[],a=0;a<n;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!o){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&r.push(239,191,189);continue}o=i;continue}if(i<56320){(e-=3)>-1&&r.push(239,191,189),o=i;continue}i=65536+(o-55296<<10|i-56320)}else o&&(e-=3)>-1&&r.push(239,191,189);if(o=null,i<128){if((e-=1)<0)break;r.push(i)}else if(i<2048){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function G(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,i,n){for(var o=0;o<n&&!(o+i>=e.length||o>=t.length);++o)e[o+i]=t[o];return o}}).call(this,i(12))},function(t,e,i){"use strict";var n=i(48),o=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=h;var r=i(41);r.inherits=i(20);var a=i(100),s=i(64);r.inherits(h,a);for(var l=o(s.prototype),u=0;u<l.length;u++){var d=l[u];h.prototype[d]||(h.prototype[d]=s.prototype[d])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",c)}function c(){this.allowHalfOpen||this._writableState.ended||n.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(49)),a=n(i(106)),s=n(i(201)),l=n(i(53)),u=n(i(71)),d=n(i(2)),h=n(i(4)),c=n(i(42)),f=n(i(0)),p=n(i(3)),g=n(i(72)),m=n(i(6)),v=n(i(9)),y=i(10),_="bufferLoaded",b="bufferStalled",E=.5,w=.5,T=.01,S=22,x="BufferController";function C(t){t=t||{};var e=this.context,i=(0,d.default)(e).getInstance(),n=t.metricsModel,f=t.mediaPlayerModel,C=t.errHandler,I=t.streamController,A=t.mediaController,M=t.adapter,O=t.textController,D=t.abrController,R=t.playbackController,N=t.type,k=t.streamProcessor,P=void 0,L=void 0,F=void 0,B=void 0,U=void 0,j=void 0,H=void 0,G=void 0,z=void 0,Y=void 0,V=void 0,q=void 0,W=void 0,K=void 0,X=void 0,Q=void 0,Z=void 0,J=void 0,$=void 0,tt=void 0,et=void 0;function it(t,i){if(!Q||!t||!k)return null;if(H)try{"function"==typeof(Y=i&&i[N]?(0,a.default)(e).create(H,t,st.bind(this),i[N]):(0,a.default)(e).create(H,t,st.bind(this))).getBuffer().initialize&&Y.getBuffer().initialize(N,k)}catch(t){L.fatal("Caught error on create SourceBuffer: "+t),C.mediaSourceError("Error creating "+N+" source buffer."),C.error(new m.default(v.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,v.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+N))}else Y=(0,s.default)(e).create(st.bind(this));return xt(k.getRepresentationInfo(F).MSETimeOffset),Y}function nt(t){t.fragmentModel===k.getFragmentModel()&&(L.info("Init fragment finished loading saving to",N+"'s init cache"),Q.save(t.chunk),L.debug("Append Init fragment",N," with representationId:",t.chunk.representationId," and quality:",t.chunk.quality,", data size:",t.chunk.bytes.byteLength),rt(t.chunk))}function ot(t){if(t.fragmentModel===k.getFragmentModel()){var i=t.chunk,n=i.bytes,o=i.quality,a=k.getRepresentationInfo(o),s=M.getEventsFor(a.mediaInfo,k),l=M.getEventsFor(a,k);if(s&&s.length>0||l&&l.length>0){var u=function(t,i,n,o){for(var r=Math.max(!i||isNaN(i.startTime)?0:i.startTime,0),a=[],s=[],l=n.concat(o),u=0,d=l.length;u<d;u++)a[l[u].schemeIdUri+"/"+l[u].value]=l[u];var h=(0,c.default)(e).getInstance().parse(t).getBoxes("emsg");for(u=0,d=h.length;u<d;u++){var f=M.getEvent(h[u],a,r);f&&s.push(f)}return s}(n,k.getFragmentModel().getRequests({state:r.default.FRAGMENT_MODEL_EXECUTED,quality:o,index:i.index})[0],s,l);k.addInbandEvents(u)}if(tt){et=i;var d=Y&&Y.getAllBufferRanges();d&&d.length>0&&R.getTimeToStreamEnd()>E&&(L.debug("Clearing buffer because track changed - "+(d.end(d.length-1)+w)),wt([{start:0,end:d.end(d.length-1)+w,force:!0}]))}else rt(i)}}function rt(t){Y.append(t),t.mediaInfo.type===o.default.VIDEO&&i.trigger(h.default.VIDEO_CHUNK_RECEIVED,{chunk:t})}function at(t){if(t&&t.length>0)for(var e=0,i=t.length;e<i;e++)L.debug("Buffered Range for type:",N,":",t.start(e)," - ",t.end(e)," currentTime = ",R.getTime())}function st(t){if(t.error){if(t.error.code===S&&(j=.8*Rt(),L.warn("Quota exceeded for type: "+N+", Critical Buffer: "+j),j>0)){var e=Math.max(.2*j,1),n=j-e;f.setBufferToKeep(parseFloat(e.toFixed(5))),f.setBufferAheadToKeep(parseFloat(n.toFixed(5)))}t.error.code!==S&&Nt()||(L.warn("Clearing playback buffer to overcome quota exceed situation for type: "+N),i.trigger(h.default.QUOTA_EXCEEDED,{sender:P,criticalBufferLevel:j}),ht())}else{(W=t.chunk)&&!isNaN(W.index)&&(G=Math.max(W.index,G),yt());var o=Y.getAllBufferRanges();if(W.segmentType===y.HTTPRequest.MEDIA_SEGMENT_TYPE)at(o),ct();else if(tt){var r=R.getTime();L.debug("AppendToBuffer seek target should be "+r),k.getScheduleController().setSeekTarget(r),M.setIndexHandlerTime(k,r)}var a={sender:P,quality:W.quality,startTime:W.start,index:W.index,bufferedRanges:o};W&&!W.endFragment?i.trigger(h.default.BYTES_APPENDED,a):W&&i.trigger(h.default.BYTES_APPENDED_END_FRAGMENT,a)}}function lt(t){F!==t.newQuality&&N===t.mediaType&&k.getStreamInfo().id===t.streamInfo.id&&(xt(k.getRepresentationInfo(t.newQuality).MSETimeOffset),F=t.newQuality)}function ut(){B&&(J=!0,B=!1,z=Number.POSITIVE_INFINITY),N!==o.default.FRAGMENTED_TEXT?ht():ct()}function dt(){Z=void 0}function ht(){var t=function(){var t=[],e=Y.getAllBufferRanges();if(!e||0===e.length)return t;var i=R.getTime(),n=e.end(e.length-1)+w,o=k.getFragmentModel().getRequests({state:r.default.FRAGMENT_MODEL_EXECUTED,time:i,threshold:T})[0];if(o){var a={start:0,end:o.startTime-E},s=k.getFragmentModel().getRequests({state:r.default.FRAGMENT_MODEL_EXECUTED,time:o.startTime-o.duration/2,threshold:T})[0];s&&s.startTime!=o.startTime&&(a.end=s.startTime),a.start<a.end&&a.end>e.start(0)&&t.push(a);var l={start:o.startTime+o.duration+E,end:n},u=k.getFragmentModel().getRequests({state:r.default.FRAGMENT_MODEL_EXECUTED,time:o.startTime+o.duration+E,threshold:T})[0];u&&u.startTime!==o.startTime&&(l.start=u.startTime+u.duration+E),l.start<l.end&&l.start<n&&t.push(l)}else L.debug("getAllRangesWithSafetyFactor for",N,"- No request found in current time position, removing full buffer 0 -",n),t.push({start:0,end:n});return t}();t&&0!==t.length||ct(),wt(t)}function ct(){(!tt||N===o.default.FRAGMENTED_TEXT&&O.isTextEnabled())&&(mt(),vt())}function ft(){_t()}function pt(){_t()}function gt(t,e){var i=Y.getAllBufferRanges(),n=0,o=0,r=null,a=null,s=0,l=void 0,u=void 0,d=e||.15;if(null!=i){for(u=0,l=i.length;u<l;u++)if(n=i.start(u),o=i.end(u),null===r)s=Math.abs(n-t),t>=n&&t<o?(r=n,a=o):s<=d&&(r=n,a=o);else{if(!((s=n-a)<=d))break;a=o}if(null!==r)return{start:r,end:a}}return null}function mt(){var t,e,n;R&&(t=function(){var t=R.getTime();if(Z){var e=Y.getAllBufferRanges();e&&e.length&&(t=Math.max(e.start(0),Z))}return t}()||0,U=null===(n=gt(t,e))?0:n.end-t,i.trigger(h.default.BUFFER_LEVEL_UPDATED,{sender:P,bufferLevel:U}),_t())}function vt(){k&&I&&k.getStreamInfo()&&(n.addBufferState(N,q,k.getScheduleController().getBufferTarget()),n.addBufferLevel(N,new Date,1e3*U))}function yt(){G>=z-1&&!B&&void 0===Y.discharge&&(B=!0,L.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),i.trigger(h.default.BUFFERING_COMPLETED,{sender:P,streamInfo:k.getStreamInfo()}))}function _t(){"audio"!==N&&"video"!==N||(J&&!B&&R&&R.getTimeToStreamEnd()-U<E&&(J=!1,B=!0,L.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),i.trigger(h.default.BUFFERING_COMPLETED,{sender:P,streamInfo:k.getStreamInfo()})),(!f.getLowLatencyEnabled()&&U<E||0===U)&&!B?bt(b):(B||U>=f.getStableBufferTime())&&bt(_))}function bt(t){q===t||t===b&&0===R.getTime()||N===o.default.FRAGMENTED_TEXT&&!O.isTextEnabled()||(q=t,vt(),i.trigger(h.default.BUFFER_LEVEL_STATE_CHANGED,{sender:P,state:t,mediaType:N,streamInfo:k.getStreamInfo()}),i.trigger(t===_?h.default.BUFFER_LOADED:h.default.BUFFER_EMPTY,{mediaType:N}),L.debug(t===_?"Got enough buffer to start for "+N:"Waiting for more buffer before starting playback for "+N))}function Et(){Y&&N!==o.default.FRAGMENTED_TEXT&&(B||wt(function(){var t=[],e=Y.getAllBufferRanges();if(!e||0===e.length)return t;var i=R.getTime(),n={start:Math.max(0,i-f.getBufferToKeep()),end:i+f.getBufferAheadToKeep()},o=k.getFragmentModel().getRequests({state:r.default.FRAGMENT_MODEL_EXECUTED,time:i,threshold:T})[0];if(o)n.start=Math.min(o.startTime,n.start),n.end=Math.max(o.startTime+o.duration,n.end);else if(0===i&&R.getIsDynamic())return[];if(e.start(0)<=n.start){for(var a={start:0,end:n.start},s=0;s<e.length&&e.end(s)<=n.start;s++)a.end=e.end(s);a.start<a.end&&t.push(a)}if(e.end(e.length-1)>=n.end){var l={start:n.end,end:e.end(e.length-1)+T};l.start<l.end&&t.push(l)}return t}()))}function wt(t){t&&Y&&0!==t.length&&($.push.apply($,t),X||Tt())}function Tt(){if(0===$.length||!Y)return L.debug("Nothing to prune, halt pruning"),$=[],void(X=!1);var t=Y.getBuffer();if(!t||!t.buffered||0===t.buffered.length)return L.debug("SourceBuffer is empty (or does not exist), halt pruning"),$=[],void(X=!1);var e=$.shift();L.debug("Removing",N,"buffer from:",e.start,"to",e.end),X=!0;var i=R.getTime();i<e.end&&(B=!1,G=0,tt||(k.getScheduleController().setSeekTarget(i),M.setIndexHandlerTime(k,i))),Y.remove(e.start,e.end,e.force)}function St(t){Y===t.buffer&&(L.debug("onRemoved buffer from:",t.from,"to",t.to),at(Y.getAllBufferRanges()),0===$.length&&(X=!1),t.unintended&&(L.warn("Detected unintended removal from:",t.from,"to",t.to,"setting index handler time to",t.from),M.setIndexHandlerTime(k,t.from)),X?Tt():(tt?(tt=!1,et&&rt(et)):(L.debug("onRemoved : call updateBufferLevel"),mt()),i.trigger(h.default.BUFFER_CLEARED,{sender:P,from:t.from,to:t.to,unintended:t.unintended,hasEnoughSpaceToAppend:Nt()})))}function xt(t){Y&&Y.updateTimestampOffset&&Y.updateTimestampOffset(t)}function Ct(t){t.sender.getStreamProcessor()!==k||t.error||xt(t.currentRepresentation.MSETimeOffset)}function It(t){t.fragmentModel===k.getFragmentModel()&&(z=t.request.index,yt())}function At(t){var e=Y&&Y.getAllBufferRanges();e&&t.newMediaInfo.type===N&&t.newMediaInfo.streamInfo.id===k.getStreamInfo().id&&(L.info("Track change asked"),A.getSwitchMode(N)===u.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&e&&e.length>0&&R.getTimeToStreamEnd()>E&&(B=!1,z=Number.POSITIVE_INFINITY))}function Mt(){++K*(f.getWallclockTimeUpdateInterval()/1e3)>=f.getBufferPruningInterval()&&(K=0,Et())}function Ot(){_t()}function Dt(t,e){H=t,Y&&e&&"function"==typeof Y.discharge&&(V=Y,it(e))}function Rt(){var t,e=Y.getAllBufferRanges(),i=0,n=void 0;if(!e)return i;for(n=0,t=e.length;n<t;n++)i+=e.end(n)-e.start(n);return i}function Nt(){return Rt()<j}function kt(t,e){j=Number.POSITIVE_INFINITY,q=void 0,F=l.default.QUALITY_DEFAULT,z=Number.POSITIVE_INFINITY,G=0,W=null,B=!1,X=!1,J=!1,U=0,K=0,$=[],Y&&(t||Y.abort(),Y.reset(e),Y=null),tt=!1}return P={getBufferControllerType:function(){return x},initialize:function(t){Dt(t),F=D.getQualityFor(N,k.getStreamInfo()),i.on(h.default.DATA_UPDATE_COMPLETED,Ct,this),i.on(h.default.INIT_FRAGMENT_LOADED,nt,this),i.on(h.default.MEDIA_FRAGMENT_LOADED,ot,this),i.on(h.default.QUALITY_CHANGE_REQUESTED,lt,this),i.on(h.default.STREAM_COMPLETED,It,this),i.on(h.default.PLAYBACK_PLAYING,pt,this),i.on(h.default.PLAYBACK_PROGRESS,ct,this),i.on(h.default.PLAYBACK_TIME_UPDATED,ct,this),i.on(h.default.PLAYBACK_RATE_CHANGED,Ot,this),i.on(h.default.PLAYBACK_SEEKING,ut,this),i.on(h.default.PLAYBACK_SEEKED,dt,this),i.on(h.default.PLAYBACK_STALLED,ft,this),i.on(h.default.WALLCLOCK_TIME_UPDATED,Mt,this),i.on(h.default.CURRENT_TRACK_CHANGED,At,this,d.default.EVENT_PRIORITY_HIGH),i.on(h.default.SOURCEBUFFER_REMOVE_COMPLETED,St,this)},createBuffer:it,dischargePreBuffer:function(){if(Y&&V&&"function"==typeof V.discharge){var t=V.getAllBufferRanges();if(t.length>0){for(var e="Beginning "+N+"PreBuffer discharge, adding buffer for:",i=0;i<t.length;i++)e+=" start: "+t.start(i)+", end: "+t.end(i)+";";L.debug(e)}else L.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var n=V.discharge(),o=null,r=0;r<n.length;r++){var a=n[r],s=Q.extract(a.streamId,a.representationId);s&&(o!==s&&(Y.append(s),o=s),Y.append(a))}V.reset(),V=null}},getType:function(){return N},getStreamProcessor:function(){return k},setSeekStartTime:function(t){Z=t},getBuffer:function(){return Y},setBuffer:function(t){Y=t},getBufferLevel:function(){return U},getRangeAt:gt,setMediaSource:Dt,getMediaSource:function(){return H},getIsBufferingCompleted:function(){return B},switchInitData:function(t,e,n){var o=Q.extract(t,e);tt=!0===n&&n,o?(L.info("Append Init fragment",N," with representationId:",o.representationId," and quality:",o.quality,", data size:",o.bytes.byteLength),rt(o)):i.trigger(h.default.INIT_REQUESTED,{sender:P})},getIsPruningInProgress:function(){return X},reset:function(t,e){i.off(h.default.DATA_UPDATE_COMPLETED,Ct,this),i.off(h.default.QUALITY_CHANGE_REQUESTED,lt,this),i.off(h.default.INIT_FRAGMENT_LOADED,nt,this),i.off(h.default.MEDIA_FRAGMENT_LOADED,ot,this),i.off(h.default.STREAM_COMPLETED,It,this),i.off(h.default.CURRENT_TRACK_CHANGED,At,this),i.off(h.default.PLAYBACK_PLAYING,pt,this),i.off(h.default.PLAYBACK_PROGRESS,ct,this),i.off(h.default.PLAYBACK_TIME_UPDATED,ct,this),i.off(h.default.PLAYBACK_RATE_CHANGED,Ot,this),i.off(h.default.PLAYBACK_SEEKING,ut,this),i.off(h.default.PLAYBACK_SEEKED,dt,this),i.off(h.default.PLAYBACK_STALLED,ft,this),i.off(h.default.WALLCLOCK_TIME_UPDATED,Mt,this),i.off(h.default.SOURCEBUFFER_REMOVE_COMPLETED,St,this),kt(t,e)}},L=(0,p.default)(e).getInstance().getLogger(P),Q=(0,g.default)(e).getInstance(),kt(),P}C.__dashjs_factory_name=x;var I=f.default.getClassFactory(C);I.BUFFER_LOADED=_,I.BUFFER_EMPTY=b,f.default.updateClassFactory(C.__dashjs_factory_name,I),e.default=I,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.action=t.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};n.ACTION_DOWNLOAD="download",n.ACTION_COMPLETE="complete",e.default=n,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unescapeDollarsInTemplate=function(t){return t?t.split("$$").join("$"):t},e.replaceIDForTemplate=function(t,e){if(!e||!t||-1===t.indexOf("$RepresentationID$"))return t;var i=e.toString();return t.split("$RepresentationID$").join(i)},e.replaceTokenForTemplate=l,e.getIndexBasedSegment=function(t,e,i,n){var o,a,l=void 0,u=void 0;u=i.segmentDuration,isNaN(u)&&(u=i.adaptation.period.duration);return o=parseFloat((i.adaptation.period.start+n*u).toFixed(5)),a=parseFloat((o+u).toFixed(5)),(l=new r.default).representation=i,l.duration=u,l.presentationStartTime=o,l.mediaStartTime=t.calcMediaTimeFromPresentationTime(l.presentationStartTime,i),l.availabilityStartTime=t.calcAvailabilityStartTimeFromPresentationTime(l.presentationStartTime,i.adaptation.period.mpd,e),l.availabilityEndTime=t.calcAvailabilityEndTimeFromPresentationTime(a,i.adaptation.period.mpd,e),l.wallStartTime=t.calcWallTimeForSegment(l,e),l.replacementNumber=s(l,n),l.availabilityIdx=n,l},e.getTimeBasedSegment=function(t,e,i,n,o,a,u,d,h,c){var f,p,g=n/a,m=Math.min(o/a,i.adaptation.period.mpd.maxSegmentDuration),v=void 0;return f=t.calcPresentationTimeFromMediaTime(g,i),p=f+m,(v=new r.default).representation=i,v.duration=m,v.mediaStartTime=g,v.presentationStartTime=f,v.availabilityStartTime=i.adaptation.period.mpd.manifest.loadedTime,v.availabilityEndTime=t.calcAvailabilityEndTimeFromPresentationTime(p,i.adaptation.period.mpd,e),v.wallStartTime=t.calcWallTimeForSegment(v,e),v.replacementTime=c||n,v.replacementNumber=s(v,h),u=l(u,"Number",v.replacementNumber),u=l(u,"Time",v.replacementTime),v.media=u,v.mediaRange=d,v.availabilityIdx=h,v},e.getSegmentByIndex=u,e.decideSegmentListRangeForTemplate=function(t,e,i,n,o,r){var a=i.segmentDuration,s=i.adaptation.period.mpd.manifest.minBufferTime,l=i.segmentAvailabilityRange,d={start:t.calcPeriodRelativeTimeFromMpdRelativeTime(i,l?l.start:NaN),end:t.calcPeriodRelativeTimeFromMpdRelativeTime(i,l?l.end:NaN)},h=i.segments,c=2*a,f=r||Math.max(2*s,10*a),p=NaN,g=null,m=void 0,v=void 0;if(d.start=Math.max(d.start,0),e&&!t.isTimeSyncCompleted())return m=Math.floor(d.start/a),v=Math.floor(d.end/a),{start:m,end:v};h&&h.length>0?(g=u(o,i),p=g?t.calcPeriodRelativeTimeFromMpdRelativeTime(i,g.presentationStartTime):o>0?o*a:t.calcPeriodRelativeTimeFromMpdRelativeTime(i,n)):p=o>0?o*a:e?d.end:d.start;return m=Math.floor(Math.max(p-c,d.start)/a),v=Math.floor(Math.min(m+f/a,d.end/a)),{start:m,end:v}};var n,o=i(73),r=(n=o)&&n.__esModule?n:{default:n};function a(t,e){for(;t.length<e;)t="0"+t;return t}function s(t,e){return t.representation.startNumber+e}function l(t,e,i){var n=void 0,o=void 0,r=void 0,s=void 0,l=void 0,u=void 0,d=e.length,h="%0".length;if(!t)return t;for(;;){if((n=t.indexOf("$"+e))<0)return t;if((o=t.indexOf("$",n+d))<0)return t;if((r=t.indexOf("%0",n+d))>n&&r<o)switch(s=t.charAt(o-1),l=parseInt(t.substring(r+h,o-1),10),s){case"d":case"i":case"u":u=a(i.toString(),l);break;case"x":u=a(i.toString(16),l);break;case"X":u=a(i.toString(16),l).toUpperCase();break;case"o":u=a(i.toString(8),l);break;default:return t}else u=i;t=t.substring(0,n)+u+t.substring(o+1)}}function u(t,e){if(!e||!e.segments)return null;var i=e.segments.length,n=void 0,o=void 0;if(t<i&&(n=e.segments[t])&&n.availabilityIdx===t)return n;for(o=0;o<i;o++)if((n=e.segments[o])&&n.availabilityIdx===t)return n;return null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}return n(t,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),t}());e.default=o,t.exports=e.default},function(t,e,i){var n=i(45),o=i(134),r=i(83),a=Object.defineProperty;e.f=i(17)?Object.defineProperty:function(t,e,i){if(n(t),e=r(e,!0),n(i),o)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(136),o=i(85);t.exports=function(t){return n(o(t))}},function(t,e,i){var n=i(15),o=i(8),r=i(38);t.exports=function(t,e){var i=(o.Object||{})[t]||Object[t],a={};a[t]=e(i),n(n.S+n.F*r(function(){i(1)}),"Object",a)}},function(t,e){var i,n,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,u=[],d=!1,h=-1;function c(){d&&l&&(d=!1,l.length?u=l.concat(u):h=-1,u.length&&f())}function f(){if(!d){var t=s(c);d=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,d=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new p(t,e)),1!==u.length||d||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}return n(t,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),t}());e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkParameterType=function(t,e){if(typeof t!==e)throw r.default.BAD_ARGUMENT_ERROR},e.checkInteger=function(t){if(null===t||isNaN(t)||t%1!=0)throw r.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"},e.checkRange=function(t,e,i){if(t<e||t>i)throw r.default.BAD_ARGUMENT_ERROR+" : argument out of range"},e.checkIsVideoOrAudioType=function(t){if("string"!=typeof t||t!==r.default.AUDIO&&t!==r.default.VIDEO)throw r.default.BAD_ARGUMENT_ERROR};var n,o=i(1),r=(n=o)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,null,[{key:"findCencContentProtection",value:function(t){for(var e=null,i=0;i<t.length;++i){var n=t[i];"urn:mpeg:dash:mp4protection:2011"===n.schemeIdUri.toLowerCase()&&"cenc"===n.value.toLowerCase()&&(e=n)}return e}},{key:"getPSSHData",value:function(t){var e=8,i=new DataView(t),n=i.getUint8(e);return e+=20,n>0&&(e+=4+16*i.getUint32(e)),e+=4,t.slice(e)}},{key:"getPSSHForKeySystem",value:function(e,i){var n=t.parsePSSHList(i);return n.hasOwnProperty(e.uuid.toLowerCase())?n[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(t,e){return"pssh"in t?e.decodeArray(t.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(t){if(null===t)return[];for(var e=new DataView(t.buffer||t),i={},n=0;;){var o,r,a=void 0,s=n;if(n>=e.buffer.byteLength)break;if(o=n+e.getUint32(n),n+=4,1886614376===e.getUint32(n))if(n+=4,0===(r=e.getUint8(n))||1===r){n++,n+=3,a="";var l=void 0,u=void 0;for(l=0;l<4;l++)a+=1===(u=e.getUint8(n+l).toString(16)).length?"0"+u:u;for(n+=4,a+="-",l=0;l<2;l++)a+=1===(u=e.getUint8(n+l).toString(16)).length?"0"+u:u;for(n+=2,a+="-",l=0;l<2;l++)a+=1===(u=e.getUint8(n+l).toString(16)).length?"0"+u:u;for(n+=2,a+="-",l=0;l<2;l++)a+=1===(u=e.getUint8(n+l).toString(16)).length?"0"+u:u;for(n+=2,a+="-",l=0;l<6;l++)a+=1===(u=e.getUint8(n+l).toString(16)).length?"0"+u:u;n+=6,a=a.toLowerCase(),e.getUint32(n),n+=4,i[a]=e.buffer.slice(s,o),n=o}else n=o;else n=o}return i}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){var n=i(29),o=i(58);t.exports=i(17)?function(t,e,i){return n.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){var n=i(86)("wks"),o=i(60),r=i(22).Symbol,a="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=a&&r[t]||(a?r:o)("Symbol."+t))}).store=n},function(t,e,i){(e=t.exports=i(100)).Stream=e,e.Readable=e,e.Writable=i(64),e.Duplex=i(24),e.Transform=i(103),e.PassThrough=i(169)},function(t,e,i){(function(t){function i(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===i(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===i(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===i(t)},e.isError=function(t){return"[object Error]"===i(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,i(23).Buffer)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(3)),r=n(i(186)),a=n(i(0)),s=n(i(68)),l=n(i(188));function u(){var t=void 0,e=void 0,i=this.context;function n(t){if(!t)return null;void 0===t.fileStart&&(t.fileStart=0);var e=s.default.parseBuffer(t),n=(0,r.default)(i).create();return n.setData(e),n}function a(t,e){return t[e+3]>>>0|t[e+2]<<8>>>0|t[e+1]<<16>>>0|t[e]<<24>>>0}function u(t,e){return String.fromCharCode(t[e++])+String.fromCharCode(t[e++])+String.fromCharCode(t[e++])+String.fromCharCode(t[e])}return e={parse:n,findLastTopIsoBoxCompleted:function(t,e,i){if(void 0===i&&(i=0),!e||i+8>=e.byteLength)return new l.default(0,!1);for(var n=e instanceof ArrayBuffer?new Uint8Array(e):e,o=void 0,r=0;i<n.byteLength;){var s=a(n,i),d=u(n,i+4);if(0===s)break;i+s<=n.byteLength&&(t.indexOf(d)>=0?o=new l.default(i,!0,s):r=i+s),i+=s}return o||new l.default(r,!1)},getMediaTimescaleFromMoov:function(t){var e=n(t),i=e?e.getBox("mdhd"):void 0;return i?i.timescale:NaN},getSamplesInfo:function(t){if(!t||0===t.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var e,i,o=n(t),r=o.getBoxes("moof"),a=o.getBoxes("mfhd"),s=void 0,l=void 0,u=void 0,d=void 0,h=void 0,c=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,b=void 0;i=o.getBoxes("moof").length,e=a[a.length-1].sequence_number,l=0,h=[];var E=-1,w=-1;for(m=0;m<r.length;m++){var T=r[m],S=T.getChildBoxes("traf");for(p=0;p<S.length;p++){var x=S[p],C=x.getChildBox("tfhd"),I=x.getChildBox("tfdt");d=I.baseMediaDecodeTime;var A=x.getChildBoxes("trun"),M=x.getChildBoxes("subs");for(g=0;g<A.length;g++){var O=A[g];for(l=O.sample_count,_=(C.base_data_offset||0)+(O.data_offset||0),f=0;f<l;f++){s=void 0!==(c=O.samples[f]).sample_duration?c.sample_duration:C.default_sample_duration,u=void 0!==c.sample_size?c.sample_size:C.default_sample_size;var D={dts:d,cts:d+(void 0!==c.sample_composition_time_offset?c.sample_composition_time_offset:0),duration:s,offset:T.offset+_,size:u,subSizes:[u]};if(M)for(v=0;v<M.length;v++){var R=M[v];if(E<R.entry_count-1&&f>w&&(E++,w+=R.entries[E].sample_delta),f==w){D.subSizes=[];var N=R.entries[E];for(y=0;y<N.subsample_count;y++)D.subSizes.push(N.subsamples[y].subsample_size)}}h.push(D),_+=u,d+=s}}b=d-I.baseMediaDecodeTime}}return{sampleList:h,lastSequenceNumber:e,totalDuration:b,numSequences:i}},findInitRange:function(e){var i=null,o=n(e);if(!o)return i;var r=o.getBox("ftyp"),a=o.getBox("moov");return t.debug("Searching for initialization."),a&&a.isComplete&&(i=(r?r.offset:a.offset)+"-"+(a.offset+a.size-1),t.debug("Found the initialization.  Range: "+i)),i}},t=(0,o.default)(i).getInstance().getLogger(e),e}u.__dashjs_factory_name="BoxParser",e.default=a.default.getSingletonFactory(u),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(75)),a=n(i(227)),s=i(10),l=n(i(0)),u=n(i(9)),d=n(i(6));function h(t){t=t||{};var e,i,n,l=this.context,h=t.errHandler,c=t.metricsModel,f=t.mediaPlayerModel,p=t.requestModifier,g=t.boxParser,m=t.useFetch||!1,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0;return e={load:function(t){t.request&&function t(e,i){var n=e.request,o=[],u=!0,w=!0,T=new Date,S=T,x=0,C=void 0;if(!p||!c||!h)throw new Error("config object is not correct or missing");var I=function(t){w=!1,n.requestStartDate=T,n.requestEndDate=new Date,n.firstByteDate=n.firstByteDate||T,n.checkExistenceOnly||(c.addHttpRequest(n.mediaType,null,n.type,n.url,C.response?C.response.responseURL:null,n.serviceLocation||null,n.range||null,n.requestStartDate,n.firstByteDate,n.requestEndDate,C.response?C.response.status:null,n.duration,C.response&&C.response.getAllResponseHeaders?C.response.getAllResponseHeaders():C.response?C.response.responseHeaders:[],t?o:null),n.type===s.HTTPRequest.MPD_TYPE&&c.addManifestUpdate("stream",n.type,n.requestStartDate,n.requestEndDate))},A=function(){-1!==v.indexOf(C)&&(v.splice(v.indexOf(C),1),w&&(I(!1),i>0?function(){i--;var o={config:e};_.push(o),o.timeout=setTimeout(function(){-1!==_.indexOf(o)&&(_.splice(_.indexOf(o),1),t(e,i))},f.getRetryIntervalForType(n.type))}():(h.downloadError(b[n.type],n.url,n),h.error(new d.default(E[n.type],n.url+" is not available",{request:n,response:C.response})),e.error&&e.error(n,"error",C.response.statusText),e.complete&&e.complete(n,C.response.statusText))))},M=void 0;M=m&&window.fetch&&"arraybuffer"===n.responseType&&n.type===s.HTTPRequest.MEDIA_SEGMENT_TYPE?(0,a.default)(l).create({requestModifier:p,boxParser:g}):(0,r.default)(l).create({requestModifier:p,boxParser:g});var O=p.modifyRequestURL(n.url),D=n.checkExistenceOnly?s.HTTPRequest.HEAD:s.HTTPRequest.GET,R=f.getXHRWithCredentialsForType(n.type);C={url:O,method:D,withCredentials:R,request:n,onload:function(){C.response.status>=200&&C.response.status<=299&&(I(!0),e.success&&e.success(C.response.response,C.response.statusText,C.response.responseURL),e.complete&&e.complete(n,C.response.statusText))},onend:A,onerror:A,progress:function(t){var i=new Date;u&&(u=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(n.firstByteDate=i)),t.lengthComputable&&(n.bytesLoaded=t.loaded,n.bytesTotal=t.total),t.noTrace||(o.push({s:S,d:t.time?t.time:i.getTime()-S.getTime(),b:[t.loaded?t.loaded-x:0]}),S=i,x=t.loaded),e.progress&&t&&e.progress(t)},onabort:function(){e.abort&&e.abort(n)},loader:M};var N,k=(new Date).getTime();isNaN(n.delayLoadingTime)||k>=n.delayLoadingTime?(v.push(C),M.load(C)):(N={httpRequest:C},y.push(N),N.delayTimeout=setTimeout(function(){if(-1!==y.indexOf(N)){y.splice(y.indexOf(N),1);try{T=new Date,S=T,v.push(N.httpRequest),M.load(N.httpRequest)}catch(t){N.httpRequest.onerror()}}},n.delayLoadingTime-k))}(t,f.getRetryAttemptsForType(t.request.type))},abort:function(){_.forEach(function(t){clearTimeout(t.timeout),t.config.request&&t.config.abort&&t.config.abort(t.config.request)}),_=[],y.forEach(function(t){return clearTimeout(t.delayTimeout)}),y=[],v.forEach(function(t){t.onloadend=t.onerror=t.onprogress=void 0,t.loader.abort(t),t.onabort()}),v=[]}},v=[],y=[],_=[],o(i={},s.HTTPRequest.MPD_TYPE,u.default.DOWNLOAD_ERROR_ID_MANIFEST),o(i,s.HTTPRequest.XLINK_EXPANSION_TYPE,u.default.DOWNLOAD_ERROR_ID_XLINK),o(i,s.HTTPRequest.INIT_SEGMENT_TYPE,u.default.DOWNLOAD_ERROR_ID_INITIALIZATION),o(i,s.HTTPRequest.MEDIA_SEGMENT_TYPE,u.default.DOWNLOAD_ERROR_ID_CONTENT),o(i,s.HTTPRequest.INDEX_SEGMENT_TYPE,u.default.DOWNLOAD_ERROR_ID_CONTENT),o(i,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,u.default.DOWNLOAD_ERROR_ID_CONTENT),o(i,s.HTTPRequest.OTHER_TYPE,u.default.DOWNLOAD_ERROR_ID_CONTENT),b=i,o(n={},s.HTTPRequest.MPD_TYPE,u.default.DOWNLOAD_ERROR_ID_MANIFEST_CODE),o(n,s.HTTPRequest.XLINK_EXPANSION_TYPE,u.default.DOWNLOAD_ERROR_ID_XLINK_CODE),o(n,s.HTTPRequest.INIT_SEGMENT_TYPE,u.default.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),o(n,s.HTTPRequest.MEDIA_SEGMENT_TYPE,u.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),o(n,s.HTTPRequest.INDEX_SEGMENT_TYPE,u.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),o(n,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,u.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),o(n,s.HTTPRequest.OTHER_TYPE,u.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),E=n,e}h.__dashjs_factory_name="HTTPLoader";var c=l.default.getClassFactory(h);e.default=c,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};var o,r=i(110),a=(o=r)&&o.__esModule?o:{default:o},s=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a["default"]),e}());e.default=s,t.exports=e.default},function(t,e,i){var n=i(16);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){var n=i(142),o=i(92);t.exports=Object.keys||function(t){return n(t,o)}},function(t,e,i){var n=i(85);t.exports=function(t){return Object(n(t))}},function(t,e,i){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,i,n,o){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var r,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,i)});case 3:return e.nextTick(function(){t.call(null,i,n)});case 4:return e.nextTick(function(){t.call(null,i,n,o)});default:for(r=new Array(s-1),a=0;a<r.length;)r[a++]=arguments[a];return e.nextTick(function(){t.apply(null,r)})}}}:t.exports=e}).call(this,i(33))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(2)),r=n(i(4)),a=n(i(0)),s=n(i(26)),l=n(i(3)),u="loading",d="executed",h="failed";function c(t){t=t||{};var e=this.context,i=(0,o.default)(e).getInstance(),n=t.metricsModel,a=t.fragmentLoader,c=void 0,f=void 0,p=void 0,g=void 0,m=void 0;function v(t){var e;return!!t&&(e=!1,g.some(function(i){if(n=t,o=i,!isNaN(n.index)&&n.startTime===o.startTime&&n.adaptationIndex===o.adaptationIndex&&n.type===o.type||function(t,e){return isNaN(t.index)&&isNaN(e.index)&&t.quality===e.quality}(t,i)||function(t,e){return t.action===s.default.ACTION_COMPLETE&&t.action===e.action}(t,i))return e=!0;var n,o}),e)}function y(t){return isNaN(t.duration)?.25:Math.min(t.duration/8,.5)}function _(t){g=g.filter(function(e){var i=y(e);return isNaN(e.startTime)||void 0!==t&&e.startTime>=t-i})}function b(t,e){e<=t+.5||(g=g.filter(function(i){var n=y(i);return isNaN(i.startTime)||i.startTime>=e-n||isNaN(i.duration)||i.startTime+i.duration<=t+n}))}function E(t,e,i){for(var n=t.length-1;n>=0;n--){var o=t[n],r=o.startTime,a=r+o.duration;if(i=isNaN(i)?y(o):i,!isNaN(r)&&!isNaN(a)&&e+i>=r&&e-i<a||isNaN(r)&&isNaN(e))return o}return null}function w(t,e){n.addSchedulingInfo(t.mediaType,new Date,t.type,t.startTime,t.availabilityStartTime,t.duration,t.quality,t.range,e),n.addRequestsQueue(t.mediaType,m,g)}function T(t){t.sender===a&&(m.splice(m.indexOf(t.request),1),t.response&&!t.error&&g.push(t.request),w(t.request,t.error?h:d),i.trigger(r.default.FRAGMENT_LOADING_COMPLETED,{request:t.request,response:t.response,error:t.error,sender:this}))}function S(t){t.sender===a&&i.trigger(r.default.FRAGMENT_LOADING_PROGRESS,{request:t.request,response:t.response,error:t.error,sender:this})}function x(t){t.sender===a&&i.trigger(r.default.FRAGMENT_LOADING_ABANDONED,{streamProcessor:this.getStreamProcessor(),request:t.request,mediaType:t.mediaType})}function C(){g=[],m=[]}return c={setStreamProcessor:function(t){p=t},getStreamProcessor:function(){return p},getRequests:function(t){var e=t?t.state instanceof Array?t.state:[t.state]:[],i=[];return e.forEach(function(e){var n=function(t){var e=void 0;switch(t){case u:e=m;break;case d:e=g;break;default:e=[]}return e}(e);i=i.concat(function(t,e){if(e.hasOwnProperty("time"))return[E(t,e.time,e.threshold)];return t.filter(function(t){for(var i in e)if("state"!==i&&e.hasOwnProperty(i)&&t[i]!=e[i])return!1;return!0})}(n,t))}),i},isFragmentLoaded:v,isFragmentLoadedOrPending:function(t){var e=!1,i=0,n=void 0;if(!(e=v(t)))for(i=0;i<m.length;i++)n=m[i],t.url===n.url&&t.startTime===n.startTime&&(e=!0);return e},removeExecutedRequestsBeforeTime:_,removeExecutedRequestsAfterTime:function(t){g=g.filter(function(e){return isNaN(e.startTime)||void 0!==t&&e.startTime+e.duration<t})},syncExecutedRequestsWithBufferedRange:function(t,e){if(t&&0!==t.length){for(var i=0,n=0,o=t.length;n<o;n++)b(i,t.start(n)),i=t.end(n);e>0&&b(i,e)}else _()},abortRequests:function(){a.abort(),m=[]},executeRequest:function(t){switch(t.action){case s.default.ACTION_COMPLETE:g.push(t),w(t,d),f.debug("executeRequest trigger STREAM_COMPLETED"),i.trigger(r.default.STREAM_COMPLETED,{request:t,fragmentModel:this});break;case s.default.ACTION_DOWNLOAD:w(t,u),m.push(t),function(t){i.trigger(r.default.FRAGMENT_LOADING_STARTED,{sender:c,request:t}),a.load(t)}(t);break;default:f.warn("Unknown request action.")}},reset:function(){i.off(r.default.LOADING_COMPLETED,T,this),i.off(r.default.LOADING_DATA_PROGRESS,S,this),i.off(r.default.LOADING_ABANDONED,x,this),a&&a.reset(),C()},addExecutedRequest:function(t){g.push(t)}},f=(0,l.default)(e).getInstance().getLogger(c),C(),i.on(r.default.LOADING_COMPLETED,T,c),i.on(r.default.LOADING_DATA_PROGRESS,S,c),i.on(r.default.LOADING_ABANDONED,x,c),c}c.__dashjs_factory_name="FragmentModel";var f=a.default.getClassFactory(c);f.FRAGMENT_MODEL_LOADING=u,f.FRAGMENT_MODEL_EXECUTED=d,f.FRAGMENT_MODEL_CANCELED="canceled",f.FRAGMENT_MODEL_FAILED=h,a.default.updateClassFactory(c.__dashjs_factory_name,f),e.default=f,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"extend",value:function(t,e){if(t){var i=!!e&&e.override,n=!!e&&e.publicOnly;for(var o in t)!t.hasOwnProperty(o)||this[o]&&!i||n&&-1===t[o].indexOf("public_")||(this[o]=t[o])}}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){!function(t){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"}(e)},function(t,e,i){!function(t){var e=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,i=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,n=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,o={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};t.parseColor=function(t){var r,a=null,s=o[t.toLowerCase()];return void 0!==s?a=s:null!==(r=e.exec(t))?a=[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16),void 0!==r[4]?parseInt(r[4],16):255]:null!==(r=i.exec(t))?a=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3]),255]:null!==(r=n.exec(t))&&(a=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3]),parseInt(r[4])]),a};var r=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;t.parseLength=function(t){var e,i=null;return null!==(e=r.exec(t))&&(i={value:parseFloat(e[1]),unit:e[2]}),i},t.parseTextShadow=function(e){var i=e.split(","),n=[];for(var o in i){var r=i[o].split(" ");if(1===r.length&&"none"===r[0])return"none";if(r.length>1&&r.length<5){var a=[null,null,null,null],s=t.parseLength(r.shift());if(null===s)return null;if(a[0]=s,null===(s=t.parseLength(r.shift())))return null;if(a[1]=s,0===r.length){n.push(a);continue}if(null!==(s=t.parseLength(r[0]))&&(a[2]=s,r.shift()),0===r.length){n.push(a);continue}var l=t.parseColor(r[0]);if(null===l)return null;a[3]=l,n.push(a)}}return n},t.parsePosition=function(e){var i=e.split(" "),n=function(t){return"center"===t||"left"===t||"top"===t||"bottom"===t||"right"===t};if(i.length>4)return null;for(var o in i)if(!n(i[o])){var r=t.parseLength(i[o]);if(null===r)return null;i[o]=r}for(var a={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},s=0;s<i.length;){var l=i[s++];if(n(l)){var u={value:0,unit:"%"};2!==i.length&&s<i.length&&!n(i[s])&&(u=i[s++]),"right"===l?(a.h.edge=l,a.h.offset=u):"bottom"===l?(a.v.edge=l,a.v.offset=u):"left"===l?a.h.offset=u:"top"===l&&(a.v.offset=u)}else{if(1!==i.length&&2!==i.length)return null;1===s?a.h.offset=l:a.v.offset=l}}return a},t.ComputedLength=function(t,e){this.rw=t,this.rh=e},t.ComputedLength.prototype.toUsedLength=function(t,e){return t*this.rw+e*this.rh},t.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},t.toComputedLength=function(e,i,n,o,r,a){return"%"===i&&o?new t.ComputedLength(o.rw*e/100,o.rh*e/100):"em"===i&&n?new t.ComputedLength(n.rw*e,n.rh*e):"c"===i&&r?new t.ComputedLength(e*r.rw,e*r.rh):"px"===i&&a?new t.ComputedLength(e*a.rw,e*a.rh):"rh"===i?new t.ComputedLength(0,e/100):"rw"===i?new t.ComputedLength(e/100,0):null}}(e)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(111)),r=n(i(1)),a=n(i(34)),s=n(i(112)),l=n(i(49)),u=n(i(2)),d=n(i(4)),h=n(i(0)),c=n(i(208)),f=n(i(14)),p=n(i(209)),g=n(i(210)),m=n(i(211)),v=i(10),y=n(i(3)),_=i(35),b="abandonload",E="allowload",w=1e3,T=100,S=0;function x(){var t=this.context,e=(0,y.default)(t).getInstance(),i=(0,u.default)(t).getInstance(),n=void 0,h=void 0,x=void 0,C=void 0,I=void 0,A=void 0,M=void 0,O=void 0,D=void 0,R=void 0,N=void 0,k=void 0,P=void 0,L=void 0,F=void 0,B=void 0,U=void 0,j=void 0,H=void 0,G=void 0,z=void 0,Y=void 0,V=void 0,q=void 0,W=void 0,K=void 0,X=void 0,Q=void 0,Z=void 0,J=void 0;function $(){(x=(0,o.default)(t).create({metricsModel:Q,dashMetrics:Z,mediaPlayerModel:z,adapter:H})).initialize()}function tt(){I={video:!0,audio:!0},A={},M={},O={},D={},N={},R={},q={},X={},P=!1,J=!0,L=!1,void 0===F&&(F=!1),V=void 0,W=void 0,K=void 0,clearTimeout(k),k=null}function et(t){t.mediaType===r.default.VIDEO&&(V=t.oldQuality,W.push(V,G.getPlaybackQuality()))}function it(t){t.metric!==a.default.HTTP_REQUEST||!t.value||t.value.type!==v.HTTPRequest.MEDIA_SEGMENT_TYPE||t.mediaType!==r.default.AUDIO&&t.mediaType!==r.default.VIDEO||K.push(t.mediaType,t.value,J),t.metric!==a.default.BUFFER_LEVEL||t.mediaType!==r.default.AUDIO&&t.mediaType!==r.default.VIDEO||function(t,e){var i=z.getABRStrategy();if(i===r.default.ABR_STRATEGY_BOLA)return void(X[t]=!0);if(i===r.default.ABR_STRATEGY_THROUGHPUT)return void(X[t]=!1);var n=z.getStableBufferTime(),o=n,a=.5*n,s=X[t],l=e>(s?a:o);X[t]=l,l!==s&&(l?h.info("AbrController ("+t+") switching from throughput to buffer occupancy ABR rule (buffer: "+e.toFixed(3)+")."):h.info("AbrController ("+t+") switching from buffer occupancy to throughput ABR rule (buffer: "+e.toFixed(3)+")."))}(t.mediaType,.001*t.value.level)}function nt(t,e){return A[e]=A[e]||{},A[e].hasOwnProperty(t)||(A[e][t]=0),function(t,e){if(e!==r.default.VIDEO||!P||!R[e])return t;F||vt();var i=j.getValue(),n=H.getAdaptationForType(i,0,e).Representation,o=t;if(B>0&&U>0){for(;o>0&&n[o]&&B<n[o].width&&B-n[o-1].width<n[o].width-B;)o-=1;n.length-2>=o&&n[o].width===n[o+1].width&&(o=Math.min(t,o+1))}return o}(function(t,e,i){var n=lt(e);if(isNaN(n)||n>=1||n<0)return t;return Math.min(t,Math.round(i*n))}(function(t,e){var i=t;if(!R[e])return i;var n=st(e);void 0!==n&&(i=Math.max(t,n));var o=at(e);void 0!==o&&(i=Math.min(i,o));return i}(A[e][t],t),t,A[e][t]),t)}function ot(t){return O.hasOwnProperty("max")&&O.max.hasOwnProperty(t)?O.max[t]:NaN}function rt(t){return O.hasOwnProperty("min")&&O.min.hasOwnProperty(t)?O.min[t]:NaN}function at(t){var e=ot(t);return e?ft(R[t].getMediaInfo(),e):void 0}function st(t){var e=rt(t);if(e){var i=R[t].getMediaInfo(),n=pt(i),o=ft(i,e);return n[o]&&o<n.length-1&&n[o].bitrate<1e3*e&&o++,o}}function lt(t){return D.hasOwnProperty("max")&&D.max.hasOwnProperty(t)?D.max[t]:1}function ut(t){return I[t]}function dt(t,e,i,n){var o=e.id,r=mt(t);(0,_.checkInteger)(i);var a=nt(t,o);i!==r&&i>=0&&i<=a&&ht(t,r,i,a,n)}function ht(t,n,o,r,a){if(t&&R[t]){var s=R[t].getStreamInfo(),l=s?s.id:null;if(e.getLogToBrowserConsole()){var u=Z.getCurrentBufferLevel(Q.getReadOnlyMetricsFor(t));h.info("AbrController ("+t+") switch from "+n+" to "+o+"/"+r+" (buffer: "+u+") "+(a?JSON.stringify(a):"."))}!function(t,e,i){M[e]=M[e]||{},M[e][t]=i}(t,l,o),i.trigger(d.default.QUALITY_CHANGE_REQUESTED,{mediaType:t,streamInfo:s,oldQuality:n,newQuality:o,reason:a})}}function ct(t,e){N[t].state=e}function ft(t,e,i){var n=t&&t.type?R[t.type].getRepresentationInfo():null;if(J&&i&&n&&n.fragmentDuration){i/=1e3;var o=n.fragmentDuration;if(i>o)return 0;e*=1-i/o}for(var r=pt(t),a=r.length-1;a>=0;a--){if(1e3*e>=r[a].bitrate)return a}return S}function pt(t){var e=[];if(!t||!t.bitrateList)return e;for(var i=t.bitrateList,n=t.type,o=void 0,r=0,a=i.length;r<a;r++)(o=new s.default).mediaType=n,o.qualityIndex=r,o.bitrate=i[r].bandwidth,o.width=i[r].width,o.height=i[r].height,o.scanType=i[r].scanType,e.push(o);return e}function gt(t){return X[t]}function mt(t){if(t&&R[t]){var e=R[t].getStreamInfo(),i=e?e.id:null;if(i)return M[i]=M[i]||{},M[i].hasOwnProperty(t)||(M[i][t]=S),M[i][t]}return S}function vt(){if(G){var t=L&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;B=G.getClientWidth()*t,U=G.getClientHeight()*t}}function yt(e){var i=e.request.mediaType;if(ut(i)){var o=R[i];if(!o)return;var r=(0,c.default)(t).create({abrController:n,streamProcessor:o,currentRequest:e.request,useBufferOccupancyABR:gt(i)}),a=x.shouldAbandonFragment(r);if(a.quality>f.default.NO_CHANGE){var s=o.getFragmentModel();s.getRequests({state:l.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(s.abortRequests(),ct(i,b),q[i].reset(),q[i].push({oldValue:mt(i,C.getActiveStreamInfo()),newValue:a.quality,confidence:1,reason:a.reason}),dt(i,C.getActiveStreamInfo(),a.quality,a.reason),clearTimeout(k),k=setTimeout(function(){ct(i,E),k=null},z.getAbandonLoadTimeout()))}}}return n={isPlayingAtTopQuality:function(t){var e=t?t.id:null,i=mt(r.default.AUDIO),n=mt(r.default.VIDEO);return i===nt(r.default.AUDIO,e)&&n===nt(r.default.VIDEO,e)},updateTopQualityIndex:function(t){var e=t.type,i=t.streamInfo.id,n=t.representationCount-1;return function(t,e,i){A[e]=A[e]||{},A[e][t]=i}(e,i,n),n},getThroughputHistory:function(){return K},getBitrateList:pt,getQualityForBitrate:ft,getMaxAllowedBitrateFor:ot,getTopBitrateInfoFor:function(t){if(t&&R&&R[t]){var e=R[t].getStreamInfo();if(e&&e.id){var i=nt(t,e.id),n=pt(R[t].getMediaInfo());return n[i]?n[i]:null}}return null},getMinAllowedBitrateFor:rt,setMaxAllowedBitrateFor:function(t,e){(0,_.checkParameterType)(e,"number"),(0,_.checkIsVideoOrAudioType)(t),O.max=O.max||{},O.max[t]=e},setMinAllowedBitrateFor:function(t,e){(0,_.checkParameterType)(e,"number"),(0,_.checkIsVideoOrAudioType)(t),O.min=O.min||{},O.min[t]=e},getMaxAllowedIndexFor:at,getMinAllowedIndexFor:st,getMaxAllowedRepresentationRatioFor:lt,setMaxAllowedRepresentationRatioFor:function(t,e){D.max=D.max||{},D.max[t]=e},getInitialBitrateFor:function(t){!function(){if(!Y||!Y.hasOwnProperty("getSavedBitrateSettings"))throw new Error(r.default.MISSING_CONFIG_ERROR)}();var e=Y.getSavedBitrateSettings(t);if(!O.hasOwnProperty(t))if(D.hasOwnProperty(t)){var i=j.getValue(),n=H.getAdaptationForType(i,0,t).Representation;if(Array.isArray(n)){var o=Math.max(Math.round(n.length*D[t])-1,0);O[t]=n[o].bandwidth}else O[t]=0}else isNaN(e)?O[t]=t===r.default.VIDEO?w:T:O[t]=e;return O[t]},setInitialBitrateFor:function(t,e){(0,_.checkIsVideoOrAudioType)(t),(0,_.checkParameterType)(e,"number"),O[t]=e},getInitialRepresentationRatioFor:function(t){return D.hasOwnProperty(t)?D[t]:null},setInitialRepresentationRatioFor:function(t,e){D[t]=e},setAutoSwitchBitrateFor:function(t,e){(0,_.checkParameterType)(e,"boolean"),(0,_.checkIsVideoOrAudioType)(t),I[t]=e},getAutoSwitchBitrateFor:ut,getUseDeadTimeLatency:function(){return J},setUseDeadTimeLatency:function(t){(0,_.checkParameterType)(t,"boolean"),J=t},setLimitBitrateByPortal:function(t){(0,_.checkParameterType)(t,"boolean"),P=t},getLimitBitrateByPortal:function(){return P},getUsePixelRatioInLimitBitrateByPortal:function(){return L},setUsePixelRatioInLimitBitrateByPortal:function(t){(0,_.checkParameterType)(t,"boolean"),L=t},getQualityFor:mt,getAbandonmentStateFor:function(t){return N[t]?N[t].state:null},setPlaybackQuality:dt,checkPlaybackQuality:function(i){if(i&&R&&R[i]){var o=R[i].getStreamInfo(),r=o?o.id:null,a=mt(i),s=(0,c.default)(t).create({abrController:n,streamProcessor:R[i],currentValue:a,switchHistory:q[i],droppedFramesHistory:W,useBufferOccupancyABR:gt(i)});if(W){var l=G.getPlaybackQuality();l&&W.push(V,l)}if(ut(i)){var u=st(i),d=nt(i,r),p=x.getMaxQuality(s),g=p.quality;if(void 0!==u&&g<u&&(g=u),g>d&&(g=d),q[i].push({oldValue:a,newValue:g}),g>f.default.NO_CHANGE&&g!=a)(N[i].state===E||g>a)&&ht(i,a,g,d,p.reason);else if(e.getLogToBrowserConsole()){var m=Z.getCurrentBufferLevel(Q.getReadOnlyMetricsFor(i));h.debug("AbrController ("+i+") stay on "+a+"/"+d+" (buffer: "+m+")")}}}},getTopQualityIndexFor:nt,setElementSize:vt,setWindowResizeEventCalled:function(t){F=t},createAbrRulesCollection:$,registerStreamType:function(e,n){q[e]=(0,p.default)(t).create(),R[e]=n,N[e]=N[e]||{},N[e].state=E,X[e]=!1,i.on(d.default.LOADING_PROGRESS,yt,this),e==r.default.VIDEO&&(i.on(d.default.QUALITY_CHANGE_RENDERED,et,this),W=(0,g.default)(t).create(),vt()),i.on(d.default.METRIC_ADDED,it,this),i.on(d.default.PERIOD_SWITCH_COMPLETED,$,this),K=(0,m.default)(t).create({mediaPlayerModel:z})},unRegisterStreamType:function(t){delete R[t]},setConfig:function(t){t&&(t.streamController&&(C=t.streamController),t.domStorage&&(Y=t.domStorage),t.mediaPlayerModel&&(z=t.mediaPlayerModel),t.metricsModel&&(Q=t.metricsModel),t.dashMetrics&&(Z=t.dashMetrics),t.adapter&&(H=t.adapter),t.manifestModel&&(j=t.manifestModel),t.videoModel&&(G=t.videoModel))},reset:function(){tt(),i.off(d.default.LOADING_PROGRESS,yt,this),i.off(d.default.QUALITY_CHANGE_RENDERED,et,this),i.off(d.default.METRIC_ADDED,it,this),i.off(d.default.PERIOD_SWITCH_COMPLETED,$,this),x&&x.reset()}},h=e.getLogger(n),tt(),n}x.__dashjs_factory_name="AbrController";var C=h.default.getSingletonFactory(x);C.ABANDON_LOAD=b,C.QUALITY_DEFAULT=S,h.default.updateSingletonFactory(x.__dashjs_factory_name,C),e.default=C,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function a(){return{modifyRequestURL:function(t){return t},modifyRequestHeader:function(t){return t}}}a.__dashjs_factory_name="RequestModifier",e.default=r.default.getSingletonFactory(a),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._test=e,this._converter=i}return n(t,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};var o,r=i(50),a=(o=r)&&o.__esModule?o:{default:o},s=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a["default"]),e}());e.default=s,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(36)),r=n(i(313)),a=n(i(314)),s=n(i(315)),l=n(i(316)),u=n(i(317)),d=n(i(318)),h=n(i(319)),c=n(i(320)),f=n(i(28));function p(){var t=this.context,e=void 0,i=void 0,n=void 0,p=void 0,g=void 0,m=void 0,v=void 0;return e={initialize:function(){p=[];var e=void 0;e=(0,l.default)(t).getInstance({BASE64:g}),p.push(e),e=(0,s.default)(t).getInstance({BASE64:g}),p.push(e),e=(0,r.default)(t).getInstance({BASE64:g}),p.push(e),m=e,e=(0,a.default)(t).getInstance({BASE64:g,debug:i}),p.push(e),v=e},setProtectionData:function(t){for(var e,i,n=0;n<p.length;n++){var o=p[n];o.hasOwnProperty("init")&&o.init((e=o.systemString,i=void 0,i=null,t&&(i=e in t?t[e]:null),i))}},isClearKey:function(t){return t===m||t===v},initDataEquals:function(t,e){if(t.byteLength===e.byteLength){for(var i=new Uint8Array(t),n=new Uint8Array(e),o=0;o<i.length;o++)if(i[o]!==n[o])return!1;return!0}return!1},getKeySystems:function(){return p},getKeySystemBySystemString:function(t){for(var e=0;e<p.length;e++)if(p[e].systemString===t)return p[e];return null},getSupportedKeySystemsFromContentProtection:function(t){var e=void 0,i=void 0,n=void 0,o=void 0,r=[];if(t)for(n=0;n<p.length;++n)for(i=p[n],o=0;o<t.length;++o)if((e=t[o]).schemeIdUri.toLowerCase()===i.schemeIdURI){var a=i.getInitData(e);a?r.push({ks:p[n],initData:a,cdmData:i.getCDMData(),sessionId:i.getSessionId(e)}):this.isClearKey(i)&&r.push({ks:i,initData:null})}return r},getSupportedKeySystems:function(t,e){for(var i=[],n=o.default.parsePSSHList(t),r=void 0,a=void 0,s=void 0,l=0;l<p.length;++l)a=(r=p[l]).systemString,s=!e||a in e,r.uuid in n&&s&&i.push({ks:r,initData:n[r.uuid],cdmData:r.getCDMData(),sessionId:r.getSessionId()});return i},getLicenseServer:function(e,i,n){if("license-release"===n||"individualization-request"===n)return null;var o=null;return i&&i.hasOwnProperty("drmtoday")?o=(0,u.default)(t).getInstance({BASE64:g}):e.systemString===f.default.WIDEVINE_KEYSTEM_STRING?o=(0,h.default)(t).getInstance():e.systemString===f.default.PLAYREADY_KEYSTEM_STRING?o=(0,d.default)(t).getInstance():e.systemString===f.default.CLEARKEY_KEYSTEM_STRING&&(o=(0,c.default)(t).getInstance()),o},processClearKeyLicenseRequest:function(t,e,i){try{return t.getClearKeysFromProtectionData(e,i)}catch(t){return n.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(t){t&&(t.debug&&(i=t.debug,n=i.getLogger(e)),t.BASE64&&(g=t.BASE64))}}}p.__dashjs_factory_name="ProtectionKeyController",e.default=dashjs.FactoryMaker.getSingletonFactory(p),t.exports=e.default},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e){t.exports=!0},function(t,e,i){"use strict";var n,o="object"==typeof Reflect?Reflect:null,r=o&&"function"==typeof o.apply?o.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function d(t,e,i,n){var o,r,a,s;if("function"!=typeof i)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i);if(void 0===(r=t._events)?(r=t._events=Object.create(null),t._eventsCount=0):(void 0!==r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t._events),a=r[e]),void 0===a)a=r[e]=i,++t._eventsCount;else if("function"==typeof a?a=r[e]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),(o=u(t))>0&&a.length>o&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return t}function h(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},o=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,r(this.listener,this.target,t))}.bind(n);return o.listener=i,n.wrapFn=o,o}function c(t,e,i){var n=t._events;if(void 0===n)return[];var o=n[e];return void 0===o?[]:"function"==typeof o?i?[o.listener||o]:[o]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(o):p(o,o.length)}function f(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function p(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[t];if(void 0===l)return!1;if("function"==typeof l)r(l,this,e);else{var u=l.length,d=p(l,u);for(i=0;i<u;++i)r(d[i],this,e)}return!0},s.prototype.addListener=function(t,e){return d(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return d(this,t,e,!0)},s.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,h(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,h(this,t,e)),this},s.prototype.removeListener=function(t,e){var i,n,o,r,a;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(o=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){a=i[r].listener,o=r;break}if(o<0)return this;0===o?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,o),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var o,r=Object.keys(i);for(n=0;n<r.length;++n)"removeListener"!==(o=r[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){return c(this,t,!0)},s.prototype.rawListeners=function(t){return c(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,i){var n=i(23),o=n.Buffer;function r(t,e){for(var i in t)e[i]=t[i]}function a(t,e,i){return o(t,e,i)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(r(n,e),e.Buffer=a),r(o,a),a.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,i)},a.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=o(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,i){"use strict";(function(e,n,o){var r=i(48);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var n=t.entry;t.entry=null;for(;n;){var o=n.callback;e.pendingcb--,o(i),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var s,l=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:r.nextTick;y.WritableState=v;var u=i(41);u.inherits=i(20);var d={deprecate:i(167)},h=i(101),c=i(63).Buffer,f=o.Uint8Array||function(){};var p,g=i(102);function m(){}function v(t,e){s=s||i(24),t=t||{};var n=e instanceof s;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var o=t.highWaterMark,u=t.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:n&&(u||0===u)?u:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,n=i.sync,o=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,n,o){--e.pendingcb,i?(r.nextTick(o,n),r.nextTick(S,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(o(n),t._writableState.errorEmitted=!0,t.emit("error",n),S(t,e))}(t,i,n,e,o);else{var a=w(i);a||i.corked||i.bufferProcessing||!i.bufferedRequest||E(t,i),n?l(b,t,i,a,o):b(t,i,a,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(t){if(s=s||i(24),!(p.call(y,this)||this instanceof s))return new y(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function _(t,e,i,n,o,r,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,i?t._writev(o,e.onwrite):t._write(o,r,e.onwrite),e.sync=!1}function b(t,e,i,n){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),S(t,e)}function E(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var n=e.bufferedRequestCount,o=new Array(n),r=e.corkedRequestsFree;r.entry=i;for(var s=0,l=!0;i;)o[s]=i,i.isBuf||(l=!1),i=i.next,s+=1;o.allBuffers=l,_(t,e,!0,e.length,o,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;i;){var u=i.chunk,d=i.encoding,h=i.callback;if(_(t,e,!1,e.objectMode?1:u.length,u,d,h),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,e){t._final(function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),S(t,e)})}function S(t,e){var i=w(e);return i&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,r.nextTick(T,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}u.inherits(y,h),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:d.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===y&&(t&&t._writableState instanceof v)}})):p=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,i){var n,o=this._writableState,a=!1,s=!o.objectMode&&(n=t,c.isBuffer(n)||n instanceof f);return s&&!c.isBuffer(t)&&(t=function(t){return c.from(t)}(t)),"function"==typeof e&&(i=e,e=null),s?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof i&&(i=m),o.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),r.nextTick(e,i)}(this,i):(s||function(t,e,i,n){var o=!0,a=!1;return null===i?a=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),r.nextTick(n,a),o=!1),o}(this,o,t,i))&&(o.pendingcb++,a=function(t,e,i,n,o,r){if(!i){var a=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,i));return e}(e,n,o);n!==a&&(i=!0,o="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:o,isBuf:i,callback:r,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,s,n,o,r);return l}(this,o,s,t,e,i)),a},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||E(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,i){var n=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,i){e.ending=!0,S(t,e),i&&(e.finished?r.nextTick(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,n,i)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,i(33),i(165).setImmediate,i(12))},function(t,e,i){"use strict";var n=i(168).Buffer,o=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===o||!o(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=d,this.end=h,e=3;break;default:return this.write=c,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var n=i.charCodeAt(i.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function d(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function c(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=r,r.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},r.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},r.prototype.text=function(t,e){var i=function(t,e,i){var n=e.length-1;if(n<i)return 0;var o=a(e[n]);if(o>=0)return o>0&&(t.lastNeed=o-1),o;if(--n<i||-2===o)return 0;if((o=a(e[n]))>=0)return o>0&&(t.lastNeed=o-2),o;if(--n<i||-2===o)return 0;if((o=a(e[n]))>=0)return o>0&&(2===o?o=0:t.lastNeed=o-3),o;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var n=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},r.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,i){"use strict";var n=i(173),o=i(174);function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){o.isString(t)&&(t=_(t));return t instanceof r?t.format():r.prototype.format.call(t)},e.Url=r;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(u),h=["%","/","?",";","#"].concat(d),c=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=i(175);function _(t,e,i){if(t&&o.isObject(t)&&t instanceof r)return t;var n=new r;return n.parse(t,e,i),n}r.prototype.parse=function(t,e,i){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),s=-1!==r&&r<t.indexOf("#")?"?":"#",u=t.split(s);u[0]=u[0].replace(/\\/g,"/");var _=t=u.join(s);if(_=_.trim(),!i&&1===t.split("#").length){var b=l.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var E=a.exec(_);if(E){var w=(E=E[0]).toLowerCase();this.protocol=w,_=_.substr(E.length)}if(i||E||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===_.substr(0,2);!T||E&&m[E]||(_=_.substr(2),this.slashes=!0)}if(!m[E]&&(T||E&&!v[E])){for(var S,x,C=-1,I=0;I<c.length;I++){-1!==(A=_.indexOf(c[I]))&&(-1===C||A<C)&&(C=A)}-1!==(x=-1===C?_.lastIndexOf("@"):_.lastIndexOf("@",C))&&(S=_.slice(0,x),_=_.slice(x+1),this.auth=decodeURIComponent(S)),C=-1;for(I=0;I<h.length;I++){var A;-1!==(A=_.indexOf(h[I]))&&(-1===C||A<C)&&(C=A)}-1===C&&(C=_.length),this.host=_.slice(0,C),_=_.slice(C),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var O=this.hostname.split(/\./),D=(I=0,O.length);I<D;I++){var R=O[I];if(R&&!R.match(f)){for(var N="",k=0,P=R.length;k<P;k++)R.charCodeAt(k)>127?N+="x":N+=R[k];if(!N.match(f)){var L=O.slice(0,I),F=O.slice(I+1),B=R.match(p);B&&(L.push(B[1]),F.unshift(B[2])),F.length&&(_="/"+F.join(".")+_),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+U,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!g[w])for(I=0,D=d.length;I<D;I++){var H=d[I];if(-1!==_.indexOf(H)){var G=encodeURIComponent(H);G===H&&(G=escape(H)),_=_.split(H).join(G)}}var z=_.indexOf("#");-1!==z&&(this.hash=_.substr(z),_=_.slice(0,z));var Y=_.indexOf("?");if(-1!==Y?(this.search=_.substr(Y),this.query=_.substr(Y+1),e&&(this.query=y.parse(this.query)),_=_.slice(0,Y)):e&&(this.search="",this.query={}),_&&(this.pathname=_),v[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var V=this.search||"";this.path=U+V}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,a="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+r+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+n},r.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(o.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var i=new r,n=Object.keys(this),a=0;a<n.length;a++){var s=n[a];i[s]=this[s]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),u=0;u<l.length;u++){var d=l[u];"protocol"!==d&&(i[d]=t[d])}return v[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!v[t.protocol]){for(var h=Object.keys(t),c=0;c<h.length;c++){var f=h[c];i[f]=t[f]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||m[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",y=i.search||"";i.path=g+y}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var _=i.pathname&&"/"===i.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),E=b||_||i.host&&t.pathname,w=E,T=i.pathname&&i.pathname.split("/")||[],S=(p=t.pathname&&t.pathname.split("/")||[],i.protocol&&!v[i.protocol]);if(S&&(i.hostname="",i.port=null,i.host&&(""===T[0]?T[0]=i.host:T.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),E=E&&(""===p[0]||""===T[0])),b)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,T=p;else if(p.length)T||(T=[]),T.pop(),T=T.concat(p),i.search=t.search,i.query=t.query;else if(!o.isNullOrUndefined(t.search)){if(S)i.hostname=i.host=T.shift(),(M=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=M.shift(),i.host=i.hostname=M.shift());return i.search=t.search,i.query=t.query,o.isNull(i.pathname)&&o.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!T.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var x=T.slice(-1)[0],C=(i.host||t.host||T.length>1)&&("."===x||".."===x)||""===x,I=0,A=T.length;A>=0;A--)"."===(x=T[A])?T.splice(A,1):".."===x?(T.splice(A,1),I++):I&&(T.splice(A,1),I--);if(!E&&!w)for(;I--;I)T.unshift("..");!E||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),C&&"/"!==T.join("/").substr(-1)&&T.push("");var M,O=""===T[0]||T[0]&&"/"===T[0].charAt(0);S&&(i.hostname=i.host=O?"":T.length?T.shift():"",(M=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=M.shift(),i.host=i.hostname=M.shift()));return(E=E||i.host&&T.length)&&!O&&T.unshift(""),T.length?i.pathname=T.join("/"):(i.pathname=null,i.path=null),o.isNull(i.pathname)&&o.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},r.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(0)),a=n(i(184)),s=n(i(69)),l=n(i(199)),u=n(i(200)),d=n(i(2)),h=n(i(4)),c=i(35);function f(){var t=this.context,e=void 0,i=void 0,n=void 0,r=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,w=void 0,T=void 0,S=void 0,x=void 0;function C(t){var e=this,i=t.tracks,n=t.index;i.some(function(t,i){if(t.lang===E)return e.setTextTrack(i),n=i,!0}),T||this.setTextTrack(-1),w=n,b.trigger(h.default.TEXT_TRACKS_ADDED,{enabled:I(),index:n,tracks:i})}function I(){var t=!0;return S&&!x&&(t=!1),t}function A(){S=!1}return e={setConfig:function(t){t&&(t.errHandler&&(n=t.errHandler),t.dashManifestModel&&(r=t.dashManifestModel),t.manifestModel&&(f=t.manifestModel),t.mediaController&&(p=t.mediaController),t.videoModel&&(g=t.videoModel),t.streamController&&(m=t.streamController),t.textTracks&&(v=t.textTracks),t.vttParser&&(y=t.vttParser),t.ttmlParser&&(_=t.ttmlParser),i.setConfig({errHandler:n,dashManifestModel:r,manifestModel:f,mediaController:p,videoModel:g,streamController:m,textTracks:v,vttParser:y,ttmlParser:_}))},getTextSourceBuffer:function(){return i},getAllTracksAreDisabled:function(){return S},addEmbeddedTrack:function(t){i.addEmbeddedTrack(t)},getTextDefaultLanguage:function(){return E},setTextDefaultLanguage:function(t){(0,c.checkParameterType)(t,"string"),E=t},setTextDefaultEnabled:function(t){(0,c.checkParameterType)(t,"boolean"),(T=t)||this.setTextTrack(-1)},getTextDefaultEnabled:function(){return T},enableText:function(t){(0,c.checkParameterType)(t,"boolean"),I()!==t&&(t&&this.setTextTrack(w),t||(w=this.getCurrentTrackIdx(),this.setTextTrack(-1)))},isTextEnabled:I,setTextTrack:function(t){var e=i.getConfig(),n=e.fragmentModel,r=e.fragmentedTracks,a=e.videoModel,s=void 0,l=void 0;S=-1===t;var u=v.getCurrentTrackIdx();if(u!==t){v.setModeForTrackIdx(u,o.default.TEXT_HIDDEN),v.setCurrentTrackIdx(t),v.setModeForTrackIdx(t,o.default.TEXT_SHOWING);var d=v.getCurrentTrackInfo();if(d&&d.isFragmented&&!d.isEmbedded)for(var h=0;h<r.length;h++){var c=r[h];if(d.lang===c.lang&&d.index===c.index&&(c.id?d.id===c.id:d.id===c.index))if(c!==p.getCurrentTrackFor(o.default.FRAGMENTED_TEXT,m.getActiveStreamInfo()))n.abortRequests(),n.removeExecutedRequestsBeforeTime(),i.remove(),v.deleteCuesFromTrackIdx(u),p.setTrack(c),i.setCurrentFragmentedTrackIdx(h);else if(-1===u){for(var f=m.getActiveStreamProcessors(),g=0;g<f.length;g++)if(f[g].getType()===o.default.FRAGMENTED_TEXT){l=f[g];break}l.getIndexHandler().setCurrentTime(a.getTime()),l.getScheduleController().start()}}else if(d&&!d.isFragmented){for(f=m.getActiveStreamProcessors(),h=0;h<f.length;h++)if(f[h].getType()===o.default.TEXT){s=(l=f[h]).getMediaInfoArr();break}if(l&&s)for(h=0;h<s.length;h++)if(s[h].index===d.index&&s[h].lang===d.lang){l.selectMediaInfo(s[h]);break}}}},getCurrentTrackIdx:function(){return v.getCurrentTrackIdx()},enableForcedTextStreaming:function(t){(0,c.checkParameterType)(t,"boolean"),x=t},reset:function(){A(),i.resetEmbedded(),i.reset()}},E="",w=-1,T=!0,x=!1,v=(0,s.default)(t).getInstance(),y=(0,l.default)(t).getInstance(),_=(0,u.default)(t).getInstance(),i=(0,a.default)(t).getInstance(),b=(0,d.default)(t).getInstance(),v.initialize(),b.on(h.default.TEXT_TRACKS_QUEUE_INITIALIZED,C,e),A(),e}f.__dashjs_factory_name="TextController",e.default=r.default.getSingletonFactory(f),t.exports=e.default},function(t,e,i){
/*! codem-isoboxer v0.3.6 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
var n={parseBuffer:function(t){return new o(t).parse()},addBoxProcessor:function(t,e){"string"==typeof t&&"function"==typeof e&&(r.prototype._boxProcessors[t]=e)},createFile:function(){return new o},createBox:function(t,e,i){var n=r.create(t);return e&&e.append(n,i),n},createFullBox:function(t,e,i){var o=n.createBox(t,e,i);return o.version=0,o.flags=0,o},Utils:{}};n.Utils.dataViewToString=function(t,e){var i=e||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(i).decode(t);var n=[],o=0;if("utf-8"===i)for(;o<t.byteLength;){var r=t.getUint8(o++);r<128||(r<224?(r=(31&r)<<6,r|=63&t.getUint8(o++)):r<240?(r=(15&r)<<12,r|=(63&t.getUint8(o++))<<6,r|=63&t.getUint8(o++)):(r=(7&r)<<18,r|=(63&t.getUint8(o++))<<12,r|=(63&t.getUint8(o++))<<6,r|=63&t.getUint8(o++))),n.push(String.fromCharCode(r))}else for(;o<t.byteLength;)n.push(String.fromCharCode(t.getUint8(o++)));return n.join("")},n.Utils.utf8ToByteArray=function(t){var e,i;if("undefined"!=typeof TextEncoder)e=(new TextEncoder).encode(t);else for(e=[],i=0;i<t.length;++i){var n=t.charCodeAt(i);n<128?e.push(n):n<2048?(e.push(192|n>>6),e.push(128|63&n)):n<65536?(e.push(224|n>>12),e.push(128|63&n>>6),e.push(128|63&n)):(e.push(240|n>>18),e.push(128|63&n>>12),e.push(128|63&n>>6),e.push(128|63&n))}return e},n.Utils.appendBox=function(t,e,i){if(e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,-1!==i)if(null!=i){var n,o=-1;if("number"==typeof i)o=i;else{if("string"==typeof i)n=i;else{if("object"!=typeof i||!i.type)return void t.boxes.push(e);n=i.type}for(var r=0;r<t.boxes.length;r++)if(n===t.boxes[r].type){o=r+1;break}}t.boxes.splice(o,0,e)}else t.boxes.push(e)},e.parseBuffer=n.parseBuffer,e.addBoxProcessor=n.addBoxProcessor,e.createFile=n.createFile,e.createBox=n.createBox,e.createFullBox=n.createFullBox,e.Utils=n.Utils,n.Cursor=function(t){this.offset=void 0===t?0:t};var o=function(t){this._cursor=new n.Cursor,this.boxes=[],t&&(this._raw=new DataView(t))};o.prototype.fetch=function(t){var e=this.fetchAll(t,!0);return e.length?e[0]:null},o.prototype.fetchAll=function(t,e){var i=[];return o._sweep.call(this,t,i,e),i},o.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var t=r.parse(this);if(void 0===t.type)break;this.boxes.push(t)}return this},o._sweep=function(t,e,i){for(var n in this.type&&this.type==t&&e.push(this),this.boxes){if(e.length&&i)return;o._sweep.call(this.boxes[n],t,e,i)}},o.prototype.write=function(){var t,e=0;for(t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var i=new Uint8Array(e);for(this._rawo=new DataView(i.buffer),this.bytes=i,this._cursor.offset=0,t=0;t<this.boxes.length;t++)this.boxes[t].write();return i.buffer},o.prototype.append=function(t,e){n.Utils.appendBox(this,t,e)};var r=function(){this._cursor=new n.Cursor};r.parse=function(t){var e=new r;return e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,e._parseBox(),t._cursor.offset=e._raw.byteOffset+e._raw.byteLength,e},r.create=function(t){var e=new r;return e.type=t,e.boxes=[],e},r.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],r.prototype._boxProcessors={},r.prototype._procField=function(t,e,i){this._parsing?this[t]=this._readField(e,i):this._writeField(e,i,this[t])},r.prototype._procFieldArray=function(t,e,i,n){var o;if(this._parsing)for(this[t]=[],o=0;o<e;o++)this[t][o]=this._readField(i,n);else for(o=0;o<this[t].length;o++)this._writeField(i,n,this[t][o])},r.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},r.prototype._procEntries=function(t,e,i){var n;if(this._parsing)for(this[t]=[],n=0;n<e;n++)this[t].push({}),i.call(this,this[t][n]);else for(n=0;n<e;n++)i.call(this,this[t][n])},r.prototype._procSubEntries=function(t,e,i,n){var o;if(this._parsing)for(t[e]=[],o=0;o<i;o++)t[e].push({}),n.call(this,t[e][o]);else for(o=0;o<i;o++)n.call(this,t[e][o])},r.prototype._procEntryField=function(t,e,i,n){this._parsing?t[e]=this._readField(i,n):this._writeField(i,n,t[e])},r.prototype._procSubBoxes=function(t,e){var i;if(this._parsing)for(this[t]=[],i=0;i<e;i++)this[t].push(r.parse(this));else for(i=0;i<e;i++)this._rawo?this[t][i].write():this.size+=this[t][i].getLength()},r.prototype._readField=function(t,e){switch(t){case"uint":return this._readUint(e);case"int":return this._readInt(e);case"template":return this._readTemplate(e);case"string":return-1===e?this._readTerminatedString():this._readString(e);case"data":return this._readData(e);case"utf8":return this._readUTF8String();default:return-1}},r.prototype._readInt=function(t){var e=null,i=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:e=this._raw.getInt8(i);break;case 16:e=this._raw.getInt16(i);break;case 32:e=this._raw.getInt32(i);break;case 64:var n=this._raw.getInt32(i),o=this._raw.getInt32(i+4);e=n*Math.pow(2,32)+o}return this._cursor.offset+=t>>3,e},r.prototype._readUint=function(t){var e,i,n=null,o=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:n=this._raw.getUint8(o);break;case 16:n=this._raw.getUint16(o);break;case 24:n=((e=this._raw.getUint16(o))<<8)+(i=this._raw.getUint8(o+2));break;case 32:n=this._raw.getUint32(o);break;case 64:e=this._raw.getUint32(o),i=this._raw.getUint32(o+4),n=e*Math.pow(2,32)+i}return this._cursor.offset+=t>>3,n},r.prototype._readString=function(t){for(var e="",i=0;i<t;i++){var n=this._readUint(8);e+=String.fromCharCode(n)}return e},r.prototype._readTemplate=function(t){return this._readUint(t/2)+this._readUint(t/2)/Math.pow(2,t/2)},r.prototype._readTerminatedString=function(){for(var t="";this._cursor.offset-this._offset<this._raw.byteLength;){var e=this._readUint(8);if(0===e)break;t+=String.fromCharCode(e)}return t},r.prototype._readData=function(t){var e=t>0?t:this._raw.byteLength-(this._cursor.offset-this._offset);if(e>0){var i=new Uint8Array(this._raw.buffer,this._cursor.offset,e);return this._cursor.offset+=e,i}return null},r.prototype._readUTF8String=function(){var t=this._raw.byteLength-(this._cursor.offset-this._offset),e=null;return t>0&&(e=new DataView(this._raw.buffer,this._cursor.offset,t),this._cursor.offset+=t),e?n.Utils.dataViewToString(e):e},r.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},r.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},r.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(r.parse(this))},r.prototype.append=function(t,e){n.Utils.appendBox(this,t,e)},r.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var t=0;t<this.boxes.length;t++)this.size+=this.boxes[t].getLength();return this._data&&this._writeData(this._data),this.size},r.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var t=0;t<this.boxes.length;t++)this.boxes[t].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},r.prototype._writeInt=function(t,e){if(this._rawo){var i=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setInt8(i,e);break;case 16:this._rawo.setInt16(i,e);break;case 32:this._rawo.setInt32(i,e);break;case 64:var n=Math.floor(e/Math.pow(2,32)),o=e-n*Math.pow(2,32);this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,o)}this._cursor.offset+=t>>3}else this.size+=t>>3},r.prototype._writeUint=function(t,e){if(this._rawo){var i,n,o=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setUint8(o,e);break;case 16:this._rawo.setUint16(o,e);break;case 24:i=(16776960&e)>>8,n=255&e,this._rawo.setUint16(o,i),this._rawo.setUint8(o+2,n);break;case 32:this._rawo.setUint32(o,e);break;case 64:n=e-(i=Math.floor(e/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(o,i),this._rawo.setUint32(o+4,n)}this._cursor.offset+=t>>3}else this.size+=t>>3},r.prototype._writeString=function(t,e){for(var i=0;i<t;i++)this._writeUint(8,e.charCodeAt(i))},r.prototype._writeTerminatedString=function(t){if(0!==t.length){for(var e=0;e<t.length;e++)this._writeUint(8,t.charCodeAt(e));this._writeUint(8,0)}},r.prototype._writeTemplate=function(t,e){var i=Math.floor(e),n=(e-i)*Math.pow(2,t/2);this._writeUint(t/2,i),this._writeUint(t/2,n)},r.prototype._writeData=function(t){if(t)if(this._rawo){if(t instanceof Array){for(var e=this._cursor.offset-this._rawo.byteOffset,i=0;i<t.length;i++)this._rawo.setInt8(e+i,t[i]);this._cursor.offset+=t.length}t instanceof Uint8Array&&(this._root.bytes.set(t,this._cursor.offset),this._cursor.offset+=t.length)}else this.size+=t.length},r.prototype._writeUTF8String=function(t){var e=n.Utils.utf8ToByteArray(t);if(this._rawo)for(var i=new DataView(this._rawo.buffer,this._cursor.offset,e.length),o=0;o<e.length;o++)i.setUint8(o,e[o]);else this.size+=e.length},r.prototype._writeField=function(t,e,i){switch(t){case"uint":this._writeUint(e,i);break;case"int":this._writeInt(e,i);break;case"template":this._writeTemplate(e,i);break;case"string":-1==e?this._writeTerminatedString(i):this._writeString(e,i);break;case"data":this._writeData(i);break;case"utf8":this._writeUTF8String(i)}},r.prototype._boxProcessors.avc1=r.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},r.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},r.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"segment_duration","uint",1===this.version?64:32),this._procEntryField(t,"media_time","int",1===this.version?64:32),this._procEntryField(t,"media_rate_integer","int",16),this._procEntryField(t,"media_rate_fraction","int",16)})},r.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},r.prototype._boxProcessors.free=r.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},r.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},r.prototype._boxProcessors.ftyp=r.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var t=-1;this._parsing&&(t=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",t,"string",4)},r.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},r.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},r.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},r.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},r.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},r.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},r.prototype._boxProcessors.mp4a=r.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},r.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},r.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},r.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},r.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},r.prototype._boxProcessors.sdtp=function(){this._procFullBox();var t=-1;this._parsing&&(t=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",t,"uint",8)},r.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(t){this._parsing||(t.reference=(1&t.reference_type)<<31,t.reference|=2147483647&t.referenced_size,t.sap=(1&t.starts_with_SAP)<<31,t.sap|=(3&t.SAP_type)<<28,t.sap|=268435455&t.SAP_delta_time),this._procEntryField(t,"reference","uint",32),this._procEntryField(t,"subsegment_duration","uint",32),this._procEntryField(t,"sap","uint",32),this._parsing&&(t.reference_type=t.reference>>31&1,t.referenced_size=2147483647&t.reference,t.starts_with_SAP=t.sap>>31&1,t.SAP_type=t.sap>>28&7,t.SAP_delta_time=268435455&t.sap)})},r.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},r.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(t){this._procEntryField(t,"ranges_count","uint",32),this._procSubEntries(t,"ranges",t.ranges_count,function(t){this._procEntryField(t,"level","uint",8),this._procEntryField(t,"range_size","uint",24)})})},r.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},r.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"sample_delta","uint",32),this._procEntryField(t,"subsample_count","uint",16),this._procSubEntries(t,"subsamples",t.subsample_count,function(t){this._procEntryField(t,"subsample_size","uint",1===this.version?32:16),this._procEntryField(t,"subsample_priority","uint",8),this._procEntryField(t,"discardable","uint",8),this._procEntryField(t,"codec_specific_parameters","uint",32)})})},r.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},r.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},r.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},r.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(t){this._procEntryField(t,"time","uint",1===this.version?64:32),this._procEntryField(t,"moof_offset","uint",1===this.version?64:32),this._procEntryField(t,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(t,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(t,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},r.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},r.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},r.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(t){256&this.flags&&this._procEntryField(t,"sample_duration","uint",32),512&this.flags&&this._procEntryField(t,"sample_size","uint",32),1024&this.flags&&this._procEntryField(t,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(t,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},r.prototype._boxProcessors["url "]=r.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},r.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},r.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},r.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},r.prototype._boxProcessors.vtte=function(){}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(2)),a=n(i(4)),s=n(i(0)),l=n(i(3)),u=i(108);function d(){var t=this.context,e=(0,r.default)(t).getInstance(),i=void 0,n=void 0,s=void 0,d=void 0,h=void 0,c=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,w=void 0,T=void 0;function S(t){var e=h[t].kind,i=void 0!==h[t].id?h[t].id:h[t].lang,n=h[t].lang,o=h[t].isTTML,r=h[t].isEmbedded,a=d.addTextTrack(e,i,n);return a.isEmbedded=r,a.isTTML=o,a}function x(t,i){var n=d.getClientWidth(),o=d.getClientHeight(),r=d.getVideoWidth(),s=d.getVideoHeight(),l=d.getVideoRelativeOffsetTop(),u=d.getVideoRelativeOffsetLeft(),h=r/s,c=!1;t.isFromCEA608&&(h=3.5/3,c=!0);var f=function(t,e,i,n,o,r){var a=0,s=0;t/e>i/n?a=(s=e)/n*i:s=(a=t)/i*n;var l,u,d=0,h=0;return a/s>o?(h=s,d=s*o):(d=a,h=a/o),l=(t-d)/2,u=(e-h)/2,r?{x:l+.1*d,y:u+.1*h,w:.8*d,h:.8*h}:{x:l,y:u,w:d,h:h}}.call(this,n,o,r,s,h,c),_=f.w,w=f.h,S=f.x,x=f.y;if(_!=m||w!=v||S!=p||x!=g||i){if(p=S+u,g=x+l,m=_,v=w,y){var C=y.style;C.left=p+"px",C.top=g+"px",C.width=m+"px",C.height=v+"px",C.zIndex=b&&document[b]||E?T:null,e.trigger(a.default.CAPTION_CONTAINER_RESIZE,{})}var I=t.activeCues;if(I)for(var A=I.length,M=0;M<A;++M){var O=I[M];O.scaleCue(O)}}}function C(t){var e=m,i=v,n=void 0,o=void 0,r=void 0,a=void 0,s=void 0;if(t.cellResolution){var l=[e/t.cellResolution[0],i/t.cellResolution[1]];if(t.linePadding)for(n in t.linePadding)if(t.linePadding.hasOwnProperty(n)){o=(t.linePadding[n]*l[0]).toString();for(var u=document.getElementsByClassName("spanPadding"),d=0;d<u.length;d++)u[d].style.cssText=u[d].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+o),u[d].style.cssText=u[d].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+o)}if(t.fontSize){for(n in t.fontSize)if(t.fontSize.hasOwnProperty(n)){"%"===t.fontSize[n][0]?r=t.fontSize[n][1]/100:"c"===t.fontSize[n][0]&&(r=t.fontSize[n][1]),o=(r*l[1]).toString(),s="defaultFontSize"!==n?document.getElementsByClassName(n):document.getElementsByClassName("paragraph");for(var h=0;h<s.length;h++)s[h].style.cssText=s[h].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+o)}if(t.lineHeight)for(n in t.lineHeight)if(t.lineHeight.hasOwnProperty(n)){"%"===t.lineHeight[n][0]?a=t.lineHeight[n][1]/100:"c"===t.fontSize[n][0]&&(a=t.lineHeight[n][1]),o=(a*l[1]).toString(),s=document.getElementsByClassName(n);for(var c=0;c<s.length;c++)s[c].style.cssText=s[c].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+o)}}}if(t.isd){var f=document.getElementById(t.cueID);f&&y.removeChild(f),I(t)}}function I(t){if(y){var i=document.createElement("div");y.appendChild(i),w=(0,u.renderHTML)(t.isd,i,function(e){var i=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,n=/^#(.*)$/;if(i.test(e)){var o=i.exec(e),r=parseInt(o[4],10)-1;return"data:image/png;base64,"+btoa(t.images[r])}if(n.test(e)){r=(o=n.exec(e))[1];return"data:image/png;base64,"+t.embeddedImages[r]}return null},y.clientHeight,y.clientWidth,!1,function(t){n.info("renderCaption :",t)},w,!0),i.id=t.cueID,e.trigger(a.default.CAPTION_RENDERED,{captionDiv:i,currentTrackIdx:f})}}function A(t){return t>=0&&h[t]?d.getTextTrack(h[t].kind,h[t].id,h[t].lang,h[t].isTTML,h[t].isEmbedded):null}function M(t){if(t!==f){var e=A(f=t);(function(t){R.call(this),t&&"html"===t.renderingType?function(){var t=document.getElementById("native-cue-style");if(t)return;(t=document.createElement("style")).id="native-cue-style",document.head.appendChild(t);var e=t.sheet,i=d.getElement();try{i&&(i.id?e.insertRule("#"+i.id+"::cue {background: transparent}",0):0!==i.classList.length?e.insertRule("."+i.className+"::cue {background: transparent}",0):e.insertRule("video::cue {background: transparent}",0))}catch(t){n.info(""+t.message)}}.call(this):D.call(this)}).call(this,e),_&&(clearInterval(_),_=null),e&&"html"===e.renderingType&&(x.call(this,e,!0),_=setInterval(x.bind(this,e),500))}}function O(t){if(t.cues)for(var e=t.cues,i=e.length-1;i>=0;i--)t.removeCue(e[i])}function D(){var t=document.getElementById("native-cue-style");t&&document.head.removeChild(t)}function R(){if(y)for(;y.firstChild;)y.removeChild(y.firstChild)}return i={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(s=window.VTTCue||window.TextTrackCue,h=[],c=[],f=-1,p=0,g=0,m=0,v=0,y=null,_=null,E=!1,T=2147483647,w=null,void 0!==document.fullscreenElement?b="fullscreenElement":void 0!==document.webkitIsFullScreen?b="webkitIsFullScreen":document.msFullscreenElement?b="msFullscreenElement":document.mozFullScreen&&(b="mozFullScreen"))},displayCConTop:function(t){E=t,y&&!document[b]&&(y.style.zIndex=t?T:null)},addTextTrack:function(t,i){if(h.length!==i){if(h.push(t),h.length===i){h.sort(function(t,e){return t.index-e.index}),y=d.getTTMLRenderingDiv();for(var r=-1,s=0;s<h.length;s++){var l=S.call(this,s);c.push(l),h[s].defaultTrack&&(l.default=!0,r=s);var u=A(s);u&&(u.mode=o.default.TEXT_SHOWING,y&&(h[s].isTTML||h[s].isEmbedded)?u.renderingType="html":u.renderingType="default"),this.addCaptions(s,0,h[s].captionData),e.trigger(a.default.TEXT_TRACK_ADDED)}if(M.call(this,r),r>=0)for(var p=0;p<h.length;p++){var g=A(p);g&&(g.mode=p===r?o.default.TEXT_SHOWING:o.default.TEXT_HIDDEN)}e.trigger(a.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:f,tracks:h})}}else n.error("Trying to add too many tracks.")},addCaptions:function(t,i,r){var l=A(t),u=this;if(l&&r&&0!==r.length)for(var d=0;d<r.length;d++){var h=void 0,c=r[d];l.cellResolution=c.cellResolution,l.isFromCEA608=c.isFromCEA608,"html"===c.type&&y?((h=new s(c.start-i,c.end-i,"")).cueHTMLElement=c.cueHTMLElement,h.isd=c.isd,h.images=c.images,h.embeddedImages=c.embeddedImages,h.cueID=c.cueID,h.scaleCue=C.bind(u),h.cellResolution=c.cellResolution,h.lineHeight=c.lineHeight,h.linePadding=c.linePadding,h.fontSize=c.fontSize,y.style.left=p+"px",y.style.top=g+"px",y.style.width=m+"px",y.style.height=v+"px",h.onenter=function(){l.mode===o.default.TEXT_SHOWING&&(this.isd?(I(this),n.debug("Cue enter id:"+this.cueID)):(y.appendChild(this.cueHTMLElement),C.call(u,this),e.trigger(a.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:f})))},h.onexit=function(){if(y)for(var t=y.childNodes,e=0;e<t.length;++e)t[e].id===this.cueID&&(n.debug("Cue exit id:"+t[e].id),y.removeChild(t[e]))}):c.data&&(h=new s(c.start-i,c.end-i,c.data),c.styles&&(void 0!==c.styles.align&&"align"in h&&(h.align=c.styles.align),void 0!==c.styles.line&&"line"in h&&(h.line=c.styles.line),void 0!==c.styles.position&&"position"in h&&(h.position=c.styles.position),void 0!==c.styles.size&&"size"in h&&(h.size=c.styles.size)),h.onenter=function(){l.mode===o.default.TEXT_SHOWING&&e.trigger(a.default.CAPTION_RENDERED,{currentTrackIdx:f})});try{h?l.addCue(h):n.error("impossible to display subtitles.")}catch(t){throw O(l),l.addCue(h),t}}},getCurrentTrackIdx:function(){return f},setCurrentTrackIdx:M,getTrackIdxForId:function(t){for(var e=-1,i=0;i<h.length;i++)if(h[i].id===t){e=i;break}return e},getCurrentTrackInfo:function(){return h[f]},setModeForTrackIdx:function(t,e){var i=A(t);i&&i.mode!==e&&(i.mode=e)},deleteCuesFromTrackIdx:function(t){var e=A(t);e&&O(e)},deleteAllTextTracks:function(){for(var t=c?c.length:0,e=0;e<t;e++){var i=A(e);i&&(O.call(this,i),i.mode="disabled")}c=[],h=[],_&&(clearInterval(_),_=null),f=-1,R.call(this)},deleteTextTrack:function(t){d.removeChild(c[t]),c.splice(t,1)},setConfig:function(t){t&&t.videoModel&&(d=t.videoModel)}},n=(0,l.default)(t).getInstance().getLogger(i),i}d.__dashjs_factory_name="TextTracks",e.default=s.default.getSingletonFactory(d),t.exports=e.default},function(t,e,i){!function(t,e,i){function n(t,e,i,n,o,r,a,s){this.name=e,this.ns=t,this.qname=t+" "+e,this.inherit=o,this.animatable=r,this.initial=i,this.applies=n,this.parse=a,this.compute=s}for(var o in t.all=[new n(e.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,i.parseColor,null),new n(e.ns_tts,"color","white",["span"],!0,!0,i.parseColor,null),new n(e.ns_tts,"direction","ltr",["p","span"],!0,!0,function(t){return t},null),new n(e.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(t){return t},null),new n(e.ns_tts,"displayAlign","before",["region"],!1,!0,function(t){return t},null),new n(e.ns_tts,"extent","auto",["tt","region"],!1,!0,function(t){if("auto"===t)return t;var e=t.split(" ");if(2!==e.length)return null;var n=i.parseLength(e[0]),o=i.parseLength(e[1]);return o&&n?{h:o,w:n}:null},function(t,e,n,o,r){var a,s;if("auto"===o)a=new i.ComputedLength(0,1);else if(null===(a=i.toComputedLength(o.h.value,o.h.unit,null,t.dimensions.h,null,t.pxLength.h)))return null;if("auto"===o)s=new i.ComputedLength(1,0);else if(null===(s=i.toComputedLength(o.w.value,o.w.unit,null,t.dimensions.w,null,t.pxLength.w)))return null;return{h:a,w:s}}),new n(e.ns_tts,"fontFamily","default",["span"],!0,!0,function(t){var e=t.split(","),i=[];for(var n in e)"'"!==e[n].charAt(0)&&'"'!==e[n].charAt(0)&&"default"===e[n]?i.push("monospaceSerif"):i.push(e[n]);return i},null),new n(e.ns_tts,"shear","0%",["p"],!0,!0,i.parseLength,function(t,e,i,n){return"%"!==n.unit?null:Math.abs(n.value)>100?100*Math.sign(n.value):n.value}),new n(e.ns_tts,"fontSize","1c",["span"],!0,!0,i.parseLength,function(e,n,o,r,a){return i.toComputedLength(r.value,r.unit,null!==n?n.styleAttrs[t.byName.fontSize.qname]:e.cellLength.h,null!==n?n.styleAttrs[t.byName.fontSize.qname]:e.cellLength.h,e.cellLength.h,e.pxLength.h)}),new n(e.ns_tts,"fontStyle","normal",["span"],!0,!0,function(t){return t},null),new n(e.ns_tts,"fontWeight","normal",["span"],!0,!0,function(t){return t},null),new n(e.ns_tts,"lineHeight","normal",["p"],!0,!0,function(t){return"normal"===t?t:i.parseLength(t)},function(e,n,o,r,a){var s;if("normal"===r)s=r;else if(null===(s=i.toComputedLength(r.value,r.unit,o.styleAttrs[t.byName.fontSize.qname],o.styleAttrs[t.byName.fontSize.qname],e.cellLength.h,e.pxLength.h)))return null;return s}),new n(e.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new n(e.ns_tts,"origin","auto",["region"],!1,!0,function(t){if("auto"===t)return t;var e=t.split(" ");if(2!==e.length)return null;var n=i.parseLength(e[0]),o=i.parseLength(e[1]);return o&&n?{h:o,w:n}:null},function(t,e,n,o,r){var a,s;if("auto"===o)a=new i.ComputedLength(0,0);else if(null===(a=i.toComputedLength(o.h.value,o.h.unit,null,t.dimensions.h,null,t.pxLength.h)))return null;if("auto"===o)s=new i.ComputedLength(0,0);else if(null===(s=i.toComputedLength(o.w.value,o.w.unit,null,t.dimensions.w,null,t.pxLength.w)))return null;return{h:a,w:s}}),new n(e.ns_tts,"overflow","hidden",["region"],!1,!0,function(t){return t},null),new n(e.ns_tts,"padding","0px",["region"],!1,!0,function(t){var e=t.split(" ");if(e.length>4)return null;var n=[];for(var o in e){var r=i.parseLength(e[o]);if(!r)return null;n.push(r)}return n},function(e,n,o,r,a){var s;if(1===r.length)s=[r[0],r[0],r[0],r[0]];else if(2===r.length)s=[r[0],r[1],r[0],r[1]];else if(3===r.length)s=[r[0],r[1],r[2],r[1]];else{if(4!==r.length)return null;s=[r[0],r[1],r[2],r[3]]}var l=o.styleAttrs[t.byName.writingMode.qname];if("lrtb"===l||"lr"===l)s=[s[0],s[3],s[2],s[1]];else if("rltb"===l||"rl"===l)s=[s[0],s[1],s[2],s[3]];else if("tblr"===l)s=[s[3],s[0],s[1],s[2]];else{if("tbrl"!==l&&"tb"!==l)return null;s=[s[3],s[2],s[1],s[0]]}var u=[];for(var d in s)if(0===s[d].value)u[d]=new i.ComputedLength(0,0);else if(u[d]=i.toComputedLength(s[d].value,s[d].unit,o.styleAttrs[t.byName.fontSize.qname],"0"===d||"2"===d?o.styleAttrs[t.byName.extent.qname].h:o.styleAttrs[t.byName.extent.qname].w,"0"===d||"2"===d?e.cellLength.h:e.cellLength.w,"0"===d||"2"===d?e.pxLength.h:e.pxLength.w),null===u[d])return null;return u}),new n(e.ns_tts,"position","top left",["region"],!1,!0,function(t){return i.parsePosition(t)},function(e,n,o,r){var a,s;return null===(a=i.toComputedLength(r.v.offset.value,r.v.offset.unit,null,new i.ComputedLength(-o.styleAttrs[t.byName.extent.qname].h.rw,e.dimensions.h.rh-o.styleAttrs[t.byName.extent.qname].h.rh),null,e.pxLength.h))?null:("bottom"===r.v.edge&&(a=new i.ComputedLength(-a.rw-o.styleAttrs[t.byName.extent.qname].h.rw,e.dimensions.h.rh-a.rh-o.styleAttrs[t.byName.extent.qname].h.rh)),s=i.toComputedLength(r.h.offset.value,r.h.offset.unit,null,new i.ComputedLength(e.dimensions.w.rw-o.styleAttrs[t.byName.extent.qname].w.rw,-o.styleAttrs[t.byName.extent.qname].w.rh),null,e.pxLength.w),null===a?null:("right"===r.h.edge&&(s=new i.ComputedLength(e.dimensions.w.rw-s.rw-o.styleAttrs[t.byName.extent.qname].w.rw,-s.rh-o.styleAttrs[t.byName.extent.qname].w.rh)),{h:a,w:s}))}),new n(e.ns_tts,"ruby","none",["span"],!1,!0,function(t){return t},null),new n(e.ns_tts,"rubyAlign","center",["span"],!0,!0,function(t){return"center"!==t&&"spaceAround"!==t?null:t},null),new n(e.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(t){return t},null),new n(e.ns_tts,"rubyReserve","none",["p"],!0,!0,function(t){var e=t.split(" "),n=[null,null];if(0===e.length||e.length>2)return null;if("none"!==e[0]&&"both"!==e[0]&&"after"!==e[0]&&"before"!==e[0]&&"outside"!==e[0])return null;if(n[0]=e[0],2===e.length&&"none"!==e[0]){var o=i.parseLength(e[1]);if(!o)return null;n[1]=o}return n},function(e,n,o,r,a){if("none"===r[0])return r;var s=null;return null===(s=null===r[1]?new i.ComputedLength(.5*o.styleAttrs[t.byName.fontSize.qname].rw,.5*o.styleAttrs[t.byName.fontSize.qname].rh):i.toComputedLength(r[1].value,r[1].unit,o.styleAttrs[t.byName.fontSize.qname],o.styleAttrs[t.byName.fontSize.qname],e.cellLength.h,e.pxLength.h))?null:[r[0],s]}),new n(e.ns_tts,"showBackground","always",["region"],!1,!0,function(t){return t},null),new n(e.ns_tts,"textAlign","start",["p"],!0,!0,function(t){return t},function(t,e,i,n,o){return"left"===n?"start":"right"===n?"end":n}),new n(e.ns_tts,"textCombine","none",["span"],!0,!0,function(t){var e=t.split(" ");return 1!==e.length||"none"!==e[0]&&"all"!==e[0]?null:[e[0]]},null),new n(e.ns_tts,"textDecoration","none",["span"],!0,!0,function(t){return t.split(" ")},null),new n(e.ns_tts,"textEmphasis","none",["span"],!1,!0,function(t){var e=t.split(" "),n={style:"filled",symbol:"circle",color:null,position:null};for(var o in e)if("none"===e[o]||"auto"===e[o])n.style=e[o];else if("filled"===e[o]||"open"===e[o])n.style=e[o];else if("circle"===e[o]||"dot"===e[o]||"sesame"===e[o])n.symbol=e[o];else if("current"===e[o])n.color=e[o];else if("outside"===e[o]||"before"===e[o]||"after"===e[o])n.position=e[o];else if(n.color=i.parseColor(e[o]),null===n.color)return null;return n},null),new n(e.ns_tts,"textOutline","none",["span"],!0,!0,function(t){if("none"===t)return t;var e={},n=t.split(" ");if(0===n.length||n.length>2)return null;var o=i.parseColor(n[0]);if(e.color=o,null!==o&&n.shift(),1!==n.length)return null;var r=i.parseLength(n[0]);return r?(e.thickness=r,e):null},function(e,n,o,r,a){if("none"===r)return r;var s={};return null===r.color?s.color=o.styleAttrs[t.byName.color.qname]:s.color=r.color,s.thickness=i.toComputedLength(r.thickness.value,r.thickness.unit,o.styleAttrs[t.byName.fontSize.qname],o.styleAttrs[t.byName.fontSize.qname],e.cellLength.h,e.pxLength.h),null===s.thickness?null:s}),new n(e.ns_tts,"textShadow","none",["span"],!0,!0,i.parseTextShadow,function(e,n,o,r){if("none"===r)return r;var a=[];for(var s in r){var l={};if(l.x_off=i.toComputedLength(r[s][0].value,r[s][0].unit,null,o.styleAttrs[t.byName.fontSize.qname],null,e.pxLength.w),null===l.x_off)return null;if(l.y_off=i.toComputedLength(r[s][1].value,r[s][1].unit,null,o.styleAttrs[t.byName.fontSize.qname],null,e.pxLength.h),null===l.y_off)return null;if(null===r[s][2])l.b_radius=0;else if(l.b_radius=i.toComputedLength(r[s][2].value,r[s][2].unit,null,o.styleAttrs[t.byName.fontSize.qname],null,e.pxLength.h),null===l.b_radius)return null;null===r[s][3]?l.color=o.styleAttrs[t.byName.color.qname]:l.color=r[s][3],a.push(l)}return a}),new n(e.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(t){return t},null),new n(e.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(t){return t},null),new n(e.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(t){return t},null),new n(e.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(t){return t},null),new n(e.ns_tts,"zIndex","auto",["region"],!1,!0,function(t){var e;return"auto"===t?e=t:(e=parseInt(t),isNaN(e)&&(e=null)),e},null),new n(e.ns_ebutts,"linePadding","0c",["p"],!0,!1,i.parseLength,function(t,e,n,o,r){return i.toComputedLength(o.value,o.unit,null,null,t.cellLength.w,null)}),new n(e.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(t){return t},null),new n(e.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(t){return t},null),new n(e.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(t){return"true"===t},null),new n(e.ns_itts,"fillLineGap","false",["p"],!0,!0,function(t){return"true"===t},null)],t.byQName={},t.all)t.byQName[t.all[o].qname]=t.all[o];for(var r in t.byName={},t.all)t.byName[t.all[r].name]=t.all[r]}(e,"undefined"==typeof imscNames?i(51):imscNames,"undefined"==typeof imscUtils?i(52):imscUtils)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(4)),a=n(i(2)),s=n(i(0)),l=n(i(3)),u="neverReplace",d="alwaysReplace",h="highestBitrate",c="widestRange",f=h;function p(){var t=this.context,e=(0,a.default)(t).getInstance(),i=void 0,n=void 0,s=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=[d,u],_=[h,c];function b(t,e){if(!t||!e)return[];var i=e.id;return s[i]&&s[i][t]?s[i][t].list:[]}function E(t,e){return!t||!e||e&&!s[e.id]?null:s[e.id][t].current}function w(t){if(t&&t.streamInfo){var i=t.type,n=t.streamInfo,o=n.id,a=E(i,n);if(s[o]&&s[o][i]&&!I(t,a)){s[o][i].current=t,s[o][i].current&&e.trigger(r.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:a,newMediaInfo:t,switchMode:m[i]});var l=function(t){var e={lang:t.lang,viewpoint:t.viewpoint,roles:t.roles,accessibility:t.accessibility,audioChannelConfiguration:t.audioChannelConfiguration};return e.lang||e.viewpoint||e.role&&e.role.length>0||e.accessibility&&e.accessibility.length>0||e.audioChannelConfiguration&&e.audioChannelConfiguration.length>0?e:null}(t);l&&s[o][i].storeLastSettings&&(l.roles&&(l.role=l.roles[0],delete l.roles),l.accessibility&&(l.accessibility=l.accessibility[0]),l.audioChannelConfiguration&&(l.audioChannelConfiguration=l.audioChannelConfiguration[0]),v.setSavedMediaSettings(i,l))}}}function T(t,e){t&&e&&(p[t]=e)}function S(t){return t?p[t]:null}function x(){return g||f}function C(t){return t===o.default.AUDIO||t===o.default.VIDEO||t===o.default.TEXT||t===o.default.FRAGMENTED_TEXT||t===o.default.IMAGE}function I(t,e){if(!t&&!e)return!0;if(!t||!e)return!1;var i=t.id===e.id,n=t.viewpoint===e.viewpoint,o=t.lang===e.lang,r=t.roles.toString()===e.roles.toString(),a=t.accessibility.toString()===e.accessibility.toString(),s=t.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return i&&n&&o&&r&&a&&s}function A(){s={},p={audio:null,video:null},m={audio:d,video:u}}function M(t,e){var i=!t.lang||t.lang===e.lang,n=!t.viewpoint||t.viewpoint===e.viewpoint,o=!t.role||!!e.roles.filter(function(e){return e===t.role})[0],r=!t.accessibility||!!e.accessibility.filter(function(e){return e===t.accessibility})[0],a=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0];return i&&n&&o&&r&&a}function O(t){var e=x(),i=[],o=function(t){var e=0,i=[],n=void 0;return t.forEach(function(t){(n=Math.max.apply(Math,t.bitrateList.map(function(t){return t.bandwidth})))>e?(e=n,i=[t]):n===e&&i.push(t)}),i},r=function(t){var e=0,i=[],n=void 0;return t.forEach(function(t){(n=t.representationCount)>e?(e=n,i=[t]):n===e&&i.push(t)}),i};switch(e){case h:(i=o(t)).length>1&&(i=r(i));break;case c:(i=r(t)).length>1&&(i=o(t));break;default:n.warn("Track selection mode is not supported: "+e)}return i[0]}return i={checkInitialMediaSettingsForType:function(t,e){var i=S(t),n=b(t,e),r=[];t!==o.default.FRAGMENTED_TEXT?(i||T(t,i=v.getSavedMediaSettings(t)),n&&0!==n.length&&(i&&n.forEach(function(t){M(i,t)&&r.push(t)}),0===r.length?w(O(n)):r.length>1?w(O(r)):w(r[0]))):w(n[0])},addTrack:function(t){if(t){var e=t.type;if(C(e)){var i=t.streamInfo.id;s[i]||(s[i]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var n=s[i][e].list,o=0,r=n.length;o<r;++o)if(I(n[o],t))return;n.push(t);var a=S(e);a&&M(a,t)&&!E(e,t.streamInfo)&&w(t)}}},getTracksFor:b,getCurrentTrackFor:E,isCurrentTrack:function(t){if(!t)return!1;var e=t.type,i=t.streamInfo.id;return s[i]&&s[i][e]&&I(s[i][e].current,t)},setTrack:w,setInitialSettings:T,getInitialSettings:S,setSwitchMode:function(t,e){-1!==y.indexOf(e)?m[t]=e:n.warn("Track switch mode is not supported: "+e)},getSwitchMode:function(t){return m[t]},setSelectionModeForInitialTrack:function(t){-1!==_.indexOf(t)?g=t:n.warn("Track selection mode is not supported: "+t)},getSelectionModeForInitialTrack:x,isMultiTrackSupportedByType:C,isTracksEqual:I,setConfig:function(t){t&&t.domStorage&&(v=t.domStorage)},reset:A},n=(0,l.default)(t).getInstance().getLogger(i),A(),i}p.__dashjs_factory_name="MediaController";var g=s.default.getSingletonFactory(p);g.TRACK_SWITCH_MODE_NEVER_REPLACE=u,g.TRACK_SWITCH_MODE_ALWAYS_REPLACE=d,g.TRACK_SELECTION_MODE_HIGHEST_BITRATE=h,g.TRACK_SELECTION_MODE_WIDEST_RANGE=c,g.DEFAULT_INIT_TRACK_SELECTION_MODE=f,s.default.updateSingletonFactory(p.__dashjs_factory_name,g),e.default=g,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function a(){var t={};return{save:function(e){var i=e.streamId,n=e.representationId;t[i]=t[i]||{},t[i][n]=e},extract:function(e,i){return t&&t[e]&&t[e][i]?t[e][i]:null},reset:function(){t={}}}}a.__dashjs_factory_name="InitCache",e.default=r.default.getSingletonFactory(a),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o,r=i(13),a=(o=r)&&o.__esModule?o:{default:o},s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return n(t,null,[{key:"hasInitialization",value:function(t){return null!==t.initialization||null!==t.range}},{key:"hasSegments",value:function(t){return t.segmentInfoType!==a.default.BASE_URL&&t.segmentInfoType!==a.default.SEGMENT_BASE&&!t.indexRange}}]),t}();e.default=s,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function a(t){var e=(t=t||{}).requestModifier;return{load:function(t){var i=new Date,n=t.request,o=new XMLHttpRequest;o.open(t.method,t.url,!0),n.responseType&&(o.responseType=n.responseType),n.range&&o.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=i),e&&(o=e.modifyRequestHeader(o)),o.withCredentials=t.withCredentials,o.onload=t.onload,o.onloadend=t.onend,o.onerror=t.onerror,o.onprogress=t.progress,o.onabort=t.onabort,o.send(),t.response=o},abort:function(t){var e=t.response;e.onloadend=e.onerror=e.onprogress=void 0,e.abort()}}}a.__dashjs_factory_name="XHRLoader";var s=r.default.getClassFactory(a);e.default=s,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,i,n,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initDataTypes=["cenc"],e&&e.length&&(this.audioCapabilities=e),i&&i.length&&(this.videoCapabilities=i),this.distinctiveIdentifier=n,this.persistentState=o,this.sessionTypes=r},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.keyID=e,this.key=i},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(e,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i&&"persistent"!==i&&"temporary"!==i)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=i}return n(t,[{key:"toJWK",value:function(){var t=void 0,e=this.keyPairs.length,i={keys:[]};for(t=0;t<e;t++){var n={kty:"oct",alg:"A128KW",kid:this.keyPairs[t].keyID,k:this.keyPairs[t].key};i.keys.push(n)}this.type&&(i.type=this.type);var o=JSON.stringify(i),r=o.length,a=new ArrayBuffer(r),s=new Uint8Array(a);for(t=0;t<r;t++)s[t]=o.charCodeAt(t);return a}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initData=e,this.initDataType=i},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sessionToken=e,this.message=i,this.defaultURL=n,this.messageType=o||"license-request"},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.keySystem=e,this.ksConfiguration=i},t.exports=e.default},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7)],void 0===(r="function"==typeof(n=function(t){var e,i=0,n=Array.prototype.slice;return t.cleanData=(e=t.cleanData,function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)try{(n=t._data(o,"events"))&&n.remove&&t(o).triggerHandler("remove")}catch(t){}e(i)}),t.widget=function(e,i,n){var o,r,a,s={},l=e.split(".")[0],u=l+"-"+(e=e.split(".")[1]);return n||(n=i,i=t.Widget),t.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr[":"][u.toLowerCase()]=function(e){return!!t.data(e,u)},t[l]=t[l]||{},o=t[l][e],r=t[l][e]=function(t,e){if(!this._createWidget)return new r(t,e);arguments.length&&this._createWidget(t,e)},t.extend(r,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(a=new i).options=t.widget.extend({},a.options),t.each(n,function(e,n){t.isFunction(n)?s[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,r=this._superApply;return this._super=t,this._superApply=o,e=n.apply(this,arguments),this._super=i,this._superApply=r,e}}():s[e]=n}),r.prototype=t.widget.extend(a,{widgetEventPrefix:o&&a.widgetEventPrefix||e},s,{constructor:r,namespace:l,widgetName:e,widgetFullName:u}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete o._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var i,o,r=n.call(arguments,1),a=0,s=r.length;a<s;a++)for(i in r[a])o=r[a][i],r[a].hasOwnProperty(i)&&void 0!==o&&(t.isPlainObject(o)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],o):t.widget.extend({},o):e[i]=o);return e},t.widget.bridge=function(e,i){var o=i.prototype.widgetFullName||e;t.fn[e]=function(r){var a="string"==typeof r,s=n.call(arguments,1),l=this;return a?this.length||"instance"!==r?this.each(function(){var i,n=t.data(this,o);return"instance"===r?(l=n,!1):n?t.isFunction(n[r])&&"_"!==r.charAt(0)?(i=n[r].apply(n,s))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+r+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")}):l=void 0:(s.length&&(r=t.widget.extend.apply(null,[r].concat(s))),this.each(function(){var e=t.data(this,o);e?(e.option(r||{}),e._init&&e._init()):t.data(this,o,new i(r,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,o,r,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},n=e.split("."),e=n.shift(),n.length){for(o=a[e]=t.widget.extend({},this.options[e]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(e=n.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,n,o;for(i in e)o=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&o&&o.length&&(n=t(o.get()),this._removeClass(o,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],n=this;function o(o,r){var a,s;for(s=0;s<o.length;s++)a=n.classesElementLookup[o[s]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),n.classesElementLookup[o[s]]=a,i.push(o[s]),r&&e.classes[o[s]]&&i.push(e.classes[o[s]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&o(e.keys.match(/\S+/g)||[],!0),e.extra&&o(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(n,o){-1!==t.inArray(e.target,o)&&(i.classesElementLookup[n]=t(o.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var o="string"==typeof t||null===t,r={extra:o?e:i,keys:o?t:e,element:o?this.element:t,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(e,i,n){var o,r=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=o=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),t.each(n,function(n,a){function s(){if(e||!0!==r.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?r[a]:a).apply(r,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+r.eventNamespace,d=l[2];d?o.on(u,d,s):i.on(u,s)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var o,r,a=this.options[e];if(n=n||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(t.isFunction(a)&&!1===a.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,o,r){var a;"string"==typeof o&&(o={effect:o});var s=o?!0===o||"number"==typeof o?i:o.effect||i:e;"number"==typeof(o=o||{})&&(o={duration:o}),a=!t.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),a&&t.effects&&t.effects.effect[s]?n[e](o):s!==e&&n[s]?n[s](o.duration,o.easing,r):n.queue(function(i){t(this)[e](),r&&r.call(n[0]),i()})}}),t.widget})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n=i(16);t.exports=function(t,e){if(!n(t))return t;var i,o;if(e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;if("function"==typeof(i=t.valueOf)&&!n(o=i.call(t)))return o;if(!e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var n=i(59),o=i(58),r=i(31),a=i(83),s=i(30),l=i(134),u=Object.getOwnPropertyDescriptor;e.f=i(17)?u:function(t,e){if(t=r(t),e=a(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return o(!n.f.call(t,e),t[e])}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var n=i(8),o=i(22),r=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(61)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){var n=i(29).f,o=i(30),r=i(39)("toStringTag");t.exports=function(t,e,i){t&&!o(t=i?t:t.prototype,r)&&n(t,r,{configurable:!0,value:e})}},function(t,e,i){e.f=i(39)},function(t,e,i){var n=i(22),o=i(8),r=i(61),a=i(88),s=i(29).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(86)("keys"),o=i(60);t.exports=function(t){return n[t]||(n[t]=o(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(45),o=i(143),r=i(92),a=i(91)("IE_PROTO"),s=function(){},l=function(){var t,e=i(135)("iframe"),n=r.length;for(e.style.display="none",i(364).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[r[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(s.prototype=n(t),i=new s,s.prototype=null,i[a]=t):i=l(),void 0===e?i:o(i,e)}},function(t,e){t.exports={}},function(t,e,i){(function(t){var n=i(159),o=i(99),r=i(171),a=i(172),s=i(66),l=e;l.request=function(e,i){e="string"==typeof e?s.parse(e):r(e);var o=-1===t.location.protocol.search(/^https?:$/)?"http:":"",a=e.protocol||o,l=e.hostname||e.host,u=e.port,d=e.path||"/";l&&-1!==l.indexOf(":")&&(l="["+l+"]"),e.url=(l?a+"//"+l:"")+(u?":"+u:"")+d,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var h=new n(e);return i&&h.on("response",i),h},l.get=function(t,e){var i=l.request(t,e);return i.end(),i},l.ClientRequest=n,l.IncomingMessage=o.IncomingMessage,l.Agent=function(){},l.Agent.defaultMaxSockets=4,l.globalAgent=new l.Agent,l.STATUS_CODES=a,l.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,i(12))},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){(function(t){e.fetch=s(t.fetch)&&s(t.ReadableStream),e.writableStream=s(t.WritableStream),e.abortController=s(t.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(t){}var i;function n(){if(void 0!==i)return i;if(t.XMLHttpRequest){i=new t.XMLHttpRequest;try{i.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){i=null}}else i=null;return i}function o(t){var e=n();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var r=void 0!==t.ArrayBuffer,a=r&&s(t.ArrayBuffer.prototype.slice);function s(t){return"function"==typeof t}e.arraybuffer=e.fetch||r&&o("arraybuffer"),e.msstream=!e.fetch&&a&&o("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&r&&o("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!n()&&s(n().overrideMimeType),e.vbArray=s(t.VBArray),i=null}).call(this,i(12))},function(t,e,i){(function(t,n,o){var r=i(98),a=i(20),s=i(40),l=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=e.IncomingMessage=function(e,i,a,l){var u=this;if(s.Readable.call(u),u._mode=a,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",function(){t.nextTick(function(){u.emit("close")})}),"fetch"===a){if(u._fetchResponse=i,u.url=i.url,u.statusCode=i.status,u.statusMessage=i.statusText,i.headers.forEach(function(t,e){u.headers[e.toLowerCase()]=t,u.rawHeaders.push(e,t)}),r.writableStream){var d=new WritableStream({write:function(t){return new Promise(function(e,i){u._destroyed?i():u.push(new n(t))?e():u._resumeFetch=e})},close:function(){o.clearTimeout(l),u._destroyed||u.push(null)},abort:function(t){u._destroyed||u.emit("error",t)}});try{return void i.body.pipeTo(d).catch(function(t){o.clearTimeout(l),u._destroyed||u.emit("error",t)})}catch(t){}}var h=i.body.getReader();!function t(){h.read().then(function(e){if(!u._destroyed){if(e.done)return o.clearTimeout(l),void u.push(null);u.push(new n(e.value)),t()}}).catch(function(t){o.clearTimeout(l),u._destroyed||u.emit("error",t)})}()}else{if(u._xhr=e,u._pos=0,u.url=e.responseURL,u.statusCode=e.status,u.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var i=e[1].toLowerCase();"set-cookie"===i?(void 0===u.headers[i]&&(u.headers[i]=[]),u.headers[i].push(e[2])):void 0!==u.headers[i]?u.headers[i]+=", "+e[2]:u.headers[i]=e[2],u.rawHeaders.push(e[1],e[2])}}),u._charset="x-user-defined",!r.overrideMimeType){var c=u.rawHeaders["mime-type"];if(c){var f=c.match(/;\s*charset=([^;])(;|$)/);f&&(u._charset=f[1].toLowerCase())}u._charset||(u._charset="utf-8")}}};a(u,s.Readable),u.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},u.prototype._onXHRProgress=function(){var t=this,e=t._xhr,i=null;switch(t._mode){case"text:vbarray":if(e.readyState!==l.DONE)break;try{i=new o.VBArray(e.responseBody).toArray()}catch(t){}if(null!==i){t.push(new n(i));break}case"text":try{i=e.responseText}catch(e){t._mode="text:vbarray";break}if(i.length>t._pos){var r=i.substr(t._pos);if("x-user-defined"===t._charset){for(var a=new n(r.length),s=0;s<r.length;s++)a[s]=255&r.charCodeAt(s);t.push(a)}else t.push(r,t._charset);t._pos=i.length}break;case"arraybuffer":if(e.readyState!==l.DONE||!e.response)break;i=e.response,t.push(new n(new Uint8Array(i)));break;case"moz-chunked-arraybuffer":if(i=e.response,e.readyState!==l.LOADING||!i)break;t.push(new n(new Uint8Array(i)));break;case"ms-stream":if(i=e.response,e.readyState!==l.LOADING)break;var u=new o.MSStreamReader;u.onprogress=function(){u.result.byteLength>t._pos&&(t.push(new n(new Uint8Array(u.result.slice(t._pos)))),t._pos=u.result.byteLength)},u.onload=function(){t.push(null)},u.readAsArrayBuffer(i)}t._xhr.readyState===l.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,i(33),i(23).Buffer,i(12))},function(t,e,i){"use strict";(function(e,n){var o=i(48);t.exports=_;var r,a=i(97);_.ReadableState=y;i(62).EventEmitter;var s=function(t,e){return t.listeners(e).length},l=i(101),u=i(63).Buffer,d=e.Uint8Array||function(){};var h=i(41);h.inherits=i(20);var c=i(162),f=void 0;f=c&&c.debuglog?c.debuglog("stream"):function(){};var p,g=i(163),m=i(102);h.inherits(_,l);var v=["error","close","destroy","pause","resume"];function y(t,e){t=t||{};var n=e instanceof(r=r||i(24));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var o=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:n&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=i(65).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function _(t){if(r=r||i(24),!(this instanceof _))return new _(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function b(t,e,i,n,o){var r,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,S(t)}(t,a)):(o||(r=function(t,e){var i;n=e,u.isBuffer(n)||n instanceof d||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var n;return i}(a,e)),r?t.emit("error",r):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===u.prototype||(e=function(t){return u.from(t)}(e)),n?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):E(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!i?(e=a.decoder.write(e),a.objectMode||0!==e.length?E(t,a,e,!1):C(t,a)):E(t,a,e,!1))):n||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function E(t,e,i,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,n?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&S(t)),C(t,e)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=u.from(t,e),e=""),i=!0),b(this,t,e,!1,i)},_.prototype.unshift=function(t){return b(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return p||(p=i(65).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var w=8388608;function T(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=w?t=w:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?o.nextTick(x,t):x(t))}function x(t){f("emit readable"),t.emit("readable"),O(t)}function C(t,e){e.readingMore||(e.readingMore=!0,o.nextTick(I,t,e))}function I(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function A(t){f("readable nexttick read 0"),t.read(0)}function M(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),O(t),e.flowing&&!e.reading&&t.read(0)}function O(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function D(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,n=1,o=i.data;t-=o.length;for(;i=i.next;){var r=i.data,a=t>r.length?r.length:t;if(a===r.length?o+=r:o+=r.slice(0,t),0===(t-=a)){a===r.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=r.slice(a));break}++n}return e.length-=n,o}(t,e):function(t,e){var i=u.allocUnsafe(t),n=e.head,o=1;n.data.copy(i),t-=n.data.length;for(;n=n.next;){var r=n.data,a=t>r.length?r.length:t;if(r.copy(i,i.length-t,0,a),0===(t-=a)){a===r.length?(++o,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=r.slice(a));break}++o}return e.length-=o,i}(t,e);return n}(t,e.buffer,e.decoder),i);var i}function R(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,o.nextTick(N,e,t))}function N(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function k(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}_.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?R(this):S(this),null;if(0===(t=T(t,e))&&e.ended)return 0===e.length&&R(this),null;var n,o=e.needReadable;return f("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",o=!0),e.ended||e.reading?f("reading or ended",o=!1):o&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=T(i,e))),null===(n=t>0?D(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&R(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,f("pipe count=%d opts=%j",r.pipesCount,e);var l=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?d:_;function u(e,n){f("onunpipe"),e===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,f("cleanup"),t.removeListener("close",v),t.removeListener("finish",y),t.removeListener("drain",h),t.removeListener("error",m),t.removeListener("unpipe",u),i.removeListener("end",d),i.removeListener("end",_),i.removeListener("data",g),c=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function d(){f("onend"),t.end()}r.endEmitted?o.nextTick(l):i.once("end",l),t.on("unpipe",u);var h=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,O(t))}}(i);t.on("drain",h);var c=!1;var p=!1;function g(e){f("ondata"),p=!1,!1!==t.write(e)||p||((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==k(r.pipes,t))&&!c&&(f("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,p=!0),i.pause())}function m(e){f("onerror",e),_(),t.removeListener("error",m),0===s(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",y),_()}function y(){f("onfinish"),t.removeListener("close",v),_()}function _(){f("unpipe"),i.unpipe(t)}return i.on("data",g),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",m),t.once("close",v),t.once("finish",y),t.emit("pipe",i),r.flowing||(f("pipe resume"),i.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i),this);if(!t){var n=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;r<o;r++)n[r].emit("unpipe",this,i);return this}var a=k(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i),this)},_.prototype.on=function(t,e){var i=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&S(this):o.nextTick(A,this))}return i},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,o.nextTick(M,t,e))}(this,t)),this},_.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this,i=this._readableState,n=!1;for(var o in t.on("end",function(){if(f("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(o){(f("wrapped data"),i.decoder&&(o=i.decoder.write(o)),i.objectMode&&null==o)||(i.objectMode||o&&o.length)&&(e.push(o)||(n=!0,t.pause()))}),t)void 0===this[o]&&"function"==typeof t[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));for(var r=0;r<v.length;r++)t.on(v[r],this.emit.bind(this,v[r]));return this._read=function(e){f("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=D}).call(this,i(12),i(33))},function(t,e,i){t.exports=i(62).EventEmitter},function(t,e,i){"use strict";var n=i(48);function o(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,r=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return r||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(o,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(n.nextTick(o,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,i){"use strict";t.exports=a;var n=i(24),o=i(41);function r(t,e){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),n(t);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);n.call(this,t),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush(function(e,i){l(t,e,i)}):l(this,null,null)}function l(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}o.inherits=i(20),o.inherits(a,n),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,i){var n=this._transformState;if(n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var i=this;n.prototype._destroy.call(this,t,function(t){e(t),i.emit("close")})}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(34)),a=n(i(182)),s=n(i(212)),l=n(i(71)),u=n(i(117)),d=n(i(247)),h=n(i(259)),c=n(i(260)),f=n(i(69)),p=n(i(54)),g=n(i(67)),m=n(i(261)),v=n(i(263)),y=n(i(264)),_=n(i(265)),b=n(i(53)),E=n(i(275)),w=n(i(276)),T=n(i(3)),S=n(i(9)),x=n(i(2)),C=n(i(4)),I=n(i(116)),A=n(i(0)),M=i(124),O=n(i(277)),D=n(i(282)),R=n(i(287)),N=n(i(289)),k=i(10),P=n(i(290)),L=n(i(68)),F=n(i(6)),B=i(35);function U(){var t="You must first call initialize() and set a source before calling this method",e="You must first call initialize() and set a valid source and view before calling this method",i="You must first call attachView() to set the video element before calling this method",n="You must first call attachSource() with a valid source before calling this method",U="MediaPlayer not initialized!",j="Playback minimum drift has an invalid value! Use a number from 0 to 0.5",H="Playback maximum drift has an invalid value! Use a number greater or equal to 0",G=this.context,z=(0,x.default)(G).getInstance(),Y=(0,T.default)(G).getInstance(),V=void 0,q=void 0,W=void 0,K=void 0,X=void 0,Q=void 0,Z=void 0,J=void 0,$=void 0,tt=void 0,et=void 0,it=void 0,nt=void 0,ot=void 0,rt=void 0,at=void 0,st=void 0,lt=void 0,ut=void 0,dt=void 0,ht=void 0,ct=void 0,ft=void 0,pt=void 0,gt=void 0,mt=void 0,vt=void 0,yt=void 0;function _t(){return!!W&&!!gt.getElement()}function bt(){return(0,M.getVersionString)()}function Et(){if(!Z)throw e;return ht.isPaused()}function wt(t){var e=Ft();if(!e)return 0;var i=ht.getLiveDelay(),n=e.range.start+t;return n>e.range.end-i&&(n=e.range.end-i),n}function Tt(t){if(!Z)throw e;var i=Mt().currentTime;if(void 0!==t)i=dt.getTimeRelativeToStreamId(i,t);else if(ht.getIsDynamic()){var n=Ft();i=null===n?0:St()-(n.range.end-n.time)}return i}function St(){if(!Z)throw e;var t=Mt().duration;if(ht.getIsDynamic()){var i,n=Ft();if(!n)return 0;t=(i=n.range.end-n.range.start)<n.manifestInfo.DVRWindowSize?i:n.manifestInfo.DVRWindowSize}return t}function xt(t){(0,B.checkParameterType)(t,"boolean"),J=t}function Ct(){st.restoreDefaultUTCTimingSources()}function It(){return ct}function At(t){return at.getReadOnlyMetricsFor(t)}function Mt(){if(!gt.getElement())throw i;return gt.getElement()}function Ot(t){if(!X)throw U;gt.setElement(t),t&&(Lt(),function(){if(nt)return;var t=dashjs.MetricsReporting;if("function"==typeof t){var e=t(G).create();nt=e.createMetricsReporting({debug:Y,eventBus:z,mediaElement:Mt(),dashManifestModel:ft,metricsModel:at,events:C.default,constants:o.default,metricsConstants:r.default})}}(),function(){if(ot)return;var t=dashjs.MssHandler;"function"==typeof t&&(S.default.extend(t.errors),ot=t(G).create({eventBus:z,mediaPlayerModel:st,metricsModel:at,manifestModel:pt,playbackController:ht,protectionController:it,baseURLController:(0,u.default)(G).getInstance(),errHandler:lt,events:C.default,constants:o.default,debug:Y,initSegmentType:k.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:P.default,ISOBoxer:L.default}))}(),dt&&dt.switchToVideoElement()),Z&&kt(),Ut()}function Dt(e){if(!Q)throw t;var i=dt.getActiveStreamInfo();return et.getTracksFor(e,i)}function Rt(t){if(!X)throw U;"string"==typeof t&&vt.initialize(t),W=t,(Q||Z)&&kt(),_t()&&Ut()}function Nt(){if(!Q)throw t;var e=dt.getActiveStreamInfo();return e?dt.getStreamById(e.id):null}function kt(){Z=!1,Q=!1,rt.reset(),dt.reset(),ht.reset(),$.reset(),et.reset(),mt.reset(),it&&(st.getKeepProtectionMediaKeys()?it.stop():(it.reset(),it=null,Lt()))}function Pt(){return(0,d.default)(G).create({errHandler:lt,metricsModel:at,mediaPlayerModel:st,requestModifier:(0,p.default)(G).getInstance(),mssHandler:ot})}function Lt(){if(it)return it;var t=dashjs.Protection;if("function"==typeof t){var e=t(G).create();return C.default.extend(t.events),I.default.extend(t.events,{publicOnly:!0}),S.default.extend(t.errors),ut||(ut=(0,c.default)(G).getInstance()),it=e.createProtectionSystem({debug:Y,errHandler:lt,videoModel:gt,capabilities:ut,eventBus:z,events:C.default,BASE64:P.default,constants:o.default})}return null}function Ft(){var t=at.getReadOnlyMetricsFor(o.default.VIDEO)||at.getReadOnlyMetricsFor(o.default.AUDIO);return ct.getCurrentDVRInfo(t)}function Bt(t){var e=Ft();return e?t+(e.manifestInfo.availableFrom.getTime()/1e3+e.range.start):0}function Ut(){var t;!Q&&W&&(Q=!0,q.info("Streaming Initialized"),t=Pt(),dt||(dt=(0,s.default)(G).getInstance()),et.setConfig({domStorage:yt}),dt.setConfig({capabilities:ut,manifestLoader:t,manifestModel:pt,dashManifestModel:ft,mediaPlayerModel:st,protectionController:it,adapter:rt,metricsModel:at,dashMetrics:ct,errHandler:lt,timelineConverter:tt,videoModel:gt,playbackController:ht,domStorage:yt,abrController:$,mediaController:et,textController:mt}),ht.setConfig({streamController:dt,metricsModel:at,dashMetrics:ct,manifestModel:pt,mediaPlayerModel:st,dashManifestModel:ft,adapter:rt,videoModel:gt,timelineConverter:tt,uriFragmentModel:vt}),$.setConfig({streamController:dt,domStorage:yt,mediaPlayerModel:st,metricsModel:at,dashMetrics:ct,manifestModel:pt,videoModel:gt,adapter:rt}),$.createAbrRulesCollection(),mt.setConfig({errHandler:lt,manifestModel:pt,dashManifestModel:ft,mediaController:et,streamController:dt,videoModel:gt}),dt.initialize(J,K),"string"==typeof W?dt.load(W):dt.loadWithManifest(W)),!Z&&_t()&&(Z=!0,q.info("Playback Initialized"))}return V={initialize:function(t,e,i){if(ut||(ut=(0,c.default)(G).getInstance()),lt=(0,h.default)(G).getInstance(),!ut.supportsMediaSource())return lt.capabilityError("mediasource"),void lt.error(new F.default(S.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,S.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE));X||(X=!0,tt=(0,N.default)(G).getInstance(),$||($=(0,b.default)(G).getInstance()),ht||(ht=(0,a.default)(G).getInstance()),et||(et=(0,l.default)(G).getInstance()),rt=(0,O.default)(G).getInstance(),ft=(0,D.default)(G).getInstance({timelineConverter:tt,errHandler:lt,BASE64:P.default}),pt=(0,v.default)(G).getInstance(),ct=(0,R.default)(G).getInstance({manifestModel:pt,dashManifestModel:ft}),at=(0,_.default)(G).getInstance(),mt=(0,g.default)(G).getInstance(),yt=(0,w.default)(G).getInstance({mediaPlayerModel:st}),rt.setConfig({dashManifestModel:ft}),Ct(),xt(void 0===i||i),t&&Ot(t),e&&Rt(e),q.info("[dash.js "+bt()+"] MediaPlayer has been initialized"))},setConfig:function(t){t&&(t.capabilities&&(ut=t.capabilities),t.streamController&&(dt=t.streamController),t.playbackController&&(ht=t.playbackController),t.mediaPlayerModel&&(st=t.mediaPlayerModel),t.abrController&&($=t.abrController),t.mediaController&&(et=t.mediaController))},on:function(t,e,i){z.on(t,e,i)},off:function(t,e,i){z.off(t,e,i)},extend:function(t,e,i){A.default.extend(t,e,i,G)},attachView:Ot,attachSource:Rt,isReady:_t,preload:function(){if(gt.getElement()||Q)return!1;if(!W)throw n;Ut()},play:function(){if(!Z)throw e;(!J||Et()&&Z)&&ht.play()},isPaused:Et,pause:function(){if(!Z)throw e;ht.pause()},isSeeking:function(){if(!Z)throw e;return ht.isSeeking()},isDynamic:function(){if(!Z)throw e;return ht.getIsDynamic()},seek:function(t){if(!Z)throw e;if((0,B.checkParameterType)(t,"number"),isNaN(t))throw o.default.BAD_ARGUMENT_ERROR;var i=ht.getIsDynamic()?wt(t):t;ht.seek(i)},setPlaybackRate:function(t){Mt().playbackRate=t},getPlaybackRate:function(){return Mt().playbackRate},setMute:function(t){(0,B.checkParameterType)(t,"boolean"),Mt().muted=t},isMuted:function(){return Mt().muted},setVolume:function(t){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw o.default.BAD_ARGUMENT_ERROR;Mt().volume=t},getVolume:function(){return Mt().volume},time:Tt,duration:St,timeAsUTC:function(){if(!Z)throw e;return Tt()<0?NaN:Bt(Tt())},durationAsUTC:function(){if(!Z)throw e;return Bt(St())},getActiveStream:Nt,getDVRWindowSize:function(){var t=Ft();return t?t.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:wt,convertToTimeCode:function(t){t=Math.max(t,0);var e=Math.floor(t/3600),i=Math.floor(t%3600/60),n=Math.floor(t%3600%60);return(0===e?"":e<10?"0"+e.toString()+":":e.toString()+":")+(i<10?"0"+i.toString():i.toString())+":"+(n<10?"0"+n.toString():n.toString())},formatUTC:function(t,e,i){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],o=new Date(1e3*t),r=o.toLocaleDateString(e),a=o.toLocaleTimeString(e,{hour12:i});return n?a+" "+r:a},getVersion:bt,getDebug:function(){return Y},getBufferLength:function(t){var e,i=[o.default.VIDEO,o.default.AUDIO,o.default.FRAGMENTED_TEXT];return t?-1!==i.indexOf(t)?(e=It().getCurrentBufferLevel(At(t)))||NaN:(q.warn("getBufferLength requested for invalid type"),NaN):(e=i.map(function(t){return Dt(t).length>0?It().getCurrentBufferLevel(At(t)):Number.MAX_VALUE}).reduce(function(t,e){return Math.min(t,e)}))===Number.MAX_VALUE?NaN:e},getTTMLRenderingDiv:function(){return gt?gt.getTTMLRenderingDiv():null},getVideoElement:Mt,getSource:function(){if(!W)throw n;return W},setLiveDelayFragmentCount:function(t){st.setLiveDelayFragmentCount(t)},setLiveDelay:function(t){st.setLiveDelay(t)},getLiveDelay:function(){return st.getLiveDelay()},getCurrentLiveLatency:function(){if(!X)throw U;return Z?ht.getCurrentLiveLatency():NaN},useSuggestedPresentationDelay:function(t){st.setUseSuggestedPresentationDelay(t)},enableLastBitrateCaching:function(t,e){st.setLastBitrateCachingInfo(t,e)},enableLastMediaSettingsCaching:function(t,e){st.setLastMediaSettingsCachingInfo(t,e)},setMaxAllowedBitrateFor:function(t,e){$.setMaxAllowedBitrateFor(t,e)},getMaxAllowedBitrateFor:function(t){return $.getMaxAllowedBitrateFor(t)},getTopBitrateInfoFor:function(e){if(!Q)throw t;return $.getTopBitrateInfoFor(e)},setMinAllowedBitrateFor:function(t,e){$.setMinAllowedBitrateFor(t,e)},getMinAllowedBitrateFor:function(t){return $.getMinAllowedBitrateFor(t)},setMaxAllowedRepresentationRatioFor:function(t,e){$.setMaxAllowedRepresentationRatioFor(t,e)},getMaxAllowedRepresentationRatioFor:function(t){return $.getMaxAllowedRepresentationRatioFor(t)},setAutoPlay:xt,getAutoPlay:function(){return J},setScheduleWhilePaused:function(t){st.setScheduleWhilePaused(t)},getScheduleWhilePaused:function(){return st.getScheduleWhilePaused()},getDashMetrics:It,getMetricsFor:At,getQualityFor:function(e){if(!Q)throw t;if(e===o.default.IMAGE){var i=Nt();if(!i)return-1;var n=i.getThumbnailController();return n?n.getCurrentTrackIndex():-1}return $.getQualityFor(e,dt.getActiveStreamInfo())},setQualityFor:function(e,i){if(!Q)throw t;if(e===o.default.IMAGE){var n=Nt();if(!n)return;var r=n.getThumbnailController();r&&r.setTrackByIndex(i)}$.setPlaybackQuality(e,dt.getActiveStreamInfo(),i)},updatePortalSize:function(){$.setElementSize(),$.setWindowResizeEventCalled(!0)},getLimitBitrateByPortal:function(){return $.getLimitBitrateByPortal()},setLimitBitrateByPortal:function(t){$.setLimitBitrateByPortal(t)},getUsePixelRatioInLimitBitrateByPortal:function(){return $.getUsePixelRatioInLimitBitrateByPortal()},setUsePixelRatioInLimitBitrateByPortal:function(t){$.setUsePixelRatioInLimitBitrateByPortal(t)},setTextDefaultLanguage:function(t){void 0===mt&&(mt=(0,g.default)(G).getInstance()),mt.setTextDefaultLanguage(t)},getTextDefaultLanguage:function(){return void 0===mt&&(mt=(0,g.default)(G).getInstance()),mt.getTextDefaultLanguage()},setTextDefaultEnabled:function(t){void 0===mt&&(mt=(0,g.default)(G).getInstance()),mt.setTextDefaultEnabled(t)},getTextDefaultEnabled:function(){return void 0===mt&&(mt=(0,g.default)(G).getInstance()),mt.getTextDefaultEnabled()},enableText:function(t){void 0===mt&&(mt=(0,g.default)(G).getInstance()),mt.enableText(t)},enableForcedTextStreaming:function(t){void 0===mt&&(mt=(0,g.default)(G).getInstance()),mt.enableForcedTextStreaming(t)},isTextEnabled:function(){return void 0===mt&&(mt=(0,g.default)(G).getInstance()),mt.isTextEnabled()},setTextTrack:function(t){if(!Z)throw e;void 0===mt&&(mt=(0,g.default)(G).getInstance()),mt.setTextTrack(t)},getBitrateInfoListFor:function(e){if(!Q)throw t;var i=Nt();return i?i.getBitrateListFor(e):[]},setInitialBitrateFor:function(t,e){$.setInitialBitrateFor(t,e)},getInitialBitrateFor:function(e){if(!Q)throw t;return $.getInitialBitrateFor(e)},setInitialRepresentationRatioFor:function(t,e){$.setInitialRepresentationRatioFor(t,e)},getInitialRepresentationRatioFor:function(t){return $.getInitialRepresentationRatioFor(t)},getStreamsFromManifest:function(e){if(!Q)throw t;return rt.getStreamsInfo(e)},getTracksFor:Dt,getTracksForTypeFromManifest:function(e,i,n){if(!Q)throw t;return(n=n||rt.getStreamsInfo(i,1)[0])?rt.getAllMediaInfoForType(n,e,i):[]},getCurrentTrackFor:function(e){if(!Q)throw t;var i=dt.getActiveStreamInfo();return et.getCurrentTrackFor(e,i)},setInitialMediaSettingsFor:function(t,e){if(!X)throw U;et.setInitialSettings(t,e)},getInitialMediaSettingsFor:function(t){if(!X)throw U;return et.getInitialSettings(t)},setCurrentTrack:function(e){if(!Q)throw t;et.setTrack(e)},getTrackSwitchModeFor:function(t){if(!X)throw U;return et.getSwitchMode(t)},setTrackSwitchModeFor:function(t,e){if(!X)throw U;et.setSwitchMode(t,e)},setSelectionModeForInitialTrack:function(t){if(!X)throw U;et.setSelectionModeForInitialTrack(t)},getSelectionModeForInitialTrack:function(){if(!X)throw U;return et.getSelectionModeForInitialTrack()},setFastSwitchEnabled:function(t){st.setFastSwitchEnabled(t)},getFastSwitchEnabled:function(){return st.getFastSwitchEnabled()},setMovingAverageMethod:function(t){st.setMovingAverageMethod(t)},getMovingAverageMethod:function(){return st.getMovingAverageMethod()},getAutoSwitchQualityFor:function(t){return $.getAutoSwitchBitrateFor(t)},setAutoSwitchQualityFor:function(t,e){$.setAutoSwitchBitrateFor(t,e)},setABRStrategy:function(t){st.setABRStrategy(t)},getABRStrategy:function(){return st.getABRStrategy()},useDefaultABRRules:function(t){st.setUseDefaultABRRules(t)},addABRCustomRule:function(t,e,i){st.addABRCustomRule(t,e,i)},removeABRCustomRule:function(t){st.removeABRCustomRule(t)},removeAllABRCustomRule:function(){st.removeABRCustomRule()},setBandwidthSafetyFactor:function(t){st.setBandwidthSafetyFactor(t)},getBandwidthSafetyFactor:function(){return st.getBandwidthSafetyFactor()},getAverageThroughput:function(t){var e=$.getThroughputHistory();return e?e.getAverageThroughput(t):0},setAbandonLoadTimeout:function(t){st.setAbandonLoadTimeout(t)},retrieveManifest:function(t,e){var i=Pt(),n=this;z.on(C.default.INTERNAL_MANIFEST_LOADED,function t(o){o.error?e(null,o.error):e(o.manifest),z.off(C.default.INTERNAL_MANIFEST_LOADED,t,n),i.reset()},n),vt.initialize(t),i.load(t)},addUTCTimingSource:function(t,e){st.addUTCTimingSource(t,e)},removeUTCTimingSource:function(t,e){st.removeUTCTimingSource(t,e)},clearDefaultUTCTimingSources:function(){st.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:Ct,setBufferToKeep:function(t){st.setBufferToKeep(t)},setBufferAheadToKeep:function(t){st.setBufferAheadToKeep(t)},setBufferPruningInterval:function(t){st.setBufferPruningInterval(t)},setStableBufferTime:function(t){st.setStableBufferTime(t)},getStableBufferTime:function(){return st.getStableBufferTime()},setBufferTimeAtTopQuality:function(t){st.setBufferTimeAtTopQuality(t)},getBufferTimeAtTopQuality:function(){return st.getBufferTimeAtTopQuality()},setBufferTimeAtTopQualityLongForm:function(t){st.setBufferTimeAtTopQualityLongForm(t)},getBufferTimeAtTopQualityLongForm:function(){return st.getBufferTimeAtTopQualityLongForm()},setFragmentLoaderRetryAttempts:function(t){st.setRetryAttemptsForType(k.HTTPRequest.MEDIA_SEGMENT_TYPE,t)},setFragmentLoaderRetryInterval:function(t){st.setRetryIntervalForType(k.HTTPRequest.MEDIA_SEGMENT_TYPE,t)},setManifestLoaderRetryAttempts:function(t){st.setRetryAttemptsForType(k.HTTPRequest.MPD_TYPE,t)},setManifestLoaderRetryInterval:function(t){st.setRetryIntervalForType(k.HTTPRequest.MPD_TYPE,t)},setXHRWithCredentialsForType:function(t,e){st.setXHRWithCredentialsForType(t,e)},getXHRWithCredentialsForType:function(t){return st.getXHRWithCredentialsForType(t)},setJumpGaps:function(t){st.setJumpGaps(t)},getJumpGaps:function(){return st.getJumpGaps()},setSmallGapLimit:function(t){st.setSmallGapLimit(t)},getSmallGapLimit:function(){return st.getSmallGapLimit()},setLowLatencyEnabled:function(t){st.setLowLatencyEnabled(t)},getLowLatencyEnabled:function(){return st.getLowLatencyEnabled()},setCatchUpPlaybackRate:function(t){st.setCatchUpPlaybackRate(t)},getCatchUpPlaybackRate:function(){return st.getCatchUpPlaybackRate()},setLowLatencyMinDrift:function(t){if("number"!=typeof t||isNaN(t)||t<0||t>.5)throw j;st.setLowLatencyMinDrift(t)},getLowLatencyMinDrift:function(){return st.getLowLatencyMinDrift()},setLowLatencyMaxDriftBeforeSeeking:function(t){if("number"!=typeof t||isNaN(t)||t<0)throw H;st.setLowLatencyMaxDriftBeforeSeeking(t)},getLowLatencyMaxDriftBeforeSeeking:function(){return st.getLowLatencyMaxDriftBeforeSeeking()},setManifestUpdateRetryInterval:function(t){st.setManifestUpdateRetryInterval(t)},getManifestUpdateRetryInterval:function(){return st.getManifestUpdateRetryInterval()},setLongFormContentDurationThreshold:function(t){st.setLongFormContentDurationThreshold(t)},setSegmentOverlapToleranceTime:function(t){st.setSegmentOverlapToleranceTime(t)},setCacheLoadThresholdForType:function(t,e){st.setCacheLoadThresholdForType(t,e)},getProtectionController:function(){return Lt()},attachProtectionController:function(t){it=t},setProtectionData:function(t){K=t,dt&&dt.setProtectionData(K)},enableManifestDateHeaderTimeSource:function(t){st.setUseManifestDateHeaderTimeSource(t)},displayCaptionsOnTop:function(t){var e=(0,f.default)(G).getInstance();e.setConfig({videoModel:gt}),e.initialize(),e.displayCConTop(t)},attachVideoContainer:function(t){q.warn("attachVideoContainer method has been deprecated and will be removed in dash.js v3.0.0")},attachTTMLRenderingDiv:function(t){if(!gt.getElement())throw i;gt.setTTMLRenderingDiv(t)},getCurrentTextTrackIndex:function(){var t=NaN;return mt&&(t=mt.getCurrentTrackIdx()),t},getUseDeadTimeLatencyForAbr:function(){return $.getUseDeadTimeLatency()},setUseDeadTimeLatencyForAbr:function(t){$.setUseDeadTimeLatency(t)},getThumbnail:function(t,e){if(t<0)return null;var i=ht.getIsDynamic()?wt(t):t,n=dt.getStreamForTime(i);if(null===n)return null;var o=n.getThumbnailController();if(!o)return null;var r=dt.getTimeRelativeToStreamId(i,n.getId());return o.get(r,e)},keepProtectionMediaKeys:function(t){st.setKeepProtectionMediaKeys(t)},reset:function(){Rt(null),Ot(null),K=null,it&&(it.reset(),it=null),nt&&(nt.reset(),nt=null)}},q=Y.getLogger(V),X=!1,Z=!1,Q=!1,J=!0,it=null,K=null,rt=null,C.default.extend(I.default),st=(0,y.default)(G).getInstance(),gt=(0,E.default)(G).getInstance(),vt=(0,m.default)(G).getInstance(),V}U.__dashjs_factory_name="MediaPlayer";var j=A.default.getClassFactory(U);j.events=I.default,j.errors=S.default,A.default.updateClassFactory(U.__dashjs_factory_name,j),e.default=j,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(3)),r=n(i(6)),a=n(i(2)),s=n(i(4)),l=n(i(0)),u=n(i(67)),d=n(i(9)),h=.1;function c(t,e,i,n){var l=this.context,c=(0,a.default)(l).getInstance(),f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=[],_=[],b=i;function E(){try{return g.buffered}catch(t){return p.error("getAllBufferRanges exception: "+t.message),null}}function w(){if(y.length>0){var t=y.shift();g.updating?C(g,t):(t(),w())}}function T(){g.updating||w()}function S(){g.updating||w()}function x(){p.error("SourceBufferSink error",e.type)}function C(t,e){y.push(e),t.updating||w()}return f={getAllBufferRanges:E,getBuffer:function(){return g},append:function(t){t?(_.push(t),m||C(g,function t(){var e=this;var i=this;_.length>0&&function(){m=!0;var n=_[0];_.splice(0,1);var o=[],a=function(){var e=E();!function(t,e,i,n){e&&e.length>0&&e.length<i.length&&function(t,e){for(var i=0;i<t.length;i++){var n=Math.round(t.start(i)),o=Math.round(t.end(i));if(o===e.start||n===e.end||e.start>=n&&e.end<=o)return!0}return!1}(e,n)&&c.trigger(s.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:t,from:i.end(i.length-2),to:i.start(i.length-1),unintended:!0})}(i,o,e,n),_.length>0?t.call(this):(m=!1,b&&b({chunk:n}))};try{0===n.bytes.length?a.call(e):(o=E(),g.appendBuffer?g.appendBuffer(n.bytes):g.append(n.bytes,n),C(g,a.bind(e)))}catch(e){p.fatal('SourceBuffer append failed "'+e+'"'),_.length>0?t():m=!1,b&&b({chunk:n,error:new r.default(e.code,e.message)})}}()}.bind(this))):b({chunk:t,error:new r.default(d.default.APPEND_ERROR_CODE,d.default.APPEND_ERROR_MESSAGE)})},remove:function(e,i,n){var o=this;C(g,function(){try{e>=0&&i>e&&(n||"ended"!==t.readyState)&&g.remove(e,i),C(g,function(){c.trigger(s.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:o,from:e,to:i,unintended:!1})})}catch(t){c.trigger(s.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:o,from:e,to:i,unintended:!1,error:new r.default(t.code,t.message)})}})},abort:function(){try{"open"===t.readyState?g.abort():g.setTextTrack&&"ended"===t.readyState&&g.abort()}catch(t){p.error('SourceBuffer append abort failed: "'+t+'"')}_=[]},reset:function(e){if(g){if("function"==typeof g.removeEventListener&&(g.removeEventListener("updateend",S,!1),g.removeEventListener("error",x,!1),g.removeEventListener("abort",x,!1)),clearInterval(v),!e){try{g.getClassName&&"TextSourceBuffer"===g.getClassName()||t.removeSourceBuffer(g)}catch(t){p.error("Failed to remove source buffer from media source.")}g=null}m=!1}_=[],b=null},updateTimestampOffset:function(t){g.timestampOffset===t||isNaN(t)||C(g,function(){g.timestampOffset=t})},hasDiscontinuitiesAfter:function(t){try{var e=E();if(e&&e.length>1)for(var i=0,n=e.length;i<n;i++)if(i>0&&t<e.start(i)&&e.start(i)>e.end(i-1)+h)return!0}catch(t){p.error("hasDiscontinuities exception: "+t.message)}return!1}},function(){p=(0,o.default)(l).getInstance().getLogger(f),m=!1;var i=e.codec;try{if(i.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");(g=n||t.addSourceBuffer(i)).changeType&&n&&(p.debug("Doing period transition with changeType"),g.changeType(i));if("function"==typeof g.addEventListener)try{g.addEventListener("updateend",S,!1),g.addEventListener("error",x,!1),g.addEventListener("abort",x,!1)}catch(t){v=setInterval(T,50)}else v=setInterval(T,50)}catch(t){if(!e.isText&&-1===i.indexOf('codecs="stpp')&&-1===i.indexOf('codecs="wvtt'))throw t;var r=(0,u.default)(l).getInstance();g=r.getTextSourceBuffer()}}(),f}c.__dashjs_factory_name="SourceBufferSink";var f=l.default.getClassFactory(c);e.default=f,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n},a=i(35);function s(){return{customTimeRangeArray:[],length:0,add:function(t,e){var i=0;for(i=0;i<this.customTimeRangeArray.length&&t>this.customTimeRangeArray[i].start;i++);for(this.customTimeRangeArray.splice(i,0,{start:t,end:e}),i=0;i<this.customTimeRangeArray.length-1;i++)this.mergeRanges(i,i+1)&&i--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(t,e){for(var i=0;i<this.customTimeRangeArray.length;i++)if(t<=this.customTimeRangeArray[i].start&&e>=this.customTimeRangeArray[i].end)this.customTimeRangeArray.splice(i,1),i--;else{if(t>this.customTimeRangeArray[i].start&&e<this.customTimeRangeArray[i].end){this.customTimeRangeArray.splice(i+1,0,{start:e,end:this.customTimeRangeArray[i].end}),this.customTimeRangeArray[i].end=t;break}t>this.customTimeRangeArray[i].start&&t<this.customTimeRangeArray[i].end?this.customTimeRangeArray[i].end=t:e>this.customTimeRangeArray[i].start&&e<this.customTimeRangeArray[i].end&&(this.customTimeRangeArray[i].start=e)}this.length=this.customTimeRangeArray.length},mergeRanges:function(t,e){var i=this.customTimeRangeArray[t],n=this.customTimeRangeArray[e];return i.start<=n.start&&n.start<=i.end&&i.end<=n.end?(i.end=n.end,this.customTimeRangeArray.splice(e,1),!0):n.start<=i.start&&i.start<=n.end&&n.end<=i.end?(i.start=n.start,this.customTimeRangeArray.splice(e,1),!0):n.start<=i.start&&i.start<=n.end&&i.end<=n.end?(this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&n.end<=i.end&&(this.customTimeRangeArray.splice(e,1),!0)},start:function(t){return(0,a.checkInteger)(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].start},end:function(t){return(0,a.checkInteger)(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].end}}}s.__dashjs_factory_name="CustomTimeRanges",e.default=r.default.getClassFactory(s),t.exports=e.default},function(t,e,i){e.generateISD=i(189).generateISD,e.fromXML=i(190).fromXML,e.renderHTML=i(197).render},function(t,e,i){"use strict";!function(t){var e={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function(t){var i=t;return e.hasOwnProperty(t)&&(i=e[t]),String.fromCharCode(i)},n={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},o={17:2,18:4,21:6,22:8,23:10,19:13,20:15},r={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},a={25:2,26:4,29:6,30:8,31:10,27:13,28:15},s=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],l={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){var i=this.verboseFilter[t];this.verboseLevel>=i&&console.log(this.time+" ["+t+"] "+e)}},u=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].toString(16));return e},d=function(t,e,i,n,o){this.foreground=t||"white",this.underline=e||!1,this.italics=i||!1,this.background=n||"black",this.flash=o||!1};d.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(t){for(var e=["foreground","underline","italics","background","flash"],i=0;i<e.length;i++){var n=e[i];t.hasOwnProperty(n)&&(this[n]=t[n])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},copy:function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var h=function(t,e,i,n,o,r){this.uchar=t||" ",this.penState=new d(e,i,n,o,r)};h.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(t,e){this.uchar=t,this.penState.copy(e)},setPenState:function(t){this.penState.copy(t)},equals:function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},copy:function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var c=function(){this.chars=[];for(var t=0;t<32;t++)this.chars.push(new h);this.pos=0,this.currPenState=new d};c.prototype={equals:function(t){for(var e=!0,i=0;i<32;i++)if(!this.chars[i].equals(t.chars[i])){e=!1;break}return e},copy:function(t){for(var e=0;e<32;e++)this.chars[e].copy(t.chars[e])},isEmpty:function(){for(var t=!0,e=0;e<32;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},setCursor:function(t){this.pos!==t&&(this.pos=t),this.pos<0?(l.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>32&&(l.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(t){var e=this.pos+t;if(t>1)for(var i=this.pos+1;i<e+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(e)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(t){t>=144&&this.backSpace();var e=i(t);this.pos>=32?l.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},clearFromPos:function(t){var e;for(e=t;e<32;e++)this.chars[e].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var t=[],e=!0,i=0;i<32;i++){var n=this.chars[i].uchar;" "!==n&&(e=!1),t.push(n)}return e?"":t.join("")},setPenStyles:function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)}};var f=function(){this.rows=[];for(var t=0;t<15;t++)this.rows.push(new c);this.currRow=14,this.nrRollUpRows=null,this.reset()};f.prototype={reset:function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},equals:function(t){for(var e=!0,i=0;i<15;i++)if(!this.rows[i].equals(t.rows[i])){e=!1;break}return e},copy:function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},isEmpty:function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(t){this.rows[this.currRow].insertChar(t)},setPen:function(t){this.rows[this.currRow].setPenStyles(t)},moveCursor:function(t){this.rows[this.currRow].moveCursor(t)},setCursor:function(t){l.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},setPAC:function(t){l.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.currRow=e;var i=this.rows[this.currRow];if(null!==t.indent){var n=t.indent,o=Math.max(n-1,0);i.setCursor(t.indent),t.color=i.chars[o].penState.foreground}var r={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(r)},setBkgData:function(t){l.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},setRollUpRows:function(t){this.nrRollUpRows=t},rollUp:function(){if(null!==this.nrRollUpRows){l.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),l.log("INFO","Rolling up")}else l.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(t){t=t||!1;for(var e=[],i="",n=-1,o=0;o<15;o++){var r=this.rows[o].getTextString();r&&(n=o+1,t?e.push("Row "+n+': "'+r+'"'):e.push(r.trim()))}return e.length>0&&(i=t?"["+e.join(" | ")+"]":e.join("\n")),i},getTextAndFormat:function(){return this.rows}};var p=function(t,e){this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new f,this.nonDisplayedMemory=new f,this.lastOutputScreen=new f,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(t){this.outputFilter=t},setPAC:function(t){this.writeScreen.setPAC(t)},setBkgData:function(t){this.writeScreen.setBkgData(t)},setMode:function(t){t!==this.mode&&(this.mode=t,l.log("INFO","MODE="+t),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},insertChars:function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";l.log("INFO",i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(l.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){l.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){l.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){l.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(t){l.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},cc_FON:function(){l.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){l.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){l.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){l.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){l.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){l.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){l.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(l.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,l.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(t){l.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},cc_MIDROW:function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var i=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][i]}l.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},outputDataUpdate:function(){var t=l.time;null!==t&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(t,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}};var g=function(t,e,i){this.field=t||1,this.outputs=[e,i],this.channels=[new p(1,e),new p(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};g.prototype={getHandler:function(t){return this.channels[t].getHandler()},setHandler:function(t,e){this.channels[t].setHandler(e)},addData:function(t,e){var i,n,o,r=!1;this.lastTime=t,l.setTime(t);for(var a=0;a<e.length;a+=2)if(n=127&e[a],o=127&e[a+1],n>=16&&n<=31&&n===this.lastCmdA&&o===this.lastCmdB)this.lastCmdA=null,this.lastCmdB=null,l.log("DEBUG","Repeated command ("+u([n,o])+") is dropped");else if(0!==n||0!==o){if(l.log("DATA","["+u([e[a],e[a+1]])+"] -> ("+u([n,o])+")"),(i=this.parseCmd(n,o))||(i=this.parseMidrow(n,o)),i||(i=this.parsePAC(n,o)),i||(i=this.parseBackgroundAttributes(n,o)),!i)if(r=this.parseChars(n,o))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(r);else l.log("WARNING","No channel found yet. TEXT-MODE?");i?this.dataCounters.cmd+=2:r?this.dataCounters.char+=2:(this.dataCounters.other+=2,l.log("WARNING","Couldn't parse cleaned data "+u([n,o])+" orig: "+u([e[a],e[a+1]])))}else this.dataCounters.padding+=2},parseCmd:function(t,e){var i=null;if(!((20===t||21===t||28===t||29===t)&&32<=e&&e<=47)&&!((23===t||31===t)&&33<=e&&e<=35))return!1;i=20===t||21===t||23===t?1:2;var n=this.channels[i-1];return 20===t||21===t||28===t||29===t?32===e?n.cc_RCL():33===e?n.cc_BS():34===e?n.cc_AOF():35===e?n.cc_AON():36===e?n.cc_DER():37===e?n.cc_RU(2):38===e?n.cc_RU(3):39===e?n.cc_RU(4):40===e?n.cc_FON():41===e?n.cc_RDC():42===e?n.cc_TR():43===e?n.cc_RTD():44===e?n.cc_EDM():45===e?n.cc_CR():46===e?n.cc_ENM():47===e&&n.cc_EOC():n.cc_TO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=i,!0},parseMidrow:function(t,e){var i=null;if((17===t||25===t)&&32<=e&&e<=47){if((i=17===t?1:2)!==this.currChNr)return l.log("ERROR","Mismatch channel in midrow parsing"),!1;var n=this.channels[i-1];return n.insertChars([32]),n.cc_MIDROW(e),l.log("DEBUG","MIDROW ("+u([t,e])+")"),this.lastCmdA=t,this.lastCmdB=e,!0}return!1},parsePAC:function(t,e){var i,s=null;if(!((17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127)&&!((16===t||24===t)&&64<=e&&e<=95))return!1;i=t<=23?1:2,s=64<=e&&e<=95?1===i?n[t]:r[t]:1===i?o[t]:a[t];var l=this.interpretPAC(s,e);return this.channels[i-1].setPAC(l),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=i,!0},interpretPAC:function(t,e){var i=e,n={color:null,italics:!1,indent:null,underline:!1,row:t};return i=e>95?e-96:e-64,n.underline=1==(1&i),i<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((i-16)/2),n},parseChars:function(t,e){var n=null,o=null,r=null;if(t>=25?(n=2,r=t-8):(n=1,r=t),17<=r&&r<=19){var a=e;a=17===r?e+80:18===r?e+112:e+144,l.log("INFO","Special char '"+i(a)+"' in channel "+n),o=[a],this.lastCmdA=t,this.lastCmdB=e}else 32<=t&&t<=127&&(o=0===e?[t]:[t,e],this.lastCmdA=null,this.lastCmdB=null);if(o){var s=u(o);l.log("DEBUG","Char codes =  "+s.join(","))}return o},parseBackgroundAttributes:function(t,e){var i,n,o;return((16===t||24===t)&&32<=e&&e<=47||(23===t||31===t)&&45<=e&&e<=47)&&(i={},16===t||24===t?(n=Math.floor((e-32)/2),i.background=s[n],e%2==1&&(i.background=i.background+"_semi")):45===e?i.background="transparent":(i.foreground="black",47===e&&(i.underline=!0)),o=t<24?1:2,this.channels[o-1].setBkgData(i),this.lastCmdA=t,this.lastCmdB=e,!0)},reset:function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)}};t.logger=l,t.PenState=d,t.CaptionScreen=f,t.Cea608Parser=g,t.findCea608Nalus=function(t,e,i){for(var n=0,o=e,r=[],a=function(t,e,i,n){if(4!==t||e<8)return null;var o=i.getUint8(n),r=i.getUint16(n+1),a=i.getUint32(n+3),s=i.getUint8(n+7);return 181==o&&49==r&&1195456820==a&&3==s};o<e+i;){if(n=t.getUint32(o),6===(31&t.getUint8(o+4)))for(var s=o+5,l=-1;s<o+4+n-1;){l=0;for(var u=255;255===u;)l+=u=t.getUint8(s),s++;var d=0;for(u=255;255===u;)d+=u=t.getUint8(s),s++;a(l,d,t,s)&&r.push([s,d]),s+=d}o+=n+4}return r},t.extractCea608DataFromRange=function(t,e){var i=e[0],n=[[],[]];i+=8;var o=31&t.getUint8(i);i+=2;for(var r=0;r<o;r++){var a=t.getUint8(i),s=4&a,l=3&a;i++;var u=t.getUint8(i);i++;var d=t.getUint8(i);i++,s&&(127&u)+(127&d)!=0&&(0===l?(n[0].push(u),n[0].push(d)):1===l&&(n[1].push(u),n[1].push(d)))}return n}}(e)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"extend",value:function(t,e){if(t){var i=!!e&&e.override,n=!!e&&e.publicOnly;for(var o in t)!t.hasOwnProperty(o)||this[o]&&!i||n&&-1===t[o].indexOf("public_")||(this[o]=t[o])}}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(202)),r=n(i(203)),a=n(i(204)),s=n(i(205)),l=n(i(206)),u=n(i(207)),d=n(i(0)),h=n(i(14)),c="qualitySwitchRules",f="abandonFragmentRules";function p(t){t=t||{};var e=this.context,i=t.mediaPlayerModel,n=t.metricsModel,d=t.dashMetrics,p=void 0,g=void 0;function m(t){return t.filter(function(t){return t.quality>h.default.NO_CHANGE})}function v(t){var i,n={},o=void 0,r=void 0,a=void 0,s=void 0;if(0!==t.length){for(n[h.default.PRIORITY.STRONG]=h.default.NO_CHANGE,n[h.default.PRIORITY.WEAK]=h.default.NO_CHANGE,n[h.default.PRIORITY.DEFAULT]=h.default.NO_CHANGE,o=0,i=t.length;o<i;o+=1)(r=t[o]).quality!==h.default.NO_CHANGE&&(n[r.priority]=n[r.priority]>h.default.NO_CHANGE?Math.min(n[r.priority],r.quality):r.quality);return n[h.default.PRIORITY.WEAK]!==h.default.NO_CHANGE&&(a=n[h.default.PRIORITY.WEAK]),n[h.default.PRIORITY.DEFAULT]!==h.default.NO_CHANGE&&(a=n[h.default.PRIORITY.DEFAULT]),n[h.default.PRIORITY.STRONG]!==h.default.NO_CHANGE&&(a=n[h.default.PRIORITY.STRONG]),a!==h.default.NO_CHANGE&&(s=a),(0,h.default)(e).create(s)}}return{initialize:function(){p=[],g=[],i.getUseDefaultABRRules()&&(p.push((0,u.default)(e).create({metricsModel:n,dashMetrics:d,mediaPlayerModel:i})),p.push((0,o.default)(e).create({metricsModel:n,dashMetrics:d})),p.push((0,r.default)(e).create({metricsModel:n,dashMetrics:d})),p.push((0,l.default)(e).create()),p.push((0,s.default)(e).create()),g.push((0,a.default)(e).create({metricsModel:n,dashMetrics:d,mediaPlayerModel:i}))),i.getABRCustomRules().forEach(function(t){t.type===c&&p.push(t.rule(e).create()),t.type===f&&g.push(t.rule(e).create())})},reset:function(){[p,g].forEach(function(t){t&&t.length&&t.forEach(function(t){return t.reset&&t.reset()})}),p=[],g=[]},getMaxQuality:function(t){return v(m(p.map(function(e){return e.getMaxIndex(t)})))||(0,h.default)(e).create()},shouldAbandonFragment:function(t){return v(m(g.map(function(e){return e.shouldAbandon(t)})))||(0,h.default)(e).create()}}}p.__dashjs_factory_name="ABRRulesCollection";var g=d.default.getClassFactory(p);g.QUALITY_SWITCH_RULES=c,g.ABANDON_FRAGMENT_RULES=f,d.default.updateSingletonFactory(p.__dashjs_factory_name,g),e.default=g,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN},t.exports=e.default},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function t(){n(this,t),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};o.INITIAL_PLAYOUT_START_REASON="initial_playout",o.SEEK_START_REASON="seek",o.RESUME_FROM_PAUSE_START_REASON="resume",o.METRICS_COLLECTION_START_REASON="metrics_collection_start";var r=function t(){n(this,t),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};r.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",r.REBUFFERING_REASON="rebuffering",r.USER_REQUEST_STOP_REASON="user_request",r.END_OF_PERIOD_STOP_REASON="end_of_period",r.END_OF_CONTENT_STOP_REASON="end_of_content",r.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",r.FAILURE_STOP_REASON="failure",e.PlayList=o,e.PlayListTrace=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(54)),r=n(i(73)),a=n(i(6)),s=n(i(4)),l=n(i(2)),u=n(i(42)),d=n(i(0)),h=n(i(3)),c=i(10),f=n(i(26)),p=n(i(43)),g=n(i(9));function m(){var t=this.context,e=(0,l.default)(t).getInstance(),i=void 0,n=void 0,d=void 0,m=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0;function w(){if(!E||!E.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function T(t){if(t.url){var e=new f.default;return e.type=t.init?c.HTTPRequest.INIT_SEGMENT_TYPE:c.HTTPRequest.MEDIA_SEGMENT_TYPE,e.url=t.url,e.range=t.range.start+"-"+t.range.end,e}}function S(t,i,n){t?e.trigger(s.default.SEGMENTS_LOADED,{segments:t,representation:i,mediaType:n}):e.trigger(s.default.SEGMENTS_LOADED,{segments:null,representation:i,mediaType:n,error:new a.default(g.default.SEGMENT_BASE_LOADER_ERROR_CODE,g.default.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}return i={setConfig:function(t){t.baseURLController&&(E=t.baseURLController),t.metricsModel&&(y=t.metricsModel),t.mediaPlayerModel&&(_=t.mediaPlayerModel),t.errHandler&&(d=t.errHandler)},initialize:function(){m=(0,u.default)(t).getInstance(),v=(0,o.default)(t).getInstance(),b=(0,p.default)(t).create({errHandler:d,metricsModel:y,mediaPlayerModel:_,requestModifier:v})},loadInitialization:function t(i,o){w();var r=null,a=E.resolve(i.path),l=o||{init:!0,url:a?a.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};n.debug("Start searching for initialization.");var u=T(l);b.load({request:u,success:function(n){l.bytesLoaded=l.range.end,(r=m.findInitRange(n))?(i.range=r,e.trigger(s.default.INITIALIZATION_LOADED,{representation:i})):(l.range.end=l.bytesLoaded+l.bytesToLoad,t(i,l))},error:function(){e.trigger(s.default.INITIALIZATION_LOADED,{representation:i})}}),n.debug("Perform init search: "+l.url)},loadSegments:function t(e,i,o,a,s){if(w(),o&&(void 0===o.start||void 0===o.end)){var l=o?o.toString().split("-"):null;o=l?{start:parseFloat(l[0]),end:parseFloat(l[1])}:null}s=s||S;var u=null,d=null,h=!!o,c=E.resolve(e.path),f={init:!1,url:c?c.url:void 0,range:h?o:{start:0,end:1500},searching:!h,bytesLoaded:a?a.bytesLoaded:0,bytesToLoad:1500},p=T(f);b.load({request:p,success:function(o){var a=f.bytesToLoad,l=o.byteLength;if(f.bytesLoaded=f.range.end-f.range.start,u=m.parse(o),(d=u.getBox("sidx"))&&d.isComplete){var h=d.references,c=void 0,p=void 0;null!=h&&h.length>0&&(c=1===h[0].reference_type),c?function(){n.debug("Initiate multiple SIDX load."),f.range.end=f.range.start+d.size;var o=void 0,r=void 0,a=void 0,l=void 0,u=[],c=0,p=(d.offset||f.range.start)+d.size,g=function(t){t?(u=u.concat(t),++c>=r&&s(u,e,i)):s(null,e,i)};for(o=0,r=h.length;o<r;o++)a=p,l=p+h[o].referenced_size-1,p+=h[o].referenced_size,t(e,null,{start:a,end:l},f,g)}():(n.debug("Parsing segments from SIDX."),p=function(t,e){for(var i=t.references,n=i.length,o=t.timescale,a=t.earliest_presentation_time,s=e.range.start+t.offset+t.first_offset+t.size,l=[],u=void 0,d=void 0,h=void 0,c=void 0,f=0;f<n;f++)h=i[f].subsegment_duration,c=i[f].referenced_size,(u=new r.default).duration=h,u.startTime=a,u.timescale=o,d=s+c-1,u.mediaRange=s+"-"+d,l.push(u),a+=h,s+=c;return l}(d,f),s(p,e,i))}else{if(d)f.range.start=d.offset||f.range.start,f.range.end=f.range.start+(d.size||a);else{if(l<f.bytesLoaded)return void s(null,e,i);var g=u.getLastBox();g&&g.size?(f.range.start=g.offset+g.size,f.range.end=f.range.start+a):f.range.end+=a}t(e,i,f.range,f,s)}},error:function(){s(null,e,i)}}),n.debug("Perform SIDX load: "+f.url)},reset:function(){b.abort(),b=null,d=null,m=null,v=null}},n=(0,h.default)(t).getInstance().getLogger(i),i}m.__dashjs_factory_name="SegmentBaseLoader",e.default=d.default.getSingletonFactory(m),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(13)),a=n(i(0)),s=n(i(237)),l=n(i(21)),u=i(27),d=n(i(114)),h=n(i(42)),c=n(i(75)),f=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function p(t){var e,i=this.context,n=t.dashManifestModel,a=t.adapter,p=t.baseURLController,g=t.stream,m=t.timelineConverter,v=t.metricsModel,y=t.mediaPlayerModel,_=t.errHandler,b=(0,l.default)(i).getInstance(),E=void 0,w=void 0,T=void 0,S=void 0,x=void 0;function C(){A(),T=(0,c.default)(i).create({}),x=(0,h.default)(i).getInstance(),(S=(0,d.default)(i).getInstance()).setConfig({baseURLController:p,metricsModel:v,mediaPlayerModel:y,errHandler:_}),function(){if(!g||!n||!a)return;var t=g.getStreamInfo();if(!t)return;var e=a.getMediaInfoForType(t,o.default.IMAGE);if(!e)return;var i=a.getDataForMedia(e);if(!i)return;var s=n.getRepresentationsForAdaptation(i);s&&s.length>0&&s.forEach(function(t){t.segmentInfoType===r.default.SEGMENT_TEMPLATE&&t.segmentDuration>0&&t.media&&I(t),t.segmentInfoType===r.default.SEGMENT_BASE&&I(t,!0)});E.length>0&&(E.sort(function(t,e){return t.bitrate-e.bitrate}),w=E.length-1)}()}function I(t,e){var i=new s.default;i.id=t.id,i.bitrate=t.bandwidth,i.width=t.width,i.height=t.height,i.tilesHor=1,i.tilesVert=1,t.essentialProperties&&t.essentialProperties.forEach(function(t){if(f.indexOf(t.schemeIdUri)>=0&&t.value){var e=t.value.split("x");2!==e.length||isNaN(e[0])||isNaN(e[1])||(i.tilesHor=parseInt(e[0],10),i.tilesVert=parseInt(e[1],10))}}),e?S.loadSegments(t,o.default.IMAGE,t.indexRange,{},function(t,e){var o=[];t=function(t,e){var i,o=[],r=0,a=void 0,s=void 0,l=void 0;for(a=0,i=t.length;a<i;a++)s=t[a],l=(0,u.getTimeBasedSegment)(m,n.getIsDynamic(),e,s.startTime,s.duration,s.timescale,s.media,s.mediaRange,r),o.push(l),l=null,r++;return o}(t,e),i.segmentDuration=t[0].duration,i.readThumbnail=function(i,n){var r=null;o.some(function(t){if(t.start<=i&&t.end>i)return r=t.url,!0}),r?n(r):t.some(function(t){if(t.mediaStartTime<=i&&t.mediaStartTime+t.duration>i){var r=p.resolve(e.path);return T.load({method:"get",url:r.url,request:{range:t.mediaRange,responseType:"arraybuffer"},onload:function(e){var i=x.getSamplesInfo(e.target.response),r=new Blob([e.target.response.slice(i.sampleList[0].offset,i.sampleList[0].offset+i.sampleList[0].size)],{type:"image/jpeg"}),a=window.URL.createObjectURL(r);o.push({start:t.mediaStartTime,end:t.mediaStartTime+t.duration,url:a}),n&&n(a)}}),!0}})}}):(i.startNumber=t.startNumber,i.segmentDuration=t.segmentDuration,i.timescale=t.timescale,i.templateUrl=function(t){var e=b.isRelative(t.media)?b.resolve(t.media,p.resolve(t.path).url):t.media;if(!e)return"";return(0,u.replaceIDForTemplate)(e,t.id)}(t)),i.tilesHor>0&&i.tilesVert>0&&(i.widthPerTile=i.width/i.tilesHor,i.heightPerTile=i.height/i.tilesVert,E.push(i))}function A(){E=[],w=-1}return e={initialize:C,getTracks:function(){return E},reset:A,setTrackByIndex:function(t){E&&0!==E.length&&(t>=E.length&&(t=E.length-1),w=t)},getCurrentTrack:function(){return w<0?null:E[w]},getCurrentTrackIndex:function(){return w}},C(),e}e.THUMBNAILS_SCHEME_ID_URIS=f,p.__dashjs_factory_name="ThumbnailTracks",e.default=a.default.getClassFactory(p)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};var o,r=i(50),a=(o=r)&&o.__esModule?o:{default:o},s=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged"}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a["default"]),e}());e.default=s,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(240)),r=n(i(242)),a=n(i(21)),s=n(i(119)),l=n(i(0)),u=n(i(2)),d=n(i(4));function h(){var t=void 0,e=void 0,i=this.context,n=(0,u.default)(i).getInstance(),l=(0,a.default)(i).getInstance(),h=void 0,c=void 0;function f(t){h.invalidateSelectedIndexes(t.entry)}return t={reset:function(){h.reset(),c.reset()},initialize:function(t){var i;h.setConfig({dashManifestModel:e}),c.setConfig({dashManifestModel:e}),i=t,h.update(i),c.chooseSelectorFromManifest(i)},resolve:function(t){var e=h.getForPath(t).reduce(function(t,e){var i=c.select(e);return i?(l.isRelative(i.url)?t.url=l.resolve(i.url,t.url):(t.url=i.url,t.serviceLocation=i.serviceLocation),t.availabilityTimeOffset=i.availabilityTimeOffset,t.availabilityTimeComplete=i.availabilityTimeComplete,t):new s.default},new s.default);if(!l.isRelative(e.url))return e},setConfig:function(t){t.baseURLTreeModel&&(h=t.baseURLTreeModel),t.baseURLSelector&&(c=t.baseURLSelector),t.dashManifestModel&&(e=t.dashManifestModel)}},h=(0,o.default)(i).create(),c=(0,r.default)(i).create(),n.on(d.default.SERVICE_LOCATION_BLACKLIST_CHANGED,f,t),t}h.__dashjs_factory_name="BaseURLController",e.default=l.default.getSingletonFactory(h),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(241));function a(){return{areEqual:function(t,e){return(0,r.default)(t,e)}}}a.__dashjs_factory_name="ObjectUtils",e.default=o.default.getSingletonFactory(a),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e||"",this.serviceLocation=i||e||"",this.dvb_priority=n||1,this.dvb_weight=o||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};n.DEFAULT_DVB_PRIORITY=1,n.DEFAULT_DVB_WEIGHT=1,e.default=n,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};function o(t){return t&&t.__esModule?t:{default:t}}var r=o(i(1)),a=o(i(26)),s=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.url=t||null,this.type=i||null,this.mediaType=r.default.STREAM,this.responseType=""}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a["default"]),e}();e.default=s,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t=t||{},function(){void 0===t.escapeMode&&(t.escapeMode=!0);void 0===t.attributePrefix&&(t.attributePrefix="_");t.arrayAccessForm=t.arrayAccessForm||"none",t.emptyNodeForm=t.emptyNodeForm||"text",void 0===t.enableToStringFunc&&(t.enableToStringFunc=!0);t.arrayAccessFormPaths=t.arrayAccessFormPaths||[],void 0===t.skipEmptyTextNodesForObj&&(t.skipEmptyTextNodesForObj=!0);void 0===t.stripWhitespaces&&(t.stripWhitespaces=!0);t.datetimeAccessFormPaths=t.datetimeAccessFormPaths||[],void 0===t.useDoubleQuotes&&(t.useDoubleQuotes=!1);t.xmlElementsFilter=t.xmlElementsFilter||[],t.jsonPropertiesFilter=t.jsonPropertiesFilter||[],void 0===t.keepCData&&(t.keepCData=!1);void 0===t.ignoreRoot&&(t.ignoreRoot=!1)}();var e={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function i(t){var e=t.localName;return null==e&&(e=t.baseName),null!=e&&""!=e||(e=t.nodeName),e}function n(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):t}function o(t,e,i,n){for(var o=0;o<t.length;o++){var r=t[o];if("string"==typeof r){if(r==n)break}else if(r instanceof RegExp){if(r.test(n))break}else if("function"==typeof r&&r(e,i,n))break}return o!=t.length}function r(e,i,n){switch(t.arrayAccessForm){case"property":e[i]instanceof Array?e[i+"_asArray"]=e[i]:e[i+"_asArray"]=[e[i]]}!(e[i]instanceof Array)&&t.arrayAccessFormPaths.length>0&&o(t.arrayAccessFormPaths,e,i,n)&&(e[i]=[e[i]])}function a(t){var e=t.split(/[-T:+Z]/g),i=new Date(e[0],e[1]-1,e[2]),n=e[5].split(".");if(i.setHours(e[3],e[4],n[0]),n.length>1&&i.setMilliseconds(n[1]),e[6]&&e[7]){var o=60*e[6]+Number(e[7]);o=0+("-"==(/\d\d-\d\d:\d\d$/.test(t)?"-":"+")?-1*o:o),i.setMinutes(i.getMinutes()-o-i.getTimezoneOffset())}else-1!==t.indexOf("Z",t.length-1)&&(i=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())));return i}function s(i,n,r,a){return!(n==e.ELEMENT_NODE&&t.xmlElementsFilter.length>0)||o(t.xmlElementsFilter,i,r,a)}function l(n,u){if(n.nodeType==e.DOCUMENT_NODE){for(var d=new Object,h=n.childNodes,c=0;c<h.length;c++){if((p=h[c]).nodeType==e.ELEMENT_NODE)if(t.ignoreRoot)d=l(p);else(d={})[g=i(p)]=l(p)}return d}if(n.nodeType==e.ELEMENT_NODE){(d=new Object).__cnt=0;var f=[];for(h=n.childNodes,c=0;c<h.length;c++){var p,g=i(p=h[c]);if(p.nodeType!=e.COMMENT_NODE){var m=u+"."+g;if(s(d,p.nodeType,g,m))if(d.__cnt++,null==d[g]){var v=l(p,m);if("#text"!=g||/[^\s]/.test(v))(y={})[g]=v,f.push(y);d[g]=v,r(d,g,m)}else{null!=d[g]&&(d[g]instanceof Array||(d[g]=[d[g]],r(d,g,m)));var y;v=l(p,m);if("#text"!=g||/[^\s]/.test(v))(y={})[g]=v,f.push(y);d[g][d[g].length]=v}}}d.__children=f;for(var _=i(n),b=0;b<n.attributes.length;b++){var E=n.attributes[b];d.__cnt++;for(var w=E.value,T=0,S=t.matchers.length;T<S;T++){var x=t.matchers[T];x.test(E,_)&&(w=x.converter(E.value))}d[t.attributePrefix+E.name]=w}var C=function(t){return t.prefix}(n);return null!=C&&""!=C&&(d.__cnt++,d.__prefix=C),null!=d["#text"]&&(d.__text=d["#text"],d.__text instanceof Array&&(d.__text=d.__text.join("\n")),t.stripWhitespaces&&(d.__text=d.__text.trim()),delete d["#text"],"property"==t.arrayAccessForm&&delete d["#text_asArray"],d.__text=function(e,i,n){if(t.datetimeAccessFormPaths.length>0){var r=n.split(".#")[0];return o(t.datetimeAccessFormPaths,e,i,r)?a(e):e}return e}(d.__text,g,u+"."+g)),null!=d["#cdata-section"]&&(d.__cdata=d["#cdata-section"],delete d["#cdata-section"],"property"==t.arrayAccessForm&&delete d["#cdata-section_asArray"]),0==d.__cnt&&"text"==t.emptyNodeForm?d="":1==d.__cnt&&null!=d.__text?d=d.__text:1!=d.__cnt||null==d.__cdata||t.keepCData?d.__cnt>1&&null!=d.__text&&t.skipEmptyTextNodesForObj&&(t.stripWhitespaces&&""==d.__text||""==d.__text.trim())&&delete d.__text:d=d.__cdata,delete d.__cnt,!t.enableToStringFunc||null==d.__text&&null==d.__cdata||(d.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),d}if(n.nodeType==e.TEXT_NODE||n.nodeType==e.CDATA_SECTION_NODE)return n.nodeValue}function u(e,i,o,r){var a="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+i;if(null!=o)for(var s=0;s<o.length;s++){var l=o[s],u=e[l];t.escapeMode&&(u=n(u)),a+=" "+l.substr(t.attributePrefix.length)+"=",t.useDoubleQuotes?a+='"'+u+'"':a+="'"+u+"'"}return a+=r?"/>":">"}function d(t,e){return"</"+(null!=t.__prefix?t.__prefix+":":"")+e+">"}function h(e,i){return"property"==t.arrayAccessForm&&(n=i.toString(),o="_asArray",-1!==n.indexOf(o,n.length-o.length))||0==i.toString().indexOf(t.attributePrefix)||0==i.toString().indexOf("__")||e[i]instanceof Function;var n,o}function c(t){var e=0;if(t instanceof Object)for(var i in t)h(t,i)||e++;return e}function f(e,i,n){return 0==t.jsonPropertiesFilter.length||""==n||o(t.jsonPropertiesFilter,e,i,n)}function p(e){var i=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(t.attributePrefix)&&i.push(n);return i}function g(e){var i="";return e instanceof Object?i+=function(e){var i="";return null!=e.__cdata&&(i+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(t.escapeMode?i+=n(e.__text):i+=e.__text),i}(e):null!=e&&(t.escapeMode?i+=n(e):i+=e),i}function m(t,e){return""===t?e:t+"."+e}function v(t,e,i,n){var o="";if(0==t.length)o+=u(t,e,i,!0);else for(var r=0;r<t.length;r++)o+=u(t[r],e,p(t[r]),!1),o+=y(t[r],m(n,e)),o+=d(t[r],e);return o}function y(t,e){var i="";if(c(t)>0)for(var n in t)if(!h(t,n)&&(""==e||f(t,n,m(e,n)))){var o=t[n],r=p(o);if(null==o||null==o)i+=u(o,n,r,!0);else if(o instanceof Object)if(o instanceof Array)i+=v(o,n,r,e);else if(o instanceof Date)i+=u(o,n,r,!1),i+=o.toISOString(),i+=d(o,n);else{c(o)>0||null!=o.__text||null!=o.__cdata?(i+=u(o,n,r,!1),i+=y(o,m(e,n)),i+=d(o,n)):i+=u(o,n,r,!0)}else i+=u(o,n,r,!1),i+=g(o),i+=d(o,n)}return i+=g(t)}this.parseXmlString=function(t){var e;window.ActiveXObject||window;if(void 0===t)return null;if(window.DOMParser){var i=new window.DOMParser;try{(e=i.parseFromString(t,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(e=null)}catch(t){e=null}}else 0==t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),(e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t);return e},this.asArray=function(t){return void 0===t||null==t?[]:t instanceof Array?t:[t]},this.toXmlDateTime=function(t){return t instanceof Date?t.toISOString():"number"==typeof t?new Date(t).toISOString():null},this.asDateTime=function(t){return"string"==typeof t?a(t):t},this.xml2json=function(t){return l(t)},this.xml_str2json=function(t){var e=this.parseXmlString(t);return null!=e?this.xml2json(e):null},this.json2xml_str=function(t){return y(t,"")},this.json2xml=function(t){var e=this.json2xml_str(t);return this.parseXmlString(e)},this.getVersion=function(){return"1.2.0"}},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o,r=i(257),a=(o=r)&&o.__esModule?o:{default:o},s=function(){function t(e,i,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e||"",this._properties=[],this._children=n||[],Array.isArray(i)&&i.forEach(function(t){o._properties.push(new a.default(t))})}return n(t,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),t}();e.default=s,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.schemeIdUri="",this.value=""},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getVersionString=function(){return n};var n="2.9.3"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(298),r=(n=o)&&n.__esModule?n:{default:n};function a(t){t=t||{};var e={"urn:dvb:dash:reporting:2014":r.default},i=this.context,n=t.debug,o=t.metricsConstants;return{create:function(t,r){var a=void 0;try{(a=e[t.schemeIdUri](i).create({metricsConstants:o})).initialize(t,r)}catch(e){a=null,n.error("ReportingFactory: could not create Reporting with schemeIdUri "+t.schemeIdUri+" ("+e.message+")")}return a},register:function(t,i){e[t]=i},unregister:function(t){delete e[t]}}}a.__dashjs_factory_name="ReportingFactory",e.default=dashjs.FactoryMaker.getSingletonFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(302)),r=n(i(303)),a=n(i(304)),s=n(i(305));function l(t){var e=(t=t||{}).debug,i=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,n=this.context,l={BufferLevel:o.default,DVBErrors:r.default,HttpList:a.default,PlayList:s.default,RepSwitchList:s.default,TcpList:s.default};return{create:function(o,r){var a,s=o.match(i);if(s){try{(a=l[s[1]](n).create({eventBus:t.eventBus,metricsConstants:t.metricsConstants})).initialize(s[1],r,s[3],s[5])}catch(t){a=null,e.error("MetricsHandlerFactory: Could not create handler for type "+s[1]+" with args "+s[3]+", "+s[5]+" ("+t.message+")")}return a}},register:function(t,e){l[t]=e},unregister:function(t){delete l[t]}}}l.__dashjs_factory_name="MetricsHandlerFactory",e.default=dashjs.FactoryMaker.getSingletonFactory(l),t.exports=e.default},function(t,e,i){"use strict";function n(){return{reconstructFullMetricName:function(t,e,i){var n=t;return e&&(n+="("+e,i&&i.length&&(n+=","+i),n+=")"),n},validateN:function(t){if(!t)throw new Error("missing n");if(isNaN(t))throw new Error("n is NaN");if(t<0)throw new Error("n must be positive");return t}}}Object.defineProperty(e,"__esModule",{value:!0}),n.__dashjs_factory_name="HandlerHelpers",e.default=dashjs.FactoryMaker.getSingletonFactory(n),t.exports=e.default},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7)],void 0===(r="function"==typeof(n=function(t){return t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(327),i(7),i(82)],void 0===(r="function"==typeof(n=function(t){var e=!1;return t(document).on("mouseup",function(){e=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,o=1===i.which,r=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&t(i.target).closest(this.options.cancel).length;return!(o&&!r&&this._mouseCapture(i)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,0)))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(i){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&t.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,e=!1,i.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Scale 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11),i(132)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("scale",function(e,i){var n=t(this),o=e.mode,r=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"effect"!==o?0:100),a=t.extend(!0,{from:t.effects.scaledDimensions(n),to:t.effects.scaledDimensions(n,r,e.direction||"both"),origin:e.origin||["middle","center"]},e);e.fade&&(a.from.opacity=1,a.to.opacity=0),t.effects.effect.size.call(this,a,i)})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Size 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("size",function(e,i){var n,o,r,a=t(this),s=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],d=e.mode,h="effect"!==d,c=e.scale||"both",f=e.origin||["middle","center"],p=a.css("position"),g=a.position(),m=t.effects.scaledDimensions(a),v=e.from||m,y=e.to||t.effects.scaledDimensions(a,0);t.effects.createPlaceholder(a),"show"===d&&(r=v,v=y,y=r),o={from:{y:v.height/m.height,x:v.width/m.width},to:{y:y.height/m.height,x:y.width/m.width}},"box"!==c&&"both"!==c||(o.from.y!==o.to.y&&(v=t.effects.setTransition(a,l,o.from.y,v),y=t.effects.setTransition(a,l,o.to.y,y)),o.from.x!==o.to.x&&(v=t.effects.setTransition(a,u,o.from.x,v),y=t.effects.setTransition(a,u,o.to.x,y))),"content"!==c&&"both"!==c||o.from.y!==o.to.y&&(v=t.effects.setTransition(a,s,o.from.y,v),y=t.effects.setTransition(a,s,o.to.y,y)),f&&(n=t.effects.getBaseline(f,m),v.top=(m.outerHeight-v.outerHeight)*n.y+g.top,v.left=(m.outerWidth-v.outerWidth)*n.x+g.left,y.top=(m.outerHeight-y.outerHeight)*n.y+g.top,y.left=(m.outerWidth-y.outerWidth)*n.x+g.left),a.css(v),"content"!==c&&"both"!==c||(l=l.concat(["marginTop","marginBottom"]).concat(s),u=u.concat(["marginLeft","marginRight"]),a.find("*[width]").each(function(){var i=t(this),n=t.effects.scaledDimensions(i),r={height:n.height*o.from.y,width:n.width*o.from.x,outerHeight:n.outerHeight*o.from.y,outerWidth:n.outerWidth*o.from.x},a={height:n.height*o.to.y,width:n.width*o.to.x,outerHeight:n.height*o.to.y,outerWidth:n.width*o.to.x};o.from.y!==o.to.y&&(r=t.effects.setTransition(i,l,o.from.y,r),a=t.effects.setTransition(i,l,o.to.y,a)),o.from.x!==o.to.x&&(r=t.effects.setTransition(i,u,o.from.x,r),a=t.effects.setTransition(i,u,o.to.x,a)),h&&t.effects.saveStyle(i),i.css(r),i.animate(a,e.duration,e.easing,function(){h&&t.effects.restoreStyle(i)})})),a.animate(y,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){var e=a.offset();0===y.opacity&&a.css("opacity",v.opacity),h||(a.css("position","static"===p?"relative":p).offset(e),t.effects.saveStyle(a)),i()}})})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n=i(352);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){t.exports=!i(17)&&!i(38)(function(){return 7!=Object.defineProperty(i(135)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(16),o=i(22).document,r=n(o)&&n(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},function(t,e,i){var n=i(137);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){t.exports={default:i(358),__esModule:!0}},function(t,e,i){"use strict";var n=i(22),o=i(30),r=i(17),a=i(15),s=i(140),l=i(141).KEY,u=i(38),d=i(86),h=i(87),c=i(60),f=i(39),p=i(88),g=i(89),m=i(359),v=i(363),y=i(45),_=i(16),b=i(47),E=i(31),w=i(83),T=i(58),S=i(94),x=i(144),C=i(84),I=i(93),A=i(29),M=i(46),O=C.f,D=A.f,R=x.f,N=n.Symbol,k=n.JSON,P=k&&k.stringify,L=f("_hidden"),F=f("toPrimitive"),B={}.propertyIsEnumerable,U=d("symbol-registry"),j=d("symbols"),H=d("op-symbols"),G=Object.prototype,z="function"==typeof N&&!!I.f,Y=n.QObject,V=!Y||!Y.prototype||!Y.prototype.findChild,q=r&&u(function(){return 7!=S(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=O(G,e);n&&delete G[e],D(t,e,i),n&&t!==G&&D(G,e,n)}:D,W=function(t){var e=j[t]=S(N.prototype);return e._k=t,e},K=z&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},X=function(t,e,i){return t===G&&X(H,e,i),y(t),e=w(e,!0),y(i),o(j,e)?(i.enumerable?(o(t,L)&&t[L][e]&&(t[L][e]=!1),i=S(i,{enumerable:T(0,!1)})):(o(t,L)||D(t,L,T(1,{})),t[L][e]=!0),q(t,e,i)):D(t,e,i)},Q=function(t,e){y(t);for(var i,n=m(e=E(e)),o=0,r=n.length;r>o;)X(t,i=n[o++],e[i]);return t},Z=function(t){var e=B.call(this,t=w(t,!0));return!(this===G&&o(j,t)&&!o(H,t))&&(!(e||!o(this,t)||!o(j,t)||o(this,L)&&this[L][t])||e)},J=function(t,e){if(t=E(t),e=w(e,!0),t!==G||!o(j,e)||o(H,e)){var i=O(t,e);return!i||!o(j,e)||o(t,L)&&t[L][e]||(i.enumerable=!0),i}},$=function(t){for(var e,i=R(E(t)),n=[],r=0;i.length>r;)o(j,e=i[r++])||e==L||e==l||n.push(e);return n},tt=function(t){for(var e,i=t===G,n=R(i?H:E(t)),r=[],a=0;n.length>a;)!o(j,e=n[a++])||i&&!o(G,e)||r.push(j[e]);return r};z||(s((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=c(arguments.length>0?arguments[0]:void 0),e=function(i){this===G&&e.call(H,i),o(this,L)&&o(this[L],t)&&(this[L][t]=!1),q(this,t,T(1,i))};return r&&V&&q(G,t,{configurable:!0,set:e}),W(t)}).prototype,"toString",function(){return this._k}),C.f=J,A.f=X,i(145).f=x.f=$,i(59).f=Z,I.f=tt,r&&!i(61)&&s(G,"propertyIsEnumerable",Z,!0),p.f=function(t){return W(f(t))}),a(a.G+a.W+a.F*!z,{Symbol:N});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;et.length>it;)f(et[it++]);for(var nt=M(f.store),ot=0;nt.length>ot;)g(nt[ot++]);a(a.S+a.F*!z,"Symbol",{for:function(t){return o(U,t+="")?U[t]:U[t]=N(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!z,"Object",{create:function(t,e){return void 0===e?S(t):Q(S(t),e)},defineProperty:X,defineProperties:Q,getOwnPropertyDescriptor:J,getOwnPropertyNames:$,getOwnPropertySymbols:tt});var rt=u(function(){I.f(1)});a(a.S+a.F*rt,"Object",{getOwnPropertySymbols:function(t){return I.f(b(t))}}),k&&a(a.S+a.F*(!z||u(function(){var t=N();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],o=1;arguments.length>o;)n.push(arguments[o++]);if(i=e=n[1],(_(e)||void 0!==t)&&!K(t))return v(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!K(e))return e}),n[1]=e,P.apply(k,n)}}),N.prototype[F]||i(37)(N.prototype,F,N.prototype.valueOf),h(N,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},function(t,e,i){t.exports=i(37)},function(t,e,i){var n=i(60)("meta"),o=i(16),r=i(30),a=i(29).f,s=0,l=Object.isExtensible||function(){return!0},u=!i(38)(function(){return l(Object.preventExtensions({}))}),d=function(t){a(t,n,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,n)){if(!l(t))return"F";if(!e)return"E";d(t)}return t[n].i},getWeak:function(t,e){if(!r(t,n)){if(!l(t))return!0;if(!e)return!1;d(t)}return t[n].w},onFreeze:function(t){return u&&h.NEED&&l(t)&&!r(t,n)&&d(t),t}}},function(t,e,i){var n=i(30),o=i(31),r=i(360)(!1),a=i(91)("IE_PROTO");t.exports=function(t,e){var i,s=o(t),l=0,u=[];for(i in s)i!=a&&n(s,i)&&u.push(i);for(;e.length>l;)n(s,i=e[l++])&&(~r(u,i)||u.push(i));return u}},function(t,e,i){var n=i(29),o=i(45),r=i(46);t.exports=i(17)?Object.defineProperties:function(t,e){o(t);for(var i,a=r(e),s=a.length,l=0;s>l;)n.f(t,i=a[l++],e[i]);return t}},function(t,e,i){var n=i(31),o=i(145).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==r.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(n(t))}},function(t,e,i){var n=i(142),o=i(92).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},function(t,e,i){var n=i(30),o=i(47),r=i(91)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),n(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,i){"use strict";var n=i(61),o=i(15),r=i(140),a=i(37),s=i(95),l=i(411),u=i(87),d=i(146),h=i(39)("iterator"),c=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,i,p,g,m,v){l(i,e,p);var y,_,b,E=function(t){if(!c&&t in x)return x[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},w=e+" Iterator",T="values"==g,S=!1,x=t.prototype,C=x[h]||x["@@iterator"]||g&&x[g],I=C||E(g),A=g?T?E("entries"):I:void 0,M="Array"==e&&x.entries||C;if(M&&(b=d(M.call(new t)))!==Object.prototype&&b.next&&(u(b,w,!0),n||"function"==typeof b[h]||a(b,h,f)),T&&C&&"values"!==C.name&&(S=!0,I=function(){return C.call(this)}),n&&!v||!c&&!S&&x[h]||a(x,h,I),s[e]=I,s[w]=f,g)if(y={values:T?I:E("values"),keys:m?I:E("keys"),entries:A},v)for(_ in y)_ in x||r(x,_,y[_]);else o(o.P+o.F*(c||S),e,y);return y}},function(t,e,i){t.exports=i(149)},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n,o,r,a,s,l,u=p(i(150)),d=p(i(151)),h=p(i(347)),c=p(i(420)),f=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);e.default=t}(i(423)),p(i(425)));function p(t){return t&&t.__esModule?t:{default:t}}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var m="player",v="";function y(e,i,p){t("link[href='https://use.fontawesome.com/releases/v5.8.1/css/all.css']").length||t("<link/>",{rel:"stylesheet",type:"text/css",href:"https://use.fontawesome.com/releases/v5.8.1/css/all.css"}).appendTo("head"),t(e).append('<div id="eups-content-wrapper" class="editor"><div id="eups-player"></div><div id="eups-timeline"></div><div id="eups-annotationviewer"></div></div><div id="eups-editor-wrapper"><div id="eups-annotationeditor"></div></div>'),i.source=p.manifest||i.source,m=p.mode||m,l=p.eupsid||l,v=p.editor||v,n=new u.default,s=new f.default(document.getElementById("eups-annotationviewer")),o=new d.default(document.getElementById("eups-player")),r=new h.default(document.getElementById("eups-timeline")),a=new c.default(document.getElementById("eups-annotationeditor")),s.init(n,v),o.init(n,i,v,m,l),r.init(n),a.init(n),n.listen("annotationeditor","addannotation",this,_),n.listen("annotationeditor","updateannotation",this,_),n.listen("annotationeditor","updateAnnotationfromtimeline",this,_),n.listen("annotationeditor","deleteannotation",this,_),n.listen("player","mediaready",this,b),n.signal("main","eupsId",w()),void 0!==v&&t("#eups-content-wrapper").removeClass("editor").addClass("no-editor")}function _(t){var e="https://videoeditor.noterik.com/annotations/saveannotations.php?id="+encodeURIComponent(o.getVideoId())+"&eupsid="+w();fetch(e,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(a.getAnnotations())}).then(function(t){return t.json()}).then(function(t){}).catch(function(t){console.error("Could not save annotations")})}function b(t){"editor"==m&&n.signal("annotationviewer","edit",null);var e="https://videoeditor.noterik.com/annotations/getannotations.php?id="+encodeURIComponent(o.getVideoId())+"&eupsid="+w();fetch(e,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){return t.json()}).then(function(t){n.signal("main","loadannotations",t)}).catch(function(t){console.error("Could not retrieve annotations"),console.log(t)})}function E(){var t=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}),e=new Date;return e.setTime(e.getTime()+63072e6),document.cookie="eups_id="+t+";expires="+e.toUTCString(),t}function w(){if(null!=l)return l;var t=document.cookie.match("(^|;) ?eups_id=([^;]*)(;|$)");return t?t[2]:E()}e.default=function t(e,i,n){g(this,t),y(e,i,n=arguments.length>2?n:{})}}).call(this,i(5))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners=[]}return n(t,[{key:"signal",value:function(t,e,i){this.listeners.filter(function(i){return i.item==t&&i.event==e}).forEach(function(t){t.callback(i)})}},{key:"listen",value:function(t,e,i,n){var o={item:t,event:e,handler:i,callback:n};this.listeners.push(o)}}]),t}();e.default=o},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n,o,r,a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);e.default=t}(i(152));i(155),i(156),i(157),i(158),i(179),i(180),i(326),i(333);var s=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.elem=t,this.videoId="",this.canvasready=!1,this.avcomponent,this.timeupdate,this.manifest,this.editorurl,this.mode,this.eupsid,this.state={limitToRange:!1,autoSelectRange:!0,constrainNavigationToRange:!0,virtualCanvasEnabled:!0})}return a(e,[{key:"init",value:function(t,e,i,n,o){r=t,this.render(),this.createManifest(e),this.editorurl=i,this.mode=n,this.eupsid=o,r.listen("timeline","timeupdate",this,this.timeupdatefunction),r.listen("annotationviewer","timeupdate",this,this.timeupdatefunction)}},{key:"render",value:function(){this.createAVComponent()}},{key:"createAVComponent",value:function(){this.$avcomponent=t('<div id="iiif-av-component" class="iiif-av-component"></div>'),t(this.elem).append(this.$avcomponent);var e=this;o=this.avcomponent=new IIIFComponents.AVComponent({target:this.$avcomponent[0]}),this.avcomponent.on("mediaerror",function(e){t(".player").removeClass("player--loading");var i="Error: ";switch(e.code){case 1:i+="loading aborted";break;case 2:i+="network error";break;case 3:i+="decoding of media failed";break;case 4:i+="media format not suppported by this browser";break;default:i+="unknown"}t(".canvas-container").append("<div class='anno errormessage'>"+i+"</div>")}),this.avcomponent.on("log",function(t){console.log(t)}),this.avcomponent.on("canvasready",function(){this.canvasready||(this.canvasready=!0)}),this.avcomponent.on("play",function(){t(".playwrapper").hide(),e.timeupdate=setInterval(function(){return r.signal("player","timeupdate",e.avcomponent.getCurrentTime())},25)}),this.avcomponent.on("pause",function(){clearInterval(e.timeupdate)}),this.avcomponent.on("rangechanged",function(){console.log("range changed")}),this.avcomponent.on("mediaready",function(){var i=t('<button class="btn" title="Subtitles"><i class="av-icon av-icon-subtitles" aria-hidden="true"</i>Subtitles</button>');t(".controls-container").append(i),console.log(e.mode);var n=t('<button class="btn" title="More"><i class="av-icon av-icon-more" aria-hidden="true"></i>More</button>');n[0].addEventListener("click",function(e){e.preventDefault(),t(".moremenu").is(":visible")?t(".moremenu").hide():(t(".moremenu").css({bottom:t(".options-container").height(),left:t('.btn[title="More"]').offset().left-t(".player").offset().left-t(".moremenu").width()/2}),t(".moremenu").show())}),t(".controls-container").append(n),t(".canvas-container").append("<div class='anno playwrapper'><span class='playcircle'></span></div>"),t(".canvas-container").append("<div class='anno moremenu'><div id='display-annotations-link' class='moremenu-option'>Display annotations</div><div id='create-annotations-link' class='moremenu-option'>Create annotations</div></div>"),t("#create-annotations-link").on("click",function(){window.open(e.editorurl+"?mode=editor&manifest="+encodeURIComponent(e.manifest)+"&eupsid="+e.eupsId,"_blank")}),t(".playcircle").on("click",function(){t(".playwrapper").hide(),e.avcomponent.canvasInstances[0].play()}),r.signal("player","mediaready",e.deformatTimeToMs(e.avcomponent.canvasInstances[0]._$canvasDuration[0].innerText)),t(e.avcomponent.canvasInstances[0]._$canvasTimelineContainer).on("slide",function(t,e){r.signal("player","timeupdate",e.value)})}),this.avcomponent.on("fullscreen",function(){t(".moremenu").hide()});var i=t("#play-pause-combo");this.avcomponent.on("medialoaded",function(){i.text("play"),i.removeAttr("disabled")}),i.on("click",function(t){t.preventDefault(),this.avcomponent._isPlaying?(this.avcomponent.pause(),i.innerText("play")):(this.avcomponent.play(),i.innerText("pause"))})}},{key:"itemSelectListener",value:function(e){void 0===this.handler&&(this.handler=this),r.signal("player","manifest",e),this.handler.videoId=e,this.handler.loadManifest(e,function(e){console.log("SUCCESS: Manifest data loaded.",e.manifest);var i=e.getCanvases();i.length>1?initCanvasNavigation(i):t(".canvasNavigationContainer").hide()},function(t){console.error("ERROR: Could not load manifest data.",t)})}},{key:"loadManifest",value:function(t,e,i){var o=this;Manifold.loadManifest({iiifResourceUri:t,collectionIndex:0,manifestIndex:0,sequenceIndex:0,canvasIndex:0}).then(function(t){n=t,o.avcomponent.set({helper:n,limitToRange:o.state.limitToRange,autoSelectRange:o.state.autoSelectRange,constrainNavigationToRange:o.state.constrainNavigationToRange,virtualCanvasEnabled:o.state.virtualCanvasEnabled}),e(n),o.resize()}).catch(function(t){i(t)})}},{key:"resize",value:function(){var e=t(".playerContainer");e.height(.75*e.width()),this.avcomponent.resize()}},{key:"timeupdatefunction",value:function(t){o.setCurrentTime(t)}},{key:"deformatTimeToMs",value:function(t){for(var e=t.split(":"),i=(e=e.length>3?e.slice(e.length-3):e).length;i<3;i++)e.unshift(0);return 1e3*(3600*parseInt(e[0])+60*parseInt(e[1])+parseInt(e[2]))}},{key:"getVideoId",value:function(){return this.videoId}},{key:"createManifest",value:function(t){var e=void 0;t.source.endsWith(".json")||t.source.includes("/manifest/")?e=t.source:t.source.startsWith("EUS_")?e="https://videoeditor.noterik.com/manifest/euscreenmanifest.php?id="+t.source:(e="https://videoeditor.noterik.com/manifest/createmanifest.php?src="+t.source+"&duration="+t.duration+"&id="+t.id,t.width&&(e+="&width="+t.width),t.height&&(e+="&height="+t.height),t.mediatype&&(e+="&mediatype="+t.mediatype)),this.manifest=e,this.itemSelectListener(e)}}]),e}();e.default=s}).call(this,i(5))},function(t,e,i){var n=i(153);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(19)(n,o);n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(18)(!1)).push([t.i,".iiif-av-component {\n  position: relative;\n  overflow: hidden;\n  background: #000;\n  height: 100%;\n  width: 100%;\n  margin: 0 auto;\n  font-family: \"Open Sans\";\n}\n\n.iiif-av-component .player {\n  width: 100%;\n  height: 100%;\n}\n\n.iiif-av-component .player--loading {\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n  background-image: url(data:image/gif;base64,R0lGODlhFAAUAMQSAGxsbFpaWnh4eEZGRhwcHD8/PzU1NVJSUisrKwgICH5+fkxMTGNjYyUlJXJycnt7exISEoCAgAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1OTFjMzhjNS0xZmQyLTg5NGUtYjMyZi1kYTNkZWQ5NmQ5YjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Qzc0OEE1NDA5OTMzMTFFNUFBRjI5MkI3NTFFODJFRTYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Qzc0OEE1M0Y5OTMzMTFFNUFBRjI5MkI3NTFFODJFRTYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTkxYzM4YzUtMWZkMi04OTRlLWIzMmYtZGEzZGVkOTZkOWIzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU5MWMzOGM1LTFmZDItODk0ZS1iMzJmLWRhM2RlZDk2ZDliMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkAABIALAAAAAAUABQAAAVAoCSOZGmeaKqmSeu+LRpEdG0Hsq1H+DnvtZ7pB+TlikYfMjlcCktE4JMU3U1HVd1VlL2hCIiweExYmc/otHoUAgAh+QQJAAASACwAAAAAFAAUAAAFWqAkjmRpnmgqEgyhnkykHNA7GlEePUXyJg6dzoFQDYTI1gnyQCIVC1PA6YySGlSkwEcCZIWGEu6bA5gSCwW5gWJlAy+EV6io/QrN3MA2ShwUW3wkBGyChocSIQAh+QQFAAASACwAAAAAFAAUAAAFXKAkjmRpnmhaJsuimoYQKcQrNkCkR8wLBbsgApUYKIJBR8LUcCCfBRPh+Aw+IKZDFXkwQR7bHc1UCO96q1yYUTMhtg6DioFUDJaq6S6AtUkWEQANfiMJcoSIiSUhADs=);\n}\n\n.iiif-av-component .poster-container {\n  position: absolute;\n  width: 100%;\n  top: 0;\n}\n\n.iiif-av-component .poster-container .poster-image {\n  position: absolute;\n  background-color: #000;\n  background-size: contain;\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  cursor: pointer;\n}\n\n.iiif-av-component .poster-container .poster-image .btn {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n}\n\n.iiif-av-component .canvas-container {\n  position: relative;\n  width: 100%;\n  height: 100% !important;\n}\n\n.iiif-av-component .canvas-container video {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n\n.iiif-av-component .canvas-container .working-indicator {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  z-index: 10000;\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n  text-align: center;\n  padding-top: 30%;\n  box-sizing: border-box;\n  font-size: 20px;\n}\n\n.iiif-av-component .canvas-container .anno {\n  position: absolute;\n  /*border: 1px solid rgba(0,255,0,.4);*/\n  background: transparent;\n  font-size: 14px;\n  font-weight: bold;\n  color: #fff;\n}\n\n.iiif-av-component .range-timeline-container {\n  background: #14a4c3;\n  height: 4px;\n  border: none;\n  border-radius: 0;\n  cursor: pointer;\n}\n\n.iiif-av-component .canvas-timeline-container {\n  background: rgba(255,255,255,0.4);\n  height: 5px;\n  width: 0px;\n  border: none;\n  cursor: pointer;\n}\n\n.iiif-av-component .hover-preview {\n  position: absolute;\n  z-index: 1;\n  padding-bottom: 7px;\n}\n\n.iiif-av-component .hover-preview .label {\n  background: rgba(66, 66, 66, 0.85);\n  height: 18px;\n  padding: 5px;\n  color: #fff;\n  line-height: 8px;\n}\n\n.iiif-av-component .hover-preview .pointer {\n  height: 6px;\n  position: relative;\n}\n\n.iiif-av-component .hover-preview .pointer .arrow {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  border-top: 6px solid rgba(66, 66, 66, 0.85);\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n}\n\n.iiif-av-component .hover-highlight {\n  position: absolute;\n  background: #e2e2e2;\n  height: 4px;\n}\n\n.iiif-av-component .canvas-timeline-container {\n  border-radius: 0;\n}\n\n.iiif-av-component .canvas-timeline-container .duration-highlight {\n  position: absolute;\n  background: #14a4c3;\n  height: 4px;\n}\n\n.iiif-av-component .timeline-item-container {\n  position: relative;\n  width: 100%;\n  min-height: 6px;\n  background: #cfcfcf;\n  top: 0px;\n  padding-bottom: 3px;\n}\n\n.iiif-av-component .timeline-item-container .line-wrapper {\n  margin-top: 2px;\n}\n\n.iiif-av-component .timeline-item-container .timeline-item {\n  position: relative;\n  height: 6px;\n  box-sizing: border-box;\n  border-right: 1px solid #efefef;\n  border-left: 1px solid #efefef;\n  background: #777;\n}\n\n.iiif-av-component .timeline-item-container .timeline-item.active {\n  background: #333;\n}\n\n.iiif-av-component .canvas-timeline-container .ui-slider-range {\n  background: #79B2E3;\n  box-sizing: border-box;\n  border-radius: 0;\n  cursor: pointer;\n}\n\n.iiif-av-component .canvas-timeline-container .ui-slider-handle {\n  width: 14px;\n  height: 14px;\n  margin-left: -7px;\n  margin-top: 0;\n  border: none;\n  border-radius: 7px;\n  background: #79B2E3;\n  z-index: 2;\n  cursor: pointer;\n}\n\n.iiif-av-component .canvas-timeline-container .ui-slider-handle:focus {\n  outline-width: 0;\n}\n\n.iiif-av-component .range-timeline-container .ui-slider-range {\n  background: #79B2E3;\n  box-sizing: border-box;\n  border-radius: 0;\n  cursor: pointer;\n}\n\n.iiif-av-component .range-timeline-container .ui-slider-handle {\n  width: 14px;\n  height: 14px;\n  margin-left: -7px;\n  margin-top: 0;\n  border: none;\n  border-radius: 7px;\n  background: #79B2E3;\n  z-index: 2;\n  cursor: pointer;\n}\n\nbutton:focus {\n  outline:0;\n}\n\n.iiif-av-component .range-timeline-container .ui-slider-handle:focus {\n  outline-width: 0;\n}\n\n.iiif-av-component .controls-container {\n  overflow: hidden;\n  margin-top: 5px;\n  height: 36px;\n}\n\n.iiif-av-component .controls-container .btn {\n  float: left;\n}\n\n.iiif-av-component .controls-container .pause-button {\n  margin-right: 14px;\n}\n\n.iiif-av-component .controls-container .time-display {\n  float: left;\n  padding: 8px 0px 0 10px;\n  color: rgba(255, 255, 255, 0.5);\n  min-width: 150px;\n  font-size: 14px;\n}\n\n.iiif-av-component .controls-container .time-display .canvas-time {\n  color: #fff;\n}\n\n.iiif-av-component .controls-container .time-display .canvas-duration {\n  color: #fff;\n}\n\n.iiif-av-component .controls-container .volume {\n  float: right;\n  overflow: hidden;\n  width: 140px;\n}\n\n.iiif-av-component .controls-container .volume .volume-mute {\n  float: left;\n  padding-left: 0px;\n  padding-right: 2px;\n}\n\n.iiif-av-component .controls-container .volume .volume-slider {\n  float: left;\n  margin-top: 12px;\n  width: 84px;\n  height: 5px;\n  border: none;\n  border-radius: 0;\n  background-color: rgba(255,255,255,0.4);  \n}\n\n.iiif-av-component .controls-container .volume .volume-slider .ui-slider-handle {\n  top: 0px;\n  width: 14px;\n  height: 14px;\n  margin-left: -7px;\n  margin-top: -4px;\n  border: none;\n  border-radius: 7px;\n  background: #79B2E3;\n  z-index: 1;\n  cursor: pointer;\n}\n\n.iiif-av-component .controls-container .volume .volume-slider .ui-slider-handle:focus {\n  outline: none;\n}\n\n.iiif-av-component .controls-container .volume .volume-slider .ui-slider-range {\n  background: #79B2E3;\n  box-sizing: border-box;\n  border-radius: 0;\n  cursor: pointer;\n}\n\n.iiif-av-component .btn {\n  font-size: 0;\n  background: 0 0;\n  border: 0;\n  box-shadow: none;\n  padding: 0 5px 0 0;\n}\n\n.iiif-av-component .btn i {\n  background-repeat: no-repeat;\n  display: inline-block;\n  height: 30px;\n  vertical-align: middle;\n  width: 30px;\n  cursor: pointer;\n  font-size: 0;\n}\n\n.iiif-av-component .av-icon-mute.on {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='18px' viewBox='0 0 21 18' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Evolume icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-806.000000, -747.000000)' fill='%23D6D9DD'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M724.409666,36.0186916 C724.196024,36.0186916 723.982383,35.9286009 723.81937,35.7478023 C723.493344,35.3862052 723.493344,34.8006155 723.81937,34.4390184 C725.343235,32.7488915 726.182223,30.5021766 726.182223,28.1123038 C726.182223,25.722431 725.343235,23.4757161 723.81937,21.7855892 C723.493344,21.4239921 723.493344,20.8377853 723.81937,20.4768053 C724.145396,20.1152082 724.673936,20.1152082 724.999405,20.4768053 C726.838169,22.5161881 727.851297,25.2281661 727.851297,28.1123038 C727.851297,30.9964415 726.838726,33.7084195 724.999405,35.7478023 C724.836392,35.9286009 724.622751,36.0186916 724.409109,36.0186916 L724.409666,36.0186916 Z M721.369341,34.2610664 C721.167679,34.2610664 720.966017,34.1711506 720.812145,33.9907031 C720.504401,33.6298082 720.504401,33.0453555 720.812145,32.6844605 C722.962152,30.1631228 722.962152,26.0608683 720.812145,23.5395306 C720.504401,23.1786357 720.504401,22.5935671 720.812145,22.233288 C721.119889,21.8723931 721.618792,21.8723931 721.926011,22.233288 C723.26517,23.8037353 724.002495,25.8915063 724.002495,28.1123035 C724.002495,30.3331007 723.26517,32.4208717 721.926011,33.991319 C721.772139,34.1717664 721.570477,34.2616822 721.368815,34.2616822 L721.369341,34.2610664 Z M718.549414,32.5040591 C718.303329,32.5040591 718.057244,32.4144502 717.869476,32.2346187 C717.49394,31.8749556 717.49394,31.2924979 717.869476,30.9328348 C719.493381,29.3775682 719.493381,26.846424 717.869476,25.2911574 C717.49394,24.9314943 717.49394,24.3484228 717.869476,23.9893735 C718.245012,23.6297104 718.853175,23.6297104 719.228711,23.9893735 C721.602406,26.2627387 721.602406,29.9618673 719.228711,32.2352325 C719.040943,32.415064 718.794858,32.5046729 718.548773,32.5046729 L718.549414,32.5040591 Z M715.075595,19.6162444 C715.516558,19.1130715 715.877246,19.2837236 715.877246,19.9951926 L715.877246,36.2291065 C715.877246,36.9405754 715.516558,37.1112276 715.075595,36.6080547 L710.928785,31.8762217 L708.179641,31.8762217 L708.179641,24.34745 L710.928785,24.34745 L715.075595,19.615617 L715.075595,19.6162444 Z' id='volume-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");  \n  margin-top: 5px;\n}\n\n.iiif-av-component .av-icon-mute.on:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='18px' viewBox='0 0 21 18' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Evolume icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-806.000000, -747.000000)' fill='%23FFFFFF'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M724.409666,36.0186916 C724.196024,36.0186916 723.982383,35.9286009 723.81937,35.7478023 C723.493344,35.3862052 723.493344,34.8006155 723.81937,34.4390184 C725.343235,32.7488915 726.182223,30.5021766 726.182223,28.1123038 C726.182223,25.722431 725.343235,23.4757161 723.81937,21.7855892 C723.493344,21.4239921 723.493344,20.8377853 723.81937,20.4768053 C724.145396,20.1152082 724.673936,20.1152082 724.999405,20.4768053 C726.838169,22.5161881 727.851297,25.2281661 727.851297,28.1123038 C727.851297,30.9964415 726.838726,33.7084195 724.999405,35.7478023 C724.836392,35.9286009 724.622751,36.0186916 724.409109,36.0186916 L724.409666,36.0186916 Z M721.369341,34.2610664 C721.167679,34.2610664 720.966017,34.1711506 720.812145,33.9907031 C720.504401,33.6298082 720.504401,33.0453555 720.812145,32.6844605 C722.962152,30.1631228 722.962152,26.0608683 720.812145,23.5395306 C720.504401,23.1786357 720.504401,22.5935671 720.812145,22.233288 C721.119889,21.8723931 721.618792,21.8723931 721.926011,22.233288 C723.26517,23.8037353 724.002495,25.8915063 724.002495,28.1123035 C724.002495,30.3331007 723.26517,32.4208717 721.926011,33.991319 C721.772139,34.1717664 721.570477,34.2616822 721.368815,34.2616822 L721.369341,34.2610664 Z M718.549414,32.5040591 C718.303329,32.5040591 718.057244,32.4144502 717.869476,32.2346187 C717.49394,31.8749556 717.49394,31.2924979 717.869476,30.9328348 C719.493381,29.3775682 719.493381,26.846424 717.869476,25.2911574 C717.49394,24.9314943 717.49394,24.3484228 717.869476,23.9893735 C718.245012,23.6297104 718.853175,23.6297104 719.228711,23.9893735 C721.602406,26.2627387 721.602406,29.9618673 719.228711,32.2352325 C719.040943,32.415064 718.794858,32.5046729 718.548773,32.5046729 L718.549414,32.5040591 Z M715.075595,19.6162444 C715.516558,19.1130715 715.877246,19.2837236 715.877246,19.9951926 L715.877246,36.2291065 C715.877246,36.9405754 715.516558,37.1112276 715.075595,36.6080547 L710.928785,31.8762217 L708.179641,31.8762217 L708.179641,24.34745 L710.928785,24.34745 L715.075595,19.615617 L715.075595,19.6162444 Z' id='volume-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");  \n  margin-top: 5px;\n}\n\n.iiif-av-component .av-icon-mute.off {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gcKDQk0smvw8gAAAOlJREFUSMftlTFKBEEQRd+fXRdBENlATDTyCoJHEA29gxcyNzPXzFSMBTOvYKRgoCDMPgMblGWDYZwZA+dF1VDVv7qqqIaRkZGOyG8vUOfAO7AOkOSl96zVU/VC3SjnagjRY7+4ahNftRQ9Aa7L8a3NHdOGQgfADHgGDoHzVbFqktiZMHADzIHFiirZZ6mrhv7ptcdd8GfCTXt8D2wDr8AusNfXQlqe1ok6KfaO+uA3lz/8qk5LnaROUhf7CTgC7pZfmWQxxObaVB/V28EHRN1Xz9St0o7ZYL9TSWAKrAF1ko/x0x8Z+R98AhcTb2KBHKCUAAAAAElFTkSuQmCC\");\n  margin-top: 5px;\n}\n\n.iiif-av-component .av-icon-previous {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gcJDCgq14wdqwAAAJ9JREFUSMft1TsOQUEUgOETpUYpcmMFEtuwEyvR2oLeQpQ6m6AiEY/Gp0CDK5L7Epm/mzmT+c/JzJyJSCQSdYI1Tuh9WNPGpGzx0Y0sJ97BAmoTo4/VPb77ds9WwYRGEbGMiMFjqvKKMfbKtipx9z6eek/p4gMuGGImn9LFe5wx95n/qbixM278VmfP7xib2sVFOtfP9+pmfqdEIvHTXAHKs7eDn/hqpQAAAABJRU5ErkJggg==\");\n}\n\n.iiif-av-component .av-icon-play.play {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='21px' viewBox='0 0 21 21' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Eplay icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-105.000000, -747.000000)' fill='%23D6D9DD'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M7.09481147,39.4485981 C7.02536685,39.4485981 6.93277401,39.4254499 6.86332938,39.3791535 C6.74758834,39.3097089 6.67814371,39.1708196 6.67814371,39.0319304 L6.67814371,19.8652134 C6.67814371,19.7263242 6.74758834,19.5874349 6.86332938,19.5179903 C7.00221864,19.4253975 7.14110789,19.4253975 7.27999714,19.4948421 L26.4467141,29.0782006 C26.5856033,29.1476452 26.6781962,29.2865344 26.6781962,29.4485719 C26.6781962,29.6106094 26.5856033,29.7494986 26.4467141,29.8189432 L7.27999714,39.4023017 C7.21055252,39.4254499 7.1642561,39.4485981 7.09481147,39.4485981 Z' id='play-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n  margin-top: 8px;\n}\n\n.iiif-av-component .av-icon-play.play:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='21px' viewBox='0 0 21 21' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Eplay icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-105.000000, -747.000000)' fill='%23FFFFFF'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M7.09481147,39.4485981 C7.02536685,39.4485981 6.93277401,39.4254499 6.86332938,39.3791535 C6.74758834,39.3097089 6.67814371,39.1708196 6.67814371,39.0319304 L6.67814371,19.8652134 C6.67814371,19.7263242 6.74758834,19.5874349 6.86332938,19.5179903 C7.00221864,19.4253975 7.14110789,19.4253975 7.27999714,19.4948421 L26.4467141,29.0782006 C26.5856033,29.1476452 26.6781962,29.2865344 26.6781962,29.4485719 C26.6781962,29.6106094 26.5856033,29.7494986 26.4467141,29.8189432 L7.27999714,39.4023017 C7.21055252,39.4254499 7.1642561,39.4485981 7.09481147,39.4485981 Z' id='play-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.iiif-av-component .av-icon-play.pause {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='15px' height='15px' viewBox='0 0 15 15' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Epause icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='annotation-type-dropdown-menu' transform='translate(-19.000000, -212.000000)' fill='%23D6D9DD'%3E%3Cg id='dropdown' transform='translate(5.000000, 0.000000)'%3E%3Cpath d='M18.5156143,226.968748 L15.5156214,226.968748 C14.6874984,226.968748 14.015625,226.296874 14.015625,225.468751 L14.015625,214.468777 C14.015625,213.640654 14.6874984,212.968781 15.5156214,212.968781 L18.5156143,212.968781 C19.3437373,212.968781 20.0156107,213.640654 20.0156107,214.468777 L20.0156107,225.468751 C20.0156107,226.296874 19.3437373,226.968748 18.5156143,226.968748 Z M28.0155916,225.468751 C28.0155916,226.296874 27.3437182,226.968748 26.5155952,226.968748 L23.5156024,226.968748 C22.6874793,226.968748 22.0156059,226.296874 22.0156059,225.468751 L22.0156059,214.468777 C22.0156059,213.640654 22.6874793,212.968781 23.5156024,212.968781 L26.5155952,212.968781 C27.3437182,212.968781 28.0155916,213.640654 28.0155916,214.468777 L28.0155916,225.468751 Z' id='pause-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n  margin-top: 8px;\n}\n\n.iiif-av-component .av-icon-play.pause:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='15px' height='15px' viewBox='0 0 15 15' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Epause icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='annotation-type-dropdown-menu' transform='translate(-19.000000, -212.000000)' fill='%23FFFFFF'%3E%3Cg id='dropdown' transform='translate(5.000000, 0.000000)'%3E%3Cpath d='M18.5156143,226.968748 L15.5156214,226.968748 C14.6874984,226.968748 14.015625,226.296874 14.015625,225.468751 L14.015625,214.468777 C14.015625,213.640654 14.6874984,212.968781 15.5156214,212.968781 L18.5156143,212.968781 C19.3437373,212.968781 20.0156107,213.640654 20.0156107,214.468777 L20.0156107,225.468751 C20.0156107,226.296874 19.3437373,226.968748 18.5156143,226.968748 Z M28.0155916,225.468751 C28.0155916,226.296874 27.3437182,226.968748 26.5155952,226.968748 L23.5156024,226.968748 C22.6874793,226.968748 22.0156059,226.296874 22.0156059,225.468751 L22.0156059,214.468777 C22.0156059,213.640654 22.6874793,212.968781 23.5156024,212.968781 L26.5155952,212.968781 C27.3437182,212.968781 28.0155916,213.640654 28.0155916,214.468777 L28.0155916,225.468751 Z' id='pause-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.iiif-av-component .av-icon-next {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gcJDCkVePEB1wAAAKJJREFUSMftlbENwjAQRb8iqqSgRFHEBEiswRw0TJI2K7ANJR1LQJU0gISUR+MKSJTCOhzpXuPirHu2zz5LjuNYAtRAPhIvgSdwjS0GOAHLgXgV5jxii7uQ+AKsY4izqe4wbiSdgZ1VjVu+OVgc9S8xQBPiK2sxwBHYAj1wn5pzEWFde0mFpJekPvkdz7LG5rf69vmOZ9W5ku/V//mdHMdJmjdBx46OkJJ4sAAAAABJRU5ErkJggg==\");\n}\n\n.iiif-av-component .av-icon-expand.expand {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAMsnpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZlJciM9DoX3PEUfITmAw3E4RvQN+vj9gUxbloca7F704i9FKWWKyQSBh4cHysz//HuZf/EvJBtNkJRjifHiXyihuMqHfJ1/52qvsN/PH/P+zj6Pm9cvHEOeqz9/xnvcVsblcUMK93h7Hjep3+vke6H7i5cFvT7Z8eGel++FvDvj9v7blPu+Gt5s5/7v017idfL7v0PCGUMY9M646a2/eA/6FI8FPvvKNfFufXQ64vnsuOp7+Nx35vXjO+e9fnrnu6ve4/7ZFeaK94T4zkf3uJXPfbc99BS1x5OfvhCxD9ve+W6tkdeaZ3c1RDwVzb2pl63sT0xsuNLv2yKvxH/hc9qvwiuzxY7TB9FsvLqxxTq8vWyww1a77NzXbjsmBjdd4upcx9c6ln1yxfUdlKAvu1zyxQ9DjJzvRM0z7F5tsfu5ZT+v28yTh2WmsyxmuePDy3w2+J3X60JrKXRxcH71FXY5BSBmaOT0nVkExK7bp7L9u1/meo7NS2A9EZTt5swG69XOEk3sA1t+x9kzT65grgN3m8a9AC7i2YIx1hOBK1ovNtorOZesxY+Z+FQsB+SuEQEr4oY1i9h4MiG57PTZ3JPsnuvEnWGohUCIj6RNJkKVYIUg4CeFDIaqeAlGRKIkyVKkRh9DlBhjispRNfkUkqSYUsqppJp9DllyzCnnXHItrngoTEosyZRcSqmVh1aWrtxdmVFrc8230KTFllpupdUOfHro0mNPPffS63DDD9J/xJHMyKOMOu0ESjNMmXGmmWeZdYG15VdYsuJKK6+y6mvU7qg+R82+i9yvo2bvqGnEwp6XHlFjOKWXJazSiWjMiJgLlognjQCAdhqzK9sQnEZOY3YVR1KII2pWNDjDasSIYJjWybKvsXtE7pdxMxL+Km7uq8gZDd3/InJGQ3dH7mPcPonaqLui+B0gzUL16eUXxMaEmavLVWvSt6/mpwv8s9D//UIrXCtHWVdva1oSZgFesnksxVHza3Y7hZHWUmltpbmg9wVULVCda0QGdSRHVllV5yxX9thoMa9Riklrxlh0qKWgwB2ylEGu1Ne++eo8folPzOR9z4zD6vV8RXnnS3N/2zRTED73Clq2nyc+5ukaHxc371b4CxueTTDft+HZBPN9G55NMN+34dkE8/c2ZLSPT9MW8OIaHKTTszlogDlHW33o55Lici3GPpgETJJviJ0qqayR9uw5vOjVu5b4at9lJrJqqcT8dn6sE35A+YLJjUiwemPydmRTyaP7HX7bPnWm1DZV/V0zrh7b9HC2R/snVQkV1i+XjD6u0BIum7VFqkBHsdVGeZkzis0otrlmka5iyQfKiz9by7bVyVZXztiY2epqfL168duIiUd3ECD2wsOjGrLIVdK2+tb3d4tKO0Yia0lhbuqUMxaLea5r73zQAcjeYlt242XZUVfJxztvljuADD9fzrw17yfLmY+7/d5y5uNuv7ecedptAxVWQIWCIhVAMQBFSQoKlJCka0QyAglSa5fswEeII0ZAgfIHFU2Go7fdQe5z48KF5WU/q121A0I0hqvrBL8cKi51p1QRGNyMm5/zSBk0f5lLv0sl86e59LtUMr/JJRQpBYH8n6HMeG/JSt5shGZrspD+afgNyN+nxCfWTnJsIjeXJbXGZVBmZNq8Wo0s4naYg/U97sWCq7FtO7KbSl25sMzI7dJZ07cRVpgoumWaH1eDE6XVXFhHIDME7kDYIVN9dqvYQmPOZg9/1tCm0w1fGoXigcz2UU+uzerXBS94qSvb1P1A69HA0PctG0uJvbhAU1ME2FirXUv2nXe2VUdXV2ZDt9KGNkALkmrWT8Qv5i0t1ZWCPGNgAjJyTrm6L4LynrqOrR1Niduz6gCcbZ0KAYv/S+vs/VoQWkqxuVRsY7Ou11As6vwK8Zq0pV11eoD+0a2JgPDoEg1AhAyXZsLidu+buxDdcyLfVUfPkDv3XrZH+riyog/0IkGLh6bASwI0c/CPD18yYCOn9HSQQ9+tuCn+xo3I1C7dLgXKToAb/mbowEG/QngQbgAs8eiTtuEoc5+rCIXty6v5eoKdv60imr06hmoyi+aBbYx7WpNdUlnF/wnmN48pTaliK4SnnsTMErlhWLrd1Ptb6wj6FQb9Db1wG62DguE7DaODh+iyuumzh30KllzgyRHXPeXQxxSit8NIiPMaTODZXChHsQ4t+5+4KK80puvMn1BIcVIITM4+VDqmmpdtCIkJHjKs7GhFLWhN9IbAdYEq1Q52JR4ELfNxSB49aq8mVfkH0wI06IQS3FzNcflIThonwLYA1WTndM2t6XfoexGyd4fhcE+ZvoKel0pBYBKe3w5WHxj2ePiO3hWmvTZ1v0PtB9Ae2tbFlLY3aSNr5hl6kPYTYt8A9gfKf2P9QdbvtHhCmNSImK89othQOAvJQsaPaCdp2/tqTuhdMRjv0SerE6O2pAJjHXojgrmDkxybFtJ1GfJ9u87KIynewlkr3Qb0A870wqF1ILAismke7jANRlFDAemIvtVWU5Hg47XZAw6ZFwat5KXoMa0k5bUdnuIynFR3MEY1J3eG1JGVz6NVrlpdj4RqpwgPd7UG6fmOFlPqzTfJ5RAlIAX0XGNlMWlQ0RMczwZo70kl9Q1bB3Ux5YKvSJ6kVN30BJZCYK+m7zMpx7WieSAIdns+4KQFN/Z4JLJro87TRikgMChB65lEjWUiHgTIp5zjmGOpu0haVRm1UAtCsh0vu1qJfZF9sBv1BI+uTU8XoPoJQlE+xS0yYM7EpmvxJF0sZgbvqE37hBol4/V+tpkvbLqzd4XfY32Z7zH0R4I232Poj1fzYOiJwMaXsIWfLR38wmGxRSqsV5uxndIHY9OahNa81/MY2zKlKpnL11Qx8FTwrR9uFYl+2BLezbyXRT+cUvVp7pnTCKMdegJwI+o5fco29jh90GIeRrNlNLgLp+hhkgQtnAs6hMZc3aXz8iardydUiHDpEKsA08rulFhHDfYu3mvzqrfO6c8AhQSqZV5Tz7iX7ocu+9d6bAbURdAJzM5bWUbdYA3L6VbQR9GjIShHh9rtmJITznihdn/rh0Pt8HmO+isF1ijAY7/T4TUtUCMz/QL5fwj8gqyZltZz6/uqlQz01kP3aopyZBrJ4hBiAAaSsn2hUIpr8JWf2gP4Zp1BwUAFnuo4C2iyfUFoWlHd6IJRd0XFWai26PouqPp57YJKNvhNy+bBz58VmT+vMebXRebPa4z5YXv9inPzSZHZNmxZdETRlkR6cvzSDkAW1pENsOgiVGXYkQ16PGpmNrwu1ju4v+qvLF3Pmnu12oHb1SeFJAS4uc1rHAF8oT9qgO/BdZsm+5RKcksbM2QJFEyoqWMqgJ0vVnD4YQsh8TuLWSdAL9DlFy1QBTrvGn4KCAkIEoCGXJOO3l4zYM8K0Y/ZuvN3b6ldhXaWu4ub52hNe8vLww8gGwEoAJsc1GTQ4IIR5PHAcw3usGlU2jU08wDC3e5cpQi2KbtVzNDTsubSGqrPgtIPnU10ETqtJSUWK1RTuIB2MQHwNDOiHsFDBYjL+ZAu/Jhdq0Z7ghiD8z57reSgOCu2NMQfrv7E75nkQRk0bwjvC8vLrWR9Xqf0B7+VLHxL4c+1jbwXO8L1Icg32Rsd2nwvB8MN7Qp+NHHjaUJBS+uX+9rOfTW/mODHqxz/VI3LutVKPxZ5r7hue2JEgr99uGJRYEBKBhiG+Ci4AUYlqzOzkTSYnemYkrEUF6J/7S5R7KjtHJApKJMWFCVdOGUfS6hI3Vb0eDymGaeHEW4Zdg97A3TaL5INnoaHvf6uNHvteDRDrKFU56oUdIgyooV4e16im6uiMn16Ku1mn+nknDqIjB0kNpnzS8QVdkpUejCi5116LLKPGq79na11U+29By2Kr3vQHby1396nx/dqesxy1tNjFrrO/XOGLrj+3Cf2UwvNexP/zMJ5jnUQjy9nfWZUmSX58XLYR+WA/JHL+7Cv1nnFIfuwj8Q9xzpvT2lf8WtO7dRj1APgczbzfKTzfKLzpiy+uZrwxRdvr8iV1KHevM9jtX9DU9C8oSoHabvVlXE8EcbDuNLuw1/N7nn3r3LSpHvdwgh1ux7G0OohW5Lpg06KrLez9hw9dpKQ1u9vf9xt/v72rL9JtHDSl5Yksc/h9DzbWsgukdqxuKE/aOjOm+ZjcAhgC6VSW702NlTaND6xJ1Tzk+283Y352e2Pu83Pbn/cbT7crpihYh3MNItfz80bNTBBvJZqZYUMfXOjzCJIWjY99pWAPij7K4H+pWD/6fWfhX5xXLVUthH+/wIEbtPlw9yp7QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+IHEAwVGFiiHIAAAAEYSURBVEjH7ZU/SgNREIe/iQkiCHbW4gEs9ALiBWIhEg+QC3gKxROIfRQLtTBVQCsrwQMIQvAEIlZafDZPkJB/u/tsZD9Y2LdvZ34zj5l5UFNT8+9Rh5ZjOM1vzCEscAHcFYh3B+hERFTJWLVd0KadAp5IY05fqwXjnfl/I1Md9NSTIjaNioIL6jVwAKypkVt4ZYxoAOfALnAJ7EeEOdvpUN0Y+bak3qbCu1GbI/vdWcVV9nj7SfRq3PFmEVYff9pJXVYHSXSgLk6wySKsupfe79O6r7am2HRz9fG6egZsAw+pkL7+elZ/qJ8p09Nck6s5h59WegBe1A7wHBFP6iawNWFWV874VX1T33/dPMdp76js7VRTU5ONb2qOOah9nJH0AAAAAElFTkSuQmCC\");\n}\n\n.iiif-av-component .av-icon-expand.collapse {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAMvnpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZlZduM8DoXfuYpeAudhORzP6R308vsDKTuxK3FVyv3QD39ciWRKgkhc4OKCpeZ//r3Uv/jxyWvlQ8qxxKj58cUXWznJ+vyco9F+/z1f5nXNPI6r+wXLkOPoztd4jZvKePh4IPlrvD2Oq9QvO/kydF24GXTyZsvJdV++DDl7xs31XZXrueo/Lef6dWmbuN/8/B3fFD8Cg84qO51xmr9e3uKYgcuuckz8NS5aGXGcW44ynr/2nbqfPjnvfvbkO12vcffoCqXjdUN88tE1bsLXvtseekDt480PF+IwH3N78t1aI681z+qqj3gqqmtRt6XsM25suNLtxyKfxG/gPO1P4ZNZYsfpAzQbn65MMRZvL+PNMNUsM/exm84UvZ02cbS242sZyy7ZYvsGxcvHLJtccUOBkXUd1BzD9j4Xs99b9vu6ybx5GO60BmOGJ375qK8G/+ZzN7SWhC4OzndfMS8rAcg0BDn5y10AYtbl07D9uz9KP2JzA9aBYNhuziyw6nZMtGA+YsttnB33Be2VPuFu0rgM4CLeHZiMcSCgo3HBRKOTtckY/JjBpzJz67xtIGBCsMOoBTaOTEg2W3k3zySz77XBnmGoBSCCi6RNBqEKWN4H4if5TAzV4IJXIYQYUsihhBpd9DHEGFMUjqrJJZ9CiimlnEqq2WWfQ4455ZxLrsUWB4WFEktSJZdSauWlFdOVpyt31Npsc8230GJLLbfSaid8uu+hx5567qXXYYcbpP+II6mRRxl1mkkoTT/DjDPNPMusi1hbbvkVVlxp5VVWvaN2ofqImnlC7jVq5kJNEPP7vvSBGsMp3UwYoZMgmIGY9QbEkyBAQFvBTGfjvRXkBDNdLEkRLKiZIOAMI4iBoJ/GhmXu2H0g9xI3FfyPcLPfIacEuv8Fckqgu5D7FbcvUBt1VxS3AZIsFJ9qtyA2bpi52lylJv31Ub1r4B9DL45taDdNSV3YlbpGcA0wLfLFuLRml7OmUwlr2TkIhjVWk6pA9LiY2gqYIi7Elty7MAeNrFm5dfUa92Ac1Z0r1wWCRi4tKZligJr9YOD2vHrXwO159a6B2/PqlYFcV6I0thVTXnO0xYMkZUur20A64TdyzbaybFOruZViHzObRpL1bkqPiT96m1t/Np+01HsL+liP+qmBSfTYuK7oySG5NbhPsn9Hz9CLpZd2Yiew1sKaR4t9psQlf4sdCcnjv8ej+u7CdYSIeKNMLcYdtNgUUhphwtF7UXjZ7hn1Ptxe3OTOFmpm8nmbmiwhtunCcKjoJPW2wp9Fh9GH9i1p8KktwqddIX5qg6nnjMFkxM9cs3hthg280W3/oY3G1PvtlfcB90rTIk0mTEwsOJ+Syns2An6diazKmcVkfKZT05ctQeGyJXBctrhjW+Np7KnLoNh7sgYmj/Zezk19TO7F3AhTqQArG8LHl0kf1OAJKmLbc7QlqjYt2FSLMcriSt226hLx4fOwk4ZgjRhqojLZHMf0MU+TKVbRe9qO3HtmZRYxKh1OavXPvRFmQfnGRT0uK7fWHaWxThWyT64nSmAgOa2flXaDAO4ZXWwseJe5QLEZH/gnrcASfw4WsJwlioekwlSIavxm29zuHVUWT9EmolI7I7Q7NHV3O98c1bc3SNhKJG/Bu2N2R6xIm9q63ikpYRyZGdwifDSuyG7irqFv3gJO8CxuG5mAcLwkjm4j29b3GnA+hizSr0o25RD3w8OgUA/e388UfeFR5XYJ/PRwITOk4qpolE7UQYE9oacqs/DV8E6uMAXR86giCKVt6pjGU4T8fnE1x5PMKB72yTOk4SEh10zLw7lOXBpmOn2aYYxQcVBcZHhp2YBqM7wGJdZFtaUalKxj7dXrjqyhTwLEEiWqhTskMUOYwheTmE2pTIMWtbHIe3AhPX5ihVNBgCmbXLwjKllZtihMOqEU67yXVbxPlOUKCQ0sxmbcRAAiwByFoc3sogI62oeC2ButYU7PQIvnZL7ZhUYQN3q5mQc6bKDo2hrMzc1BDBso2MS0bJlOdWmbCzPAUT6aVQAt9sB6TwgMQgCBt7Zq2yOsA95b5bB4qXKkrjFlSPoMZkE+67Ch1j87Kjk5EM7e95FWUiRDlVCNdV3ETYx9UPcmbkmfQfqQiSFltU2Q8Dsa/BIjW41UCVyEbqgr6npwJe/a5iMxJlFtQt5rQXKrJjbdwzQ9mNKkjdA92QtheCKUqozAnjCDb45g2zsSphdebgRbRctseyRYUMvUP76AtbMT8IMn5PzosFKK9Nro6qlp8s2IrTGVHKRF0CcD1alNvQyYheArwawMXRqorDbuG0j+LcFh0Nrp032o3OxkLoVepSL0c2Fp8j1IX0z3XlfD9mOZ7MTbIlhyXL43Hu9Swr2pIdQwfELv6b5SU6YLnVIxeqWpMOIeqqIUSRyZx0lJcA3j1FnhCpvybAQYUb1BgEWKqmSVsIhATkcFkHQZAdHYnCQx9aG5xBpow8hdmAH+74V01D7nkWmR6deIauXoiTPCqcljNNu5JNncgANbGnAM5JFqHLlPFGtnJgYqGNZ7if6ac/QaIEgRzPQFJxANSI7nwH+Me2qliLWUblUGvj+81I3KnbMeWFJOIm7qnHlJbnXrCkKEMkLztM2S6WU5N3tJuIVEWCXITK0IPGUmOSjO7e6veySpA9Jm7UIgC6m3SkAdkOR9lYO7+p8KsPlfHfDqSctTA3YFEO2Q8u8zUfq9fO9FmqE5MNgrVHc6WOiquMGPL2UUXImeNLKzVFwOJBgBLPweRk23NFA/yoOHNChu6iKVj/qj0dnAy3LgBsCva/4qJGHftAzvDnHEaYM0ykgI2JfcMNJigy99P5do0QlPb3RoVvg6IgWCR2rAaDHROXWcFuOCKObUrbVA/aWhdt5YaBqBob2KFLycth3yXpyddwAyQb4LJxL1CVipqBWNs+EOzpOrsAk5Q82g/6IXqTZShwaXi4+FN6N8KSRDNgt9zVJlJQVGDzHQ2eOG5vKhHmQBgS1vstKvZdStBKSWrkAL4ZHGmgKPa1iIiH60PhUM7kOK5GFcrxJLw+LV7jq9ojR+sB36saXppJ2hQ3C57+0DHDXXb7Lvo+qon5ad76qO+mnZ+S7W1U/Lzq3qpIr6MFZEFtgZfCSqiK6BKCaad00utB4oVjMC0kFkVRo1MB/87g+zeXBC1SwXLeRsMilELwLANCINW4g7jeQ9NE84yR4PrdVF82VHIB3LYXlvSCWzWR6GjQrg468Eg4pfxw8dhbJkCUINE+8iIsLRU4XugBdBZ1QCJUwZndtuNiFkRPc6VbYlk4ztp8qWJAlr8qmycr4zepG80rPctzSaKN9RxFviY7Jj4eGy+djL7tn271G/O7Afw5pZqRPWIndfSPawoe+nX/yQTOApEYNkylqRGvYdrr5RtXqXq29Urd7h6gabjNBkF7qqadCsnjoLZ3XY2lv6NOFbktyEniER5I0ksk5GXIsGn6JUIWJfLtJD5KtLW9RxCnuaBGRqA2ip8TAgQRvsJj5ohn6QohCpg6WOWbHYBwWbWSFrIGD0wvKGHo5wEZodo6OykCtbJ8PIRhIsoQUgzSEuGbTvRC1NQkNhIMjospuX5/Ok9aRxR1zkkkVYTDg8lc4ju4mEta4uEs53x8nhbHR0af6VVHnQo/2sqabQpf2A64gkVuv97j4W70T/USIQ9D37jscs/QdxdCQEukKd7gNZEYi3bnI/GRa+yqendOrgfOc79Zn4XqUAGcA0pSF/VGo3oaZuSu3sFLxKg3vnIGNC4R8ELvtHb/UNNwInCRSHnQOg8UzfX273fCLvE/pX4Is+uiJfiv1F3dd+j66y34MfZL9HelkUylYYCbtclJau9gBz2Kn0nCECliusVvZ7ZIvBwBt75Z0qt84GDHmzt0xk8+VswYzw0Xlqde28oILLbj73rlC4NSh/blDdLL5rUD1P8W8Nqu/W/FOD6ndOfGnwUy6oL5NhM2SWRNAST9o3ycRNvEfzQ2C02t2EK0R0UsQIBXmWJDFy9gQHXcpIfkKTNIc8ohFfe0sQ+p3tbAk+J5P682x6nUzqz7Ppu2TyGnYOau2tWiM+iFzuvjom5+ZYM/C1SefSXLw2fU1zMBRcLLIZJVBPXd3/eXCJulr8xox0k+QUf59L58Ielqp734G9KvPtLvV828HrG+OfbTzdp96Zxee71Duz+HyfemcWnyeh3pnF50mor2bxWqRLIu590WCP2EDqbhppdMZCjC7J/wos2Soh/riWZQJRqo071Q79txw9NmwuqUmvIMW+SsAXJUXu78rH41G9a+AfQ//PhghDwofk/C91s+Gn2r/nDwAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+IHEAwVCEUVDOQAAAEeSURBVEjH7ZWxLkRBFIa/s1Y2olcqlQqtTikRkSh4gH0BwTPYRxAPgC1kC1QiCiUeQTbKrRDVinyaKYS1997cuwq5Xzn/P/PPOTmTgZqamr9A7fs7B8nT+bL2qj6rT1lnR0awwAlwPUK+j4gHdQlYAOaBTtKGEdEqU7Hqek7vYfIP1beyrVZtZ3hm1dvkPVL3U6fG0ih5sWmgCywDNxHRBh7z7G2UCG0Bl8AqcAWsJekduJtIq9VQz5J+oU5V/Zx+BKtNtZe0c3Xmm76o7lQanCo9TetdNUbs2c0zXM0Cl4g0SJtAD9iOiFEBL5UOVwrpA8cRsRERH2W62Sxijoi9quYnT8WDgmcOqqp4S50rELwy6d9pHP36b6+p+f98AifrJ8dbm0GVAAAAAElFTkSuQmCC\");\n}\n\n.iiif-av-component .av-icon-more {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='18px' height='5px' viewBox='0 0 18 5' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3EOptions icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-734.000000, -755.000000)' fill='%23D6D9DD'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cpath d='M658.14521,50.953271 C656.964301,50.953271 656.006986,49.9699712 656.006986,48.7570093 C656.006986,47.5440475 656.964301,46.5607477 658.14521,46.5607477 C659.326118,46.5607477 660.283433,47.5440475 660.283433,48.7570093 C660.283433,49.9699712 659.326118,50.953271 658.14521,50.953271 Z M671.82984,50.953271 C670.648932,50.953271 669.691617,49.9699712 669.691617,48.7570093 C669.691617,47.5440475 670.648932,46.5607477 671.82984,46.5607477 C673.010749,46.5607477 673.968064,47.5440475 673.968064,48.7570093 C673.968064,49.9699712 673.010749,50.953271 671.82984,50.953271 Z M664.987525,50.953271 C663.806617,50.953271 662.849301,49.9699712 662.849301,48.7570093 C662.849301,47.5440475 663.806617,46.5607477 664.987525,46.5607477 C666.168433,46.5607477 667.125749,47.5440475 667.125749,48.7570093 C667.125749,49.9699712 666.168433,50.953271 664.987525,50.953271 Z' id='Options-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");  \n  margin-top: 13px;\n}\n\n.iiif-av-component .av-icon-more:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='18px' height='5px' viewBox='0 0 18 5' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3EOptions icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-734.000000, -755.000000)' fill='%23FFFFFF'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cpath d='M658.14521,50.953271 C656.964301,50.953271 656.006986,49.9699712 656.006986,48.7570093 C656.006986,47.5440475 656.964301,46.5607477 658.14521,46.5607477 C659.326118,46.5607477 660.283433,47.5440475 660.283433,48.7570093 C660.283433,49.9699712 659.326118,50.953271 658.14521,50.953271 Z M671.82984,50.953271 C670.648932,50.953271 669.691617,49.9699712 669.691617,48.7570093 C669.691617,47.5440475 670.648932,46.5607477 671.82984,46.5607477 C673.010749,46.5607477 673.968064,47.5440475 673.968064,48.7570093 C673.968064,49.9699712 673.010749,50.953271 671.82984,50.953271 Z M664.987525,50.953271 C663.806617,50.953271 662.849301,49.9699712 662.849301,48.7570093 C662.849301,47.5440475 663.806617,46.5607477 664.987525,46.5607477 C666.168433,46.5607477 667.125749,47.5440475 667.125749,48.7570093 C667.125749,49.9699712 666.168433,50.953271 664.987525,50.953271 Z' id='Options-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");  \n}\n\n.iiif-av-component .av-icon-fullscreen {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='21px' viewBox='0 0 21 21' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Eexpand icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-894.000000, -748.000000)' fill='%23D6D9DD'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M806.689011,33.2668991 L803.170483,36.8085751 L805.971416,39.6095083 C806.064009,39.678953 806.110306,39.794694 806.110306,39.910435 C806.110306,40.1419171 805.92512,40.3271028 805.693638,40.3271028 L796.526947,40.3271028 C796.295465,40.3271028 796.110279,40.1419171 796.110279,39.910435 L796.110279,30.7437443 C796.110279,30.5817069 796.202872,30.4196694 796.36491,30.3502248 C796.526947,30.3039284 796.712133,30.3270766 796.827874,30.4428176 L799.628807,33.2668991 L803.170483,29.7483714 C803.332521,29.5863339 803.587151,29.5863339 803.749188,29.7483714 L806.689011,32.6881939 C806.781604,32.7576385 806.8279,32.8733796 806.8279,32.9891206 C806.8279,33.0817134 806.781604,33.1974545 806.689011,33.2668991 Z M816.110332,20.7437181 L816.110332,29.9104088 C816.110332,30.0724463 816.017739,30.2344837 815.855702,30.3039284 C815.809405,30.3270766 815.739961,30.3270766 815.693664,30.3270766 C815.577923,30.3270766 815.48533,30.2807802 815.392737,30.2113355 L812.591804,27.3872541 L809.050128,30.92893 C808.980684,30.9983746 808.864943,31.0446711 808.77235,31.0446711 C808.656609,31.0446711 808.540868,30.9983746 808.471423,30.92893 L805.508452,27.9659593 C805.346415,27.8039218 805.346415,27.5492915 805.508452,27.3872541 L809.050128,23.8455781 L806.226047,21.0446448 C806.110306,20.9289038 806.087157,20.7437181 806.133454,20.5816806 C806.202899,20.4196432 806.364936,20.3270504 806.526973,20.3270504 L815.693664,20.3270504 C815.925146,20.3270504 816.110332,20.512236 816.110332,20.7437181 Z' id='expand-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n  margin-top: 5px;\n}\n\n.iiif-av-component .av-icon-fullscreen:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='21px' viewBox='0 0 21 21' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Eexpand icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-894.000000, -748.000000)' fill='%23FFFFFF'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M806.689011,33.2668991 L803.170483,36.8085751 L805.971416,39.6095083 C806.064009,39.678953 806.110306,39.794694 806.110306,39.910435 C806.110306,40.1419171 805.92512,40.3271028 805.693638,40.3271028 L796.526947,40.3271028 C796.295465,40.3271028 796.110279,40.1419171 796.110279,39.910435 L796.110279,30.7437443 C796.110279,30.5817069 796.202872,30.4196694 796.36491,30.3502248 C796.526947,30.3039284 796.712133,30.3270766 796.827874,30.4428176 L799.628807,33.2668991 L803.170483,29.7483714 C803.332521,29.5863339 803.587151,29.5863339 803.749188,29.7483714 L806.689011,32.6881939 C806.781604,32.7576385 806.8279,32.8733796 806.8279,32.9891206 C806.8279,33.0817134 806.781604,33.1974545 806.689011,33.2668991 Z M816.110332,20.7437181 L816.110332,29.9104088 C816.110332,30.0724463 816.017739,30.2344837 815.855702,30.3039284 C815.809405,30.3270766 815.739961,30.3270766 815.693664,30.3270766 C815.577923,30.3270766 815.48533,30.2807802 815.392737,30.2113355 L812.591804,27.3872541 L809.050128,30.92893 C808.980684,30.9983746 808.864943,31.0446711 808.77235,31.0446711 C808.656609,31.0446711 808.540868,30.9983746 808.471423,30.92893 L805.508452,27.9659593 C805.346415,27.8039218 805.346415,27.5492915 805.508452,27.3872541 L809.050128,23.8455781 L806.226047,21.0446448 C806.110306,20.9289038 806.087157,20.7437181 806.133454,20.5816806 C806.202899,20.4196432 806.364936,20.3270504 806.526973,20.3270504 L815.693664,20.3270504 C815.925146,20.3270504 816.110332,20.512236 816.110332,20.7437181 Z' id='expand-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.iiif-av-component .av-icon-subtitles {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='22px' height='20px' viewBox='0 0 22 20' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Esubtitles icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-769.000000, -746.000000)' fill='%23D6D9DD' fill-rule='nonzero'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cpath d='M695.976577,39.5327103 C694.685967,39.5327103 693.639721,40.6185629 693.639721,41.9580299 L693.639721,52.9204747 C693.639721,54.2599418 694.685967,55.3457944 695.976577,55.3457944 L708.408653,55.3457944 C709.699263,55.3457944 710.745509,54.2599418 710.745509,52.9204747 L710.745509,41.9580299 C710.745509,40.6185629 709.699263,39.5327103 708.408653,39.5327103 L695.976577,39.5327103 Z M696.071351,37.7757009 L708.313879,37.7757009 C710.601558,37.7757009 712.456088,39.6938622 712.456088,42.0600341 L712.456088,52.8184706 C712.456088,55.1846425 710.601558,57.1028037 708.313879,57.1028037 L696.071351,57.1028037 C693.783672,57.1028037 691.929142,55.1846425 691.929142,52.8184706 L691.929142,42.0600341 C691.929142,39.6938622 693.783672,37.7757009 696.071351,37.7757009 Z M696.260182,48.317757 L702.993311,48.317757 C703.495825,48.317757 703.903194,47.9244371 703.903194,47.4392523 C703.903194,46.9540676 703.495825,46.5607477 702.993311,46.5607477 L696.260182,46.5607477 C695.757668,46.5607477 695.350299,46.9540676 695.350299,47.4392523 C695.350299,47.9244371 695.757668,48.317757 696.260182,48.317757 Z M707.296761,48.317757 L708.207231,48.317757 C708.664356,48.317757 709.03493,47.9244371 709.03493,47.4392523 C709.03493,46.9540676 708.664356,46.5607477 708.207231,46.5607477 L707.296761,46.5607477 C706.839636,46.5607477 706.469062,46.9540676 706.469062,47.4392523 C706.469062,47.9244371 706.839636,48.317757 707.296761,48.317757 Z M701.391918,51.8317757 L708.125048,51.8317757 C708.627562,51.8317757 709.03493,51.4384558 709.03493,50.953271 C709.03493,50.4680863 708.627562,50.0747664 708.125048,50.0747664 L701.391918,50.0747664 C700.889404,50.0747664 700.482036,50.4680863 700.482036,50.953271 C700.482036,51.4384558 700.889404,51.8317757 701.391918,51.8317757 Z M696.419411,51.8317757 L697.702345,51.8317757 C698.292799,51.8317757 698.771457,51.4384558 698.771457,50.953271 C698.771457,50.4680863 698.292799,50.0747664 697.702345,50.0747664 L696.419411,50.0747664 C695.828957,50.0747664 695.350299,50.4680863 695.350299,50.953271 C695.350299,51.4384558 695.828957,51.8317757 696.419411,51.8317757 Z' id='subtitles-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n  margin-top: 5px;\n}\n\n.iiif-av-component .av-icon-subtitles:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='22px' height='20px' viewBox='0 0 22 20' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Esubtitles icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-769.000000, -746.000000)' fill='%23FFFFFF' fill-rule='nonzero'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cpath d='M695.976577,39.5327103 C694.685967,39.5327103 693.639721,40.6185629 693.639721,41.9580299 L693.639721,52.9204747 C693.639721,54.2599418 694.685967,55.3457944 695.976577,55.3457944 L708.408653,55.3457944 C709.699263,55.3457944 710.745509,54.2599418 710.745509,52.9204747 L710.745509,41.9580299 C710.745509,40.6185629 709.699263,39.5327103 708.408653,39.5327103 L695.976577,39.5327103 Z M696.071351,37.7757009 L708.313879,37.7757009 C710.601558,37.7757009 712.456088,39.6938622 712.456088,42.0600341 L712.456088,52.8184706 C712.456088,55.1846425 710.601558,57.1028037 708.313879,57.1028037 L696.071351,57.1028037 C693.783672,57.1028037 691.929142,55.1846425 691.929142,52.8184706 L691.929142,42.0600341 C691.929142,39.6938622 693.783672,37.7757009 696.071351,37.7757009 Z M696.260182,48.317757 L702.993311,48.317757 C703.495825,48.317757 703.903194,47.9244371 703.903194,47.4392523 C703.903194,46.9540676 703.495825,46.5607477 702.993311,46.5607477 L696.260182,46.5607477 C695.757668,46.5607477 695.350299,46.9540676 695.350299,47.4392523 C695.350299,47.9244371 695.757668,48.317757 696.260182,48.317757 Z M707.296761,48.317757 L708.207231,48.317757 C708.664356,48.317757 709.03493,47.9244371 709.03493,47.4392523 C709.03493,46.9540676 708.664356,46.5607477 708.207231,46.5607477 L707.296761,46.5607477 C706.839636,46.5607477 706.469062,46.9540676 706.469062,47.4392523 C706.469062,47.9244371 706.839636,48.317757 707.296761,48.317757 Z M701.391918,51.8317757 L708.125048,51.8317757 C708.627562,51.8317757 709.03493,51.4384558 709.03493,50.953271 C709.03493,50.4680863 708.627562,50.0747664 708.125048,50.0747664 L701.391918,50.0747664 C700.889404,50.0747664 700.482036,50.4680863 700.482036,50.953271 C700.482036,51.4384558 700.889404,51.8317757 701.391918,51.8317757 Z M696.419411,51.8317757 L697.702345,51.8317757 C698.292799,51.8317757 698.771457,51.4384558 698.771457,50.953271 C698.771457,50.4680863 698.292799,50.0747664 697.702345,50.0747664 L696.419411,50.0747664 C695.828957,50.0747664 695.350299,50.4680863 695.350299,50.953271 C695.350299,51.4384558 695.828957,51.8317757 696.419411,51.8317757 Z' id='subtitles-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.errormessage {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n}\n\n.playwrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n}\n\n.playcircle {\n  border-radius: 50%;\n  background-color: rgba(50,50,50,0.75);\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='21px' viewBox='0 0 21 21' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Eplay icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-105.000000, -747.000000)' fill='%23D6D9DD'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M7.09481147,39.4485981 C7.02536685,39.4485981 6.93277401,39.4254499 6.86332938,39.3791535 C6.74758834,39.3097089 6.67814371,39.1708196 6.67814371,39.0319304 L6.67814371,19.8652134 C6.67814371,19.7263242 6.74758834,19.5874349 6.86332938,19.5179903 C7.00221864,19.4253975 7.14110789,19.4253975 7.27999714,19.4948421 L26.4467141,29.0782006 C26.5856033,29.1476452 26.6781962,29.2865344 26.6781962,29.4485719 C26.6781962,29.6106094 26.5856033,29.7494986 26.4467141,29.8189432 L7.27999714,39.4023017 C7.21055252,39.4254499 7.1642561,39.4485981 7.09481147,39.4485981 Z' id='play-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n  cursor: pointer;\n  width: 15vh;\n  height: 15vh;\n  background-size: 8vh 8vh;\n  background-position: 66% 50%;\n  background-repeat: no-repeat;\n}\n\n.playcircle:hover {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='21px' height='21px' viewBox='0 0 21 21' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3C!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --%3E%3Ctitle%3Eplay icon%3C/title%3E%3Cdesc%3ECreated with Sketch.%3C/desc%3E%3Cdefs%3E%3C/defs%3E%3Cg id='Backend' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='EUMediaPlayer-Video-Editor-1400px' transform='translate(-105.000000, -747.000000)' fill='%23FFFFFF'%3E%3Cg id='Main-content' transform='translate(24.000000, 24.000000)'%3E%3Cg id='Main-card' transform='translate(1.000000, 86.000000)'%3E%3Cg id='Media-Card' transform='translate(53.000000, 141.000000)'%3E%3Cg id='Video' transform='translate(0.000000, 56.000000)'%3E%3Cg id='UI-bottom-section' transform='translate(0.000000, 401.476636)'%3E%3Cg id='UI' transform='translate(20.526946, 19.327103)'%3E%3Cpath d='M7.09481147,39.4485981 C7.02536685,39.4485981 6.93277401,39.4254499 6.86332938,39.3791535 C6.74758834,39.3097089 6.67814371,39.1708196 6.67814371,39.0319304 L6.67814371,19.8652134 C6.67814371,19.7263242 6.74758834,19.5874349 6.86332938,19.5179903 C7.00221864,19.4253975 7.14110789,19.4253975 7.27999714,19.4948421 L26.4467141,29.0782006 C26.5856033,29.1476452 26.6781962,29.2865344 26.6781962,29.4485719 C26.6781962,29.6106094 26.5856033,29.7494986 26.4467141,29.8189432 L7.27999714,39.4023017 C7.21055252,39.4254499 7.1642561,39.4485981 7.09481147,39.4485981 Z' id='play-icon'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.iiif-av-component .options-container {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: 0;\n  padding: 0 2.5% 0 2.5%;\n  background: linear-gradient(0deg, rgba(50,50,50,0.75) 0%, rgba(29,29,29,0) 100%);\n}\n\n.iiif-av-component .canvas-timeline-container {\n  width: auto !important;\n}\n\n.iiif-av-component .loading-progress {\n  position: absolute;\n  height: 5px;\n  background-color: #CCCCCC;\n  box-shadow: inset 0 -1px 0 0 rgba(255,255,255,0.15), inset 0 1px 0 0 rgba(255,255,255,0.15);\n}\n\n.btn[title=Previous] {\n  display: none;\n}\n\n.btn[title=Next] {\n  display: none;\n}\n\n.btn[title=Fullscreen] {\n  float: right !important;\n}\n\n.btn[title=More] {\n  float: right !important;\n}\n\n.btn[title=Subtitles] {\n  float: right !important;\n}\n\n.moremenu {\n  display: none;\n  font-size: 14px !important;\n  color: #EDEDED !important;\n  background-color: rgba(0,0,0,0.8) !important;\n  font-weight: 600 !important;\n  margin-bottom: 10px !important;\n  padding: 10px !important;\n  z-index: 100;\n}\n\n.moremenu-option {\n  cursor: pointer;\n}",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,n=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?i+r:n+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,i){(function(t){var e,i;!function(e){var i=function(){function e(e){this.options=e,this.options.data=t.extend(this.data(),e.data)}return e.prototype._init=function(){return this._$element=t(this.options.target),this._$element.length?(this._$element.empty(),!0):(console.warn("element not found"),!1)},e.prototype.data=function(){return{}},e.prototype.on=function(t,e,i){var n=this._e||(this._e={});(n[t]||(n[t]=[])).push({fn:e,ctx:i})},e.prototype.fire=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=[].slice.call(arguments,1),o=((this._e||(this._e={}))[t]||[]).slice(),r=0,a=o.length;r<a;r++)o[r].fn.apply(o[r].ctx,n)},e.prototype._resize=function(){},e.prototype.set=function(t){},e}();e.BaseComponent=i}(e||(e={})),(i=window)._Components||(i._Components=e)}).call(this,i(5))},function(t,e,i){(function(t,e){var i,n,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(i){var n=function(e){function i(t){var i=e.call(this,t)||this;return i._lastVolume=1,i._data={volume:1},i._init(),i._resize(),i}return r(i,e),i.prototype._init=function(){var i=this,n=e.prototype._init.call(this);n||console.error("Component failed to initialise"),this._$volumeMute=t('\n                                <button class="btn volume-mute" title="'+this.options.data.content.mute+'">\n                                    <i class="av-icon av-icon-mute on" aria-hidden="true"></i>'+this.options.data.content.mute+"\n                                </button>"),this._$volumeSlider=t('<div class="volume-slider"></div>'),this._$element.append(this._$volumeMute,this._$volumeSlider);var r=this;return this._$volumeMute.on("touchstart click",function(t){t.preventDefault(),0!==i._data.volume?(i._lastVolume=i._data.volume,i._data.volume=0):i._data.volume=i._lastVolume,i.fire(o.VOLUME_CHANGED,i._data.volume)}),this._$volumeSlider.slider({value:r._data.volume,step:.1,orientation:"horizontal",range:"min",min:0,max:1,animate:!1,create:function(t,e){},slide:function(t,e){r._data.volume=e.value,0===r._data.volume&&(r._lastVolume=0),r.fire(o.VOLUME_CHANGED,r._data.volume)},stop:function(t,e){}}),n},i.prototype.set=function(t){this._data=Object.assign(this._data,t),this._render()},i.prototype._render=function(){if(void 0!==this._data.volume)if(this._$volumeSlider.slider({value:this._data.volume}),0===this._data.volume){var t=this.options.data.content.unmute;this._$volumeMute.prop("title",t),this._$volumeMute.find("i").switchClass("on","off")}else{t=this.options.data.content.mute;this._$volumeMute.prop("title",t),this._$volumeMute.find("i").switchClass("off","on")}},i.prototype._resize=function(){},i}(_Components.BaseComponent);i.AVVolumeControl=n;var o=function(){function t(){}return t.VOLUME_CHANGED="volumechanged",t}();i.VolumeEvents=o;var a=function(i){function a(e){var n=i.call(this,e)||this;return n._canvasClockFrequency=25,n._canvasClockStartDate=0,n._canvasClockTime=0,n._canvasHeight=0,n._canvasWidth=0,n._data=n.data(),n._highPriorityFrequency=25,n._isPlaying=!1,n._isStalled=!1,n._lowPriorityFrequency=250,n._mediaSyncMarginSecs=1,n._rangeSpanPadding=.25,n._readyMediaCount=0,n._stallRequestedBy=[],n._wasPlaying=!1,n.ranges=[],n.waveforms=[],n.isOnlyCanvasInstance=!1,n.waveformDeltaX=0,n.waveformPageX=0,n._scaleY=function(t,e){return Math.max(n._data.waveformBarWidth,t*e/256)},n._data=n.options.data,n.$playerElement=t('<div class="player player--loading"></div>'),n}return r(a,i),a.prototype.loaded=function(){var t=this;setTimeout(function(){t.$playerElement.removeClass("player--loading")},500)},a.prototype.isPlaying=function(){return this._isPlaying},a.prototype.getClockTime=function(){return this._canvasClockTime},a.prototype.init=function(){var i=this;if(this._data&&this._data.content&&this._data.canvas){this._$hoverPreviewTemplate=t('<div class="hover-preview"><div class="label"></div><div class="pointer"><span class="arrow"></span></div></div>'),this._$canvasContainer=t('<div class="canvas-container"></div>'),this._$optionsContainer=t('<div class="options-container"></div>'),this._$rangeTimelineContainer=t('<div class="range-timeline-container"></div>'),this._$canvasTimelineContainer=t('<div class="canvas-timeline-container"></div>'),this._$canvasHoverPreview=this._$hoverPreviewTemplate.clone(),this._$canvasHoverHighlight=t('<div class="hover-highlight"></div>'),this._$rangeHoverPreview=this._$hoverPreviewTemplate.clone(),this._$rangeHoverHighlight=t('<div class="hover-highlight"></div>'),this._$durationHighlight=t('<div class="duration-highlight"></div>'),this._$timelineItemContainer=t('<div class="timeline-item-container"></div>'),this._$controlsContainer=t('<div class="controls-container"></div>'),this._$prevButton=t('\n                                <button class="btn" title="'+this._data.content.previous+'">\n                                    <i class="av-icon av-icon-previous" aria-hidden="true"></i>'+this._data.content.previous+"\n                                </button>"),this._$playButton=t('\n                                <button class="btn" title="'+this._data.content.play+'">\n                                    <i class="av-icon av-icon-play play" aria-hidden="true"></i>'+this._data.content.play+"\n                                </button>"),this._$nextButton=t('\n                                <button class="btn" title="'+this._data.content.next+'">\n                                    <i class="av-icon av-icon-next" aria-hidden="true"></i>'+this._data.content.next+"\n                                </button>"),this._$timeDisplay=t('<div class="time-display"><span class="canvas-time"></span> / <span class="canvas-duration"></span></div>'),this._$canvasTime=this._$timeDisplay.find(".canvas-time"),this._$canvasDuration=this._$timeDisplay.find(".canvas-duration"),this._$canvasLoadingProgress=t('<div class="loading-progress"></div>'),this._$fullscreenButton=t('\n                                <button class="btn" title="'+this._data.content.fullscreen+'">\n                                    <i class="av-icon av-icon-fullscreen" aria-hidden="true"></i>'+this._data.content.fullscreen+"\n                                </button>"),this.isVirtual()&&this.$playerElement.addClass("virtual");var r=t('<div class="volume"></div>');if(this._volume=new n({target:r[0],data:Object.assign({},this._data)}),this._volume.on(o.VOLUME_CHANGED,function(t){i.fire(o.VOLUME_CHANGED,t)},!1),this._$controlsContainer.append(this._$prevButton,this._$playButton,this._$nextButton,this._$timeDisplay,this._$fullscreenButton,r),this._$canvasTimelineContainer.append(this._$canvasHoverPreview,this._$canvasHoverHighlight,this._$durationHighlight,this._$canvasLoadingProgress),this._$rangeTimelineContainer.append(this._$rangeHoverPreview,this._$rangeHoverHighlight),this._$optionsContainer.append(this._$canvasTimelineContainer,this._$rangeTimelineContainer,this._$timelineItemContainer,this._$controlsContainer),this.$playerElement.append(this._$canvasContainer,this._$optionsContainer),this._$canvasHoverPreview.hide(),this._$rangeHoverPreview.hide(),this._data&&this._data.helper&&this._data.canvas){var a=[];this.isVirtual()?this._data.canvas.canvases.forEach(function(t){if(i._data&&i._data.helper){var n=i._data.helper.getCanvasRanges(t),o=[];n.forEach(function(t){var n=e.extend(!0,{},t);if(o.push(n),n.canvases&&n.canvases.length)for(var r=0;r<n.canvases.length;r++)n.canvases[r]=u.retargetTemporalComponent(i._data.canvas.canvases,n.__jsonld.items[r].id)}),a.push.apply(a,o)}}):a=a.concat(this._data.helper.getCanvasRanges(this._data.canvas)),a.forEach(function(t){i.ranges.push(t)})}var s=this._data.canvas.getWidth(),l=this._data.canvas.getHeight();this._canvasWidth=s||this.$playerElement.parent().width(),this._canvasHeight=l||this._canvasWidth*this._data.defaultAspectRatio;var d=this,h=0,f=0;this._$prevButton.on("touchstart click",function(t){t.preventDefault(),1===++h?(i._previous(!1),f=setTimeout(function(){h=0,f=0},i._data.doubleClickMS)):(i._previous(!0),clearTimeout(f),h=0,f=0)}),this._$playButton[0].addEventListener("click",function(t){t.preventDefault(),i._isPlaying?i.pause():i.play()},!1),this._$nextButton.on("touchstart click",function(t){t.preventDefault(),i._next()}),this._$canvasTimelineContainer.slider({value:0,step:.01,orientation:"horizontal",range:"min",max:d._getDuration(),animate:!1,create:function(t,e){},slide:function(t,e){d._setCurrentTime(e.value)},stop:function(t,e){}}),this._$canvasTimelineContainer.mouseout(function(){d._$canvasHoverHighlight.width(0),d._$canvasHoverPreview.hide()}),this._$rangeTimelineContainer.mouseout(function(){d._$rangeHoverHighlight.width(0),d._$rangeHoverPreview.hide()}),this._$canvasTimelineContainer.on("mousemove",function(t){i._updateHoverPreview(t,i._$canvasTimelineContainer,i._getDuration())}),this._$rangeTimelineContainer.on("mousemove",function(t){if(i._data.range){var e=i._data.range.getDuration();i._updateHoverPreview(t,i._$rangeTimelineContainer,e?e.getLength():0)}}),this._$fullscreenButton[0].addEventListener("click",function(t){t.preventDefault();var e=document;if(e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement)i.fire(c.Events.FULLSCREEN,"off"),e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen&&e.webkitExitFullscreen();else{var n=i.$playerElement.get(0);i.fire(c.Events.FULLSCREEN,"on"),n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}},!1),this._contentAnnotations=[];var p=this._data.canvas.getContent();this._$timelineItemContainer.hide();for(var g=0;g<p.length;g++){var m=p[g],v=void 0,y=m.getBody();if(!y.length)return void console.warn("item has no body");var _=this._getBody(y);if(_){var b=_.getType(),E=_.getFormat();b&&"textualbody"===b.toString()||(v=_.id.split("#")[0]);var w=m.getTarget();if(!w)return void console.warn("item has no target");var T=u.getSpatialComponent(w),S=Manifesto.Utils.getTemporalComponent(w);T||(T=[0,0,this._canvasWidth,this._canvasHeight]),S||(S=[0,this._getDuration()]);var x=parseInt(String(T[0])),C=parseInt(String(T[1])),I=parseInt(String(T[2])),A=parseInt(String(T[3])),M=parseInt(String(S[0])),O=parseInt(String(S[1])),D=this._convertToPercentage(C,this._canvasHeight),R=this._convertToPercentage(x,this._canvasWidth),N=this._convertToPercentage(I,this._canvasWidth),k=this._convertToPercentage(A,this._canvasHeight),P=/[\?|&]t=([^&]+)/g.exec(_.id),L=void 0,F=(L=P&&P[1]?P[1].split(","):[null,null])[0]?parseInt(L[0]):L[0],B={active:!1,end:O,endOffset:L[1]?parseInt(L[1]):L[1],format:E,height:k,left:R,source:v,start:M,startOffset:F,top:D,type:b,width:N};this._renderMediaElement(B);var U=m.getProperty("seeAlso");if(U&&U.length){var j=U[0].id;this.waveforms.push(j)}}else console.warn("unable to find suitable format for",m.id)}this._renderWaveform()}else console.warn("unable to initialise, missing canvas or content")},a.prototype._getBody=function(t){for(var e=0;e<t.length;e++){if((n=(i=t[e]).getFormat())&&u.isHLSFormat(n)&&u.canPlayHls())return i}for(e=0;e<t.length;e++){if((n=(i=t[e]).getFormat())&&u.isMpegDashFormat(n)&&!u.isSafari())return i}for(e=0;e<t.length;e++){var i,n;if((n=(i=t[e]).getFormat())&&!u.isHLSFormat(n)&&!u.isMpegDashFormat(n))return i}return null},a.prototype._getDuration=function(){return this._data&&this._data.canvas?this._data.canvas.getDuration():0},a.prototype.data=function(){return{waveformColor:"#fff",waveformBarSpacing:4,waveformBarWidth:2,volume:1}},a.prototype.isVirtual=function(){return this._data.canvas instanceof d},a.prototype.isVisible=function(){return!!this._data.visible},a.prototype.includesVirtualSubCanvas=function(t){if(this.isVirtual()&&this._data.canvas&&this._data.canvas.canvases)for(var e=0;e<this._data.canvas.canvases.length;e++){var i=this._data.canvas.canvases[e];if(Manifesto.Utils.normaliseUrl(i.id)===t)return!0}return!1},a.prototype.set=function(e){var i=this,n=Object.assign({},this._data);this._data=Object.assign(this._data,e);var o=u.diff(n,this._data);if(o.includes("visible")&&this._data.canvas&&(this._data.visible?(this._rewind(),this.$playerElement.show()):(this.$playerElement.hide(),this.pause()),this.resize()),o.includes("range")&&this._data.helper)if(this._data.range){var r=this._data.range.getDuration();r&&((r.start>=this._canvasClockTime||r.end<=this._canvasClockTime)&&this._setCurrentTime(r.start),this._data.autoPlay&&this.play(),this.fire(c.Events.RANGE_CHANGED,this._data.range.id,this._data.range))}else this.fire(c.Events.RANGE_CHANGED,null);o.includes("volume")?this._contentAnnotations.forEach(function(e){var n=void 0!==i._data.volume?i._data.volume:1;t(e.element).prop("volume",n),i._volume.set({volume:i._data.volume})}):this._render(),o.includes("limitToRange")&&this._render()},a.prototype._hasRangeChanged=function(){var t=this._getRangeForCurrentTime();t&&!this._data.limitToRange&&(!this._data.range||this._data.range&&t.id!==this._data.range.id)&&this.set({range:e.extend(!0,{autoChanged:!0},t)})},a.prototype._getRangeForCurrentTime=function(t){var e;e=t?t.getRanges():this.ranges;for(var i=0;i<e.length;i++){var n=e[i];if(this._rangeSpansCurrentTime(n)){if(this._rangeNavigable(n))return n;for(var o=n.getRanges(),r=0;r<o.length;r++){var a=o[r];if(this._rangeSpansCurrentTime(a))return this._getRangeForCurrentTime(a)}return n.parentRange}}},a.prototype._rangeSpansCurrentTime=function(t){return!!t.spansTime(Math.ceil(this._canvasClockTime)+this._rangeSpanPadding)},a.prototype._rangeNavigable=function(t){var e=t.getBehavior();return!e||e.toString()!==manifesto.Behavior.nonav().toString()},a.prototype._render=function(){if(this._data.range){var t=this._data.range.getDuration();if(t){var e=this._getDuration(),i=this._$canvasTimelineContainer.width()/e,n=t.start*i,o=t.end*i;(o>e||o<n)&&(o=e);var r=o-n;this.isVirtual()||this.isOnlyCanvasInstance?(this._$durationHighlight.show(),this._$durationHighlight.css({left:n,width:r})):this._$durationHighlight.hide();var a=this;this._$rangeTimelineContainer.data("ui-sortable")&&this._$rangeTimelineContainer.slider("destroy"),this._$rangeTimelineContainer.slider({value:t.start,step:.01,orientation:"horizontal",range:"min",min:t.start,max:t.end,animate:!1,create:function(t,e){},slide:function(t,e){a._setCurrentTime(e.value)},stop:function(t,e){}})}}else this._$durationHighlight.hide();this._data.limitToRange&&this._data.range?(this._$canvasTimelineContainer.hide(),this._$rangeTimelineContainer.show()):(this._$canvasTimelineContainer.show(),this._$rangeTimelineContainer.hide()),this._updateCurrentTimeDisplay(),this._updateDurationDisplay(),this._drawWaveform()},a.prototype.getCanvasId=function(){if(this._data&&this._data.canvas)return this._data.canvas.id},a.prototype._updateHoverPreview=function(t,e,i){var n=e.offset(),o=t.pageX-n.left,r=e.find(".arrow"),a=e.find(".hover-highlight"),s=e.find(".hover-preview");a.width(o);var l=e.width(),d=o/l,h=Math.min(i*d);s.find(".label").text(u.formatTime(h));var c=s.outerWidth(),f=s.outerHeight(),p=o-.5*c,g=.5*c-6;p<0&&(p=0,g=o-6),p+c>l&&(p=l-c,g=c-(l-o)-6),s.css({left:p,top:-1*f+"px"}).show(),r.css({left:g})},a.prototype._previous=function(t){this._data.limitToRange?t?this._isNavigationConstrainedToRange()?this._rewind():this.fire(s.PREVIOUS_RANGE):this._rewind():this._data.range?t?(this.set({range:void 0}),this._rewind()):this.fire(s.PREVIOUS_RANGE):this._rewind()},a.prototype._next=function(){this._data.limitToRange&&this._isNavigationConstrainedToRange()?this._fastforward():this.fire(s.NEXT_RANGE)},a.prototype.destroy=function(){window.clearInterval(this._highPriorityInterval),window.clearInterval(this._lowPriorityInterval),window.clearInterval(this._canvasClockInterval)},a.prototype._convertToPercentage=function(t,e){return t/e*100},a.prototype._renderMediaElement=function(e){var i,n=this;switch(e.type.toString().toLowerCase()){case"video":i=t('<video class="anno" />');break;case"sound":case"audio":i=t('<audio class="anno" />');break;default:return}var o=i[0];if(o.onerror=function(){n.fire(c.Events.MEDIA_ERROR,o.error)},e.format&&"application/dash+xml"===e.format.toString()){i.attr("data-dashjs-player","");var r=dashjs.MediaPlayer().create();r.getDebug().setLogToBrowserConsole(!1),this._data.adaptiveAuthEnabled&&r.setXHRWithCredentialsForType("MPD",!0),r.initialize(o,e.source)}else if(e.format&&"application/vnd.apple.mpegurl"===e.format.toString())if(Hls.isSupported()){var a=new Hls;a=this._data.adaptiveAuthEnabled?new Hls({xhrSetup:function(t){t.withCredentials=!0}}):new Hls,this._data.adaptiveAuthEnabled,a.loadSource(e.source),a.attachMedia(o)}else o.canPlayType("application/vnd.apple.mpegurl")&&(o.src=e.source);else i.attr("src",e.source);i.css({top:e.top+"%",left:e.left+"%",width:e.width+"%",height:e.height+"%"}).hide(),e.element=i,e.timeout=null;var s=this;e.checkForStall=function(){var t=this;this.active?(s._checkMediaSynchronization(),this.element.get(0).readyState>0&&!this.outOfSync?s._playbackStalled(!1,t):(s._playbackStalled(!0,t),this.timeout&&window.clearTimeout(this.timeout),this.timeout=window.setTimeout(function(){t.checkForStall()},1e3))):s._playbackStalled(!1,t)},this._contentAnnotations.push(e),this.$playerElement&&this._$canvasContainer.append(i),i.on("loadstart",function(){}),i.on("waiting",function(){}),i.on("seeking",function(){}),i.on("loadedmetadata",function(){n._readyMediaCount++,i.trigger("progress"),n._readyMediaCount===n._contentAnnotations.length&&(n._data.autoPlay?(console.log("autoplay"),n.play()):n.pause(),n._updateDurationDisplay(),n.fire(c.Events.MEDIA_READY))}),i.on("progress",function(){var e=o.duration,i=o.buffered.end(o.buffered.length-1);e>0&&t(".loading-progress").width(i/e*100+"%")}),i.attr("preload","auto"),i.get(0).load(),this._renderSyncIndicator(e)},a.prototype._getWaveformData=function(e){return new Promise(function(i,n){t.ajax({url:e,type:"GET",dataType:"binary",responseType:"arraybuffer",processData:!1}).done(function(t){i(WaveformData.create(t))}).fail(function(t){n(new Error("Network Error"))})})},a.prototype._renderWaveform=function(){var t=this;if(this.waveforms.length){var e=this.waveforms.map(function(e){return t._getWaveformData(e)});Promise.all(e).then(function(e){t._waveformCanvas=document.createElement("canvas"),t._waveformCanvas.classList.add("waveform"),t._$canvasContainer.append(t._waveformCanvas),t.waveformPageX=t._waveformCanvas.getBoundingClientRect().left;var i=t._drawWaveform.bind(t);t._waveformCanvas.addEventListener("mousein",function(){t.waveformDeltaX=0}),t._$canvasTimelineContainer.on("mouseout",function(){t.waveformDeltaX=0,requestAnimationFrame(i)}),t._waveformCanvas.addEventListener("mouseout",function(){t.waveformDeltaX=0,requestAnimationFrame(i)}),t._waveformCanvas.addEventListener("mousemove",function(e){t.waveformDeltaX=e.clientX-t.waveformPageX,requestAnimationFrame(i)}),t._$canvasTimelineContainer.on("mousemove",function(e){t.waveformDeltaX=e.clientX-t.waveformPageX,requestAnimationFrame(i)}),t._waveformCanvas.addEventListener("click",function(){var e=t._waveformCanvas.getBoundingClientRect().width||0;e&&t.setCurrentTime(t._getDuration()*(t.waveformDeltaX/e))}),t._waveformCtx=t._waveformCanvas.getContext("2d"),t._waveformCtx&&(t._waveformCtx.fillStyle=t._data.waveformColor,t._compositeWaveform=new l(e),t.fire(c.Events.WAVEFORM_READY))})}},a.prototype._drawWaveform=function(){if(this._waveformCtx){var t,e=0,i=this._compositeWaveform.duration;this._data.range&&(t=this._data.range.getDuration()),this._data.limitToRange&&t&&(e=t.start,i=t.end);var n=Math.min(this.getClockTime()/this._getDuration(),1),o=e*this._compositeWaveform.pixelsPerSecond,r=i*this._compositeWaveform.pixelsPerSecond,a=this._waveformCtx.canvas.width,s=this._waveformCtx.canvas.height,l=this._data.waveformBarSpacing,d=this._data.waveformBarWidth,h=Math.floor((r-o)/a*l),c=a/l;this._waveformCtx.clearRect(0,0,a,s),this._waveformCtx.fillStyle=this._data.waveformColor;for(var f=o;f<r;f+=h){var p=this._getWaveformMaxAndMin(this._compositeWaveform,f,c),g=this._scaleY(p.max-p.min,s),m=(s-g)/2,v=a*u.normalise(f,o,r),y=v/a<n,_=this.waveformDeltaX/a,b=this._data.waveformColor;y?b=0===this.waveformDeltaX?"#14A4C3":v/a<_?"#11758e":"#14A4C3":v/a<_&&(b="#86b3c3"),this._waveformCtx.fillStyle=b,this._waveformCtx.fillRect(v,m,d,g)}}},a.prototype._getWaveformMaxAndMin=function(t,e,i){for(var n=-127,o=128,r=e;r<e+i;r++){var a=t.max(r),s=t.min(r);a>n&&(n=a),s<o&&(o=s)}return{max:n,min:o}},a.prototype._updateCurrentTimeDisplay=function(){var t;if(this._data.range&&(t=this._data.range.getDuration()),this._data.limitToRange&&t){var e=this._canvasClockTime-t.start;this._$canvasTime.text(u.formatTime(e))}else this._$canvasTime.text(u.formatTime(this._canvasClockTime))},a.prototype._updateDurationDisplay=function(){var t;this._data.range&&(t=this._data.range.getDuration()),this._data.limitToRange&&t?this._$canvasDuration.text(u.formatTime(t.getLength())):this._$canvasDuration.text(u.formatTime(this._getDuration()))},a.prototype._renderSyncIndicator=function(e){var i=this._convertToPercentage(e.start,this._getDuration()),n=this._convertToPercentage(e.end-e.start,this._getDuration()),o=t('<div class="timeline-item" title="'+e.source+'" data-start="'+e.start+'" data-end="'+e.end+'"></div>');o.css({left:i+"%",width:n+"%"});var r=t('<div class="line-wrapper"></div>');o.appendTo(r),e.timelineElement=o,this.$playerElement&&this._$timelineItemContainer.append(r)},a.prototype.setCurrentTime=function(t){return this._setCurrentTime(t)},a.prototype._setCurrentTime=function(t){this._canvasClockTime=t,this._canvasClockStartDate=Date.now()-1e3*this._canvasClockTime,this.logMessage("SET CURRENT TIME to: "+this._canvasClockTime+" seconds."),this._canvasClockUpdater(),this._highPriorityUpdater(),this._lowPriorityUpdater(),this._synchronizeMedia()},a.prototype._rewind=function(t){var e;this.pause(),this._data.range&&(e=this._data.range.getDuration()),this._data.limitToRange&&e?this.setCurrentTime(e.start):this.setCurrentTime(0),this._data.limitToRange||this._data&&this._data.helper&&this.set({range:void 0})},a.prototype._fastforward=function(){var t;this._data.range&&(t=this._data.range.getDuration()),this._data.limitToRange&&t?this._canvasClockTime=t.end:this._canvasClockTime=this._getDuration(),this.pause()},a.prototype.play=function(t){var e=this;if(!this._isPlaying){var i;this._data.range&&(i=this._data.range.getDuration()),this._data.limitToRange&&i&&this._canvasClockTime>=i.end&&(this._canvasClockTime=i.start),this._canvasClockTime===this._getDuration()&&(this._canvasClockTime=0),this._canvasClockStartDate=Date.now()-1e3*this._canvasClockTime,this._highPriorityInterval&&clearInterval(this._highPriorityInterval),this._highPriorityInterval=window.setInterval(function(){e._highPriorityUpdater()},this._highPriorityFrequency),this._lowPriorityInterval&&clearInterval(this._lowPriorityInterval),this._lowPriorityInterval=window.setInterval(function(){e._lowPriorityUpdater()},this._lowPriorityFrequency),this._canvasClockInterval&&clearInterval(this._canvasClockInterval),this._canvasClockInterval=window.setInterval(function(){e._canvasClockUpdater()},this._canvasClockFrequency),this._isPlaying=!0,t||this._synchronizeMedia();var n=this._data&&this._data.content?this._data.content.pause:"";this._$playButton.prop("title",n),this._$playButton.find("i").switchClass("play","pause"),this.fire(s.PLAYCANVAS),this.logMessage("PLAY canvas")}},a.prototype.pause=function(t){window.clearInterval(this._highPriorityInterval),window.clearInterval(this._lowPriorityInterval),window.clearInterval(this._canvasClockInterval),this._isPlaying=!1,t||(this._highPriorityUpdater(),this._lowPriorityUpdater(),this._synchronizeMedia());var e=this._data&&this._data.content?this._data.content.play:"";this._$playButton.prop("title",e),this._$playButton.find("i").switchClass("pause","play"),this.fire(s.PAUSECANVAS),this.logMessage("PAUSE canvas")},a.prototype._isNavigationConstrainedToRange=function(){return this._data.constrainNavigationToRange},a.prototype._canvasClockUpdater=function(){var t;this._canvasClockTime=(Date.now()-this._canvasClockStartDate)/1e3,this._data.range&&(t=this._data.range.getDuration()),this._data.limitToRange&&t&&this._canvasClockTime>=t.end&&this.pause(),this._canvasClockTime>=this._getDuration()&&(this._canvasClockTime=this._getDuration(),this.pause())},a.prototype._highPriorityUpdater=function(){this._$rangeTimelineContainer.slider({value:this._canvasClockTime}),this._$canvasTimelineContainer.slider({value:this._canvasClockTime}),this._updateCurrentTimeDisplay(),this._updateDurationDisplay(),this._drawWaveform()},a.prototype._lowPriorityUpdater=function(){this._updateMediaActiveStates(),this._data.autoSelectRange&&(this.isVirtual()||this.isOnlyCanvasInstance)&&this._hasRangeChanged()},a.prototype._updateMediaActiveStates=function(){for(var t,e=0;e<this._contentAnnotations.length;e++)(t=this._contentAnnotations[e]).start<=this._canvasClockTime&&t.end>=this._canvasClockTime?(this._checkMediaSynchronization(),t.active||(this._synchronizeMedia(),t.active=!0,t.element.show(),t.timelineElement.addClass("active")),t.element[0].currentTime>t.element[0].duration-t.endOffset&&this._pauseMedia(t.element[0])):t.active&&(t.active=!1,t.element.hide(),t.timelineElement.removeClass("active"),this._pauseMedia(t.element[0]))},a.prototype._pauseMedia=function(t){t.pause()},a.prototype._setMediaCurrentTime=function(t,e){isNaN(t.duration)||(t.currentTime=e)},a.prototype._synchronizeMedia=function(){for(var t,e=0;e<this._contentAnnotations.length;e++){if(t=this._contentAnnotations[e],this._setMediaCurrentTime(t.element[0],this._canvasClockTime-t.start+t.startOffset),t.start<=this._canvasClockTime&&t.end>=this._canvasClockTime)if(this._isPlaying){if(t.element[0].paused){var i=t.element[0].play();i&&i.catch(function(){})}}else this._pauseMedia(t.element[0]);else this._pauseMedia(t.element[0]);t.element[0].currentTime>t.element[0].duration-t.endOffset&&this._pauseMedia(t.element[0])}this.logMessage("SYNC MEDIA at: "+this._canvasClockTime+" seconds.")},a.prototype._checkMediaSynchronization=function(){for(var t,e=0,i=this._contentAnnotations.length;e<i;e++)if((t=this._contentAnnotations[e]).start<=this._canvasClockTime&&t.end>=this._canvasClockTime){var n=this._canvasClockTime-t.start+t.startOffset,o=t.element[0].currentTime;if(Math.abs(o-n)>this._mediaSyncMarginSecs){t.outOfSync=!0;var r=Math.abs(o-n);this.logMessage("DETECTED synchronization lag: "+Math.abs(r)),this._setMediaCurrentTime(t.element[0],n)}else t.outOfSync=!1}},a.prototype._playbackStalled=function(t,e){if(t)this._stallRequestedBy.indexOf(e)<0&&this._stallRequestedBy.push(e),this._isStalled||(this.$playerElement,this._wasPlaying=this._isPlaying,this.pause(!0),this._isStalled=t);else{var i=this._stallRequestedBy.indexOf(e);i>=0&&this._stallRequestedBy.splice(i,1),0===this._stallRequestedBy.length&&(this._isStalled&&this._wasPlaying&&this.play(!0),this._isStalled=t)}},a.prototype.resize=function(){if(this.$playerElement){var t=this._$canvasContainer.width();if(t){this._$canvasTimelineContainer.width(t);var e=this.$playerElement.find(".options-container");void 0!==this._data.halveAtWidth&&this.$playerElement.parent().width()<this._data.halveAtWidth?this._$canvasContainer.height(this.$playerElement.parent().height()/2):this._$canvasContainer.height(this.$playerElement.parent().height()-e.height())}if(this._waveformCanvas){var i=this._$canvasContainer.width(),n=this._$canvasContainer.height();this._waveformCanvas.width=i,this._waveformCanvas.height=n,this.waveformPageX=this._waveformCanvas.getBoundingClientRect().left}this._render()}},a}(_Components.BaseComponent);i.CanvasInstance=a;var s=function(){function t(){}return t.NEXT_RANGE="nextrange",t.PAUSECANVAS="pause",t.PLAYCANVAS="play",t.PREVIOUS_RANGE="previousrange",t}();i.CanvasInstanceEvents=s;var l=function(){function t(t){var e=this;this.length=0,this.duration=0,this.pixelsPerSecond=Number.MAX_VALUE,this.secondsPerPixel=Number.MAX_VALUE,this.timeIndex={},this.minIndex={},this.maxIndex={},this._waveforms=[],t.forEach(function(t){e._waveforms.push({start:e.length,end:e.length+t.adapter.length,waveform:t}),e.length+=t.adapter.length,e.duration+=t.duration,e.pixelsPerSecond=Math.min(e.pixelsPerSecond,t.pixels_per_second),e.secondsPerPixel=Math.min(e.secondsPerPixel,t.seconds_per_pixel)})}return t.prototype.min=function(t){if(void 0===this.minIndex[t]){var e=this._find(t);this.minIndex[t]=e?e.waveform.min_sample(t-e.start):0}return this.minIndex[t]},t.prototype.max=function(t){if(void 0===this.maxIndex[t]){var e=this._find(t);this.maxIndex[t]=e?e.waveform.max_sample(t-e.start):0}return this.maxIndex[t]},t.prototype._find=function(t){if(void 0===this.timeIndex[t]){var e=this._waveforms.find(function(e){return t>=e.start&&t<e.end});if(!e)return null;this.timeIndex[t]=e}return this.timeIndex[t]},t}();i.CompositeWaveform=l;var u=function(){function t(){}return t._compare=function(t,e){var i=[];return Object.keys(t).forEach(function(n){Object.is(e[n],t[n])||i.push(n)}),i},t.diff=function(e,i){return Array.from(new Set(t._compare(e,i).concat(t._compare(i,e))))},t.getSpatialComponent=function(t){var e=/[\?|&]xywh=([^&]+)/g.exec(t),i=null;return e&&e[1]&&(i=e[1].split(",")),i},t.getFirstTargetedCanvasId=function(e){var i;if(e.canvases&&e.canvases.length)i=e.canvases[0];else{var n=e.getRanges();if(n.length)return t.getFirstTargetedCanvasId(n[0])}if(void 0!==i)return Manifesto.Utils.normaliseUrl(i)},t.getTimestamp=function(){return String((new Date).valueOf())},t.retargetTemporalComponent=function(t,e){var i=Manifesto.Utils.getTemporalComponent(e);if(i){for(var n=0,o=e.substr(0,e.indexOf("#")),r=0;r<t.length;r++){var a=t[r];if(a.id.includes(o))break;var s=a.getDuration();s&&(n+=s)}return i[0]=Number(i[0])+n,i[1]=Number(i[1])+n,o+"#t="+i[0]+","+i[1]}},t.formatTime=function(t){var e,i,n;return n=Math.ceil(t),((e=(e=Math.floor(n/3600))>=10?e:"0"+e)>=1?e+":":"")+(i=(i=Math.floor(n%3600/60))>=10?i:"0"+i)+":"+(n=(n=Math.floor(n%3600%60))>=10?n:"0"+n)},t.isIE=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var n=t.indexOf("Edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)},t.isSafari=function(){var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return console.log("isSafari",t),t},t.debounce=function(t,e){return e=e||100,function(){if(!t.debouncing){var i=Array.prototype.slice.apply(arguments);t.lastReturnVal=t.apply(window,i),t.debouncing=!0}return clearTimeout(t.debounceTimeout),t.debounceTimeout=setTimeout(function(){t.debouncing=!1},e),t.lastReturnVal}},t.normalise=function(t,e,i){return(t-e)/(i-e)},t.isHLSFormat=function(t){return this.hlsMimeTypes.includes(t.toString())},t.isMpegDashFormat=function(t){return"application/dash+xml"===t.toString()},t.canPlayHls=function(){var t="object"==typeof document&&document,e=t&&t.createElement("video");return Boolean(e&&e.canPlayType)&&this.hlsMimeTypes.some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})},t.hlsMimeTypes=["application/vnd.apple.mpegurl","vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],t}();i.AVComponentUtils=u;var d=function(){function t(){this.canvases=[],this.id=u.getTimestamp()}return t.prototype.addCanvas=function(t){this.canvases.push(e.extend(!0,{},t))},t.prototype.getContent=function(){var t=this,e=[];return this.canvases.forEach(function(i){var n=i.getContent();n.forEach(function(t){var e=t.getTarget();e&&(Manifesto.Utils.getTemporalComponent(e)||(t.__jsonld.target+="#t=0,"+i.getDuration()))}),n.forEach(function(e){var i=e.getTarget();i&&(e.__jsonld.target=u.retargetTemporalComponent(t.canvases,i))}),e.push.apply(e,n)}),e},t.prototype.getDuration=function(){var t=0;return this.canvases.forEach(function(e){var i=e.getDuration();i&&(t+=i)}),t},t.prototype.getWidth=function(){return this.canvases.length?this.canvases[0].getWidth():0},t.prototype.getHeight=function(){return this.canvases.length?this.canvases[0].getHeight():0},t}();i.VirtualCanvas=d;var h=function(){};i.Waveform=h;var c=function(i){function n(t){var e=i.call(this,t)||this;return e._data=e.data(),e.canvasInstances=[],e._readyMedia=0,e._readyWaveforms=0,e._posterCanvasWidth=0,e._posterCanvasHeight=0,e._posterImageExpanded=!1,console.log("av component from local"),e._init(),e._resize(),e}return r(n,i),n.prototype._init=function(){var t=i.prototype._init.call(this);return t||console.error("Component failed to initialise"),t},n.prototype.getCurrentCanvasInstance=function(){var t=this._data.helper.getRangeById(this._data.range.id);if(!t)return null;var e=u.getFirstTargetedCanvasId(t);return e?this._data.helper.getCanvasById(e):null},n.prototype.data=function(){return{autoPlay:!1,constrainNavigationToRange:!1,defaultAspectRatio:.56,doubleClickMS:350,halveAtWidth:200,limitToRange:!1,posterImageRatio:.3,virtualCanvasEnabled:!0,content:{currentTime:"Current Time",collapse:"Collapse",duration:"Duration",expand:"Expand",mute:"Mute",next:"Next",pause:"Pause",play:"Play",previous:"Previous",unmute:"Unmute",fullscreen:"Fullscreen"}}},n.prototype.set=function(t){var i=this,n=Object.assign({},this._data);this._data=Object.assign(this._data,t);var o=u.diff(n,this._data);if(o.includes("helper")&&this._reset(),this._data.helper){if(o.includes("limitToRange")&&this._data.canvasId&&this.canvasInstances.forEach(function(t,e){t.set({limitToRange:i._data.limitToRange})}),o.includes("constrainNavigationToRange")&&this._data.canvasId&&this.canvasInstances.forEach(function(t,e){t.set({constrainNavigationToRange:i._data.constrainNavigationToRange})}),o.includes("autoSelectRange")&&this._data.canvasId&&this.canvasInstances.forEach(function(t,e){t.set({autoSelectRange:i._data.autoSelectRange})}),o.includes("canvasId")&&this._data.canvasId){var r=this._getCanvasInstanceById(this._data.canvasId);r&&this.canvasInstances.forEach(function(t){t.getCanvasId()!==r.getCanvasId()?t.set({visible:!1}):o.includes("range")?t.set({visible:!0,range:i._data.range?e.extend(!0,{},i._data.range):void 0}):t.set({visible:!0})})}if(o.includes("virtualCanvasEnabled")&&(this.set({range:void 0}),this._data.virtualCanvasEnabled&&this.canvasInstances.forEach(function(t){t.isVirtual()&&i.set({canvasId:t.getCanvasId(),range:void 0})})),o.includes("range")&&this._data.range){var a=this._data.helper.getRangeById(this._data.range.id);if(a){var s=u.getFirstTargetedCanvasId(a);if(s){var l=this._getCanvasInstanceById(s);if(l){if(l.isVirtual()&&this._data.virtualCanvasEnabled&&l.includesVirtualSubCanvas(s)){s=l.getCanvasId();for(var d=0;d<l.ranges.length;d++){var h=l.ranges[d];if(h.id===a.id){a=h;break}}}this._data.canvasId&&(this._data.canvasId.includes("://")?Manifesto.Utils.normaliseUrl(this._data.canvasId):this._data.canvasId)!==s?this.set({canvasId:s,range:e.extend(!0,{},a)}):l.set({range:e.extend(!0,{},a)})}}}else console.warn("range not found")}this._render(),this._resize()}else console.warn("must pass a helper object")},n.prototype._render=function(){},n.prototype.reset=function(){this._reset()},n.prototype._reset=function(){var e=this;if(this._readyMedia=0,this._readyWaveforms=0,this._posterCanvasWidth=0,this._posterCanvasHeight=0,clearInterval(this._checkAllMediaReadyInterval),clearInterval(this._checkAllWaveformsReadyInterval),this.canvasInstances.forEach(function(t){t.destroy()}),this.canvasInstances=[],this._$element.empty(),this._data&&this._data.helper){var i=this._data.helper.manifest.getBehavior(),n=this._getCanvases();if(i&&i.toString()===manifesto.Behavior.autoadvance().toString()){var o=new d;n.forEach(function(t){o.addCanvas(t)}),this._initCanvas(o)}n.forEach(function(t){e._initCanvas(t)}),this.canvasInstances.length>0&&(this._data.canvasId=this.canvasInstances[0].getCanvasId()),this._checkAllMediaReadyInterval=setInterval(this._checkAllMediaReady.bind(this),100),this._checkAllWaveformsReadyInterval=setInterval(this._checkAllWaveformsReady.bind(this),100),this._$posterContainer=t('<div class="poster-container"></div>'),this._$element.append(this._$posterContainer),this._$posterImage=t('<div class="poster-image"></div>'),this._$posterExpandButton=t('\n                    <button class="btn" title="'+(this._data&&this._data.content?this._data.content.expand:"")+'">\n                        <i class="av-icon  av-icon-expand expand" aria-hidden="true"></i><span>'+(this._data&&this._data.content?this._data.content.expand:"")+"</span>\n                    </button>\n                "),this._$posterImage.append(this._$posterExpandButton),this._$posterImage.on("touchstart click",function(t){t.preventDefault();var i=e._getPosterImageCss(!e._posterImageExpanded);if(e._$posterImage.animate(i),e._posterImageExpanded=!e._posterImageExpanded,e._data.content)if(e._posterImageExpanded){var n=e._data.content.collapse;e._$posterExpandButton.prop("title",n),e._$posterExpandButton.find("i").switchClass("expand","collapse")}else{n=e._data.content.expand;e._$posterExpandButton.prop("title",n),e._$posterExpandButton.find("i").switchClass("collapse","expand")}});var r=this._data.helper.getPosterCanvas();if(r){this._posterCanvasWidth=r.getWidth(),this._posterCanvasHeight=r.getHeight();var a=this._data.helper.getPosterImage();if(a){this._$posterContainer.append(this._$posterImage);var s=this._getPosterImageCss(this._posterImageExpanded);s=Object.assign({},s,{"background-image":"url("+a+")"}),this._$posterImage.css(s)}}}},n.prototype.setCurrentTime=function(t){var e=this._getCurrentCanvas();if(e)return e.setCurrentTime(t)},n.prototype.getCurrentTime=function(){var t=this._getCurrentCanvas();return t?t.getClockTime():0},n.prototype.isPlaying=function(){return this.canvasInstances.reduce(function(t,e){return t||e.isPlaying()},!1)},n.prototype._checkAllMediaReady=function(){console.log("loading media"),this._readyMedia===this.canvasInstances.length&&(console.log("all media ready"),clearInterval(this._checkAllMediaReadyInterval),this.fire(n.Events.MEDIA_READY),this.resize())},n.prototype._checkAllWaveformsReady=function(){console.log("loading waveforms"),this._readyWaveforms===this._getCanvasInstancesWithWaveforms().length&&(console.log("waveforms ready"),clearInterval(this._checkAllWaveformsReadyInterval),this.fire(n.Events.WAVEFORMS_READY),this.resize())},n.prototype._getCanvasInstancesWithWaveforms=function(){return this.canvasInstances.filter(function(t){return t.waveforms.length>0})},n.prototype._getCanvases=function(){return this._data.helper?this._data.helper.getCanvases():[]},n.prototype._initCanvas=function(t){var e=this,i=new a({target:document.createElement("div"),data:Object.assign({},{canvas:t},this._data)});i.logMessage=this._logMessage.bind(this),i.isOnlyCanvasInstance=1===this._getCanvases().length,this._$element.append(i.$playerElement),i.init(),this.canvasInstances.push(i),i.on("play",function(){e.fire(n.Events.PLAY,i)},!1),i.on("pause",function(){e.fire(n.Events.PAUSE,i)},!1),i.on(n.Events.MEDIA_READY,function(){e._readyMedia++,i.loaded()},!1),i.on(n.Events.WAVEFORM_READY,function(){e._readyWaveforms++},!1),i.on(s.PREVIOUS_RANGE,function(){e._prevRange(),e.play()},!1),i.on(s.NEXT_RANGE,function(){e._nextRange(),e.play()},!1),i.on(n.Events.RANGE_CHANGED,function(t){e.fire(n.Events.RANGE_CHANGED,t)},!1),i.on(o.VOLUME_CHANGED,function(t){e._setCanvasInstanceVolumes(t),e.fire(o.VOLUME_CHANGED,t)},!1),i.on(n.Events.MEDIA_ERROR,function(t){clearInterval(e._checkAllMediaReadyInterval),e.fire(n.Events.MEDIA_ERROR,t)},!1),i.on(n.Events.FULLSCREEN,function(t){e.fire(n.Events.FULLSCREEN,t)},!1)},n.prototype.getCurrentRange=function(){var t=this._data.helper.getCurrentRange().id;return this._getCurrentCanvas().ranges.find(function(e){return e.id===t})||null},n.prototype._prevRange=function(){if(this._data&&this._data.helper){var t=this.getCurrentRange();if(t){var e=this.getCurrentTime(),i=t.getDuration().start||0;if(e-i>5)return void this.setCurrentTime(i)}var n=this._data.helper.getPreviousRange();n?this.playRange(n.id):this._rewind()}},n.prototype._nextRange=function(){if(this._data&&this._data.helper){var t=this._data.helper.getNextRange();t&&this.playRange(t.id)}},n.prototype._setCanvasInstanceVolumes=function(t){this.canvasInstances.forEach(function(e){e.set({volume:t})})},n.prototype._getNormaliseCanvasId=function(t){return t.includes("://")?Manifesto.Utils.normaliseUrl(t):t},n.prototype._getCanvasInstanceById=function(t){if(t=this._getNormaliseCanvasId(t),this._data.virtualCanvasEnabled)for(var e=0;e<this.canvasInstances.length;e++){var i=(n=this.canvasInstances[e]).getCanvasId();if(i&&(i=this._getNormaliseCanvasId(i),(n.isVirtual()||1===this.canvasInstances.length)&&i===t||n.includesVirtualSubCanvas(t)))return n}else for(e=0;e<this.canvasInstances.length;e++){var n,o=(n=this.canvasInstances[e]).getCanvasId();if(o)if(Manifesto.Utils.normaliseUrl(o)===t)return n}},n.prototype._getCurrentCanvas=function(){if(this._data.canvasId)return this._getCanvasInstanceById(this._data.canvasId)},n.prototype._rewind=function(){if(!this._data.limitToRange){var t=this._getCurrentCanvas();t&&t.set({range:void 0})}},n.prototype.play=function(){var t=this._getCurrentCanvas();t&&t.play()},n.prototype.pause=function(){var t=this._getCurrentCanvas();t&&t.pause()},n.prototype.playRange=function(t,i){if(void 0===i&&(i=!1),this._data.helper){var n=this._data.helper.getRangeById(t);n&&this.set({range:e.extend(!0,{autoChanged:i},n)})}},n.prototype.showCanvas=function(t){var e=this._getCurrentCanvas();e&&e.getCanvasId()===t&&!e.isVisible()?e.set({visible:!0}):this.set({canvasId:t})},n.prototype._logMessage=function(t){this.fire(n.Events.LOG,t)},n.prototype._getPosterImageCss=function(t){var e=this._getCurrentCanvas();if(e){var i=e.$playerElement.find(".options-container"),n=e.$playerElement.parent().width(),o=e.$playerElement.parent().height()-i.height();if(t)return{top:0,left:0,width:n,height:o};var r=void 0,a=void 0,s=void 0;return this._posterCanvasWidth>this._posterCanvasHeight?(r=this._posterCanvasHeight/this._posterCanvasWidth,s=(a=n*this._data.posterImageRatio)*r):(r=this._posterCanvasWidth/this._posterCanvasHeight,a=(s=o*this._data.posterImageRatio)*r),{top:0,left:n-a,width:a,height:s}}return null},n.prototype.resize=function(){this.canvasInstances.forEach(function(t){t.resize()}),this._getCurrentCanvas()&&this._$posterImage&&this._$posterImage.is(":visible")&&(this._posterImageExpanded?this._$posterImage.css(this._getPosterImageCss(!0)):this._$posterImage.css(this._getPosterImageCss(!1)))},n}(_Components.BaseComponent);i.AVComponent=c}(n||(n={})),function(t){!function(t){var e=function(){function t(){}return t.PLAY="play",t.PAUSE="pause",t.MEDIA_READY="mediaready",t.MEDIA_ERROR="mediaerror",t.LOG="log",t.RANGE_CHANGED="rangechanged",t.WAVEFORM_READY="waveformready",t.WAVEFORMS_READY="waveformsready",t.FULLSCREEN="fullscreen",t}();t.Events=e}(t.AVComponent||(t.AVComponent={}))}(n||(n={})),(o=window).IIIFComponents?o.IIIFComponents.AVComponent=n.AVComponent:o.IIIFComponents=n}).call(this,i(5),i(5))},function(t,e,i){(function(t){var e,i,n,o=this&&this.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});!function(e){var i=function(e){function i(t){var i=e.call(this,t)||this;return i._data=i.data(),i._data=i.options.data,i._init(),i._resize(),i}return o(i,e),i.prototype._init=function(){var n=e.prototype._init.call(this);n||console.error("TreeComponent failed to initialise");var o=this;return this._$tree=t('<ul class="tree"></ul>'),this._$element.append(this._$tree),t.templates({pageTemplate:"{^{for nodes}}                                    {^{tree/}}                                {{/for}}",treeTemplate:'<li>                                    {^{if nodes && nodes.length }}                                        <div class="toggle" data-link="class{merge:expanded toggle=\'expanded\'}"></div>                                    {{else isManifest() || isCollection() }}                                        <div class="toggle"></div>                                    {{else}}                                    <div class="spacer"></div>                                    {{/if}}                                    {^{if multiSelectEnabled}}                                        <input id="tree-checkbox-{{>id}}" type="checkbox" data-link="checked{:multiSelected ? \'checked\' : \'\'}" class="multiSelect" />                                    {{/if}}                                    {^{if selected}}                                        <a id="tree-link-{{>id}}" href="#" title="{{>label}}" class="selected">{{>label}}</a>                                    {{else}}                                        <a id="tree-link-{{>id}}" href="#" title="{{>label}}">{{>label}}</a>                                    {{/if}}                                </li>                                {^{if expanded}}                                    <li>                                        <ul>                                            {^{for nodes}}                                                {^{tree/}}                                            {{/for}}                                        </ul>                                    </li>                                {{/if}}'}),t.views.tags({tree:{toggleExpanded:function(){var t=this.data;t.nodes&&t.nodes.length?o._setNodeExpanded(t,!t.expanded):o.fire(i.Events.TREE_NODE_SELECTED,t)},toggleMultiSelect:function(){var t=this.data;if(o._setNodeMultiSelected(t,!t.multiSelected),t.isRange()){var e=o._getMultiSelectState();e&&e.selectRange(t.data,t.multiSelected)}o.fire(i.Events.TREE_NODE_MULTISELECTED,t)},init:function(t,e,i){this.data=t.view.data},onAfterLink:function(){var t=this;t.contents("li").first().on("click",".toggle",function(){t.toggleExpanded()}).on("click","a",function(e){e.preventDefault();var n=t.data;n.nodes.length&&o._data.branchNodesExpandOnClick&&t.toggleExpanded(),n.multiSelectEnabled?t.toggleMultiSelect():n.nodes.length?o._data.branchNodesSelectable&&(o.fire(i.Events.TREE_NODE_SELECTED,n),o.selectNode(n)):(o.fire(i.Events.TREE_NODE_SELECTED,n),o.selectNode(n))}).on("click","input.multiSelect",function(e){t.toggleMultiSelect()})},template:t.templates.treeTemplate}}),n},i.prototype.set=function(e){var i=this;if(this._data=Object.assign(this._data,e),this._data.helper){this._rootNode=this._data.helper.getTree(this._data.topRangeIndex,this._data.treeSortType),this._allNodes=null,this._multiSelectableNodes=null,this._$tree.link(t.templates.pageTemplate,this._rootNode);var n=this._getMultiSelectState();if(n)for(var o=function(t){var e=n.ranges[t],i=r._getMultiSelectableNodes().en().where(function(t){return t.data.id===e.id}).first();i&&(r._setNodeMultiSelectEnabled(i,e.multiSelectEnabled),r._setNodeMultiSelected(i,e.multiSelected))},r=this,a=0;a<n.ranges.length;a++)o(a);var s=this.getAllNodes();this._data.autoExpand&&s.forEach(function(t,e){t.nodes.length&&i._setNodeExpanded(t,!0)})}},i.prototype._getMultiSelectState=function(){return this._data.helper?this._data.helper.getMultiSelectState():null},i.prototype.data=function(){return{autoExpand:!1,branchNodesExpandOnClick:!0,branchNodesSelectable:!0,helper:null,topRangeIndex:0,treeSortType:Manifold.TreeSortType.NONE}},i.prototype.allNodesSelected=function(){var t=this._getMultiSelectableNodes(),e=this.getMultiSelectedNodes();return t.length===e.length},i.prototype._getMultiSelectableNodes=function(){var t=this;return this._multiSelectableNodes?this._multiSelectableNodes:this._multiSelectableNodes=this.getAllNodes().en().where(function(e){return t._nodeIsMultiSelectable(e)}).toArray()},i.prototype._nodeIsMultiSelectable=function(t){return t.isManifest()&&t.nodes.length>0||t.isRange()},i.prototype.getAllNodes=function(){return this._allNodes?this._allNodes:this._allNodes=this._rootNode.nodes.en().traverseUnique(function(t){return t.nodes}).toArray()},i.prototype.getMultiSelectedNodes=function(){var t=this;return this.getAllNodes().en().where(function(e){return t._nodeIsMultiSelectable(e)&&e.multiSelected}).toArray()},i.prototype.getNodeById=function(t){return this.getAllNodes().en().where(function(e){return e.id===t}).first()},i.prototype.expandParents=function(t,e){t.parentNode&&(this._setNodeExpanded(t.parentNode,e),this.expandParents(t.parentNode,e))},i.prototype._setNodeSelected=function(e,i){t.observable(e).setProperty("selected",i)},i.prototype._setNodeExpanded=function(e,i){t.observable(e).setProperty("expanded",i)},i.prototype._setNodeMultiSelected=function(e,i){t.observable(e).setProperty("multiSelected",i)},i.prototype._setNodeMultiSelectEnabled=function(e,i){t.observable(e).setProperty("multiSelectEnabled",i)},i.prototype.selectPath=function(t){if(this._rootNode){var e=t.split("/");e.length>=1&&e.shift();var i=this.getNodeByPath(this._rootNode,e);this.selectNode(i)}},i.prototype.deselectCurrentNode=function(){this.selectedNode&&this._setNodeSelected(this.selectedNode,!1)},i.prototype.selectNode=function(t){this._rootNode&&(this.deselectCurrentNode(),this.selectedNode=t,this._setNodeSelected(this.selectedNode,!0))},i.prototype.expandNode=function(t,e){this._rootNode&&this._setNodeExpanded(t,e)},i.prototype.getNodeByPath=function(t,e){if(0===e.length)return t;var i=Number(e.shift()),n=t.nodes[i];return this.getNodeByPath(n,e)},i.prototype.show=function(){this._$element.show()},i.prototype.hide=function(){this._$element.hide()},i.prototype._resize=function(){},i}(_Components.BaseComponent);e.TreeComponent=i}(i||(i={})),function(t){!function(t){var e=function(){function t(){}return t.TREE_NODE_MULTISELECTED="treeNodeMultiSelected",t.TREE_NODE_SELECTED="treeNodeSelected",t}();t.Events=e}(t.TreeComponent||(t.TreeComponent={}))}(i||(i={})),(n=window).IIIFComponents?n.IIIFComponents.TreeComponent=i.TreeComponent:n.IIIFComponents=i}).call(this,i(5))},function(t,e,i){(function(e){var n,o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});(a||(a={})).version="0.5.0",a||(a={}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),function(t){var e=function(){function t(){}return t.prototype.getEnumerator=function(){return{moveNext:function(){return!1},current:void 0}},t.prototype.aggregate=function(t,e){for(var i=t,n=this.getEnumerator();n.moveNext();)i=e(i,n.current);return i},t.prototype.all=function(t){if(t)for(var e=this.getEnumerator(),i=0;e.moveNext();){if(!t(e.current,i))return!1;i++}return!0},t.prototype.any=function(t){for(var e=this.getEnumerator(),i=0;e.moveNext();){if(!t)return!0;if(t(e.current,i))return!0;i++}return!1},t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Not implemented")},t.prototype.apply=function(t){throw new Error("Not implemented")},t.prototype.at=function(t){for(var e=this.getEnumerator(),i=0;e.moveNext();){if(i===t)return e.current;i++}},t.prototype.average=function(t){var e=0,i=0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var n=this.getEnumerator();n.moveNext();)i+=t(n.current),e++;return 0===e?0:i/e},t.prototype.concat=function(t){throw new Error("Not implemented")},t.prototype.count=function(t){for(var e=0,i=this.getEnumerator();i.moveNext();)t&&!t(i.current)||e++;return e},t.prototype.difference=function(t,e){return e=e||function(t,e){return t===e},t instanceof Array&&(t=t.en()),{intersection:this.intersect(t,e).toArray().en(),aNotB:this.except(t,e).toArray().en(),bNotA:t.except(this,e).toArray().en()}},t.prototype.distinct=function(t){throw new Error("Not implemented")},t.prototype.except=function(t,e){throw new Error("Not implemented")},t.prototype.first=function(t){for(var e=this.getEnumerator();e.moveNext();)if(!t||t(e.current))return e.current},t.prototype.firstIndex=function(t){for(var e=this.getEnumerator(),i=0;e.moveNext();i++)if(!t||t(e.current))return i;return-1},t.prototype.forEach=function(t){for(var e=this.getEnumerator();e.moveNext();)t(e.current)},t.prototype.groupBy=function(t,e){throw new Error("Not implemented")},t.prototype.intersect=function(t,e){throw new Error("Not implemented")},t.prototype.join=function(t,e,i,n,o){throw new Error("Not implemented")},t.prototype.last=function(t){for(var e,i=this.getEnumerator();i.moveNext();)t&&!t(i.current)||(e=i.current);return e},t.prototype.lastIndex=function(t){for(var e=-1,i=this.getEnumerator(),n=0;i.moveNext();n++)t&&!t(i.current)||(e=n);return e},t.prototype.max=function(t){var e=this.getEnumerator();if(!e.moveNext())return 0;for(var i=(t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t})(e.current);e.moveNext();)i=Math.max(i,t(e.current));return i},t.prototype.min=function(t){var e=this.getEnumerator();if(!e.moveNext())return 0;for(var i=(t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t})(e.current);e.moveNext();)i=Math.min(i,t(e.current));return i},t.prototype.orderBy=function(t,e){throw new Error("Not implemented")},t.prototype.orderByDescending=function(t,e){throw new Error("Not implemented")},t.prototype.prepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Not implemented")},t.prototype.reverse=function(){throw new Error("Not implemented")},t.prototype.select=function(t){throw new Error("Not implemented")},t.prototype.selectMany=function(t){throw new Error("Not implemented")},t.prototype.skip=function(t){throw new Error("Not implemented")},t.prototype.skipWhile=function(t){throw new Error("Not implemented")},t.prototype.standardDeviation=function(t){var e=this.average(t),i=0,n=0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var o=this.getEnumerator();o.moveNext();){var r=t(o.current)-e;i+=r*r,n++}return Math.sqrt(i/n)},t.prototype.sum=function(t){var e=0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var i=this.getEnumerator();i.moveNext();)e+=t(i.current);return e},t.prototype.take=function(t){throw new Error("Not implemented")},t.prototype.takeWhile=function(t){throw new Error("Not implemented")},t.prototype.traverse=function(t){throw new Error("Not implemented")},t.prototype.traverseUnique=function(t,e){throw new Error("Not implemented")},t.prototype.toArray=function(){for(var t=[],e=this.getEnumerator();e.moveNext();)t.push(e.current);return t},t.prototype.toMap=function(t,e){throw new Error("Not implemented")},t.prototype.toList=function(){throw new Error("Not implemented")},t.prototype.union=function(t,e){throw new Error("Not implemented")},t.prototype.where=function(t){throw new Error("Not implemented")},t.prototype.zip=function(t,e){throw new Error("Not implemented")},t}();t.Enumerable=e}(a||(a={})),function(t){var e=function(){function e(t){var e;if(this.size=0,this._keys=[],this._values=[],t instanceof Array?e=t.en():t&&t.getEnumerator instanceof Function&&(e=t),e)for(var i=e.getEnumerator();i&&i.moveNext();)this.set(i.current[0],i.current[1])}return e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype.delete=function(t){var e=this._keys.indexOf(t);return e>-1&&(this._keys.splice(e,1),this._values.splice(e,1),this.size--,!0)},e.prototype.entries=function(){var e=this;return t.range(0,this.size).select(function(t){return[e._keys[t],e._values[t]]})},e.prototype.forEach=function(t,e){null==e&&(e=this);for(var i=0,n=this._keys,o=this._values,r=n.length;i<r;i++)t.call(e,o[i],n[i],this)},e.prototype.get=function(t){var e=this._keys.indexOf(t);return this._values[e]},e.prototype.has=function(t){return this._keys.indexOf(t)>-1},e.prototype.keys=function(){return this._keys.en()},e.prototype.set=function(t,e){var i=this._keys.indexOf(t);i>-1?this._values[i]=e:(this._keys.push(t),this._values.push(e),this.size++)},e.prototype.values=function(){return this._values.en()},e}();t.Map3=e,t.Enumerable.prototype.toMap=function(t,i){for(var n=new e,o=this.getEnumerator();o.moveNext();)n.set(t(o.current),i(o.current));return n},t.List&&(t.List.prototype.toMap=t.Enumerable.prototype.toMap)}(a||(a={})),function(t){t.Map||(t.Map=a.Map3)}("undefined"==typeof window?e:window),function(t){t.anonymous=function(e){var i=new t.Enumerable;return i.getEnumerator=function(){var t={current:void 0,moveNext:function(){return e(t)}};return t},i}}(a||(a={})),function(t){function e(t,e){var i,n,o=1,r={current:void 0,moveNext:function(){if(o<2){if((i=i||t.getEnumerator()).moveNext())return r.current=i.current,!0;o++}return(n=n||e.en().getEnumerator()).moveNext()?(r.current=n.current,!0):(r.current=void 0,!1)}};return r}t.Enumerable.prototype.append=function(){for(var i=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=new t.Enumerable;return r.getEnumerator=function(){return e(i,n)},r},t.List&&(t.List.prototype.append=t.Enumerable.prototype.append)}(a||(a={})),function(t){t.Enumerable.prototype.apply=function(e){var i=this,n=new t.Enumerable;return n.getEnumerator=function(){return function(t,e){var i,n=0,o={current:void 0,moveNext:function(){return i||(i=t.getEnumerator()),!!i.moveNext()&&(e(o.current=i.current,n),n++,!0)}};return o}(i,e)},n},t.List&&(t.List.prototype.apply=t.Enumerable.prototype.apply)}(a||(a={})),function(t){function e(){return this&&Array.isArray(this)?new i(this):new t.Enumerable}var i=function(t){function e(e){var i=t.call(this)||this;return i.getEnumerator=function(){return function(t){var e=t.length,i={moveNext:void 0,current:void 0},n=-1;return i.moveNext=function(){return++n>=e?(i.current=void 0,!1):(i.current=t[n],!0)},i}(e)},i.toArray=function(){return e.slice(0)},i}return r(e,t),e}(t.Enumerable);try{Object.defineProperty(Array.prototype,"en",{value:e,enumerable:!1,writable:!1,configurable:!1})}catch(t){Array.prototype.en=e}}(a||(a={})),function(t){t.Enumerable.prototype.concat=function(e){var i=this,n=e instanceof Array?e.en():e,o=new t.Enumerable;return o.getEnumerator=function(){return function(t,e){var i,n=!1,o={current:void 0,moveNext:function(){return i||(i=t.getEnumerator()),o.current=void 0,i.moveNext()?(o.current=i.current,!0):!n&&(n=!0,!!(i=e.getEnumerator()).moveNext()&&(o.current=i.current,!0))}};return o}(i,n)},o},t.List&&(t.List.prototype.concat=t.Enumerable.prototype.concat)}(a||(a={})),function(t){t.Enumerable.prototype.distinct=function(e){var i=this,n=new t.Enumerable;return n.getEnumerator=function(){return function(t,e){var i,n=[],o={current:void 0,moveNext:function(){if(i||(i=t.getEnumerator()),o.current=void 0,!e){for(;i.moveNext();)if(n.indexOf(i.current)<0)return n.push(o.current=i.current),!0;return!1}for(;i.moveNext();){for(var r=0,a=n.length,s=!1;r<a&&!s;r++)s=!!e(n[r],i.current);if(!s)return n.push(o.current=i.current),!0}return!1}};return o}(i,e)},n},t.List&&(t.List.prototype.distinct=t.Enumerable.prototype.distinct)}(a||(a={})),function(t){t.Enumerable.prototype.except=function(e,i){var n=this,o=e instanceof Array?e.en():e,r=new t.Enumerable;return r.getEnumerator=function(){return function(t,e,i){i=i||function(t,e){return t===e};var n,o={current:void 0,moveNext:function(){for(n||(n=t.getEnumerator()),o.current=void 0;n.moveNext();){for(var r=!1,a=e.getEnumerator();a.moveNext()&&!r;)r=i(n.current,a.current);if(!r)return o.current=n.current,!0}return!1}};return o}(n,o,i)},r},t.List&&(t.List.prototype.except=t.Enumerable.prototype.except)}(a||(a={})),Function.prototype.fromJson=function(t,e){function i(t,e){if(null==t)return t;if(e instanceof Function)return e(t);if(e instanceof Array){if(!((e=e[0])instanceof Function&&t instanceof Array))return;for(var i=[],n=0;n<t.length;n++)i.push(e(t[n]));return i}}var n=new this;if(null==t)return n;var o=[];for(var r in e){void 0!==(a=i(t[r],e[r]))&&(n[r]=a,o.push(r))}for(var r in this.$jsonMappings)if(!(o.indexOf(r)>-1)){var a;void 0!==(a=i(t[r],this.$jsonMappings[r]))&&(n[r]=a,o.push(r))}for(var r in t)o.indexOf(r)>-1||(n[r]=t[r]);return n},function(t){function e(t,e,n){var o,r=0,a={current:void 0,moveNext:function(){return o||(o=i(t,e,n)),a.current=void 0,!(r>=o.length||(a.current=o[r],r++,0))}};return a}function i(t,e,i){i=i||function(t,e){return t===e};for(var o,r=[],a=[],s=t.getEnumerator();s.moveNext();){o=e(s.current);for(var l=-1,u=0,d=a.length;u<d;u++)if(i(o,a[u])){l=u;break}var h;l<0?(a.push(o),r.push(h=new n(o))):h=r[l],h._add(s.current)}return r}var n=function(t){function e(e){var i=t.call(this)||this;return i.key=e,i._arr=[],i.getEnumerator=function(){return i._arr.en().getEnumerator()},i}return r(e,t),e.prototype._add=function(t){this._arr.push(t)},e}(t.Enumerable);t.Enumerable.prototype.groupBy=function(i,n){var o=this,r=new t.Enumerable;return r.getEnumerator=function(){return e(o,i,n)},r},t.List&&(t.List.prototype.groupBy=t.Enumerable.prototype.groupBy)}(a||(a={})),function(t){t.Enumerable.prototype.intersect=function(e,i){var n=this,o=e instanceof Array?e.en():e,r=new t.Enumerable;return r.getEnumerator=function(){return function(e,i,n){n=n||function(t,e){return t===e};var o,r={current:void 0,moveNext:function(){for(o||(o=t.en(e).distinct().getEnumerator()),r.current=void 0;o.moveNext();){for(var a=!1,s=i.getEnumerator();s.moveNext()&&!a;)a=n(o.current,s.current);if(a)return r.current=o.current,!0}return!1}};return r}(n,o,i)},r},t.List&&(t.List.prototype.intersect=t.Enumerable.prototype.intersect)}(a||(a={})),function(t){t.Enumerable.prototype.join=function(e,i,n,o,r){var a=this,s=e instanceof Array?e.en():e,l=new t.Enumerable;return l.getEnumerator=function(){return function(e,i,n,o,r,a){a=a||function(t,e){return t===e};var s,l,u=0,d={current:void 0,moveNext:function(){if(d.current=void 0,!s){if(!(s=e.getEnumerator()).moveNext())return!1;l=t.en(i).toArray()}var h;do{for(;u<l.length;u++)if(h=l[u],a(n(s.current),o(h)))return u++,d.current=r(s.current,h),!0;u=0}while(s.moveNext());return!1}};return d}(a,s,i,n,o,r)},l},t.List&&(t.List.prototype.join=t.Enumerable.prototype.join)}(a||(a={})),function(t){function e(){this.constructor=i}t.Enumerable.prototype.toList=function(){for(var t=new i,e=this.getEnumerator();e.moveNext();)t.push(e.current);return t};var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toString=function(){throw new Error("Not implemented")},e.prototype.toLocaleString=function(){throw new Error("Not implemented")},e.prototype.pop=function(){throw new Error("Not implemented")},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Not implemented")},e.prototype.shift=function(){throw new Error("Not implemented")},e.prototype.slice=function(t,e){throw new Error("Not implemented")},e.prototype.sort=function(t){throw new Error("Not implemented")},e.prototype.splice=function(){throw new Error("Not implemented")},e.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Not implemented")},e.prototype.indexOf=function(t,e){throw new Error("Not implemented")},e.prototype.lastIndexOf=function(t,e){throw new Error("Not implemented")},e.prototype.every=function(t,e){throw new Error("Not implemented")},e.prototype.some=function(t,e){throw new Error("Not implemented")},e.prototype.forEach=function(t,e){throw new Error("Not implemented")},e.prototype.map=function(t,e){throw new Error("Not implemented")},e.prototype.filter=function(t,e){throw new Error("Not implemented")},e.prototype.reduce=function(t,e){throw new Error("Not implemented")},e.prototype.reduceRight=function(t,e){throw new Error("Not implemented")},e.prototype.remove=function(t){throw new Error("Not implemented")},e.prototype.removeWhere=function(t){throw new Error("Not implemented")},e}(t.Enumerable);for(var n in t.List=i,Array)Array.hasOwnProperty(n)&&(i[n]=Array[n]);for(var o in e.prototype=Array.prototype,i.prototype=new e,t.Enumerable.prototype)"getEnumerator"!==o&&(i.prototype[o]=t.Enumerable.prototype[o]);i.prototype.getEnumerator=function(){var t=this,e=t.length,i={moveNext:void 0,current:void 0},n=-1;return i.moveNext=function(){return++n>=e?(i.current=void 0,!1):(i.current=t[n],!0)},i},i.prototype.remove=function(t){return this.removeWhere(function(e){return e===t}).any()},i.prototype.removeWhere=function(t){for(var e,i=[],n=this.length-1;n>=0;n--)!0===t(e=this[n],n)&&(this.splice(n,1),i.push(e));return i.en().reverse()}}(a||(a={})),function(t){function e(t,e,n,o){return new i(t,e,n,o)}var i=function(e){function i(t,i,n,o){var r=e.call(this)||this;r.Source=t,o=o||function(t,e){return t>e?1:t<e?-1:0};var a=!0===n?-1:1;return r.Sorter=function(t,e){return a*o(i(t),i(e))},r}return r(i,e),i.prototype.getEnumerator=function(){var e,i=this.Source,n=this.Sorter,o=0,r={current:void 0,moveNext:function(){return e||(e=t.en(i).toArray()).sort(n),r.current=void 0,!(o>=e.length||(r.current=e[o],o++,0))}};return r},i.prototype.thenBy=function(t,e){return new n(this,t,!1,e)},i.prototype.thenByDescending=function(t,e){return new n(this,t,!0,e)},i}(t.Enumerable),n=function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this,a=e.Sorter,s=r.Sorter;return r.Sorter=function(t,e){return a(t,e)||s(t,e)},r}return r(e,t),e}(i),o=t.Enumerable.prototype;o.orderBy=function(t,i){return e(this,t,!1,i)},o.orderByDescending=function(t,i){return e(this,t,!0,i)},t.List&&(t.List.prototype.orderBy=t.Enumerable.prototype.orderBy,t.List.prototype.orderByDescending=t.Enumerable.prototype.orderByDescending)}(a||(a={})),function(t){function e(t,e){var i,n,o=1,r={current:void 0,moveNext:function(){if(o<2){if((i=i||e.en().getEnumerator()).moveNext())return r.current=i.current,!0;o++}return(n=n||t.getEnumerator()).moveNext()?(r.current=n.current,!0):(r.current=void 0,!1)}};return r}t.Enumerable.prototype.prepend=function(){for(var i=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=new t.Enumerable;return r.getEnumerator=function(){return e(i,n)},r},t.List&&(t.List.prototype.prepend=t.Enumerable.prototype.prepend)}(a||(a={})),function(t){t.range=function(e,i,n){if((e=e||0)>(i=i||0))throw new Error("Start cannot be greater than end.");null==n&&(n=1);var o=new t.Enumerable;return o.getEnumerator=function(){return function(t,e,i){var n=t-i,o={current:void 0,moveNext:function(){return!((n+=i)>=e||(o.current=n,0))}};return o}(e,i,n)},o}}(a||(a={})),function(t){t.Enumerable.prototype.reverse=function(){var e=this,i=new t.Enumerable;return i.getEnumerator=function(){return function(e){var i,n=0,o={current:void 0,moveNext:function(){return i||(i=t.en(e).toArray(),n=i.length),n--,o.current=i[n],n>=0}};return o}(e)},i},t.List&&(t.List.prototype.reverse=t.Enumerable.prototype.reverse)}(a||(a={})),(a||(a={})).round=function(t,e){if(0===(e=e||0))return Math.round(t);var i=Math.pow(10,e);return Math.round(t*i)/i},function(t){t.Enumerable.prototype.select=function(e){var i=this,n=new t.Enumerable;return n.getEnumerator=function(){return function(t,e){var i,n=0,o={current:void 0,moveNext:function(){return i||(i=t.getEnumerator()),!!i.moveNext()&&(o.current=e(i.current,n),n++,!0)}};return o}(i,e)},n},t.Enumerable.prototype.selectMany=function(e){var i=this,n=new t.Enumerable;return n.getEnumerator=function(){return function(e,i){var n,o,r={current:void 0,moveNext:function(){for(r.current=void 0,n||(n=e.getEnumerator());!o||!o.moveNext();){if(!n.moveNext())return!1;o=t.selectorEnumerator(i(n.current))}return r.current=o.current,!0}};return r}(i,e)},n},t.List&&(t.List.prototype.select=t.Enumerable.prototype.select,t.List.prototype.selectMany=t.Enumerable.prototype.selectMany)}(a||(a={})),(a||(a={})).selectorEnumerator=function(t){return Array.isArray(t)?t.en().getEnumerator():null!=t&&"function"==typeof t.getEnumerator?t.getEnumerator():null},function(t){t.Enumerable.prototype.skip=function(e){var i=this,n=new t.Enumerable;return n.getEnumerator=function(){return function(t,e){var i,n={current:void 0,moveNext:function(){if(!i){i=t.getEnumerator();for(var o=0;o<e;o++)if(!i.moveNext())return!1}return i.moveNext()?(n.current=i.current,!0):(n.current=void 0,!1)}};return n}(i,e)},n},t.Enumerable.prototype.skipWhile=function(e){var i=this,n=new t.Enumerable;return n.getEnumerator=function(){return function(t,e){var i,n={current:void 0,moveNext:function(){if(!i){i=t.getEnumerator();for(var o=0;i.moveNext();o++)if(!e(n.current=i.current,o))return!0;return n.current=void 0,!1}return i.moveNext()?(n.current=i.current,!0):(n.current=void 0,!1)}};return n}(i,e)},n},t.List&&(t.List.prototype.skip=t.Enumerable.prototype.skip,t.List.prototype.skipWhile=t.Enumerable.prototype.skipWhile)}(a||(a={})),function(t){t.Enumerable.prototype.take=function(e){var i=this,n=new t.Enumerable;return n.getEnumerator=function(){return function(t,e){var i,n=0,o={current:void 0,moveNext:function(){return i||(i=t.getEnumerator()),!(++n>e||(o.current=void 0,!i.moveNext()||(o.current=i.current,0)))}};return o}(i,e)},n},t.Enumerable.prototype.takeWhile=function(e){var i=this,n=new t.Enumerable;return n.getEnumerator=function(){return function(t,e){var i,n=0,o={current:void 0,moveNext:function(){return i||(i=t.getEnumerator()),i.moveNext()&&e(i.current,n)?(n++,o.current=i.current,!0):(o.current=void 0,!1)}};return o}(i,e)},n},t.List&&(t.List.prototype.take=t.Enumerable.prototype.take,t.List.prototype.takeWhile=t.Enumerable.prototype.takeWhile)}(a||(a={})),function(t){function e(e,i,n){var o,r=!1,a=[],s={current:void 0,moveNext:function(){if(r){if(null==o)return!1;a.push(o),o=t.selectorEnumerator(i(s.current))}else o=e.getEnumerator(),r=!0;do{for(;!(o&&o.moveNext()||a.length<1);)o=a.pop();s.current=null==o?void 0:o.current}while(n(s.current));return void 0!==s.current}};return s}t.Enumerable.prototype.traverse=function(e){var i=this,n=new t.Enumerable;return n.getEnumerator=function(){return function(e,i){var n,o=!1,r=[],a={current:void 0,moveNext:function(){if(o){if(null==n)return!1;r.push(n),n=t.selectorEnumerator(i(a.current))}else n=e.getEnumerator(),o=!0;for(;!(n&&n.moveNext()||r.length<1);)n=r.pop();return a.current=null==n?void 0:n.current,void 0!==a.current}};return a}(i,e)},n},t.Enumerable.prototype.traverseUnique=function(i,n){var o=this,r=[],a=new t.Enumerable;return a.getEnumerator=n?function(){return e(o,i,function(t){return!!r.some(function(e){return n(t,e)})||(r.push(t),!1)})}:function(){return e(o,i,function(t){return r.indexOf(t)>-1||(r.push(t),!1)})},a},t.List&&(t.List.prototype.traverse=t.Enumerable.prototype.traverse,t.List.prototype.traverseUnique=t.Enumerable.prototype.traverseUnique)}(a||(a={})),function(t){t.Enumerable.prototype.union=function(e,i){var n=this,o=e instanceof Array?e.en():e,r=new t.Enumerable;return r.getEnumerator=function(){return function(e,i,n){n=n||function(t,e){return t===e};var o,r,a=[],s={current:void 0,moveNext:function(){if(o||(o=t.en(e).distinct().getEnumerator()),s.current=void 0,!r&&o.moveNext())return a.push(s.current=o.current),!0;for(r=r||t.en(i).distinct().getEnumerator();r.moveNext();){for(var l=0,u=!1,d=a.length;l<d&&!u;l++)u=n(a[l],r.current);if(!u)return s.current=r.current,!0}return!1}};return s}(n,o,i)},r},t.List&&(t.List.prototype.union=t.Enumerable.prototype.union)}(a||(a={})),function(t){t.Enumerable.prototype.where=function(e){var i=this,n=new t.Enumerable;return n.getEnumerator=function(){return function(t,e){var i,n={current:void 0,moveNext:function(){i||(i=t.getEnumerator());for(var o;i.moveNext();)if(e(o=i.current))return n.current=o,!0;return!1}};return n}(i,e)},n},t.List&&(t.List.prototype.where=t.Enumerable.prototype.where)}(a||(a={})),function(t){t.en=function(e){var i=new t.Enumerable;return i.getEnumerator=function(){return function(t){var e=t.getEnumerator(),i={current:void 0,moveNext:void 0};return i.moveNext=function(){return e.moveNext()?(i.current=e.current,!0):(i.current=void 0,!1)},i}(e)},i}}(a||(a={}));var a;a.en;!function(t){t.Enumerable.prototype.zip=function(e,i){var n=this,o=e instanceof Array?e.en():e,r=new t.Enumerable;return r.getEnumerator=function(){return function(t,e,i){var n,o,r={current:void 0,moveNext:function(){return n||(n=t.getEnumerator()),o||(o=e.getEnumerator()),r.current=void 0,!(!n.moveNext()||!o.moveNext()||(r.current=i(n.current,o.current),0))}};return r}(n,o,i)},r},t.List&&(t.List.prototype.zip=t.Enumerable.prototype.zip)}(a||(a={})),t.exports=function t(e,i,o){function r(s,l){if(!i[s]){if(!e[s]){if(!l&&"function"==typeof n&&n)return n(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[s]={exports:{}};e[s][0].call(d.exports,function(t){var i=e[s][1][t];return r(i||t)},d,d.exports,t,e,i,o)}return i[s].exports}for(var a="function"==typeof n&&n,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,i,n){(function(t){var e,i;!function(t){t.CONTINUE=100,t.SWITCHING_PROTOCOLS=101,t.PROCESSING=102,t.OK=200,t.CREATED=201,t.ACCEPTED=202,t.NON_AUTHORITATIVE_INFORMATION=203,t.NO_CONTENT=204,t.RESET_CONTENT=205,t.PARTIAL_CONTENT=206,t.MULTI_STATUS=207,t.MULTIPLE_CHOICES=300,t.MOVED_PERMANENTLY=301,t.MOVED_TEMPORARILY=302,t.SEE_OTHER=303,t.NOT_MODIFIED=304,t.USE_PROXY=305,t.TEMPORARY_REDIRECT=307,t.BAD_REQUEST=400,t.UNAUTHORIZED=401,t.PAYMENT_REQUIRED=402,t.FORBIDDEN=403,t.NOT_FOUND=404,t.METHOD_NOT_ALLOWED=405,t.NOT_ACCEPTABLE=406,t.PROXY_AUTHENTICATION_REQUIRED=407,t.REQUEST_TIME_OUT=408,t.CONFLICT=409,t.GONE=410,t.LENGTH_REQUIRED=411,t.PRECONDITION_FAILED=412,t.REQUEST_ENTITY_TOO_LARGE=413,t.REQUEST_URI_TOO_LARGE=414,t.UNSUPPORTED_MEDIA_TYPE=415,t.REQUESTED_RANGE_NOT_SATISFIABLE=416,t.EXPECTATION_FAILED=417,t.IM_A_TEAPOT=418,t.UNPROCESSABLE_ENTITY=422,t.LOCKED=423,t.FAILED_DEPENDENCY=424,t.UNORDERED_COLLECTION=425,t.UPGRADE_REQUIRED=426,t.PRECONDITION_REQUIRED=428,t.TOO_MANY_REQUESTS=429,t.REQUEST_HEADER_FIELDS_TOO_LARGE=431,t.INTERNAL_SERVER_ERROR=500,t.NOT_IMPLEMENTED=501,t.BAD_GATEWAY=502,t.SERVICE_UNAVAILABLE=503,t.GATEWAY_TIME_OUT=504,t.HTTP_VERSION_NOT_SUPPORTED=505,t.VARIANT_ALSO_NEGOTIATES=506,t.INSUFFICIENT_STORAGE=507,t.BANDWIDTH_LIMIT_EXCEEDED=509,t.NOT_EXTENDED=510,t.NETWORK_AUTHENTICATION_REQUIRED=511}(e||(e={})),(i=t).HTTPStatusCode||(i.HTTPStatusCode=e)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1),function(t){var e=function(){function t(t){this.value="",t&&(this.value=t.toLowerCase())}return t.prototype.toString=function(){return this.value},t}();t.StringValue=e}(f||(f={})),function(t){var e=function(){function t(t,e){this.start=t,this.end=e}return t.prototype.getLength=function(){return this.end-this.start},t}();t.Duration=e}(f||(f={}));var s;r=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.bookmarking=function(){return new e(e.BOOKMARKING.toString())},e.prototype.classifying=function(){return new e(e.CLASSIFYING.toString())},e.prototype.commenting=function(){return new e(e.COMMENTING.toString())},e.prototype.describing=function(){return new e(e.DESCRIBING.toString())},e.prototype.editing=function(){return new e(e.EDITING.toString())},e.prototype.highlighting=function(){return new e(e.HIGHLIGHTING.toString())},e.prototype.identifying=function(){return new e(e.IDENTIFYING.toString())},e.prototype.linking=function(){return new e(e.LINKING.toString())},e.prototype.moderating=function(){return new e(e.MODERATING.toString())},e.prototype.painting=function(){return new e(e.PAINTING.toString())},e.prototype.questioning=function(){return new e(e.QUESTIONING.toString())},e.prototype.replying=function(){return new e(e.REPLYING.toString())},e.prototype.tagging=function(){return new e(e.TAGGING.toString())},e.prototype.transcribing=function(){return new e(e.TRANSCRIBING.toString())},e.BOOKMARKING=new e("oa:bookmarking"),e.CLASSIFYING=new e("oa:classifying"),e.COMMENTING=new e("oa:commenting"),e.DESCRIBING=new e("oa:describing"),e.EDITING=new e("oa:editing"),e.HIGHLIGHTING=new e("oa:highlighting"),e.IDENTIFYING=new e("oa:identifying"),e.LINKING=new e("oa:linking"),e.MODERATING=new e("oa:moderating"),e.PAINTING=new e("sc:painting"),e.QUESTIONING=new e("oa:questioning"),e.REPLYING=new e("oa:replying"),e.TAGGING=new e("oa:tagging"),e.TRANSCRIBING=new e("oad:transcribing"),e}(t.StringValue);t.AnnotationMotivation=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.autoadvance=function(){return new e(e.AUTOADVANCE.toString())},e.prototype.nonav=function(){return new e(e.NONAV.toString())},e.prototype.paged=function(){return new e(e.PAGED.toString())},e.AUTOADVANCE=new e("auto-advance"),e.NONAV=new e("no-nav"),e.PAGED=new e("paged"),e}(t.StringValue);t.Behavior=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.annotation=function(){return new e(e.ANNOTATION.toString())},e.prototype.canvas=function(){return new e(e.CANVAS.toString())},e.prototype.collection=function(){return new e(e.COLLECTION.toString())},e.prototype.manifest=function(){return new e(e.MANIFEST.toString())},e.prototype.range=function(){return new e(e.RANGE.toString())},e.prototype.sequence=function(){return new e(e.SEQUENCE.toString())},e.ANNOTATION=new e("annotation"),e.CANVAS=new e("canvas"),e.COLLECTION=new e("collection"),e.MANIFEST=new e("manifest"),e.RANGE=new e("range"),e.SEQUENCE=new e("sequence"),e}(t.StringValue);t.IIIFResourceType=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.empty=function(){return new e(e.EMPTY.toString())},e.prototype.manuscript=function(){return new e(e.MANUSCRIPT.toString())},e.prototype.monograph=function(){return new e(e.MONOGRAPH.toString())},e.EMPTY=new e(""),e.MANUSCRIPT=new e("manuscript"),e.MONOGRAPH=new e("monograph"),e}(t.StringValue);t.ManifestType=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.pdf=function(){return new e(e.PDF.toString())},e.prototype.doc=function(){return new e(e.DOC.toString())},e.prototype.docx=function(){return new e(e.DOCX.toString())},e.PDF=new e("application/pdf"),e.DOC=new e("application/msword"),e.DOCX=new e("application/vnd.openxmlformats-officedocument.wordprocessingml.document"),e}(t.StringValue);t.RenderingFormat=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.jpg=function(){return new e(e.JPG.toString())},e.prototype.mp4=function(){return new e(e.MP4.toString())},e.prototype.pdf=function(){return new e(e.PDF.toString())},e.prototype.threejs=function(){return new e(e.THREEJS.toString())},e.prototype.webm=function(){return new e(e.WEBM.toString())},e.JPG=new e("image/jpeg"),e.MP4=new e("video/mp4"),e.PDF=new e("application/pdf"),e.THREEJS=new e("application/vnd.threejs+json"),e.WEBM=new e("video/webm"),e}(t.StringValue);t.MediaType=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.canvas=function(){return new e(e.CANVAS.toString())},e.prototype.choice=function(){return new e(e.CHOICE.toString())},e.prototype.document=function(){return new e(e.DOCUMENT.toString())},e.prototype.image=function(){return new e(e.IMAGE.toString())},e.prototype.movingimage=function(){return new e(e.MOVINGIMAGE.toString())},e.prototype.physicalobject=function(){return new e(e.PHYSICALOBJECT.toString())},e.prototype.sound=function(){return new e(e.SOUND.toString())},e.prototype.text=function(){return new e(e.TEXT.toString())},e.CANVAS=new e("canvas"),e.CHOICE=new e("choice"),e.DOCUMENT=new e("document"),e.IMAGE=new e("image"),e.MOVINGIMAGE=new e("movingimage"),e.PHYSICALOBJECT=new e("physicalobject"),e.SOUND=new e("sound"),e.TEXT=new e("textualbody"),e}(t.StringValue);t.ResourceType=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.auth1Clickthrough=function(){return new e(e.AUTH1CLICKTHROUGH.toString())},e.prototype.auth1External=function(){return new e(e.AUTH1EXTERNAL.toString())},e.prototype.auth1Kiosk=function(){return new e(e.AUTH1KIOSK.toString())},e.prototype.auth1Login=function(){return new e(e.AUTH1LOGIN.toString())},e.prototype.auth1Logout=function(){return new e(e.AUTH1LOGOUT.toString())},e.prototype.auth1Probe=function(){return new e(e.AUTH1PROBE.toString())},e.prototype.auth1Token=function(){return new e(e.AUTH1TOKEN.toString())},e.prototype.autoComplete=function(){return new e(e.AUTOCOMPLETE.toString())},e.prototype.iiif1ImageLevel1=function(){return new e(e.IIIF1IMAGELEVEL1.toString())},e.prototype.iiif1ImageLevel2=function(){return new e(e.IIIF1IMAGELEVEL2.toString())},e.prototype.iiif2ImageLevel1=function(){return new e(e.IIIF2IMAGELEVEL1.toString())},e.prototype.iiif2ImageLevel2=function(){return new e(e.IIIF2IMAGELEVEL2.toString())},e.prototype.ixif=function(){return new e(e.IXIF.toString())},e.prototype.login=function(){return new e(e.AUTHLOGIN.toString())},e.prototype.clickThrough=function(){return new e(e.AUTHCLICKTHROUGH.toString())},e.prototype.restricted=function(){return new e(e.AUTHRESTRICTED.toString())},e.prototype.logout=function(){return new e(e.AUTHLOGOUT.toString())},e.prototype.otherManifestations=function(){return new e(e.OTHERMANIFESTATIONS.toString())},e.prototype.search=function(){return new e(e.SEARCH.toString())},e.prototype.stanfordIIIFImageCompliance1=function(){return new e(e.STANFORDIIIFIMAGECOMPLIANCE1.toString())},e.prototype.stanfordIIIFImageCompliance2=function(){return new e(e.STANFORDIIIFIMAGECOMPLIANCE2.toString())},e.prototype.stanfordIIIFImageConformance1=function(){return new e(e.STANFORDIIIFIMAGECONFORMANCE1.toString())},e.prototype.stanfordIIIFImageConformance2=function(){return new e(e.STANFORDIIIFIMAGECONFORMANCE2.toString())},e.prototype.stanfordIIIF1ImageCompliance1=function(){return new e(e.STANFORDIIIF1IMAGECOMPLIANCE1.toString())},e.prototype.stanfordIIIF1ImageCompliance2=function(){return new e(e.STANFORDIIIF1IMAGECOMPLIANCE2.toString())},e.prototype.stanfordIIIF1ImageConformance1=function(){return new e(e.STANFORDIIIF1IMAGECONFORMANCE1.toString())},e.prototype.stanfordIIIF1ImageConformance2=function(){return new e(e.STANFORDIIIF1IMAGECONFORMANCE2.toString())},e.prototype.token=function(){return new e(e.AUTHTOKEN.toString())},e.prototype.trackingExtensions=function(){return new e(e.TRACKINGEXTENSIONS.toString())},e.prototype.uiExtensions=function(){return new e(e.UIEXTENSIONS.toString())},e.prototype.printExtensions=function(){return new e(e.PRINTEXTENSIONS.toString())},e.prototype.shareExtensions=function(){return new e(e.SHAREEXTENSIONS.toString())},e.STANFORDIIIFIMAGECOMPLIANCE0=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level0"),e.STANFORDIIIFIMAGECOMPLIANCE1=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level1"),e.STANFORDIIIFIMAGECOMPLIANCE2=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level2"),e.STANFORDIIIFIMAGECONFORMANCE0=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level0"),e.STANFORDIIIFIMAGECONFORMANCE1=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level1"),e.STANFORDIIIFIMAGECONFORMANCE2=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level2"),e.STANFORDIIIF1IMAGECOMPLIANCE0=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0"),e.STANFORDIIIF1IMAGECOMPLIANCE1=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1"),e.STANFORDIIIF1IMAGECOMPLIANCE2=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2"),e.STANFORDIIIF1IMAGECONFORMANCE0=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0"),e.STANFORDIIIF1IMAGECONFORMANCE1=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1"),e.STANFORDIIIF1IMAGECONFORMANCE2=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2"),e.IIIF1IMAGELEVEL0=new e("http://iiif.io/api/image/1/level0.json"),e.IIIF1IMAGELEVEL0PROFILE=new e("http://iiif.io/api/image/1/profiles/level0.json"),e.IIIF1IMAGELEVEL1=new e("http://iiif.io/api/image/1/level1.json"),e.IIIF1IMAGELEVEL1PROFILE=new e("http://iiif.io/api/image/1/profiles/level1.json"),e.IIIF1IMAGELEVEL2=new e("http://iiif.io/api/image/1/level2.json"),e.IIIF1IMAGELEVEL2PROFILE=new e("http://iiif.io/api/image/1/profiles/level2.json"),e.IIIF2IMAGELEVEL0=new e("http://iiif.io/api/image/2/level0.json"),e.IIIF2IMAGELEVEL0PROFILE=new e("http://iiif.io/api/image/2/profiles/level0.json"),e.IIIF2IMAGELEVEL1=new e("http://iiif.io/api/image/2/level1.json"),e.IIIF2IMAGELEVEL1PROFILE=new e("http://iiif.io/api/image/2/profiles/level1.json"),e.IIIF2IMAGELEVEL2=new e("http://iiif.io/api/image/2/level2.json"),e.IIIF2IMAGELEVEL2PROFILE=new e("http://iiif.io/api/image/2/profiles/level2.json"),e.AUTHCLICKTHROUGH=new e("http://iiif.io/api/auth/0/login/clickthrough"),e.AUTHLOGIN=new e("http://iiif.io/api/auth/0/login"),e.AUTHLOGOUT=new e("http://iiif.io/api/auth/0/logout"),e.AUTHRESTRICTED=new e("http://iiif.io/api/auth/0/login/restricted"),e.AUTHTOKEN=new e("http://iiif.io/api/auth/0/token"),e.AUTH1CLICKTHROUGH=new e("http://iiif.io/api/auth/1/clickthrough"),e.AUTH1EXTERNAL=new e("http://iiif.io/api/auth/1/external"),e.AUTH1KIOSK=new e("http://iiif.io/api/auth/1/kiosk"),e.AUTH1LOGIN=new e("http://iiif.io/api/auth/1/login"),e.AUTH1LOGOUT=new e("http://iiif.io/api/auth/1/logout"),e.AUTH1PROBE=new e("http://iiif.io/api/auth/1/probe"),e.AUTH1TOKEN=new e("http://iiif.io/api/auth/1/token"),e.AUTOCOMPLETE=new e("http://iiif.io/api/search/0/autocomplete"),e.SEARCH=new e("http://iiif.io/api/search/0/search"),e.TRACKINGEXTENSIONS=new e("http://universalviewer.io/tracking-extensions-profile"),e.UIEXTENSIONS=new e("http://universalviewer.io/ui-extensions-profile"),e.PRINTEXTENSIONS=new e("http://universalviewer.io/print-extensions-profile"),e.SHAREEXTENSIONS=new e("http://universalviewer.io/share-extensions-profile"),e.OTHERMANIFESTATIONS=new e("http://iiif.io/api/otherManifestations.json"),e.IXIF=new e("http://wellcomelibrary.org/ld/ixif/0/alpha.json"),e}(t.StringValue);t.ServiceProfile=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.leftToRight=function(){return new e(e.LEFTTORIGHT.toString())},e.prototype.rightToLeft=function(){return new e(e.RIGHTTOLEFT.toString())},e.prototype.topToBottom=function(){return new e(e.TOPTOBOTTOM.toString())},e.prototype.bottomToTop=function(){return new e(e.BOTTOMTOTOP.toString())},e.LEFTTORIGHT=new e("left-to-right"),e.RIGHTTOLEFT=new e("right-to-left"),e.TOPTOBOTTOM=new e("top-to-bottom"),e.BOTTOMTOTOP=new e("bottom-to-top"),e}(t.StringValue);t.ViewingDirection=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.continuous=function(){return new e(e.CONTINUOUS.toString())},e.prototype.empty=function(){return new e(e.EMPTY.toString())},e.prototype.individuals=function(){return new e(e.INDIVIDUALS.toString())},e.prototype.nonPaged=function(){return new e(e.NONPAGED.toString())},e.prototype.paged=function(){return new e(e.PAGED.toString())},e.prototype.top=function(){return new e(e.TOP.toString())},e.CONTINUOUS=new e("continuous"),e.EMPTY=new e(""),e.INDIVIDUALS=new e("individuals"),e.NONPAGED=new e("non-paged"),e.PAGED=new e("paged"),e.TOP=new e("top"),e}(t.StringValue);t.ViewingHint=e}(f||(f={})),function(t){var e=function(){function t(t){this.__jsonld=t,this.context=this.getProperty("context"),this.id=this.getProperty("id")}return t.prototype.getProperty=function(t){var e=null;return this.__jsonld&&((e=this.__jsonld[t])||(e=this.__jsonld["@"+t])),e},t}();t.JSONLDResource=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(t,i){var n=e.call(this,t)||this;return n.options=i,n}return r(i,e),i.prototype.getIIIFResourceType=function(){return new t.IIIFResourceType(t.Utils.normaliseType(this.getProperty("type")))},i.prototype.getLabel=function(){var e=this.getProperty("label");return e?t.LanguageMap.parse(e,this.options.locale):[]},i.prototype.getDefaultLabel=function(){return t.LanguageMap.getValue(this.getLabel())},i.prototype.getMetadata=function(){var e=this.getProperty("metadata"),i=[];if(!e)return i;for(var n=0;n<e.length;n++){var o=e[n],r=new t.LabelValuePair(this.options.locale);r.parse(o),i.push(r)}return i},i.prototype.getRendering=function(t){var e=this.getRenderings();"string"!=typeof t&&(t=t.toString());for(var i=0;i<e.length;i++){var n=e[i];if(n.getFormat().toString()===t)return n}return null},i.prototype.getRenderings=function(){var e,i=[];if(!(e=this.__jsonld?this.__jsonld.rendering:this.rendering))return i;Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var o=e[n];i.push(new t.Rendering(o,this.options))}return i},i.prototype.getService=function(e){return t.Utils.getService(this,e)},i.prototype.getServices=function(){return t.Utils.getServices(this)},i.prototype.getThumbnail=function(){var e=this.getProperty("thumbnail");return Array.isArray(e)&&(e=e[0]),e?new t.Thumbnail(e,this.options):null},i.prototype.isAnnotation=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.ANNOTATION.toString()},i.prototype.isCanvas=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.CANVAS.toString()},i.prototype.isCollection=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.COLLECTION.toString()},i.prototype.isManifest=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.MANIFEST.toString()},i.prototype.isRange=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.RANGE.toString()},i.prototype.isSequence=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.SEQUENCE.toString()},i}(t.JSONLDResource);t.ManifestResource=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return r(i,e),i.prototype.getFormat=function(){var e=this.getProperty("format");return e?new t.MediaType(e.toLowerCase()):null},i.prototype.getResources=function(){var e=[];if(!this.__jsonld.resources)return e;for(var i=0;i<this.__jsonld.resources.length;i++){var n=this.__jsonld.resources[i],o=new t.Annotation(n,this.options);e.push(o)}return e},i.prototype.getType=function(){var e=this.getProperty("type");return e?new t.ResourceType(t.Utils.normaliseType(e)):null},i.prototype.getWidth=function(){return this.getProperty("width")},i.prototype.getHeight=function(){return this.getProperty("height")},i.prototype.getMaxWidth=function(){return this.getProperty("maxWidth")},i.prototype.getMaxHeight=function(){return this.getProperty("maxHeight")?null:this.getMaxWidth()},i}(t.ManifestResource);t.Resource=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return r(i,e),i.prototype.getCanonicalImageUri=function(e){var i,n=null,o="default",r=e;if(this.externalResource&&this.externalResource.data&&this.externalResource.data["@id"])n=this.externalResource.data["@id"],r||(r=this.externalResource.data.width),this.externalResource.data["@context"]&&(this.externalResource.data["@context"].indexOf("/1.0/context.json")>-1||this.externalResource.data["@context"].indexOf("/1.1/context.json")>-1||this.externalResource.data["@context"].indexOf("/1/context.json")>-1)&&(o="native");else{var a=this.getImages();if(a&&a.length){var s=a[0].getResource(),l=s.getServices();if(r||(r=s.getWidth()),l.length){var u=l[0];n=u.id,o=t.Utils.getImageQuality(u.getProfile())}else if(r===s.getWidth())return s.id}if(!n){var d=this.getProperty("thumbnail");if(d){if("string"==typeof d)return d;if(d["@id"])return d["@id"];if(d.length)return d[0].id}}}return i=r+",",n&&n.endsWith("/")&&(n=n.substr(0,n.length-1)),[n,"full",i,0,o+".jpg"].join("/")},i.prototype.getMaxDimensions=function(){var e,i=null;return this.externalResource.data&&this.externalResource.data.profile&&(e=this.externalResource.data.profile,Array.isArray(e)&&(e=e.en().where(function(t){return t.maxWidth}).first())&&(i=new t.Size(e.maxWidth,e.maxHeight?e.maxHeight:e.maxWidth))),i},i.prototype.getContent=function(){var e=[],i=this.__jsonld.items||this.__jsonld.content;if(!i)return e;var n=null;if(i.length&&(n=new t.AnnotationPage(i[0],this.options)),!n)return e;for(var o=n.getItems(),r=0;r<o.length;r++){var a=o[r],s=new t.Annotation(a,this.options);e.push(s)}return e},i.prototype.getDuration=function(){return this.getProperty("duration")},i.prototype.getImages=function(){var e=[];if(!this.__jsonld.images)return e;for(var i=0;i<this.__jsonld.images.length;i++){var n=this.__jsonld.images[i],o=new t.Annotation(n,this.options);e.push(o)}return e},i.prototype.getIndex=function(){return this.getProperty("index")},i.prototype.getOtherContent=function(){var e=this,i=Array.isArray(this.getProperty("otherContent"))?this.getProperty("otherContent"):[this.getProperty("otherContent")],n=i.filter(function(t){return t&&(e=t["@type"],i="sc:AnnotationList","string"==typeof e&&"string"==typeof i&&e.toLowerCase()==e.toLowerCase());var e,i}).map(function(i,n){return new t.AnnotationList(i.label||"Annotation list "+n,i,e.options)}).map(function(t){return t.load()});return Promise.all(n)},i.prototype.getWidth=function(){return this.getProperty("width")},i.prototype.getHeight=function(){return this.getProperty("height")},i}(t.Resource);t.Canvas=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(t,i){var n=e.call(this,t,i)||this;n.index=-1,n.isLoaded=!1;var o={defaultLabel:"-",locale:"en-GB",resource:n,pessimisticAccessControl:!1};return n.options=Object.assign(o,i),n}return r(i,e),i.prototype.getAttribution=function(){console.warn("getAttribution will be deprecated, use getRequiredStatement instead.");var e=this.getProperty("attribution");return e?t.LanguageMap.parse(e,this.options.locale):[]},i.prototype.getDescription=function(){var e=this.getProperty("description");return e?t.LanguageMap.parse(e,this.options.locale):[]},i.prototype.getIIIFResourceType=function(){return new t.IIIFResourceType(t.Utils.normaliseType(this.getProperty("type")))},i.prototype.getLogo=function(){var t=this.getProperty("logo");return t?"string"==typeof t?t:(Array.isArray(t)&&t.length&&(t=t[0]),t["@id"]||t.id):null},i.prototype.getLicense=function(){return t.Utils.getLocalisedValue(this.getProperty("license"),this.options.locale)},i.prototype.getNavDate=function(){return new Date(this.getProperty("navDate"))},i.prototype.getRelated=function(){return this.getProperty("related")},i.prototype.getSeeAlso=function(){return this.getProperty("seeAlso")},i.prototype.getDefaultTree=function(){return this.defaultTree=new t.TreeNode("root"),this.defaultTree.data=this,this.defaultTree},i.prototype.getRequiredStatement=function(){var e=null,i=this.getProperty("requiredStatement");if(i)(e=new t.LabelValuePair(this.options.locale)).parse(i);else{var n=this.getAttribution();n&&((e=new t.LabelValuePair(this.options.locale)).value=n)}return e},i.prototype.isCollection=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.COLLECTION.toString()},i.prototype.isManifest=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.MANIFEST.toString()},i.prototype.load=function(){var e=this;return new Promise(function(i,n){if(e.isLoaded)i(e);else{var o=e.options;o.navDate=e.getNavDate();var r=e.__jsonld.id;r||(r=e.__jsonld["@id"]),t.Utils.loadResource(r).then(function(n){e.parentLabel=t.LanguageMap.getValue(e.getLabel(),o.locale);var r=t.Deserialiser.parse(n,o);(e=Object.assign(e,r)).index=o.index,i(e)})}})},i}(t.ManifestResource);t.IIIFResource=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(t,i){var n=e.call(this,t,i)||this;if(n.index=0,n._allRanges=null,n.items=[],n._topRanges=[],n.__jsonld.structures&&n.__jsonld.structures.length)for(var o=n._getTopRanges(),r=0;r<o.length;r++){var a=o[r];n._parseRanges(a,String(r))}return n}return r(i,e),i.prototype.getPosterCanvas=function(){var e=this.getProperty("posterCanvas");return e&&(e=new t.Canvas(e,this.options)),e},i.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e?new t.Behavior(e):null},i.prototype.getDefaultTree=function(){if(e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=t.Utils.normaliseType(t.TreeNodeType.MANIFEST.toString()),!this.isLoaded)return this.defaultTree;var i=this.getTopRanges();return i.length&&i[0].getTree(this.defaultTree),t.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},i.prototype._getTopRanges=function(){var e=[];if(this.__jsonld.structures&&this.__jsonld.structures.length){for(var i=0;i<this.__jsonld.structures.length;i++){var n=this.__jsonld.structures[i];n.viewingHint===t.ViewingHint.TOP.toString()&&e.push(n)}if(!e.length){var o={};o.ranges=this.__jsonld.structures,e.push(o)}}return e},i.prototype.getTopRanges=function(){return this._topRanges},i.prototype._getRangeById=function(t){if(this.__jsonld.structures&&this.__jsonld.structures.length)for(var e=0;e<this.__jsonld.structures.length;e++){var i=this.__jsonld.structures[e];if(i["@id"]===t||i.id===t)return i}return null},i.prototype._parseRanges=function(e,i,n){var o,r=null;if("string"==typeof e&&(r=e,e=this._getRangeById(r)),e){(o=new t.Range(e,this.options)).parentRange=n,o.path=i,n?n.items.push(o):this._topRanges.push(o);var a=e.items||e.members;if(a)for(var s=0;s<a.length;s++){var l=a[s];if(l["@type"]&&"sc:range"===l["@type"].toLowerCase()||l.type&&"range"===l.type.toLowerCase())this._parseRanges(l,i+"/"+s,o);else if(l["@type"]&&"sc:canvas"===l["@type"].toLowerCase()||l.type&&"canvas"===l.type.toLowerCase()){o.canvases||(o.canvases=[]);var u=l.id||l["@id"];o.canvases.push(u)}}else if(e.ranges)for(s=0;s<e.ranges.length;s++)this._parseRanges(e.ranges[s],i+"/"+s,o)}else console.warn("Range:",r,"does not exist")},i.prototype.getAllRanges=function(){if(null!=this._allRanges)return this._allRanges;this._allRanges=[];for(var t=this.getTopRanges(),e=0;e<t.length;e++){var i=t[e];i.id&&this._allRanges.push(i);var n=i.getRanges();this._allRanges=this._allRanges.concat(n.en().traverseUnique(function(t){return t.getRanges()}).toArray())}return this._allRanges},i.prototype.getRangeById=function(t){for(var e=this.getAllRanges(),i=0;i<e.length;i++){var n=e[i];if(n.id===t)return n}return null},i.prototype.getRangeByPath=function(t){for(var e=this.getAllRanges(),i=0;i<e.length;i++){var n=e[i];if(n.path===t)return n}return null},i.prototype.getSequences=function(){if(this.items.length)return this.items;var e=this.__jsonld.mediaSequences||this.__jsonld.sequences;if(e)for(var i=0;i<e.length;i++){var n=e[i],o=new t.Sequence(n,this.options);this.items.push(o)}else if(this.__jsonld.items){o=new t.Sequence(this.__jsonld.items,this.options);this.items.push(o)}return this.items},i.prototype.getSequenceByIndex=function(t){return this.getSequences()[t]},i.prototype.getTotalSequences=function(){return this.getSequences().length},i.prototype.getManifestType=function(){var e=this.getService(t.ServiceProfile.UIEXTENSIONS);return e?new t.ManifestType(e.getProperty("manifestType")):new t.ManifestType("")},i.prototype.getTrackingLabel=function(){var e=this.getService(t.ServiceProfile.TRACKINGEXTENSIONS);return e?e.getProperty("trackingLabel"):""},i.prototype.isMultiSequence=function(){return this.getTotalSequences()>1},i.prototype.isPagingEnabled=function(){var e=this.getViewingHint();if(e)return e.toString()===t.ViewingHint.PAGED.toString();var i=this.getBehavior();return!!i&&i.toString()===t.Behavior.PAGED.toString()},i.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):null},i.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):null},i}(t.IIIFResource);t.Manifest=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.items=[],n._collections=null,n._manifests=null,t.__collection=n,n}return r(i,e),i.prototype.getCollections=function(){return this._collections?this._collections:this._collections=this.items.en().where(function(t){return t.isCollection()}).toArray()},i.prototype.getManifests=function(){return this._manifests?this._manifests:this._manifests=this.items.en().where(function(t){return t.isManifest()}).toArray()},i.prototype.getCollectionByIndex=function(t){var e=this.getCollections();if(!e[t])throw new Error("Collection index is outside range of array");var i=e[t];return i.options.index=t,i.load()},i.prototype.getManifestByIndex=function(t){var e=this.getManifests();if(!e[t])throw new Error("Manifest index is outside range of array");var i=e[t];return i.options.index=t,i.load()},i.prototype.getTotalCollections=function(){return this.getCollections().length},i.prototype.getTotalManifests=function(){return this.getManifests().length},i.prototype.getTotalItems=function(){return this.items.length},i.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):t.ViewingDirection.LEFTTORIGHT},i.prototype.getDefaultTree=function(){return e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=t.Utils.normaliseType(t.TreeNodeType.COLLECTION.toString()),this._parseManifests(this),this._parseCollections(this),t.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},i.prototype._parseManifests=function(e){if(e.getManifests()&&e.getManifests().length)for(var i=0;i<e.getManifests().length;i++){var n=e.getManifests()[i],o=n.getDefaultTree();o.label=n.parentLabel||t.LanguageMap.getValue(n.getLabel(),this.options.locale)||"manifest "+(i+1),o.navDate=n.getNavDate(),o.data.id=n.id,o.data.type=t.Utils.normaliseType(t.TreeNodeType.MANIFEST.toString()),e.defaultTree.addNode(o)}},i.prototype._parseCollections=function(e){if(e.getCollections()&&e.getCollections().length)for(var i=0;i<e.getCollections().length;i++){var n=e.getCollections()[i],o=n.getDefaultTree();o.label=n.parentLabel||t.LanguageMap.getValue(n.getLabel(),this.options.locale)||"collection "+(i+1),o.navDate=n.getNavDate(),o.data.id=n.id,o.data.type=t.Utils.normaliseType(t.TreeNodeType.COLLECTION.toString()),e.defaultTree.addNode(o),this._parseCollections(n)}},i}(t.IIIFResource);t.Collection=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n._ranges=null,n.canvases=null,n.items=[],n}return r(i,e),i.prototype.getCanvasIds=function(){return this.__jsonld.canvases?this.__jsonld.canvases:this.canvases?this.canvases:[]},i.prototype.getDuration=function(){var e,i;if(this.canvases&&this.canvases.length)for(var n=0;n<this.canvases.length;n++){var o=this.canvases[n],r=t.Utils.getTemporalComponent(o);r&&r.length>1&&(0===n&&(e=Number(r[0])),n===this.canvases.length-1&&(i=Number(r[1])))}else{var a=this.getRanges();for(n=0;n<a.length;n++){var s=a[n].getDuration();s&&(0===n&&(e=s.start),n===a.length-1&&(i=s.end))}}if(void 0!==e&&void 0!==i)return new t.Duration(e,i)},i.prototype.getRanges=function(){return this._ranges?this._ranges:this._ranges=this.items.en().where(function(t){return t.isRange()}).toArray()},i.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e?new t.Behavior(e):null},i.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):null},i.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):null},i.prototype.getTree=function(e){e.data=this,this.treeNode=e;var i=this.getRanges();if(i&&i.length)for(var n=0;n<i.length;n++){var o=i[n],r=new t.TreeNode;e.addNode(r),this._parseTreeNode(r,o)}return t.Utils.generateTreeNodeIds(e),e},i.prototype.spansTime=function(t){var e=this.getDuration();return!!(e&&t>=e.start&&t<=e.end)},i.prototype._parseTreeNode=function(e,i){e.label=t.LanguageMap.getValue(i.getLabel(),this.options.locale),e.data=i,e.data.type=t.Utils.normaliseType(t.TreeNodeType.RANGE.toString()),i.treeNode=e;var n=i.getRanges();if(n&&n.length)for(var o=0;o<n.length;o++){var r=n[o],a=r.getBehavior();if(!a||a.toString()!==t.Behavior.NONAV.toString()){var s=new t.TreeNode;e.addNode(s),this._parseTreeNode(s,r)}}},i}(t.ManifestResource);t.Range=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return r(i,e),i.prototype.getFormat=function(){return new t.RenderingFormat(this.getProperty("format"))},i}(t.ManifestResource);t.Rendering=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.items=[],n._thumbnails=null,n}return r(i,e),i.prototype.getCanvases=function(){if(this.items.length)return this.items;var e=this.__jsonld.canvases||this.__jsonld.elements;if(e)for(var i=0;i<e.length;i++){var n=e[i];(o=new t.Canvas(n,this.options)).index=i,this.items.push(o)}else if(this.__jsonld)for(i=0;i<this.__jsonld.length;i++){var o;n=this.__jsonld[i];(o=new t.Canvas(n,this.options)).index=i,this.items.push(o)}return this.items},i.prototype.getCanvasById=function(e){for(var i=0;i<this.getTotalCanvases();i++){var n=this.getCanvasByIndex(i),o=t.Utils.normaliseUrl(n.id);if(t.Utils.normaliseUrl(e)===o)return n}return null},i.prototype.getCanvasByIndex=function(t){return this.getCanvases()[t]},i.prototype.getCanvasIndexById=function(t){for(var e=0;e<this.getTotalCanvases();e++){if(this.getCanvasByIndex(e).id===t)return e}return null},i.prototype.getCanvasIndexByLabel=function(e,i){e=e.trim(),isNaN(e)||(e=parseInt(e,10).toString(),i&&(e+="r"));for(var n,o,r,a=/(\d*)\D+(\d*)/,s=0;s<this.getTotalCanvases();s++){var l=this.getCanvasByIndex(s);if(t.LanguageMap.getValue(l.getLabel(),this.options.locale)===e)return s;if((n=a.exec(e))&&(o=n[1],(r=n[2])&&new RegExp("^"+o+"\\D+"+r+"$").test(l.getLabel().toString())))return s}return-1},i.prototype.getLastCanvasLabel=function(e){for(var i=this.getTotalCanvases()-1;i>=0;i--){var n=this.getCanvasByIndex(i),o=t.LanguageMap.getValue(n.getLabel(),this.options.locale);if(e){if(/^[a-zA-Z0-9]*$/.test(o))return o}else if(o)return o}return this.options.defaultLabel},i.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},i.prototype.getNextPageIndex=function(e,i){var n;if(i){var o=this.getPagedIndices(e),r=this.getViewingDirection();n=r&&r.toString()===t.ViewingDirection.RIGHTTOLEFT.toString()?o[0]+1:o[o.length-1]+1}else n=e+1;return n>this.getLastPageIndex()?-1:n},i.prototype.getPagedIndices=function(e,i){var n=[];if(i){n=this.isFirstCanvas(e)||this.isLastCanvas(e)?[e]:e%2?[e,e+1]:[e-1,e];var o=this.getViewingDirection();o&&o.toString()===t.ViewingDirection.RIGHTTOLEFT.toString()&&(n=n.reverse())}else n.push(e);return n},i.prototype.getPrevPageIndex=function(e,i){var n;if(i){var o=this.getPagedIndices(e),r=this.getViewingDirection();n=r&&r.toString()===t.ViewingDirection.RIGHTTOLEFT.toString()?o[o.length-1]-1:o[0]-1}else n=e-1;return n},i.prototype.getStartCanvasIndex=function(){var t=this.getStartCanvas();if(t)for(var e=0;e<this.getTotalCanvases();e++){if(this.getCanvasByIndex(e).id===t)return e}return 0},i.prototype.getThumbs=function(e,i){console.warn("getThumbs will be deprecated, use getThumbnails instead");for(var n=[],o=this.getTotalCanvases(),r=0;r<o;r++){var a=this.getCanvasByIndex(r),s=new t.Thumb(e,a);n.push(s)}return n},i.prototype.getThumbnails=function(){if(null!=this._thumbnails)return this._thumbnails;this._thumbnails=[];for(var t=this.getCanvases(),e=0;e<t.length;e++){var i=t[e].getThumbnail();i&&this._thumbnails.push(i)}return this._thumbnails},i.prototype.getStartCanvas=function(){return this.getProperty("startCanvas")},i.prototype.getTotalCanvases=function(){return this.getCanvases().length},i.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):this.options.resource.getViewingDirection?this.options.resource.getViewingDirection():null},i.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):null},i.prototype.isCanvasIndexOutOfRange=function(t){return t>this.getTotalCanvases()-1},i.prototype.isFirstCanvas=function(t){return 0===t},i.prototype.isLastCanvas=function(t){return t===this.getTotalCanvases()-1},i.prototype.isMultiCanvas=function(){return this.getTotalCanvases()>1},i.prototype.isPagingEnabled=function(){var e=this.getViewingHint();return!!e&&e.toString()===t.ViewingHint.PAGED.toString()},i.prototype.isTotalCanvasesEven=function(){return this.getTotalCanvases()%2==0},i}(t.ManifestResource);t.Sequence=e}(f||(f={})),function(t){var e=function(){function e(){}return e.parse=function(t,e){return"string"==typeof t&&(t=JSON.parse(t)),this.parseJson(t,e)},e.parseJson=function(t,e){var i;if(e&&e.navDate&&!isNaN(e.navDate.getTime())&&(t.navDate=e.navDate.toString()),t["@type"])switch(t["@type"]){case"sc:Collection":i=this.parseCollection(t,e);break;case"sc:Manifest":i=this.parseManifest(t,e);break;default:return null}else switch(t.type){case"Collection":i=this.parseCollection(t,e);break;case"Manifest":i=this.parseManifest(t,e);break;default:return null}return i.isLoaded=!0,i},e.parseCollection=function(e,i){var n=new t.Collection(e,i);return n.index=i&&i.index||0,this.parseCollections(n,i),this.parseManifests(n,i),this.parseItems(n,i),n},e.parseCollections=function(t,e){var i;if(t.__jsonld.collections?i=t.__jsonld.collections:t.__jsonld.items&&(i=t.__jsonld.items.en().where(function(t){return"collection"===t.type.toLowerCase()}).toArray()),i)for(var n=0;n<i.length;n++){e&&(e.index=n);var o=this.parseCollection(i[n],e);o.index=n,o.parentCollection=t,t.items.push(o)}},e.parseManifest=function(e,i){return new t.Manifest(e,i)},e.parseManifests=function(t,e){var i;if(t.__jsonld.manifests?i=t.__jsonld.manifests:t.__jsonld.items&&(i=t.__jsonld.items.en().where(function(t){return"manifest"===t.type.toLowerCase()}).toArray()),i)for(var n=0;n<i.length;n++){var o=this.parseManifest(i[n],e);o.index=n,o.parentCollection=t,t.items.push(o)}},e.parseItem=function(t,e){if(t["@type"]){if("sc:manifest"===t["@type"].toLowerCase())return this.parseManifest(t,e);if("sc:collection"===t["@type"].toLowerCase())return this.parseCollection(t,e)}else if(t.type){if("manifest"===t.type.toLowerCase())return this.parseManifest(t,e);if("collection"===t.type.toLowerCase())return this.parseCollection(t,e)}return null},e.parseItems=function(t,e){var i=t.__jsonld.members||t.__jsonld.items;if(i)for(var n=function(n){e&&(e.index=n);var r=o.parseItem(i[n],e);return r?t.items.en().where(function(t){return t.id===r.id}).first()?"continue":(r.index=n,r.parentCollection=t,void t.items.push(r)):{value:void 0}},o=this,r=0;r<i.length;r++){var a=n(r);if("object"==typeof a)return a.value}},e}();t.Deserialiser=e;var i=function(){function t(){}return t.serialise=function(t){return""},t}();t.Serialiser=i}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return r(i,e),i.prototype.getProfile=function(){var e=this.getProperty("profile");return e||(e=this.getProperty("dcterms:conformsTo")),Array.isArray(e)?new t.ServiceProfile(e[0]):new t.ServiceProfile(e)},i.prototype.getConfirmLabel=function(){return t.Utils.getLocalisedValue(this.getProperty("confirmLabel"),this.options.locale)},i.prototype.getDescription=function(){return t.Utils.getLocalisedValue(this.getProperty("description"),this.options.locale)},i.prototype.getFailureDescription=function(){return t.Utils.getLocalisedValue(this.getProperty("failureDescription"),this.options.locale)},i.prototype.getFailureHeader=function(){return t.Utils.getLocalisedValue(this.getProperty("failureHeader"),this.options.locale)},i.prototype.getHeader=function(){return t.Utils.getLocalisedValue(this.getProperty("header"),this.options.locale)},i.prototype.getServiceLabel=function(){return t.Utils.getLocalisedValue(this.getProperty("label"),this.options.locale)},i.prototype.getInfoUri=function(){var t=this.id;return t.endsWith("/")||(t+="/"),t+="info.json"},i}(t.ManifestResource);t.Service=e}(f||(f={})),function(t){var e=function(e,i){this.data=i,this.index=i.index,this.width=e;var n=i.getHeight()/i.getWidth();this.height=n?Math.floor(this.width*n):e,this.uri=i.getCanonicalImageUri(e),this.label=t.LanguageMap.getValue(i.getLabel())};t.Thumb=e}(f||(f={})),function(t){var e=function(){function e(t,e){this.label=t,this.data=e||{},this.nodes=[]}return e.prototype.addNode=function(t){this.nodes.push(t),t.parentNode=this},e.prototype.isCollection=function(){return this.data.type===t.Utils.normaliseType(t.TreeNodeType.COLLECTION.toString())},e.prototype.isManifest=function(){return this.data.type===t.Utils.normaliseType(t.TreeNodeType.MANIFEST.toString())},e.prototype.isRange=function(){return this.data.type===t.Utils.normaliseType(t.TreeNodeType.RANGE.toString())},e}();t.TreeNode=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.collection=function(){return new e(e.COLLECTION.toString())},e.prototype.manifest=function(){return new e(e.MANIFEST.toString())},e.prototype.range=function(){return new e(e.RANGE.toString())},e.COLLECTION=new e("collection"),e.MANIFEST=new e("manifest"),e.RANGE=new e("range"),e}(t.StringValue);t.TreeNodeType=e}(f||(f={}));var l=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(a,s)}l((n=n.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},d=i(96),h=i(178),c=i(66);!function(t){var e=function(){function e(){}return e.getMediaType=function(t){return(t=(t=t.toLowerCase()).split(";")[0]).trim()},e.getImageQuality=function(e){var i=e.toString();return i===t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString()||i===t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString()||i===t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE1.toString()||i===t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString()||i===t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString()||i===t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString()||i===t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString()||i===t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString()||i===t.ServiceProfile.IIIF1IMAGELEVEL1.toString()||i===t.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString()||i===t.ServiceProfile.IIIF1IMAGELEVEL2.toString()||i===t.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString()?"native":"default"},e.getInexactLocale=function(t){return-1!==t.indexOf("-")?t.substr(0,t.indexOf("-")):t},e.getLocalisedValue=function(t,e){if(!Array.isArray(t))return t;for(var i=0;i<t.length;i++){var n=t[i];if(e===n["@language"])return n["@value"]}var o=e.substr(0,e.indexOf("-"));for(i=0;i<t.length;i++){var r=t[i];if(r["@language"]===o)return r["@value"]}return null},e.generateTreeNodeIds=function(t,i){var n;void 0===i&&(i=0),n=t.parentNode?t.parentNode.id+"-"+i:"0",t.id=n;for(var o=0;o<t.nodes.length;o++){var r=t.nodes[o];e.generateTreeNodeIds(r,o)}},e.normaliseType=function(t){return-1!==(t=t.toLowerCase()).indexOf(":")?t.split(":")[1]:t},e.normaliseUrl=function(t){return-1!==(t=t.substr(t.indexOf("://"))).indexOf("#")&&(t=t.split("#")[0]),t},e.normalisedUrlsMatch=function(t,i){return e.normaliseUrl(t)===e.normaliseUrl(i)},e.isImageProfile=function(i){return"string"==typeof i&&(i=new t.ServiceProfile(i)),!!(e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE0.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0PROFILE.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0PROFILE.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1PROFILE.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2PROFILE.toString()))},e.isLevel0ImageProfile=function(i){return"string"==typeof i&&(i=new t.ServiceProfile(i)),!!(e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE0.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE0.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0PROFILE.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0PROFILE.toString()))},e.isLevel1ImageProfile=function(i){return"string"==typeof i&&(i=new t.ServiceProfile(i)),!!(e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE1.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1PROFILE.toString()))},e.isLevel2ImageProfile=function(i){return"string"==typeof i&&(i=new t.ServiceProfile(i)),!!(e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2.toString())||e.normalisedUrlsMatch(i.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2PROFILE.toString()))},e.loadResource=function(t){return new Promise(function(e,i){var n,o=c.parse(t),r={host:o.hostname,port:o.port,path:o.path,method:"GET",withCredentials:!1};switch(o.protocol){case"https:":(n=h.request(r,function(t){var i="";t.on("data",function(t){i+=t}),t.on("end",function(){e(i)})})).on("error",function(t){i(t)}),n.end();break;case"dat:":var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&e(a.response)},a.open("GET",t,!0),a.send();break;default:(n=d.request(r,function(t){var i="";t.on("data",function(t){i+=t}),t.on("end",function(){e(i)})})).on("error",function(t){i(t)}),n.end()}})},e.loadExternalResourcesAuth1=function(t,i,n,o,r,a,s,l){return new Promise(function(u,d){var h=t.map(function(t){return e.loadExternalResourceAuth1(t,i,n,o,r,a,s,l)});Promise.all(h).then(function(){u(t)}).catch(function(t){d(t)})})},e.loadExternalResourceAuth1=function(t,i,n,o,r,a,s,d){return l(this,void 0,void 0,function(){var l;return u(this,function(u){switch(u.label){case 0:return[4,o(t)];case 1:return(l=u.sent())?[4,t.getData(l)]:[3,6];case 2:return u.sent(),t.status!==HTTPStatusCode.OK?[3,3]:[2,t];case 3:return[4,e.doAuthChain(t,i,n,r,a,s,d)];case 4:u.sent(),u.label=5;case 5:if(t.status===HTTPStatusCode.OK||t.status===HTTPStatusCode.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError();case 6:return[4,t.getData()];case 7:return u.sent(),t.status!==HTTPStatusCode.MOVED_TEMPORARILY&&t.status!==HTTPStatusCode.UNAUTHORIZED?[3,9]:[4,e.doAuthChain(t,i,n,r,a,s,d)];case 8:u.sent(),u.label=9;case 9:if(t.status===HTTPStatusCode.OK||t.status===HTTPStatusCode.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError()}})})},e.doAuthChain=function(t,i,n,o,r,a,s){return l(this,void 0,void 0,function(){var l,d,h,c,f,p,g,m;return u(this,function(u){switch(u.label){case 0:return t.isAccessControlled()?((l=t.externalService)&&(l.options=t.options),(d=t.kioskService)&&(d.options=t.options),(h=t.clickThroughService)&&(h.options=t.options),(c=t.loginService)&&(c.options=t.options),t.isResponseHandled||t.status!==HTTPStatusCode.MOVED_TEMPORARILY?[3,2]:[4,a(t)]):[2,t];case 1:return u.sent(),[2,t];case 2:return f=null,p=null,(f=l)?(p=f,[4,e.attemptResourceWithToken(t,n,f)]):[3,4];case 3:return u.sent(),[2,t];case 4:return(f=d)?(p=f,(g=i(f))?[4,o(g)]:[3,7]):[3,7];case 5:return u.sent(),[4,e.attemptResourceWithToken(t,n,f)];case 6:return u.sent(),[2,t];case 7:return(f=h)?(p=f,[4,r(t,f)]):[3,11];case 8:return(m=u.sent())?[4,o(m)]:[3,11];case 9:return u.sent(),[4,e.attemptResourceWithToken(t,n,f)];case 10:return u.sent(),[2,t];case 11:return(f=c)?(p=f,[4,r(t,f)]):[3,15];case 12:return(m=u.sent())?[4,o(m)]:[3,15];case 13:return u.sent(),[4,e.attemptResourceWithToken(t,n,f)];case 14:return u.sent(),[2,t];case 15:return p&&s(t,p),[2]}})})},e.attemptResourceWithToken=function(e,i,n){return l(this,void 0,void 0,function(){var o,r;return u(this,function(a){switch(a.label){case 0:return(o=n.getService(t.ServiceProfile.AUTH1TOKEN.toString()))?[4,i(e,o)]:[3,3];case 1:return(r=a.sent())&&r.accessToken?[4,e.getData(r)]:[3,3];case 2:return a.sent(),[2,e];case 3:return[2]}})})},e.loadExternalResourcesAuth09=function(t,i,n,o,r,a,s,l,u,d){return new Promise(function(h,c){var f=t.map(function(t){return e.loadExternalResourceAuth09(t,i,n,o,r,a,s,l,u,d)});Promise.all(f).then(function(){h(t)}).catch(function(t){c(t)})})},e.loadExternalResourceAuth09=function(t,i,n,o,r,a,s,l,u,d){return new Promise(function(h,c){d&&d.pessimisticAccessControl?t.getData().then(function(){t.isAccessControlled()?t.clickThroughService?(h(n(t)),h(o(t))):r(t).then(function(){a(t,!0).then(function(i){t.getData(i).then(function(){h(u(t))}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))}):h(t)}).catch(function(t){c(e.createInternalServerError(t))}):l(t,i).then(function(d){d?t.getData(d).then(function(){t.status===HTTPStatusCode.OK?h(u(t)):e.authorize(t,i,n,o,r,a,s,l).then(function(){h(u(t))}).catch(function(t){c(e.createAuthorizationFailedError())})}).catch(function(t){c(e.createAuthorizationFailedError())}):e.authorize(t,i,n,o,r,a,s,l).then(function(){h(u(t))}).catch(function(t){c(e.createAuthorizationFailedError())})}).catch(function(t){c(e.createAuthorizationFailedError())})})},e.createError=function(t,e){var i=new Error;return i.message=e,i.name=t,i},e.createAuthorizationFailedError=function(){return e.createError(manifesto.StatusCodes.AUTHORIZATION_FAILED.toString(),"Authorization failed")},e.createRestrictedError=function(){return e.createError(manifesto.StatusCodes.RESTRICTED.toString(),"Restricted")},e.createInternalServerError=function(t){return e.createError(manifesto.StatusCodes.INTERNAL_SERVER_ERROR.toString(),t)},e.authorize=function(t,i,n,o,r,a,s,l){return new Promise(function(u,d){t.getData().then(function(){t.isAccessControlled()?l(t,i).then(function(l){l?t.getData(l).then(function(){t.status===HTTPStatusCode.OK?u(t):e.showAuthInteraction(t,i,n,o,r,a,s,u,d)}).catch(function(t){d(e.createInternalServerError(t))}):a(t,!1).then(function(l){l?s(t,l,i).then(function(){t.getData(l).then(function(){t.status===HTTPStatusCode.OK?u(t):e.showAuthInteraction(t,i,n,o,r,a,s,u,d)}).catch(function(t){d(e.createInternalServerError(t))})}).catch(function(t){d(e.createInternalServerError(t))}):e.showAuthInteraction(t,i,n,o,r,a,s,u,d)})}).catch(function(t){d(e.createInternalServerError(t))}):u(t)})})},e.showAuthInteraction=function(t,i,n,o,r,a,s,l,u){t.status!==HTTPStatusCode.MOVED_TEMPORARILY||t.isResponseHandled?t.clickThroughService&&!t.isResponseHandled?n(t).then(function(){a(t,!0).then(function(n){s(t,n,i).then(function(){t.getData(n).then(function(){l(t)}).catch(function(t){u(e.createInternalServerError(t))})}).catch(function(t){u(e.createInternalServerError(t))})}).catch(function(t){u(e.createInternalServerError(t))})}):r(t).then(function(){a(t,!0).then(function(n){s(t,n,i).then(function(){t.getData(n).then(function(){l(t)}).catch(function(t){u(e.createInternalServerError(t))})}).catch(function(t){u(e.createInternalServerError(t))})}).catch(function(t){u(e.createInternalServerError(t))})}):l(t)},e.getService=function(t,e){var i=this.getServices(t);"string"!=typeof e&&(e=e.toString());for(var n=0;n<i.length;n++){var o=i[n];if(o.getProfile().toString()===e)return o}return null},e.getResourceById=function(t,i){return[t.__jsonld].en().traverseUnique(function(t){return e.getAllArrays(t)}).first(function(t){return t["@id"]===i})},e.getAllArrays=function(t){var e=[].en();if(!t)return e;for(var i in t){var n=t[i];Array.isArray(n)&&(e=e.concat(n))}return e},e.getServices=function(e){var i,n=[];if(!(i=e.__jsonld?e.__jsonld.service:e.service))return n;Array.isArray(i)||(i=[i]);for(var o=0;o<i.length;o++){var r=i[o];if("string"==typeof r){var a=this.getResourceById(e.options.resource,r);a&&n.push(new t.Service(a.__jsonld||a,e.options))}else n.push(new t.Service(r,e.options))}return n},e.getTemporalComponent=function(t){var e=/t=([^&]+)/g.exec(t),i=null;return e&&e[1]&&(i=e[1].split(",")),i},e}();t.Utils=e}(f||(f={})),function(t){var e=function(t,e){Array.isArray(t)?1===t.length?this.value=t[0]:this.value=t.join("<br/>"):this.value=t,this.locale=e};t.Language=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return r(i,e),i.parse=function(e,i){var n,o=[];if(!e)return o;if(Array.isArray(e))for(var r=0;r<e.length;r++){var a=e[r];n="string"==typeof a?new t.Language(a,i):new t.Language(a["@value"],a["@language"]||i),o.push(n)}else{if("string"==typeof e)return n=new t.Language(e,i),o.push(n),o;e["@value"]?(n=new t.Language(e["@value"],e["@language"]||i),o.push(n)):Object.keys(e).forEach(function(i){if(!e[i].length)throw new Error("language must have a value");n=new t.Language(e[i],i),o.push(n)})}return o},i.getValue=function(e,i){if(e.length){if(i){var n=e.en().where(function(e){return e.locale===i||t.Utils.getInexactLocale(e.locale)===t.Utils.getInexactLocale(i)}).first();if(n)return n.value}return e[0].value}return null},i}(Array);t.LanguageMap=e}(f||(f={})),function(t){var e=function(){function e(t){this.defaultLocale=t}return e.prototype.parse=function(e){this.resource=e,this.label=t.LanguageMap.parse(this.resource.label,this.defaultLocale),this.value=t.LanguageMap.parse(this.resource.value,this.defaultLocale)},e.prototype.getLabel=function(){return this.label?t.LanguageMap.getValue(this.label,this.defaultLocale):null},e.prototype.setLabel=function(e){var i=this;if(this.label&&this.label.length){var n=this.label.en().where(function(e){return e.locale===i.defaultLocale||e.locale===t.Utils.getInexactLocale(i.defaultLocale)}).first();n&&(n.value=e)}},e.prototype.getValue=function(){if(this.value){var e=this.defaultLocale;return this.label&&this.label.length&&this.label[0].locale&&(e=this.label[0].locale),t.LanguageMap.getValue(this.value,e)}return null},e.prototype.setValue=function(e){var i=this;if(this.value&&this.value.length){var n=this.value.en().where(function(e){return e.locale===i.defaultLocale||e.locale===t.Utils.getInexactLocale(i.defaultLocale)}).first();n&&(n.value=e)}},e}();t.LabelValuePair=e}(f||(f={})),function(t){var e=function(t,e){this.width=t,this.height=e};t.Size=e}(f||(f={})),e.manifesto=e.Manifesto=t.exports={AnnotationMotivation:new f.AnnotationMotivation,Behavior:new f.Behavior,IIIFResourceType:new f.IIIFResourceType,LabelValuePair:f.LabelValuePair,Language:f.Language,LanguageMap:f.LanguageMap,ManifestType:new f.ManifestType,MediaType:new f.MediaType,RenderingFormat:new f.RenderingFormat,ResourceType:new f.ResourceType,ServiceProfile:new f.ServiceProfile,Size:f.Size,TreeNode:f.TreeNode,TreeNodeType:new f.TreeNodeType,Utils:f.Utils,ViewingDirection:new f.ViewingDirection,ViewingHint:new f.ViewingHint,StatusCodes:{AUTHORIZATION_FAILED:1,FORBIDDEN:2,INTERNAL_SERVER_ERROR:3,RESTRICTED:4},create:function(t,e){return f.Deserialiser.parse(t,e)},loadManifest:function(t){return f.Utils.loadResource(t)}};r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return r(i,e),i.prototype.getBody=function(){var e=[],i=this.getProperty("body");if(i)if(Array.isArray(i))for(var n=0;n<i.length;n++){if((a=i[n]).items)for(var o=0;o<a.items.length;o++){var r=a.items[o];e.push(new t.AnnotationBody(r,this.options))}else e.push(new t.AnnotationBody(a,this.options))}else if(i.items)for(n=0;n<i.items.length;n++){var a=i.items[n];e.push(new t.AnnotationBody(a,this.options))}else e.push(new t.AnnotationBody(i,this.options));return e},i.prototype.getMotivation=function(){var e=this.getProperty("motivation");return e?new t.AnnotationMotivation(e.toLowerCase()):null},i.prototype.getOn=function(){return this.getProperty("on")},i.prototype.getTarget=function(){return this.getProperty("target")},i.prototype.getResource=function(){return new t.Resource(this.getProperty("resource"),this.options)},i}(t.ManifestResource);t.Annotation=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return r(i,e),i.prototype.getFormat=function(){var e=this.getProperty("format");return e?new t.MediaType(t.Utils.getMediaType(e)):null},i.prototype.getType=function(){return this.getProperty("type")?new t.ResourceType(t.Utils.normaliseType(this.getProperty("type"))):null},i.prototype.getWidth=function(){return this.getProperty("width")},i.prototype.getHeight=function(){return this.getProperty("height")},i}(t.ManifestResource);t.AnnotationBody=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(e){function i(t,i,n){var o=e.call(this,i)||this;return o.label=t,o.options=n,o}return r(i,e),i.prototype.getIIIFResourceType=function(){return new t.IIIFResourceType(t.Utils.normaliseType(this.getProperty("type")))},i.prototype.getLabel=function(){return this.label},i.prototype.getResources=function(){var e=this;return this.getProperty("resources").map(function(i){return new t.Annotation(i,e.options)})},i.prototype.load=function(){var e=this;return new Promise(function(i,n){if(e.isLoaded)i(e);else{var o=e.__jsonld.id;o||(o=e.__jsonld["@id"]),t.Utils.loadResource(o).then(function(t){e.__jsonld=JSON.parse(t),e.context=e.getProperty("context"),e.id=e.getProperty("id"),e.isLoaded=!0,i(e)}).catch(n)}})},i}(t.JSONLDResource);t.AnnotationList=e}(f||(f={}));r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype.getItems=function(){return this.getProperty("items")},e}(t.ManifestResource);t.AnnotationPage=e}(f||(f={}));var f;r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e}(t.Resource);t.Thumbnail=e}(f||(f={}))}).call(this,i(12))},function(t,e,i){(function(e,n,o){var r=i(98),a=i(20),s=i(99),l=i(40),u=i(170),d=s.IncomingMessage,h=s.readyStates;var c=t.exports=function(t){var i,n=this;l.Writable.call(n),n._opts=t,n._body=[],n._headers={},t.auth&&n.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(e){n.setHeader(e,t.headers[e])});var o=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!r.abortController)o=!1,i=!0;else if("prefer-streaming"===t.mode)i=!1;else if("allow-wrong-content-type"===t.mode)i=!r.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");i=!0}n._mode=function(t,e){return r.fetch&&e?"fetch":r.mozchunkedarraybuffer?"moz-chunked-arraybuffer":r.msstream?"ms-stream":r.arraybuffer&&t?"arraybuffer":r.vbArray&&t?"text:vbarray":"text"}(i,o),n._fetchTimer=null,n.on("finish",function(){n._onFinish()})};a(c,l.Writable),c.prototype.setHeader=function(t,e){var i=t.toLowerCase();-1===f.indexOf(i)&&(this._headers[i]={name:t,value:e})},c.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},c.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},c.prototype._onFinish=function(){var t=this;if(!t._destroyed){var i=t._opts,a=t._headers,s=null;"GET"!==i.method&&"HEAD"!==i.method&&(s=r.arraybuffer?u(e.concat(t._body)):r.blobConstructor?new n.Blob(t._body.map(function(t){return u(t)}),{type:(a["content-type"]||{}).value||""}):e.concat(t._body).toString());var l=[];if(Object.keys(a).forEach(function(t){var e=a[t].name,i=a[t].value;Array.isArray(i)?i.forEach(function(t){l.push([e,t])}):l.push([e,i])}),"fetch"===t._mode){var d=null;if(r.abortController){var c=new AbortController;d=c.signal,t._fetchAbortController=c,"requestTimeout"in i&&0!==i.requestTimeout&&(t._fetchTimer=n.setTimeout(function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()},i.requestTimeout))}n.fetch(t._opts.url,{method:t._opts.method,headers:l,body:s||void 0,mode:"cors",credentials:i.withCredentials?"include":"same-origin",signal:d}).then(function(e){t._fetchResponse=e,t._connect()},function(e){n.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)})}else{var f=t._xhr=new n.XMLHttpRequest;try{f.open(t._opts.method,t._opts.url,!0)}catch(e){return void o.nextTick(function(){t.emit("error",e)})}"responseType"in f&&(f.responseType=t._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!i.withCredentials),"text"===t._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in i&&(f.timeout=i.requestTimeout,f.ontimeout=function(){t.emit("requestTimeout")}),l.forEach(function(t){f.setRequestHeader(t[0],t[1])}),t._response=null,f.onreadystatechange=function(){switch(f.readyState){case h.LOADING:case h.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(f.onprogress=function(){t._onXHRProgress()}),f.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{f.send(s)}catch(e){return void o.nextTick(function(){t.emit("error",e)})}}}},c.prototype._onXHRProgress=function(){(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},c.prototype._connect=function(){var t=this;t._destroyed||(t._response=new d(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",function(e){t.emit("error",e)}),t.emit("response",t._response))},c.prototype._write=function(t,e,i){this._body.push(t),i()},c.prototype.abort=c.prototype.destroy=function(){this._destroyed=!0,n.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},c.prototype.end=function(t,e,i){"function"==typeof t&&(i=t,t=void 0),l.Writable.prototype.end.call(this,t,e,i)},c.prototype.flushHeaders=function(){},c.prototype.setTimeout=function(){},c.prototype.setNoDelay=function(){},c.prototype.setSocketKeepAlive=function(){};var f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,i(23).Buffer,i(12),i(33))},function(t,e,i){"use strict";e.byteLength=function(t){var e=u(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){var e,i,n=u(t),a=n[0],s=n[1],l=new r(function(t,e,i){return 3*(e+i)/4-i}(0,a,s)),d=0,h=s>0?a-4:a;for(i=0;i<h;i+=4)e=o[t.charCodeAt(i)]<<18|o[t.charCodeAt(i+1)]<<12|o[t.charCodeAt(i+2)]<<6|o[t.charCodeAt(i+3)],l[d++]=e>>16&255,l[d++]=e>>8&255,l[d++]=255&e;2===s&&(e=o[t.charCodeAt(i)]<<2|o[t.charCodeAt(i+1)]>>4,l[d++]=255&e);1===s&&(e=o[t.charCodeAt(i)]<<10|o[t.charCodeAt(i+1)]<<4|o[t.charCodeAt(i+2)]>>2,l[d++]=e>>8&255,l[d++]=255&e);return l},e.fromByteArray=function(t){for(var e,i=t.length,o=i%3,r=[],a=0,s=i-o;a<s;a+=16383)r.push(d(t,a,a+16383>s?s:a+16383));1===o?(e=t[i-1],r.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[i-2]<<8)+t[i-1],r.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return r.join("")};for(var n=[],o=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)n[s]=a[s],o[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function d(t,e,i){for(var o,r,a=[],s=e;s<i;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(r=o)>>18&63]+n[r>>12&63]+n[r>>6&63]+n[63&r]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,i,n,o){var r,a,s=8*o-n-1,l=(1<<s)-1,u=l>>1,d=-7,h=i?o-1:0,c=i?-1:1,f=t[e+h];for(h+=c,r=f&(1<<-d)-1,f>>=-d,d+=s;d>0;r=256*r+t[e+h],h+=c,d-=8);for(a=r&(1<<-d)-1,r>>=-d,d+=n;d>0;a=256*a+t[e+h],h+=c,d-=8);if(0===r)r=1-u;else{if(r===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),r-=u}return(f?-1:1)*a*Math.pow(2,r-n)},e.write=function(t,e,i,n,o,r){var a,s,l,u=8*r-o-1,d=(1<<u)-1,h=d>>1,c=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:r-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?c/l:c*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=d?(s=0,a=d):a+h>=1?(s=(e*l-1)*Math.pow(2,o),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,o),a=0));o>=8;t[i+f]=255&s,f+=p,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;t[i+f]=255&a,f+=p,a/=256,u-=8);t[i+f-p]|=128*g}},function(t,e){},function(t,e,i){"use strict";var n=i(63).Buffer,o=i(164);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,i,o,r=n.allocUnsafe(t>>>0),a=this.head,s=0;a;)e=a.data,i=r,o=s,e.copy(i,o),s+=a.data.length,a=a.next;return r},t}(),o&&o.inspect&&o.inspect.custom&&(t.exports.prototype[o.inspect.custom]=function(){var t=o.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,i){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new r(o.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(166),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(12))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,o,r,a,s,l=1,u={},d=!1,h=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){p(t.data)},n=function(t){r.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(o=h.documentElement,n=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):n=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),n=function(e){t.postMessage(a+e,"*")}),c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var o={callback:t,args:e};return u[l]=o,n(l),l++},c.clearImmediate=f}function f(t){delete u[t]}function p(t){if(d)setTimeout(p,0,t);else{var e=u[t];if(e){d=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}(e)}finally{f(t),d=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(12),i(33))},function(t,e,i){(function(e){function i(t){try{if(!e.localStorage)return!1}catch(t){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,i(12))},function(t,e,i){var n=i(23),o=n.Buffer;function r(t,e){for(var i in t)e[i]=t[i]}function a(t,e,i){return o(t,e,i)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(r(n,e),e.Buffer=a),a.prototype=Object.create(o.prototype),r(o,a),a.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,i)},a.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=o(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,i){"use strict";t.exports=r;var n=i(103),o=i(41);function r(t){if(!(this instanceof r))return new r(t);n.call(this,t)}o.inherits=i(20),o.inherits(r,n),r.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){var n=i(23).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(n.isBuffer(t)){for(var e=new Uint8Array(t.length),i=t.length,o=0;o<i;o++)e[o]=t[o];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var o in n)i.call(n,o)&&(t[o]=n[o])}return t};var i=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,i){(function(t,n){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(r){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof n&&n;a.global!==a&&a.window!==a&&a.self;var s,l=2147483647,u=36,d=1,h=26,c=38,f=700,p=72,g=128,m="-",v=/^xn--/,y=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=u-d,w=Math.floor,T=String.fromCharCode;function S(t){throw new RangeError(b[t])}function x(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function C(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+x((t=t.replace(_,".")).split("."),e).join(".")}function I(t){for(var e,i,n=[],o=0,r=t.length;o<r;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<r?56320==(64512&(i=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),o--):n.push(e);return n}function A(t){return x(t,function(t){var e="";return t>65535&&(e+=T((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=T(t)}).join("")}function M(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function O(t,e,i){var n=0;for(t=i?w(t/f):t>>1,t+=w(t/e);t>E*h>>1;n+=u)t=w(t/E);return w(n+(E+1)*t/(t+c))}function D(t){var e,i,n,o,r,a,s,c,f,v,y,_=[],b=t.length,E=0,T=g,x=p;for((i=t.lastIndexOf(m))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&S("not-basic"),_.push(t.charCodeAt(n));for(o=i>0?i+1:0;o<b;){for(r=E,a=1,s=u;o>=b&&S("invalid-input"),((c=(y=t.charCodeAt(o++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:u)>=u||c>w((l-E)/a))&&S("overflow"),E+=c*a,!(c<(f=s<=x?d:s>=x+h?h:s-x));s+=u)a>w(l/(v=u-f))&&S("overflow"),a*=v;x=O(E-r,e=_.length+1,0==r),w(E/e)>l-T&&S("overflow"),T+=w(E/e),E%=e,_.splice(E++,0,T)}return A(_)}function R(t){var e,i,n,o,r,a,s,c,f,v,y,_,b,E,x,C=[];for(_=(t=I(t)).length,e=g,i=0,r=p,a=0;a<_;++a)(y=t[a])<128&&C.push(T(y));for(n=o=C.length,o&&C.push(m);n<_;){for(s=l,a=0;a<_;++a)(y=t[a])>=e&&y<s&&(s=y);for(s-e>w((l-i)/(b=n+1))&&S("overflow"),i+=(s-e)*b,e=s,a=0;a<_;++a)if((y=t[a])<e&&++i>l&&S("overflow"),y==e){for(c=i,f=u;!(c<(v=f<=r?d:f>=r+h?h:f-r));f+=u)x=c-v,E=u-v,C.push(T(M(v+x%E,0))),c=w(x/E);C.push(T(M(c,0))),r=O(i,b,n==o),i=0,++n}++i,++e}return C.join("")}s={version:"1.4.1",ucs2:{decode:I,encode:A},decode:D,encode:R,toASCII:function(t){return C(t,function(t){return y.test(t)?"xn--"+R(t):t})},toUnicode:function(t){return C(t,function(t){return v.test(t)?D(t.slice(4).toLowerCase()):t})}},void 0===(o=function(){return s}.call(e,i,e,t))||(t.exports=o)}()}).call(this,i(104)(t),i(12))},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(176),e.encode=e.stringify=i(177)},function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,r){e=e||"&",i=i||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var l=1e3;r&&"number"==typeof r.maxKeys&&(l=r.maxKeys);var u=t.length;l>0&&u>l&&(u=l);for(var d=0;d<u;++d){var h,c,f,p,g=t[d].replace(s,"%20"),m=g.indexOf(i);m>=0?(h=g.substr(0,m),c=g.substr(m+1)):(h=g,c=""),f=decodeURIComponent(h),p=decodeURIComponent(c),n(a,f)?o(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,s){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?r(a(t),function(a){var s=encodeURIComponent(n(a))+i;return o(t[a])?r(t[a],function(t){return s+encodeURIComponent(n(t))}).join(e):s+encodeURIComponent(n(t[a]))}).join(e):s?encodeURIComponent(n(s))+i+encodeURIComponent(n(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function r(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var a=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){var n=i(96),o=i(66),r=t.exports;for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a]);function s(t){if("string"==typeof t&&(t=o.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}r.request=function(t,e){return t=s(t),n.request.call(this,t,e)},r.get=function(t,e){return t=s(t),n.get.call(this,t,e)}},function(t,e,i){(function(e,i){var n;t.exports=function t(e,i,o){function r(s,l){if(!i[s]){if(!e[s]){if(!l&&"function"==typeof n&&n)return n(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[s]={exports:{}};e[s][0].call(d.exports,function(t){return r(e[s][1][t]||t)},d,d.exports,t,e,i,o)}return i[s].exports}for(var a="function"==typeof n&&n,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,n,o){(function(t){!function(t){var e=function(){function t(t){this.value="",t&&(this.value=t.toLowerCase())}return t.prototype.toString=function(){return this.value},t}();t.StringValue=e}(o||(o={}));var e,n,o,r=this&&this.__extends||(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.date=function(){return new e(e.DATE.toString())},e.prototype.none=function(){return new e(e.NONE.toString())},e.DATE=new e("date"),e.NONE=new e("none"),e}(t.StringValue);t.TreeSortType=e}(o||(o={})),function(t){var e=function(){function e(t,e){this.rects=[],this.canvasIndex=e,this.addRect(t)}return e.prototype.addRect=function(e){var i=new t.AnnotationRect(e);i.canvasIndex=this.canvasIndex,i.index=this.rects.length,this.rects.push(i),this.rects.sort(function(t,e){return t.index-e.index})},e}();t.AnnotationGroup=e}(o||(o={})),function(t){var e=function(t){this.isVisible=!0;var e=t.on.match(/.*xywh=(\d*),(\d*),(\d*),(\d*)/);this.x=Number(e[1]),this.y=Number(e[2]),this.width=Number(e[3]),this.height=Number(e[4]),this.chars=t.resource.chars};t.AnnotationRect=e}(o||(o={})),function(e){var n=function(){function n(t){this._options=t,this._options.locale=this._options.locale||"en-GB"}return n.prototype.bootstrap=function(e,n){var o=this;return new Promise(function(r,a){e&&n&&(r=e,a=n);var s=o._detectIE();if(!1===s)manifesto.loadManifest(o._options.iiifResourceUri).then(function(t){o._loaded(o,t,r,a)});else if(s>0)if(9===s){var l={url:o._options.iiifResourceUri,type:"GET",dataType:"jsonp",jsonp:"callback",jsonpCallback:"manifestCallback"};i.ajax(l),t.manifestCallback=function(t){o._loaded(o,JSON.stringify(t),r,a)}}else i.getJSON(o._options.iiifResourceUri,function(t){o._loaded(o,JSON.stringify(t),r,a)})})},n.prototype._loaded=function(t,i,n,o){var r=manifesto.create(i,{locale:t._options.locale});t._options.iiifResource||(t._options.iiifResource=r);var a=t._options.collectionIndex,s=t._options.manifestIndex;if(r.getIIIFResourceType().toString()===manifesto.IIIFResourceType.collection().toString()||"collection"===r.getIIIFResourceType().toString().toLowerCase()){var l=r.getManifests(),u=r.getCollections();l.length||void 0!==a||(a=0),void 0!==a&&u&&u.length?r.getCollectionByIndex(a).then(function(i){i||o("Collection index not found"),0===i.getTotalManifests()&&0===s&&i.getTotalCollections()>0?(t._options.collectionIndex=0,t._options.iiifResourceUri=i.id,t.bootstrap(n,o)):i.getManifestByIndex(s).then(function(i){t._options.manifest=i;var o=new e.Helper(t._options);n(o)})}):r.getManifestByIndex(t._options.manifestIndex).then(function(i){t._options.manifest=i;var o=new e.Helper(t._options);n(o)})}else{t._options.manifest=r;var d=new e.Helper(t._options);n(d)}},n.prototype._detectIE=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var n=t.indexOf("Edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)},n}();e.Bootstrapper=n}(o||(o={})),function(t){var e=function(){function t(t,e){this.authHoldingPage=null,this.clickThroughService=null,this.externalService=null,this.isProbed=!1,this.isResponseHandled=!1,this.kioskService=null,this.loginService=null,this.logoutService=null,this.probeService=null,this.restrictedService=null,this.tokenService=null,t.externalResource=this,this.dataUri=this._getDataUri(t),this.index=t.index,this.authAPIVersion=e.authApiVersion,this._parseAuthServices(t),this._parseDimensions(t)}return t.prototype._getImageServiceDescriptor=function(t){for(var e=null,i=0;i<t.length;i++){var n=t[i],o=n.id;o.endsWith("/")||(o+="/"),manifesto.Utils.isImageProfile(n.getProfile())&&(e=o+"info.json")}return e},t.prototype._getDataUri=function(t){var e=t.getContent(),i=t.getImages(),n=null;if(e&&e.length){var o=e[0].getBody();return o.length?(r=o[0].getServices()).length&&(n=this._getImageServiceDescriptor(r))?n:o[0].id:null}if(i&&i.length){var r,a=i[0].getResource();return(r=a.getServices()).length&&(n=this._getImageServiceDescriptor(r))?n:a.id}var s=t.getService(manifesto.ServiceProfile.ixif());return s?s.getInfoUri():t.id},t.prototype._parseAuthServices=function(t){if(.9===this.authAPIVersion)this.clickThroughService=manifesto.Utils.getService(t,manifesto.ServiceProfile.clickThrough().toString()),this.loginService=manifesto.Utils.getService(t,manifesto.ServiceProfile.login().toString()),this.restrictedService=manifesto.Utils.getService(t,manifesto.ServiceProfile.restricted().toString()),this.clickThroughService?(this.logoutService=this.clickThroughService.getService(manifesto.ServiceProfile.logout().toString()),this.tokenService=this.clickThroughService.getService(manifesto.ServiceProfile.token().toString())):this.loginService?(this.logoutService=this.loginService.getService(manifesto.ServiceProfile.logout().toString()),this.tokenService=this.loginService.getService(manifesto.ServiceProfile.token().toString())):this.restrictedService&&(this.logoutService=this.restrictedService.getService(manifesto.ServiceProfile.logout().toString()),this.tokenService=this.restrictedService.getService(manifesto.ServiceProfile.token().toString()));else{if(void 0!==t.isCanvas&&t.isCanvas()){var e=t.getContent();if(e&&e.length){var i=e[0].getBody();i&&i.length&&(t=i[0])}}this.clickThroughService=manifesto.Utils.getService(t,manifesto.ServiceProfile.auth1Clickthrough().toString()),this.loginService=manifesto.Utils.getService(t,manifesto.ServiceProfile.auth1Login().toString()),this.externalService=manifesto.Utils.getService(t,manifesto.ServiceProfile.auth1External().toString()),this.kioskService=manifesto.Utils.getService(t,manifesto.ServiceProfile.auth1Kiosk().toString()),this.clickThroughService?(this.logoutService=this.clickThroughService.getService(manifesto.ServiceProfile.auth1Logout().toString()),this.tokenService=this.clickThroughService.getService(manifesto.ServiceProfile.auth1Token().toString()),this.probeService=this.clickThroughService.getService(manifesto.ServiceProfile.auth1Probe().toString())):this.loginService?(this.logoutService=this.loginService.getService(manifesto.ServiceProfile.auth1Logout().toString()),this.tokenService=this.loginService.getService(manifesto.ServiceProfile.auth1Token().toString()),this.probeService=this.loginService.getService(manifesto.ServiceProfile.auth1Probe().toString())):this.externalService?(this.logoutService=this.externalService.getService(manifesto.ServiceProfile.auth1Logout().toString()),this.tokenService=this.externalService.getService(manifesto.ServiceProfile.auth1Token().toString()),this.probeService=this.externalService.getService(manifesto.ServiceProfile.auth1Probe().toString())):this.kioskService&&(this.logoutService=this.kioskService.getService(manifesto.ServiceProfile.auth1Logout().toString()),this.tokenService=this.kioskService.getService(manifesto.ServiceProfile.auth1Token().toString()),this.probeService=this.kioskService.getService(manifesto.ServiceProfile.auth1Probe().toString()))}},t.prototype._parseDimensions=function(t){var e=t.getImages();if(e&&e.length){var i=e[0].getResource();this.width=i.getWidth(),this.height=i.getHeight()}else if((e=t.getContent()).length){var n=e[0].getBody();n.length&&(this.width=n[0].getWidth(),this.height=n[0].getHeight())}},t.prototype.isAccessControlled=function(){return!!(this.clickThroughService||this.loginService||this.externalService||this.kioskService||this.probeService)},t.prototype.hasServiceDescriptor=function(){return!!this.dataUri&&this.dataUri.endsWith("info.json")},t.prototype.getData=function(t){var e=this,n=this;return n.data={},new Promise(function(o,r){if(e.dataUri||r("There is no dataUri to fetch"),n.probeService&&!n.isProbed)n.isProbed=!0,i.ajax({url:n.probeService.id,type:"GET",dataType:"json"}).done(function(t){unescape(t.contentLocation)!==n.dataUri?n.status=HTTPStatusCode.MOVED_TEMPORARILY:n.status=HTTPStatusCode.OK,o(n)}).fail(function(t){n.status=t.status,n.error=t,o(n)});else{var a="GET";if(!n.hasServiceDescriptor()){if(!n.isAccessControlled())return n.status=HTTPStatusCode.OK,void o(n);a="HEAD"}i.ajax({url:n.dataUri,type:a,dataType:"json",beforeSend:function(e){t&&e.setRequestHeader("Authorization","Bearer "+t.accessToken)}}).done(function(t){if(t){var e=unescape(t["@id"]);n.data=t,n._parseAuthServices(n.data),e.endsWith("/info.json")&&(e=e.substr(0,e.lastIndexOf("/")));var i=n.dataUri;i&&i.endsWith("/info.json")&&(i=i.substr(0,i.lastIndexOf("/"))),e!==i&&n.loginService?n.status=HTTPStatusCode.MOVED_TEMPORARILY:n.status=HTTPStatusCode.OK,o(n)}else n.status=HTTPStatusCode.OK,o(n)}).fail(function(t){n.status=t.status,n.error=t,t.responseJSON&&n._parseAuthServices(t.responseJSON),o(n)})}})},t}();t.ExternalResource=e}(o||(o={})),function(t){var e=function(){function e(t){this.options=t,this.iiifResource=this.options.iiifResource,this.iiifResourceUri=this.options.iiifResourceUri,this.manifest=this.options.manifest,this.collectionIndex=this.options.collectionIndex,this.manifestIndex=this.options.manifestIndex||0,this.sequenceIndex=this.options.sequenceIndex||0,this.canvasIndex=this.options.canvasIndex||0}return e.prototype.getAutoCompleteService=function(){var t=this.getSearchService();return t?t.getService(manifesto.ServiceProfile.autoComplete()):null},e.prototype.getAttribution=function(){console.warn("getAttribution will be deprecated, use getRequiredStatement instead.");var t=this.manifest.getAttribution();return t?Manifesto.LanguageMap.getValue(t,this.options.locale):null},e.prototype.getCanvases=function(){return this.getCurrentSequence().getCanvases()},e.prototype.getCanvasById=function(t){return this.getCurrentSequence().getCanvasById(t)},e.prototype.getCanvasesById=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],o=this.getCanvasById(n);o&&e.push(o)}return e},e.prototype.getCanvasByIndex=function(t){return this.getCurrentSequence().getCanvasByIndex(t)},e.prototype.getCanvasIndexById=function(t){return this.getCurrentSequence().getCanvasIndexById(t)},e.prototype.getCanvasIndexByLabel=function(t){var e=this.getManifestType().toString()===manifesto.ManifestType.manuscript().toString();return this.getCurrentSequence().getCanvasIndexByLabel(t,e)},e.prototype.getCanvasRange=function(t,e){var i=this.getCanvasRanges(t);if(e){for(var n=0;n<i.length;n++){var o=i[n];if(o.path===e)return o}return null}return i[0]},e.prototype.getCanvasRanges=function(t){return t.ranges?t.ranges:(t.ranges=this.manifest.getAllRanges().en().where(function(e){return e.getCanvasIds().en().any(function(e){return manifesto.Utils.normaliseUrl(e)===manifesto.Utils.normaliseUrl(t.id)})}).toArray(),t.ranges)},e.prototype.getCollectionIndex=function(t){if(!t.parentCollection||t.parentCollection.parentCollection)return t.parentCollection?t.parentCollection.index:void 0},e.prototype.getCurrentCanvas=function(){return this.getCurrentSequence().getCanvasByIndex(this.canvasIndex)},e.prototype.getCurrentSequence=function(){return this.getSequenceByIndex(this.sequenceIndex)},e.prototype.getDescription=function(){var t=this.manifest.getDescription();return t?Manifesto.LanguageMap.getValue(t,this.options.locale):null},e.prototype.getFirstPageIndex=function(){return 0},e.prototype.getLabel=function(){var t=this.manifest.getLabel();return t?Manifesto.LanguageMap.getValue(t,this.options.locale):null},e.prototype.getLastCanvasLabel=function(t){return this.getCurrentSequence().getLastCanvasLabel(t)},e.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},e.prototype.getLicense=function(){return this.manifest.getLicense()},e.prototype.getLogo=function(){return this.manifest.getLogo()},e.prototype.getManifestType=function(){var t=this.manifest.getManifestType();return""===t.toString()&&(t=manifesto.ManifestType.monograph()),t},e.prototype.getMetadata=function(e){var i=[],n=this.manifest.getMetadata(),o=new t.MetadataGroup(this.manifest);n&&n.length&&o.addMetadata(n,!0),this.manifest.getDescription().length&&((r=new Manifesto.LabelValuePair(this.options.locale)).label=[new Manifesto.Language("description",this.options.locale)],r.value=this.manifest.getDescription(),r.isRootLevel=!0,o.addItem(r)),this.manifest.getAttribution().length&&((r=new Manifesto.LabelValuePair(this.options.locale)).label=[new Manifesto.Language("attribution",this.options.locale)],r.value=this.manifest.getAttribution(),r.isRootLevel=!0,o.addItem(r));var r,a=this.manifest.getLicense();if(a){var s={label:"license",value:e&&e.licenseFormatter?e.licenseFormatter.format(a):a};(r=new Manifesto.LabelValuePair(this.options.locale)).parse(s),r.isRootLevel=!0,o.addItem(r)}return this.manifest.getLogo()&&(s={label:"logo",value:'<img src="'+this.manifest.getLogo()+'"/>'},(r=new Manifesto.LabelValuePair(this.options.locale)).parse(s),r.isRootLevel=!0,o.addItem(r)),i.push(o),e?this._parseMetadataOptions(e,i):i},e.prototype.getRequiredStatement=function(){var t=this.manifest.getRequiredStatement();return t?{label:t.getLabel(),value:t.getValue()}:null},e.prototype._parseMetadataOptions=function(e,i){var n=this.getCurrentSequence(),o=n.getMetadata();if(o&&o.length){var r=new t.MetadataGroup(n);r.addMetadata(o),i.push(r)}if(e.range){var a=this._getRangeMetadata([],e.range);a=a.reverse(),i=i.concat(a)}if(e.canvases&&e.canvases.length)for(var s=0;s<e.canvases.length;s++){var l=e.canvases[s],u=l.getMetadata();if(u&&u.length){var d=new t.MetadataGroup(l);d.addMetadata(l.getMetadata()),i.push(d)}for(var h=l.getImages(),c=0;c<h.length;c++){var f=h[c],p=f.getMetadata();if(p&&p.length){var g=new t.MetadataGroup(f);g.addMetadata(p),i.push(g)}}}return i},e.prototype._getRangeMetadata=function(e,i){var n=i.getMetadata();if(n&&n.length){var o=new t.MetadataGroup(i);o.addMetadata(n),e.push(o)}else if(i.parentRange)return this._getRangeMetadata(e,i.parentRange);return e},e.prototype.getMultiSelectState=function(){return this._multiSelectState||(this._multiSelectState=new t.MultiSelectState,this._multiSelectState.ranges=this.getRanges().slice(0),this._multiSelectState.canvases=this.getCurrentSequence().getCanvases().slice(0)),this._multiSelectState},e.prototype.getCurrentRange=function(){return this.rangeId?this.getRangeById(this.rangeId):null},e.prototype.getPosterCanvas=function(){return this.manifest.getPosterCanvas()},e.prototype.getPosterImage=function(){var t=this.getPosterCanvas();if(t){var e=t.getContent();if(e&&e.length)return e[0].getBody()[0].id}return null},e.prototype.getPreviousRange=function(t){var e=null;if(e=t||this.getCurrentRange())for(var i=this.getFlattenedTree(),n=0;n<i.length;n++)if(i[n].data.id===e.id){for(;n>0;)return i[--n].data;break}return null},e.prototype.getNextRange=function(t){var e=null;if(e=t||this.getCurrentRange())for(var i=this.getFlattenedTree(),n=0;n<i.length;n++)if(i[n].data.id===e.id){for(;n<i.length-1;){var o=i[++n];if(o.data.canvases&&o.data.canvases.length)return o.data}break}return null},e.prototype.getFlattenedTree=function(){return this._flattenTree(this.getTree(),"nodes")},e.prototype._flattenTree=function(t,e){var i=this,n=[Object.assign({},t)];return delete n[0][e],t[e]&&t[e].length>0?n.concat(t[e].map(function(t){return i._flattenTree(t,e)}).reduce(function(t,e){return t.concat(e)},[])):n},e.prototype.getRanges=function(){return this.manifest.getAllRanges()},e.prototype.getRangeByPath=function(t){return this.manifest.getRangeByPath(t)},e.prototype.getRangeById=function(t){return this.manifest.getRangeById(t)},e.prototype.getRangeCanvases=function(t){var e=t.getCanvasIds();return this.getCanvasesById(e)},e.prototype.getRelated=function(){return this.manifest.getRelated()},e.prototype.getSearchService=function(){return this.manifest.getService(manifesto.ServiceProfile.search())},e.prototype.getSeeAlso=function(){return this.manifest.getSeeAlso()},e.prototype.getSequenceByIndex=function(t){return this.manifest.getSequenceByIndex(t)},e.prototype.getShareServiceUrl=function(){var t=null,e=this.manifest.getService(manifesto.ServiceProfile.shareExtensions());return e&&(e.length&&(e=e[0]),t=e.__jsonld.shareUrl),t},e.prototype.getSortedTreeNodesByDate=function(t,e){var i=e.nodes.en().traverseUnique(function(t){return t.nodes}).where(function(t){return t.data.type===manifesto.TreeNodeType.collection().toString()||t.data.type===manifesto.TreeNodeType.manifest().toString()}).toArray(),n=e.nodes.en().traverseUnique(function(t){return t.nodes}).where(function(t){return t.data.type===manifesto.TreeNodeType.manifest().toString()}).toArray();this.createDecadeNodes(t,i),this.sortDecadeNodes(t),this.createYearNodes(t,i),this.sortYearNodes(t),this.createMonthNodes(t,n),this.sortMonthNodes(t),this.createDateNodes(t,n),this.pruneDecadeNodes(t)},e.prototype.getStartCanvasIndex=function(){return this.getCurrentSequence().getStartCanvasIndex()},e.prototype.getThumbs=function(t,e){return this.getCurrentSequence().getThumbs(t,e)},e.prototype.getTopRanges=function(){return this.manifest.getTopRanges()},e.prototype.getTotalCanvases=function(){return this.getCurrentSequence().getTotalCanvases()},e.prototype.getTrackingLabel=function(){return this.manifest.getTrackingLabel()},e.prototype._getTopRanges=function(){return this.iiifResource.getTopRanges()},e.prototype.getTree=function(e,i){if(void 0===e&&(e=0),void 0===i&&(i=t.TreeSortType.NONE),!this.iiifResource)return null;var n;if(this.iiifResource.isCollection())n=this.iiifResource.getDefaultTree();else{var o=this._getTopRanges(),r=new manifesto.TreeNode;if(r.label="root",r.data=this.iiifResource,!o.length)return r;n=o[e].getTree(r)}var a=new manifesto.TreeNode;switch(i.toString()){case t.TreeSortType.DATE.toString():if(this.treeHasNavDates(n)){this.getSortedTreeNodesByDate(a,n);break}default:a=n}return a},e.prototype.treeHasNavDates=function(t){return!!t.nodes.en().traverseUnique(function(t){return t.nodes}).where(function(t){return!isNaN(t.navDate)}).first()},e.prototype.getViewingDirection=function(){var t=this.getCurrentSequence().getViewingDirection();return t||(t=this.manifest.getViewingDirection()),t},e.prototype.getViewingHint=function(){var t=this.getCurrentSequence().getViewingHint();return t||(t=this.manifest.getViewingHint()),t},e.prototype.hasParentCollection=function(){return!!this.manifest.parentCollection},e.prototype.hasRelatedPage=function(){var t=this.getRelated();return!!t&&(t.length&&(t=t[0]),"text/html"===t.format)},e.prototype.hasResources=function(){return this.getCurrentCanvas().getResources().length>0},e.prototype.isBottomToTop=function(){var t=this.getViewingDirection();return!!t&&t.toString()===manifesto.ViewingDirection.bottomToTop().toString()},e.prototype.isCanvasIndexOutOfRange=function(t){return this.getCurrentSequence().isCanvasIndexOutOfRange(t)},e.prototype.isContinuous=function(){var t=this.getViewingHint();return!!t&&t.toString()===manifesto.ViewingHint.continuous().toString()},e.prototype.isFirstCanvas=function(t){return void 0!==t?this.getCurrentSequence().isFirstCanvas(t):this.getCurrentSequence().isFirstCanvas(this.canvasIndex)},e.prototype.isHorizontallyAligned=function(){return this.isLeftToRight()||this.isRightToLeft()},e.prototype.isLastCanvas=function(t){return void 0!==t?this.getCurrentSequence().isLastCanvas(t):this.getCurrentSequence().isLastCanvas(this.canvasIndex)},e.prototype.isLeftToRight=function(){var t=this.getViewingDirection();return!!t&&t.toString()===manifesto.ViewingDirection.leftToRight().toString()},e.prototype.isMultiCanvas=function(){return this.getCurrentSequence().isMultiCanvas()},e.prototype.isMultiSequence=function(){return this.manifest.isMultiSequence()},e.prototype.isPaged=function(){var t=this.getViewingHint();return t?t.toString()===manifesto.ViewingHint.paged().toString():this.manifest.isPagingEnabled()},e.prototype.isPagingAvailable=function(){return this.isPagingEnabled()&&this.getTotalCanvases()>2},e.prototype.isPagingEnabled=function(){return this.manifest.isPagingEnabled()||this.getCurrentSequence().isPagingEnabled()},e.prototype.isRightToLeft=function(){var t=this.getViewingDirection();return!!t&&t.toString()===manifesto.ViewingDirection.rightToLeft().toString()},e.prototype.isTopToBottom=function(){var t=this.getViewingDirection();return!!t&&t.toString()===manifesto.ViewingDirection.topToBottom().toString()},e.prototype.isTotalCanvasesEven=function(){return this.getCurrentSequence().isTotalCanvasesEven()},e.prototype.isUIEnabled=function(t){var e=this.manifest.getService(manifesto.ServiceProfile.uiExtensions());if(e){var i=e.getProperty("disableUI");if(i&&(-1!==i.indexOf(t)||-1!==i.indexOf(t.toLowerCase())))return!1}return!0},e.prototype.isVerticallyAligned=function(){return this.isTopToBottom()||this.isBottomToTop()},e.prototype.createDateNodes=function(t,e){for(var i=0;i<e.length;i++){var n=e[i],o=this.getNodeYear(n),r=this.getNodeMonth(n),a=new manifesto.TreeNode;a.id=n.id,a.label=this.getNodeDisplayDate(n),a.data=n.data,a.data.type=manifesto.TreeNodeType.manifest().toString(),a.data.year=o,a.data.month=r;var s=this.getDecadeNode(t,o);if(s){var l=this.getYearNode(s,o);if(l){var u=this.getMonthNode(l,r);u&&u.addNode(a)}}}},e.prototype.createDecadeNodes=function(t,e){for(var i=0;i<e.length;i++){var n=e[i],o=this.getNodeYear(n),r=Number(o.toString().substr(0,3)+"9");if(!this.getDecadeNode(t,o)){var a=new manifesto.TreeNode;a.label=o+" - "+r,a.navDate=n.navDate,a.data.startYear=o,a.data.endYear=r,t.addNode(a)}}},e.prototype.createMonthNodes=function(t,e){for(var i=0;i<e.length;i++){var n=e[i],o=this.getNodeYear(n),r=this.getNodeMonth(n),a=this.getDecadeNode(t,o),s=null;if(a&&(s=this.getYearNode(a,o)),a&&s&&!this.getMonthNode(s,r)){var l=new manifesto.TreeNode;l.label=this.getNodeDisplayMonth(n),l.navDate=n.navDate,l.data.year=o,l.data.month=r,s.addNode(l)}}},e.prototype.createYearNodes=function(t,e){for(var i=0;i<e.length;i++){var n=e[i],o=this.getNodeYear(n),r=this.getDecadeNode(t,o);if(r&&!this.getYearNode(r,o)){var a=new manifesto.TreeNode;a.label=o.toString(),a.navDate=n.navDate,a.data.year=o,r.addNode(a)}}},e.prototype.getDecadeNode=function(t,e){for(var i=0;i<t.nodes.length;i++){var n=t.nodes[i];if(e>=n.data.startYear&&e<=n.data.endYear)return n}return null},e.prototype.getMonthNode=function(t,e){for(var i=0;i<t.nodes.length;i++){var n=t.nodes[i];if(e===this.getNodeMonth(n))return n}return null},e.prototype.getNodeDisplayDate=function(t){return t.navDate.toDateString()},e.prototype.getNodeDisplayMonth=function(t){return["January","February","March","April","May","June","July","August","September","October","November","December"][t.navDate.getMonth()]},e.prototype.getNodeMonth=function(t){return t.navDate.getMonth()},e.prototype.getNodeYear=function(t){return t.navDate.getFullYear()},e.prototype.getYearNode=function(t,e){for(var i=0;i<t.nodes.length;i++){var n=t.nodes[i];if(e===this.getNodeYear(n))return n}return null},e.prototype.pruneDecadeNodes=function(t){for(var e=[],i=0;i<t.nodes.length;i++){var n=t.nodes[i];n.nodes.length||e.push(n)}for(var o=0;o<e.length;o++){var r=e[o],a=t.nodes.indexOf(r);a>-1&&t.nodes.splice(a,1)}},e.prototype.sortDecadeNodes=function(t){t.nodes=t.nodes.sort(function(t,e){return t.data.startYear-e.data.startYear})},e.prototype.sortMonthNodes=function(t){for(var e=this,i=0;i<t.nodes.length;i++)for(var n=t.nodes[i],o=0;o<n.nodes.length;o++){var r=n.nodes[o];r.nodes=r.nodes.sort(function(t,i){return e.getNodeMonth(t)-e.getNodeMonth(i)})}},e.prototype.sortYearNodes=function(t){for(var e=this,i=0;i<t.nodes.length;i++){var n=t.nodes[i];n.nodes=n.nodes.sort(function(t,i){return e.getNodeYear(t)-e.getNodeYear(i)})}},e}();t.Helper=e}(o||(o={})),function(t){var e=function(){};t.ILabelValuePair=e}(o||(o={})),function(t){t.loadManifest=function(e){return new t.Bootstrapper(e).bootstrap()}}(o||(o={})),(n=t).Manifold||(n.Manifold=o),function(t){var e=function(){function t(t,e){this.items=[],this.resource=t,this.label=e}return t.prototype.addItem=function(t){this.items.push(t)},t.prototype.addMetadata=function(t,e){void 0===e&&(e=!1);for(var i=0;i<t.length;i++){var n=t[i];n.isRootLevel=e,this.addItem(n)}},t}();t.MetadataGroup=e}(o||(o={})),function(t){var e=function(){};t.MetadataOptions=e}(o||(o={})),function(t){var e=function(){function t(){this.isEnabled=!1,this.ranges=[],this.canvases=[]}return t.prototype.allCanvasesSelected=function(){return this.canvases.length>0&&this.getAllSelectedCanvases().length===this.canvases.length},t.prototype.allRangesSelected=function(){return this.ranges.length>0&&this.getAllSelectedRanges().length===this.ranges.length},t.prototype.allSelected=function(){return this.allRangesSelected()&&this.allCanvasesSelected()},t.prototype.getAll=function(){return this.canvases.concat(this.ranges)},t.prototype.getAllSelectedCanvases=function(){return this.canvases.en().where(function(t){return t.multiSelected}).toArray()},t.prototype.getAllSelectedRanges=function(){return this.ranges.en().where(function(t){return t.multiSelected}).toArray()},t.prototype.getCanvasById=function(t){return this.canvases.en().where(function(e){return manifesto.Utils.normaliseUrl(e.id)===manifesto.Utils.normaliseUrl(t)}).first()},t.prototype.getCanvasesByIds=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e.push(this.getCanvasById(n))}return e},t.prototype.getRangeCanvases=function(t){var e=t.getCanvasIds();return this.getCanvasesByIds(e)},t.prototype.selectAll=function(t){this.selectRanges(this.ranges,t),this.selectCanvases(this.canvases,t)},t.prototype.selectCanvas=function(t,e){this.canvases.en().where(function(e){return e.id===t.id}).first().multiSelected=e},t.prototype.selectAllCanvases=function(t){this.selectCanvases(this.canvases,t)},t.prototype.selectCanvases=function(t,e){for(var i=0;i<t.length;i++)t[i].multiSelected=e},t.prototype.selectRange=function(t,e){var i=this.ranges.en().where(function(e){return e.id===t.id}).first();i.multiSelected=e;var n=this.getRangeCanvases(i);this.selectCanvases(n,e)},t.prototype.selectAllRanges=function(t){this.selectRanges(this.ranges,t)},t.prototype.selectRanges=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];n.multiSelected=e;var o=this.getCanvasesByIds(n.getCanvasIds());this.selectCanvases(o,e)}},t.prototype.setEnabled=function(t){this.isEnabled=t;for(var e=this.getAll(),i=0;i<e.length;i++){var n=e[i];n.multiSelectEnabled=this.isEnabled,t||(n.multiSelected=!1)}},t}();t.MultiSelectState=e}(o||(o={})),function(t){var e=function(t,e){this.value=t,this.locale=e};t.Translation=e}(o||(o={})),function(t){var e=function(){function t(t){this.labels=t}return t.prototype.format=function(t){return-1!=t.indexOf("<a")?t:'<a href="'+t+'">'+(this.labels[t]?this.labels[t]:t)+"</a>"},t}();t.UriLabeller=e}(o||(o={}))}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}).call(this,i(12),i(5))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(181),r=n(i(291)),a=n(i(310)),s=n(i(325)),l=n(i(3));dashjs.Protection=a.default,dashjs.MetricsReporting=r.default,dashjs.MediaPlayerFactory=s.default,dashjs.Debug=l.default,e.default=dashjs,e.MediaPlayer=o.MediaPlayer,e.Protection=a.default,e.MetricsReporting=r.default,e.MediaPlayerFactory=s.default,e.Debug=l.default},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(105)),r=n(i(0)),a=n(i(3)),s=i(124),l="undefined"!=typeof window&&window||t,u=l.dashjs;u||(u=l.dashjs={}),u.MediaPlayer=o.default,u.FactoryMaker=r.default,u.Debug=a.default,u.Version=(0,s.getVersionString)(),e.default=u,e.MediaPlayer=o.default,e.FactoryMaker=r.default,e.Debug=a.default}).call(this,i(12))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(25)),a=n(i(2)),s=n(i(4)),l=n(i(0)),u=n(i(3)),d=500;function h(){var t=this.context,e=(0,a.default)(t).getInstance(),i=void 0,n=void 0,l=void 0,h=void 0,c=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,w=void 0,T=void 0,S=void 0,x=void 0,C=void 0,I=void 0,A=void 0,M=void 0,O=void 0,D=void 0,R=void 0,N=void 0;function k(t){!S&&t.fromStreamInfo&&void 0!==b[t.fromStreamInfo.id]&&(delete w[t.fromStreamInfo.id],delete b[t.fromStreamInfo.id])}function P(){return parseFloat((L()-G()).toFixed(5))}function L(){var t=Q(!0),e=S&&T?t-T.start:0;return t+(T?T.duration-e:e)}function F(){T&&m&&m.getElement()?m.play():C=!0}function B(){return T&&m?m.isPaused():null}function U(){T&&m&&m.pause()}function j(){return T&&m?m.isSeeking():null}function H(t,i,o){T&&m&&(!0===o?t!==m.getTime()&&(m.removeEventListener("seeking",at),n.info("Requesting seek to time: "+t),m.setCurrentTime(t,i)):(e.trigger(s.default.PLAYBACK_SEEK_ASKED),n.info("Requesting seek to time: "+t),m.setCurrentTime(t,i)))}function G(){return T&&m?m.getTime():null}function z(){var t=G();if(S&&!isNaN(A)){var e=A/1e3;t>e&&(t-=e)}return t}function Y(){return T&&m?m.getPlaybackRate():null}function V(){return T&&m?m.getEnded():null}function q(){return S}function W(){if(!S||isNaN(A))return NaN;var t=z();if(isNaN(t)||0===t)return 0;var e=(new Date).getTime()+1e3*v.getClientTimeOffset();return Math.max(((e-A-1e3*t)/1e3).toFixed(3),0)}function K(){y=NaN,C=!1,b={},E=0,A=0,w={},m&&(e.off(s.default.DATA_UPDATE_COMPLETED,tt,this),e.off(s.default.BUFFER_LEVEL_STATE_CHANGED,_t,this),e.off(s.default.BYTES_APPENDED_END_FRAGMENT,vt,this),e.off(s.default.LOADING_PROGRESS,yt,this),e.off(s.default.PERIOD_SWITCH_STARTED,k,this),e.off(s.default.PLAYBACK_PROGRESS,gt,this),e.off(s.default.PLAYBACK_TIME_UPDATED,gt,this),e.off(s.default.PLAYBACK_ENDED,ft,this),J(),m.removeEventListener("canplay",et),m.removeEventListener("play",it),m.removeEventListener("waiting",nt),m.removeEventListener("playing",ot),m.removeEventListener("pause",rt),m.removeEventListener("error",pt),m.removeEventListener("seeking",at),m.removeEventListener("seeked",st),m.removeEventListener("timeupdate",lt),m.removeEventListener("progress",ut),m.removeEventListener("ratechange",dt),m.removeEventListener("loadedmetadata",ht),m.removeEventListener("stalled",bt),m.removeEventListener("ended",ct)),_=null,m=null,T=null,S=null}function X(){var t=N.getURIFragmentData(),e=void 0;if(t){e={};var i=parseInt(t.r,10);i>=0&&T&&i<T.manifestInfo.DVRWindowSize&&null===t.t&&(t.t=Math.max(Math.floor(Date.now()/1e3)-T.manifestInfo.DVRWindowSize,T.manifestInfo.availableFrom.getTime()/1e3+T.start)+i),e.fragS=parseFloat(t.s),e.fragT=parseFloat(t.t)}return e}function Q(t,e){var i=void 0,n=NaN;if(t)n=T?T.start:n;else{var o=X();n=o?isNaN(o.fragS)?o.fragT:o.fragS:0}if(S)!isNaN(n)&&T&&((i=n-T.manifestInfo.availableFrom.getTime()/1e3)>y||i<(isNaN(e)?NaN:e-T.manifestInfo.DVRWindowSize))&&(i=null),i=i||y;else if(T)if(!isNaN(n)&&n<Math.max(T.manifestInfo.duration,T.duration)&&n>=0)i=n;else{var r=b[T.id];i=void 0!==r?Math.max(void 0!==r.audio?r.audio:0,void 0!==r.video?r.video:0,T.start):T.start}return i}function Z(){if(null===_){_=setInterval(function(){var t;e.trigger(s.default.WALLCLOCK_TIME_UPDATED,{isDynamic:S,time:new Date}),q()&&B()&&(t=Date.now(),(!I||t>I+d)&&(I=t,lt()))},x.getWallclockTimeUpdateInterval())}}function J(){clearInterval(_),_=null}function $(){if(!B()&&S&&0!==m.getReadyState()){var t=z(),e=function(t){var e=h.getReadOnlyMetricsFor(o.default.VIDEO)||h.getReadOnlyMetricsFor(o.default.AUDIO),i=c.getCurrentDVRInfo(e),n=i?i.range:null,r=void 0;if(!n)return NaN;if(t>n.end)r=Math.max(n.end-2*T.manifestInfo.minBufferTime,n.start);else{if(!(t+.25<n.start))return t;r=n.start}return r}(t);!isNaN(e)&&e!==t&&H(e)}}function tt(t){if(!t.error){var e=g.convertDataToRepresentationInfo(t.currentRepresentation).mediaInfo.streamInfo;T.id===e.id&&(T=e,$())}}function et(){e.trigger(s.default.CAN_PLAY)}function it(){n.info("Native video element event: play"),$(),Z(),e.trigger(s.default.PLAYBACK_STARTED,{startTime:G()})}function nt(){n.info("Native video element event: waiting"),e.trigger(s.default.PLAYBACK_WAITING,{playingTime:G()})}function ot(){n.info("Native video element event: playing"),e.trigger(s.default.PLAYBACK_PLAYING,{playingTime:G()})}function rt(){n.info("Native video element event: pause"),e.trigger(s.default.PLAYBACK_PAUSED,{ended:V()})}function at(){var t=G();n.info("Seeking to: "+t),Z(),e.trigger(s.default.PLAYBACK_SEEKING,{seekTime:t})}function st(){n.info("Native video element event: seeked"),e.trigger(s.default.PLAYBACK_SEEKED),m.addEventListener("seeking",at)}function lt(){T&&e.trigger(s.default.PLAYBACK_TIME_UPDATED,{timeToEnd:P(),time:G()})}function ut(){e.trigger(s.default.PLAYBACK_PROGRESS)}function dt(){var t=Y();n.info("Native video element event: ratechange: ",t),e.trigger(s.default.PLAYBACK_RATE_CHANGED,{playbackRate:t})}function ht(){n.info("Native video element event: loadedmetadata"),e.trigger(s.default.PLAYBACK_METADATA_LOADED),Z()}function ct(){n.info("Native video element event: ended"),U(),J(),e.trigger(s.default.PLAYBACK_ENDED,{isLast:l.getActiveStreamInfo().isLast})}function ft(t){_&&t.isLast&&(n.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),m.setCurrentTime(L()),U(),J())}function pt(t){var i=t.target||t.srcElement;e.trigger(s.default.PLAYBACK_ERROR,{error:i.error})}function gt(){S&&x.getLowLatencyEnabled()&&x.getCatchUpPlaybackRate()>0&&!B()&&!j()&&(x.getCatchUpPlaybackRate()>0&&G()>0&&Math.abs(W()-x.getLiveDelay())>x.getLowLatencyMinDrift()?function(){if(m){var t=x.getCatchUpPlaybackRate(),e=x.getLiveDelay(),i=W()-e,r=5*i,a=2*t/(1+Math.pow(Math.E,-r)),s=1-t+a;if(D)(function(){var t=null;return l.getActiveStreamProcessors().forEach(function(e){var i=e.getBufferLevel();t=null===t?i:Math.min(t,i)}),t})()>e/2?D=!1:i>0&&(s=1);Math.abs(m.getPlaybackRate()-s)>R&&m.setPlaybackRate(s),x.getLowLatencyMaxDriftBeforeSeeking()>0&&!O&&i>x.getLowLatencyMaxDriftBeforeSeeking()?(n.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),O=!0,u=h.getReadOnlyMetricsFor(o.default.VIDEO)||h.getReadOnlyMetricsFor(o.default.AUDIO),H(((d=c.getCurrentDVRInfo(u))?d.range:null).end-x.getLiveDelay(),!0,!1)):O=!1}var u,d}():mt())}function mt(){m&&m.setPlaybackRate(1)}function vt(t){var e,i=void 0,n=t.bufferedRanges;if(n&&n.length&&(!b[T.id]||!0!==b[T.id].started)){var r=t.sender.getType();void 0===w[T.id]&&(w[T.id]=[]),w[T.id][r]=n,void 0===b[T.id]&&(b[T.id]=[],b[T.id].started=!1),void 0===b[T.id][r]&&(b[T.id][r]=Math.max(n.start(0),T.start));var a=l.isTrackTypePresent(o.default.VIDEO),s=l.isTrackTypePresent(o.default.AUDIO);e=Q(!1),s&&a?isNaN(b[T.id].audio)||isNaN(b[T.id].video)||(b[T.id].audio<b[T.id].video?(i=b[T.id].video>e?b[T.id].video:e,n=w[T.id].audio):(i=b[T.id].audio>e?b[T.id].audio:e,n=w[T.id].video),function(t,e){if(e&&e.length>0)for(var i=0,n=e.length;i<n;i++)if(t>=e.start(i)&&t<e.end(i))return!0;return!1}(i,n)&&(j()||M||0===i||H(i,!0,!0),b[T.id].started=!0)):b[T.id][r]&&(i=b[T.id][r]>e?b[T.id][r]:e,j()||M||H(i,!1,!0),b[T.id].started=!0)}}function yt(t){if(!1===t.stream&&x.getLowLatencyEnabled()&&!isNaN(t.request.duration)){var e=1.2*t.request.duration;e>x.getLiveDelay()&&(n.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",e.toFixed(2)),x.setLiveDelay(e))}}function _t(t){t.streamInfo.id===T.id&&(x.getLowLatencyEnabled()?t.state!==r.default.BUFFER_EMPTY||j()||D||(D=!0,mt()):m.setStallState(t.mediaType,t.state===r.default.BUFFER_EMPTY))}function bt(t){e.trigger(s.default.PLAYBACK_STALLED,{e:t})}return i={initialize:function(t,i){T=t,m.addEventListener("canplay",et),m.addEventListener("play",it),m.addEventListener("waiting",nt),m.addEventListener("playing",ot),m.addEventListener("pause",rt),m.addEventListener("error",pt),m.addEventListener("seeking",at),m.addEventListener("seeked",st),m.addEventListener("timeupdate",lt),m.addEventListener("progress",ut),m.addEventListener("ratechange",dt),m.addEventListener("loadedmetadata",ht),m.addEventListener("stalled",bt),m.addEventListener("ended",ct),S=T.manifestInfo.isDynamic,O=!1,D=!1,y=T.start,M=i;var n="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",o=/safari/.test(n)&&!/chrome/.test(n);R=o?.25:.02,e.on(s.default.DATA_UPDATE_COMPLETED,tt,this),e.on(s.default.BYTES_APPENDED_END_FRAGMENT,vt,this),e.on(s.default.LOADING_PROGRESS,yt,this),e.on(s.default.BUFFER_LEVEL_STATE_CHANGED,_t,this),e.on(s.default.PERIOD_SWITCH_STARTED,k,this),e.on(s.default.PLAYBACK_PROGRESS,gt,this),e.on(s.default.PLAYBACK_TIME_UPDATED,gt,this),e.on(s.default.PLAYBACK_ENDED,ft,this),C&&(C=!1,F())},setConfig:function(t){t&&(t.streamController&&(l=t.streamController),t.metricsModel&&(h=t.metricsModel),t.dashMetrics&&(c=t.dashMetrics),t.manifestModel&&(f=t.manifestModel),t.dashManifestModel&&(p=t.dashManifestModel),t.mediaPlayerModel&&(x=t.mediaPlayerModel),t.adapter&&(g=t.adapter),t.videoModel&&(m=t.videoModel),t.timelineConverter&&(v=t.timelineConverter),t.uriFragmentModel&&(N=t.uriFragmentModel))},getStartTimeFromUriParameters:X,getStreamStartTime:Q,getTimeToStreamEnd:P,getTime:G,getNormalizedTime:z,getPlaybackRate:Y,getPlayedRanges:function(){return T&&m?m.getPlayedRanges():null},getEnded:V,getIsDynamic:q,getStreamController:function(){return l},setLiveStartTime:function(t){y=t},getLiveStartTime:function(){return y},computeLiveDelay:function(t,e){var i=p.getMpd(f.getValue()),n=void 0,r=void 0;if(n=x.getUseSuggestedPresentationDelay()&&i.hasOwnProperty(o.default.SUGGESTED_PRESENTATION_DELAY)?i.suggestedPresentationDelay:x.getLowLatencyEnabled()?0:x.getLiveDelay()?x.getLiveDelay():isNaN(t)?2*T.manifestInfo.minBufferTime:t*x.getLiveDelayFragmentCount(),i.availabilityStartTime&&(A=i.availabilityStartTime.getTime()),e>0){var a=Math.max(e-10,e/2);r=Math.min(n,a)}else r=n;return E=r,r},getLiveDelay:function(){return E},getCurrentLiveLatency:W,play:F,isPaused:B,pause:U,isSeeking:j,seek:H,reset:K},n=(0,u.default)(t).getInstance().getLogger(i),K(),i}h.__dashjs_factory_name="PlaybackController",e.default=l.default.getSingletonFactory(h),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};var o,r=i(50),a=(o=r)&&o.__esModule?o:{default:o},s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a["default"]),e}();e.default=s,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=i(10),a=n(i(185)),s=n(i(42)),l=n(i(107)),u=n(i(0)),d=n(i(3)),h=n(i(69)),c=n(i(198)),f=n(i(68)),p=n(i(109)),g=n(i(2)),m=n(i(4)),v=n(i(6)),y=n(i(9));function _(){var t=this.context,e=(0,g.default)(t).getInstance(),i=!1,n=void 0,u=void 0,_=void 0,b=void 0,E=void 0,w=void 0,T=void 0,S=void 0,x=void 0,C=void 0,I=void 0,A=void 0,M=void 0,O=void 0,D=void 0,R=void 0,N=void 0,k=void 0,P=void 0,L=void 0,F=void 0,B=void 0,U=void 0,j=void 0,H=void 0,G=void 0,z=void 0;function Y(){M=null,D=NaN,R=[],P=null,O=!1,I=[],S=null}function V(t){var e=t.chunk;e.mediaInfo.embeddedCaptions&&X(e.bytes,e)}function q(){F=[],(A=(0,h.default)(t).getInstance()).setConfig({videoModel:N}),A.initialize(),_=(0,s.default)(t).getInstance(),L=null,!1,B=0,H=[],j=[],U=null,i=!0,G=(0,c.default)(t).getInstance();var n=k.getActiveStreamProcessors();for(var o in n)if("video"===n[o].getType()){z=n[o].getRepresentationInfo().MSETimeOffset;break}e.on(m.default.VIDEO_CHUNK_RECEIVED,V,this)}function W(t){L=t}function K(t,e){var i,n,r=new a.default,s={subtitle:"subtitles",caption:"captions"};r.captionData=t,r.lang=e.lang,r.labels=e.labels,r.id=e.id?e.id:e.index,r.index=e.index,r.isTTML=(i=!1,e.codec&&e.codec.search(o.default.STPP)>=0&&(i=!0),e.mimeType&&e.mimeType.search(o.default.TTML)>=0&&(i=!0),i),r.defaultTrack=function(t){var e=!1;F.length>1&&t.isEmbedded?e=t.id&&t.id===o.default.CC1:1===F.length?t.id&&"string"==typeof t.id&&"CC"===t.id.substring(0,2)&&(e=!0):0===F.length&&(e=t.index===I[0].index);return e}(e),r.isFragmented=!E.getIsTextTrack(e.mimeType),r.isEmbedded=!!e.isEmbedded,r.kind=n=(n=e.roles.length>0?s[e.roles[0]]:s.caption)===s.caption||n===s.subtitle?n:s.caption,r.roles=e.roles,r.accessibility=e.accessibility;var l=(I?I.length:0)+F.length;A.addTextTrack(r,l)}function X(t,e){var i=void 0,n=void 0,a=void 0,s=void 0,l=void 0,d=void 0,h=void 0,c=e.mediaInfo,g=c.type,m=c.mimeType,E=c.codec||m;if(E){if(g===o.default.FRAGMENTED_TEXT)if(O)if(n=(d=_.getSamplesInfo(t)).sampleList,null===P&&n.length>0&&(P=n[0].cts-e.start*D),E.search(o.default.STPP)>=0)for(S=null!==S?S:Q(E),a=0;a<n.length;a++){var T=(W=n[a]).cts,x=T-P;this.buffered.add(x/D,(x+W.duration)/D);var C=new DataView(t,W.offset,W.subSizes[0]);h=f.default.Utils.dataViewToString(C,o.default.UTF8);var I=[],R=W.offset+W.subSizes[0];for(s=1;s<W.subSizes.length;s++){var k=new Uint8Array(t,R,W.subSizes[s]),Y=String.fromCharCode.apply(null,k);I.push(Y),R+=W.subSizes[s]}try{var V=w.getValue().ttmlTimeIsRelative?T/D:0;i=S.parse(h,V,T/D,(T+W.duration)/D,I),A.addCaptions(L,P/D,i)}catch(t){M.removeExecutedRequestsBeforeTime(),this.remove(),u.error("TTML parser error: "+t.message)}}else{var q=[];for(a=0;a<n.length;a++){var W;(W=n[a]).cts-=P,this.buffered.add(W.cts/D,(W.cts+W.duration)/D);var X=t.slice(W.offset,W.offset+W.size),Z=f.default.parseBuffer(X);for(s=0;s<Z.boxes.length;s++){var J=Z.boxes[s];if(u.debug("VTT box1: "+J.type),"vtte"!==J.type&&"vttc"===J.type)for(u.debug("VTT vttc boxes.length = "+J.boxes.length),l=0;l<J.boxes.length;l++){var $=J.boxes[l];if(u.debug("VTT box2: "+$.type),"payl"===$.type){var tt=$.cue_text;u.debug("VTT cue_text = "+tt);var et=W.cts/D,it=(W.cts+W.duration)/D;q.push({start:et,end:it,data:tt,styles:{}}),u.debug("VTT "+et+"-"+it+" : "+tt)}}}}q.length>0&&A.addCaptions(L,0,q)}else O=!0,D=_.getMediaTimescaleFromMoov(t);else if(g===o.default.TEXT){C=new DataView(t,0,t.byteLength);h=f.default.Utils.dataViewToString(C,o.default.UTF8);try{i=Q(E).parse(h,0),A.addCaptions(A.getCurrentTrackIdx(),0,i)}catch(t){b.timedTextError(t,"parse",h),b.error(new v.default(y.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,y.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+t.message,h))}}else if(g===o.default.VIDEO)if(e.segmentType===r.HTTPRequest.INIT_SEGMENT_TYPE){if(0===B)for(B=_.getMediaTimescaleFromMoov(t),a=0;a<F.length;a++)K(null,F[a])}else{if(0===B)return void u.warn("CEA-608: No timescale for embeddedTextTrack yet");var nt=function(t,e){return function(t,i,n){var o=null;o=N.getTTMLRenderingDiv()?G.createHTMLCaptionsFromScreen(N.getElement(),t,i,n):[{start:t,end:i,data:n.getDisplayText(),styles:{}}],o&&A.addCaptions(e,0,o)}},ot=(d=_.getSamplesInfo(t)).lastSequenceNumber;if(!H[0]&&!H[1]){var rt=void 0,at=void 0;for(a=0;a<F.length;a++){if(F[a].id===o.default.CC1?(0,at=A.getTrackIdxForId(o.default.CC1)):F[a].id===o.default.CC3&&(1,at=A.getTrackIdxForId(o.default.CC3)),-1===at)return void u.warn("CEA-608: data before track is ready.");rt=nt(0,at),H[a]=new p.default.Cea608Parser(a+1,{newCue:rt},null)}}if(B&&-1==j.indexOf(ot)){if(null!==U&&ot!==U+d.numSequences)for(a=0;a<H.length;a++)H[a]&&H[a].reset();for(var st=function(t,e){if(0===e.length)return null;for(var i={splits:[],fields:[[],[]]},n=new DataView(t),o=0;o<e.length;o++)for(var r=e[o],a=p.default.findCea608Nalus(n,r.offset,r.size),s=null,l=0,u=0;u<a.length;u++)for(var d=p.default.extractCea608DataFromRange(n,a[u]),h=0;h<2;h++)d[h].length>0&&(r.cts!==s?l=0:l+=1,i.fields[h].push([r.cts+z*B,d[h],l]),s=r.cts);return i.fields.forEach(function(t){t.sort(function(t,e){return t[0]===e[0]?t[2]-e[2]:t[0]-e[0]})}),i}(t,d.sampleList),lt=0;lt<H.length;lt++){var ut=st.fields[lt],dt=H[lt];if(dt)for(a=0;a<ut.length;a++)dt.addData(ut[a][0]/B,ut[a][1])}U=ot,j.push(ot)}}}else u.error("No text type defined")}function Q(t){var e=void 0;return t.search(o.default.VTT)>=0?e=x:(t.search(o.default.TTML)>=0||t.search(o.default.STPP)>=0)&&(e=C),e}return n={initialize:function(e,r){i||q(),A.setConfig({videoModel:N}),A.initialize(),_||(_=(0,s.default)(t).getInstance()),function(e,i){var r=!E.getIsTextTrack(e);if(i){if(I=I.concat(i.getMediaInfoArr()),r){M=i.getFragmentModel(),n.buffered=(0,l.default)(t).create(),R=T.getTracksFor(o.default.FRAGMENTED_TEXT,k.getActiveStreamInfo());for(var a=T.getCurrentTrackFor(o.default.FRAGMENTED_TEXT,k.getActiveStreamInfo()),s=0;s<R.length;s++)if(R[s]===a){W(s);break}}for(s=0;s<I.length;s++)K(null,I[s])}}(e,r)},append:X,abort:function(){A.deleteAllTextTracks(),_=null,I=[],M=null,O=!1,R=[]},addEmbeddedTrack:function(t){if(i||q(),t)if(t.id===o.default.CC1||t.id===o.default.CC3){for(var e=0;e<F.length;e++)if(F[e].id===t.id)return;F.push(t)}else u.warn("Embedded track "+t.id+" not supported!")},resetEmbedded:function(){e.off(m.default.VIDEO_CHUNK_RECEIVED,V,this),A&&A.deleteAllTextTracks(),i=!1,F=[],H=[null,null],j=[],U=null},setConfig:function(t){t&&(t.errHandler&&(b=t.errHandler),t.dashManifestModel&&(E=t.dashManifestModel),t.manifestModel&&(w=t.manifestModel),t.mediaController&&(T=t.mediaController),t.videoModel&&(N=t.videoModel),t.streamController&&(k=t.streamController),t.textTracks&&(A=t.textTracks),t.vttParser&&(x=t.vttParser),t.ttmlParser&&(C=t.ttmlParser))},getConfig:function(){return{fragmentModel:M,fragmentedTracks:R,videoModel:N}},setCurrentFragmentedTrackIdx:W,remove:function(t,e){void 0===t&&t===e&&(t=this.buffered.start(0),e=this.buffered.end(this.buffered.length-1)),this.buffered.remove(t,e)},reset:function(){Y(),k=null,N=null,A=null}},u=(0,d.default)(t).getInstance().getLogger(n),Y(),n}_.__dashjs_factory_name="TextSourceBuffer",e.default=u.default.getSingletonFactory(_),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1},t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(187)),r=n(i(0));function a(){var t=void 0;function e(e){var n=[];if(!e||!t||"function"!=typeof t.fetchAll)return n;for(var o=t.fetchAll(e),r=void 0,a=0,s=o.length;a<s;a++)(r=i(o[a]))&&n.push(r);return n}function i(t){if(!t)return null;var e=new o.default(t);return t.hasOwnProperty("_incomplete")&&(e.isComplete=!t._incomplete),e}return{getBox:function(e){return e&&t&&t.boxes&&0!==t.boxes.length&&"function"==typeof t.fetch?i(t.fetch(e)):null},getBoxes:e,setData:function(e){t=e},getLastBox:function(){if(!t||!t.boxes||!t.boxes.length)return null;var i=e(t.boxes[t.boxes.length-1].type);return i.length>0?i[i.length-1]:null}}}a.__dashjs_factory_name="IsoFile",e.default=r.default.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var i=0;i<e.boxes.length;i++)this.boxes.push(new t(e.boxes[i]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(i=0;i<e.references.length;i++){var n={reference_type:e.references[i].reference_type,referenced_size:e.references[i].referenced_size,subsegment_duration:e.references[i].subsegment_duration};this.references.push(n)}}break;case"emsg":this.id=e.id,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];i=0;for(var o=e.samples.length;i<o;i++){var r={sample_size:e.samples[i].sample_size,sample_duration:e.samples[i].sample_duration,sample_composition_time_offset:e.samples[i].sample_composition_time_offset};this.samples.push(r)}}}}return n(t,[{key:"getChildBox",value:function(t){for(var e=0;e<this.boxes.length;e++)if(this.boxes[e].type===t)return this.boxes[e]}},{key:"getChildBoxes",value:function(t){for(var e=[],i=0;i<this.boxes.length;i++)this.boxes[i].type===t&&e.push(this.boxes[i]);return e}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lastCompletedOffset=e,this.found=i,this.size=n},t.exports=e.default},function(t,e,i){!function(t,e,i,n){t.generateISD=function(t,e,i){var n=new a(t),o={};for(var s in t.head.layout.regions){var l=r(t,e,t.head.layout.regions[s],t.body,null,"",t.head.layout.regions[s],i,o);null!==l&&n.contents.push(l.element)}return n};var o=[i.byName.color.qname,i.byName.textCombine.qname,i.byName.textDecoration.qname,i.byName.textEmphasis.qname,i.byName.textOutline.qname,i.byName.textShadow.qname];function r(t,e,a,u,d,h,c,f,p){if(e<c.begin||e>=c.end)return null;var g="regionID"in c&&""!==c.regionID?c.regionID:h;if(null!==d&&g!==a.id&&(!("contents"in c)||"contents"in c&&0===c.contents.length||""!==g))return null;var m=new s(c);for(var v in c.sets)e<c.sets[v].begin||e>=c.sets[v].end||(m.styleAttrs[c.sets[v].qname]=c.sets[v].value);var y,_={};for(var b in m.styleAttrs)if(_[b]=!0,b===i.byName.writingMode.qname&&!(i.byName.direction.qname in m.styleAttrs)){var E=m.styleAttrs[b];"lrtb"===E||"lr"===E?m.styleAttrs[i.byName.direction.qname]="ltr":"rltb"!==E&&"rl"!==E||(m.styleAttrs[i.byName.direction.qname]="rtl")}if(null!==d)for(var w in i.all){var T=i.all[w];if(T.qname===i.byName.textDecoration.qname){var S=d.styleAttrs[T.qname],x=m.styleAttrs[T.qname],C=[];void 0===x?C=S:-1===x.indexOf("none")?((-1===x.indexOf("noUnderline")&&-1!==S.indexOf("underline")||-1!==x.indexOf("underline"))&&C.push("underline"),(-1===x.indexOf("noLineThrough")&&-1!==S.indexOf("lineThrough")||-1!==x.indexOf("lineThrough"))&&C.push("lineThrough"),(-1===x.indexOf("noOverline")&&-1!==S.indexOf("overline")||-1!==x.indexOf("overline"))&&C.push("overline")):C.push("none"),m.styleAttrs[T.qname]=C}else if(T.qname!==i.byName.fontSize.qname||T.qname in m.styleAttrs||"span"!==m.kind||"textContainer"!==m.styleAttrs[i.byName.ruby.qname])if(T.qname!==i.byName.fontSize.qname||T.qname in m.styleAttrs||"span"!==m.kind||"text"!==m.styleAttrs[i.byName.ruby.qname])T.inherit&&T.qname in d.styleAttrs&&!(T.qname in m.styleAttrs)&&(m.styleAttrs[T.qname]=d.styleAttrs[T.qname]);else{var I=d.styleAttrs[i.byName.fontSize.qname];"textContainer"===d.styleAttrs[i.byName.ruby.qname]?m.styleAttrs[T.qname]=I:m.styleAttrs[T.qname]=new n.ComputedLength(.5*I.rw,.5*I.rh)}else{var A=d.styleAttrs[i.byName.fontSize.qname];m.styleAttrs[T.qname]=new n.ComputedLength(.5*A.rw,.5*A.rh)}}for(var M in i.all){var O=i.all[M];if(!(O.qname in m.styleAttrs)&&!(O.qname===i.byName.position.qname&&i.byName.origin.qname in m.styleAttrs||O.qname===i.byName.origin.qname&&i.byName.position.qname in m.styleAttrs)){var D=t.head.styling.initials[O.qname]||O.initial;("region"===m.kind||!1===O.inherit&&null!==D)&&(m.styleAttrs[O.qname]=O.parse(D),_[O.qname]=!0)}}for(var R in i.all){var N=i.all[R];if(N.qname in _&&null!==N.compute){var k=N.compute(t,d,m,m.styleAttrs[N.qname],p);null!==k?m.styleAttrs[N.qname]=k:l(f,"Style '"+N.qname+"' on element '"+m.kind+"' cannot be computed")}}if("none"===m.styleAttrs[i.byName.display.qname])return null;for(var P in null===d?y=null===u?[]:[u]:"contents"in c&&(y=c.contents),y){var L=r(t,e,a,u,m,g,y[P],f,p);null!==L&&m.contents.push(L.element)}for(var F in m.styleAttrs){var B=!1;if("span"===m.kind){var U=m.styleAttrs[i.byName.ruby.qname];(B=("container"===U||"textContainer"===U||"baseContainer"===U)&&-1!==o.indexOf(F))||(B="container"!==U&&F===i.byName.rubyAlign.qname),B||(B=!("textContainer"===U||"text"===U)&&F===i.byName.rubyPosition.qname)}if(!B)B=-1===i.byQName[F].applies.indexOf(m.kind);B&&delete m.styleAttrs[F]}if("span"===m.kind&&m.text&&"default"===m.space){var j=m.text.replace(/[\t\r\n ]+/g," ");m.text=j}if("p"===m.kind){var H=[];!function t(e,i){if("contents"in e)for(var n in e.contents)t(e.contents[n],i);else"span"!==e.kind&&"br"!==e.kind||i.push(e)}(m,H);for(var G=0,z="after_br",Y=0;;)if("after_br"===z)G>=H.length||"br"===H[G].kind?(z="before_br",Y=G,G--):("preserve"!==H[G].space&&(H[G].text=H[G].text.replace(/^[\t\r\n ]+/g,"")),H[G].text.length>0?(z="looking_br",G++):H.splice(G,1));else if("before_br"===z)if(G<0||"br"===H[G].kind){if(z="after_br",(G=Y+1)>=H.length)break}else if("preserve"!==H[G].space&&(H[G].text=H[G].text.replace(/[\t\r\n ]+$/g,"")),H[G].text.length>0){if(z="after_br",(G=Y+1)>=H.length)break}else H.splice(G,1),G--;else G>=H.length||"br"===H[G].kind?(z="before_br",Y=G,G--):G++;!function t(e){if("br"===e.kind)return!1;if("text"in e)return 0===e.text.length;if("contents"in e){for(var i=e.contents.length;i--;)t(e.contents[i])&&e.contents.splice(i,1);return 0===e.contents.length}}(m)}return"div"===m.kind&&i.byName.backgroundImage.qname in m.styleAttrs||"br"===m.kind||"image"===m.kind||"contents"in m&&m.contents.length>0||"span"===m.kind&&null!==m.text||"region"===m.kind&&"always"===m.styleAttrs[i.byName.showBackground.qname]?{region_id:g,element:m}:null}function a(t){this.contents=[],this.aspectRatio=t.aspectRatio}function s(t){for(var e in this.kind=t.kind||"region",t.id&&(this.id=t.id),this.styleAttrs={},t.styleAttrs)this.styleAttrs[e]=t.styleAttrs[e];"src"in t&&(this.src=t.src),"type"in t&&(this.type=t.type),"text"in t?this.text=t.text:("region"===this.kind||"contents"in t)&&(this.contents=[]),"space"in t&&(this.space=t.space)}function l(t,e){if(t&&t.error&&t.error(e))throw e}}(e,"undefined"==typeof imscNames?i(51):imscNames,"undefined"==typeof imscStyles?i(70):imscStyles,"undefined"==typeof imscUtils?i(52):imscUtils)},function(t,e,i){!function(t,e,i,n,o){function r(t,e,i,n){var o=n&&"seq"===n.timeContainer,a=0;n&&(a=o&&i?i.end:n.begin),e.begin=e.explicit_begin?e.explicit_begin+a:a;var s=e.begin,l=null;for(var u in e.sets)r(t,e.sets[u],l,e),s="seq"===e.timeContainer?e.sets[u].end:Math.max(s,e.sets[u].end),l=e.sets[u];if("contents"in e)for(var d in e.contents)r(t,e.contents[d],l,e),s="seq"===e.timeContainer?e.contents[d].end:Math.max(s,e.contents[d].end),l=e.contents[d];else s=o?e.begin:Number.POSITIVE_INFINITY;null!==e.explicit_end&&null!==e.explicit_dur?e.end=Math.min(e.begin+e.explicit_dur,a+e.explicit_end):null===e.explicit_end&&null!==e.explicit_dur?e.end=e.begin+e.explicit_dur:null!==e.explicit_end&&null===e.explicit_dur?e.end=a+e.explicit_end:e.end=s,delete e.explicit_begin,delete e.explicit_dur,delete e.explicit_end,t._registerEvent(e)}function a(t){this.node=t}function s(){this.events=[],this.head=new l,this.body=null}function l(){this.styling=new u,this.layout=new c}function u(){this.styles={},this.initials={}}function d(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function h(){this.styleAttrs=null}function c(){this.regions={}}function f(t,e){p.call(this,"image"),this.src=t,this.type=e}function p(t){this.kind=t}function g(t){this.id=t}function m(t){this.regionID=t}function v(t){this.styleAttrs=t}function y(t){this.sets=t}function _(t){this.contents=t}function b(t,e,i){this.explicit_begin=t,this.explicit_end=e,this.explicit_dur=i}function E(){p.call(this,"body")}function w(){p.call(this,"div")}function T(){p.call(this,"p")}function S(){p.call(this,"span")}function x(){p.call(this,"span")}function C(){p.call(this,"br")}function I(){}function A(){}function M(t){return t&&"xml:id"in t.attributes&&t.attributes["xml:id"].value||null}function O(t){return t&&"style"in t.attributes?t.attributes.style.value.split(" "):[]}function D(t,e){var i={};if(null!==t)for(var o in t.attributes){var r=t.attributes[o].uri+" "+t.attributes[o].local,a=n.byQName[r];if(void 0!==a){var s=a.parse(t.attributes[o].value);null!==s?(i[r]=s,a===n.byName.zIndex&&F(e,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):B(e,"Cannot parse styling attribute "+r+" --\x3e "+t.attributes[o].value)}}return i}function R(t,e,i){for(var n in t.attributes)if(t.attributes[n].uri===e&&t.attributes[n].local===i)return t.attributes[n].value;return null}function N(t,e,i){var n,o=null;return null!==(n=/^(\d+(?:\.\d+)?)f$/.exec(i))?null!==e&&(o=parseFloat(n[1])/e):null!==(n=/^(\d+(?:\.\d+)?)t$/.exec(i))?null!==t&&(o=parseFloat(n[1])/t):null!==(n=/^(\d+(?:\.\d+)?)ms$/.exec(i))?o=parseFloat(n[1])/1e3:null!==(n=/^(\d+(?:\.\d+)?)s$/.exec(i))?o=parseFloat(n[1]):null!==(n=/^(\d+(?:\.\d+)?)h$/.exec(i))?o=3600*parseFloat(n[1]):null!==(n=/^(\d+(?:\.\d+)?)m$/.exec(i))?o=60*parseFloat(n[1]):null!==(n=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(i))?o=3600*parseInt(n[1])+60*parseInt(n[2])+parseFloat(n[3]):null!==(n=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(i))&&null!==e&&(o=3600*parseInt(n[1])+60*parseInt(n[2])+parseInt(n[3])+(null===n[4]?0:parseInt(n[4])/e)),o}function k(t,e,i){for(;e.styleRefs.length>0;){var n=e.styleRefs.pop();n in t.styles?(k(t,t.styles[n],i),L(t.styles[n].styleAttrs,e.styleAttrs)):B(i,"Non-existant style id referenced")}}function P(t,e,i,n){for(var o=e.length-1;o>=0;o--){var r=e[o];r in t.styles?L(t.styles[r].styleAttrs,i):B(n,"Non-existant style id referenced")}}function L(t,e){for(var i in t)i in e||(e[i]=t[i])}function F(t,e){if(t&&t.warn&&t.warn(e))throw e}function B(t,e){if(t&&t.error&&t.error(e))throw e}function U(t,e){throw t&&t.fatal&&t.fatal(e),e}function j(t,e){for(var i,n=0,o=t.length-1;n<=o;){var r=t[i=Math.floor((n+o)/2)];if(r<e)n=i+1;else{if(!(r>e))return{found:!0,index:i};o=i-1}}return{found:!1,index:n}}t.fromXML=function(t,o,p){var g=e.parser(!0,{xmlns:!0}),m=[],v=[],y=[],_=0,b=null;g.onclosetag=function(t){if(m[0]instanceof u)for(var e in m[0].styles)k(m[0],m[0].styles[e],o);else if(m[0]instanceof T||m[0]instanceof S){if(m[0].contents.length>1){var n,r=[m[0].contents[0]];for(n=1;n<m[0].contents.length;n++)m[0].contents[n]instanceof x&&r[r.length-1]instanceof x?r[r.length-1].text+=m[0].contents[n].text:r.push(m[0].contents[n]);m[0].contents=r}m[0]instanceof S&&1===m[0].contents.length&&m[0].contents[0]instanceof x&&(m[0].text=m[0].contents[0].text,delete m[0].contents)}else m[0]instanceof a&&(m[0].node.uri===i.ns_tt&&"metadata"===m[0].node.local?_--:_>0&&p&&"onCloseTag"in p&&p.onCloseTag());y.shift(),v.shift(),m.shift()},g.ontext=function(t){if(void 0===m[0]);else if(m[0]instanceof S||m[0]instanceof T){if(m[0]instanceof S){var e=m[0].styleAttrs[n.byName.ruby.qname];if("container"===e||"textContainer"===e||"baseContainer"===e)return}var i=new x;i.initFromText(b,m[0],t,y[0],o),m[0].contents.push(i)}else m[0]instanceof a&&_>0&&p&&"onText"in p&&p.onText(t)},g.onopentag=function(t){var e=t.attributes["xml:space"];e?y.unshift(e.value):0===y.length?y.unshift("default"):y.unshift(y[0]);var r=t.attributes["xml:lang"];if(r?v.unshift(r.value):0===v.length?v.unshift(""):v.unshift(v[0]),t.uri===i.ns_tt)if("tt"===t.local)null!==b&&U(o,"Two <tt> elements at ("+this.line+","+this.column+")"),(b=new s).initFromNode(t,o),m.unshift(b);else if("head"===t.local)m[0]instanceof s||U(o,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),m.unshift(b.head);else if("styling"===t.local)m[0]instanceof l||U(o,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),m.unshift(b.head.styling);else if("style"===t.local){var g;m[0]instanceof u?((g=new d).initFromNode(t,o),g.id?b.head.styling.styles[g.id]=g:B(o,"<style> element missing @id attribute"),m.unshift(g)):m[0]instanceof I?((g=new d).initFromNode(t,o),L(g.styleAttrs,m[0].styleAttrs),m.unshift(g)):U(o,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("initial"===t.local){var x;if(m[0]instanceof u){for(var M in(x=new h).initFromNode(t,o),x.styleAttrs)b.head.styling.initials[M]=x.styleAttrs[M];m.unshift(x)}else U(o,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if("layout"===t.local)m[0]instanceof l||U(o,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),m.unshift(b.head.layout);else if("region"===t.local){m[0]instanceof c||U(o,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var O=new I;O.initFromNode(b,t,o),!O.id||O.id in b.head.layout.regions?B(o,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):b.head.layout.regions[O.id]=O,m.unshift(O)}else if("body"===t.local){m[0]instanceof s||U(o,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==b.body&&U(o,"Second <body> element at "+this.line+","+this.column+")");var D=new E;D.initFromNode(b,t,o),b.body=D,m.unshift(D)}else if("div"===t.local){m[0]instanceof w||m[0]instanceof E||U(o,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var R=new w;R.initFromNode(b,m[0],t,o);var N=R.styleAttrs[n.byName.backgroundImage.qname];N&&(R.contents.push(new f(N)),delete R.styleAttrs[n.byName.backgroundImage.qname]),m[0].contents.push(R),m.unshift(R)}else if("image"===t.local){m[0]instanceof w||U(o,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var k=new f;k.initFromNode(b,m[0],t,o),m[0].contents.push(k),m.unshift(k)}else if("p"===t.local){m[0]instanceof w||U(o,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var P=new T;P.initFromNode(b,m[0],t,o),m[0].contents.push(P),m.unshift(P)}else if("span"===t.local){m[0]instanceof S||m[0]instanceof T||U(o,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var F=new S;F.initFromNode(b,m[0],t,y[0],o),m[0].contents.push(F),m.unshift(F)}else if("br"===t.local){m[0]instanceof S||m[0]instanceof T||U(o,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var j=new C;j.initFromNode(b,m[0],t,o),m[0].contents.push(j),m.unshift(j)}else if("set"===t.local){m[0]instanceof S||m[0]instanceof T||m[0]instanceof w||m[0]instanceof E||m[0]instanceof I||m[0]instanceof C||U(o,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var H=new A;H.initFromNode(b,m[0],t,o),m[0].sets.push(H),m.unshift(H)}else m.unshift(new a(t));else m.unshift(new a(t));if(m[0]instanceof a)if(t.uri===i.ns_tt&&"metadata"===t.local)_++;else if(_>0&&p&&"onOpenTag"in p){var G=[];for(var z in t.attributes)G[t.attributes[z].uri+" "+t.attributes[z].local]={uri:t.attributes[z].uri,local:t.attributes[z].local,value:t.attributes[z].value};p.onOpenTag(t.uri,t.local,G)}},g.write(t).close(),delete b.head.styling.styles;var M=!1;for(var O in b.head.layout.regions){M=!0;break}if(!M){var D=I.prototype.createDefaultRegion();b.head.layout.regions[D.id]=D}for(var R in b.head.layout.regions)r(b,b.head.layout.regions[R],null,null);return b.body&&r(b,b.body,null,null),b.body&&function t(e){if(!("contents"in e))return;var i="styleAttrs"in e?e.styleAttrs[n.byName.ruby.qname]:null;var o="span"===e.kind&&("container"===i||"textContainer"===i||"textContainer"===i);for(var r=e.contents.length-1;r>=0;r--)!o||"styleAttrs"in e.contents[r]&&n.byName.ruby.qname in e.contents[r].styleAttrs?t(e.contents[r]):delete e.contents[r]}(b.body),b},s.prototype.initFromNode=function(t,e){var n=function(t,e){var n=R(t,i.ns_ttp,"cellResolution"),o=15,r=32;if(null!==n){var a=/(\d+) (\d+)/.exec(n);null!==a?(r=parseInt(a[1]),o=parseInt(a[2])):F(e,"Malformed cellResolution value (using initial value instead)")}return{w:r,h:o}}(t,e);this.cellLength={h:new o.ComputedLength(0,1/n.h),w:new o.ComputedLength(1/n.w,0)};var r=function(t,e){var n,o=R(t,i.ns_ttp,"frameRate"),r=30;if(null!==o){null!==(n=/(\d+)/.exec(o))?r=parseInt(n[1]):F(e,"Malformed frame rate attribute (using initial value instead)")}var a=R(t,i.ns_ttp,"frameRateMultiplier"),s=1;if(null!==a){null!==(n=/(\d+) (\d+)/.exec(a))?s=parseInt(n[1])/parseInt(n[2]):F(e,"Malformed frame rate multiplier attribute (using initial value instead)")}var l=s*r,u=1,d=R(t,i.ns_ttp,"tickRate");if(null===d)null!==o&&(u=l);else{null!==(n=/(\d+)/.exec(d))?u=parseInt(n[1]):F(e,"Malformed tick rate attribute (using initial value instead)")}return{effectiveFrameRate:l,tickRate:u}}(t,e);this.effectiveFrameRate=r.effectiveFrameRate,this.tickRate=r.tickRate,this.aspectRatio=function(t,e){var n=R(t,i.ns_ittp,"aspectRatio");null===n&&(n=R(t,i.ns_ttp,"displayAspectRatio"));var o=null;if(null!==n){var r=/(\d+)\s+(\d+)/.exec(n);if(null!==r){var a=parseInt(r[1]),s=parseInt(r[2]);0!==a&&0!==s?o=a/s:B(e,"Illegal aspectRatio values (ignoring)")}else B(e,"Malformed aspectRatio attribute (ignoring)")}return o}(t,e);var a=R(t,i.ns_ttp,"timeBase");null!==a&&"media"!==a&&U(e,"Unsupported time base");var s=function(t,e){var n=R(t,i.ns_tts,"extent");if(null===n)return null;var r=n.split(" ");if(2!==r.length)return F(e,"Malformed extent (ignoring)"),null;var a=o.parseLength(r[0]),s=o.parseLength(r[1]);if(!s||!a)return F(e,"Malformed extent values (ignoring)"),null;return{h:s,w:a}}(t,e);null===s?this.pxLength={h:null,w:null}:("px"===s.h.unit&&"px"===s.w.unit||U(e,"Extent on TT must be in px or absent"),this.pxLength={h:new o.ComputedLength(0,1/s.h.value),w:new o.ComputedLength(1/s.w.value,0)}),this.dimensions={h:new o.ComputedLength(0,1),w:new o.ComputedLength(1,0)}},s.prototype._registerEvent=function(t){if(!(t.end<=t.begin)){var e=j(this.events,t.begin);if(e.found||this.events.splice(e.index,0,t.begin),t.end!==Number.POSITIVE_INFINITY){var i=j(this.events,t.end);i.found||this.events.splice(i.index,0,t.end)}}},s.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},s.prototype.getMediaTimeEvents=function(){return this.events},d.prototype.initFromNode=function(t,e){this.id=M(t),this.styleAttrs=D(t,e),this.styleRefs=O(t)},h.prototype.initFromNode=function(t,e){for(var n in this.styleAttrs={},t.attributes)if(t.attributes[n].uri===i.ns_itts||t.attributes[n].uri===i.ns_ebutts||t.attributes[n].uri===i.ns_tts){var o=t.attributes[n].uri+" "+t.attributes[n].local;this.styleAttrs[o]=t.attributes[n].value}},f.prototype.initFromNode=function(t,e,i,n){this.src="src"in i.attributes?i.attributes.src.value:null,this.src||B(n,"Invalid image@src attribute"),this.type="type"in i.attributes?i.attributes.type.value:null,this.type||B(n,"Invalid image@type attribute"),v.prototype.initFromNode.call(this,t,e,i,n),b.prototype.initFromNode.call(this,t,e,i,n),y.prototype.initFromNode.call(this,t,e,i,n),m.prototype.initFromNode.call(this,t,e,i,n)},g.prototype.initFromNode=function(t,e,i,n){this.id=M(i)},m.prototype.initFromNode=function(t,e,i,n){this.regionID=function(t){return t&&"region"in t.attributes?t.attributes.region.value:""}(i)},v.prototype.initFromNode=function(t,e,i,n){this.styleAttrs=D(i,n),null!==t.head&&null!==t.head.styling&&P(t.head.styling,O(i),this.styleAttrs,n)},y.prototype.initFromNode=function(t,e,i,n){this.sets=[]},_.prototype.initFromNode=function(t,e,i,n){this.contents=[]},b.prototype.initFromNode=function(t,e,i,n){var o=function(t,e,i,n){var o=null;i&&"begin"in i.attributes&&null===(o=N(t.tickRate,t.effectiveFrameRate,i.attributes.begin.value))&&F(n,"Malformed begin value "+i.attributes.begin.value+" (using 0)");var r=null;i&&"dur"in i.attributes&&null===(r=N(t.tickRate,t.effectiveFrameRate,i.attributes.dur.value))&&F(n,"Malformed dur value "+i.attributes.dur.value+" (ignoring)");var a=null;i&&"end"in i.attributes&&null===(a=N(t.tickRate,t.effectiveFrameRate,i.attributes.end.value))&&F(n,"Malformed end value (ignoring)");return{explicit_begin:o,explicit_end:a,explicit_dur:r}}(t,0,i,n);this.explicit_begin=o.explicit_begin,this.explicit_end=o.explicit_end,this.explicit_dur=o.explicit_dur,this.timeContainer=function(t,e){var i=t&&"timeContainer"in t.attributes?t.attributes.timeContainer.value:null;return i&&"par"!==i?"seq"===i?"seq":(B(e,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(i,n)},E.prototype.initFromNode=function(t,e,i){v.prototype.initFromNode.call(this,t,null,e,i),b.prototype.initFromNode.call(this,t,null,e,i),y.prototype.initFromNode.call(this,t,null,e,i),m.prototype.initFromNode.call(this,t,null,e,i),_.prototype.initFromNode.call(this,t,null,e,i)},w.prototype.initFromNode=function(t,e,i,n){v.prototype.initFromNode.call(this,t,e,i,n),b.prototype.initFromNode.call(this,t,e,i,n),y.prototype.initFromNode.call(this,t,e,i,n),m.prototype.initFromNode.call(this,t,e,i,n),_.prototype.initFromNode.call(this,t,e,i,n)},T.prototype.initFromNode=function(t,e,i,n){v.prototype.initFromNode.call(this,t,e,i,n),b.prototype.initFromNode.call(this,t,e,i,n),y.prototype.initFromNode.call(this,t,e,i,n),m.prototype.initFromNode.call(this,t,e,i,n),_.prototype.initFromNode.call(this,t,e,i,n)},S.prototype.initFromNode=function(t,e,i,n,o){v.prototype.initFromNode.call(this,t,e,i,o),b.prototype.initFromNode.call(this,t,e,i,o),y.prototype.initFromNode.call(this,t,e,i,o),m.prototype.initFromNode.call(this,t,e,i,o),_.prototype.initFromNode.call(this,t,e,i,o),this.space=n},x.prototype.initFromText=function(t,e,i,n,o){b.prototype.initFromNode.call(this,t,e,null,o),this.text=i,this.space=n},C.prototype.initFromNode=function(t,e,i,n){m.prototype.initFromNode.call(this,t,e,i,n),b.prototype.initFromNode.call(this,t,e,i,n)},I.prototype.createDefaultRegion=function(){var t=new I;return g.call(t,""),v.call(t,{}),y.call(t,[]),b.call(t,0,Number.POSITIVE_INFINITY,null),t},I.prototype.initFromNode=function(t,e,i){g.prototype.initFromNode.call(this,t,null,e,i),v.prototype.initFromNode.call(this,t,null,e,i),b.prototype.initFromNode.call(this,t,null,e,i),y.prototype.initFromNode.call(this,t,null,e,i),null!==t.head&&null!==t.head.styling&&P(t.head.styling,O(e),this.styleAttrs,i)},A.prototype.initFromNode=function(t,e,i,n){b.prototype.initFromNode.call(this,t,e,i,n);var o=D(i,n);for(var r in this.qname=null,this.value=null,o){if(this.qname){B(n,"More than one style specified on set");break}this.qname=r,this.value=o[r]}}}(e,"undefined"==typeof sax?i(191):sax,"undefined"==typeof imscNames?i(51):imscNames,"undefined"==typeof imscStyles?i(70):imscStyles,"undefined"==typeof imscUtils?i(52):imscUtils)},function(t,e,i){(function(t){!function(e){e.parser=function(t,e){return new r(t,e)},e.SAXParser=r,e.SAXStream=s,e.createStream=function(t,e){return new s(t,e)},e.MAX_BUFFER_LENGTH=65536;var n,o=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function r(t,i){if(!(this instanceof r))return new r(t,i);!function(t){for(var e=0,i=o.length;e<i;e++)t[o[e]]=""}(this),this.q=this.c="",this.bufferCheckPosition=e.MAX_BUFFER_LENGTH,this.opt=i||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!t,this.noscript=!(!t&&!this.opt.noscript),this.state=A.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(v)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),O(this,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}),r.prototype={end:function(){P(this)},write:function(t){if(this.error)throw this.error;if(this.closed)return k(this,"Cannot write after close. Assign an onready handler.");if(null===t)return P(this);"object"==typeof t&&(t=t.toString());var i=0,n="";for(;n=Y(t,i++),this.c=n,n;)switch(this.trackPosition&&(this.position++,"\n"===n?(this.line++,this.column=0):this.column++),this.state){case A.BEGIN:if(this.state=A.BEGIN_WHITESPACE,"\ufeff"===n)continue;z(this,n);continue;case A.BEGIN_WHITESPACE:z(this,n);continue;case A.TEXT:if(this.sawRoot&&!this.closedRoot){for(var r=i-1;n&&"<"!==n&&"&"!==n;)(n=Y(t,i++))&&this.trackPosition&&(this.position++,"\n"===n?(this.line++,this.column=0):this.column++);this.textNode+=t.substring(r,i-1)}"<"!==n||this.sawRoot&&this.closedRoot&&!this.strict?(!S(l,n)||this.sawRoot&&!this.closedRoot||L(this,"Text data outside of root node."),"&"===n?this.state=A.TEXT_ENTITY:this.textNode+=n):(this.state=A.OPEN_WAKA,this.startTagPosition=this.position);continue;case A.SCRIPT:"<"===n?this.state=A.SCRIPT_ENDING:this.script+=n;continue;case A.SCRIPT_ENDING:"/"===n?this.state=A.CLOSE_TAG:(this.script+="<"+n,this.state=A.SCRIPT);continue;case A.OPEN_WAKA:if("!"===n)this.state=A.SGML_DECL,this.sgmlDecl="";else if(T(l,n));else if(T(y,n))this.state=A.OPEN_TAG,this.tagName=n;else if("/"===n)this.state=A.CLOSE_TAG,this.tagName="";else if("?"===n)this.state=A.PROC_INST,this.procInstName=this.procInstBody="";else{if(L(this,"Unencoded <"),this.startTagPosition+1<this.position){var a=this.position-this.startTagPosition;n=new Array(a).join(" ")+n}this.textNode+="<"+n,this.state=A.TEXT}continue;case A.SGML_DECL:(this.sgmlDecl+n).toUpperCase()===f?(D(this,"onopencdata"),this.state=A.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+n==="--"?(this.state=A.COMMENT,this.comment="",this.sgmlDecl=""):(this.sgmlDecl+n).toUpperCase()===p?(this.state=A.DOCTYPE,(this.doctype||this.sawRoot)&&L(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===n?(D(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=A.TEXT):T(h,n)?(this.state=A.SGML_DECL_QUOTED,this.sgmlDecl+=n):this.sgmlDecl+=n;continue;case A.SGML_DECL_QUOTED:n===this.q&&(this.state=A.SGML_DECL,this.q=""),this.sgmlDecl+=n;continue;case A.DOCTYPE:">"===n?(this.state=A.TEXT,D(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=n,"["===n?this.state=A.DOCTYPE_DTD:T(h,n)&&(this.state=A.DOCTYPE_QUOTED,this.q=n));continue;case A.DOCTYPE_QUOTED:this.doctype+=n,n===this.q&&(this.q="",this.state=A.DOCTYPE);continue;case A.DOCTYPE_DTD:this.doctype+=n,"]"===n?this.state=A.DOCTYPE:T(h,n)&&(this.state=A.DOCTYPE_DTD_QUOTED,this.q=n);continue;case A.DOCTYPE_DTD_QUOTED:this.doctype+=n,n===this.q&&(this.state=A.DOCTYPE_DTD,this.q="");continue;case A.COMMENT:"-"===n?this.state=A.COMMENT_ENDING:this.comment+=n;continue;case A.COMMENT_ENDING:"-"===n?(this.state=A.COMMENT_ENDED,this.comment=N(this.opt,this.comment),this.comment&&D(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+n,this.state=A.COMMENT);continue;case A.COMMENT_ENDED:">"!==n?(L(this,"Malformed comment"),this.comment+="--"+n,this.state=A.COMMENT):this.state=A.TEXT;continue;case A.CDATA:"]"===n?this.state=A.CDATA_ENDING:this.cdata+=n;continue;case A.CDATA_ENDING:"]"===n?this.state=A.CDATA_ENDING_2:(this.cdata+="]"+n,this.state=A.CDATA);continue;case A.CDATA_ENDING_2:">"===n?(this.cdata&&D(this,"oncdata",this.cdata),D(this,"onclosecdata"),this.cdata="",this.state=A.TEXT):"]"===n?this.cdata+="]":(this.cdata+="]]"+n,this.state=A.CDATA);continue;case A.PROC_INST:"?"===n?this.state=A.PROC_INST_ENDING:T(l,n)?this.state=A.PROC_INST_BODY:this.procInstName+=n;continue;case A.PROC_INST_BODY:if(!this.procInstBody&&T(l,n))continue;"?"===n?this.state=A.PROC_INST_ENDING:this.procInstBody+=n;continue;case A.PROC_INST_ENDING:">"===n?(D(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=A.TEXT):(this.procInstBody+="?"+n,this.state=A.PROC_INST_BODY);continue;case A.OPEN_TAG:T(_,n)?this.tagName+=n:(F(this),">"===n?j(this):"/"===n?this.state=A.OPEN_TAG_SLASH:(S(l,n)&&L(this,"Invalid character in tag name"),this.state=A.ATTRIB));continue;case A.OPEN_TAG_SLASH:">"===n?(j(this,!0),H(this)):(L(this,"Forward-slash in opening tag not followed by >"),this.state=A.ATTRIB);continue;case A.ATTRIB:if(T(l,n))continue;">"===n?j(this):"/"===n?this.state=A.OPEN_TAG_SLASH:T(y,n)?(this.attribName=n,this.attribValue="",this.state=A.ATTRIB_NAME):L(this,"Invalid attribute name");continue;case A.ATTRIB_NAME:"="===n?this.state=A.ATTRIB_VALUE:">"===n?(L(this,"Attribute without value"),this.attribValue=this.attribName,U(this),j(this)):T(l,n)?this.state=A.ATTRIB_NAME_SAW_WHITE:T(_,n)?this.attribName+=n:L(this,"Invalid attribute name");continue;case A.ATTRIB_NAME_SAW_WHITE:if("="===n)this.state=A.ATTRIB_VALUE;else{if(T(l,n))continue;L(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",D(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===n?j(this):T(y,n)?(this.attribName=n,this.state=A.ATTRIB_NAME):(L(this,"Invalid attribute name"),this.state=A.ATTRIB)}continue;case A.ATTRIB_VALUE:if(T(l,n))continue;T(h,n)?(this.q=n,this.state=A.ATTRIB_VALUE_QUOTED):(L(this,"Unquoted attribute value"),this.state=A.ATTRIB_VALUE_UNQUOTED,this.attribValue=n);continue;case A.ATTRIB_VALUE_QUOTED:if(n!==this.q){"&"===n?this.state=A.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=n;continue}U(this),this.q="",this.state=A.ATTRIB_VALUE_CLOSED;continue;case A.ATTRIB_VALUE_CLOSED:T(l,n)?this.state=A.ATTRIB:">"===n?j(this):"/"===n?this.state=A.OPEN_TAG_SLASH:T(y,n)?(L(this,"No whitespace between attributes"),this.attribName=n,this.attribValue="",this.state=A.ATTRIB_NAME):L(this,"Invalid attribute name");continue;case A.ATTRIB_VALUE_UNQUOTED:if(S(c,n)){"&"===n?this.state=A.ATTRIB_VALUE_ENTITY_U:this.attribValue+=n;continue}U(this),">"===n?j(this):this.state=A.ATTRIB;continue;case A.CLOSE_TAG:if(this.tagName)">"===n?H(this):T(_,n)?this.tagName+=n:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=A.SCRIPT):(S(l,n)&&L(this,"Invalid tagname in closing tag"),this.state=A.CLOSE_TAG_SAW_WHITE);else{if(T(l,n))continue;S(y,n)?this.script?(this.script+="</"+n,this.state=A.SCRIPT):L(this,"Invalid tagname in closing tag."):this.tagName=n}continue;case A.CLOSE_TAG_SAW_WHITE:if(T(l,n))continue;">"===n?H(this):L(this,"Invalid characters in closing tag");continue;case A.TEXT_ENTITY:case A.ATTRIB_VALUE_ENTITY_Q:case A.ATTRIB_VALUE_ENTITY_U:var s,u;switch(this.state){case A.TEXT_ENTITY:s=A.TEXT,u="textNode";break;case A.ATTRIB_VALUE_ENTITY_Q:s=A.ATTRIB_VALUE_QUOTED,u="attribValue";break;case A.ATTRIB_VALUE_ENTITY_U:s=A.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===n?(this[u]+=G(this),this.entity="",this.state=s):T(this.entity.length?E:b,n)?this.entity+=n:(L(this,"Invalid character in entity name"),this[u]+="&"+this.entity+n,this.entity="",this.state=s);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function(t){for(var i=Math.max(e.MAX_BUFFER_LENGTH,10),n=0,r=0,a=o.length;r<a;r++){var s=t[o[r]].length;if(s>i)switch(o[r]){case"textNode":R(t);break;case"cdata":D(t,"oncdata",t.cdata),t.cdata="";break;case"script":D(t,"onscript",t.script),t.script="";break;default:k(t,"Max buffer length exceeded: "+o[r])}n=Math.max(n,s)}var l=e.MAX_BUFFER_LENGTH-n;t.bufferCheckPosition=l+t.position}(this);return this}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;R(t=this),""!==t.cdata&&(D(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(D(t,"onscript",t.script),t.script="")}};try{n=i(192).Stream}catch(t){n=function(){}}var a=e.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});function s(t,e){if(!(this instanceof s))return new s(t,e);n.apply(this),this._parser=new r(t,e),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(t){i.emit("error",t),i._parser.error=null},this._decoder=null,a.forEach(function(t){Object.defineProperty(i,"on"+t,{get:function(){return i._parser["on"+t]},set:function(e){if(!e)return i.removeAllListeners(t),i._parser["on"+t]=e,e;i.on(t,e)},enumerable:!0,configurable:!1})})}s.prototype=Object.create(n.prototype,{constructor:{value:s}}),s.prototype.write=function(e){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(e)){if(!this._decoder){var n=i(65).StringDecoder;this._decoder=new n("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},s.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},s.prototype.on=function(t,e){var i=this;return i._parser["on"+t]||-1===a.indexOf(t)||(i._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),i.emit.apply(i,e)}),n.prototype.on.call(i,t,e)};var l="\r\n\t ",u="0124356789",d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",h="'\"",c=l+">",f="[CDATA[",p="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",v={xml:g,xmlns:m};l=w(l),u=w(u),d=w(d);var y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,E=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function w(t){return t.split("").reduce(function(t,e){return t[e]=!0,t},{})}function T(t,e){return function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}(t)?!!e.match(t):t[e]}function S(t,e){return!T(t,e)}h=w(h),c=w(c);var x,C,I,A=0;for(var M in e.STATE={BEGIN:A++,BEGIN_WHITESPACE:A++,TEXT:A++,TEXT_ENTITY:A++,OPEN_WAKA:A++,SGML_DECL:A++,SGML_DECL_QUOTED:A++,DOCTYPE:A++,DOCTYPE_QUOTED:A++,DOCTYPE_DTD:A++,DOCTYPE_DTD_QUOTED:A++,COMMENT_STARTING:A++,COMMENT:A++,COMMENT_ENDING:A++,COMMENT_ENDED:A++,CDATA:A++,CDATA_ENDING:A++,CDATA_ENDING_2:A++,PROC_INST:A++,PROC_INST_BODY:A++,PROC_INST_ENDING:A++,OPEN_TAG:A++,OPEN_TAG_SLASH:A++,ATTRIB:A++,ATTRIB_NAME:A++,ATTRIB_NAME_SAW_WHITE:A++,ATTRIB_VALUE:A++,ATTRIB_VALUE_QUOTED:A++,ATTRIB_VALUE_CLOSED:A++,ATTRIB_VALUE_UNQUOTED:A++,ATTRIB_VALUE_ENTITY_Q:A++,ATTRIB_VALUE_ENTITY_U:A++,CLOSE_TAG:A++,CLOSE_TAG_SAW_WHITE:A++,SCRIPT:A++,SCRIPT_ENDING:A++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var i=e.ENTITIES[t],n="number"==typeof i?String.fromCharCode(i):i;e.ENTITIES[t]=n}),e.STATE)e.STATE[e.STATE[M]]=M;function O(t,e,i){t[e]&&t[e](i)}function D(t,e,i){t.textNode&&R(t),O(t,e,i)}function R(t){t.textNode=N(t.opt,t.textNode),t.textNode&&O(t,"ontext",t.textNode),t.textNode=""}function N(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function k(t,e){return R(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,O(t,"onerror",e),t}function P(t){return t.sawRoot&&!t.closedRoot&&L(t,"Unclosed root tag"),t.state!==A.BEGIN&&t.state!==A.BEGIN_WHITESPACE&&t.state!==A.TEXT&&k(t,"Unexpected end"),R(t),t.c="",t.closed=!0,O(t,"onend"),r.call(t,t.strict,t.opt),t}function L(t,e){if("object"!=typeof t||!(t instanceof r))throw new Error("bad call to strictFail");t.strict&&k(t,e)}function F(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,i=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(i.ns=e.ns),t.attribList.length=0,D(t,"onopentagstart",i)}function B(t,e){var i=t.indexOf(":")<0?["",t]:t.split(":"),n=i[0],o=i[1];return e&&"xmlns"===t&&(n="xmlns",o=""),{prefix:n,local:o}}function U(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=B(t.attribName,!0),i=e.prefix,n=e.local;if("xmlns"===i)if("xml"===n&&t.attribValue!==g)L(t,"xml: prefix must be bound to "+g+"\nActual: "+t.attribValue);else if("xmlns"===n&&t.attribValue!==m)L(t,"xmlns: prefix must be bound to "+m+"\nActual: "+t.attribValue);else{var o=t.tag,r=t.tags[t.tags.length-1]||t;o.ns===r.ns&&(o.ns=Object.create(r.ns)),o.ns[n]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,D(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function j(t,e){if(t.opt.xmlns){var i=t.tag,n=B(t.tagName);i.prefix=n.prefix,i.local=n.local,i.uri=i.ns[n.prefix]||"",i.prefix&&!i.uri&&(L(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),i.uri=n.prefix);var o=t.tags[t.tags.length-1]||t;i.ns&&o.ns!==i.ns&&Object.keys(i.ns).forEach(function(e){D(t,"onopennamespace",{prefix:e,uri:i.ns[e]})});for(var r=0,a=t.attribList.length;r<a;r++){var s=t.attribList[r],l=s[0],u=s[1],d=B(l,!0),h=d.prefix,c=d.local,f=""===h?"":i.ns[h]||"",p={name:l,value:u,prefix:h,local:c,uri:f};h&&"xmlns"!==h&&!f&&(L(t,"Unbound namespace prefix: "+JSON.stringify(h)),p.uri=h),t.tag.attributes[l]=p,D(t,"onattribute",p)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),D(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=A.TEXT:t.state=A.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function H(t){if(!t.tagName)return L(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=A.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=A.SCRIPT);D(t,"onscript",t.script),t.script=""}var e=t.tags.length,i=t.tagName;t.strict||(i=i[t.looseCase]());for(var n=i;e--;){if(t.tags[e].name===n)break;L(t,"Unexpected close tag")}if(e<0)return L(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=A.TEXT);t.tagName=i;for(var o=t.tags.length;o-- >e;){var r=t.tag=t.tags.pop();t.tagName=t.tag.name,D(t,"onclosetag",t.tagName);var a={};for(var s in r.ns)a[s]=r.ns[s];var l=t.tags[t.tags.length-1]||t;t.opt.xmlns&&r.ns!==l.ns&&Object.keys(r.ns).forEach(function(e){var i=r.ns[e];D(t,"onclosenamespace",{prefix:e,uri:i})})}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=A.TEXT}function G(t){var e,i=t.entity,n=i.toLowerCase(),o="";return t.ENTITIES[i]?t.ENTITIES[i]:t.ENTITIES[n]?t.ENTITIES[n]:("#"===(i=n).charAt(0)&&("x"===i.charAt(1)?(i=i.slice(2),o=(e=parseInt(i,16)).toString(16)):(i=i.slice(1),o=(e=parseInt(i,10)).toString(10))),i=i.replace(/^0+/,""),o.toLowerCase()!==i?(L(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function z(t,e){"<"===e?(t.state=A.OPEN_WAKA,t.startTagPosition=t.position):S(l,e)&&(L(t,"Non-whitespace before first tag."),t.textNode=e,t.state=A.TEXT)}function Y(t,e){var i="";return e<t.length&&(i=t.charAt(e)),i}A=e.STATE,String.fromCodePoint||(x=String.fromCharCode,C=Math.floor,I=function(){var t,e,i=16384,n=[],o=-1,r=arguments.length;if(!r)return"";for(var a="";++o<r;){var s=Number(arguments[o]);if(!isFinite(s)||s<0||s>1114111||C(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?n.push(s):(t=55296+((s-=65536)>>10),e=s%1024+56320,n.push(t,e)),(o+1===r||n.length>i)&&(a+=x.apply(null,n),n.length=0)}return a},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:I,configurable:!0,writable:!0}):String.fromCodePoint=I)}(e)}).call(this,i(23).Buffer)},function(t,e,i){t.exports=o;var n=i(62).EventEmitter;function o(){n.call(this)}i(20)(o,n),o.Readable=i(40),o.Writable=i(193),o.Duplex=i(194),o.Transform=i(195),o.PassThrough=i(196),o.Stream=o,o.prototype.pipe=function(t,e){var i=this;function o(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function r(){i.readable&&i.resume&&i.resume()}i.on("data",o),t.on("drain",r),t._isStdio||e&&!1===e.end||(i.on("end",s),i.on("close",l));var a=!1;function s(){a||(a=!0,t.end())}function l(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(d(),0===n.listenerCount(this,"error"))throw t}function d(){i.removeListener("data",o),t.removeListener("drain",r),i.removeListener("end",s),i.removeListener("close",l),i.removeListener("error",u),t.removeListener("error",u),i.removeListener("end",d),i.removeListener("close",d),t.removeListener("close",d)}return i.on("error",u),t.on("error",u),i.on("end",d),i.on("close",d),t.on("close",d),t.emit("pipe",i),t}},function(t,e,i){t.exports=i(64)},function(t,e,i){t.exports=i(24)},function(t,e,i){t.exports=i(40).Transform},function(t,e,i){t.exports=i(40).PassThrough},function(t,e,i){!function(t,e,i){function n(t,e,s){var u;if("region"===s.kind)(u=document.createElement("div")).style.position="absolute";else if("body"===s.kind)u=document.createElement("div");else if("div"===s.kind)u=document.createElement("div");else if("image"===s.kind){if(u=document.createElement("img"),null!==t.imgResolver&&null!==s.src){var d=t.imgResolver(s.src,u);d&&(u.src=d),u.height=t.regionH,u.width=t.regionW}}else if("p"===s.kind)u=document.createElement("p");else if("span"===s.kind){if("container"===s.styleAttrs[i.byName.ruby.qname])u=document.createElement("ruby"),t.ruby=!0;else if("base"===s.styleAttrs[i.byName.ruby.qname])u=document.createElement("rb");else if("text"===s.styleAttrs[i.byName.ruby.qname])u=document.createElement("rt");else if("baseContainer"===s.styleAttrs[i.byName.ruby.qname])u=document.createElement("rbc");else if("textContainer"===s.styleAttrs[i.byName.ruby.qname])u=document.createElement("rtc");else{if("delimiter"===s.styleAttrs[i.byName.ruby.qname])return;u=document.createElement("span")}var h=s.styleAttrs[i.byName.textEmphasis.qname];h&&"none"!==h.style&&(t.textEmphasis=!0)}else"br"===s.kind&&(u=document.createElement("br"));if(u){for(var c in e.appendChild(u),u.style.margin="0",l){var f=l[c],p=s.styleAttrs[f.qname];void 0!==p&&null!==f.map&&f.map(t,u,s,p)}var g=u;if("region"===s.kind){var m=s.styleAttrs[i.byName.writingMode.qname];"lrtb"===m||"lr"===m?(t.ipd="lr",t.bpd="tb"):"rltb"===m||"rl"===m?(t.ipd="rl",t.bpd="tb"):"tblr"===m?(t.ipd="tb",t.bpd="lr"):"tbrl"!==m&&"tb"!==m||(t.ipd="tb",t.bpd="rl")}var v=s.styleAttrs[i.byName.linePadding.qname];if(v&&!v.isZero()){var y=v.toUsedLength(t.w,t.h);if(y>0){var _=Math.ceil(y)+"px";"tb"===t.bpd?(g.style.paddingLeft=_,g.style.paddingRight=_):(g.style.paddingTop=_,g.style.paddingBottom=_),t.lp=v}}var b=s.styleAttrs[i.byName.multiRowAlign.qname];if(b&&"auto"!==b){var E=document.createElement("span");E.style.display="inline-block",E.style.textAlign=b,u.appendChild(E),g=E,t.mra=b}var w=s.styleAttrs[i.byName.rubyReserve.qname];if(w&&"none"!==w[0]&&(t.rubyReserve=w),s.styleAttrs[i.byName.fillLineGap.qname]&&(t.flg=!0),"span"===s.kind&&s.text)if(i.byName.textCombine.qname in s.styleAttrs&&"all"===s.styleAttrs[i.byName.textCombine.qname][0])u.textContent=s.text;else for(var T="",S=0;S<s.text.length;S++){T+=s.text.charAt(S);var x=s.text.charCodeAt(S);if(x<55296||x>56319||S===s.text.length){var C=document.createElement("span");C.textContent=T,u.appendChild(C),T=""}}for(var I in s.contents)n(t,g,s.contents[I]);var A=[];if((t.lp||t.mra||t.flg||t.ruby||t.textEmphasis||t.rubyReserve)&&"p"===s.kind&&(a(t,g,A,null),t.rubyReserve&&(!function(t,e){for(var i=0;i<t.length;i++){var n,o,r=document.createElement("ruby"),a=document.createElement("rb");a.textContent="​",r.appendChild(a);var s=e.rubyReserve[1].toUsedLength(e.w,e.h)+"px";"both"===e.rubyReserve[0]?((n=document.createElement("rtc")).style.rubyPosition="under",n.textContent="​",n.style.fontSize=s,(o=document.createElement("rtc")).style.rubyPosition="over",o.textContent="​",o.style.fontSize=s,r.appendChild(n),r.appendChild(o)):((n=document.createElement("rtc")).textContent="​",n.style.fontSize=s,"after"===e.rubyReserve[0]||"outside"===e.rubyReserve[0]&&i>0?n.style.rubyPosition="tb"===e.bpd||"rl"===e.bpd?"under":"over":n.style.rubyPosition="tb"===e.bpd||"rl"===e.bpd?"over":"under",r.appendChild(n));t[i].elements[0].node.parentElement.insertBefore(r,t[i].elements[0].node)}}(A,t),t.rubyReserve=null),(t.ruby||t.rubyReserve)&&(!function(t,e){for(var i=0;i<t.length;i++)for(var n=0;n<t[i].rbc.length;n++){var o;if(""===t[i].rbc[n].style.rubyPosition)o="tb"===e.bpd?0===i?"over":"under":"rl"===e.bpd?0===i?"over":"under":0===i?"under":"over",t[i].rbc[n].style.rubyPosition=o}}(A,t),t.ruby=null),t.textEmphasis&&(!function(t,e){for(var i=0;i<t.length;i++)for(var n=0;n<t[i].te.length;n++){var o;if(""===t[i].te[n].style.textEmphasisPosition)o="tb"===e.bpd?0===i?"left over":"left under":"rl"===e.bpd?0===i?"right under":"left under":0===i?"left under":"right under",t[i].te[n].style.textEmphasisPosition=o}}(A,t),t.textEmphasis=null),t.mra&&(!function(t){for(var e=0;e<t.length-1;e++){var i=t[e].elements.length;if(0!==i&&!1===t[e].br){var n=document.createElement("br"),o=t[e].elements[i-1].node;o.parentElement.insertBefore(n,o.nextSibling)}}}(A),t.mra=null),t.lp&&(!function(t,e,i){for(var n in t){var o=t[n].elements.length,r=t[n].elements[t[n].start_elem],a=t[n].elements[t[n].end_elem],s=Math.ceil(e)+"px",l="-"+Math.ceil(e)+"px";0!==o&&("lr"===i.ipd?(r.node.style.borderLeftColor=r.bgcolor||"#00000000",r.node.style.borderLeftStyle="solid",r.node.style.borderLeftWidth=s,r.node.style.marginLeft=l):"rl"===i.ipd?(r.node.style.borderRightColor=r.bgcolor||"#00000000",r.node.style.borderRightStyle="solid",r.node.style.borderRightWidth=s,r.node.style.marginRight=l):"tb"===i.ipd&&(r.node.style.borderTopColor=r.bgcolor||"#00000000",r.node.style.borderTopStyle="solid",r.node.style.borderTopWidth=s,r.node.style.marginTop=l),"lr"===i.ipd?(a.node.style.borderRightColor=a.bgcolor||"#00000000",a.node.style.borderRightStyle="solid",a.node.style.borderRightWidth=s,a.node.style.marginRight=l):"rl"===i.ipd?(a.node.style.borderLeftColor=a.bgcolor||"#00000000",a.node.style.borderLeftStyle="solid",a.node.style.borderLeftWidth=s,a.node.style.marginLeft=l):"tb"===i.ipd&&(a.node.style.borderBottomColor=a.bgcolor||"#00000000",a.node.style.borderBottomStyle="solid",a.node.style.borderBottomWidth=s,a.node.style.marginBottom=l))}}(A,t.lp.toUsedLength(t.w,t.h),t),t.lp=null),t.flg)){var M=r(g.getBoundingClientRect(),t);!function(t,e,i,n){for(var o=Math.sign(i-e),r=0;r<=t.length;r++){var a,s,l;if(a=0===r?e:r===t.length?i:(t[r].before+t[r-1].after)/2,r>0)for(var u=0;u<t[r-1].elements.length;u++)null!==t[r-1].elements[u].bgcolor&&(l=t[r-1].elements[u],o*(l.after-a)<0&&(s=Math.ceil(Math.abs(a-l.after))+"px",l.node.style.backgroundColor=l.bgcolor,"lr"===n.bpd?l.node.style.paddingRight=s:"rl"===n.bpd?l.node.style.paddingLeft=s:"tb"===n.bpd&&(l.node.style.paddingBottom=s)));if(r<t.length)for(var d=0;d<t[r].elements.length;d++)null!==(l=t[r].elements[d]).bgcolor&&o*(l.before-a)>0&&(s=Math.ceil(Math.abs(l.before-a))+"px",l.node.style.backgroundColor=l.bgcolor,"lr"===n.bpd?l.node.style.paddingLeft=s:"rl"===n.bpd?l.node.style.paddingRight=s:"tb"===n.bpd&&(l.node.style.paddingTop=s))}}(A,M.before,M.after,t),t.flg=null}if("region"===s.kind&&(a(t,g,A),"tb"===t.bpd&&t.enableRollUp&&s.contents.length>0&&"after"===s.styleAttrs[i.byName.displayAlign.qname])){var O=new o(""===s.id?"_":s.id,A);if(t.currentISDState[O.id]=O,t.previousISDState&&O.id in t.previousISDState&&t.previousISDState[O.id].plist.length>0&&O.plist.length>1&&O.plist[O.plist.length-2].text===t.previousISDState[O.id].plist[t.previousISDState[O.id].plist.length-1].text){var D=u.firstElementChild,R=O.plist[O.plist.length-1].after-O.plist[O.plist.length-1].before;D.style.bottom="-"+R+"px",D.style.transition="transform 0.4s",D.style.position="relative",D.style.transform="translateY(-"+R+"px)"}}}else!function(t,e){if(t&&t.error&&t.error(e))throw e}(t.errorHandler,"Error processing ISD element kind: "+s.kind)}function o(t,e){this.id=t,this.plist=e}function r(t,e){var i={before:null,after:null,start:null,end:null};return"tb"===e.bpd?(i.before=t.top,i.after=t.bottom,"lr"===e.ipd?(i.start=t.left,i.end=t.right):(i.start=t.right,i.end=t.left)):"lr"===e.bpd?(i.before=t.left,i.after=t.right,i.start=t.top,i.end=t.bottom):"rl"===e.bpd&&(i.before=t.right,i.after=t.left,i.start=t.top,i.end=t.bottom),i}function a(t,e,i,n){if("rt"!==e.localName&&"rtc"!==e.localName){var o,s,l,u,d=e.style.backgroundColor||n;if(0===e.childElementCount)if("span"===e.localName||"rb"===e.localName){var h=e.getBoundingClientRect();if(0===h.height||0===h.width)return;var c=r(h,t);if(0!==i.length&&(o=c.before,s=c.after,l=i[i.length-1].before,u=i[i.length-1].after,s<u&&o>l||u<=s&&l>=o)){var f=Math.sign(c.after-c.before),p=Math.sign(c.end-c.start);f*(c.before-i[i.length-1].before)<0&&(i[i.length-1].before=c.before),f*(c.after-i[i.length-1].after)>0&&(i[i.length-1].after=c.after),p*(c.start-i[i.length-1].start)<0&&(i[i.length-1].start=c.start,i[i.length-1].start_elem=i[i.length-1].elements.length),p*(c.end-i[i.length-1].end)>0&&(i[i.length-1].end=c.end,i[i.length-1].end_elem=i[i.length-1].elements.length)}else i.push({before:c.before,after:c.after,start:c.start,end:c.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});i[i.length-1].text+=e.textContent,i[i.length-1].elements.push({node:e,bgcolor:d,before:c.before,after:c.after})}else"br"===e.localName&&0!==i.length&&(i[i.length-1].br=!0);else for(var g=e.firstChild;g;)g.nodeType===Node.ELEMENT_NODE&&(a(t,g,i,d),"ruby"===g.localName||"rtc"===g.localName?i.length>0&&i[i.length-1].rbc.push(g):"span"===g.localName&&""!==g.style.textEmphasisStyle&&i[i.length-1].te.push(g)),g=g.nextSibling}}function s(t,e){this.qname=t,this.map=e}t.render=function(t,e,i,o,r,a,s,l,u){var d=o||e.clientHeight,h=r||e.clientWidth;if(null!==t.aspectRatio){var c=d*t.aspectRatio;c>h?d=Math.round(h/t.aspectRatio):h=c}var f=document.createElement("div");f.style.position="relative",f.style.width=h+"px",f.style.height=d+"px",f.style.margin="auto",f.style.top=0,f.style.bottom=0,f.style.left=0,f.style.right=0,f.style.zIndex=0;var p={h:d,w:h,regionH:null,regionW:null,imgResolver:i,displayForcedOnlyMode:a||!1,isd:t,errorHandler:s,previousISDState:l,enableRollUp:u||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};for(var g in e.appendChild(f),t.contents)n(p,f,t.contents[g]);return p.currentISDState};var l=[new s("http://www.w3.org/ns/ttml#styling backgroundColor",function(t,e,i,n){0!==n[3]&&(e.style.backgroundColor="rgba("+n[0].toString()+","+n[1].toString()+","+n[2].toString()+","+(n[3]/255).toString()+")")}),new s("http://www.w3.org/ns/ttml#styling color",function(t,e,i,n){e.style.color="rgba("+n[0].toString()+","+n[1].toString()+","+n[2].toString()+","+(n[3]/255).toString()+")"}),new s("http://www.w3.org/ns/ttml#styling direction",function(t,e,i,n){e.style.direction=n}),new s("http://www.w3.org/ns/ttml#styling display",function(t,e,i,n){}),new s("http://www.w3.org/ns/ttml#styling displayAlign",function(t,e,i,n){e.style.display="flex",e.style.flexDirection="column","before"===n?e.style.justifyContent="flex-start":"center"===n?e.style.justifyContent="center":"after"===n&&(e.style.justifyContent="flex-end")}),new s("http://www.w3.org/ns/ttml#styling extent",function(t,e,i,n){t.regionH=n.h.toUsedLength(t.w,t.h),t.regionW=n.w.toUsedLength(t.w,t.h);var o=0,r=0,a=i.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];a&&(o=a[0].toUsedLength(t.w,t.h)+a[2].toUsedLength(t.w,t.h),r=a[1].toUsedLength(t.w,t.h)+a[3].toUsedLength(t.w,t.h)),e.style.height=t.regionH-o+"px",e.style.width=t.regionW-r+"px"}),new s("http://www.w3.org/ns/ttml#styling fontFamily",function(t,e,i,n){var o=[];for(var r in n)"monospaceSerif"===n[r]?(o.push("Courier New"),o.push('"Liberation Mono"'),o.push("Courier"),o.push("monospace")):"proportionalSansSerif"===n[r]?(o.push("Arial"),o.push("Helvetica"),o.push('"Liberation Sans"'),o.push("sans-serif")):"monospace"===n[r]?o.push("monospace"):"sansSerif"===n[r]?o.push("sans-serif"):"serif"===n[r]?o.push("serif"):"monospaceSansSerif"===n[r]?(o.push("Consolas"),o.push("monospace")):"proportionalSerif"===n[r]?o.push("serif"):o.push(n[r]);e.style.fontFamily=o.join(",")}),new s("http://www.w3.org/ns/ttml#styling shear",function(t,e,i,n){if(0!==n){var o=-.9*n;"tb"===t.bpd?e.style.transform="skewX("+o+"deg)":e.style.transform="skewY("+o+"deg)"}}),new s("http://www.w3.org/ns/ttml#styling fontSize",function(t,e,i,n){e.style.fontSize=n.toUsedLength(t.w,t.h)+"px"}),new s("http://www.w3.org/ns/ttml#styling fontStyle",function(t,e,i,n){e.style.fontStyle=n}),new s("http://www.w3.org/ns/ttml#styling fontWeight",function(t,e,i,n){e.style.fontWeight=n}),new s("http://www.w3.org/ns/ttml#styling lineHeight",function(t,e,i,n){e.style.lineHeight="normal"===n?"normal":n.toUsedLength(t.w,t.h)+"px"}),new s("http://www.w3.org/ns/ttml#styling opacity",function(t,e,i,n){e.style.opacity=n}),new s("http://www.w3.org/ns/ttml#styling origin",function(t,e,i,n){e.style.top=n.h.toUsedLength(t.w,t.h)+"px",e.style.left=n.w.toUsedLength(t.w,t.h)+"px"}),new s("http://www.w3.org/ns/ttml#styling overflow",function(t,e,i,n){e.style.overflow=n}),new s("http://www.w3.org/ns/ttml#styling padding",function(t,e,i,n){var o=[];o[0]=n[0].toUsedLength(t.w,t.h)+"px",o[1]=n[3].toUsedLength(t.w,t.h)+"px",o[2]=n[2].toUsedLength(t.w,t.h)+"px",o[3]=n[1].toUsedLength(t.w,t.h)+"px",e.style.padding=o.join(" ")}),new s("http://www.w3.org/ns/ttml#styling position",function(t,e,i,n){e.style.top=n.h.toUsedLength(t.w,t.h)+"px",e.style.left=n.w.toUsedLength(t.w,t.h)+"px"}),new s("http://www.w3.org/ns/ttml#styling rubyAlign",function(t,e,i,n){e.style.rubyAlign=n}),new s("http://www.w3.org/ns/ttml#styling rubyPosition",function(t,e,i,n){var o;"before"!==n&&"after"!==n||(o="tb"===t.bpd?"before"===n?"over":"under":"rl"===t.bpd?"before"===n?"over":"under":"before"===n?"under":"over",e.parentElement.style.rubyPosition=o)}),new s("http://www.w3.org/ns/ttml#styling showBackground",null),new s("http://www.w3.org/ns/ttml#styling textAlign",function(t,e,n,o){var r,a=n.styleAttrs[i.byName.direction.qname];r="start"===o?"rtl"===a?"right":"left":"end"===o?"rtl"===a?"left":"right":o,e.style.textAlign=r}),new s("http://www.w3.org/ns/ttml#styling textDecoration",function(t,e,i,n){e.style.textDecoration=n.join(" ").replace("lineThrough","line-through")}),new s("http://www.w3.org/ns/ttml#styling textOutline",function(t,e,i,n){}),new s("http://www.w3.org/ns/ttml#styling textShadow",function(t,e,n,o){var r=n.styleAttrs[i.byName.textOutline.qname];if("none"===o&&"none"===r)e.style.textShadow="";else{var a=[];if("none"!==r&&a.push("rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+") 0px 0px "+r.thickness.toUsedLength(t.w,t.h)+"px"),"none"!==o)for(var s in o)a.push(o[s].x_off.toUsedLength(t.w,t.h)+"px "+o[s].y_off.toUsedLength(t.w,t.h)+"px "+o[s].b_radius.toUsedLength(t.w,t.h)+"px rgba("+o[s].color[0].toString()+","+o[s].color[1].toString()+","+o[s].color[2].toString()+","+(o[s].color[3]/255).toString()+")");e.style.textShadow=a.join(",")}}),new s("http://www.w3.org/ns/ttml#styling textCombine",function(t,e,i,n){e.style.textCombineUpright=n.join(" ")}),new s("http://www.w3.org/ns/ttml#styling textEmphasis",function(t,e,i,n){var o;("none"!==n.style&&(e.style.textEmphasisStyle=n.style+" "+n.symbol),"before"===n.position||"after"===n.position)&&(o="tb"===t.bpd?"before"===n.position?"left over":"left under":"rl"===t.bpd?"before"===n.position?"right under":"left under":"before"===n.position?"left under":"right under",e.style.textEmphasisPosition=o)}),new s("http://www.w3.org/ns/ttml#styling unicodeBidi",function(t,e,i,n){var o;o="bidiOverride"===n?"bidi-override":n,e.style.unicodeBidi=o}),new s("http://www.w3.org/ns/ttml#styling visibility",function(t,e,i,n){e.style.visibility=n}),new s("http://www.w3.org/ns/ttml#styling wrapOption",function(t,e,i,n){"wrap"===n?"preserve"===i.space?e.style.whiteSpace="pre-wrap":e.style.whiteSpace="normal":"preserve"===i.space?e.style.whiteSpace="pre":e.style.whiteSpace="noWrap"}),new s("http://www.w3.org/ns/ttml#styling writingMode",function(t,e,i,n){"lrtb"===n||"lr"===n?t.writingMode="horizontal-tb":"rltb"===n||"rl"===n?t.writingMode="horizontal-tb":"tblr"===n?t.writingMode="vertical-lr":"tbrl"!==n&&"tb"!==n||(t.writingMode="vertical-rl"),e.style.writingMode=t.writingMode}),new s("http://www.w3.org/ns/ttml#styling zIndex",function(t,e,i,n){e.style.zIndex=n}),new s("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(t,e,i,n){t.displayForcedOnlyMode&&!1===n&&(e.style.visibility="hidden")})],u={};for(var d in l)u[l[d].qname]=l[d]}(e,"undefined"==typeof imscNames?i(51):imscNames,"undefined"==typeof imscStyles?i(70):imscStyles,"undefined"==typeof imscUtils?i(52):imscUtils)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function a(){var t=0;function e(t){for(var e="",i=0;i<t.length;++i){e+=t[i].uchar}return e.length-e.replace(/^\s+/,"").length}function i(t){return"left: "+3.125*t.x+"%; top: "+6.66*t.y1+"%; width: "+(100-3.125*t.x)+"%; height: "+6.66*Math.max(t.y2-1-t.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function n(t){return"red"===t?"rgb(255, 0, 0)":"green"===t?"rgb(0, 255, 0)":"blue"===t?"rgb(0, 0, 255)":"cyan"===t?"rgb(0, 255, 255)":"magenta"===t?"rgb(255, 0, 255)":"yellow"===t?"rgb(255, 255, 0)":"white"===t?"rgb(255, 255, 255)":"black"===t?"rgb(0, 0, 0)":t}function o(t,e){var i=t.videoHeight/15;return e?"font-size: "+i+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(e.foreground?n(e.foreground):"rgb(255, 255, 255)")+"; font-style: "+(e.italics?"italic":"normal")+"; text-decoration: "+(e.underline?"underline":"none")+"; white-space: pre; background-color: "+(e.background?n(e.background):"transparent")+";":"font-size: "+i+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function r(t){return t.replace(/^\s+/g,"")}function a(t){return t.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(n,s,l,u){var d=null,h=!1,c=-1,f={start:s,end:l,spans:[]},p="style_cea608_white_black",g={},m={},v=[],y=void 0,_=void 0;for(y=0;y<15;++y){var b=u.rows[y],E="",w=null;if(!1===b.isEmpty()){var T=e(b.chars);null===d&&(d={x:T,y1:y,y2:y+1,p:[]}),T!==c&&h&&(d.p.push(f),f={start:s,end:l,spans:[]},d.y2=y,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===g.hasOwnProperty(d.name)?(v.push(d),g[d.name]=d):g[d.name].p.contat(d.p),d={x:T,y1:y,y2:y+1,p:[]});for(var S=0;S<b.chars.length;++S){var x=b.chars[S],C=x.penState;if(null===w||!C.equals(w)){E.trim().length>0&&(f.spans.push({name:p,line:E,row:y}),E="");var I="style_cea608_"+C.foreground+"_"+C.background;C.underline&&(I+="_underline"),C.italics&&(I+="_italics"),m.hasOwnProperty(I)||(m[I]=JSON.parse(JSON.stringify(C))),w=C,p=I}E+=x.uchar}E.trim().length>0&&f.spans.push({name:p,line:E,row:y}),h=!0,c=T}else h=!1,c=-1,d&&(d.p.push(f),f={start:s,end:l,spans:[]},d.y2=y,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===g.hasOwnProperty(d.name)?(v.push(d),g[d.name]=d):g[d.name].p.contat(d.p),d=null)}d&&(d.p.push(f),d.y2=y+1,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===g.hasOwnProperty(d.name)?(v.push(d),g[d.name]=d):g[d.name].p.contat(d.p),d=null);var A=[];for(y=0;y<v.length;++y){var M=v[y],O="sub_cea608_"+t++,D=document.createElement("div");D.id=O;var R=i(M);D.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+R;var N=document.createElement("div");N.className="paragraph bodyStyle",N.style.cssText=o(n);var k=document.createElement("div");k.className="cueUniWrapper",k.style.cssText="unicode-bidi: normal; direction: ltr;";for(var P=0;P<M.p.length;++P){var L=M.p[P],F=0;for(_=0;_<L.spans.length;++_){var B=L.spans[_];if(B.line.length>0){if(0!==_&&F!=B.row){var U=document.createElement("br");U.className="lineBreak",k.appendChild(U)}var j=!1;F===B.row&&(j=!0),F=B.row;var H=m[B.name],G=document.createElement("span");G.className="spanPadding "+B.name+" customSpanColor",G.style.cssText=o(n,H),0!==_&&j?_===L.spans.length-1?G.textContent=a(B.line):G.textContent=B.line:L.spans.length>1&&_<L.spans.length-1&&B.row===L.spans[_+1].row?G.textContent=r(B.line):G.textContent=B.line.trim(),k.appendChild(G)}}}N.appendChild(k),D.appendChild(N);var z={bodyStyle:["%",90]};for(var Y in m)m.hasOwnProperty(Y)&&(z[Y]=["%",90]);A.push({type:"html",start:s,end:l,cueHTMLElement:D,cueID:O,cellResolution:[32,15],isFromCEA608:!0,fontSize:z,lineHeight:{},linePadding:{}})}return A}}}a.__dashjs_factory_name="EmbeddedTextHtmlRender",e.default=r.default.getSingletonFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(3)),a="WEBVTT";function s(){var t=this.context,e=void 0,i=void 0,n=void 0,o=void 0,s=void 0,l=void 0;function u(t){var e=t.split(":"),i=e.length-1;return t=60*parseInt(e[i-1],10)+parseFloat(e[i]),2===i&&(t+=3600*parseInt(e[0],10)),t}function d(t){var e=t.split(o),i=e[1].split(l);return i.shift(),e[1]=i[0],i.shift(),{cuePoints:e,styles:h(i)}}function h(t){var e={};return t.forEach(function(t){if(t.split(/:/).length>1){var i=t.split(/:/)[1];i&&-1!=i.search(/%/)&&(i=parseInt(i.replace(/%/,""),10)),(t.match(/align/)||t.match(/A/))&&(e.align=i),(t.match(/line/)||t.match(/L/))&&(e.line=i),(t.match(/position/)||t.match(/P/))&&(e.position=i),(t.match(/size/)||t.match(/S/))&&(e.size=i)}}),e}function c(t,e){for(var i,n=e,r="",a="";""!==t[n]&&n<t.length;)n++;if((i=n-e)>1)for(var s=0;s<i;s++){if((a=t[e+s]).match(o)){r="";break}r+=a,s!==i-1&&(r+="\n")}else(a=t[e]).match(o)||(r=a);return r}return e={parse:function(t){var e,r=[],l=void 0;if(!t)return r;e=(t=t.split(n)).length,l=-1;for(var h=0;h<e;h++){var f=t[h];if(f.length>0&&f!==a&&f.match(o)){var p=d(f),g=p.cuePoints,m=p.styles,v=c(t,h+1),y=u(g[0].replace(s,"")),_=u(g[1].replace(s,""));!isNaN(y)&&!isNaN(_)&&y>=l&&_>y?""!==v?(l=y,r.push({start:y,end:_,data:v,styles:m})):i.error("Skipping cue due to empty/malformed cue text"):i.error("Skipping cue due to incorrect cue timing")}}return r}},i=(0,r.default)(t).getInstance().getLogger(e),n=/(?:\r\n|\r|\n)/gm,o=/-->/,s=/(^[\s]+|[\s]+$)/g,l=/\s\b/g,e}s.__dashjs_factory_name="VTTParser",e.default=o.default.getSingletonFactory(s),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(3)),a=n(i(2)),s=n(i(4)),l=i(108);function u(){var t=this.context,e=(0,a.default)(t).getInstance(),i=void 0,n=void 0,o=0;return i={parse:function(t,i,r,a,u){var d="",h=[],c=void 0,f=void 0,p=void 0,g={},m={},v="",y="",_={onOpenTag:function(t,e,i){if("image"===e&&"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===t){if(!i[" imagetype"]||"PNG"!==i[" imagetype"].value)return void n.warn("smpte-tt imagetype != PNG. Discarded");v=i["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){v&&(m[v]=y.trim()),y="",v=""},onText:function(t){v&&(y+=t)}};if(!t)throw d="no ttml data to parse",new Error(d);g.data=t,e.trigger(s.default.TTML_TO_PARSE,g);var b=(0,l.fromXML)(g.data,function(t){d=t},_);e.trigger(s.default.TTML_PARSED,{ttmlString:g.data,ttmlDoc:b});var E,w=b.getMediaTimeEvents();for(p=0;p<w.length;p++){var T=(0,l.generateISD)(b,w[p],function(t){d=t});T.contents.some(function(t){return t.contents.length})&&(c=w[p]+i<r?r:w[p]+i)<(f=w[p+1]+i>a?a:w[p+1]+i)&&h.push({start:c,end:f,type:"html",cueID:(E=void 0,E="cue_TTML_"+o,o++,E),isd:T,images:u,embeddedImages:m})}if(""!==d)throw n.error(d),new Error(d);return h}},n=(0,r.default)(t).getInstance().getLogger(i),i}u.__dashjs_factory_name="TTMLParser",e.default=o.default.getSingletonFactory(u),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(3)),r=n(i(0));function a(t){var e=this.context,i=void 0,n=void 0,r=void 0,a=[],s=t;function l(t,e){a=a.filter(function(i){return!((isNaN(e)||i.start<e)&&(isNaN(t)||i.end>t))})}return i={getAllBufferRanges:function(){for(var t=[],e=0;e<a.length;e++){var i=a[e];0===t.length||i.start>t[t.length-1].end?t.push({start:i.start,end:i.end}):t[t.length-1].end=i.end}var n={start:function(e){return t[e].start},end:function(e){return t[e].end}};return Object.defineProperty(n,"length",{get:function(){return t.length}}),n},append:function(t){"InitializationSegment"!==t.segmentType?(a.push(t),a.sort(function(t,e){return t.start-e.start}),r=null):r=t,n.debug("PreBufferSink appended chunk s: "+t.start+"; e: "+t.end),s&&s({chunk:t})},remove:l,abort:function(){},discharge:function(t,e){var i=function(t,e){return a.filter(function(i){return(isNaN(e)||i.start<e)&&(isNaN(t)||i.end>t)})}(t,e);return r&&(i.push(r),r=null),l(t,e),i},reset:function(){a=[],r=null,s=null},updateTimestampOffset:function(){},hasDiscontinuitiesAfter:function(){return!1}},n=(0,o.default)(e).getInstance().getLogger(i),i}a.__dashjs_factory_name="PreBufferSink";var s=r.default.getClassFactory(a);e.default=s,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(25)),r=n(i(53)),a=n(i(0)),s=n(i(3)),l=n(i(14)),u=n(i(1));function d(t){t=t||{};var e=this.context,i=t.metricsModel,n=void 0,a=void 0;return n={getMaxIndex:function(t){var n=(0,l.default)(e).create();if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("useBufferOccupancyABR")&&t.hasOwnProperty("getAbrController")&&t.hasOwnProperty("getScheduleController")))return n;!function(){if(!i||!i.hasOwnProperty("getReadOnlyMetricsFor"))throw new Error(u.default.MISSING_CONFIG_ERROR)}();var s=t.getMediaInfo(),d=t.getMediaType(),h=i.getReadOnlyMetricsFor(d),c=t.getScheduleController(),f=t.getAbrController(),p=t.getStreamInfo(),g=p&&p.manifestInfo?p.manifestInfo.isDynamic:null,m=f.getThroughputHistory(),v=m.getSafeAverageThroughput(d,g),y=m.getAverageLatency(d),_=h.BufferState.length>0?h.BufferState[h.BufferState.length-1]:null,b=t.useBufferOccupancyABR();return!h||isNaN(v)||!_||b?n:(f.getAbandonmentStateFor(d)!==r.default.ABANDON_LOAD&&(_.state===o.default.BUFFER_LOADED||g)&&(n.quality=f.getQualityForBitrate(s,v,y),c.setTimeToLoadDelay(0),a.debug("requesting switch to index: ",n.quality,"type: ",d,"Average throughput",Math.round(v),"kbps"),n.reason={throughput:v,latency:y}),n)},reset:function(){}},a=(0,s.default)(e).getInstance().getLogger(n),n}d.__dashjs_factory_name="ThroughputRule",e.default=a.default.getClassFactory(d),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(25)),r=n(i(2)),a=n(i(4)),s=n(i(0)),l=n(i(3)),u=n(i(14)),d=n(i(1));function h(t){t=t||{};var e=.5,i=this.context,n=(0,r.default)(i).getInstance(),s=t.metricsModel,h=t.dashMetrics,c=void 0,f=void 0,p=void 0;function g(){p={}}function m(){g()}return c={getMaxIndex:function(t){var n=(0,u.default)(i).create();if(!t||!t.hasOwnProperty("getMediaType"))return n;!function(){if(!(s&&s.hasOwnProperty("getReadOnlyMetricsFor")&&h&&h.hasOwnProperty("getCurrentBufferLevel")))throw new Error(d.default.MISSING_CONFIG_ERROR)}();var r=t.getMediaType(),a=s.getReadOnlyMetricsFor(r),l=a.BufferState.length>0?a.BufferState[a.BufferState.length-1]:null,c=t.getRepresentationInfo().fragmentDuration;if(!l||!function(t,e){p[t]=p[t]||{};var i=!1;p[t].firstBufferLoadedEvent?i=!0:e&&e.state===o.default.BUFFER_LOADED&&(p[t].firstBufferLoadedEvent=!0,i=!0);return i}(r,l)||!c)return n;if(l.state===o.default.BUFFER_EMPTY)f.debug("Switch to index 0; buffer is empty."),n.quality=0,n.reason="InsufficientBufferRule: Buffer is empty";else{var g=t.getMediaInfo(),m=t.getAbrController(),v=m.getThroughputHistory(),y=h.getCurrentBufferLevel(a),_=v.getAverageThroughput(r),b=v.getAverageLatency(r),E=_*(y/c)*e;n.quality=m.getQualityForBitrate(g,E,b),n.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return n},reset:function(){g(),n.off(a.default.PLAYBACK_SEEKING,m,c)}},f=(0,l.default)(i).getInstance().getLogger(c),g(),n.on(a.default.PLAYBACK_SEEKING,m,c),c}h.__dashjs_factory_name="InsufficientBufferRule",e.default=s.default.getClassFactory(h),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(14)),r=n(i(0)),a=n(i(3));function s(t){t=t||{};var e=1.8,i=500,n=5,r=this.context,l=t.mediaPlayerModel,u=t.metricsModel,d=t.dashMetrics,h=void 0,c=void 0,f=void 0,p=void 0,g=void 0;function m(){f={},p={},g=[]}return h={shouldAbandon:function(t){var a=(0,o.default)(r).create(o.default.NO_CHANGE,{name:s.__dashjs_factory_name});if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("getCurrentRequest")&&t.hasOwnProperty("getRepresentationInfo")&&t.hasOwnProperty("getAbrController")))return a;var h,m,v=t.getMediaInfo(),y=t.getMediaType(),_=t.getCurrentRequest();if(!isNaN(_.index)){h=y,m=_.index,f[h]=f[h]||{},f[h][m]=f[h][m]||{};var b=l.getStableBufferTime();if(d.getCurrentBufferLevel(u.getReadOnlyMetricsFor(y))>b)return a;var E=f[y][_.index];if(null===E||null===_.firstByteDate||p.hasOwnProperty(E.id))return a;if(void 0===E.firstByteTime&&(g[y]=[],E.firstByteTime=_.firstByteDate.getTime(),E.segmentDuration=_.duration,E.bytesTotal=_.bytesTotal,E.id=_.index),E.bytesLoaded=_.bytesLoaded,E.elapsedTime=(new Date).getTime()-E.firstByteTime,E.bytesLoaded>0&&E.elapsedTime>0&&function(t,e){g[t]=g[t]||[],g[t].push(e)}(y,Math.round(8*E.bytesLoaded/E.elapsedTime)),g[y].length>=n&&E.elapsedTime>i&&E.bytesLoaded<E.bytesTotal){var w=g[y].reduce(function(t,e){return t+e},0);if(E.measuredBandwidthInKbps=Math.round(w/g[y].length),E.estimatedTimeOfDownload=+(8*E.bytesTotal/E.measuredBandwidthInKbps/1e3).toFixed(2),E.estimatedTimeOfDownload<E.segmentDuration*e||0===t.getRepresentationInfo().quality)return a;if(!p.hasOwnProperty(E.id)){var T=t.getAbrController(),S=E.bytesTotal-E.bytesLoaded,x=T.getBitrateList(v),C=T.getQualityForBitrate(v,E.measuredBandwidthInKbps*l.getBandwidthSafetyFactor());S>E.bytesTotal*x[C].bitrate/x[T.getQualityFor(y,v.streamInfo)].bitrate&&(a.quality=C,a.reason.throughput=E.measuredBandwidthInKbps,a.reason.fragmentID=E.id,p[E.id]=E,c.debug("( ",y,"frag id",E.id,") is asking to abandon and switch to quality to ",C," measured bandwidth was",E.measuredBandwidthInKbps),delete f[y][E.id])}}else E.bytesLoaded===E.bytesTotal&&delete f[y][E.id]}return a},reset:m},c=(0,a.default)(r).getInstance().getLogger(h),m(),h}s.__dashjs_factory_name="AbandonRequestsRule",e.default=r.default.getClassFactory(s),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(14)),a=n(i(3));function s(){var t=this.context,e=void 0,i=void 0,n=.15,o=375;return e={getMaxIndex:function(e){var a=e.getDroppedFramesHistory();if(a){for(var s=a.getFrameHistory(),l=0,u=0,d=r.default.NO_CHANGE,h=1;h<s.length;h++)if(s[h]&&(l=s[h].droppedVideoFrames,(u=s[h].totalVideoFrames)>o&&l/u>n)){d=h-1,i.debug("index: "+d+" Dropped Frames: "+l+" Total Frames: "+u);break}return(0,r.default)(t).create(d,{droppedFrames:l})}return(0,r.default)(t).create()}},i=(0,a.default)(t).getInstance().getLogger(e),e}s.__dashjs_factory_name="DroppedFramesRule",e.default=o.default.getClassFactory(s),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(3)),a=n(i(14));function s(){var t=this.context,e=void 0,i=void 0,n=.075,o=6;return e={getMaxIndex:function(e){for(var r=e?e.getSwitchHistory():null,s=r?r.getSwitchRequests():[],l=0,u=0,d=0,h=(0,a.default)(t).create(),c=0;c<s.length;c++)if(void 0!==s[c]&&(l+=s[c].drops,u+=s[c].noDrops,d+=s[c].dropSize,l+u>=o&&l/u>n)){h.quality=c>0&&s[c].drops>0?c-1:c,h.reason={index:h.quality,drops:l,noDrops:u,dropSize:d},i.debug("Switch history rule index: "+h.quality+" samples: "+(l+u)+" drops: "+l);break}return h}},i=(0,r.default)(t).getInstance().getLogger(e),e}s.__dashjs_factory_name="SwitchHistoryRule",e.default=o.default.getClassFactory(s),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(34)),r=n(i(14)),a=n(i(0)),s=i(10),l=n(i(2)),u=n(i(4)),d=n(i(3)),h=0,c=1,f=2,p=10,g=2,m=.99;function v(t){t=t||{};var e=this.context,i=t.dashMetrics,n=t.metricsModel,a=t.mediaPlayerModel,v=(0,l.default)(e).getInstance(),y=void 0,_=void 0,b=void 0;function E(t,e,i){var n=i.reduce(function(t,e,n){return e>i[t]?n:t},0);if(0===n)return null;var o=Math.max(t,p+g*e.length),r=(i[n]-1)/(o/p-1);return{gp:r,Vp:p/r}}function w(t){var e={},i=t.getMediaInfo().bitrateList.map(function(t){return t.bandwidth}),n=function(t){return t.map(function(t){return Math.log(t)})}(i);n=n.map(function(t){return t-n[0]+1});var o=a.getStableBufferTime(),r=E(o,i,n);return r?(e.state=c,e.bitrates=i,e.utilities=n,e.stableBufferTime=o,e.Vp=r.Vp,e.gp=r.gp,e.lastQuality=0,T(e)):e.state=h,e}function T(t){t.placeholderBuffer=0,t.mostAdvancedSegmentStart=NaN,t.lastSegmentWasReplacement=!1,t.lastSegmentStart=NaN,t.lastSegmentDurationS=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN}function S(t,e){var o=a.getStableBufferTime();if(t.stableBufferTime!==o){var r=E(o,t.bitrates,t.utilities);if(r.Vp!==t.Vp||r.gp!==t.gp){var s=i.getCurrentBufferLevel(n.getReadOnlyMetricsFor(e)),l=s+t.placeholderBuffer;l-=p,l*=r.Vp/t.Vp,l+=p,t.stableBufferTime=o,t.Vp=r.Vp,t.gp=r.gp,t.placeholderBuffer=Math.max(0,l-s)}}}function x(t,e){return t.Vp*(t.utilities[e]+t.gp)}function C(t,e){for(var i=t.bitrates[e],n=t.utilities[e],o=0,r=e-1;r>=0;--r)if(t.utilities[r]<t.utilities[e]){var a=t.bitrates[r],s=t.utilities[r],l=t.Vp*(t.gp+(i*s-a*n)/(i-a));o=Math.max(o,l)}return o}function I(){for(var t in b)b.hasOwnProperty(t)&&b[t].state===f&&(b[t].placeholderBuffer=0)}function A(){for(var t in b)if(b.hasOwnProperty(t)){var e=b[t];e.state!==h&&(e.state=c,T(e))}}function M(){}function O(t){if(t&&t.chunk&&t.chunk.mediaInfo){var e=b[t.chunk.mediaInfo.type];if(e&&e.state!==h){var i=t.chunk.start;isNaN(e.mostAdvancedSegmentStart)||i>e.mostAdvancedSegmentStart?(e.mostAdvancedSegmentStart=i,e.lastSegmentWasReplacement=!1):e.lastSegmentWasReplacement=!0,e.lastSegmentStart=i,e.lastSegmentDurationS=t.chunk.duration,e.lastQuality=t.chunk.quality,R(e,t.chunk.mediaInfo.type)}}}function D(t){if(t&&t.metric===o.default.HTTP_REQUEST&&t.value&&t.value.type===s.HTTPRequest.MEDIA_SEGMENT_TYPE&&t.value.trace&&t.value.trace.length){var e=b[t.mediaType];e&&e.state!==h&&(e.lastSegmentRequestTimeMs=t.value.trequest.getTime(),e.lastSegmentFinishTimeMs=t.value._tfinish.getTime(),R(e,t.mediaType))}}function R(t,e){if(!isNaN(t.lastSegmentStart)&&!isNaN(t.lastSegmentRequestTimeMs)&&!isNaN(t.placeholderBuffer)){if(t.placeholderBuffer*=m,!isNaN(t.lastSegmentFinishTimeMs)){var o=i.getCurrentBufferLevel(n.getReadOnlyMetricsFor(e))+.001*(t.lastSegmentFinishTimeMs-t.lastSegmentRequestTimeMs),r=x(t,t.lastQuality),a=Math.max(0,r-o);t.placeholderBuffer=Math.min(a,t.placeholderBuffer)}t.lastSegmentWasReplacement&&!isNaN(t.lastSegmentDurationS)&&(t.placeholderBuffer+=t.lastSegmentDurationS),t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN}}function N(t){if(t){var e=b[t.mediaType];e&&e.state!==h&&(e.abrQuality=t.newQuality)}}function k(t){if(t){var e=b[t.mediaType];if(e&&e.state!==h){var o=i.getCurrentBufferLevel(n.getReadOnlyMetricsFor(t.mediaType)),r=void 0;r=e.abrQuality>0?C(e,e.abrQuality):p;var a=Math.max(0,r-o);e.placeholderBuffer=Math.min(e.placeholderBuffer,a)}}}function P(){b={}}return y={getMaxIndex:function(t){var o=t.getMediaInfo(),a=t.getMediaType(),s=n.getReadOnlyMetricsFor(a),l=t.getScheduleController(),u=t.getStreamInfo(),d=t.getAbrController(),p=d.getThroughputHistory(),g=u?u.id:null,m=u&&u.manifestInfo&&u.manifestInfo.isDynamic,v=t.useBufferOccupancyABR(),y=(0,r.default)(e).create();if(y.reason=y.reason||{},!v)return y;l.setTimeToLoadDelay(0);var E=function(t){var e=t.getMediaType(),i=b[e];return i?i.state!==h&&S(i,e):(i=w(t),b[e]=i),i}(t);if(E.state===h)return y;var I=i.getCurrentBufferLevel(s),A=p.getAverageThroughput(a,m),M=p.getSafeAverageThroughput(a,m),O=p.getAverageLatency(a),D=void 0;if(y.reason.state=E.state,y.reason.throughput=A,y.reason.latency=O,isNaN(A))return y;switch(E.state){case c:D=d.getQualityForBitrate(o,M,O),y.quality=D,y.reason.throughput=M,E.placeholderBuffer=Math.max(0,C(E,D)-I),E.lastQuality=D,!isNaN(E.lastSegmentDurationS)&&I>=E.lastSegmentDurationS&&(E.state=f);break;case f:!function(t,e){var i=Date.now();if(isNaN(t.lastSegmentFinishTimeMs)){if(!isNaN(t.lastCallTimeMs)){n=.001*(i-t.lastCallTimeMs);t.placeholderBuffer+=Math.max(0,n)}}else{var n=.001*(i-t.lastSegmentFinishTimeMs);t.placeholderBuffer+=Math.max(0,n)}t.lastCallTimeMs=i,t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN,S(t,e)}(E,a),D=function(t,e){for(var i=t.bitrates.length,n=NaN,o=NaN,r=0;r<i;++r){var a=(t.Vp*(t.utilities[r]+t.gp)-e)/t.bitrates[r];(isNaN(o)||a>=o)&&(o=a,n=r)}return n}(E,I+E.placeholderBuffer);var R=d.getQualityForBitrate(o,M,O);D>E.lastQuality&&D>R&&(D=Math.max(R,E.lastQuality));var N=Math.max(0,I+E.placeholderBuffer-x(E,D));N<=E.placeholderBuffer?(E.placeholderBuffer-=N,N=0):(N-=E.placeholderBuffer,E.placeholderBuffer=0,D<d.getTopQualityIndexFor(a,g)?l.setTimeToLoadDelay(1e3*N):N=0),y.quality=D,y.reason.throughput=A,y.reason.latency=O,y.reason.bufferLevel=I,y.reason.placeholderBuffer=E.placeholderBuffer,y.reason.delay=N,E.lastQuality=D;break;default:_.debug("BOLA ABR rule invoked in bad state."),y.quality=d.getQualityForBitrate(o,M,O),y.reason.state=E.state,y.reason.throughput=M,y.reason.latency=O,E.state=c,T(E)}return y},reset:function(){P(),v.off(u.default.BUFFER_EMPTY,I,y),v.off(u.default.PLAYBACK_SEEKING,A,y),v.off(u.default.PERIOD_SWITCH_STARTED,M,y),v.off(u.default.MEDIA_FRAGMENT_LOADED,O,y),v.off(u.default.METRIC_ADDED,D,y),v.off(u.default.QUALITY_CHANGE_REQUESTED,N,y),v.off(u.default.FRAGMENT_LOADING_ABANDONED,k,y)}},_=(0,d.default)(e).getInstance().getLogger(y),P(),v.on(u.default.BUFFER_EMPTY,I,y),v.on(u.default.PLAYBACK_SEEKING,A,y),v.on(u.default.PERIOD_SWITCH_STARTED,M,y),v.on(u.default.MEDIA_FRAGMENT_LOADED,O,y),v.on(u.default.METRIC_ADDED,D,y),v.on(u.default.QUALITY_CHANGE_REQUESTED,N,y),v.on(u.default.FRAGMENT_LOADING_ABANDONED,k,y),y}v.__dashjs_factory_name="BolaRule",e.default=a.default.getClassFactory(v),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function a(t){var e=(t=t||{}).abrController,i=t.switchHistory,n=t.droppedFramesHistory,o=t.currentRequest,r=t.useBufferOccupancyABR,a=t.streamProcessor?t.streamProcessor.getScheduleController():null,s=t.streamProcessor?t.streamProcessor.getRepresentationInfo():null;function l(){return s?s.mediaInfo:null}return{getMediaType:function(){var t=l();return t?t.type:null},getMediaInfo:l,getDroppedFramesHistory:function(){return n},getCurrentRequest:function(){return o},getSwitchHistory:function(){return i},getStreamInfo:function(){var t=l();return t?t.streamInfo:null},getScheduleController:function(){return a},getAbrController:function(){return e},getRepresentationInfo:function(){return s},useBufferOccupancyABR:function(){return r}}}a.__dashjs_factory_name="RulesContext",e.default=r.default.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(14)),a=8;function s(){var t=[],e=[];return{push:function(i){i.newValue===r.default.NO_CHANGE&&(i.newValue=i.oldValue),t[i.oldValue]||(t[i.oldValue]={noDrops:0,drops:0,dropSize:0});var n=i.newValue-i.oldValue,o=n<0?1:0,s=o?-n:0,l=o?0:1;if(t[i.oldValue].drops+=o,t[i.oldValue].dropSize+=s,t[i.oldValue].noDrops+=l,e.push({idx:i.oldValue,noDrop:l,drop:o,dropSize:s}),e.length>a){var u=e.shift();t[u.idx].drops-=u.drop,t[u.idx].dropSize-=u.dropSize,t[u.idx].noDrops-=u.noDrop}},getSwitchRequests:function(){return t},reset:function(){t=[],e=[]}}}s.__dashjs_factory_name="SwitchRequestHistory";var l=o.default.getClassFactory(s);e.default=l,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function a(){var t=[],e=0,i=0;return{push:function(n,o){var r=o&&o.droppedVideoFrames?o.droppedVideoFrames:0,a=o&&o.totalVideoFrames?o.totalVideoFrames:0,s=r-e;e=r;var l=a-i;i=a,isNaN(n)||(t[n]?(t[n].droppedVideoFrames+=s,t[n].totalVideoFrames+=l):t[n]={droppedVideoFrames:s,totalVideoFrames:l})},getFrameHistory:function(){return t},reset:function(n){t=[],e=n.droppedVideoFrames,i=n.totalVideoFrames}}}a.__dashjs_factory_name="DroppedFramesHistory";var s=r.default.getClassFactory(a);e.default=s,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(0));function a(t){var e=20,i=3,n=4,r=4,a=1.3,s=1.3,l=8,u=3,d=2,h=1,c=(t=t||{}).mediaPlayerModel,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0;function y(t,e,i,n){var o=Math.pow(.5,i/n.fast);t.fastEstimate=(1-o)*e+o*t.fastEstimate;var r=Math.pow(.5,i/n.slow);t.slowEstimate=(1-r)*e+r*t.slowEstimate,t.totalWeight+=i}function _(t,e,l){return c.getMovingAverageMethod()!==o.default.MOVING_AVERAGE_SLIDING_WINDOW?function(t,e){var i=t?v.throughputHalfLife:v.latencyHalfLife,n=t?g[e]:m[e];if(!n||n.totalWeight<=0)return NaN;var o=n.fastEstimate/(1-Math.pow(.5,n.totalWeight/i.fast)),r=n.slowEstimate/(1-Math.pow(.5,n.totalWeight/i.slow));return t?Math.min(o,r):Math.max(o,r)}(t,e):function(t,e,o){var l=function(t,e,o){var l=void 0,u=void 0;if(t?(l=f[e],u=o?i:n):(l=p[e],u=r),l){if(u>=l.length)u=l.length;else if(t)for(var d=1;d<u;++d){var h=l[d]/l[d-1];if((h>=s||h<=1/a)&&(u+=1)===l.length)break}}else u=0;return u}(t,e,o),u=(t?f:p)[e];if(0===l||!u||0===u.length)return NaN;return(u=u.slice(-l)).reduce(function(t,e){return t+e})/u.length}(t,e,l)}function b(t,e){return _(!0,t,e)}function E(t){f[t]=f[t]||[],p[t]=p[t]||[],g[t]=g[t]||{fastEstimate:0,slowEstimate:0,totalWeight:0},m[t]=m[t]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function w(){f={},p={},g={},m={}}var T={push:function(t,i,n){if(i.trace&&i.trace.length){var r=i.tresponse.getTime()-i.trequest.getTime()||1,a=i._tfinish.getTime()-i.tresponse.getTime()||1,s=i.trace.reduce(function(t,e){return t+e.b[0]},0),l=void 0;l=c.getLowLatencyEnabled()?i.trace.reduce(function(t,e){return t+e.d},0):n?a:r+a;var u=Math.round(8*s/l);if(E(t),function(t,e,i){return t===o.default.VIDEO?i<c.getCacheLoadThresholdForType(o.default.VIDEO):t===o.default.AUDIO?i<c.getCacheLoadThresholdForType(o.default.AUDIO):void 0}(t,0,a)){if(f[t].length>0&&!f[t].hasCachedEntries)return;f[t].hasCachedEntries=!0}else f[t]&&f[t].hasCachedEntries&&function(t){delete f[t],delete p[t],delete g[t],delete m[t],E(t)}(t);f[t].push(u),f[t].length>e&&f[t].shift(),p[t].push(r),p[t].length>e&&p[t].shift(),y(g[t],u,.001*a,v.throughputHalfLife),y(m[t],r,1,v.latencyHalfLife)}},getAverageThroughput:b,getSafeAverageThroughput:function(t,e){var i=b(t,e);return isNaN(i)||(i*=c.getBandwidthSafetyFactor()),i},getAverageLatency:function(t){return _(!1,t)},reset:w};return v={throughputHalfLife:{fast:u,slow:l},latencyHalfLife:{fast:h,slow:d}},w(),T}a.__dashjs_factory_name="ThroughputHistory",e.default=r.default.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(34)),a=n(i(213)),s=n(i(238)),l=n(i(2)),u=n(i(4)),d=n(i(0)),h=i(113),c=n(i(3)),f=n(i(72)),p=n(i(21)),g=n(i(116)),m=n(i(239)),v=n(i(117)),y=n(i(246)),_=n(i(6)),b=n(i(9));function E(){var t=40,e=this.context,i=(0,l.default)(e).getInstance(),n=void 0,d=void 0,E=void 0,w=void 0,T=void 0,S=void 0,x=void 0,C=void 0,I=void 0,A=void 0,M=void 0,O=void 0,D=void 0,R=void 0,N=void 0,k=void 0,P=void 0,L=void 0,F=void 0,B=void 0,U=void 0,j=void 0,H=void 0,G=void 0,z=void 0,Y=void 0,V=void 0,q=void 0,W=void 0,K=void 0,X=void 0,Q=void 0,Z=void 0,J=void 0,$=void 0,tt=void 0,et=void 0,it=void 0,nt=void 0,ot=void 0,rt=void 0,at=void 0,st=void 0,lt=void 0,ut=void 0,dt=void 0,ht=void 0;function ct(){if(Nt(o.default.VIDEO)){var t=X.getPlaybackQuality();t&&I.addDroppedFrames(o.default.VIDEO,t)}}function ft(){if(!(!Z.getJumpGaps()||0===Tt()||Q.isSeeking()||J||V||q||W)&&++at>=t){var e=Q.getTime();dt===e?function(t){for(var e=Tt(),n=Z.getSmallGapLimit(),o=void 0,r=0;r<e.length;r++){var a=e[r].getBuffer().getAllBufferRanges(),s=void 0;if(a&&!(a.length<=1)){for(var l=0;l<a.length;l++)if(t<a.start(l)){s=a.start(l);break}if(s>0){var h=s-t;h>0&&h<=n&&(void 0===o||s>o)&&(o=s)}}}var c=Q.getTimeToStreamEnd();void 0===o&&!isNaN(c)&&c<n&&(o=t+c);o>0&&(!isNaN(c)&&o>=t+c?(d.info("Jumping media gap (discontinuity) at time ",t,". Jumping to end of the stream"),i.trigger(u.default.PLAYBACK_ENDED,{isLast:Bt().isLast})):(d.info("Jumping media gap (discontinuity) at time ",t,". Jumping to time position",o),Q.seek(o,!0,!0)))}(e):dt=e,at=0}}function pt(t){var e=wt(t.seekTime);ot&&(vt(),nt=!1),rt&&(d.debug("[PreloadTimer] stop period preload timer."),clearTimeout(rt),rt=void 0),e===H&&ut&&ut.deactivate(!0),e&&(e!==H||ut&&!H.isActive())?(Pt(h.PlayListTrace.END_OF_PERIOD_STOP_REASON),Ct(H,e,t.seekTime)):Pt(h.PlayListTrace.USER_REQUEST_STOP_REASON),Lt(h.PlayList.SEEK_START_REASON)}function gt(){d.debug("[onPlaybackStarted]"),$?($=!1,Lt(h.PlayList.INITIAL_PLAYOUT_START_REASON)):J&&(J=!1,Lt(h.PlayList.RESUME_FROM_PAUSE_START_REASON),yt())}function mt(t){d.debug("[onPlaybackPaused]"),t.ended||(J=!0,Pt(h.PlayListTrace.USER_REQUEST_STOP_REASON),yt())}function vt(){d.debug("[toggleEndPeriodTimer] stop end period timer."),clearTimeout(ot),ot=void 0}function yt(){if(nt)if(ot)vt();else{var t=Q.getTimeToStreamEnd(),e=t>0?1e3*t:0,n=e<2e3?e/4:e-2e3;d.debug("[toggleEndPeriodTimer] Going to fire preload in",n,"milliseconds"),rt=setTimeout(Et,n),d.debug("[toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in",e,"milliseconds"),ot=setTimeout(function(){i.trigger(u.default.PLAYBACK_ENDED,{isLast:Bt().isLast})},e)}}function _t(t){if(t.sender&&(t.sender.getType()===o.default.AUDIO||t.sender.getType()===o.default.VIDEO)){var e=Bt().isLast;K&&!e&&void 0===ot&&(d.info("[onTrackBufferingCompleted] end of period detected. Track",t.sender.getType(),"has finished"),nt=!0,!1===J&&yt())}}function bt(){var t=Bt().isLast;K&&t&&(d.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),M.signalEndOfStream(K))}function Et(){var t,e=Bt().isLast;K&&!e&&(t=xt(),(lt=H.isProtectionCompatible(t)&&(ht||H.isMediaCodecCompatible(t)))&&(d.info("[onStreamCanLoadNext] Preloading next stream"),H.stopEventController(),H.deactivate(!0),t.preload(K,st),ut=t,t.getProcessors().forEach(function(e){C.setIndexHandlerTime(e,t.getStartTime())})))}function wt(t){var e=0,i=null,n=j.length;n>0&&(e+=j[0].getStartTime());for(var o=0;o<n;o++)if(i=j[o],t<(e=parseFloat((e+i.getDuration()).toFixed(5))))return i;return null}function Tt(){return H?H.getProcessors():[]}function St(){var t=xt();t?(it=void 0,et=void 0,Ct(H,t,NaN)):d.debug("StreamController no next stream found"),Pt(t?h.PlayListTrace.END_OF_PERIOD_STOP_REASON:h.PlayListTrace.END_OF_CONTENT_STOP_REASON),ot=void 0,nt=!1}function xt(){if(H){var t=(e=Bt().start,i=Bt().duration,{v:j.filter(function(t){return t.getStreamInfo().start===parseFloat((e+i).toFixed(5))})[0]});if("object"==typeof t)return t.v}var e,i}function Ct(t,e,n){V||!e||t===e&&e.isActive()||(V=!0,i.trigger(u.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:t?t.getStreamInfo():null,toStreamInfo:e.getStreamInfo()}),lt=!1,t&&(t.stopEventController(),lt=H.isProtectionCompatible(e)&&(ht||H.isMediaCodecCompatible(e))&&!n||e.getPreloaded(),t.deactivate(lt)),H=e,ut=!1,Q.initialize(Bt(),lt),X.getElement()?It(n,t,!1,lt):function(t){At(t,lt)}(n))}function It(t,e,n,o){var r=void 0;function a(){K&&(d.debug("MediaSource is open!"),window.URL.revokeObjectURL(r),K.removeEventListener("sourceopen",a),K.removeEventListener("webkitsourceopen",a),Mt(),e||i.trigger(u.default.SOURCE_INITIALIZED),n?H.setMediaSource(K):At(t,o))}K?o?(At(t,o),e||i.trigger(u.default.SOURCE_INITIALIZED)):(M.detachMediaSource(X),K.addEventListener("sourceopen",a,!1),K.addEventListener("webkitsourceopen",a,!1),r=M.attachMediaSource(K,X),d.debug("MediaSource attached to element.  Waiting on open...")):((K=M.createMediaSource()).addEventListener("sourceopen",a,!1),K.addEventListener("webkitsourceopen",a,!1),r=M.attachMediaSource(K,X),d.debug("MediaSource attached to element.  Waiting on open..."))}function At(t,e){if(st=H.activate(K,e?st:void 0),it=kt(o.default.AUDIO),et=kt(o.default.VIDEO),st){var n=Object.keys(st);n.length>0&&st[n[0]].changeType&&(d.debug("SourceBuffer changeType method supported. Use it to switch codecs in periods transitions"),ht=!0)}var r;$||(isNaN(t)?(r=Q.getStreamStartTime(!0),e||Tt().forEach(function(t){C.setIndexHandlerTime(t,r)})):Q.seek(t)),H.startEventController(),!Y&&$||Q.play(),V=!1,i.trigger(u.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Bt()})}function Mt(t){var e=t||Bt().manifestInfo.duration,i=M.setDuration(K,e);d.debug("Duration successfully set to: "+i)}function Ot(t){for(var e=0,i=j.length;e<i;e++)if(j[e].getId()===t.id)return j[e];return null}function Dt(){var t=S.getValue();G&&(i.trigger(u.default.PROTECTION_CREATED,{controller:G,manifest:t}),G.setMediaElement(X.getElement()),z&&G.setProtectionData(z)),function(){try{var t=C.getStreamsInfo();if(0===t.length)throw new Error("There are no streams");var r=A.getCurrentManifestUpdate(I.getMetricsFor(o.default.STREAM));I.updateManifestUpdateInfo(r,{currentTime:Q.getTime(),buffered:X.getBufferRange(),presentationStartTime:t[0].start,clientTimeOffset:U.getClientTimeOffset()});for(var s=0,l=t.length;s<l;s++){var d=t[s],h=Ot(d);h?h.updateData(d):(h=(0,a.default)(e).create({manifestModel:S,dashManifestModel:x,mediaPlayerModel:Z,metricsModel:I,dashMetrics:A,manifestUpdater:w,adapter:C,timelineConverter:U,capabilities:E,errHandler:B,baseURLController:D,domStorage:R,abrController:N,playbackController:Q,mediaController:k,textController:P,videoModel:X,streamController:n}),j.push(h),h.initialize(d,G)),I.addManifestUpdateStreamInfo(r,d.id,d.index,d.start,d.duration)}if(!H){var c=Q.getStartTimeFromUriParameters(),f=null;if(c)f=wt(isNaN(c.fragS)?c.fragT:c.fragS);Ct(null,null!==f?f:j[0],NaN)}i.trigger(u.default.STREAMS_COMPOSED)}catch(t){B.manifestError(t.message,"nostreamscomposed",S.getValue()),B.error(new _.default(b.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,t.message+"nostreamscomposed",S.getValue())),W=!0,Gt()}}()}function Rt(t){t.error?(W=!0,Gt()):function(){var e=t.manifest;C.updatePeriods(e);var i=C.getStreamsInfo(void 0,1)[0],n=C.getMediaInfoForType(i,o.default.VIDEO)||C.getMediaInfoForType(i,o.default.AUDIO),r=void 0;n&&(r=x.getUseCalculatedLiveEdgeTimeForAdaptation(C.getDataForMedia(n)))&&(d.debug("SegmentTimeline detected using calculated Live Edge Time"),Z.setUseManifestDateHeaderTimeSource(!1));var a=x.getUTCTimingSources(t.manifest),s=!x.getIsDynamic(e)||r?a:a.concat(Z.getUTCTimingSources()),l=F.isHTTPS(t.manifest.url);s.forEach(function(t){t.value.replace(/.*?:\/\//g,"")===Z.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(t.value=t.value.replace(l?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),l?"https://":"http://"),d.debug("Matching default timing source protocol to manifest protocol: ",t.value))}),D.initialize(e),O.setConfig({metricsModel:I,dashMetrics:A,baseURLController:D}),O.initialize(s,Z.getUseManifestDateHeaderTimeSource())}()}function Nt(t){var e=void 0;if(!t)return e;switch(t){case o.default.VIDEO:e=et;break;case o.default.AUDIO:e=it}return e}function kt(t){var e=!1;return Tt().forEach(function(i){i.getMediaInfo().type===t&&(e=!0)}),e}function Pt(t,e){e=e||new Date,tt&&(Tt().forEach(function(i){var n=i.getScheduleController();n&&n.finalisePlayList(e,t)}),I.addPlayList(tt),tt=null)}function Lt(t){(tt=new h.PlayList).start=new Date,tt.mstart=1e3*Q.getTime(),tt.starttype=t,Tt().forEach(function(t){var e=t.getScheduleController();e&&e.setPlayList(tt)})}function Ft(t){if(t.error){var e="";switch(t.error.code){case 1:e="MEDIA_ERR_ABORTED";break;case 2:e="MEDIA_ERR_NETWORK";break;case 3:e="MEDIA_ERR_DECODE";break;case 4:e="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:e="MEDIA_ERR_ENCRYPTED";break;default:e="UNKNOWN"}q=!0,t.error.message&&(e+=" ("+t.error.message+")"),t.error.msExtendedCode&&(e+=" (0x"+(t.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),d.fatal("Video Element Error: "+e),t.error&&d.fatal(t.error),B.mediaSourceError(e),B.error(new _.default(t.error.code,e)),Gt()}}function Bt(){return H?H.getStreamInfo():null}function Ut(){if(!(T&&T.hasOwnProperty("load")&&U&&U.hasOwnProperty("initialize")&&U.hasOwnProperty("reset")&&U.hasOwnProperty("getClientTimeOffset")&&S&&B&&I&&Q))throw new Error("setConfig function has to be called previously")}function jt(t){isNaN(t.newDuration)||Mt(t.newDuration)}function Ht(){j=[],G=null,V=!1,H=null,q=!1,W=!1,et=void 0,it=void 0,$=!0,J=!1,Y=!0,tt=null,ot=void 0,nt=!1,at=0}function Gt(){Ut(),O.reset(),Pt(q||W?h.PlayListTrace.FAILURE_STOP_REASON:h.PlayListTrace.USER_REQUEST_STOP_REASON);for(var t=0,e=j?j.length:0;t<e;t++){j[t].reset(q)}!function(){i.off(u.default.PLAYBACK_TIME_UPDATED,ct,this),i.off(u.default.PLAYBACK_SEEKING,pt,this),i.off(u.default.PLAYBACK_ERROR,Ft,this),i.off(u.default.PLAYBACK_STARTED,gt,this),i.off(u.default.PLAYBACK_PAUSED,mt,this),i.off(u.default.PLAYBACK_ENDED,St,this),i.off(u.default.MANIFEST_UPDATED,Rt,this),i.off(u.default.BUFFERING_COMPLETED,_t,this),i.off(u.default.STREAM_BUFFERING_COMPLETED,bt,this),i.off(u.default.MANIFEST_VALIDITY_CHANGED,jt,this),i.off(u.default.TIME_SYNCHRONIZATION_COMPLETED,Dt,this),i.off(u.default.WALLCLOCK_TIME_UPDATED,ft,this),i.off(g.default.METRIC_ADDED,zt,this)}(),D.reset(),w.reset(),I.clearAllCurrentMetrics(),S.setValue(null),T.reset(),U.reset(),L.reset(),K&&(M.detachMediaSource(X),K=null),X=null,G&&(G.setMediaElement(null),G=null,z=null,S.getValue()&&i.trigger(u.default.PROTECTION_DESTROYED,{data:S.getValue().url})),i.trigger(u.default.STREAM_TEARDOWN_COMPLETE),Ht()}function zt(t){t.metric===r.default.DVR_INFO&&t.mediaType===o.default.AUDIO&&M.setSeekable(K,t.value.range.start,t.value.range.end)}return n={initialize:function(t,n){Ut(),Y=t,z=n,U.initialize(),(w=(0,s.default)(e).create()).setConfig({manifestModel:S,dashManifestModel:x,mediaPlayerModel:Z,manifestLoader:T,errHandler:B}),w.initialize(),D.setConfig({dashManifestModel:x}),function(){i.on(u.default.PLAYBACK_TIME_UPDATED,ct,this),i.on(u.default.PLAYBACK_SEEKING,pt,this),i.on(u.default.PLAYBACK_ERROR,Ft,this),i.on(u.default.PLAYBACK_STARTED,gt,this),i.on(u.default.PLAYBACK_PAUSED,mt,this),i.on(u.default.PLAYBACK_ENDED,St,this),i.on(u.default.MANIFEST_UPDATED,Rt,this),i.on(u.default.BUFFERING_COMPLETED,_t,this),i.on(u.default.STREAM_BUFFERING_COMPLETED,bt,this),i.on(u.default.MANIFEST_VALIDITY_CHANGED,jt,this),i.on(u.default.TIME_SYNCHRONIZATION_COMPLETED,Dt,this),i.on(u.default.WALLCLOCK_TIME_UPDATED,ft,this),i.on(g.default.METRIC_ADDED,zt,this)}()},getActiveStreamInfo:Bt,isTrackTypePresent:Nt,switchToVideoElement:function(t){H&&(Q.initialize(Bt()),It(t,null,!0,!1))},getStreamById:function(t){return j.filter(function(e){return e.getId()===t})[0]},getStreamForTime:wt,getTimeRelativeToStreamId:function(t,e){for(var i=null,n=0,o=0,r=null,a=j.length,s=0;s<a;s++){if(o=(i=j[s]).getStartTime(),r=i.getDuration(),Number.isFinite(o)&&(n=o),i.getId()===e)return t-n;Number.isFinite(r)&&(n+=r)}return null},load:function(t){Ut(),T.load(t)},loadWithManifest:function(t){!function(){if(!w||!w.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),w.setManifest(t)},getActiveStreamProcessors:Tt,setConfig:function(t){t&&(t.capabilities&&(E=t.capabilities),t.manifestLoader&&(T=t.manifestLoader),t.manifestModel&&(S=t.manifestModel),t.dashManifestModel&&(x=t.dashManifestModel),t.mediaPlayerModel&&(Z=t.mediaPlayerModel),t.protectionController&&(G=t.protectionController),t.adapter&&(C=t.adapter),t.metricsModel&&(I=t.metricsModel),t.dashMetrics&&(A=t.dashMetrics),t.errHandler&&(B=t.errHandler),t.timelineConverter&&(U=t.timelineConverter),t.videoModel&&(X=t.videoModel),t.playbackController&&(Q=t.playbackController),t.domStorage&&(R=t.domStorage),t.abrController&&(N=t.abrController),t.mediaController&&(k=t.mediaController),t.textController&&(P=t.textController))},setProtectionData:function(t){z=t},reset:Gt},d=(0,c.default)(e).getInstance().getLogger(n),O=(0,m.default)(e).getInstance(),D=(0,v.default)(e).getInstance(),M=(0,y.default)(e).getInstance(),L=(0,f.default)(e).getInstance(),F=(0,p.default)(e).getInstance(),Ht(),n}E.__dashjs_factory_name="StreamController",e.default=d.default.getSingletonFactory(E),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(214)),a=n(i(230)),s=n(i(231)),l=n(i(235)),u=n(i(2)),d=n(i(4)),h=n(i(3)),c=n(i(9)),f=n(i(0)),p=n(i(6));function g(t){t=t||{};var e=this.context,i=(0,u.default)(e).getInstance(),n=t.manifestModel,f=t.dashManifestModel,g=t.mediaPlayerModel,m=t.manifestUpdater,v=t.adapter,y=t.capabilities,_=t.errHandler,b=t.timelineConverter,E=t.metricsModel,w=t.abrController,T=t.playbackController,S=t.mediaController,x=t.textController,C=t.videoModel,I=void 0,A=void 0,M=void 0,O=void 0,D=void 0,R=void 0,N=void 0,k=void 0,P=void 0,L=void 0,F=void 0,B=void 0,U=void 0,j=void 0,H=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function G(t){for(var e=M?M.length:0,n=0;n<e;n++){M[n].getFragmentModel().removeExecutedRequestsBeforeTime(q()+V()),M[n].reset(!1,t)}M=[],O=!1,D=!1,dt(!1),i.off(d.default.CURRENT_TRACK_CHANGED,Z,I)}function z(){G(),R=null,N={},k=!1}function Y(){T&&T.pause(),L&&(L.reset(),L=null),z(),i.off(d.default.DATA_UPDATE_COMPLETED,rt,I),i.off(d.default.BUFFERING_COMPLETED,ot,I),P&&(i.off(d.default.KEY_ERROR,X,I),i.off(d.default.SERVER_CERTIFICATE_UPDATED,X,I),i.off(d.default.LICENSE_REQUEST_COMPLETE,X,I),i.off(d.default.KEY_SYSTEM_SELECTED,X,I),i.off(d.default.KEY_SESSION_CREATED,X,I),i.off(d.default.KEY_STATUSES_CHANGED,X,I)),dt(!1)}function V(){return R?R.duration:NaN}function q(){return R?R.start:NaN}function W(){return R}function K(){if(!(w&&w.hasOwnProperty("getBitrateList")&&v&&v.hasOwnProperty("getAllMediaInfoForType")&&v.hasOwnProperty("getEventsFor")))throw new Error(o.default.MISSING_CONFIG_ERROR)}function X(t){t.error&&(_.mediaKeySessionError(t.error.message),_.error(t.error),A.fatal(t.error.message),Y())}function Q(t){var e,i=t.type,r=void 0;if(i===o.default.MUXED&&t)return r="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",A.fatal(r),_.manifestError(r,"multiplexedrep",n.getValue()),_.error(new p.default(c.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,r,n.getValue())),!1;if(i===o.default.TEXT||i===o.default.FRAGMENTED_TEXT||i===o.default.EMBEDDED_TEXT||i===o.default.IMAGE)return!0;if(e=t.codec,A.debug(i+" codec: "+e),t.contentProtection&&!y.supportsEncryptedMedia())_.capabilityError("encryptedmedia"),_.error(new p.default(c.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,c.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));else if(!y.supportsCodec(e))return r=i+"Codec ("+e+") is not supported.",A.error(r),!1;return!0}function Z(t){if(t.newMediaInfo.streamInfo.id===R.id){var e=at(t.newMediaInfo);if(e){var i=T.getTime();A.info("Stream -  Process track changed at current time "+i);var r=t.newMediaInfo,a=n.getValue();v.setCurrentMediaInfo(R.id,r.type,r),A.debug("Stream -  Update stream controller"),a.refreshManifestOnSwitchTrack?(A.debug("Stream -  Refreshing manifest for switch track"),j=t,m.refreshManifest()):(e.selectMediaInfo(r),r.type!==o.default.FRAGMENTED_TEXT?(w.updateTopQualityIndex(r),e.switchTrackAsked(),e.getFragmentModel().abortRequests()):(e.getScheduleController().setSeekTarget(NaN),v.setIndexHandlerTime(e,i),v.resetIndexHandler(e)))}}}function J(i,a){var s=v.getAllMediaInfoForType(R,i),u=null,d=void 0;if(s&&0!==s.length){for(var h=0,c=s.length;h<c;h++)if(u=s[h],i===o.default.EMBEDDED_TEXT)x.addEmbeddedTrack(u);else{if(!Q(u))continue;S.addTrack(u)}i!==o.default.EMBEDDED_TEXT&&0!==S.getTracksFor(i,R).length&&(i!==o.default.IMAGE?((i!==o.default.FRAGMENTED_TEXT||i===o.default.FRAGMENTED_TEXT&&x.getTextDefaultEnabled())&&(S.checkInitialMediaSettingsForType(i,R),d=S.getCurrentTrackFor(i,R)),i!==o.default.FRAGMENTED_TEXT||x.getTextDefaultEnabled()||(d=S.getTracksFor(i,R)[0]),function(i,a,s,l){var u=(0,r.default)(e).create({type:i.type,mimeType:i.mimeType,timelineConverter:b,adapter:v,manifestModel:n,dashManifestModel:f,mediaPlayerModel:g,metricsModel:E,dashMetrics:t.dashMetrics,baseURLController:t.baseURLController,stream:I,abrController:w,domStorage:t.domStorage,playbackController:T,mediaController:S,streamController:t.streamController,textController:x,errHandler:_});if(u.initialize(s),w.updateTopQualityIndex(i),l?(u.setBuffer(l.buffer),u.getIndexHandler().setCurrentTime(l.currentTime),M[l.replaceIdx]=u):M.push(u),!l||!l.ignoreMediaInfo)if(i.type===o.default.TEXT||i.type===o.default.FRAGMENTED_TEXT){for(var d=void 0,h=0;h<a.length;h++)a[h].index===i.index&&(d=h),u.addMediaInfo(a[h]);u.selectMediaInfo(a[d])}else u.addMediaInfo(i,!0)}(d,s,a)):F=(0,l.default)(e).create({dashManifestModel:f,adapter:v,baseURLController:t.baseURLController,stream:I,timelineConverter:t.timelineConverter}))}else A.info("No "+i+" data.")}function $(){B||((B=(0,a.default)(e).create()).setConfig({manifestUpdater:m,playbackController:T}),tt())}function tt(){var t=v.getEventsFor(R);B.addInlineEvents(t)}function et(t){var e=v.getAdaptationForType(n.getValue(),R.index,t,R);e&&Array.isArray(e.Representation_asArray)&&(e.Representation_asArray=e.Representation_asArray.filter(function(t,i){if(0===i)return!0;var n=f.getCodec(e,i,!0);return!!y.supportsCodec(n)||(A.error("[Stream] codec not supported: "+n),!1)}))}function it(){for(var t=M.length,e=!!N.audio||!!N.video?new p.default(c.default.DATA_UPDATE_FAILED_ERROR_CODE,c.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,n=0;n<t;n++)if(M[n].isUpdating()||k)return;if(D){if(P)for(n=0;n<t&&M[n];n++)M[n].getType()!==o.default.AUDIO&&M[n].getType()!==o.default.VIDEO&&M[n].getType()!==o.default.FRAGMENTED_TEXT||P.initializeForMedia(M[n].getMediaInfo());i.trigger(d.default.STREAM_INITIALIZED,{streamInfo:R,error:e})}}function nt(t){for(var e={},i=0,n=M.length;i<n;i++)e[M[i].getType()]=M[i].createBuffer(t).getBuffer();return e}function ot(t){if(t.streamInfo===R){var e=st(),n=e.length;if(0!==n){for(var r=0;r<n;r++)if(!e[r].isBufferingCompleted()&&(e[r].getType()===o.default.AUDIO||e[r].getType()===o.default.VIDEO))return void A.warn("onBufferingCompleted - One streamProcessor has finished but",e[r].getType(),"one is not buffering completed");A.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),i.trigger(d.default.STREAM_BUFFERING_COMPLETED,{streamInfo:R})}else A.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}}function rt(t){var e=t.sender.getStreamProcessor();e.getStreamInfo()===R&&(N[e.getType()]=t.error,it())}function at(t){return t?st().filter(function(e){return e.getType()===t.type})[0]:null}function st(){for(var t=M.length,e=[],i=void 0,n=void 0,r=0;r<t;r++)(i=(n=M[r]).getType())!==o.default.AUDIO&&i!==o.default.VIDEO&&i!==o.default.FRAGMENTED_TEXT&&i!==o.default.TEXT||e.push(n);return e}function lt(t,e){if(!t)return!1;var i=t.getStreamInfo(),o=W();if(!i||!o)return!1;var r=v.getAdaptationForType(n.getValue(),i.index,e,i),a=v.getAdaptationForType(n.getValue(),o.index,e,o);return r&&a?!r.ContentProtection&&!a.ContentProtection:!r&&!a}function ut(t,e){if(!t)return!1;var i=t.getStreamInfo(),o=W();if(!i||!o)return!1;var r=v.getAdaptationForType(n.getValue(),i.index,e,i),a=v.getAdaptationForType(n.getValue(),o.index,e,o);if(!r||!a)return!r&&!a;var s=r&&a&&r.mimeType===a.mimeType,l=a.Representation_asArray.map(function(t){return t.codecs}),u=r.Representation_asArray.map(function(t){return t.codecs}),d=u.some(function(t){return l.indexOf(t)>-1}),h=u.some(function(t){return l.some(function(e){return function(t,e){for(var i=t.split(".")[0],n=0===e.indexOf(i),o=void 0,r=0;r<H.length;r++)if(H[r].codec===i){o=H[r];break}if(o)return n||o.compatibleCodecs.some(function(t){return 0===e.indexOf(t)});return n}(e,t)})});return d||h&&s}function dt(t){U=t}function ht(){return U}return I={initialize:function(t,e){R=t,(P=e)&&(i.on(d.default.KEY_ERROR,X,I),i.on(d.default.SERVER_CERTIFICATE_UPDATED,X,I),i.on(d.default.LICENSE_REQUEST_COMPLETE,X,I),i.on(d.default.KEY_SYSTEM_SELECTED,X,I),i.on(d.default.KEY_SESSION_CREATED,X,I),i.on(d.default.KEY_STATUSES_CHANGED,X,I))},activate:function(t,e){if(!O){var r=void 0;return i.on(d.default.CURRENT_TRACK_CHANGED,Z,I),ht()?(!function(){if(k=!0,K(),et(o.default.VIDEO),et(o.default.AUDIO),D=!0,k=!1,0===M.length){var t="No streams to play.";_.manifestError(t,"nostreams",n.getValue()),A.debug(t)}else it()}(),r=e):r=function(t,e){K();var i=C.getElement();$(),k=!0,et(o.default.VIDEO),et(o.default.AUDIO),(null===i||i&&/^VIDEO$/i.test(i.nodeName))&&J(o.default.VIDEO,t);J(o.default.AUDIO,t),J(o.default.TEXT,t),J(o.default.FRAGMENTED_TEXT,t),J(o.default.EMBEDDED_TEXT,t),J(o.default.MUXED,t),J(o.default.IMAGE,t);var r=nt(e);if(D=!0,k=!1,0===M.length){var a="No streams to play.";_.manifestError(a,"nostreams",n.getValue()),_.error(new p.default(c.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,a,n.getValue())),A.fatal(a)}else it();return r}(t,e),O=!0,r}return e},deactivate:G,isActive:function(){return O},getDuration:V,getStartTime:q,getId:function(){return R?R.id:null},getStreamInfo:W,preload:function(t,e){$(),J(o.default.VIDEO,t),J(o.default.AUDIO,t),J(o.default.TEXT,t),J(o.default.FRAGMENTED_TEXT,t),J(o.default.EMBEDDED_TEXT,t),J(o.default.MUXED,t),J(o.default.IMAGE,t),nt(e),i.on(d.default.CURRENT_TRACK_CHANGED,Z,I);for(var n=0;n<M.length&&M[n];n++)M[n].getScheduleController().start();dt(!0)},getFragmentController:function(){return L},getThumbnailController:function(){return F},getBitrateListFor:function(t){if(K(),t===o.default.IMAGE)return F?F.getBitrateList():[];var e=function(t){for(var e=M.length,i=null,n=0;n<e;n++)if((i=M[n]).getType()===t)return i.getMediaInfo();return null}(t);return w.getBitrateList(e)},startEventController:function(){B&&B.start()},stopEventController:function(){B&&B.stop()},updateData:function(t){A.info("Manifest updated... updating data system wide."),O=!1,k=!0,R=t,B&&tt(),et(o.default.VIDEO),et(o.default.AUDIO);for(var e=0,i=M.length;e<i;e++){var n=M[e],r=v.getMediaInfoForType(R,n.getType());w.updateTopQualityIndex(r),n.addMediaInfo(r,!0)}if(j&&"fragmentedText"!==(r=j.newMediaInfo).type){var a=at(j.oldMediaInfo);if(!a)return;a.switchTrackAsked(),j=void 0}k=!1,it()},reset:Y,getProcessors:st,setMediaSource:function(t){for(var e=0;e<M.length;)Q(M[e].getMediaInfo())?(M[e].setMediaSource(t),e++):(M[e].reset(),M.splice(e,1));for(e=0;e<M.length;e++)M[e].dischargePreBuffer();if(0===M.length){var i="No streams to play.";_.manifestError(i,"nostreams",n.getValue()),_.error(new p.default(c.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,i+"nostreams",n.getValue())),A.fatal(i)}},isMediaCodecCompatible:function(t){return ut(t,o.default.VIDEO)&&ut(t,o.default.AUDIO)},isProtectionCompatible:function(t){return lt(t,o.default.VIDEO)&&lt(t,o.default.AUDIO)},getPreloaded:ht,addInbandEvents:function(t){B&&B.addInbandEvents(t)}},A=(0,h.default)(e).getInstance().getLogger(I),z(),L=(0,s.default)(e).create({mediaPlayerModel:g,metricsModel:E,errHandler:_}),i.on(d.default.BUFFERING_COMPLETED,ot,I),i.on(d.default.DATA_UPDATE_COMPLETED,rt,I),I}g.__dashjs_factory_name="Stream",e.default=f.default.getClassFactory(g),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(215)),a=n(i(25)),s=n(i(216)),l=n(i(218)),u=n(i(221)),d=n(i(0)),h=n(i(222));function c(t){t=t||{};var e=this.context,i=t.type,n=t.errHandler,d=t.mimeType,c=t.timelineConverter,f=t.adapter,p=t.manifestModel,g=t.mediaPlayerModel,m=t.stream,v=t.abrController,y=t.playbackController,_=t.streamController,b=t.mediaController,E=t.textController,w=t.domStorage,T=t.metricsModel,S=t.dashMetrics,x=t.dashManifestModel,C=void 0,I=void 0,A=void 0,M=void 0,O=void 0,D=void 0,R=void 0,N=void 0,k=void 0,P=void 0;function L(){k=[]}function F(){A=[],I=null,L()}function B(){return m?m.getStreamInfo():null}function U(){return I}return C={initialize:function(r){(P=(0,h.default)(e).create({mimeType:d,timelineConverter:c,dashMetrics:S,metricsModel:T,mediaPlayerModel:g,baseURLController:t.baseURLController,errHandler:n})).initialize(C),v.registerStreamType(i,C),(N=m.getFragmentController().getModel(i)).setStreamProcessor(C),M=function(t){var i=null;i=t===o.default.VIDEO||t===o.default.AUDIO?(0,a.default)(e).create({type:t,metricsModel:T,mediaPlayerModel:g,manifestModel:p,errHandler:n,streamController:_,mediaController:b,adapter:f,textController:E,abrController:v,playbackController:y,streamProcessor:C}):(0,s.default)(e).create({type:t,mimeType:d,metricsModel:T,mediaPlayerModel:g,manifestModel:p,errHandler:n,streamController:_,mediaController:b,adapter:f,textController:E,abrController:v,playbackController:y,streamProcessor:C});return i}(i),O=(0,l.default)(e).create({type:i,mimeType:d,metricsModel:T,adapter:f,dashMetrics:S,dashManifestModel:x,timelineConverter:c,mediaPlayerModel:g,abrController:v,playbackController:y,streamController:_,textController:E,streamProcessor:C,mediaController:b}),(R=(0,u.default)(e).create()).setConfig({abrController:v,domStorage:w,metricsModel:T,dashMetrics:S,dashManifestModel:x,manifestModel:p,playbackController:y,timelineConverter:c,streamProcessor:C}),M.initialize(r),O.initialize(),R.initialize()},isUpdating:function(){return!!R&&R.isUpdating()},getType:function(){return i},getBufferController:function(){return M},getFragmentModel:function(){return N},getScheduleController:function(){return O},getLiveEdgeFinder:function(){return D},getFragmentController:function(){return m?m.getFragmentController():null},getRepresentationController:function(){return R},getIndexHandler:function(){return P},getRepresentationInfo:function(t){return f.getRepresentationInfo(R,t)},getBufferLevel:function(){return M.getBufferLevel()},switchInitData:function(t,e){M&&M.switchInitData(B().id,t,e)},isBufferingCompleted:function(){return!!M&&M.getIsBufferingCompleted()},timeIsBuffered:function(t){return!!M&&null!==M.getRangeAt(t,0)},createBuffer:function(t){return M.getBuffer()||M.createBuffer(I,t)},getStreamInfo:B,selectMediaInfo:function(t){t===I||t&&I&&t.type!==I.type||(I=t),f.updateData(this)},addMediaInfo:function(t,e){-1===A.indexOf(t)&&A.push(t),e&&this.selectMediaInfo(t)},switchTrackAsked:function(){O.switchTrackAsked()},getMediaInfoArr:function(){return A},getMediaInfo:U,getMediaSource:function(){return M.getMediaSource()},setMediaSource:function(t){M.setMediaSource(t,U())},dischargePreBuffer:function(){M.dischargePreBuffer()},getBuffer:function(){return M.getBuffer()},setBuffer:function(t){M.setBuffer(t)},registerExternalController:function(t){k.push(t)},unregisterExternalController:function(t){var e=k.indexOf(t);-1!==e&&k.splice(e,1)},getExternalControllers:function(){return k},unregisterAllExternalController:L,addInbandEvents:function(t){m&&m.addInbandEvents(t)},reset:function(t,e){P.reset(),M&&(M.reset(t,e),M=null),O&&(O.reset(),O=null),R&&(R.reset(),R=null),v&&v.unRegisterStreamType(i),k.forEach(function(t){t.reset()}),F(),i=null,m=null,D&&(D.reset(),D=null)}},y&&y.getIsDynamic()&&(D=(0,r.default)(e).create({timelineConverter:c,streamProcessor:C})),F(),C}c.__dashjs_factory_name="StreamProcessor",e.default=d.default.getClassFactory(c),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(1));function a(t){var e=(t=t||{}).timelineConverter,i=t.streamProcessor;return{getLiveEdge:function(){!function(){if(!(e&&e.hasOwnProperty("getExpectedLiveEdge")&&i&&i.hasOwnProperty("getRepresentationInfo")))throw new Error(r.default.MISSING_CONFIG_ERROR)}();var t=i.getRepresentationInfo(),n=t.DVRWindow?t.DVRWindow.end:0,o=n;return t.useCalculatedLiveEdgeTime&&(o=e.getExpectedLiveEdge(),e.setClientTimeOffset(o-n)),o},reset:function(){e=null,i=null}}}a.__dashjs_factory_name="LiveEdgeFinder",e.default=o.default.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(0)),a=n(i(25)),s=n(i(217));function l(t){t=t||{};var e,i=this.context,n=void 0;function r(){return n.getBuffer()}return e={getBufferControllerType:function(){return n.getBufferControllerType()},initialize:function(t,e){return n.initialize(t,e)},createBuffer:function(t){return n.createBuffer(t)},getType:function(){return n.getType()},getStreamProcessor:function(){n.getStreamProcessor()},setSeekStartTime:function(t){n.setSeekStartTime(t)},getBuffer:r,setBuffer:function(t){n.setBuffer(t)},getBufferLevel:function(){return n.getBufferLevel()},setMediaSource:function(t){n.setMediaSource(t)},getMediaSource:function(){return n.getMediaSource()},getIsBufferingCompleted:function(){return n.getIsBufferingCompleted()},getIsPruningInProgress:function(){return n.getIsPruningInProgress()},dischargePreBuffer:function(){return n.dischargePreBuffer()},switchInitData:function(t,e){n.switchInitData(t,e)},getRangeAt:function(t){return n.getRangeAt(t)},reset:function(t){n.reset(t)},updateTimestampOffset:function(t){var e=r();e.timestampOffset===t||isNaN(t)||(e.timestampOffset=t)}},n=t.type===o.default.FRAGMENTED_TEXT?(0,a.default)(i).create({type:t.type,metricsModel:t.metricsModel,mediaPlayerModel:t.mediaPlayerModel,manifestModel:t.manifestModel,errHandler:t.errHandler,streamController:t.streamController,mediaController:t.mediaController,adapter:t.adapter,textController:t.textController,abrController:t.abrController,playbackController:t.playbackController,streamProcessor:t.streamProcessor}):(0,s.default)(i).create({type:t.type,mimeType:t.mimeType,errHandler:t.errHandler,streamProcessor:t.streamProcessor}),e}l.__dashjs_factory_name="TextBufferController",e.default=r.default.getClassFactory(l),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(2)),a=n(i(4)),s=n(i(0)),l=n(i(72)),u=n(i(106)),d=n(i(67)),h=n(i(6)),c=n(i(9)),f="NotFragmentedTextBufferController";function p(t){t=t||{};var e=this.context,i=(0,r.default)(e).getInstance(),n=(0,d.default)(e).getInstance(),s=t.errHandler,p=t.type,g=t.mimeType,m=t.streamProcessor,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,w=void 0;function T(t){b=t}function S(t){t.sender.getStreamProcessor()===m&&(w.extract(m.getStreamInfo().id,t.sender.getCurrentRepresentation().id)||i.trigger(a.default.TIMED_TEXT_REQUESTED,{index:0,sender:t.sender}))}function x(t){t.fragmentModel===m.getFragmentModel()&&t.chunk.bytes&&(w.save(t.chunk),E.append(t.chunk),i.trigger(a.default.STREAM_COMPLETED,{request:t.request,fragmentModel:t.fragmentModel}))}return v={getBufferControllerType:function(){return f},initialize:function(t){T(t),w=(0,l.default)(e).getInstance()},createBuffer:function(t){try{if(E=(0,u.default)(e).create(b,t),!_){var i=E.getBuffer();i.hasOwnProperty(o.default.INITIALIZE)&&i.initialize(g,m),_=!0}return E}catch(e){if(t.isText||-1!==t.codec.indexOf('codecs="stpp')||-1!==t.codec.indexOf('codecs="wvtt'))try{E=n.getTextSourceBuffer()}catch(t){s.mediaSourceError("Error creating "+p+" source buffer."),s.error(new h.default(c.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,c.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+p+" : "+t.message))}else s.mediaSourceError("Error creating "+p+" source buffer."),s.error(new h.default(c.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,c.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+p))}},getType:function(){return p},getStreamProcessor:function(){return m},setSeekStartTime:function(){},getBuffer:function(){return E},getBufferLevel:function(){return 0},setMediaSource:T,getMediaSource:function(){return b},getIsBufferingCompleted:function(){return y},getIsPruningInProgress:function(){return!1},dischargePreBuffer:function(){},switchInitData:function(t,e){w.extract(t,e)||i.trigger(a.default.TIMED_TEXT_REQUESTED,{index:0,sender:v})},getRangeAt:function(){return null},reset:function(t){i.off(a.default.DATA_UPDATE_COMPLETED,S,v),i.off(a.default.INIT_FRAGMENT_LOADED,x,v),!t&&E&&(E.abort(),E.reset(),E=null)},updateTimestampOffset:function(t){E.timestampOffset===t||isNaN(t)||(E.timestampOffset=t)}},_=!1,b=null,y=!1,i.on(a.default.DATA_UPDATE_COMPLETED,S,v),i.on(a.default.INIT_FRAGMENT_LOADED,x,v),v}p.__dashjs_factory_name=f,e.default=s.default.getClassFactory(p),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=i(113),a=n(i(53)),s=n(i(25)),l=n(i(219)),u=n(i(220)),d=n(i(49)),h=n(i(2)),c=n(i(4)),f=n(i(0)),p=n(i(3)),g=n(i(71)),m=i(27);function v(t){t=t||{};var e=this.context,i=(0,h.default)(e).getInstance(),n=t.metricsModel,f=t.adapter,v=t.dashMetrics,y=t.dashManifestModel,_=t.timelineConverter,b=t.mediaPlayerModel,E=t.abrController,w=t.playbackController,T=t.streamController,S=t.textController,x=t.type,C=t.streamProcessor,I=t.mediaController,A=void 0,M=void 0,O=void 0,D=void 0,R=void 0,N=void 0,k=void 0,P=void 0,L=void 0,F=void 0,B=void 0,U=void 0,j=void 0,H=void 0,G=void 0,z=void 0,Y=void 0,V=void 0,q=void 0,W=void 0,K=void 0,X=void 0,Q=void 0;function Z(){D&&!C.isBufferingCompleted()?(M.debug("Schedule Controller starts"),Ct(),N=!1,R&&(R=!1),tt(0)):M.warn("Start denied to Schedule Controller")}function J(){N||(M.debug("Schedule Controller stops"),N=!0,clearTimeout(U))}function $(){var t=C.getBufferController();if(N||F||!t||w.isPaused()&&!b.getScheduleWhilePaused()||!(x!==o.default.FRAGMENTED_TEXT&&x!==o.default.TEXT||S.isTextEnabled()))M.debug("Schedule stop!");else if(t.getIsBufferingCompleted())M.debug("Schedule stop because buffering is completed!");else{!function(){var t=w.getTime(),e=1.5*D.fragmentDuration,i=O.getRequests({state:d.default.FRAGMENT_MODEL_EXECUTED,time:t+e,threshold:0})[0];if(i&&-1===q.indexOf(i)&&!y.getIsTextTrack(x)){var n=b.getFastSwitchEnabled(),o=C.getBufferLevel(),r=E.getAbandonmentStateFor(x),s=!I.isCurrentTrack(i.mediaInfo)&&I.getSwitchMode(i.mediaInfo.type)===g.default.TRACK_SWITCH_MODE_NEVER_REPLACE,l=i.quality<D.quality;n&&(s||l)&&o>=e&&r!==a.default.ABANDON_LOAD?(ot(i),Q=!0,M.debug("Reloading outdated fragment at index: ",i.index)):i.quality>D.quality&&!K&&Tt(w.getTime()+C.getBufferLevel())}}();var e=q.length>0,i=C.getStreamInfo();if(K||isNaN(V)||W||e||function(t,e){Y[e]=Y[e]||{};var i=E.getTopQualityIndexFor(t,e);return Y[e][t]!=i&&(M.info("Top quality "+t+" index has changed from "+Y[e][t]+" to "+i),Y[e][t]=i,!0)}(D.mediaInfo.type,i.id)||H.execute(C,T.isTrackTypePresent(o.default.VIDEO))){it(!0),e||W||E.checkPlaybackQuality(x),function(){var t=C.getFragmentController();if(D.quality===V&&!W||K){var e=q.shift();if(t.isInitializationRequest(e))C.switchInitData(e.representationId);else{var n=void 0;C.getBufferController().getIsPruningInProgress()||(n=G.execute(C,j,e),Tt(NaN),n&&!e&&(isNaN(n.startTime+n.duration)||f.setIndexHandlerTime(C,n.startTime+n.duration),n.delayLoadingTime=(new Date).getTime()+B,St(0)),!n&&i.manifestInfo&&i.manifestInfo.isDynamic&&M.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling.")),n?(M.debug("Next fragment request url is "+n.url),O.executeRequest(n)):(it(!1),tt(b.getLowLatencyEnabled()?100:500))}}else M.debug("Quality has changed, get init request for representationid = "+D.id),W?(K=I.getSwitchMode(x)===g.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,M.debug("Switch track has been asked, get init request for "+x+" with representationid = "+D.id+"bufferResetInProgress = "+K),C.switchInitData(D.id,K),W=!1):C.switchInitData(D.id),V=D.quality}()}else tt(500)}}function tt(t){clearTimeout(U),U=setTimeout($,t)}function et(t){t.sender&&t.sender.getStreamProcessor()===C&&nt(D.quality)}function it(t){F!==t?F=t:M.debug("isFragmentProcessingInProgress is already equal to",t)}function nt(t){var e=f.getInitRequest(C,t);e&&(it(!0),e.url=(0,m.replaceTokenForTemplate)(e.url,"Bandwidth",D?D.bandwidth:null),O.executeRequest(e))}function ot(t){q.push(t)}function rt(t){if(x===t.mediaType&&C.getStreamInfo().id===t.streamInfo.id){if(null==(D=C.getRepresentationInfo(t.newQuality)))throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");xt(new Date,r.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),Ct()}}function at(t){if(w&&O){var e=O.getRequests({state:d.default.FRAGMENT_MODEL_EXECUTED,time:w.getTime(),threshold:0})[0];e&&w.getTime()>=e.startTime&&((!z.mediaInfo||e.mediaInfo.type===z.mediaInfo.type&&e.mediaInfo.id!==z.mediaInfo.id)&&t&&i.trigger(c.default.TRACK_CHANGE_RENDERED,{mediaType:x,oldMediaInfo:z.mediaInfo,newMediaInfo:e.mediaInfo}),e.quality===z.quality&&e.adaptationIndex===z.adaptationIndex||!t||i.trigger(c.default.QUALITY_CHANGE_RENDERED,{mediaType:x,oldQuality:z.quality,newQuality:e.quality}),z={mediaInfo:e.mediaInfo,quality:e.quality,adaptationIndex:e.adaptationIndex})}}function st(t){t.error||t.sender.getStreamProcessor()!==C||(D=f.convertDataToRepresentationInfo(t.currentRepresentation))}function lt(t){t.error||C.getStreamInfo().id!==t.streamInfo.id||(D=C.getRepresentationInfo(),R&&(w.getIsDynamic()?(_.setTimeSyncCompleted(!0),function(){var t=C.getLiveEdgeFinder();if(t){var e=t.getLiveEdge(),i=D.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,r=e-w.computeLiveDelay(D.fragmentDuration,i),a=f.getFragmentRequest(C,D,r,{ignoreIsFinished:!0});if(a)if(b.getLowLatencyEnabled()){var s=a.duration<b.getLiveDelay()?a.startTime:a.startTime+a.duration-b.getLiveDelay();w.setLiveStartTime(s)}else w.setLiveStartTime(a.startTime);else M.debug("setLiveEdgeSeekTarget : getFragmentRequest returned undefined request object");j=w.getStreamStartTime(!1,e),C.getBufferController().setSeekStartTime(j),j>D.mediaInfo.streamInfo.start+D.mediaInfo.streamInfo.duration&&w.seek(j);var l=v.getCurrentManifestUpdate(n.getMetricsFor(o.default.STREAM));n.updateManifestUpdateInfo(l,{currentTime:j,presentationStartTime:e,latency:e-j,clientTimeOffset:_.getClientTimeOffset()})}}()):(j=w.getStreamStartTime(!1),C.getBufferController().setSeekStartTime(j))),N&&Z())}function ut(t){t.fragmentModel===O&&(J(),it(!1),M.info("Stream is complete"))}function dt(t){t.sender===O&&(M.info("OnFragmentLoadingCompleted - Url:",t.request?t.request.url:"undefined",", Range:",t.request.range?t.request.range:"undefined"),y.getIsTextTrack(x)&&it(!1),t.error&&t.request.serviceLocation&&!N&&(ot(t.request),it(!1),tt(0)),K&&(X=t.request))}function ht(){at(!0)}function ct(t){if(t.sender.getStreamProcessor()===C)if(K&&!isNaN(t.startTime)&&(K=!1,O.addExecutedRequest(X)),it(!1),Q&&!isNaN(t.startTime)){var e=w.getTime(),i=t.startTime+D.fragmentDuration,n=1.5*D.fragmentDuration;tt(e+n>=i?0:1e3*(i-(e+n))),Q=!1}else tt(0)}function ft(t){t.streamProcessor===C&&(M.info("onFragmentLoadingAbandoned for "+x+", request: "+t.request.url+" has been aborted"),w.isSeeking()||W||(M.info("onFragmentLoadingAbandoned for "+x+", request: "+t.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),ot(t.request)),it(!1),tt(0))}function pt(t){t.sender.getStreamProcessor()===C&&J()}function gt(t){if(t.sender.getStreamProcessor()===C){var e=C.getStreamInfo();e&&(t.unintended?O.removeExecutedRequestsAfterTime(t.from,e.duration):O.syncExecutedRequestsWithBufferedRange(C.getBufferController().getBuffer().getAllBufferRanges(),e.duration)),t.hasEnoughSpaceToAppend&&N&&Z()}}function mt(t){t.sender.getStreamProcessor()!==C||t.state!==s.default.BUFFER_EMPTY||w.isSeeking()||(M.info("Buffer is empty! Stalling!"),xt(new Date,r.PlayListTrace.REBUFFERING_REASON))}function vt(t){t.sender.getStreamProcessor()===C&&(J(),it(!1))}function yt(){O.abortRequests(),J()}function _t(t){t.sender.getStreamProcessor()===C&&S.isTextEnabled()&&nt(t.index)}function bt(){!N&&b.getScheduleWhilePaused()||Z()}function Et(t){j=t.seekTime,St(0),N&&Z();var e=v.getCurrentManifestUpdate(n.getMetricsFor(o.default.STREAM)),i=D.DVRWindow&&w?D.DVRWindow.end-w.getTime():NaN;n.updateManifestUpdateInfo(e,{latency:i}),F?(M.debug("onPlaybackSeeking for "+x+", call fragmentModel.abortRequests in order to seek quicker"),O.abortRequests()):tt(0)}function wt(t){P&&(P.playbackspeed=t.playbackRate.toString())}function Tt(t){j=t}function St(t){B=t}function xt(t,e){if(k&&!1===L){var i=P.start,n=t.getTime()-i.getTime();P.duration=n,P.stopreason=e,k.trace.push(P),L=!0}}function Ct(){k&&!0===L&&D&&(L=!1,(P=new r.PlayListTrace).representationid=D.id,P.start=new Date,P.mstart=1e3*w.getTime(),P.playbackspeed=w.getPlaybackRate().toString())}function It(){F=!1,B=0,j=NaN,k=null,P=null,L=!0,R=!0,V=NaN,z={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},Y={},q=[],N=!0,W=!1,K=!1,X=null,Q=!1}return A={initialize:function(){O=C.getFragmentModel(),H=(0,l.default)(e).create({abrController:E,dashMetrics:v,metricsModel:n,mediaPlayerModel:b,textController:S}),G=(0,u.default)(e).create({adapter:f,textController:S,playbackController:w}),y.getIsTextTrack(t.mimeType)&&i.on(c.default.TIMED_TEXT_REQUESTED,_t,this),i.on(c.default.QUALITY_CHANGE_REQUESTED,rt,this),i.on(c.default.DATA_UPDATE_STARTED,pt,this),i.on(c.default.DATA_UPDATE_COMPLETED,st,this),i.on(c.default.FRAGMENT_LOADING_COMPLETED,dt,this),i.on(c.default.STREAM_COMPLETED,ut,this),i.on(c.default.STREAM_INITIALIZED,lt,this),i.on(c.default.BUFFER_LEVEL_STATE_CHANGED,mt,this),i.on(c.default.BUFFER_CLEARED,gt,this),i.on(c.default.BYTES_APPENDED_END_FRAGMENT,ct,this),i.on(c.default.INIT_REQUESTED,et,this),i.on(c.default.QUOTA_EXCEEDED,vt,this),i.on(c.default.PLAYBACK_SEEKING,Et,this),i.on(c.default.PLAYBACK_STARTED,bt,this),i.on(c.default.PLAYBACK_RATE_CHANGED,wt,this),i.on(c.default.PLAYBACK_TIME_UPDATED,ht,this),i.on(c.default.URL_RESOLUTION_FAILED,yt,this),i.on(c.default.FRAGMENT_LOADING_ABANDONED,ft,this)},getType:function(){return x},setSeekTarget:Tt,setTimeToLoadDelay:St,replaceRequest:ot,switchTrackAsked:function(){W=!0},isStarted:function(){return!1===N},start:Z,stop:J,reset:function(){i.off(c.default.DATA_UPDATE_STARTED,pt,this),i.off(c.default.DATA_UPDATE_COMPLETED,st,this),i.off(c.default.BUFFER_LEVEL_STATE_CHANGED,mt,this),i.off(c.default.QUALITY_CHANGE_REQUESTED,rt,this),i.off(c.default.FRAGMENT_LOADING_COMPLETED,dt,this),i.off(c.default.STREAM_COMPLETED,ut,this),i.off(c.default.STREAM_INITIALIZED,lt,this),i.off(c.default.QUOTA_EXCEEDED,vt,this),i.off(c.default.BYTES_APPENDED_END_FRAGMENT,ct,this),i.off(c.default.BUFFER_CLEARED,gt,this),i.off(c.default.INIT_REQUESTED,et,this),i.off(c.default.PLAYBACK_RATE_CHANGED,wt,this),i.off(c.default.PLAYBACK_SEEKING,Et,this),i.off(c.default.PLAYBACK_STARTED,bt,this),i.off(c.default.PLAYBACK_TIME_UPDATED,ht,this),i.off(c.default.URL_RESOLUTION_FAILED,yt,this),i.off(c.default.FRAGMENT_LOADING_ABANDONED,ft,this),y.getIsTextTrack(x)&&i.off(c.default.TIMED_TEXT_REQUESTED,_t,this),J(),at(!1),It()},setPlayList:function(t){k=t},getBufferTarget:function(){return H.getBufferTarget(C,T.isTrackTypePresent(o.default.VIDEO))},finalisePlayList:function(t,e){xt(t,e),k=null}},M=(0,p.default)(e).getInstance().getLogger(A),It(),A}v.__dashjs_factory_name="ScheduleController",e.default=f.default.getClassFactory(v),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(0));function a(t){var e=(t=t||{}).dashMetrics,i=t.metricsModel,n=t.mediaPlayerModel,r=t.textController,a=t.abrController;function s(t,s){var l=NaN;if(!t)return l;var u=t.getType(),d=t.getRepresentationInfo();if(u===o.default.FRAGMENTED_TEXT)l=r.isTextEnabled()?d.fragmentDuration:0;else if(u===o.default.AUDIO&&s){var h=e.getCurrentBufferLevel(i.getReadOnlyMetricsFor(o.default.VIDEO));l=isNaN(d.fragmentDuration)?h:Math.max(h,d.fragmentDuration)}else{var c=d.mediaInfo.streamInfo;if(a.isPlayingAtTopQuality(c))l=c.manifestInfo.duration>=n.getLongFormContentDurationThreshold()?n.getBufferTimeAtTopQualityLongForm():n.getBufferTimeAtTopQuality();else l=n.getStableBufferTime()}return l}return{execute:function(t,n){return!t||e.getCurrentBufferLevel(i.getReadOnlyMetricsFor(t.getType()))<s(t,n)},getBufferTarget:s}}a.__dashjs_factory_name="BufferLevelRule",e.default=r.default.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(3)),a=n(i(0)),s=n(i(26));function l(t){t=t||{};var e=this.context,i=t.adapter,n=t.textController,a=t.playbackController,l=void 0,u=void 0;return l={execute:function(t,e,r){if(!t)return null;var l=t.getRepresentationInfo(),d=t.getType(),h=!isNaN(e),c=t.getBufferController(),f=a.getNormalizedTime(),p=h?e:i.getIndexHandlerTime(t),g=!1,m=void 0;if(isNaN(p)||d===o.default.FRAGMENTED_TEXT&&!n.isTextEnabled())return null;if(c){var v=c.getRangeAt(p),y=c.getRangeAt(f),_=c.getBuffer().hasDiscontinuitiesAfter(f);null===v&&null===y||h||((!v||y&&y.start!=v.start&&y.end!=v.end)&&(_&&d!==o.default.FRAGMENTED_TEXT&&(t.getFragmentModel().removeExecutedRequestsAfterTime(y.end),g=!0),v=y),p!==v.end&&(u.debug("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end for",d,".",p,"was changed to",v.end),p=v.end))}if(r)p=r.startTime+r.duration/2,m=i.getFragmentRequest(t,l,p,{timeThreshold:0,ignoreIsFinished:!0});else for(m=i.getFragmentRequest(t,l,p,{keepIdx:!h&&!g});m&&m.action!==s.default.ACTION_COMPLETE&&t.getFragmentModel().isFragmentLoaded(m);)m=i.getFragmentRequest(t,l);return m}},u=(0,r.default)(e).getInstance().getLogger(l),l}l.__dashjs_factory_name="NextFragmentRequestRule",e.default=a.default.getClassFactory(l),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(9)),a=n(i(13)),s=n(i(6)),l=n(i(2)),u=n(i(4)),d=n(i(0)),h=n(i(74));function c(){var t=this.context,e=(0,l.default)(t).getInstance(),i=void 0,n=void 0,d=void 0,c=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,w=void 0,T=void 0,S=void 0;function x(){return c}function C(){return p}function I(){n=null,d=-1,c=!0,f=[],g=null,v=null,y=null,_=null,b=null,E=null,w=null}function A(){var t=new Date,e=C(),i=1e3*v.getTime();y.addRepresentationSwitch(e.adaptation.type,t,i,e.id)}function M(){var t=T.getStreamInfo(),e=t?t.manifestInfo:null,i=e?e.isDynamic:null,n=b.calcSegmentAvailabilityRange(p,i);y.addDVRInfo(T.getType(),v.getTime(),e,n)}function O(t){return null==t||t>=f.length?null:f[t]}function D(t){var n=t;c=!1,e.trigger(u.default.AST_IN_FUTURE,{delay:n}),setTimeout(function(){if(!x()){c=!0,e.trigger(u.default.DATA_UPDATE_STARTED,{sender:i}),f.forEach(function(t){t.segmentAvailabilityRange=null});for(var t=0;t<f.length;t++)m.updateRepresentation(f[t],!0)}},n)}function R(t){if(t.sender.getStreamProcessor()===T&&x()){var i,l=t.representation,d=y.getMetricsFor(o.default.STREAM),m=y.getMetricsFor(C().adaptation.type),_=w.getCurrentManifestUpdate(d),b=!1,E=0,S=void 0,I=void 0;if(l.adaptation.period.mpd.manifest.type===a.default.DYNAMIC&&!l.adaptation.period.mpd.manifest.ignorePostponeTimePeriod){var O=l.segmentAvailabilityRange.end-l.segmentAvailabilityRange.start;E=1e3*(v.computeLiveDelay(p.segmentDuration,T.getStreamInfo().manifestInfo.DVRWindowSize)-O)}if(E>0)return M(),D(E),I=new s.default(r.default.SEGMENTS_UPDATE_FAILED_ERROR_CODE,r.default.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE),void e.trigger(u.default.DATA_UPDATE_COMPLETED,{sender:this,data:n,currentRepresentation:p,error:I});if(_){for(var R=0;R<_.representationInfo.length;R++)if((S=_.representationInfo[R]).index===l.index&&S.mediaType===T.getType()){b=!0;break}b||y.addManifestUpdateRepresentationInfo(_,l.id,l.index,l.adaptation.period.index,T.getType(),l.presentationTimeOffset,l.startNumber,l.segmentInfoType)}(function(){for(var t=0,e=f.length;t<e;t++){var i=f[t].segmentInfoType;if(null===f[t].segmentAvailabilityRange||!h.default.hasInitialization(f[t])||(i===a.default.SEGMENT_BASE||i===a.default.BASE_URL)&&!f[t].segments)return!1}return!0})()&&(c=!1,g.setPlaybackQuality(T.getType(),T.getStreamInfo(),(i=p,f.indexOf(i))),y.updateManifestUpdateInfo(_,{latency:p.segmentAvailabilityRange.end-v.getTime()}),w.getCurrentRepresentationSwitch(m)||A(),e.trigger(u.default.DATA_UPDATE_COMPLETED,{sender:this,data:n,currentRepresentation:p}))}}function N(t){t.isDynamic&&function(t){for(var e=void 0,i=0,n=f.length;i<n;i++)(e=f[i]).segmentAvailabilityRange=b.calcSegmentAvailabilityRange(e,t)}(t.isDynamic)}function k(t){t.sender.getStreamProcessor()===T&&(S.getValue().doNotUpdateDVRWindowOnBufferUpdated||M())}function P(t){if(t.mediaType===T.getType()&&T.getStreamInfo().id===t.streamInfo.id&&t.oldQuality!==t.newQuality){p=O(t.newQuality);var e=g.getThroughputHistory().getAverageThroughput(t.mediaType);isNaN(e)||_.setSavedBitrateSettings(t.mediaType,e),A()}}function L(t){if(t.newDuration){var e=C();if(e&&e.adaptation.period)e.adaptation.period.duration=t.newDuration}}return i={initialize:function(){m=T.getIndexHandler()},setConfig:function(t){t.abrController&&(g=t.abrController),t.domStorage&&(_=t.domStorage),t.metricsModel&&(y=t.metricsModel),t.dashMetrics&&(w=t.dashMetrics),t.dashManifestModel&&(E=t.dashManifestModel),t.playbackController&&(v=t.playbackController),t.timelineConverter&&(b=t.timelineConverter),t.manifestModel&&(S=t.manifestModel),t.streamProcessor&&(T=t.streamProcessor)},getData:function(){return n},getDataIndex:function(){return d},isUpdating:x,updateData:function(t,i,r){var a=T.getStreamInfo(),s=g.getTopQualityIndexFor(r,a.id),l=g.getMinAllowedIndexFor(r),h=void 0,v=null;if(c=!0,e.trigger(u.default.DATA_UPDATE_STARTED,{sender:this}),f=function(t){return d=E.getIndexForAdaptation(n,t.period.mpd.manifest,t.period.index),E.getRepresentationsForAdaptation(t)}(i),null!==n&&n.id==t.id||r===o.default.FRAGMENTED_TEXT?h=g.getQualityFor(r,a):(v=g.getThroughputHistory().getAverageThroughput(r)||g.getInitialBitrateFor(r,a),h=g.getQualityForBitrate(T.getMediaInfo(),v)),void 0!==l&&h<l&&(h=l),h>s&&(h=s),p=O(h),n=t,r!==o.default.VIDEO&&r!==o.default.AUDIO&&r!==o.default.FRAGMENTED_TEXT)return c=!1,void e.trigger(u.default.DATA_UPDATE_COMPLETED,{sender:this,data:n,currentRepresentation:p});for(var y=0;y<f.length;y++)m.updateRepresentation(f[y],!0)},getStreamProcessor:function(){return T},getCurrentRepresentation:C,getRepresentationForQuality:O,reset:function(){e.off(u.default.QUALITY_CHANGE_REQUESTED,P,i),e.off(u.default.REPRESENTATION_UPDATED,R,i),e.off(u.default.WALLCLOCK_TIME_UPDATED,N,i),e.off(u.default.BUFFER_LEVEL_UPDATED,k,i),e.off(u.default.MANIFEST_VALIDITY_CHANGED,L,i),I()}},I(),e.on(u.default.QUALITY_CHANGE_REQUESTED,P,i),e.on(u.default.REPRESENTATION_UPDATED,R,i),e.on(u.default.WALLCLOCK_TIME_UPDATED,N,i),e.on(u.default.BUFFER_LEVEL_UPDATED,k,i),e.on(u.default.MANIFEST_VALIDITY_CHANGED,L,i),i}c.__dashjs_factory_name="RepresentationController",e.default=d.default.getClassFactory(c),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(13)),a=n(i(26)),s=n(i(6)),l=i(10),u=n(i(4)),d=n(i(2)),h=n(i(9)),c=n(i(0)),f=n(i(3)),p=n(i(21)),g=n(i(74)),m=i(27),v=n(i(223)),y=n(i(114)),_=n(i(228));function b(t){t=t||{};var e,i=this.context,n=(0,d.default)(i).getInstance(),c=(0,p.default)(i).getInstance(),b=void 0,E=t.timelineConverter,w=t.dashMetrics,T=t.metricsModel,S=t.mediaPlayerModel,x=t.errHandler,C=t.baseURLController,I=void 0,A=void 0,M=void 0,O=void 0,D=void 0,R=void 0,N=void 0;function k(){return R?R.getType():null}function P(){var t=R?R.getStreamInfo():null;return t?t.manifestInfo.isDynamic:null}function L(){return R?R.getMediaInfo():null}function F(){M=-1}function B(){F(),D=0,O=null,R=null,N=null}function U(t,e,i){var n=C.resolve(i.path),o=void 0,r=void 0;return n&&e!==n.url&&c.isRelative(e)?(o=n.url,r=n.serviceLocation,e&&(o=c.resolve(e,o))):o=e,!c.isRelative(o)&&(t.url=o,t.serviceLocation=r,!0)}function j(t){var e=!1,i=P();if(i||M!==t.availableSegmentsNumber){var n=(0,m.getSegmentByIndex)(M,t);if(n){var o=parseFloat((n.presentationStartTime-t.adaptation.period.start).toFixed(5)),a=t.adaptation.period.duration;A.debug(t.segmentInfoType+": "+o+" / "+a),e=(t.segmentInfoType!==r.default.SEGMENT_TIMELINE||!i)&&o>=a}else A.debug("isMediaFinished - no segment found")}else e=!0;return e}function H(t){N.getSegments(t,O,M,G)}function G(t,e){if(t.segments=e,e&&e.length>0&&P()){var i=e[e.length-1].presentationStartTime,n=T.getMetricsFor(o.default.STREAM);E.setExpectedLiveEdge(i),T.updateManifestUpdateInfo(w.getCurrentManifestUpdate(n),{presentationStartTime:i})}}function z(t){if(!t)throw new Error("no representation");t.segments=null,H(t)}function Y(t,e,i){var n=e.segments,o=n?n.length:null,r=-1,a=void 0,s=void 0,l=void 0,u=void 0,d=void 0;if(n&&o>0)for(i=null==i?S.getSegmentOverlapToleranceTime():i,d=0;d<o;d++)if(l=(s=n[d]).presentationStartTime,u=s.duration,t+(a=null==i?u/2:i)>=l&&t-a<l+u){r=s.availabilityIdx;break}return r}function V(t){if(null==t)return null;var e=new a.default,i=t.representation,n=i.adaptation.period.mpd.manifest.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index].Representation_asArray[i.index].bandwidth,o=t.media;return o=(0,m.replaceTokenForTemplate)(o,"Number",t.replacementNumber),o=(0,m.replaceTokenForTemplate)(o,"Time",t.replacementTime),o=(0,m.replaceTokenForTemplate)(o,"Bandwidth",n),o=(0,m.replaceIDForTemplate)(o,i.id),o=(0,m.unescapeDollarsInTemplate)(o),e.mediaType=k(),e.type=l.HTTPRequest.MEDIA_SEGMENT_TYPE,e.range=t.mediaRange,e.startTime=t.presentationStartTime,e.duration=t.duration,e.timescale=i.timescale,e.availabilityStartTime=t.availabilityStartTime,e.availabilityEndTime=t.availabilityEndTime,e.wallStartTime=t.wallStartTime,e.quality=i.index,e.index=t.availabilityIdx,e.mediaInfo=L(),e.adaptationIndex=i.adaptation.index,e.representationId=i.id,U(e,o,i)?e:void 0}function q(t){var e=t.representation;e.segments&&n.trigger(u.default.REPRESENTATION_UPDATED,{sender:this,representation:e})}function W(t){if(!t.error&&k()===t.mediaType){var e,i=t.segments,o=t.representation,r=[],a=0,s=void 0,l=void 0,d=void 0;for(s=0,e=i.length;s<e;s++)l=i[s],d=(0,m.getTimeBasedSegment)(E,P(),o,l.startTime,l.duration,l.timescale,l.media,l.mediaRange,a),r.push(d),d=null,a++;o.segmentAvailabilityRange={start:r[0].presentationStartTime,end:r[e-1].presentationStartTime},o.availableSegmentsNumber=e,G(o,r),g.default.hasInitialization(o)&&n.trigger(u.default.REPRESENTATION_UPDATED,{sender:this,representation:o})}}return I={initialize:function(e){R=e,b.initialize(),N=(0,v.default)(i).create(t,P())},getStreamProcessor:function(){return R},getInitRequest:function(t){return t?function(t,e){var i=new a.default,n=t.adaptation.period,o=n.start,r=P();if(i.mediaType=e,i.type=l.HTTPRequest.INIT_SEGMENT_TYPE,i.range=t.range,i.availabilityStartTime=E.calcAvailabilityStartTimeFromPresentationTime(o,n.mpd,r),i.availabilityEndTime=E.calcAvailabilityEndTimeFromPresentationTime(o+n.duration,n.mpd,r),i.quality=t.index,i.mediaInfo=L(),i.representationId=t.id,U(i,t.initialization,t))return i}(t,k()):null},getSegmentRequestForTime:function(t,e,i){var n=void 0;if(!t)return null;var o=k(),s=M,l=!!i&&i.keepIdx,u=i?i.timeThreshold:null,d=!(!i||!i.ignoreIsFinished);return O!==e&&(O=e,A.debug("Getting the request for "+o+" time : "+e)),H(t),(M=Y(e,t,u))<0&&(H(t),M=Y(e,t,u)),M>=0&&A.debug("Index for "+o+" time "+e+" is "+M),!d&&j(t)?((n=new a.default).action=a.default.ACTION_COMPLETE,n.index=M,n.mediaType=o,n.mediaInfo=L(),A.debug("Signal complete in getSegmentRequestForTime -",o)):n=V((0,m.getSegmentByIndex)(M,t)),l&&s>=0&&(M=t.segmentInfoType===r.default.SEGMENT_TIMELINE&&P()?M:s),n},getNextSegmentRequest:function(t){var e=void 0,i=void 0;if(!t||-1===M)return null;var n=k(),o=P();return O=null,M++,A.debug("Getting the next request at index: "+M+", type: "+n),!(0,m.getSegmentByIndex)(M,t)&&o?(A.debug("No segment found at index: "+M+". Wait for next loop"),H(t),M--,null):(j(t)?((e=new a.default).action=a.default.ACTION_COMPLETE,e.index=M,e.mediaType=n,e.mediaInfo=L(),A.debug("Signal complete -",n)):(H(t),e=V(i=(0,m.getSegmentByIndex)(M,t)),!i&&o&&M--),e)},updateRepresentation:function(t,e){var i=g.default.hasInitialization(t),o=g.default.hasSegments(t),r=void 0;if(t.segmentDuration||t.segments||z(t),t.segmentAvailabilityRange=E.calcSegmentAvailabilityRange(t,P()),t.segmentAvailabilityRange.end<t.segmentAvailabilityRange.start&&!t.useCalculatedLiveEdgeTime)return r=new s.default(h.default.SEGMENTS_UNAVAILABLE_ERROR_CODE,h.default.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{availabilityDelay:t.segmentAvailabilityRange.start-t.segmentAvailabilityRange.end}),void n.trigger(u.default.REPRESENTATION_UPDATED,{sender:this,representation:t,error:r});e||F(),t.segmentDuration&&z(t),i||b.loadInitialization(t),o||b.loadSegments(t,k(),t.indexRange),i&&o&&n.trigger(u.default.REPRESENTATION_UPDATED,{sender:this,representation:t})},updateSegmentList:z,setCurrentTime:function(t){D=t},getCurrentTime:function(){return D},reset:function(){B(),n.off(u.default.INITIALIZATION_LOADED,q,I),n.off(u.default.SEGMENTS_LOADED,W,I)},resetIndex:F},A=(0,f.default)(i).getInstance().getLogger(I),B(),e=t.mimeType,(b="webm"===e.split("/")[1].toLowerCase()?(0,_.default)(i).getInstance():(0,y.default)(i).getInstance()).setConfig({baseURLController:C,metricsModel:T,mediaPlayerModel:S,errHandler:x}),n.on(u.default.INITIALIZATION_LOADED,q,I),n.on(u.default.SEGMENTS_LOADED,W,I),I}b.__dashjs_factory_name="DashHandler",e.default=c.default.getClassFactory(b),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(13)),r=n(i(0)),a=n(i(224)),s=n(i(225)),l=n(i(226));function u(t,e){var i,n=this.context,r=void 0,u=void 0,d=void 0;return i={getSegments:function(t,e,i,n,a){var s=void 0,l=t.segmentInfoType;l!==o.default.SEGMENT_BASE&&l!==o.default.BASE_URL&&function(t,e){var i=t.segments,n=!1,o=void 0,r=void 0;i&&0!==i.length?(r=i[0].availabilityIdx,o=i[i.length-1].availabilityIdx,n=e<r||e>o):n=!0;return n}(t,i)?(l===o.default.SEGMENT_TIMELINE?s=r.getSegments(t,e,i,a):l===o.default.SEGMENT_TEMPLATE?s=u.getSegments(t,e,i,a):l===o.default.SEGMENT_LIST&&(s=d.getSegments(t,e,i,a)),n&&n(t,s)):s=t.segments}},r=(0,a.default)(n).create(t,e),u=(0,s.default)(n).create(t,e),d=(0,l.default)(n).create(t,e),i}u.__dashjs_factory_name="SegmentsGetter";var d=r.default.getClassFactory(u);e.default=d,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(1)),a=i(27);function s(t,e){var i=(t=t||{}).timelineConverter;return{getSegments:function(t,n,o,s){if(function(){if(!i||!i.hasOwnProperty("calcMediaTimeFromPresentationTime")||!i.hasOwnProperty("calcSegmentAvailabilityRange"))throw new Error(r.default.MISSING_CONFIG_ERROR)}(),!t)throw new Error("no representation");void 0===n&&(n=null);var l=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentTemplate||t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList,u=l.SegmentTimeline,d=l.SegmentURL_asArray,h=t.availableSegmentsNumber>0,c=void 0;c=s||(o>-1||null!==n?10:1/0);var f,p,g,m=0,v=0,y=-1,_=[],b=null,E=void 0,w=void 0,T=void 0,S=void 0,x=void 0,C=void 0,I=void 0,A=void 0,M=function(n,o){var r=l.media,s=n.mediaRange;return d&&(r=d[o].media||"",s=d[o].mediaRange),(0,a.getTimeBasedSegment)(i,e,t,m,n.d,A,r,s,y,n.tManifest)};for(A=t.timescale,f=u.S_asArray,g=o,null!==n&&(b=i.calcMediaTimeFromPresentationTime(n,t)),w=0,p=f.length;w<p;w++){if(S=0,(E=f[w]).hasOwnProperty("r")&&(S=E.r),E.hasOwnProperty("t")&&(v=(m=E.t)/A),S<0){if((C=f[w+1])&&C.hasOwnProperty("t"))x=C.t/A;else{var O=t.segmentAvailabilityRange?t.segmentAvailabilityRange.end:i.calcSegmentAvailabilityRange(t,e).end;x=i.calcMediaTimeFromPresentationTime(O,t),t.segmentDuration=E.d/A}S=Math.ceil((x-v)/(E.d/A))-1}if(I){if(h)break;y+=S+1}else for(T=0;T<=S;T++)if(y++,_.length>c){if(I=!0,h)break}else null!==b?v>=b-E.d/A*1.5&&_.push(M(E,y)):y>=g&&_.push(M(E,y)),v=(m+=E.d)/A}return h||(t.availableSegmentsNumber=y+1),_}}}s.__dashjs_factory_name="TimelineSegmentsGetter";var l=o.default.getClassFactory(s);e.default=l,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n},a=i(27);function s(t,e){var i=t.timelineConverter;return{getSegments:function(t,n,o,r){var s,l,u,d=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentTemplate,h=t.segmentDuration,c=t.segmentAvailabilityRange,f=[],p=null,g=null,m=void 0,v=void 0;for(u=t.startNumber,s=(m=isNaN(h)&&!e?{start:u,end:u}:(0,a.decideSegmentListRangeForTemplate)(i,e,t,n,o,r)).start,l=m.end,v=s;v<=l;v++)(g=(0,a.getIndexBasedSegment)(i,e,t,v)).replacementTime=(u+v-1)*t.segmentDuration,p=d.media,p=(0,a.replaceTokenForTemplate)(p,"Number",g.replacementNumber),p=(0,a.replaceTokenForTemplate)(p,"Time",g.replacementTime),g.media=p,f.push(g),g=null;return isNaN(h)?t.availableSegmentsNumber=1:t.availableSegmentsNumber=Math.ceil((c.end-c.start)/h),f}}}s.__dashjs_factory_name="TemplateSegmentsGetter";var l=r.default.getClassFactory(s);e.default=l,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n},a=i(27);function s(t,e){var i=(t=t||{}).timelineConverter;return{getSegments:function(t,n,o,r){var s,l,u,d,h=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList,c=h.SegmentURL_asArray.length,f=[],p=void 0,g=void 0,m=void 0;for(d=t.startNumber,s=(0,a.decideSegmentListRangeForTemplate)(i,e,t,n,o,r),l=Math.max(s.start,0),u=Math.min(s.end,h.SegmentURL_asArray.length-1),p=l;p<=u;p++)m=h.SegmentURL_asArray[p],(g=(0,a.getIndexBasedSegment)(i,e,t,p)).replacementTime=(d+p-1)*t.segmentDuration,g.media=m.media?m.media:"",g.mediaRange=m.mediaRange,g.index=m.index,g.indexRange=m.indexRange,f.push(g),g=null;return t.availableSegmentsNumber=c,f}}}s.__dashjs_factory_name="ListSegmentsGetter";var l=r.default.getClassFactory(s);e.default=l,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function a(t){var e=(t=t||{}).requestModifier,i=t.boxParser;function n(t,e){t.reader.read().then(e).catch(function(e){t.onerror&&200===t.response.status&&t.onerror(e)})}function o(t,e){if((t=t.filter(function(i){return i.bytes>e/4/t.length})).length>1){var i=(n=0,o=(t[t.length-1].ts-t[0].ts)/t.length,t.forEach(function(e,i){var r=t[i+1];if(r){var a=r.ts-e.ts;n+=a<o?a:0}}),{v:n});if("object"==typeof i)return i.v}var n,o;return null}return{load:function(t){var r=new Date,a=t.request,s=new Headers;a.range&&s.append("Range","bytes="+a.range),a.requestStartDate||(a.requestStartDate=r),e&&e.modifyRequestHeader({setRequestHeader:function(t,e){s.append(t,e)}});var l=void 0;"function"==typeof window.AbortController&&(l=new AbortController,t.abortController=l);var u={method:t.method,headers:s,credentials:t.withCredentials?"include":void 0,signal:l?l.signal:void 0};fetch(t.url,u).then(function(e){t.response||(t.response={}),t.response.status=e.status,t.response.statusText=e.statusText,t.response.responseURL=e.url,e.ok||t.onerror();var r="",a=!0,s=!1,l=void 0;try{for(var u,d=e.headers.keys()[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var h=u.value;r+=h+": "+e.headers.get(h)+"\n"}}catch(t){s=!0,l=t}finally{try{!a&&d.return&&d.return()}finally{if(s)throw l}}if(t.response.responseHeaders=r,!e.body)return e.arrayBuffer().then(function(e){t.response.response=e;var i={loaded:e.byteLength,total:e.byteLength,stream:!1};t.progress(i),t.onload(),t.onend()});var c=parseInt(e.headers.get("Content-Length"),10),f=0,p=!1,g=new Uint8Array,m=0;t.reader=e.body.getReader();var v=[];n(t,function e(r){var a=r.value;if(r.done)return g&&(t.progress({loaded:f,total:isNaN(c)?f:c,lengthComputable:!0,time:o(v,f),stream:!0}),t.response.response=g.buffer),t.onload(),void t.onend();if(a&&a.length>0){g=function(t,e){if(0===t.length)return e;var i=new Uint8Array(t.length+e.length);return i.set(t),i.set(e,t.length),i}(g,a),f+=a.length,v.push({ts:Date.now(),bytes:a.length});var s=i.findLastTopIsoBoxCompleted(["moov","mdat"],g,m);if(s.found){var l=s.lastCompletedOffset+s.size,u=void 0;l===g.length?(u=g,g=new Uint8Array):(u=new Uint8Array(g.subarray(0,l)),g=g.subarray(l)),t.progress({data:u.buffer,lengthComputable:!1,noTrace:!0}),m=0}else m=s.lastCompletedOffset,p||(t.progress({lengthComputable:!1,noTrace:!0}),p=!0)}n(t,e)})}).catch(function(e){t.onerror&&t.onerror(e)})},abort:function(t){if(t.abortController)t.abortController.abort();else if(t.reader)try{t.reader.cancel()}catch(t){}},calculateDownloadedTime:o}}a.__dashjs_factory_name="FetchLoader";var s=r.default.getClassFactory(a);e.default=s,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(4)),r=n(i(2)),a=n(i(229)),s=n(i(1)),l=n(i(0)),u=n(i(3)),d=n(i(54)),h=n(i(73)),c=i(10),f=n(i(26)),p=n(i(43)),g=n(i(6)),m=n(i(9));function v(){var t=this.context,e=(0,r.default)(t).getInstance(),i=void 0,n=void 0,l=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,w=void 0;function T(e,i,o,r){var s,u,d=void 0,c=void 0,f=void 0,p=void 0,g=void 0,m=void 0;for(c=[],p=0,u=(s=function(e){var i=[],n=void 0,o=void 0,r=(0,a.default)(t).create({data:e});for(r.consumeTagAndSize(l.Segment.Cues);r.moreData()&&r.consumeTagAndSize(l.Segment.Cues.CuePoint,!0);){for((n={}).CueTime=r.parseTag(l.Segment.Cues.CuePoint.CueTime),n.CueTracks=[];r.moreData()&&r.consumeTag(l.Segment.Cues.CuePoint.CueTrackPositions,!0);){var s=r.getMatroskaCodedNum(),u=r.getPos();if((o={}).Track=r.parseTag(l.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===o.Track)throw new Error("Cue track cannot be 0");o.ClusterPosition=r.parseTag(l.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),n.CueTracks.push(o),r.setPos(u+s)}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");i.push(n)}if(0===i.length)throw new Error("mandatory cuepoint not found");return i}(e)).length;p<u;p+=1)f=new h.default,d=0,d=p<s.length-1?s[p+1].CueTime-s[p].CueTime:r-s[p].CueTime,f.duration=d,f.startTime=s[p].CueTime,f.timescale=1e3,g=s[p].CueTracks[0].ClusterPosition+i,m=p<s.length-1?s[p+1].CueTracks[0].ClusterPosition+i-1:o-1,f.mediaRange=g+"-"+m,c.push(f);return n.debug("Parsed cues: "+c.length+" cues."),c}function S(){if(!w||!w.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function x(t,i,n){t?e.trigger(o.default.SEGMENTS_LOADED,{segments:t,representation:i,mediaType:n}):e.trigger(o.default.SEGMENTS_LOADED,{segments:null,representation:i,mediaType:n,error:new g.default(m.default.SEGMENT_BASE_LOADER_ERROR_CODE,m.default.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function C(t){var e=new f.default;return e.type=t.init?c.HTTPRequest.INIT_SEGMENT_TYPE:c.HTTPRequest.MEDIA_SEGMENT_TYPE,e.url=t.url,e.range=t.range.start+"-"+t.range.end,e}return i={setConfig:function(t){if(!(t.baseURLController&&t.metricsModel&&t.mediaPlayerModel&&t.errHandler))throw new Error(s.default.MISSING_CONFIG_ERROR);w=t.baseURLController,_=t.metricsModel,b=t.mediaPlayerModel,v=t.errHandler},initialize:function(){y=(0,d.default)(t).getInstance(),E=(0,p.default)(t).create({errHandler:v,metricsModel:_,mediaPlayerModel:b,requestModifier:y})},loadInitialization:function(t,i){S();var r=null,a=w.resolve(t.path),s=a?a.url:void 0,l=t.range.split("-"),u=i||{range:{start:parseFloat(l[0]),end:parseFloat(l[1])},request:r,url:s,init:!0};n.info("Start loading initialization."),r=C(u),E.load({request:r,success:function(){e.trigger(o.default.INITIALIZATION_LOADED,{representation:t})},error:function(){e.trigger(o.default.INITIALIZATION_LOADED,{representation:t})}}),n.debug("Perform init load: "+u.url)},loadSegments:function(e,i,o,r){S();var s=null,u=w.resolve(e.path),d=u?u.url:void 0;r=r||x,s=C({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:s,url:d,init:!1}),n.debug("Parsing ebml header"),E.load({request:s,success:function(s){!function(e,i,o,r){var s,u=(0,a.default)(t).create({data:e}),d=void 0,h=void 0,c=o.split("-"),f=null,p={url:i,range:{start:parseFloat(c[0]),end:parseFloat(c[1])},request:f},g=void 0;for(n.debug("Parse EBML header: "+p.url),u.skipOverElement(l.EBML),u.consumeTag(l.Segment),g=u.getMatroskaCodedNum(),g+=u.getPos(),s=u.getPos();u.moreData()&&!u.consumeTagAndSize(l.Segment.Info,!0);)if(!(u.skipOverElement(l.Segment.SeekHead,!0)||u.skipOverElement(l.Segment.Tracks,!0)||u.skipOverElement(l.Segment.Cues,!0)||u.skipOverElement(l.Void,!0)))throw new Error("no valid top level element found");for(;void 0===d;){var m=u.getMatroskaCodedNum(!0),v=u.getMatroskaCodedNum();switch(m){case l.Segment.Info.Duration.tag:d=u[l.Segment.Info.Duration.parse](v);break;default:u.setPos(u.getPos()+v)}}f=C(p),E.load({request:f,success:function(t){h=T(t,s,g,d),r(h)},error:function(){n.error("Download Error: Cues "+p.url),r(null)}}),n.debug("Perform cues load: "+p.url+" bytes="+p.range.start+"-"+p.range.end)}(s,d,o,function(t){r(t,e,i)})},error:function(){r(null,e,i)}})},reset:function(){v=null,y=null}},n=(0,u.default)(t).getInstance().getLogger(i),l={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},i}v.__dashjs_factory_name="WebmSegmentBaseLoader",e.default=l.default.getSingletonFactory(v),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function a(t){t=t||{};var e=void 0,i=new DataView(t.data),n=0;function o(t,e){var o=!0,r=0;if(void 0===e&&(e=!1),t.tag>16777215?(i.getUint32(n)!==t.tag&&(o=!1),r=4):t.tag>65535?(256*i.getUint16(n)+i.getUint8(n+2)!==t.tag&&(o=!1),r=3):t.tag>255?(i.getUint16(n)!==t.tag&&(o=!1),r=2):(i.getUint8(n)!==t.tag&&(o=!1),r=1),!o&&t.required&&!e)throw new Error("required tag not found");return o&&(n+=r),o}function r(t){var e=1,o=128,r=-1,a=0,s=i.getUint8(n),l=0;for(l=0;l<8;l+=1){if((s&o)===o){a=void 0===t?s&~o:s,r=l;break}o>>=1}for(l=0;l<r;l+=1,e+=1)a=a<<8|255&i.getUint8(n+e);return n+=e,a}return e={getPos:function(){return n},setPos:function(t){n=t},consumeTag:o,consumeTagAndSize:function(t,e){var i=o(t,e);return i&&r(),i},parseTag:function(t){var i;return o(t),i=r(),e[t.parse](i)},skipOverElement:function(t,e){var i=o(t,e),a=void 0;return i&&(a=r(),n+=a),i},getMatroskaCodedNum:r,getMatroskaFloat:function(t){var e=void 0;switch(t){case 4:e=i.getFloat32(n),n+=4;break;case 8:e=i.getFloat64(n),n+=8}return e},getMatroskaUint:function(t){for(var e=0,o=0;o<t;o+=1)e<<=8,e|=255&i.getUint8(n+o);return n+=t,e},moreData:function(){return n<i.byteLength}}}a.__dashjs_factory_name="EBMLParser",e.default=r.default.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(3)),a=n(i(2)),s=n(i(4)),l=n(i(75));function u(){var t="urn:mpeg:dash:event:2012",e=1,i="urn:mpeg:dash:event:callback:2015",n=1,o=this.context,u=(0,a.default)(o).getInstance(),d=void 0,h=void 0,c=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,b=void 0;function E(){b=!1,c={},f={},p={},g=null,m=100,v=Date.now()/1e3}function w(){if(!y||!_)throw new Error("setConfig function has to be called previously")}function T(){null!==g&&b&&(clearInterval(g),g=null,b=!1)}function S(t){if(t.eventStream.value==e){var i=t.eventStream.timescale||1,n=t.presentationTime/i,o=void 0;o=4294967295==t.presentationTime?NaN:(t.presentationTime+t.duration)/i,h.info("Manifest validity changed: Valid until: "+n+"; remaining duration: "+o),u.trigger(s.default.MANIFEST_VALIDITY_CHANGED,{id:t.id,validUntil:n,newDuration:o,newManifestValidAfter:NaN})}}function x(){var t=_.getTime(),e=t-v;v=t,C(f,e,t),C(c,e,t),function(){if(p)for(var t=_.getTime(),e=Object.keys(p),i=0;i<e.length;i++){var n=e[i],o=p[n];null!==o&&(o.duration+o.presentationTime)/o.eventStream.timescale<t&&(h.debug("Remove Event "+n+" at time "+t),o=null,delete p[n])}}()}function C(r,a,s){var d,c;if(r)for(var f=Object.keys(r),g=0;g<f.length;g++){var m=f[g],v=r[m];void 0!==v&&(0===(d=v.presentationTime/v.eventStream.timescale)||d<=s&&d+a>s)&&(h.debug("Start Event "+m+" at "+s),v.duration>0&&(p[m]=v),v.eventStream.schemeIdUri==t&&v.eventStream.value==e?0===v.duration&&0===v.presentationTimeDelta||(w(),y.refreshManifest()):v.eventStream.schemeIdUri==i&&v.eventStream.value==n?(c=v.messageData,(0,l.default)(o).create({}).load({method:"get",url:c,request:{responseType:"arraybuffer"}})):u.trigger(v.eventStream.schemeIdUri,{event:v}),delete r[m])}}return d={addInlineEvents:function(t){if(w(),c={},t)for(var e=0;e<t.length;e++){var i=t[e];c[i.id]=i,h.debug("Add inline event with id "+i.id)}h.debug("Added "+t.length+" inline events")},addInbandEvents:function(e){w();for(var i=0;i<e.length;i++){var n=e[i];n.id in f?h.debug("Repeated event with id "+n.id):(n.eventStream.schemeIdUri===t&&void 0===f[n.id]&&S(n),f[n.id]=n,h.debug("Add inband event with id "+n.id))}},stop:T,start:function(){w(),h.debug("Start Event Controller"),b||isNaN(m)||(b=!0,g=setInterval(x,m))},setConfig:function(t){t&&(t.manifestUpdater&&(y=t.manifestUpdater),t.playbackController&&(_=t.playbackController))},reset:function(){T(),E()}},h=(0,r.default)(o).getInstance().getLogger(d),E(),d}u.__dashjs_factory_name="EventController",e.default=o.default.getClassFactory(u),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=i(10),a=n(i(232)),s=n(i(49)),l=n(i(233)),u=n(i(54)),d=n(i(2)),h=n(i(4)),c=n(i(0)),f=n(i(3));function p(t){t=t||{};var e=this.context,i=(0,d.default)(e).getInstance(),n=t.errHandler,c=t.mediaPlayerModel,p=t.metricsModel,g=void 0,m=void 0,v=void 0;function y(t){return t&&t.type&&t.type===r.HTTPRequest.INIT_SEGMENT_TYPE}function _(){for(var t in v)v[t].reset();v={}}function b(t){if(v[t.request.mediaType]===t.sender){var e=t.request,n=t.response,r=y(e),s=e.mediaInfo.streamInfo;if(t.error&&(t.request.mediaType!==o.default.AUDIO&&t.request.mediaType!==o.default.VIDEO&&t.request.mediaType!==o.default.FRAGMENTED_TEXT||i.trigger(h.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:t.request.serviceLocation})),n&&s){var l=function(t,e,i,n){var o=new a.default;return o.streamId=i,o.mediaInfo=e.mediaInfo,o.segmentType=e.type,o.start=e.startTime,o.duration=e.duration,o.end=o.start+o.duration,o.bytes=t,o.index=e.index,o.quality=e.quality,o.representationId=e.representationId,o.endFragment=n,o}(n,e,s.id,t.type!==h.default.FRAGMENT_LOADING_PROGRESS);i.trigger(r?h.default.INIT_FRAGMENT_LOADED:h.default.MEDIA_FRAGMENT_LOADED,{chunk:l,fragmentModel:t.sender})}else m.warn("No "+e.mediaType+" bytes to push or stream is inactive.")}}return g={getModel:function(t){var i=v[t];return i||(i=(0,s.default)(e).create({metricsModel:p,fragmentLoader:(0,l.default)(e).create({metricsModel:p,mediaPlayerModel:c,errHandler:n,requestModifier:(0,u.default)(e).getInstance()})}),v[t]=i),i},isInitializationRequest:y,reset:function(){i.off(h.default.FRAGMENT_LOADING_COMPLETED,b,this),i.off(h.default.FRAGMENT_LOADING_PROGRESS,b,this),_()}},m=(0,f.default)(e).getInstance().getLogger(g),_(),i.on(h.default.FRAGMENT_LOADING_COMPLETED,b,g),i.on(h.default.FRAGMENT_LOADING_PROGRESS,b,g),g}p.__dashjs_factory_name="FragmentController",e.default=c.default.getClassFactory(p),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(43)),r=n(i(234)),a=n(i(6)),s=n(i(2)),l=n(i(42)),u=n(i(4)),d=n(i(9)),h=n(i(0));function c(t){t=t||{};var e,i=this.context,n=(0,s.default)(i).getInstance(),h=void 0,c=void 0;return h={checkForExistence:function(t){var e=function(e){n.trigger(u.default.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e})};if(t){var i=new r.default(t.url);c.load({request:i,success:function(){e(!0)},error:function(){e(!1)}})}else e(!1)},load:function(t){var e=function(e,i){n.trigger(u.default.LOADING_COMPLETED,{request:t,response:e||null,error:i||null,sender:h})};t?c.load({request:t,progress:function(e){n.trigger(u.default.LOADING_PROGRESS,{request:t,stream:e.stream}),e.data&&n.trigger(u.default.LOADING_DATA_PROGRESS,{request:t,response:e.data||null,error:null,sender:h})},success:function(t){e(t)},error:function(t,i,n){e(void 0,new a.default(d.default.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,n,i))},abort:function(t){t&&n.trigger(u.default.LOADING_ABANDONED,{request:t,mediaType:t.mediaType,sender:h})}}):e(void 0,new a.default(d.default.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,d.default.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){c&&c.abort()},reset:function(){c&&(c.abort(),c=null)}},e=(0,l.default)(i).getInstance(),c=(0,o.default)(i).create({errHandler:t.errHandler,metricsModel:t.metricsModel,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,boxParser:e,useFetch:t.mediaPlayerModel.getLowLatencyEnabled()}),h}c.__dashjs_factory_name="FragmentLoader",e.default=h.default.getClassFactory(c),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};var o,r=i(26),a=(o=r)&&o.__esModule?o:{default:o},s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.url=t||null,this.checkForExistenceOnly=!0}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a["default"]),e}();e.default=s,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(1)),a=n(i(236)),s=n(i(115)),l=n(i(112)),u=i(27);function d(t){var e,i=this.context,n=void 0;function o(){n&&n.reset()}return e={get:function(t,e){var i=n.getCurrentTrack();if(!i||i.segmentDuration<=0||null==t)return null;var o=Math.floor(t/i.segmentDuration),r=t%i.segmentDuration,s=Math.floor(r*i.tilesHor*i.tilesVert/i.segmentDuration),l=new a.default;return l.width=Math.floor(i.widthPerTile),l.height=Math.floor(i.heightPerTile),l.x=Math.floor(s%i.tilesHor)*i.widthPerTile,l.y=Math.floor(s/i.tilesHor)*i.heightPerTile,"readThumbnail"in i?i.readThumbnail(t,function(t){l.url=t,e&&e(l)}):(l.url=function(t,e){var i=e+t.startNumber,n=(0,u.replaceTokenForTemplate)(t.templateUrl,"Number",i);return n=(0,u.replaceTokenForTemplate)(n,"Time",(i-1)*t.segmentDuration),n=(0,u.replaceTokenForTemplate)(n,"Bandwidth",t.bandwidth),(0,u.unescapeDollarsInTemplate)(n)}(i,o),e&&e(l),l)},setTrackByIndex:function(t){n.setTrackByIndex(t)},getCurrentTrackIndex:function(){return n.getCurrentTrackIndex()},getBitrateList:function(){var t=n.getTracks(),e=0;return t.map(function(t){var i=new l.default;return i.mediaType=r.default.IMAGE,i.qualityIndex=e++,i.bitrate=t.bitrate,i.width=t.width,i.height=t.height,i})},reset:o},o(),n=(0,s.default)(i).create({dashManifestModel:t.dashManifestModel,adapter:t.adapter,baseURLController:t.baseURLController,stream:t.stream,timelineConverter:t.timelineConverter}),e}d.__dashjs_factory_name="ThumbnailController",e.default=o.default.getClassFactory(d),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""},t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(2)),r=n(i(4)),a=n(i(0)),s=n(i(3)),l=n(i(9));function u(){var t=this.context,e=(0,o.default)(t).getInstance(),i=void 0,n=void 0,a=void 0,u=void 0,d=void 0,h=void 0,c=void 0,f=void 0,p=void 0,g=void 0,m=void 0;function v(){a=NaN,h=!1,d=!0,y()}function y(){null!==u&&(clearInterval(u),u=null)}function _(t){y(),isNaN(t)&&!isNaN(a)&&(t=1e3*a),isNaN(t)||(n.debug("Refresh manifest in "+t+" milliseconds."),u=setTimeout(w,t))}function b(){h=!0;var t=f.getValue(),e=t.url,i=p.getLocation(t);i&&(e=i),c.load(e)}function E(t){f.setValue(t);var i=new Date,o=(i.getTime()-t.loadedTime.getTime())/1e3;1e3*(a=p.getManifestUpdatePeriod(t,o))>2147483647&&(a=2147483.647),e.trigger(r.default.MANIFEST_UPDATED,{manifest:t}),n.info("Manifest has been refreshed at "+i+"["+i.getTime()/1e3+"] "),d||_()}function w(){d&&!m.getScheduleWhilePaused()||(h?_(m.getManifestUpdateRetryInterval()):b())}function T(t){t.error?t.error.code===l.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&g.error(t.error):E(t.manifest)}function S(){d=!1,_()}function x(){d=!0,y()}function C(){h=!1}return i={initialize:function(){v(),e.on(r.default.STREAMS_COMPOSED,C,this),e.on(r.default.PLAYBACK_STARTED,S,this),e.on(r.default.PLAYBACK_PAUSED,x,this),e.on(r.default.INTERNAL_MANIFEST_LOADED,T,this)},setManifest:function(t){E(t)},refreshManifest:b,setConfig:function(t){t&&(t.manifestModel&&(f=t.manifestModel),t.dashManifestModel&&(p=t.dashManifestModel),t.mediaPlayerModel&&(m=t.mediaPlayerModel),t.manifestLoader&&(c=t.manifestLoader),t.errHandler&&(g=t.errHandler))},reset:function(){e.off(r.default.PLAYBACK_STARTED,S,this),e.off(r.default.PLAYBACK_PAUSED,x,this),e.off(r.default.STREAMS_COMPOSED,C,this),e.off(r.default.INTERNAL_MANIFEST_LOADED,T,this),v()}},n=(0,s.default)(t).getInstance().getLogger(i),i}u.__dashjs_factory_name="ManifestUpdater",e.default=a.default.getClassFactory(u),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(6)),a=i(10),s=n(i(2)),l=n(i(4)),u=n(i(9)),d=n(i(0)),h=n(i(3)),c=n(i(21)),f=5e3;function p(){var t=this.context,e=(0,s.default)(t).getInstance(),i=(0,c.default)(t).getInstance(),n=void 0,d=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,b=void 0;function E(t){g=t}function w(t){p=t}function T(t){var e=Date.parse(t);return isNaN(e)&&(e=function(t){var e=void 0,i=void 0,n=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(t);return e=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&(parseInt(n[6],10)||0),n[7]&&1e3*parseFloat(n[7])||0),n[9]&&n[10]&&(i=60*parseInt(n[9],10)+parseInt(n[10],10),e+=("+"===n[8]?-1:1)*i*60*1e3),new Date(e).getTime()}(t)),e}function S(t){return Date.parse(t)}function x(t){return Date.parse(t)}function C(t,e,i){i()}function I(t,e,i){var n=T(t);isNaN(n)?i():e(n)}function A(t,e,n,o,r){var s,l,u=!1,d=new XMLHttpRequest,h=r?a.HTTPRequest.HEAD:a.HTTPRequest.GET,c=e.match(/\S+/g);if(e=c.shift(),s=function(){u||(u=!0,c.length?A(t,c.join(" "),n,o,r):o())},l=function(){var e=void 0,i=void 0;200===d.status&&(e=r?d.getResponseHeader("Date"):d.response,i=t(e),isNaN(i)||(n(i),u=!0))},i.isRelative(e)){var p=b.resolve();p&&(e=i.resolve(e,p.url))}d.open(h,e),d.timeout=f||0,d.onload=l,d.onloadend=s,d.send()}function M(t,e,i){A(x,t,e,i,!0)}function O(t,i,n){E(!1),e.trigger(l.default.TIME_SYNCHRONIZATION_COMPLETED,{time:i,offset:n,error:t?new r.default(u.default.TIME_SYNC_FAILED_ERROR_CODE,u.default.TIME_SYNC_FAILED_ERROR_MESSAGE):null})}return n={initialize:function(t,e){m=e,p=0,g=!1,v={"urn:mpeg:dash:utc:http-head:2014":M,"urn:mpeg:dash:utc:http-xsdate:2014":A.bind(null,T),"urn:mpeg:dash:utc:http-iso:2014":A.bind(null,S),"urn:mpeg:dash:utc:direct:2014":I,"urn:mpeg:dash:utc:http-head:2012":M,"urn:mpeg:dash:utc:http-xsdate:2012":A.bind(null,T),"urn:mpeg:dash:utc:http-iso:2012":A.bind(null,S),"urn:mpeg:dash:utc:direct:2012":I,"urn:mpeg:dash:utc:http-ntp:2014":C,"urn:mpeg:dash:utc:ntp:2014":C,"urn:mpeg:dash:utc:sntp:2014":C},g||function t(e,i){var n=i||0;var r=e[n];var a=function(t,e){var i,n,r,a=!t||!e;a&&m?(i=y.getReadOnlyMetricsFor(o.default.STREAM),n=_.getLatestMPDRequestHeaderValueByID(i,"Date"),r=null!==n?new Date(n).getTime():Number.NaN,isNaN(r)?O(!0):(w(r-(new Date).getTime()),O(!1,r/1e3,p))):O(a,t,e)};E(!0);r?v.hasOwnProperty(r.schemeIdUri)?v[r.schemeIdUri](r.value,function(t){var e=(new Date).getTime(),i=function(t,e){return t-e}(t,e);w(i),d.info("Local time: "+new Date(e)),d.info("Server time: "+new Date(t)),d.info("Server Time - Local Time (ms): "+i),a(t,i)},function(){t(e,n+1)}):t(e,n+1):(w(0),a())}(t)},getOffsetToDeviceTimeMs:function(){return p},setConfig:function(t){t&&(t.metricsModel&&(y=t.metricsModel),t.dashMetrics&&(_=t.dashMetrics),t.baseURLController&&(b=t.baseURLController))},reset:function(){E(!1)}},d=(0,h.default)(t).getInstance().getLogger(n),n}p.__dashjs_factory_name="TimeSyncController";var g=d.default.getSingletonFactory(p);g.HTTP_TIMEOUT_MS=f,d.default.updateSingletonFactory(p.__dashjs_factory_name,g),e.default=g,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(118)),r=n(i(0)),a=NaN,s=function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={baseUrls:e||null,selectedIdx:i||a},this.children=[]};function l(){var t,e=void 0,i=void 0,n=this.context,r=(0,o.default)(n).getInstance();function l(t,e,n){var o=i.getBaseURLsFromElement(n);t[e]?r.areEqual(o,t[e].data.baseUrls)||(t[e].data.baseUrls=o,t[e].data.selectedIdx=a):t[e]=new s(o)}function u(t){!function(){if(!i||!i.hasOwnProperty("getBaseURLsFromElement")||!i.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var n=i.getBaseURLsFromElement(t);r.areEqual(n,e.data.baseUrls)||(e.data.baseUrls=n,e.data.selectedIdx=a),t&&t.Period_asArray&&t.Period_asArray.forEach(function(t,n){l(e.children,n,t),t.AdaptationSet_asArray&&t.AdaptationSet_asArray.forEach(function(t,o){l(e.children[n].children,o,t),t.Representation_asArray&&t.Representation_asArray.sort(i.getRepresentationSortFunction()).forEach(function(t,i){l(e.children[n].children[o].children,i,t)})})})}function d(){e=new s}return t={reset:d,update:function(t){u(t)},getForPath:function(t){var i=e,n=[i.data];return t&&t.forEach(function(t){(i=i.children[t])&&n.push(i.data)}),n.filter(function(t){return t.baseUrls.length})},invalidateSelectedIndexes:function(t){!function t(i,n){var o=n||e;i(o.data),o.children&&o.children.forEach(function(e){return t(i,e)})}(function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=a)})},setConfig:function(t){t.dashManifestModel&&(i=t.dashManifestModel)}},d(),t}l.__dashjs_factory_name="BaseURLTreeModel",e.default=r.default.getClassFactory(l),t.exports=e.default},function(t,e,i){"use strict";var n=Array.isArray,o=Object.keys,r=Object.prototype.hasOwnProperty;t.exports=function t(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){var a,s,l,u=n(e),d=n(i);if(u&&d){if((s=e.length)!=i.length)return!1;for(a=s;0!=a--;)if(!t(e[a],i[a]))return!1;return!0}if(u!=d)return!1;var h=e instanceof Date,c=i instanceof Date;if(h!=c)return!1;if(h&&c)return e.getTime()==i.getTime();var f=e instanceof RegExp,p=i instanceof RegExp;if(f!=p)return!1;if(f&&p)return e.toString()==i.toString();var g=o(e);if((s=g.length)!==o(i).length)return!1;for(a=s;0!=a--;)if(!r.call(i,g[a]))return!1;for(a=s;0!=a--;)if(!t(e[l=g[a]],i[l]))return!1;return!0}return e!=e&&i!=i}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(9)),r=n(i(2)),a=n(i(4)),s=n(i(243)),l=n(i(244)),u=n(i(245)),d=n(i(0)),h=n(i(6)),c=n(i(1));function f(){var t,e=this.context,i=(0,r.default)(e).getInstance(),n=void 0,d=void 0,f=void 0,p=void 0,g=void 0;function m(){d.reset()}return t={chooseSelectorFromManifest:function(t){!function(){if(!n||!n.hasOwnProperty("getIsDVB"))throw new Error(c.default.MISSING_CONFIG_ERROR)}(),g=n.getIsDVB(t)?p:f},select:function(t){if(t){var e=t.baseUrls,n=t.selectedIdx;if(!isNaN(n))return e[n];var r=g.select(e);return r?(t.selectedIdx=e.indexOf(r),r):(i.trigger(a.default.URL_RESOLUTION_FAILED,{error:new h.default(o.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,o.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(g===f&&m()))}},reset:m,setConfig:function(t){t.selector&&(g=t.selector),t.dashManifestModel&&(n=t.dashManifestModel)}},d=(0,s.default)(e).create({updateEventName:a.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:a.default.SERVICE_LOCATION_BLACKLIST_ADD}),f=(0,u.default)(e).create({blacklistController:d}),p=(0,l.default)(e).create({blacklistController:d}),g=f,t}f.__dashjs_factory_name="BaseURLSelector",e.default=d.default.getClassFactory(f),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(2));function a(t){t=t||{};var e=[],i=(0,r.default)(this.context).getInstance(),n=t.updateEventName,o=t.addBlacklistEventName;function a(t){-1===e.indexOf(t)&&(e.push(t),i.trigger(n,{entry:t}))}function s(t){a(t.entry)}return function(){o&&i.on(o,s,this)}(),{add:a,contains:function(t){return!!(e.length&&t&&t.length)&&-1!==e.indexOf(t)},reset:function(){e=[]}}}a.__dashjs_factory_name="BlackListController",e.default=o.default.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function a(t){var e=(t=t||{}).blacklistController;return{select:function(t){return t&&function(t){var e=0,i=[],n=0,o=void 0,r=void 0;if((r=t.sort(function(t,e){var i=t.dvb_priority-e.dvb_priority;return isNaN(i)?0:i}).filter(function(t,e,i){return!e||i[0].dvb_priority&&t.dvb_priority&&i[0].dvb_priority===t.dvb_priority})).length)return r.length>1&&(r.forEach(function(t){e+=t.dvb_weight,i.push(e)}),o=Math.floor(Math.random()*(e-1)),i.every(function(t,e){return n=e,!(o<t)})),r[n]}((i=[],t.filter(function(t){return!e.contains(t.serviceLocation)||(t.dvb_priority&&i.push(t.dvb_priority),!1)}).filter(function(t){return!i.length||!t.dvb_priority||-1===i.indexOf(t.dvb_priority)})));var i}}}a.__dashjs_factory_name="DVBSelector",e.default=r.default.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function a(t){var e=(t=t||{}).blacklistController;return{select:function(t){var i=0,n=void 0;return t&&t.some(function(t,n){return i=n,!e.contains(t.serviceLocation)})&&(n=t[i]),n}}}a.__dashjs_factory_name="BasicSelector",e.default=r.default.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(3));function a(){var t=void 0,e=void 0,i=this.context;return t={createMediaSource:function(){var t="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:t?new WebKitMediaSource:null},attachMediaSource:function(t,e){var i=window.URL.createObjectURL(t);return e.setSource(i),i},detachMediaSource:function(t){t.setSource(null)},setDuration:function(t,e){return t.duration!=e&&(t.duration=e),t.duration},setSeekable:function(t,e,i){t&&"function"==typeof t.setLiveSeekableRange&&"function"==typeof t.clearLiveSeekableRange&&"open"===t.readyState&&e>=0&&e<i&&(t.clearLiveSeekableRange(),t.setLiveSeekableRange(e,i))},signalEndOfStream:function(t){var i=t.sourceBuffers,n=i.length;if("open"===t.readyState){for(var o=0;o<n;o++){if(i[o].updating)return;if(0===i[o].buffered.length)return}e.info("call to mediaSource endOfStream"),t.endOfStream()}}},e=(0,r.default)(i).getInstance().getLogger(t),t}a.__dashjs_factory_name="MediaSourceController",e.default=o.default.getSingletonFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(248)),a=n(i(43)),s=n(i(21)),l=n(i(120)),u=n(i(6)),d=i(10),h=n(i(2)),c=n(i(4)),f=n(i(9)),p=n(i(0)),g=n(i(250)),m=n(i(3));function v(t){t=t||{};var e=this.context,i=(0,h.default)(e).getInstance(),n=(0,s.default)(e).getInstance(),p=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=t.mssHandler,w=t.errHandler;function T(t){i.trigger(c.default.INTERNAL_MANIFEST_LOADED,{manifest:t.manifest})}return p={load:function(t){var r=new l.default(t,d.HTTPRequest.MPD_TYPE);y.load({request:r,success:function(r,a,s){if(_){var l=void 0,d=void 0,h=void 0;if(s&&s!==t?(d=n.parseBaseUrl(s),l=s):(n.isRelative(t)&&(t=n.resolve(t,window.location.href)),d=n.parseBaseUrl(t)),null===b&&(b=function(t){var i=null;return t.indexOf("SmoothStreamingMedia")>-1?(E&&(i=E.createMssParser(),E.registerEvents()),i):t.indexOf("MPD")>-1?(0,g.default)(e).create():i}(r)),null!==b){_.setMatchers(b.getMatchers()),_.setIron(b.getIron());try{h=b.parse(r)}catch(e){return void i.trigger(c.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new u.default(f.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,f.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+t)})}h?(h.url=l||t,h.originalUrl||(h.originalUrl=h.url),h.hasOwnProperty(o.default.LOCATION)&&(d=n.parseBaseUrl(h.Location_asArray[0]),v.debug("BaseURI set by Location to: "+d)),h.baseUri=d,h.loadedTime=new Date,_.resolveManifestOnLoad(h)):i.trigger(c.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new u.default(f.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,f.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+t)})}else i.trigger(c.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new u.default(f.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,f.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+t)})}},error:function(e,n,o){i.trigger(c.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new u.default(f.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,f.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(t+", ")+o)})}})},reset:function(){i.off(c.default.XLINK_READY,T,p),_&&(_.reset(),_=null),y&&(y.abort(),y=null),E&&E.reset()}},v=(0,m.default)(e).getInstance().getLogger(p),i.on(c.default.XLINK_READY,T,p),y=(0,a.default)(e).create({errHandler:w,metricsModel:t.metricsModel,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier}),_=(0,r.default)(e).create({errHandler:w,metricsModel:t.metricsModel,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier}),b=null,p}v.__dashjs_factory_name="ManifestLoader";var y=p.default.getClassFactory(v);e.default=y,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(249)),r=n(i(2)),a=n(i(4)),s=n(i(0)),l=n(i(121)),u=n(i(21)),d=n(i(13)),h="onLoad",c="onActuate",f="urn:mpeg:dash:resolve-to-zero:2013";function p(t){t=t||{};var e=this.context,i=(0,r.default)(e).getInstance(),n=(0,u.default)(e).getInstance(),s=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0;function _(t,e,i){var o={},r=void 0,a=void 0;o.elements=t,o.type=e,o.resolveType=i,0===o.elements.length&&E(o);for(var s=0;s<o.elements.length;s++)r=o.elements[s],a=n.isHTTPURL(r.url)?r.url:r.originalContent.BaseURL+r.url,y.load(a,r,o)}function b(t){var e,i=void 0,n="";if(i=t.element,e=t.resolveObject,i.resolvedContent){var o=0;0===i.resolvedContent.indexOf("<?xml")&&(o=i.resolvedContent.indexOf("?>")+2),n=i.resolvedContent.substr(0,o)+"<response>"+i.resolvedContent.substr(o)+"</response>",i.resolvedContent=v.xml_str2json(n)}(function(t){var e=void 0;for(e=0;e<t.elements.length;e++)if(!1===t.elements[e].resolved)return!1;return!0})(e)&&E(e)}function E(t){var e=[],n=void 0,o=void 0;if(function(t){var e=[],i=void 0,n=void 0,o=void 0,r=void 0,a=void 0,s=void 0;for(r=t.elements.length-1;r>=0;r--){if(i=t.elements[r],n=i.type+"_asArray",i.resolvedContent){if(i.resolvedContent)for(a=0;a<i.resolvedContent[n].length;a++)o=i.resolvedContent[n][a],e.push(o)}else delete i.originalContent["xlink:actuate"],delete i.originalContent["xlink:href"],e.push(i.originalContent);for(i.parentElement[n].splice(i.index,1),s=0;s<e.length;s++)i.parentElement[n].splice(i.index+s,0,e[s]);e=[]}t.elements.length>0&&g.run(m)}(t),t.resolveType===c&&i.trigger(a.default.XLINK_READY,{manifest:m}),t.resolveType===h)switch(t.type){case d.default.PERIOD:for(n=0;n<m[d.default.PERIOD+"_asArray"].length;n++)(o=m[d.default.PERIOD+"_asArray"][n]).hasOwnProperty(d.default.ADAPTATION_SET+"_asArray")&&(e=e.concat(w(o[d.default.ADAPTATION_SET+"_asArray"],o,d.default.ADAPTATION_SET,h))),o.hasOwnProperty(d.default.EVENT_STREAM+"_asArray")&&(e=e.concat(w(o[d.default.EVENT_STREAM+"_asArray"],o,d.default.EVENT_STREAM,h)));_(e,d.default.ADAPTATION_SET,h);break;case d.default.ADAPTATION_SET:i.trigger(a.default.XLINK_READY,{manifest:m})}}function w(t,e,i,n){var o=[],r=void 0,a=void 0,s=void 0;for(a=t.length-1;a>=0;a--)(r=t[a]).hasOwnProperty("xlink:href")&&r["xlink:href"]===f&&t.splice(a,1);for(a=0;a<t.length;a++)(r=t[a]).hasOwnProperty("xlink:href")&&r.hasOwnProperty("xlink:actuate")&&r["xlink:actuate"]===n&&(s=T(r["xlink:href"],e,i,a,n,r),o.push(s));return o}function T(t,e,i,n,o,r){return{url:t,parentElement:e,type:i,index:n,resolveType:o,originalContent:r,resolvedContent:null,resolved:!1}}return s={resolveManifestOnLoad:function(t){v=new l.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:p}),_(w((m=t).Period_asArray,m,d.default.PERIOD,h),d.default.PERIOD,h)},setMatchers:function(t){t&&(p=t)},setIron:function(t){t&&(g=t)},reset:function(){i.off(a.default.XLINK_ELEMENT_LOADED,b,s),y&&(y.reset(),y=null)}},i.on(a.default.XLINK_ELEMENT_LOADED,b,s),y=(0,o.default)(e).create({errHandler:t.errHandler,metricsModel:t.metricsModel,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier}),s}p.__dashjs_factory_name="XlinkController",e.default=s.default.getClassFactory(p),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(6)),r=n(i(43)),a=i(10),s=n(i(120)),l=n(i(2)),u=n(i(4)),d=n(i(0)),h=n(i(9));function c(t){t=t||{};var e="urn:mpeg:dash:resolve-to-zero:2013",i=this.context,n=(0,l.default)(i).getInstance(),d=(0,r.default)(i).create({errHandler:t.errHandler,metricsModel:t.metricsModel,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier});return{load:function(t,i,r){var l=function(e,a){i.resolved=!0,i.resolvedContent=e||null,n.trigger(u.default.XLINK_ELEMENT_LOADED,{element:i,resolveObject:r,error:e||a?null:new o.default(h.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,h.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+t)})};if(t===e)l(null,!0);else{var c=new s.default(t,a.HTTPRequest.XLINK_EXPANSION_TYPE);d.load({request:c,success:function(t){l(t)},error:function(){l(null)}})}},reset:function(){d&&(d.abort(),d=null)}}}c.__dashjs_factory_name="XlinkLoader",e.default=d.default.getClassFactory(c),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(3)),a=n(i(251)),s=n(i(121)),l=n(i(252)),u=n(i(253)),d=n(i(254)),h=n(i(255)),c=n(i(256)),f=n(i(258));function p(){var t=this.context,e=void 0,i=void 0,n=void 0,o=void 0,p=void 0;return e={parse:function(t){var e,n=window.performance.now();if(!(e=o.xml_str2json(t)))throw new Error("parsing the manifest failed");var r=window.performance.now();p.run(e);var a=window.performance.now();return i.info("Parsing complete: ( xml2json: "+(r-n).toPrecision(3)+"ms, objectiron: "+(a-r).toPrecision(3)+"ms, total: "+((a-n)/1e3).toPrecision(3)+"s)"),e},getMatchers:function(){return n},getIron:function(){return p}},i=(0,r.default)(t).getInstance().getLogger(e),n=[new u.default,new d.default,new h.default,new l.default],o=new s.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),p=(0,a.default)(t).create({adaptationset:new c.default,period:new f.default}),e}p.__dashjs_factory_name="DashParser",e.default=o.default.getClassFactory(p),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function a(t){function e(t,e){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}function i(t,i,n){for(var o=0,r=t.length;o<r;++o){var a=t[o];if(i[a.name])if(n[a.name]){if(a.merge){var s=i[a.name],l=n[a.name];"object"==typeof s&&"object"==typeof l?e(s,l):n[a.name]=s+l}}else n[a.name]=i[a.name]}}function n(t,e){for(var o=0,r=t.children.length;o<r;++o){var a=t.children[o],s=e[a.name+"_asArray"];if(s)for(var l=0,u=s.length;l<u;++l){var d=s[l];i(t.properties,e,d),n(a,d)}}}return{run:function(e){if(null===e||"object"!=typeof e)return e;if("period"in t)for(var i=t.period,o=e.Period_asArray,r=0,a=o.length;r<a;++r){var s=o[r];if(n(i,s),"adaptationset"in t){var l=s.AdaptationSet_asArray;if(l)for(var u=t.adaptationset,d=0,h=l.length;d<h;++d)n(u,l[d])}}return e}}}a.__dashjs_factory_name="ObjectIron";var s=r.default.getClassFactory(a);e.default=s,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a=o(i(55)),s=o(i(13)),l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,function(t,e){var i,n=(r(i={},s.default.MPD,[s.default.ID,s.default.PROFILES]),r(i,s.default.PERIOD,[s.default.ID]),r(i,s.default.BASE_URL,[s.default.SERVICE_LOCATION,s.default.BYTE_RANGE]),r(i,s.default.SEGMENT_BASE,[s.default.INDEX_RANGE]),r(i,s.default.INITIALIZATION,[s.default.RANGE]),r(i,s.default.REPRESENTATION_INDEX,[s.default.RANGE]),r(i,s.default.SEGMENT_LIST,[s.default.INDEX_RANGE]),r(i,s.default.BITSTREAM_SWITCHING,[s.default.RANGE]),r(i,s.default.SEGMENT_URL,[s.default.MEDIA_RANGE,s.default.INDEX_RANGE]),r(i,s.default.SEGMENT_TEMPLATE,[s.default.INDEX_RANGE,s.default.MEDIA,s.default.INDEX,s.default.INITIALIZATION_MINUS,s.default.BITSTREAM_SWITCHING_MINUS]),r(i,s.default.ASSET_IDENTIFIER,[s.default.VALUE,s.default.ID]),r(i,s.default.EVENT_STREAM,[s.default.VALUE]),r(i,s.default.ADAPTATION_SET,[s.default.PROFILES,s.default.MIME_TYPE,s.default.SEGMENT_PROFILES,s.default.CODECS,s.default.CONTENT_TYPE]),r(i,s.default.FRAME_PACKING,[s.default.VALUE,s.default.ID]),r(i,s.default.AUDIO_CHANNEL_CONFIGURATION,[s.default.VALUE,s.default.ID]),r(i,s.default.CONTENT_PROTECTION,[s.default.VALUE,s.default.ID]),r(i,s.default.ESSENTIAL_PROPERTY,[s.default.VALUE,s.default.ID]),r(i,s.default.SUPPLEMENTAL_PROPERTY,[s.default.VALUE,s.default.ID]),r(i,s.default.INBAND_EVENT_STREAM,[s.default.VALUE,s.default.ID]),r(i,s.default.ACCESSIBILITY,[s.default.VALUE,s.default.ID]),r(i,s.default.ROLE,[s.default.VALUE,s.default.ID]),r(i,s.default.RATING,[s.default.VALUE,s.default.ID]),r(i,s.default.VIEWPOINT,[s.default.VALUE,s.default.ID]),r(i,s.default.CONTENT_COMPONENT,[s.default.CONTENT_TYPE]),r(i,s.default.REPRESENTATION,[s.default.ID,s.default.DEPENDENCY_ID,s.default.MEDIA_STREAM_STRUCTURE_ID]),r(i,s.default.SUBSET,[s.default.ID]),r(i,s.default.METRICS,[s.default.METRICS_MINUS]),r(i,s.default.REPORTING,[s.default.VALUE,s.default.ID]),i);if(n.hasOwnProperty(e)){var o=n[e];return void 0!==o&&o.indexOf(t.name)>=0}return!1},function(t){return String(t)})}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a["default"]),e}();e.default=l,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};function o(t){return t&&t.__esModule?t:{default:t}}var r=o(i(55)),a=o(i(1)),s=o(i(13)),l=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,u=31536e3,d=2592e3,h=86400,c=3600,f=60,p=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,function(t){for(var e=[s.default.MIN_BUFFER_TIME,s.default.MEDIA_PRESENTATION_DURATION,s.default.MINIMUM_UPDATE_PERIOD,s.default.TIMESHIFT_BUFFER_DEPTH,s.default.MAX_SEGMENT_DURATION,s.default.MAX_SUBSEGMENT_DURATION,a.default.SUGGESTED_PRESENTATION_DELAY,s.default.START,a.default.START_TIME,s.default.DURATION],i=e.length,n=0;n<i;n++)if(t.nodeName===e[n])return l.test(t.value);return!1},function(t){var e=l.exec(t),i=parseFloat(e[2]||0)*u+parseFloat(e[4]||0)*d+parseFloat(e[6]||0)*h+parseFloat(e[8]||0)*c+parseFloat(e[10]||0)*f+parseFloat(e[12]||0);return void 0!==e[1]&&(i=-i),i})}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r["default"]),e}();e.default=p,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};var o,r=i(55),a=(o=r)&&o.__esModule?o:{default:o},s=60,l=60,u=1e3,d=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,h=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,function(t){return d.test(t.value)},function(t){var e=d.exec(t),i=void 0;if(i=Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10),e[6]&&parseInt(e[6],10)||0,e[7]&&parseFloat(e[7])*u||0),e[9]&&e[10]){var n=parseInt(e[9],10)*l+parseInt(e[10],10);i+=("+"===e[8]?-1:1)*n*s*u}return new Date(i)})}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a["default"]),e}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};var o,r=i(55),a=(o=r)&&o.__esModule?o:{default:o},s=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,function(t){return s.test(t.value)},function(t){return parseFloat(t)})}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a["default"]),e}();e.default=l,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};function o(t){return t&&t.__esModule?t:{default:t}}var r=o(i(122)),a=o(i(13)),s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=[a.default.PROFILES,a.default.WIDTH,a.default.HEIGHT,a.default.SAR,a.default.FRAMERATE,a.default.AUDIO_SAMPLING_RATE,a.default.MIME_TYPE,a.default.SEGMENT_PROFILES,a.default.CODECS,a.default.MAXIMUM_SAP_PERIOD,a.default.START_WITH_SAP,a.default.MAX_PLAYOUT_RATE,a.default.CODING_DEPENDENCY,a.default.SCAN_TYPE,a.default.FRAME_PACKING,a.default.AUDIO_CHANNEL_CONFIGURATION,a.default.CONTENT_PROTECTION,a.default.ESSENTIAL_PROPERTY,a.default.SUPPLEMENTAL_PROPERTY,a.default.INBAND_EVENT_STREAM];n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,a.default.ADAPTATION_SET,t,[new r.default(a.default.REPRESENTATION,t,[new r.default(a.default.SUB_REPRESENTATION,t)])])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r["default"]),e}();e.default=s,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i;this._name=e,this._merge=(i=e)&&i.length&&i.charAt(0)===i.charAt(0).toUpperCase()}return n(t,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};function o(t){return t&&t.__esModule?t:{default:t}}var r=o(i(122)),a=o(i(13)),s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=[a.default.SEGMENT_BASE,a.default.SEGMENT_TEMPLATE,a.default.SEGMENT_LIST];n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,a.default.PERIOD,t,[new r.default(a.default.ADAPTATION_SET,t,[new r.default(a.default.REPRESENTATION,t)])])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r["default"]),e}();e.default=s,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(2)),r=n(i(4)),a=n(i(0));function s(){var t=this.context,e=(0,o.default)(t).getInstance();return{capabilityError:function(t){e.trigger(r.default.ERROR,{error:"capability",event:t})},downloadError:function(t,i,n){e.trigger(r.default.ERROR,{error:"download",event:{id:t,url:i,request:n}})},manifestError:function(t,i,n,o){e.trigger(r.default.ERROR,{error:"manifestError",event:{message:t,id:i,manifest:n,event:o}})},timedTextError:function(t,i,n){e.trigger(r.default.ERROR,{error:"cc",event:{message:t,id:i,cc:n}})},mediaSourceError:function(t){e.trigger(r.default.ERROR,{error:"mediasource",event:t})},mediaKeySessionError:function(t){e.trigger(r.default.ERROR,{error:"key_session",event:t})},mediaKeyMessageError:function(t){e.trigger(r.default.ERROR,{error:"key_message",event:t})},error:function(t){e.trigger(r.default.ERROR,{error:t})}}}s.__dashjs_factory_name="ErrorHandler",e.default=a.default.getSingletonFactory(s),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function a(){var t,e=void 0;return t={supportsMediaSource:function(){var t="WebKitMediaSource"in window,e="MediaSource"in window;return t||e},supportsEncryptedMedia:function(){return e},supportsCodec:function(t){return!!("MediaSource"in window&&MediaSource.isTypeSupported(t))||!!("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(t))},setEncryptedMediaSupported:function(t){e=t}},e=!1,t}a.__dashjs_factory_name="Capabilities",e.default=r.default.getSingletonFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(262)),r=n(i(0));function a(){var t=void 0;return{initialize:function(e){if(t=new o.default,!e)return null;var i=e.indexOf("#");if(-1!==i)for(var n=e.substr(i+1).split("&"),r=0,a=n.length;r<a;++r){var s=n[r],l=s.indexOf("=");if(-1!==l){var u=s.substring(0,l);t.hasOwnProperty(u)&&(t[u]=s.substr(l+1))}}},getURIFragmentData:function(){return t}}}a.__dashjs_factory_name="URIFragmentModel",e.default=r.default.getSingletonFactory(a),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null},t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(2)),r=n(i(4)),a=n(i(0));function s(){var t=this.context,e=(0,o.default)(t).getInstance(),i=void 0;return{getValue:function(){return i},setValue:function(t){i=t,t&&e.trigger(r.default.MANIFEST_LOADED,{data:t})}}}s.__dashjs_factory_name="ManifestModel",e.default=a.default.getSingletonFactory(s),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(123)),a=n(i(0)),s=i(10),l=n(i(1)),u=n(i(111)),d=i(35),h=4,c=36e4,f=36e4,p=.9,g=1e4,m=20,v=80,y=10,_=12,b=20,E=30,w=60,T=600,S=.2,x=.8,C=100,I=50,A=5,M=3,O=1e3,D=3,R=500,N=1,k=500,P=3,L=10,F=5,B=.02,U=0,j=.5,H=50,G=!1;function z(){var t,e,i,n=void 0,a=void 0,z=void 0,Y=void 0,V=void 0,q=void 0,W=void 0,K=void 0,X=void 0,Q=void 0,Z=void 0,J=void 0,$=void 0,tt=void 0,et=void 0,it=void 0,nt=void 0,ot=void 0,rt=void 0,at=void 0,st=void 0,lt=void 0,ut=void 0,dt=void 0,ht=void 0,ct=void 0,ft=void 0,pt=void 0,gt=void 0,mt=void 0,vt=void 0,yt=void 0,_t=void 0,bt=void 0,Et=void 0,wt=void 0,Tt={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso&ms"};function St(t){var e=void 0;for(e=0;e<ct.length;e++)if(ct[e].rulename===t)return e;return-1}function xt(){return vt?V||P:V}function Ct(t,e){It(t,e);var i=new r.default;i.schemeIdUri=t,i.value=e,z.push(i)}function It(t,e){(0,d.checkParameterType)(t,"string"),(0,d.checkParameterType)(e,"string"),z.forEach(function(i,n){i.schemeIdUri===t&&i.value===e&&z.splice(n,1)})}function At(){return vt}return t={setABRStrategy:function(t){if(t!==l.default.ABR_STRATEGY_DYNAMIC&&t!==l.default.ABR_STRATEGY_BOLA&&t!==l.default.ABR_STRATEGY_THROUGHPUT)throw l.default.BAD_ARGUMENT_ERROR;lt=t},getABRStrategy:function(){return lt},setUseDefaultABRRules:function(t){(0,d.checkParameterType)(t,"boolean"),ut=t},getUseDefaultABRRules:function(){return ut},getABRCustomRules:function(){return ct},addABRCustomRule:function(t,e,i){if("string"!=typeof t||t!==u.default.ABANDON_FRAGMENT_RULES&&t!==u.default.QUALITY_SWITCH_RULES||"string"!=typeof e)throw l.default.BAD_ARGUMENT_ERROR;var n=St(e);-1===n?ct.push({type:t,rulename:e,rule:i}):(ct[n].type=t,ct[n].rule=i)},removeABRCustomRule:function(t){if(t){var e=St(t);-1!==e&&ct.splice(e,1)}else ct=[]},setBandwidthSafetyFactor:function(t){(0,d.checkParameterType)(t,"number"),nt=t},getBandwidthSafetyFactor:function(){return nt},setAbandonLoadTimeout:function(t){(0,d.checkParameterType)(t,"number"),ot=t},getAbandonLoadTimeout:function(){return ot},setLastBitrateCachingInfo:function(t,e){if("boolean"!=typeof t||void 0!==e&&("number"!=typeof e||isNaN(e)))throw l.default.BAD_ARGUMENT_ERROR;Q.enabled=t,void 0!==e&&(Q.ttl=e)},getLastBitrateCachingInfo:function(){return Q},setLastMediaSettingsCachingInfo:function(t,e){if("boolean"!=typeof t||void 0!==e&&("number"!=typeof e||isNaN(e)))throw l.default.BAD_ARGUMENT_ERROR;Z.enabled=t,void 0!==e&&(Z.ttl=e)},getLastMediaSettingsCachingInfo:function(){return Z},setStableBufferTime:function(t){(0,d.checkParameterType)(t,"number"),J=t},getStableBufferTime:function(){return At()?.6*xt():isNaN(J)?ht?b:_:J},setBufferTimeAtTopQuality:function(t){(0,d.checkParameterType)(t,"number"),$=t},getBufferTimeAtTopQuality:function(){return $},setBufferTimeAtTopQualityLongForm:function(t){(0,d.checkParameterType)(t,"number"),tt=t},getBufferTimeAtTopQualityLongForm:function(){return tt},setLongFormContentDurationThreshold:function(t){(0,d.checkParameterType)(t,"number"),et=t},getLongFormContentDurationThreshold:function(){return et},setSegmentOverlapToleranceTime:function(t){(0,d.checkParameterType)(t,"number"),it=t},getSegmentOverlapToleranceTime:function(){return it},getCacheLoadThresholdForType:function(t){return pt[t]},setCacheLoadThresholdForType:function(t,e){(0,d.checkParameterType)(e,"number"),(0,d.checkIsVideoOrAudioType)(t),pt[t]=e},setBufferToKeep:function(t){(0,d.checkParameterType)(t,"number"),W=t},getBufferToKeep:function(){return W},setBufferAheadToKeep:function(t){(0,d.checkParameterType)(t,"number"),K=t},getBufferAheadToKeep:function(){return K},setBufferPruningInterval:function(t){(0,d.checkParameterType)(t,"number"),X=t},getBufferPruningInterval:function(){return X},setRetryAttemptsForType:function(t,e){if("number"!=typeof e||"string"!=typeof t||t!==s.HTTPRequest.MPD_TYPE&&t!==s.HTTPRequest.MEDIA_SEGMENT_TYPE)throw l.default.BAD_ARGUMENT_ERROR;rt[t]=e},getRetryAttemptsForType:function(t){return At()?rt[t]*F:rt[t]},setRetryIntervalForType:function(t,e){(0,d.checkParameterType)(e,"number"),at[t]=e},getRetryIntervalForType:function(t){return At()?at[t]/L:at[t]},setWallclockTimeUpdateInterval:function(t){(0,d.checkParameterType)(t,"number"),st=t},getWallclockTimeUpdateInterval:function(){return st},setScheduleWhilePaused:function(t){(0,d.checkParameterType)(t,"boolean"),q=t},getScheduleWhilePaused:function(){return q},getUseSuggestedPresentationDelay:function(){return a},setUseSuggestedPresentationDelay:function(t){(0,d.checkParameterType)(t,"boolean"),a=t},setLiveDelayFragmentCount:function(t){(0,d.checkParameterType)(t,"number"),Y=t},getLiveDelayFragmentCount:function(){return Y},getLiveDelay:xt,setLiveDelay:function(t){void 0!==t&&(0,d.checkParameterType)(t,"number"),V=t},setUseManifestDateHeaderTimeSource:function(t){(0,d.checkParameterType)(t,"boolean"),n=t},getUseManifestDateHeaderTimeSource:function(){return n},addUTCTimingSource:Ct,removeUTCTimingSource:It,getUTCTimingSources:function(){return z},clearDefaultUTCTimingSources:function(){z=[]},restoreDefaultUTCTimingSources:function(){Ct(Tt.scheme,Tt.value)},setXHRWithCredentialsForType:function t(e,i){e?dt[e]=!!i:Object.keys(dt).forEach(function(e){t(e,i)})},getXHRWithCredentialsForType:function(t){var e=dt[t];return void 0===e?dt.default:e},setFastSwitchEnabled:function(t){(0,d.checkParameterType)(t,"boolean"),ht=t},getFastSwitchEnabled:function(){return ht},setMovingAverageMethod:function(t){if(t!==l.default.MOVING_AVERAGE_SLIDING_WINDOW&&t!==l.default.MOVING_AVERAGE_EWMA)throw l.default.BAD_ARGUMENT_ERROR;ft=t},getMovingAverageMethod:function(){return ft},setJumpGaps:function(t){(0,d.checkParameterType)(t,"boolean"),gt=t},getJumpGaps:function(){return gt},setSmallGapLimit:function(t){(0,d.checkParameterType)(t,"number"),mt=t},getSmallGapLimit:function(){return mt},getLowLatencyEnabled:At,setLowLatencyEnabled:function(t){(0,d.checkParameterType)(t,"boolean"),vt=t},setCatchUpPlaybackRate:function(t){(0,d.checkParameterType)(t,"number"),(0,d.checkRange)(t,0,.5),wt=t},getCatchUpPlaybackRate:function(){return wt},setLowLatencyMinDrift:function(t){(0,d.checkParameterType)(t,"number"),bt=t},getLowLatencyMinDrift:function(){return bt},setLowLatencyMaxDriftBeforeSeeking:function(t){(0,d.checkParameterType)(t,"number"),Et=t},getLowLatencyMaxDriftBeforeSeeking:function(){return Et},setManifestUpdateRetryInterval:function(t){(0,d.checkParameterType)(t,"number"),yt=t},getManifestUpdateRetryInterval:function(){return yt},setKeepProtectionMediaKeys:function(t){(0,d.checkParameterType)(t,"boolean"),_t=t},getKeepProtectionMediaKeys:function(){return _t},getDefaultUtcTimingSource:function(){return Tt},reset:function(){}},z=[],a=!1,n=!0,q=!0,lt=l.default.ABR_STRATEGY_DYNAMIC,ut=!0,ht=!1,Q={enabled:!0,ttl:c},Z={enabled:!0,ttl:f},Y=h,V=void 0,W=m,K=v,X=y,J=NaN,$=E,tt=w,et=T,it=S,nt=p,ot=g,st=H,gt=!1,mt=x,yt=C,dt={default:G},ct=[],ft=l.default.MOVING_AVERAGE_SLIDING_WINDOW,vt=!1,bt=B,Et=U,wt=j,o(e={},s.HTTPRequest.MPD_TYPE,D),o(e,s.HTTPRequest.XLINK_EXPANSION_TYPE,N),o(e,s.HTTPRequest.MEDIA_SEGMENT_TYPE,M),o(e,s.HTTPRequest.INIT_SEGMENT_TYPE,M),o(e,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,M),o(e,s.HTTPRequest.INDEX_SEGMENT_TYPE,M),o(e,s.HTTPRequest.OTHER_TYPE,M),rt=e,o(i={},s.HTTPRequest.MPD_TYPE,R),o(i,s.HTTPRequest.XLINK_EXPANSION_TYPE,k),o(i,s.HTTPRequest.MEDIA_SEGMENT_TYPE,O),o(i,s.HTTPRequest.INIT_SEGMENT_TYPE,O),o(i,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,O),o(i,s.HTTPRequest.INDEX_SEGMENT_TYPE,O),o(i,s.HTTPRequest.OTHER_TYPE,O),at=i,(pt={})[l.default.VIDEO]=I,pt[l.default.AUDIO]=A,_t=!1,t}z.__dashjs_factory_name="MediaPlayerModel",e.default=a.default.getSingletonFactory(z),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(34)),a=n(i(266)),s=i(10),l=n(i(267)),u=n(i(268)),d=n(i(269)),h=n(i(270)),c=n(i(271)),f=i(272),p=n(i(273)),g=n(i(2)),m=n(i(274)),v=n(i(4)),y=n(i(0));function _(){var t,e=1e3,i=this.context,n=(0,g.default)(i).getInstance(),y=void 0;function _(){n.trigger(v.default.METRICS_CHANGED)}function b(t){n.trigger(v.default.METRIC_CHANGED,{mediaType:t}),_()}function E(t,e,i){n.trigger(v.default.METRIC_UPDATED,{mediaType:t,metric:e,value:i}),b(t)}function w(t,e,i){n.trigger(v.default.METRIC_ADDED,{mediaType:t,metric:e,value:i}),b(t)}function T(t){var e=void 0;return y.hasOwnProperty(t)?e=y[t]:(e=new a.default,y[t]=e),e}function S(t,i,n){var o=T(t);o[i].push(n),o[i].length>e&&o[i].shift()}function x(t,e,i){S(t,e,i),w(t,e,i)}return t={clearCurrentMetricsForType:function(t){delete y[t],b(t)},clearAllCurrentMetrics:function(){y={},_()},getReadOnlyMetricsFor:function(t){return y.hasOwnProperty(t)?y[t]:null},getMetricsFor:T,addHttpRequest:function t(e,i,n,o,a,l,u,d,h,c,f,p,g,m){var v=new s.HTTPRequest;a&&a!==o&&(t(e,null,n,o,null,null,u,d,null,null,null,p,null,null),v.actualurl=a),v.tcpid=i,v.type=n,v.url=o,v.range=u,v.trequest=d,v.tresponse=h,v.responsecode=f,v._tfinish=c,v._stream=e,v._mediaduration=p,v._responseHeaders=g,v._serviceLocation=l,m?m.forEach(function(t){!function(t,e,i,n){var o=new s.HTTPRequestTrace;o.s=e,o.d=i,o.b=n,t.trace.push(o),t.interval||(t.interval=0),t.interval+=i}(v,t.s,t.d,t.b)}):(delete v.interval,delete v.trace),x(e,r.default.HTTP_REQUEST,v)},addRepresentationSwitch:function(t,e,i,n,o){var a=new l.default;a.t=e,a.mt=i,a.to=n,o?a.lto=o:delete a.lto,x(t,r.default.TRACK_SWITCH,a)},addBufferLevel:function(t,e,i){var n=new u.default;n.t=e,n.level=i,x(t,r.default.BUFFER_LEVEL,n)},addBufferState:function(t,e,i){var n=new d.default;n.target=i,n.state=e,x(t,r.default.BUFFER_STATE,n)},addDVRInfo:function(t,e,i,n){var o=new h.default;o.time=e,o.range=n,o.manifestInfo=i,x(t,r.default.DVR_INFO,o)},addDroppedFrames:function(t,e){var i=new c.default,n=T(t).DroppedFrames;i.time=e.creationTime,i.droppedFrames=e.droppedVideoFrames,n.length>0&&n[n.length-1]==i||x(t,r.default.DROPPED_FRAMES,i)},addSchedulingInfo:function(t,e,i,n,o,a,s,l,u){var d=new p.default;d.mediaType=t,d.t=e,d.type=i,d.startTime=n,d.availabilityStartTime=o,d.duration=a,d.quality=s,d.range=l,d.state=u,x(t,r.default.SCHEDULING_INFO,d)},addRequestsQueue:function(t,e,i){var n=new m.default;n.loadingRequests=e,n.executedRequests=i,T(t).RequestsQueue=n,w(t,r.default.REQUESTS_QUEUE,n)},addManifestUpdate:function(t,e,i,n,a,s,l,u,d,h){var c=new f.ManifestUpdate;c.mediaType=t,c.type=e,c.requestTime=i,c.fetchTime=n,c.availabilityStartTime=a,c.presentationStartTime=s,c.clientTimeOffset=l,c.currentTime=u,c.buffered=d,c.latency=h,S(o.default.STREAM,r.default.MANIFEST_UPDATE,c),w(t,r.default.MANIFEST_UPDATE,c)},updateManifestUpdateInfo:function(t,e){if(t){for(var i in e)t[i]=e[i];E(t.mediaType,r.default.MANIFEST_UPDATE,t)}},addManifestUpdateStreamInfo:function(t,e,i,n,o){if(t){var a=new f.ManifestUpdateStreamInfo;a.id=e,a.index=i,a.start=n,a.duration=o,t.streamInfo.push(a),E(t.mediaType,r.default.MANIFEST_UPDATE_STREAM_INFO,t)}},addManifestUpdateRepresentationInfo:function(t,e,i,n,o,a,s,l){if(t){var u=new f.ManifestUpdateRepresentationInfo;u.id=e,u.index=i,u.streamIndex=n,u.mediaType=o,u.startNumber=s,u.fragmentInfoType=l,u.presentationTimeOffset=a,t.representationInfo.push(u),E(t.mediaType,r.default.MANIFEST_UPDATE_TRACK_INFO,t)}},addPlayList:function(t){var e=o.default.STREAM;t.trace&&Array.isArray(t.trace)?t.trace.forEach(function(t){t.hasOwnProperty("subreplevel")&&!t.subreplevel&&delete t.subreplevel}):delete t.trace,x(e,r.default.PLAY_LIST,t)},addDVBErrors:function(t){x(o.default.STREAM,r.default.DVB_ERRORS,t)}},y={},t}_.__dashjs_factory_name="MetricsModel",e.default=y.default.getSingletonFactory(_),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.t=null,this.mt=null,this.to=null,this.lto=null},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.t=null,this.level=null},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(25),r=(n=o)&&n.__esModule?n:{default:n};e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.target=null,this.state=r.default.BUFFER_EMPTY},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.time=null,this.range=null,this.manifestInfo=null},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.time=null,this.droppedFrames=null},t.exports=e.default},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.ManifestUpdate=function t(){n(this,t),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},e.ManifestUpdateStreamInfo=function t(){n(this,t),this.id=null,this.index=null,this.start=null,this.duration=null},e.ManifestUpdateRepresentationInfo=function t(){n(this,t),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loadingRequests=[],this.executedRequests=[]},t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(2)),a=n(i(4)),s=n(i(3));function l(){var t=void 0,e=void 0,i=void 0,n=void 0,o=void 0,l="element is not video or audio DOM type!",u=this.context,d=(0,r.default)(u).getInstance(),h=[];function c(){i&&(i.playbackRate=o||1,i.removeEventListener("canplay",c))}function f(t){i&&(i.readyState<=2&&t>0?i.addEventListener("canplay",c):i.playbackRate=t)}function p(){return h.length>0}function g(t){var e=h.indexOf(t),n=void 0;null!==t&&(-1!==e&&h.splice(e,1),i&&!1===p()&&0===i.playbackRate&&(f(o||1),i.paused||((n=document.createEvent("Event")).initEvent("playing",!0,!1),i.dispatchEvent(n))))}function m(){if(i&&p()&&0===i.playbackRate){var t=document.createEvent("Event");t.initEvent("waiting",!0,!1),i.dispatchEvent(t)}}function v(){return i?i.buffered:null}return t={initialize:function(){d.on(a.default.PLAYBACK_PLAYING,m,this)},setCurrentTime:function(t,e){if(i){if(i.currentTime==t)return;try{t=e?function(t){var e=v(),i=t,n=9999999999;if(e)for(var o=0;o<e.length;o++){var r=e.start(o),a=e.end(o),s=Math.abs(r-t),l=Math.abs(a-t);if(t>=r&&t<=a)return t;s<n&&(n=s,i=r),l<n&&(n=l,i=a)}return i}(t):t,i.currentTime=t}catch(e){0===i.readyState&&e.code===e.INVALID_STATE_ERR&&setTimeout(function(){i.currentTime=t},400)}}},play:function(){if(i){i.autoplay=!0;var t=i.play();t&&t.catch&&"undefined"!=typeof Promise&&t.catch(function(t){"NotAllowedError"===t.name&&d.trigger(a.default.PLAYBACK_NOT_ALLOWED),e.warn("Caught pending play exception - continuing ("+t+")")})}},isPaused:function(){return i?i.paused:null},pause:function(){i&&(i.pause(),i.autoplay=!1)},isSeeking:function(){return i?i.seeking:null},getTime:function(){return i?i.currentTime:null},getPlaybackRate:function(){return i?i.playbackRate:null},setPlaybackRate:f,getPlayedRanges:function(){return i?i.played:null},getEnded:function(){return i?i.ended:null},setStallState:function(t,e){!function(t,e){e?function(t){var e=void 0;if(null===t||i.seeking||-1!==h.indexOf(t))return;h.push(t),i&&1===h.length&&((e=document.createEvent("Event")).initEvent("waiting",!0,!1),o=i.playbackRate,f(0),i.dispatchEvent(e))}(t):g(t)}(t,e)},getElement:function(){return i},setElement:function(t){if(!(null==t||t&&/^(VIDEO|AUDIO)$/i.test(t.nodeName)))throw l;(i=t)&&(i.preload="auto")},setSource:function(t){i&&(t?i.src=t:(i.removeAttribute("src"),i.load()))},getSource:function(){return i?i.src:null},getTTMLRenderingDiv:function(){return n},setTTMLRenderingDiv:function(t){(n=t).style.position="absolute",n.style.display="flex",n.style.overflow="hidden",n.style.pointerEvents="none",n.style.top=0,n.style.left=0},getPlaybackQuality:function(){if(!i)return null;var t="webkitDroppedFrameCount"in i&&"webkitDecodedFrameCount"in i,e=null;return"getVideoPlaybackQuality"in i?e=i.getVideoPlaybackQuality():t&&(e={droppedVideoFrames:i.webkitDroppedFrameCount,totalVideoFrames:i.webkitDroppedFrameCount+i.webkitDecodedFrameCount,creationTime:new Date}),e},addEventListener:function(t,e){i&&i.addEventListener(t,e)},removeEventListener:function(t,e){i&&i.removeEventListener(t,e)},getReadyState:function(){return i?i.readyState:NaN},getBufferRange:v,getClientWidth:function(){return i?i.clientWidth:NaN},getClientHeight:function(){return i?i.clientHeight:NaN},getTextTracks:function(){return i?i.textTracks:[]},getTextTrack:function(t,e,n,o,r){if(i)for(var a=0;a<i.textTracks.length;a++)if(i.textTracks[a].kind===t&&(!e||i.textTracks[a].label==e)&&i.textTracks[a].language===n&&i.textTracks[a].isTTML===o&&i.textTracks[a].isEmbedded===r)return i.textTracks[a];return null},addTextTrack:function(t,e,n){return i?i.addTextTrack(t,e,n):null},appendChild:function(t){i&&(i.appendChild(t),void 0!==t.isTTML&&(i.textTracks[i.textTracks.length-1].isTTML=t.isTTML,i.textTracks[i.textTracks.length-1].isEmbedded=t.isEmbedded))},removeChild:function(t){i&&i.removeChild(t)},getVideoWidth:function(){return i?i.videoWidth:NaN},getVideoHeight:function(){return i?i.videoHeight:NaN},getVideoRelativeOffsetTop:function(){return i&&i.parentNode?i.getBoundingClientRect().top-i.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){return i&&i.parentNode?i.getBoundingClientRect().left-i.parentNode.getBoundingClientRect().left:NaN},reset:function(){d.off(a.default.PLAYBACK_PLAYING,m,this)}},e=(0,s.default)(u).getInstance().getLogger(t),t}l.__dashjs_factory_name="VideoModel",e.default=o.default.getSingletonFactory(l),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(3)),a=n(i(1)),s=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],l="dashjs_?_bitrate",u="dashjs_?_settings",d="localStorage",h="sessionStorage",c="LastBitrate",f="LastMediaSettings";function p(t){t=t||{};var e=this.context,i=t.mediaPlayerModel,n=void 0,o=void 0,p=void 0;function g(t){if(void 0!==p)return p;p=!1;var e=void 0;try{"undefined"!=typeof window&&(e=window[t])}catch(t){return o.warn("DOMStorage access denied: "+t.message),p}if(!e||t!==d&&t!==h)return p;try{e.setItem("1","1"),e.removeItem("1"),p=!0}catch(t){o.warn("DOMStorage is supported, but cannot be used: "+t.message)}return p}function m(){return 6e5*Math.round((new Date).getTime()/6e5)}function v(t,e){return g(t)&&i["get"+e+"CachingInfo"]().enabled}function y(){if(!i||!i.hasOwnProperty("getLastMediaSettingsCachingInfo"))throw new Error(a.default.MISSING_CONFIG_ERROR)}return n={getSavedBitrateSettings:function(t){var e=NaN;if(y(),v(d,c)){var n=l.replace(/\?/,t);try{var r=JSON.parse(localStorage.getItem(n))||{},a=(new Date).getTime()-parseInt(r.timestamp,10)>=i.getLastMediaSettingsCachingInfo().ttl||!1,s=parseFloat(r.bitrate);isNaN(s)||a?a&&localStorage.removeItem(n):(e=s,o.debug("Last saved bitrate for "+t+" was "+s))}catch(t){return null}}return e},setSavedBitrateSettings:function(t,e){if(v(d,c)&&e){var i=l.replace(/\?/,t);try{localStorage.setItem(i,JSON.stringify({bitrate:e.toFixed(3),timestamp:m()}))}catch(t){o.error(t.message)}}},getSavedMediaSettings:function(t){if(y(),!v(d,f))return null;var e=null,n=u.replace(/\?/,t);try{var o=JSON.parse(localStorage.getItem(n))||{},r=(new Date).getTime()-parseInt(o.timestamp,10)>=i.getLastMediaSettingsCachingInfo().ttl||!1;e=o.settings,r&&(localStorage.removeItem(n),e=null)}catch(t){return null}return e},setSavedMediaSettings:function(t,e){if(v(d,f)){var i=u.replace(/\?/,t);try{localStorage.setItem(i,JSON.stringify({settings:e,timestamp:m()}))}catch(t){o.error(t.message)}}}},o=(0,r.default)(e).getInstance().getLogger(n),g(d)&&s.forEach(function(t){var e=localStorage.getItem(t.oldKey);if(e){localStorage.removeItem(t.oldKey);try{localStorage.setItem(t.newKey,e)}catch(t){o.error(t.message)}}}),n}p.__dashjs_factory_name="DOMStorage";var g=o.default.getSingletonFactory(p);e.default=g,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(13)),a=n(i(278)),s=n(i(279)),l=n(i(280)),u=n(i(281)),d=n(i(125)),h=n(i(0)),c=n(i(109)),f=i(35);function p(){var t,e=void 0,i=void 0,n=void 0,h=void 0;function p(t,e){return e&&t?e.getRepresentationForQuality(t.quality):null}function g(t){return t&&t.streamInfo&&void 0!==t.streamInfo.id&&n[t.streamInfo.id]?n[t.streamInfo.id][t.index]:null}function m(t,e){for(var i=e.length,n=0;n<i;n++){var o=e[n];if(t.id===o.id)return o}return null}function v(t){var i=new a.default,n=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index],o=e.getRepresentationFor(t.index,n);return i.id=t.id,i.quality=t.index,i.bandwidth=e.getBandwidth(o),i.DVRWindow=t.segmentAvailabilityRange,i.fragmentDuration=t.segmentDuration||(t.segments&&t.segments.length>0?t.segments[0].duration:NaN),i.MSETimeOffset=t.MSETimeOffset,i.useCalculatedLiveEdgeTime=t.useCalculatedLiveEdgeTime,i.mediaInfo=y(t.adaptation),i}function y(t){var i,n=new s.default,o=t.period.mpd.manifest.Period_asArray[t.period.index].AdaptationSet_asArray[t.index];return n.id=t.id,n.index=t.index,n.type=t.type,n.streamInfo=b(t.period),n.representationCount=e.getRepresentationCount(o),n.labels=e.getLabelsForAdaptation(o),n.lang=e.getLanguageForAdaptation(o),i=e.getViewpointForAdaptation(o),n.viewpoint=i?i.value:void 0,n.accessibility=e.getAccessibilityForAdaptation(o).map(function(t){var e=t.value,i=e;return t.schemeIdUri&&t.schemeIdUri.search("cea-608")>=0&&void 0!==c.default&&(i=e?"cea-608:"+e:"cea-608",n.embeddedCaptions=!0),i}),n.audioChannelConfiguration=e.getAudioChannelConfigurationForAdaptation(o).map(function(t){return t.value}),n.roles=e.getRolesForAdaptation(o).map(function(t){return t.value}),n.codec=e.getCodec(o),n.mimeType=e.getMimeType(o),n.contentProtection=e.getContentProtectionData(o),n.bitrateList=e.getBitrateListForAdaptation(o),n.contentProtection&&n.contentProtection.forEach(function(t){t.KID=e.getKID(t)}),n.isText=e.getIsTextTrack(n.mimeType),n}function _(t,e,i){t.id=e,t.index=100+parseInt(e.substring(2,3)),t.type=o.default.EMBEDDED_TEXT,t.codec="cea-608-in-SEI",t.isText=!0,t.isEmbedded=!0,t.lang=i,t.roles=["caption"]}function b(t){var i,n,o=new l.default;return o.id=t.id,o.index=t.index,o.start=t.start,o.duration=t.duration,o.manifestInfo=(i=t.mpd,(n=new u.default).DVRWindowSize=i.timeShiftBufferDepth,n.loadedTime=i.manifest.loadedTime,n.availableFrom=i.availabilityStartTime,n.minBufferTime=i.manifest.minBufferTime,n.maxFragmentDuration=i.maxSegmentDuration,n.duration=e.getDuration(i.manifest),n.isDynamic=e.getIsDynamic(i.manifest),n),o.isLast=1===t.mpd.manifest.Period_asArray.length||Math.abs(o.start+o.duration-o.manifestInfo.duration)<1,o}function E(t,i,n,o){var a,s=e.getAdaptationsForType(t,i,n);if(!s||0===s.length)return null;if(s.length>1&&o){var l=w(o,n);if(h[o.id]&&h[o.id][n])for(var u=0,d=s.length;u<d;u++)if(h[o.id][n].isMediaInfoEqual(l[u]))return s[u];for(u=0,d=s.length;u<d;u++)if(a=s[u],e.getRolesForAdaptation(a).filter(function(t){return t.value===r.default.MAIN})[0])return s[u]}return s[0]}function w(t,r,a){var s,l=i,u=a,d=[],h=void 0,c=void 0,f=void 0,p=void 0,g=void 0;if(u){T();var v=e.getMpd(u);l=e.getRegularPeriods(v)}else{if(!(i.length>0))return d;u=i[0].mpd.manifest}var b=m(t,l),E=b.id,w=e.getAdaptationsForType(u,t.index,r!==o.default.EMBEDDED_TEXT?r:o.default.VIDEO);if(!w)return d;for(n[E]=n[E]||e.getAdaptationsForPeriod(b),p=0,s=w.length;p<s;p++)if(h=w[p],f=e.getIndexForAdaptation(h,u,t.index),c=y(n[E][f]),r===o.default.EMBEDDED_TEXT){var S=c.accessibility.length;for(g=0;g<S;g++)if(c){var x=c.accessibility[g];if(0===x.indexOf("cea-608:")){var C=x.substring(8).split(";");if("CC"===C[0].substring(0,2))for(g=0;g<C.length;g++)c||(c=y.call(this,n[E][f])),_(c,C[g].substring(0,3),C[g].substring(4)),d.push(c),c=null;else for(g=0;g<C.length;g++)c||(c=y.call(this,n[E][f])),_(c,"CC"+(g+1),C[g]),d.push(c),c=null}else 0===x.indexOf("cea-608")&&(_(c,o.default.CC1,"eng"),d.push(c),c=null)}}else r===o.default.IMAGE?(c.type=o.default.IMAGE,d.push(c),c=null):c&&d.push(c);return d}function T(){if(!e||!e.hasOwnProperty("getMpd")||!e.hasOwnProperty("getRegularPeriods"))throw new Error("setConfig function has to be called previously")}function S(t){if(!(t&&t.hasOwnProperty("getRepresentationController")&&t.hasOwnProperty("getIndexHandler")&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getType")&&t.hasOwnProperty("getStreamInfo")))throw new Error("streamProcessor parameter is missing or malformed!")}function x(){i=[],n={},h={}}return t={convertDataToRepresentationInfo:v,getDataForMedia:g,getStreamsInfo:function(t,n){var o=[],r=i;if(t){T();var a=e.getMpd(t);r=e.getRegularPeriods(a)}n||(n=r.length);for(var s=0;s<n;s++)o.push(b(r[s]));return o},getMediaInfoForType:function(t,o){if(0===i.length)return null;var r=i[0].mpd.manifest,a=E(r,t.index,o,t);if(!a)return null;var s=m(t,i),l=s.id,u=e.getIndexForAdaptation(a,r,t.index);return n[l]=n[l]||e.getAdaptationsForPeriod(s),y(n[l][u])},getAllMediaInfoForType:w,getRepresentationInfo:function(t,e){!function(t){if(!t||!t.hasOwnProperty("getRepresentationForQuality")||!t.hasOwnProperty("getCurrentRepresentation"))throw new Error("representationController parameter is missing or malformed!")}(t);var i=void 0;return void 0!==e?((0,f.checkInteger)(e),i=t.getRepresentationForQuality(e)):i=t.getCurrentRepresentation(),i?v(i):null},getAdaptationForType:E,updateData:function(t){S(t);var n,o=m(t.getStreamInfo(),i),r=t.getMediaInfo(),a=g(r),s=t.getType(),l=void 0;n=r?r.id:null,i.length>0&&(l=n?e.getAdaptationForId(n,i[0].mpd.manifest,o.index):e.getAdaptationForIndex(r.index,i[0].mpd.manifest,o.index),t.getRepresentationController().updateData(l,a,s))},getInitRequest:function(t,e){var i,n=void 0,o=void 0;return S(t),(0,f.checkInteger)(e),n=t.getRepresentationController(),o=t.getIndexHandler(),i=n?n.getRepresentationForQuality(e):null,o?o.getInitRequest(i):null},getFragmentRequest:function(t,e,i,n){var o,r=void 0,a=null;return S(t),o=p(e,t.getRepresentationController()),(r=t.getIndexHandler())&&(a=void 0!==i&&void 0!==n?r.getSegmentRequestForTime(o,i,n):r.getNextSegmentRequest(o)),a},getIndexHandlerTime:function(t){S(t);var e=t.getIndexHandler();return e?e.getCurrentTime():NaN},setIndexHandlerTime:function(t,e){S(t);var i=t.getIndexHandler();i&&i.setCurrentTime(e)},getEventsFor:function(t,n){var o=[];if(0===i.length)return o;var r=i[0].mpd.manifest;return t instanceof l.default?o=e.getEventsForPeriod(m(t,i)):t instanceof s.default?o=e.getEventStreamForAdaptationSet(r,g(t)):t instanceof a.default&&(o=e.getEventStreamForRepresentation(r,p(t,n.getRepresentationController()))),o},getEvent:function(t,e,i){if(!t||!e)return null;var n=new d.default,o=t.scheme_id_uri,r=t.value,a=t.timescale,s=t.presentation_time_delta,l=t.event_duration,u=t.id,h=t.message_data,c=i*a+s;return e[o+"/"+r]?(n.eventStream=e[o+"/"+r],n.eventStream.value=r,n.eventStream.timescale=a,n.duration=l,n.id=u,n.presentationTime=c,n.messageData=h,n.presentationTimeDelta=s,n):null},setConfig:function(t){t&&t.dashManifestModel&&(e=t.dashManifestModel)},updatePeriods:function(t){if(!t)return null;T();var o=e.getMpd(t);i=e.getRegularPeriods(o),n={}},reset:x,resetIndexHandler:function(t){S(t);var e=t.getIndexHandler();e&&e.resetIndex()},setCurrentMediaInfo:function(t,e,i){h[t]=h[t]||{},h[t][e]=h[t][e]||{},h[t][e]=i}},x(),t}p.__dashjs_factory_name="DashAdapter",e.default=h.default.getSingletonFactory(p),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null}return n(t,[{key:"isMediaInfoEqual",value:function(t){if(!t)return!1;var e=this.id===t.id,i=this.viewpoint===t.viewpoint,n=this.lang===t.lang,o=this.roles.toString()===t.roles.toString(),r=this.accessibility.toString()===t.accessibility.toString(),a=this.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return e&&i&&n&&o&&r&&a}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null},t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(1)),r=n(i(13)),a=n(i(74)),s=n(i(283)),l=n(i(284)),u=n(i(285)),d=n(i(123)),h=n(i(125)),c=n(i(119)),f=n(i(286)),p=n(i(118)),g=n(i(21)),m=n(i(0)),v=n(i(3)),y=n(i(6)),_=n(i(9)),b=i(115);function E(t){t=t||{};var e=void 0,i=void 0,n=this.context,m=(0,g.default)(n).getInstance(),E=t.timelineConverter,w=t.errHandler,T=t.BASE64,S="urn:dvb:dash:profile:dvb-dash:2014",x=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function C(t,e){var i=void 0,n=void 0,a=void 0,s=void 0,l=void 0,u=void 0,d=!1,h=!1;if(!t)throw new Error("adaptation is not defined");if(!e)throw new Error("type is not defined");if(t.hasOwnProperty("ContentComponent_asArray")&&(s=t.ContentComponent_asArray),l=e!==o.default.TEXT?new RegExp(e):new RegExp("(vtt|ttml)"),t.Representation_asArray&&t.Representation_asArray.length&&t.Representation_asArray.length>0){var c=L(t.Representation_asArray[0]);if(c&&c.length>0&&b.THUMBNAILS_SCHEME_ID_URIS.indexOf(c[0].schemeIdUri)>=0)return e===o.default.IMAGE;if(t.Representation_asArray[0].hasOwnProperty(r.default.CODECS)&&(0===(u=t.Representation_asArray[0].codecs).search(o.default.STPP)||0===u.search(o.default.WVTT)))return e===o.default.FRAGMENTED_TEXT}if(s){if(s.length>1)return e===o.default.MUXED;s[0]&&s[0].contentType===e&&(d=!0,h=!0)}if(t.hasOwnProperty(r.default.MIME_TYPE)&&(d=l.test(t.mimeType),h=!0),!h)for(i=0,n=t.Representation_asArray&&t.Representation_asArray.length?t.Representation_asArray.length:0;!h&&i<n;)(a=t.Representation_asArray[i]).hasOwnProperty(r.default.MIME_TYPE)&&(d=l.test(a.mimeType),h=!0),i++;return d}function I(t){return C(t,o.default.AUDIO)}function A(t){return C(t,o.default.VIDEO)}function M(t){return C(t,o.default.FRAGMENTED_TEXT)}function O(t){return C(t,o.default.IMAGE)}function D(t){return"text/vtt"===t||"application/ttml+xml"===t}function R(){return function(t,e){return t.bandwidth-e.bandwidth}}function N(t){return t&&void 0!==t.Representation_asArray&&null!==t.Representation_asArray&&t.Representation_asArray.sort(function(t,e){return t.bandwidth-e.bandwidth}),t}function k(t,e){return t&&t.Period_asArray&&x(e)&&t.Period_asArray[e]?t.Period_asArray[e].AdaptationSet_asArray:[]}function P(t){var e=!1;return t&&t.hasOwnProperty("type")&&(e=t.type===r.default.DYNAMIC),e}function L(t){return t&&t.EssentialProperty_asArray&&t.EssentialProperty_asArray.length?t.EssentialProperty_asArray.map(function(t){return{schemeIdUri:t.schemeIdUri,value:t.value}}):null}function F(t){if(t&&t.period&&x(t.period.index)){var e=t.period.mpd.manifest.Period_asArray[t.period.index];if(e&&e.AdaptationSet_asArray&&x(t.index))return N(e.AdaptationSet_asArray[t.index])}}function B(t){var e=t.S_asArray[t.S_asArray.length-1];return!e.hasOwnProperty("r")||e.r>=0}function U(t,e){if(!t)throw new Error("Period cannot be null or undefined");var i=l.default.DEFAULT_ID+"_"+e;return t.hasOwnProperty(r.default.ID)&&t.id.length>0&&"__proto__"!==t.id&&(i=t.id),i}function j(t,e){var i=[],n=void 0;if(!t)return i;for(n=0;n<t.length;n++){var a=new f.default;if(a.timescale=1,a.representation=e,!t[n].hasOwnProperty(o.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");a.schemeIdUri=t[n].schemeIdUri,t[n].hasOwnProperty(r.default.TIMESCALE)&&(a.timescale=t[n].timescale),t[n].hasOwnProperty(r.default.VALUE)&&(a.value=t[n].value),i.push(a)}return i}function H(t){var e=[],i=t.BaseURL_asArray||[t.baseUri],n=!1;return i.some(function(i){if(i){var o=new c.default,a=i.__text||i;return m.isRelative(a)&&(n=!0,t.baseUri&&(a=m.resolve(a,t.baseUri))),o.url=a,i.hasOwnProperty(r.default.SERVICE_LOCATION)&&i.serviceLocation.length?o.serviceLocation=i.serviceLocation:o.serviceLocation=a,i.hasOwnProperty(r.default.DVB_PRIORITY)&&(o.dvb_priority=i[r.default.DVB_PRIORITY]),i.hasOwnProperty(r.default.DVB_WEIGHT)&&(o.dvb_weight=i[r.default.DVB_WEIGHT]),i.hasOwnProperty(r.default.AVAILABILITY_TIME_OFFSET)&&(o.availabilityTimeOffset=i[r.default.AVAILABILITY_TIME_OFFSET]),i.hasOwnProperty(r.default.AVAILABILITY_TIME_COMPLETE)&&(o.availabilityTimeComplete="false"!==i[r.default.AVAILABILITY_TIME_COMPLETE]),e.push(o),n}}),e}return e={getIsTypeOf:C,getIsTextTrack:D,getLanguageForAdaptation:function(t){var e="";return t&&t.hasOwnProperty(r.default.LANG)&&(e=t.lang.replace(/[^A-Za-z0-9-]/g,"")),e},getViewpointForAdaptation:function(t){return t&&t.hasOwnProperty(r.default.VIEWPOINT)?t.Viewpoint:null},getRolesForAdaptation:function(t){return t&&t.hasOwnProperty(r.default.ROLE_ASARRAY)?t.Role_asArray:[]},getAccessibilityForAdaptation:function(t){return t&&t.hasOwnProperty(r.default.ACCESSIBILITY_ASARRAY)?t.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(t){return t&&t.hasOwnProperty(r.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?t.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(t,e,i){var n=k(e,i);return n.length>0&&x(t)?n[t]:null},getIndexForAdaptation:function(t,e,i){var o=k(e,i),r=o.length;if(t)for(var a=0;a<r;a++){if((0,p.default)(n).getInstance().areEqual(o[a],t))return a}return-1},getAdaptationForId:function(t,e,i){var n,o=k(e,i),a=void 0;for(a=0,n=o.length;a<n;a++)if(o[a].hasOwnProperty(r.default.ID)&&o[a].id===t)return o[a];return null},getAdaptationsForType:function(t,e,i){var n,o=k(t,e),r=void 0,a=[];for(r=0,n=o.length;r<n;r++)C(o[r],i)&&a.push(N(o[r]));return a},getCodec:function(t,e,i){var n=null;if(t&&t.Representation_asArray&&t.Representation_asArray.length>0){var o=x(e)&&e>=0&&e<t.Representation_asArray.length?t.Representation_asArray[e]:t.Representation_asArray[0];o&&(n=o.mimeType+';codecs="'+o.codecs+'"',i&&void 0!==o.width&&(n+=';width="'+o.width+'";height="'+o.height+'"'))}return n},getMimeType:function(t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0?t.Representation_asArray[0].mimeType:null},getKID:function(t){return t&&t.hasOwnProperty(r.default.CENC_DEFAULT_KID)?t[r.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(t){if(!t.Label_asArray||!t.Label_asArray.length)return[];for(var e=[],i=0;i<t.Label_asArray.length;i++)e.push({lang:t.Label_asArray[i].lang,text:t.Label_asArray[i].__text||t.Label_asArray[i]});return e},getContentProtectionData:function(t){return t&&t.hasOwnProperty(r.default.CONTENTPROTECTION_ASARRAY)&&0!==t.ContentProtection_asArray.length?t.ContentProtection_asArray:null},getIsDynamic:P,getIsDVB:function(t){return function(t,e){var i=!1;return t&&t.profiles&&t.profiles.length>0&&(i=-1!==t.profiles.indexOf(e)),i}(t,S)},getDuration:function(t){return t&&t.hasOwnProperty(r.default.MEDIA_PRESENTATION_DURATION)?t.mediaPresentationDuration:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(t){return t&&t.bandwidth?t.bandwidth:NaN},getManifestUpdatePeriod:function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=NaN;return t&&t.hasOwnProperty(r.default.MINIMUM_UPDATE_PERIOD)&&(i=t.minimumUpdatePeriod),isNaN(i)?i:Math.max(i-e,1)},getRepresentationCount:function(t){return t&&t.Representation_asArray&&t.Representation_asArray.length?t.Representation_asArray.length:0},getBitrateListForAdaptation:function(t){return t&&t.Representation_asArray&&t.Representation_asArray.length?N(t).Representation_asArray.map(function(t){return{bandwidth:t.bandwidth,width:t.width||0,height:t.height||0,scanType:t.scanType||null}}):null},getRepresentationFor:function(t,e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0&&x(t)?e.Representation_asArray[t]:null},getRepresentationsForAdaptation:function(t){var e=[],i=F(t),n=void 0,o=void 0;if(t&&t.period&&x(t.period.index)){var s=H(t.period.mpd.manifest);s&&(o=s[0])}if(i&&i.Representation_asArray)for(var l=0,u=i.Representation_asArray.length;l<u;++l){var d=i.Representation_asArray[l],h=new a.default;if(h.index=l,h.adaptation=t,d.hasOwnProperty(r.default.ID)&&(h.id=d.id),d.hasOwnProperty(r.default.CODECS)&&(h.codecs=d.codecs),d.hasOwnProperty(r.default.CODEC_PRIVATE_DATA)&&(h.codecPrivateData=d.codecPrivateData),d.hasOwnProperty(r.default.BANDWITH)&&(h.bandwidth=d.bandwidth),d.hasOwnProperty(r.default.WIDTH)&&(h.width=d.width),d.hasOwnProperty(r.default.HEIGHT)&&(h.height=d.height),d.hasOwnProperty(r.default.SCAN_TYPE)&&(h.scanType=d.scanType),d.hasOwnProperty(r.default.MAX_PLAYOUT_RATE)&&(h.maxPlayoutRate=d.maxPlayoutRate),d.hasOwnProperty(r.default.SEGMENT_BASE)?(n=d.SegmentBase,h.segmentInfoType=r.default.SEGMENT_BASE):d.hasOwnProperty(r.default.SEGMENT_LIST)?(n=d.SegmentList).hasOwnProperty(r.default.SEGMENT_TIMELINE)?(h.segmentInfoType=r.default.SEGMENT_TIMELINE,h.useCalculatedLiveEdgeTime=B(n.SegmentTimeline)):(h.segmentInfoType=r.default.SEGMENT_LIST,h.useCalculatedLiveEdgeTime=!0):d.hasOwnProperty(r.default.SEGMENT_TEMPLATE)?((n=d.SegmentTemplate).hasOwnProperty(r.default.SEGMENT_TIMELINE)?(h.segmentInfoType=r.default.SEGMENT_TIMELINE,h.useCalculatedLiveEdgeTime=B(n.SegmentTimeline)):h.segmentInfoType=r.default.SEGMENT_TEMPLATE,n.hasOwnProperty(r.default.INITIALIZATION_MINUS)&&(h.initialization=n.initialization.split("$Bandwidth$").join(d.bandwidth).split("$RepresentationID$").join(d.id))):h.segmentInfoType=r.default.BASE_URL,h.essentialProperties=L(d),n){if(n.hasOwnProperty(r.default.INITIALIZATION)){var c=n.Initialization;c.hasOwnProperty(r.default.SOURCE_URL)?h.initialization=c.sourceURL:c.hasOwnProperty(r.default.RANGE)&&(h.range=c.range)}else d.hasOwnProperty(r.default.MIME_TYPE)&&D(d.mimeType)&&(h.range=0);n.hasOwnProperty(r.default.TIMESCALE)&&(h.timescale=n.timescale),n.hasOwnProperty(r.default.DURATION)&&(h.segmentDuration=n.duration/h.timescale),n.hasOwnProperty(r.default.MEDIA)&&(h.media=n.media),n.hasOwnProperty(r.default.START_NUMBER)&&(h.startNumber=n.startNumber),n.hasOwnProperty(r.default.INDEX_RANGE)&&(h.indexRange=n.indexRange),n.hasOwnProperty(r.default.PRESENTATION_TIME_OFFSET)&&(h.presentationTimeOffset=n.presentationTimeOffset/h.timescale),n.hasOwnProperty(r.default.AVAILABILITY_TIME_OFFSET)?h.availabilityTimeOffset=n.availabilityTimeOffset:o&&void 0!==o.availabilityTimeOffset&&(h.availabilityTimeOffset=o.availabilityTimeOffset),n.hasOwnProperty(r.default.AVAILABILITY_TIME_COMPLETE)?h.availabilityTimeComplete="false"!==n.availabilityTimeComplete:o&&void 0!==o.availabilityTimeComplete&&(h.availabilityTimeComplete=o.availabilityTimeComplete)}h.MSETimeOffset=E.calcMSETimeOffset(h),h.path=[t.period.index,t.index,l],e.push(h)}return e},getAdaptationsForPeriod:function(t){var e=t&&x(t.index)?t.mpd.manifest.Period_asArray[t.index]:null,i=[],n=void 0,a=void 0,l=void 0;if(e&&e.AdaptationSet_asArray)for(l=0;l<e.AdaptationSet_asArray.length;l++)a=e.AdaptationSet_asArray[l],n=new s.default,a.hasOwnProperty(r.default.ID)&&(n.id=a.id),n.index=l,n.period=t,C(a,o.default.MUXED)?n.type=o.default.MUXED:I(a)?n.type=o.default.AUDIO:A(a)?n.type=o.default.VIDEO:M(a)?n.type=o.default.FRAGMENTED_TEXT:O(a)?n.type=o.default.IMAGE:n.type=o.default.TEXT,i.push(n);return i},getRegularPeriods:function(t){var e,n=!!t&&P(t.manifest),o=[],a=null,s=null,u=null,d=null,h=void 0;for(h=0,e=t&&t.manifest&&t.manifest.Period_asArray?t.manifest.Period_asArray.length:0;h<e;h++)(s=t.manifest.Period_asArray[h]).hasOwnProperty(r.default.START)?(d=new l.default).start=s.start:null!==a&&a.hasOwnProperty(r.default.DURATION)&&null!==u?(d=new l.default).start=parseFloat((u.start+u.duration).toFixed(5)):0!==h||n||((d=new l.default).start=0),null!==u&&isNaN(u.duration)&&(null!==d?u.duration=parseFloat((d.start-u.start).toFixed(5)):i.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==d&&(d.id=U(s,h),d.index=h,d.mpd=t,s.hasOwnProperty(r.default.DURATION)&&(d.duration=s.duration),o.push(d),a=s,u=d),s=null,d=null;return 0===o.length?o:(null!==u&&isNaN(u.duration)&&(u.duration=parseFloat((function(t){var e=P(t.mpd.manifest),i=void 0;t.mpd.manifest.mediaPresentationDuration?i=t.mpd.manifest.mediaPresentationDuration:t.duration?i=t.duration:e?i=Number.POSITIVE_INFINITY:w.error(new y.default(_.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",t));return i}(u)-u.start).toFixed(5))),o)},getMpd:function(t){var e=new u.default;return t&&(e.manifest=t,t.hasOwnProperty(r.default.AVAILABILITY_START_TIME)?e.availabilityStartTime=new Date(t.availabilityStartTime.getTime()):e.availabilityStartTime=new Date(t.loadedTime.getTime()),t.hasOwnProperty(r.default.AVAILABILITY_END_TIME)&&(e.availabilityEndTime=new Date(t.availabilityEndTime.getTime())),t.hasOwnProperty(r.default.MINIMUM_UPDATE_PERIOD)&&(e.minimumUpdatePeriod=t.minimumUpdatePeriod),t.hasOwnProperty(r.default.MEDIA_PRESENTATION_DURATION)&&(e.mediaPresentationDuration=t.mediaPresentationDuration),t.hasOwnProperty(o.default.SUGGESTED_PRESENTATION_DELAY)&&(e.suggestedPresentationDelay=t.suggestedPresentationDelay),t.hasOwnProperty(r.default.TIMESHIFT_BUFFER_DEPTH)&&(e.timeShiftBufferDepth=t.timeShiftBufferDepth),t.hasOwnProperty(r.default.MAX_SEGMENT_DURATION)&&(e.maxSegmentDuration=t.maxSegmentDuration)),e},getEventsForPeriod:function(t){var e=t&&t.mpd&&t.mpd.manifest?t.mpd.manifest:null,i=e?e.Period_asArray:null,n=i&&t&&x(t.index)?i[t.index].EventStream_asArray:null,a=[],s=void 0,l=void 0;if(n)for(s=0;s<n.length;s++){var u=new f.default;if(u.period=t,u.timescale=1,!n[s].hasOwnProperty(o.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(u.schemeIdUri=n[s].schemeIdUri,n[s].hasOwnProperty(r.default.TIMESCALE)&&(u.timescale=n[s].timescale),n[s].hasOwnProperty(r.default.VALUE)&&(u.value=n[s].value),l=0;n[s].Event_asArray&&l<n[s].Event_asArray.length;l++){var d=new h.default;d.presentationTime=0,d.eventStream=u,n[s].Event_asArray[l].hasOwnProperty(r.default.PRESENTATION_TIME)&&(d.presentationTime=n[s].Event_asArray[l].presentationTime),n[s].Event_asArray[l].hasOwnProperty(r.default.DURATION)&&(d.duration=n[s].Event_asArray[l].duration),n[s].Event_asArray[l].hasOwnProperty(r.default.ID)&&(d.id=n[s].Event_asArray[l].id),n[s].Event_asArray[l].Signal&&n[s].Event_asArray[l].Signal.Binary?d.messageData=T.decodeArray(n[s].Event_asArray[l].Signal.Binary):d.messageData=n[s].Event_asArray[l].messageData||n[s].Event_asArray[l].__text,a.push(d)}}return a},getEventStreamForAdaptationSet:function(t,e){var i=void 0,n=void 0,o=void 0;return t&&t.Period_asArray&&e&&e.period&&x(e.period.index)&&(n=t.Period_asArray[e.period.index])&&n.AdaptationSet_asArray&&x(e.index)&&(o=n.AdaptationSet_asArray[e.index])&&(i=o.InbandEventStream_asArray),j(i,null)},getEventStreamForRepresentation:function(t,e){var i=void 0,n=void 0,o=void 0,r=void 0;return t&&t.Period_asArray&&e&&e.adaptation&&e.adaptation.period&&x(e.adaptation.period.index)&&(n=t.Period_asArray[e.adaptation.period.index])&&n.AdaptationSet_asArray&&x(e.adaptation.index)&&(o=n.AdaptationSet_asArray[e.adaptation.index])&&o.Representation_asArray&&x(e.index)&&(r=o.Representation_asArray[e.index])&&(i=r.InbandEventStream_asArray),j(i,e)},getUTCTimingSources:function(t){var e=P(t),i=!!t&&t.hasOwnProperty(r.default.AVAILABILITY_START_TIME),n=t?t.UTCTiming_asArray:null,a=[];return(e||i)&&n&&n.forEach(function(t){var e=new d.default;t.hasOwnProperty(o.default.SCHEME_ID_URI)&&(e.schemeIdUri=t.schemeIdUri,t.hasOwnProperty(r.default.VALUE)&&(e.value=t.value.toString(),a.push(e)))}),a},getBaseURLsFromElement:H,getRepresentationSortFunction:R,getLocation:function(t){if(t&&t.hasOwnProperty(o.default.LOCATION))return t.Location=t.Location_asArray[0],t.Location},getUseCalculatedLiveEdgeTimeForAdaptation:function(t){var e=F(t).Representation_asArray[0],i=void 0;return e.hasOwnProperty(r.default.SEGMENT_LIST)?!(i=e.SegmentList).hasOwnProperty(r.default.SEGMENT_TIMELINE)||B(i.SegmentTimeline):!(!e.hasOwnProperty(r.default.SEGMENT_TEMPLATE)||!(i=e.SegmentTemplate).hasOwnProperty(r.default.SEGMENT_TIMELINE))&&B(i.SegmentTimeline)}},i=(0,v.default)(n).getInstance().getLogger(e),e}E.__dashjs_factory_name="DashManifestModel",e.default=m.default.getSingletonFactory(E),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.period=null,this.index=-1,this.type=null},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};n.DEFAULT_ID="defaultId",e.default=n,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""},t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(10),r=n(i(0)),a=n(i(34)),s=n(i(288));function l(t){var e=(t=t||{}).dashManifestModel,i=t.manifestModel;function n(t){var e=i.getValue();return e?e.Period_asArray[t]:-1}function r(t){return d(t,a.default.BUFFER_LEVEL)}function l(t){if(!t)return null;var e=t.HttpList,i=null,n=void 0;if(!e||e.length<=0)return null;for(n=e.length-1;n>=0;){if(e[n].responsecode){i=e[n];break}n--}return i}function u(t){return t&&t.HttpList?t.HttpList:[]}function d(t,e){if(!t)return null;var i=t[e];return!i||i.length<=0?null:i[i.length-1]}function h(t){var e={};if(!t)return e;for(var i=t.trim().split("\r\n"),n=0,o=i.length;n<o;n++){var r=i[n],a=r.indexOf(": ");a>0&&(e[r.substring(0,a)]=r.substring(a+2))}return e}function c(t,e,i){var n=void 0,o=void 0,r=void 0,a=void 0,s=void 0;if(t)for(n=t.AdaptationSet_asArray,a=0;a<n.length;a+=1)for(r=n[a].Representation_asArray,s=0;s<r.length;s+=1)if(e===(o=r[s]).id)return i?s:o;return null}function f(t,i){return e.getIsTypeOf(t,i)}return{getBandwidthForRepresentation:function(t,e){var i;return null===(i=c(n(e),t))?null:i.bandwidth},getIndexForRepresentation:function(t,e){return function(t,e){var i=c(t,e,!0);if(null!==i)return i;return-1}(n(e),t)},getMaxIndexForBufferType:function(t,e){return function(t,e){var i,n=void 0,o=void 0,r=void 0;if(!t||!e)return-1;for(i=t.AdaptationSet_asArray,r=0;r<i.length;r+=1)if(n=i[r],o=n.Representation_asArray,f(n,e))return o.length;return-1}(n(e),t)},getCurrentRepresentationSwitch:function(t){return d(t,a.default.TRACK_SWITCH)},getLatestBufferLevelVO:r,getCurrentBufferLevel:function(t){var e=r(t);return e?s.default.round10(e.level/1e3,-3):0},getCurrentHttpRequest:l,getHttpRequests:u,getCurrentDroppedFrames:function(t){return d(t,a.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(t){return d(t,a.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(t){return d(t,a.default.DVR_INFO)},getCurrentManifestUpdate:function(t){return d(t,a.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(t,e){var i={},n=l(t);return n&&(i=h(n._responseHeaders)),void 0===i[e]?null:i[e]},getLatestMPDRequestHeaderValueByID:function(t,e){var i,n={},r=void 0,a=void 0;for(a=(i=u(t)).length-1;a>=0;a--)if((r=i[a]).type===o.HTTPRequest.MPD_TYPE){n=h(r._responseHeaders);break}return void 0===n[e]?null:n[e]},getRequestsQueue:function(t){return t?t.RequestsQueue:null}}}l.__dashjs_factory_name="DashMetrics",e.default=r.default.getSingletonFactory(l),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,null,[{key:"round10",value:function(t,e){return function(t,e,i){if(void 0===i||0==+i)return Math[t](e);if(i=+i,null===(e=+e)||isNaN(e)||!("number"==typeof i&&i%1==0))return NaN;return e=e.toString().split("e"),+((e=(e=Math[t](+(e[0]+"e"+(e[1]?+e[1]-i:-i)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+i:i))}("round",t,e)}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(2)),r=n(i(4)),a=n(i(0));function s(){var t=this.context,e=(0,o.default)(t).getInstance(),i=void 0,n=void 0,a=void 0;function s(t){i=t}function l(t,e,n,o){return o?n&&e.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(e.availabilityStartTime.getTime()+1e3*(t+e.timeShiftBufferDepth)):e.availabilityEndTime:n?new Date(e.availabilityStartTime.getTime()+1e3*(t-i)):e.availabilityStartTime}function u(t,e){return(t.getTime()-e.mpd.availabilityStartTime.getTime()+1e3*i)/1e3}function d(t){n||void 0!==t.offset&&(s(t.offset/1e3),n=!0)}function h(){i=0,n=!1,a=NaN}return{initialize:function(){h(),e.on(r.default.TIME_SYNCHRONIZATION_COMPLETED,d,this)},isTimeSyncCompleted:function(){return n},setTimeSyncCompleted:function(t){n=t},getClientTimeOffset:function(){return i},setClientTimeOffset:s,getExpectedLiveEdge:function(){return a},setExpectedLiveEdge:function(t){a=t},calcAvailabilityStartTimeFromPresentationTime:function(t,e,i){return l.call(this,t,e,i)},calcAvailabilityEndTimeFromPresentationTime:function(t,e,i){return l.call(this,t,e,i,!0)},calcPresentationTimeFromWallTime:u,calcPresentationTimeFromMediaTime:function(t,e){return t+(e.adaptation.period.start-e.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(t,e){return e-t.adaptation.period.start},calcMediaTimeFromPresentationTime:function(t,e){return t-e.adaptation.period.start+e.presentationTimeOffset},calcSegmentAvailabilityRange:function(t,e){var i=t.adaptation.period,o={start:i.start,end:i.start+i.duration};if(!e)return o;if(!n&&t.segmentAvailabilityRange)return t.segmentAvailabilityRange;var r=t.segmentDuration||(t.segments&&t.segments.length?t.segments[t.segments.length-1].duration:0),a=u(new Date,i),s=i.start+i.duration;o.start=Math.max(a-i.mpd.timeShiftBufferDepth,i.start);var l=void 0!==t.availabilityTimeOffset&&t.availabilityTimeOffset<r?r-t.availabilityTimeOffset:r;return o.end=a>=s&&a-l<s?s:a-l,o},calcWallTimeForSegment:function(t,e){var i=void 0,n=void 0,o=void 0;return e&&(i=t.representation.adaptation.period.mpd.suggestedPresentationDelay,n=t.presentationStartTime+i,o=new Date(t.availabilityStartTime.getTime()+1e3*n)),o},calcMSETimeOffset:function(t){var e=t.presentationTimeOffset;return t.adaptation.period.start-e},reset:function(){e.off(r.default.TIME_SYNCHRONIZATION_COMPLETED,d,this),h()}}}s.__dashjs_factory_name="TimelineConverter",e.default=a.default.getSingletonFactory(s),t.exports=e.default},function(t,e,i){"use strict";var n,o,r,l,u,d={encode:function(t){for(var e=[],i=0;i<t.length;++i){var n=t.charCodeAt(i);n<128?e.push(n):n<2048?(e.push(192|n>>6),e.push(128|63&n)):n<65536?(e.push(224|n>>12),e.push(128|63&n>>6),e.push(128|63&n)):(e.push(240|n>>18),e.push(128|63&n>>12),e.push(128|63&n>>6),e.push(128|63&n))}return e},decode:function(t){for(var e=[],i=0;i<t.length;){var n=t[i++];n<128||(n<224?(n=(31&n)<<6,n|=63&t[i++]):n<240?(n=(15&n)<<12,n|=(63&t[i++])<<6,n|=63&t[i++]):(n=(7&n)<<18,n|=(63&t[i++])<<12,n|=(63&t[i++])<<6,n|=63&t[i++])),e.push(String.fromCharCode(n))}return e.join("")}},h={};n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(t){for(var e=0,i=[],o=0|t.length/3;0<o--;){var r=(t[e]<<16)+(t[e+1]<<8)+t[e+2];e+=3,i.push(n.charAt(63&r>>18)),i.push(n.charAt(63&r>>12)),i.push(n.charAt(63&r>>6)),i.push(n.charAt(63&r))}return 2==t.length-e?(r=(t[e]<<16)+(t[e+1]<<8),i.push(n.charAt(63&r>>18)),i.push(n.charAt(63&r>>12)),i.push(n.charAt(63&r>>6)),i.push("=")):1==t.length-e&&(r=t[e]<<16,i.push(n.charAt(63&r>>18)),i.push(n.charAt(63&r>>12)),i.push("==")),i.join("")},r=function(){for(var t=[],e=0;e<n.length;++e)t[n.charCodeAt(e)]=e;return t["=".charCodeAt(0)]=0,t}(),l=function(t){for(var e=0,i=[],n=0|t.length/4;0<n--;){var o=(r[t.charCodeAt(e)]<<18)+(r[t.charCodeAt(e+1)]<<12)+(r[t.charCodeAt(e+2)]<<6)+r[t.charCodeAt(e+3)];i.push(255&o>>16),i.push(255&o>>8),i.push(255&o),e+=4}return i&&("="==t.charAt(e-2)?(i.pop(),i.pop()):"="==t.charAt(e-1)&&i.pop()),i},u={encode:function(t){for(var e=[],i=0;i<t.length;++i)e.push(t.charCodeAt(i));return e},decode:function(t){for(var e=0;e<s.length;++e)a[e]=String.fromCharCode(a[e]);return a.join("")}},h.decodeArray=function(t){var e=l(t);return new Uint8Array(e)},h.encodeASCII=function(t){var e=u.encode(t);return o(e)},h.decodeASCII=function(t){var e=l(t);return u.decode(e)},h.encode=function(t){var e=d.encode(t);return o(e)},h.decode=function(t){var e=l(t);return d.decode(e)},e.decode=h.decode,e.decodeArray=h.decodeArray,e.encode=h.encode,e.encodeASCII=h.encodeASCII},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(292)),r=n(i(56)),a=n(i(294)),s=n(i(127)),l=n(i(126));function u(){var t=this.context;return{createMetricsReporting:function(e){return(0,o.default)(t).getInstance({eventBus:e.eventBus,metricsModel:e.metricsModel,metricsConstants:e.metricsConstants,events:e.events}),(0,a.default)(t).create(e)},getReportingFactory:function(){return(0,l.default)(t).getInstance()},getMetricsHandlerFactory:function(){return(0,s.default)(t).getInstance()}}}u.__dashjs_factory_name="MetricsReporting";var d=dashjs.FactoryMaker.getClassFactory(u);d.events=r.default,dashjs.FactoryMaker.updateClassFactory(u.__dashjs_factory_name,d),e.default=d,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(293)),r=n(i(56));function a(t){var e=void 0,i=void 0,n=(t=t||{}).eventBus,a=t.metricsModel,s=t.metricsConstants,l=t.events;function u(t){var e=new o.default;if(i){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.mpdurl||(e.mpdurl=i.originalUrl||i.url),e.terror||(e.terror=new Date),a.addDVBErrors(e)}}function d(t){t.error||(i=t.manifest)}function h(t){u({errorcode:o.default.BASE_URL_CHANGED,servicelocation:t.entry})}function c(){u({errorcode:o.default.BECAME_REPORTER})}function f(t){switch(t.metric){case s.HTTP_REQUEST:(0===(e=t.value).responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&u({errorcode:e.responsecode||o.default.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}var e}function p(t){var e=void 0;switch(t.error?t.error.code:0){case MediaError.MEDIA_ERR_NETWORK:e=o.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:e=o.default.CORRUPT_MEDIA_OTHER;break;default:return}u({errorcode:e})}function g(){n.on(l.MANIFEST_UPDATED,d,e),n.on(l.SERVICE_LOCATION_BLACKLIST_CHANGED,h,e),n.on(l.METRIC_ADDED,f,e),n.on(l.METRIC_UPDATED,f,e),n.on(l.PLAYBACK_ERROR,p,e),n.on(r.default.BECAME_REPORTING_PLAYER,c,e)}return e={initialise:g,reset:function(){n.off(l.MANIFEST_UPDATED,d,e),n.off(l.SERVICE_LOCATION_BLACKLIST_CHANGED,h,e),n.off(l.METRIC_ADDED,f,e),n.off(l.METRIC_UPDATED,f,e),n.off(l.PLAYBACK_ERROR,p,e),n.off(r.default.BECAME_REPORTING_PLAYER,c,e)}},g(),e}a.__dashjs_factory_name="DVBErrorsTranslator",e.default=dashjs.FactoryMaker.getSingletonFactory(a),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};n.SSL_CONNECTION_FAILED_PREFIX="SSL",n.DNS_RESOLUTION_FAILED="C00",n.HOST_UNREACHABLE="C01",n.CONNECTION_REFUSED="C02",n.CONNECTION_ERROR="C03",n.CORRUPT_MEDIA_ISOBMFF="M00",n.CORRUPT_MEDIA_OTHER="M01",n.BASE_URL_CHANGED="F00",n.BECAME_REPORTER="S00",e.default=n,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(295)),r=n(i(306)),a=n(i(56));function s(t){t=t||{};var e={},i=this.context,n=t.eventBus,s=t.events;function l(s){if(!s.error){var l=Object.keys(e);(0,r.default)(i).getInstance({dashManifestModel:t.dashManifestModel,constants:t.constants}).getMetrics(s.manifest).forEach(function(n){var r=JSON.stringify(n);if(e.hasOwnProperty(r))l.splice(r,1);else try{var a=(0,o.default)(i).create(t);a.initialize(n),e[r]=a}catch(t){}}),l.forEach(function(t){e[t].reset(),delete e[t]}),n.trigger(a.default.METRICS_INITIALISATION_COMPLETE)}}function u(){Object.keys(e).forEach(function(t){e[t].reset()}),e={}}return n.on(s.MANIFEST_UPDATED,l),n.on(s.STREAM_TEARDOWN_COMPLETE,u),{reset:function(){n.off(s.MANIFEST_UPDATED,l),n.off(s.STREAM_TEARDOWN_COMPLETE,u)}}}s.__dashjs_factory_name="MetricsCollectionController",e.default=dashjs.FactoryMaker.getClassFactory(s),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(296)),r=n(i(297)),a=n(i(301));function s(t){t=t||{};var e=void 0,i=void 0,n=void 0,s=this.context;function l(){e&&e.reset(),i&&i.reset(),n&&n.reset()}return{initialize:function(u){try{(n=(0,o.default)(s).create({mediaElement:t.mediaElement})).initialize(u.Range),(i=(0,r.default)(s).create({debug:t.debug,metricsConstants:t.metricsConstants})).initialize(u.Reporting,n),(e=(0,a.default)(s).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(u.metrics,i)}catch(t){throw l(),t}},reset:l}}s.__dashjs_factory_name="MetricsController",e.default=dashjs.FactoryMaker.getClassFactory(s),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(107),r=(n=o)&&n.__esModule?n:{default:n};function a(t){t=t||{};var e,i=!1,n=this.context,o=void 0,a=t.mediaElement;return e={initialize:function(t){t&&t.length&&(t.forEach(function(t){var e=t.starttime,i=e+t.duration;o.add(e,i)}),i=!!t[0]._useWallClockTime)},reset:function(){o.clear()},isEnabled:function(){var t,e=o.length;if(!e)return!0;t=i?(new Date).getTime()/1e3:a.currentTime;for(var n=0;n<e;n+=1){var r=o.start(n),s=o.end(n);if(r<=t&&t<s)return!0}return!1}},o=(0,r.default)(n).create(),e}a.__dashjs_factory_name="RangeController",e.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(126),r=(n=o)&&n.__esModule?n:{default:n};function a(t){var e=[],i=(0,r.default)(this.context).getInstance(t);return{initialize:function(t,n){t.some(function(t){var o=i.create(t,n);if(o)return e.push(o),!0})},reset:function(){e.forEach(function(t){return t.reset()}),e=[]},report:function(t,i){e.forEach(function(e){return e.report(t,i)})}}}a.__dashjs_factory_name="ReportingController",e.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(299)),r=n(i(300));function a(t){t=t||{};var e,i=this.context,n=void 0,a=void 0,s=void 0,l=void 0,u=void 0,d=void 0,h=!0,c=!0,f=[],p=t.metricsConstants;function g(){s=!1,l=!1,u=null,d=null}return e={report:function(t,e){Array.isArray(e)||(e=[e]),l&&d.isEnabled()&&e.forEach(function(e){var i=n.serialise(e);h&&t!==p.DVB_ERRORS&&(i="metricname="+t+"&"+i),function(t,e,i){var n=new XMLHttpRequest,o=function(){var t=f.indexOf(n);-1!==t&&(f.splice(t,1),n.status>=200&&n.status<300?e&&e():i&&i())};f.push(n);try{n.open("GET",t),n.onloadend=o,n.onerror=o,n.send()}catch(t){n.onerror()}}(i=u+"?"+i,null,function(){l=!1})})},initialize:function(t,e){var i=void 0;if(d=e,!(u=t["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");s||((i=t["dvb:probability"]||t["dvb:priority"]||0)&&(1e3===i||i/1e3>=a.random())&&(l=!0),s=!0)},reset:function(){c||(f.forEach(function(t){return t.abort()}),f=[]),g()}},n=(0,o.default)(i).getInstance(),a=(0,r.default)(i).getInstance(),g(),e}a.__dashjs_factory_name="DVBReporting",e.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(){return{serialise:function t(e){var i=[],n=[],o=void 0,r=void 0;for(o in e)if(e.hasOwnProperty(o)&&0!==o.indexOf("_")){if(null==(r=e[o])&&(r=""),Array.isArray(r)){if(!r.length)continue;n=[],r.forEach(function(e){var i="Object"!==Object.prototype.toString.call(e).slice(8,-1);n.push(i?e:t(e))}),r=n.map(encodeURIComponent).join(",")}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));i.push(o+"="+r)}return i.join("&")}}}Object.defineProperty(e,"__esModule",{value:!0}),n.__dashjs_factory_name="MetricSerialiser",e.default=dashjs.FactoryMaker.getSingletonFactory(n),t.exports=e.default},function(t,e,i){"use strict";function n(){var t,e=window.crypto||window.msCrypto,i=Uint32Array,n=Math.pow(2,8*i.BYTES_PER_ELEMENT)-1,o=10,r=void 0,a=void 0;function s(){e&&(r||(r=new i(o)),e.getRandomValues(r),a=0)}return t={random:function(t,i){var o=void 0;return t||(t=0),i||(i=1),e?(a===r.length&&s(),o=r[a]/n,a+=1):o=Math.random(),o*(i-t)+t}},s(),t}Object.defineProperty(e,"__esModule",{value:!0}),n.__dashjs_factory_name="RNG",e.default=dashjs.FactoryMaker.getSingletonFactory(n),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(127),r=(n=o)&&n.__esModule?n:{default:n};function a(t){t=t||{};var e=[],i=void 0,n=this.context,o=t.eventBus,a=t.events,s=(0,r.default)(n).getInstance({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants});function l(t){e.forEach(function(e){e.handleNewMetric(t.metric,t.value,t.mediaType)})}return i={initialize:function(t,n){t.split(",").forEach(function(t,i,o){var r;if(-1!==t.indexOf("(")&&-1===t.indexOf(")")){var a=o[i+1];a&&-1===a.indexOf("(")&&-1!==a.indexOf(")")&&(t+=","+a,delete o[i+1])}(r=s.create(t,n))&&e.push(r)}),o.on(a.METRIC_ADDED,l,i),o.on(a.METRIC_UPDATED,l,i)},reset:function(){o.off(a.METRIC_ADDED,l,i),o.off(a.METRIC_UPDATED,l,i),e.forEach(function(t){return t.reset()}),e=[]}}}a.__dashjs_factory_name="MetricsHandlersController",e.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(128),r=(n=o)&&n.__esModule?n:{default:n};function a(t){t=t||{};var e=void 0,i=void 0,n=void 0,o=void 0,a=void 0,s=this.context,l=(0,r.default)(s).getInstance(),u=[],d=t.metricsConstants;function h(){var t=function(){try{return Object.keys(u).map(function(t){return u[t]}).reduce(function(t,e){return t.level<e.level?t:e})}catch(t){return}}();t&&a!==t.t&&(a=t.t,e.report(n,t))}return{initialize:function(t,r,a){r&&(i=l.validateN(a),e=r,n=l.reconstructFullMetricName(t,a),o=setInterval(h,i))},reset:function(){clearInterval(o),o=null,i=0,e=null,a=null},handleNewMetric:function(t,e,i){t===d.BUFFER_LEVEL&&(u[i]=e)}}}a.__dashjs_factory_name="BufferLevelHandler",e.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(56),r=(n=o)&&n.__esModule?n:{default:n};e.default=dashjs.FactoryMaker.getClassFactory(function(t){var e=void 0,i=(t=t||{}).eventBus,n=t.metricsConstants;function o(){i.off(r.default.METRICS_INITIALISATION_COMPLETE,o,this),i.trigger(r.default.BECAME_REPORTING_PLAYER)}return{initialize:function(t,n){n&&(e=n,i.on(r.default.METRICS_INITIALISATION_COMPLETE,o,this))},reset:function(){e=null},handleNewMetric:function(t,i){t===n.DVB_ERRORS&&e&&e.report(t,i)}}}),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(128),r=(n=o)&&n.__esModule?n:{default:n};function a(t){t=t||{};var e=void 0,i=void 0,n=void 0,o=void 0,a=void 0,s=[],l=(0,r.default)(this.context).getInstance(),u=t.metricsConstants;function d(){var t=s;t.length&&e&&e.report(o,t),s=[]}return{initialize:function(t,r,s,u){r&&(i=l.validateN(s),e=r,u&&u.length&&(n=u),o=l.reconstructFullMetricName(t,s,u),a=setInterval(d,i))},reset:function(){clearInterval(a),a=null,i=null,n=null,s=[],e=null},handleNewMetric:function(t,e){t===u.HTTP_REQUEST&&(n&&n!==e.type||s.push(e))}}}a.__dashjs_factory_name="HttpListHandler",e.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(){var t=void 0,e=void 0;return{initialize:function(i,n){t=i,e=n},reset:function(){e=null,t=void 0},handleNewMetric:function(i,n){i===t&&e&&e.report(t,n)}}}Object.defineProperty(e,"__esModule",{value:!0}),n.__dashjs_factory_name="GenericMetricHandler",e.default=dashjs.FactoryMaker.getClassFactory(n),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(307)),r=n(i(308)),a=n(i(309));function s(t){var e=(t=t||{}).dashManifestModel,i=t.constants;return{getMetrics:function(t){var n=[];return t.Metrics_asArray&&t.Metrics_asArray.forEach(function(s){var l=new o.default,u=e.getIsDynamic(t);s.hasOwnProperty("metrics")&&(l.metrics=s.metrics,s.Range_asArray&&s.Range_asArray.forEach(function(n){var o=new r.default;o.starttime=function(t,n,o){var r,a,s=e.getMpd(t),l=0;return n?l=s.availabilityStartTime.getTime()/1e3:(r=this.getRegularPeriods(s)).length&&(l=r[0].start),a=l,o&&o.hasOwnProperty(i.START_TIME)&&(a+=o.starttime),a}(t,u,n),n.hasOwnProperty("duration")?o.duration=n.duration:o.duration=e.getDuration(t),o._useWallClockTime=u,l.Range.push(o)}),s.Reporting_asArray&&(s.Reporting_asArray.forEach(function(t){var e=new a.default;if(t.hasOwnProperty(i.SCHEME_ID_URI)){for(var n in e.schemeIdUri=t.schemeIdUri,t)t.hasOwnProperty(n)&&(e[n]=t[n]);l.Reporting.push(e)}}),n.push(l)))}),n}}}s.__dashjs_factory_name="ManifestParsing",e.default=dashjs.FactoryMaker.getSingletonFactory(s),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.metrics="",this.Range=[],this.Reporting=[]},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.schemeIdUri="",this.value=""},t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(311)),r=n(i(57)),a=n(i(321)),s=n(i(44)),l=n(i(322)),u=n(i(323)),d=n(i(324)),h=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],c=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function f(){var t=void 0,e=this.context;function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];if("function"==typeof t[n[Object.keys(n)[0]]])return n}return null}return t={createProtectionSystem:function(n){var a=null,s=(0,r.default)(e).getInstance();s.setConfig({debug:n.debug,BASE64:n.BASE64}),s.initialize();var f=function(n){var o=n.debug,r=o.getLogger(t),a=n.eventBus,s=n.errHandler,f=n.videoModel?n.videoModel.getElement():null;return f&&void 0===f.onencrypted||f&&void 0===f.mediaKeys?i(f,c)?(r.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,u.default)(e).create({debug:o,eventBus:a,events:n.events,api:i(f,c)})):i(f,h)?(r.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,d.default)(e).create({debug:o,eventBus:a,errHandler:s,events:n.events,api:i(f,h)})):(r.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(r.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,l.default)(e).create({debug:o,eventBus:a,events:n.events}))}(n);return!a&&f&&(a=(0,o.default)(e).create({protectionModel:f,protectionKeyController:s,eventBus:n.eventBus,debug:n.debug,events:n.events,BASE64:n.BASE64,constants:n.constants}),n.capabilities.setEncryptedMediaSupported(!0)),a}}}f.__dashjs_factory_name="Protection";var p=dashjs.FactoryMaker.getClassFactory(f);p.events=a.default,p.errors=s.default,dashjs.FactoryMaker.updateClassFactory(f.__dashjs_factory_name,p),e.default=p,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(36)),r=n(i(312)),a=n(i(76)),s=n(i(44)),l=n(i(6)),u=5,d=500,h=3,c=1e3,f=8e3;function p(t){var e=(t=t||{}).protectionKeyController,i=t.protectionModel,n=t.eventBus,p=t.events,g=t.debug,m=t.BASE64,v=t.constants,y=[],_=void 0,b=void 0,E=void 0,w=void 0,T=void 0,S=void 0,x=void 0,C=void 0;function I(t,r){var a=o.default.getPSSHForKeySystem(C,t),u=O(C);if(a){for(var d=i.getAllInitData(),h=0;h<d.length;h++)if(e.initDataEquals(a,d[h]))return void b.warn("DRM: Ignoring initData because we have already seen it!");try{i.createKeySession(a,u,R(C),r)}catch(t){n.trigger(p.KEY_SESSION_CREATED,{data:null,error:new l.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE+t.message)})}}else t?i.createKeySession(t,u,R(C),r):n.trigger(p.KEY_SESSION_CREATED,{data:null,error:new l.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+C.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function A(t,e){i.loadKeySession(t,e,R(C))}function M(t){t?(i.setMediaElement(t),n.on(p.NEED_KEY,F,this)):null===t&&(i.setMediaElement(t),n.off(p.NEED_KEY,F,this))}function O(t){var e=null;if(t){var i=t.systemString;T&&(e=i in T?T[i]:null)}return e}function D(t){var e=O(t),i=[],n=[],o=e&&e.audioRobustness&&e.audioRobustness.length>0?e.audioRobustness:x,s=e&&e.videoRobustness&&e.videoRobustness.length>0?e.videoRobustness:x,l=R(t),u=e&&e.distinctiveIdentifier?e.distinctiveIdentifier:"optional",d=e&&e.persistentState?e.persistentState:"temporary"===l?"optional":"required";return w.forEach(function(t){t.type===v.AUDIO?i.push(new r.default(t.codec,o)):t.type===v.VIDEO&&n.push(new r.default(t.codec,s))}),new a.default(i,n,u,d,[l])}function R(t){var e=O(t);return e&&e.sessionType?e.sessionType:S}function N(t,o){var r=this,a=[],u=void 0;if(C)for(u=0;u<t.length;u++){if(C===t[u].ks)if("break"===function(){a.push({ks:t[u].ks,configs:[D(C)]});return n.on(p.KEY_SYSTEM_ACCESS_COMPLETE,function e(i){n.off(p.KEY_SYSTEM_ACCESS_COMPLETE,e,r),i.error?o||n.trigger(p.KEY_SYSTEM_SELECTED,{error:new l.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+i.error)}):(b.info("DRM: KeySystem Access Granted"),n.trigger(p.KEY_SYSTEM_SELECTED,{data:i.data}),t[u].sessionId?A(t[u].sessionId,t[u].initData):t[u].initData&&I(t[u].initData,t[u].cdmData))},r),i.requestKeySystemAccess(a),"break"}())break}else if(void 0===C){var d;!function(){C=null,E.push(t);for(var h=0;h<t.length;h++)a.push({ks:t[h].ks,configs:[D(t[h].ks)]});var c=void 0,f=function t(e){n.off(p.KEY_SYSTEM_ACCESS_COMPLETE,t,r),e.error?(C=void 0,n.off(p.INTERNAL_KEY_SYSTEM_SELECTED,d,r),o||n.trigger(p.KEY_SYSTEM_SELECTED,{data:null,error:new l.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+e.error)})):(c=e.data,b.info("DRM: KeySystem Access Granted ("+c.keySystem.systemString+")!  Selecting key system..."),i.selectKeySystem(c))};d=function t(a){if(n.off(p.INTERNAL_KEY_SYSTEM_SELECTED,t,r),n.off(p.KEY_SYSTEM_ACCESS_COMPLETE,f,r),a.error)C=void 0,o||n.trigger(p.KEY_SYSTEM_SELECTED,{data:null,error:new l.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+a.error)});else{if(!i)return;C=i.getKeySystem(),n.trigger(p.KEY_SYSTEM_SELECTED,{data:c});var d=O(C);d&&d.serverCertificate&&d.serverCertificate.length>0&&i.setServerCertificate(m.decodeArray(d.serverCertificate).buffer);for(var h=0;h<E.length;h++)for(u=0;u<E[h].length;u++)if(C===E[h][u].ks){if(e.isClearKey(C)&&d&&d.hasOwnProperty("clearkeys")){var g={kids:Object.keys(d.clearkeys)};E[h][u].initData=(new TextEncoder).encode(JSON.stringify(g))}E[h][u].sessionId?A(E[h][u].sessionId,E[h][u].initData):null!==E[h][u].initData&&I(E[h][u].initData,E[h][u].cdmData);break}}},n.on(p.INTERNAL_KEY_SYSTEM_SELECTED,d,r),n.on(p.KEY_SYSTEM_ACCESS_COMPLETE,f,r),i.requestKeySystemAccess(a)}()}else E.push(t)}function k(t,e){n.trigger(p.LICENSE_REQUEST_COMPLETE,{data:t,error:e})}function P(t){t.error?n.trigger(p.KEY_STATUSES_CHANGED,{data:null,error:t.error}):b.debug("DRM: key status = "+t.status)}function L(t){b.debug("DRM: onKeyMessage");var r=t.data;n.trigger(p.KEY_MESSAGE,{data:r});var a=r.messageType?r.messageType:"license-request",u=r.message,d=r.sessionToken,g=O(C),m=C?C.systemString:null,v=e.getLicenseServer(C,g,a),y={sessionToken:d,messageType:a};if(u&&0!==u.byteLength){if(!v)return b.debug("DRM: License server request not required for this message (type = "+t.data.messageType+").  Session ID = "+d.getSessionID()),void k(y);if(e.isClearKey(C)){var _=e.processClearKeyLicenseRequest(C,g,u);if(_)return b.debug("DRM: ClearKey license request handled by application!"),k(y),void i.updateKeySession(d,_)}var E=null;if(g&&g.serverURL){var w=g.serverURL;"string"==typeof w&&""!==w?E=w:"object"==typeof w&&w.hasOwnProperty(a)&&(E=w[a])}else g&&g.laURL&&""!==g.laURL?E=g.laURL:(E=C.getLicenseServerURLFromInitData(o.default.getPSSHData(d.initData)))||(E=t.data.laURL);if(E=v.getServerURLFromMessage(E,u,a)){var T={},S=!1,x=function(t){if(t)for(var e in t)"authorization"===e.toLowerCase()&&(S=!0),T[e]=t[e]};g&&x(g.httpRequestHeaders),x(C.getRequestHeadersFromMessage(u)),g&&"boolean"==typeof g.withCredentials&&(S=g.withCredentials);var I=function(t,e,i,n){var o=t.response?v.getErrorResponse(t.response,i,n):"NONE";k(e,new l.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+i+' update, XHR complete. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState+".  Response is "+o))},A=C.getLicenseRequestFromMessage(u),M=v.getHTTPMethod(a),D=v.getResponseType(m,a),R=g&&!isNaN(g.httpTimeout)?g.httpTimeout:f;!function t(e,i,n,o,r,a,s,l,u,d,h){var f=new XMLHttpRequest;f.open(n,e,!0);f.responseType=o;f.withCredentials=r;l>0&&(f.timeout=l);for(var p in i)f.setRequestHeader(p,i[p]);var g=function(){s--,setTimeout(function(){t(e,i,n,o,r,a,s,l,u,d,h)},c)};f.onload=function(){200===this.status||s<=0?u(this):(b.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+s),g())};f.ontimeout=f.onerror=function(){s<=0?h(this):(b.warn("License request network request failed . Retrying it... Pending retries: "+s),g())};f.onabort=function(){d(this)};f.send(a)}(E,T,M,D,S,A,h,R,function(t){if(i)if(200===t.status){var e=v.getLicenseMessage(t.response,m,a);null!==e?(k(y),i.updateKeySession(d,e)):I(t,y,m,a)}else I(t,y,m,a)},function(t){k(y,new l.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+m+' update, XHR aborted. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState))},function(t){k(y,new l.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+m+' update, XHR error. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState))})}else k(y,new l.default(s.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else k(y,new l.default(s.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function F(t,n){if(b.debug("DRM: onNeedKey"),"cenc"===t.key.initDataType)if(0===w.length&&(b.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(n=void 0===n?1:n+1)<u))y.push(setTimeout(function(){F(t,n)},d));else{var r=t.key.initData;if(ArrayBuffer.isView(r)&&(r=r.buffer),C){var a=o.default.getPSSHForKeySystem(C,r);if(a)for(var s=i.getAllInitData(),l=0;l<s.length;l++)if(e.initDataEquals(a,s[l]))return void b.warn("DRM: Ignoring initData because we have already seen it!")}b.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(r)));var h=e.getSupportedKeySystems(r,T);0!==h.length?N(h,!1):b.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else b.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+t.key.initDataType)}return _={initializeForMedia:function(t){if(!t)throw new Error("mediaInfo can not be null or undefined");!function(){if(!(n&&n.hasOwnProperty("on")&&e&&e.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}(),n.on(p.INTERNAL_KEY_MESSAGE,L,this),n.on(p.INTERNAL_KEY_STATUS_CHANGED,P,this),w.push(t);var i=e.getSupportedKeySystemsFromContentProtection(t.contentProtection);i&&i.length>0&&N(i,!0)},createKeySession:I,loadKeySession:A,removeKeySession:function(t){i.removeKeySession(t)},closeKeySession:function(t){i.closeKeySession(t)},setServerCertificate:function(t){i.setServerCertificate(t)},setMediaElement:M,setSessionType:function(t){S=t},setRobustnessLevel:function(t){x=t},setProtectionData:function(t){T=t,e.setProtectionData(t)},getSupportedKeySystemsFromContentProtection:function(t){return e.getSupportedKeySystemsFromContentProtection(t)},getKeySystems:function(){return e?e.getKeySystems():[]},stop:function(){i&&i.stop()},reset:function(){n.off(p.INTERNAL_KEY_MESSAGE,L,this),n.off(p.INTERNAL_KEY_STATUS_CHANGED,P,this),M(null),C=void 0,i&&(i.reset(),i=null),y.forEach(function(t){return clearTimeout(t)}),y=[],w=[]}},b=g.getLogger(_),E=[],w=[],S="temporary",x="",_}p.__dashjs_factory_name="ProtectionController",e.default=dashjs.FactoryMaker.getClassFactory(p),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.contentType=e,this.robustness=i},t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(77)),r=n(i(78)),a=n(i(36)),s=n(i(28)),l="e2719d58-a985-b3c9-781a-b030af78d30e",u=s.default.CLEARKEY_KEYSTEM_STRING,d="urn:uuid:"+l;function h(t){var e=(t=t||{}).BASE64;return{uuid:l,schemeIdURI:d,systemString:u,getInitData:function(t){return a.default.parseInitDataFromContentProtection(t,e)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(t){return new Uint8Array(t)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(t,e){var i=null;if(t){for(var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))),a=[],s=0;s<n.kids.length;s++){var l=n.kids[s],u=t.clearkeys&&t.clearkeys.hasOwnProperty(l)?t.clearkeys[l]:null;if(!u)throw new Error("DRM: ClearKey keyID ("+l+") is not known!");a.push(new o.default(l,u))}i=new r.default(a)}return i}}}h.__dashjs_factory_name="KeySystemClearKey",e.default=dashjs.FactoryMaker.getSingletonFactory(h),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(77)),r=n(i(78)),a=n(i(36)),s=n(i(28)),l="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",u=s.default.CLEARKEY_KEYSTEM_STRING,d="urn:uuid:"+l;function h(t){var e=void 0,i=t.BASE64,n=t.debug.getLogger(e);return e={uuid:l,schemeIdURI:d,systemString:u,getInitData:function(t){return a.default.parseInitDataFromContentProtection(t,i)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(t){return new Uint8Array(t)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(t,e){var i=null;if(t){for(var a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))),s=[],l=0;l<a.kids.length;l++){var u=a.kids[l],d=t.clearkeys&&t.clearkeys.hasOwnProperty(u)?t.clearkeys[u]:null;if(!d)throw new Error("DRM: ClearKey keyID ("+u+") is not known!");s.push(new o.default(u,d))}i=new r.default(s),n.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return i}}}h.__dashjs_factory_name="KeySystemW3CClearKey",e.default=dashjs.FactoryMaker.getSingletonFactory(h),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(36)),r=n(i(28)),a="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",s=r.default.WIDEVINE_KEYSTEM_STRING,l="urn:uuid:"+a;function u(t){var e=null,i=(t=t||{}).BASE64;return{uuid:a,schemeIdURI:l,systemString:s,init:function(t){t&&(e=t)},getInitData:function(t){return o.default.parseInitDataFromContentProtection(t,i)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(t){return new Uint8Array(t)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(t){return e&&e.sessionId?e.sessionId:t&&t.sessionId?t.sessionId:null}}}u.__dashjs_factory_name="KeySystemWidevine",e.default=dashjs.FactoryMaker.getSingletonFactory(u),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(36)),r=n(i(28)),a="9a04f079-9840-4286-ab92-e65be0885f95",s=r.default.PLAYREADY_KEYSTEM_STRING,l="urn:uuid:"+a,u='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>',d=void 0;function h(t){var e="utf16",i=(t=t||{}).BASE64;function n(){if(!i||!i.hasOwnProperty("decodeArray")||!i.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:a,schemeIdURI:l,systemString:s,getInitData:function(t){var e,r,a,s=new Uint8Array([112,115,115,104,0,0,0,0]),l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=0,d=null,h=void 0,c=void 0;if(n(),"pssh"in t)return o.default.parseInitDataFromContentProtection(t,i);if("pro"in t)d=i.decodeArray(t.pro.__text);else{if(!("prheader"in t))return null;d=i.decodeArray(t.prheader.__text)}return e=d.length,r=4+s.length+l.length+4+e,a=new ArrayBuffer(r),h=new Uint8Array(a),(c=new DataView(a)).setUint32(u,r),u+=4,h.set(s,u),u+=s.length,h.set(l,u),u+=l.length,c.setUint32(u,e),u+=4,h.set(d,u),u+=e,h.buffer},getRequestHeadersFromMessage:function(t){var i,n=void 0,o={},r=new DOMParser,a="utf16"===e?new Uint16Array(t):new Uint8Array(t);i=String.fromCharCode.apply(null,a);for(var s=(n=r.parseFromString(i,"application/xml")).getElementsByTagName("name"),l=n.getElementsByTagName("value"),u=0;u<s.length;u++)o[s[u].childNodes[0].nodeValue]=l[u].childNodes[0].nodeValue;return o.hasOwnProperty("Content")&&(o["Content-Type"]=o.Content,delete o.Content),o.hasOwnProperty("Content-Type")||(o["Content-Type"]="text/xml; charset="+e),o},getLicenseRequestFromMessage:function(t){var o=null,r=new DOMParser,a="utf16"===e?new Uint16Array(t):new Uint8Array(t);n();var s=String.fromCharCode.apply(null,a),l=r.parseFromString(s,"application/xml");if(l.getElementsByTagName("Challenge")[0]){var u=l.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;u&&(o=i.decode(u))}else if(l.getElementsByTagName("parsererror").length)return t;return o},getLicenseServerURLFromInitData:function(t){if(t)for(var e=new DataView(t),i=e.getUint16(4,!0),n=6,o=new DOMParser,r=0;r<i;r++){var a=e.getUint16(n,!0);n+=2;var s=e.getUint16(n,!0);if(n+=2,1===a){var l=t.slice(n,n+s),u=String.fromCharCode.apply(null,new Uint16Array(l)),d=o.parseFromString(u,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var h=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(h)return h}if(d.getElementsByTagName("LUI_URL")[0]){var c=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(c)return c}}else n+=s}return null},getCDMData:function(){var t=void 0,e=void 0,o=void 0,r=void 0;if(n(),d&&d.cdmData){for(t=[],r=0;r<d.cdmData.length;++r)t.push(d.cdmData.charCodeAt(r)),t.push(0);for(t=String.fromCharCode.apply(null,t),t=i.encode(t),e=u.replace("%CUSTOMDATA%",t),o=[],r=0;r<e.length;++r)o.push(e.charCodeAt(r)),o.push(0);return new Uint8Array(o).buffer}return null},getSessionId:function(t){return d&&d.sessionId?d.sessionId:t&&t.sessionId?t.sessionId:null},setPlayReadyMessageFormat:function(t){if("utf8"!==t&&"utf16"!==t)throw new Error("Illegal PlayReady message format! -- "+t);e=t},init:function(t){t&&(d=t)}}}h.__dashjs_factory_name="KeySystemPlayReady",e.default=dashjs.FactoryMaker.getSingletonFactory(h),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(28),r=(n=o)&&n.__esModule?n:{default:n};function a(t){var e=(t=t||{}).BASE64,i={};i[r.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(t){return e.decodeArray(t.license)},getErrorResponse:function(t){return t}},i[r.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(t){return t},getErrorResponse:function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}};return{getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(t){return i[t].responseType},getLicenseMessage:function(t,n){return function(){if(!e||!e.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),i[n].getLicenseMessage(t)},getErrorResponse:function(t,e){return i[e].getErrorResponse(t)}}}a.__dashjs_factory_name="DRMToday",e.default=dashjs.FactoryMaker.getSingletonFactory(a),t.exports=e.default},function(t,e,i){"use strict";function n(){var t="http://schemas.xmlsoap.org/soap/envelope/";function e(t){var e=String.fromCharCode.apply(null,new Uint8Array(t));return decodeURIComponent(escape(e))}return{getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(i){return function(i){if(window.DOMParser){var n=e(i),o=(new window.DOMParser).parseFromString(n,"text/xml"),r=o?o.getElementsByTagNameNS(t,"Envelope")[0]:null,a=r?r.getElementsByTagNameNS(t,"Body")[0]:null;if(a?a.getElementsByTagNameNS(t,"Fault")[0]:null)return null}return i}.call(this,i)},getErrorResponse:function(i){return function(i){var n="",o="",r="",a=-1,s=-1;if(window.DOMParser){var l=e(i),u=(new window.DOMParser).parseFromString(l,"text/xml"),d=u?u.getElementsByTagNameNS(t,"Envelope")[0]:null,h=d?d.getElementsByTagNameNS(t,"Body")[0]:null,c=h?h.getElementsByTagNameNS(t,"Fault")[0]:null,f=c?c.getElementsByTagName("detail")[0]:null,p=f?f.getElementsByTagName("Exception")[0]:null,g=null;if(null===c)return l;n=(g=c.getElementsByTagName("faultstring")[0].firstChild)?g.nodeValue:null,null!==p&&(o=(g=p.getElementsByTagName("StatusCode")[0])?g.firstChild.nodeValue:null,a=(r=(g=p.getElementsByTagName("Message")[0])?g.firstChild.nodeValue:null)?r.lastIndexOf("[")+1:-1,s=r?r.indexOf("]"):-1,r=r?r.substring(a,s):"")}var m="code: "+o+", name: "+n;return r&&(m+=", message: "+r),m}.call(this,i)}}}Object.defineProperty(e,"__esModule",{value:!0}),n.__dashjs_factory_name="PlayReady",e.default=dashjs.FactoryMaker.getSingletonFactory(n),t.exports=e.default},function(t,e,i){"use strict";function n(){return{getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(t){return t},getErrorResponse:function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}}}Object.defineProperty(e,"__esModule",{value:!0}),n.__dashjs_factory_name="Widevine",e.default=dashjs.FactoryMaker.getSingletonFactory(n),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(77)),r=n(i(78));function a(){return{getServerURLFromMessage:function(t,e){var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e)));t+="/?";for(var n=0;n<i.kids.length;n++)t+=i.kids[n]+"&";return t=t.substring(0,t.length-1)},getHTTPMethod:function(){return"GET"},getResponseType:function(){return"json"},getLicenseMessage:function(t){if(!t.hasOwnProperty("keys"))return null;for(var e=[],i=0;i<t.keys.length;i++){var n=t.keys[i],a=n.kid.replace(/=/g,""),s=n.k.replace(/=/g,"");e.push(new o.default(a,s))}return new r.default(e)},getErrorResponse:function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}}}a.__dashjs_factory_name="ClearKey",e.default=dashjs.FactoryMaker.getSingletonFactory(a),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=a,n=!0,s=u=void 0}};var o,r=i(50),a=(o=r)&&o.__esModule?o:{default:o},s=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a["default"]),e}());e.default=s,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(57)),r=n(i(79)),a=n(i(44)),s=n(i(6)),l=n(i(80)),u=n(i(81)),d=n(i(28));function h(t){t=t||{};var e=this.context,i=t.eventBus,n=t.events,h=t.debug,c=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0;function b(t){var e=t.session;return e.removeEventListener("keystatuseschange",t),e.removeEventListener("message",t),e.close()}function E(t){for(var e=0;e<v.length;e++)if(v[e]===t){v.splice(e,1);break}}function w(t){var e=void 0,i=void 0;return t&&t.length>0&&(t[0]&&("string"==typeof t[0]?e=t[0]:i=t[0]),t[1]&&("string"==typeof t[1]?e=t[1]:i=t[1])),{status:e,keyId:i}}function T(t,e,o,r){var u={session:t,initData:e,sessionId:r,handleEvent:function(t){switch(t.type){case"keystatuseschange":i.trigger(n.KEY_STATUSES_CHANGED,{data:this}),t.target.keyStatuses.forEach(function(){var t=w(arguments);switch(t.status){case"expired":i.trigger(n.INTERNAL_KEY_STATUS_CHANGED,{error:new s.default(a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:i.trigger(n.INTERNAL_KEY_STATUS_CHANGED,t)}});break;case"message":var e=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;i.trigger(n.INTERNAL_KEY_MESSAGE,{data:new l.default(this,e,void 0,t.messageType)})}},getSessionID:function(){return t.sessionId},getExpirationTime:function(){return t.expiration},getKeyStatuses:function(){return t.keyStatuses},getUsable:function(){var e=!1;return t.keyStatuses.forEach(function(){var t=w(arguments);"usable"===t.status&&(e=!0)}),e},getSessionType:function(){return o}};return t.addEventListener("keystatuseschange",u),t.addEventListener("message",u),t.closed.then(function(){E(u),f.debug("DRM: Session closed.  SessionID = "+u.getSessionID()),i.trigger(n.KEY_SESSION_CLOSED,{data:u.getSessionID()})}),v.push(u),u}return c={getAllInitData:function(){for(var t=[],e=0;e<v.length;e++)v[e].initData&&t.push(v[e].initData);return t},requestKeySystemAccess:function(t){!function t(e,o){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess)return void i.trigger(n.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"});!function(o){var r=e[o].ks,a=e[o].configs,s=r.systemString;s===d.default.PLAYREADY_KEYSTEM_STRING&&"required"===a[0].persistentState&&(s+=".recommendation"),navigator.requestMediaKeySystemAccess(s,a).then(function(t){var e="function"==typeof t.getConfiguration?t.getConfiguration():null,o=new u.default(r,e);o.mksa=t,i.trigger(n.KEY_SYSTEM_ACCESS_COMPLETE,{data:o})}).catch(function(r){++o<e.length?t(e,o):i.trigger(n.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+r.message})})}(o)}(t,0)},getKeySystem:function(){return p},selectKeySystem:function(t){t.mksa.createMediaKeys().then(function(e){p=t.keySystem,m=e,g?g.setMediaKeys(m).then(function(){i.trigger(n.INTERNAL_KEY_SYSTEM_SELECTED)}):i.trigger(n.INTERNAL_KEY_SYSTEM_SELECTED)}).catch(function(){i.trigger(n.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})},setMediaElement:function(t){g!==t&&(g&&(g.removeEventListener("encrypted",y),g.setMediaKeys&&g.setMediaKeys(null)),(g=t)&&(g.addEventListener("encrypted",y),g.setMediaKeys&&m&&g.setMediaKeys(m)))},setServerCertificate:function(t){if(!p||!m)throw new Error("Can not set server certificate until you have selected a key system");m.setServerCertificate(t).then(function(){f.info("DRM: License server certificate successfully updated."),i.trigger(n.SERVER_CERTIFICATE_UPDATED)}).catch(function(t){i.trigger(n.SERVER_CERTIFICATE_UPDATED,{error:new s.default(a.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,a.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+t.name)})})},createKeySession:function(t,e,o){if(!p||!m)throw new Error("Can not create sessions until you have selected a key system");var r=m.createSession(o),l=T(r,t,o),u=this.getKeySystem().systemString===d.default.CLEARKEY_KEYSTEM_STRING&&e&&e.clearkeys?"keyids":"cenc";r.generateRequest(u,t).then(function(){f.debug("DRM: Session created.  SessionID = "+l.getSessionID()),i.trigger(n.KEY_SESSION_CREATED,{data:l})}).catch(function(t){E(l),i.trigger(n.KEY_SESSION_CREATED,{data:null,error:new s.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+t.name)})})},updateKeySession:function(t,e){var o=t.session;_.isClearKey(p)&&(e=e.toJWK()),o.update(e).catch(function(e){i.trigger(n.KEY_ERROR,{data:new s.default(a.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,t)})})},loadKeySession:function(t,e,o){if(!p||!m)throw new Error("Can not load sessions until you have selected a key system");for(var r=0;r<v.length;r++)if(t===v[r].sessionId)return void f.warn("DRM: Ignoring session ID because we have already seen it!");var l=m.createSession(o),u=T(l,e,o,t);l.load(t).then(function(e){e?(f.debug("DRM: Session loaded.  SessionID = "+u.getSessionID()),i.trigger(n.KEY_SESSION_CREATED,{data:u})):(E(u),i.trigger(n.KEY_SESSION_CREATED,{data:null,error:new s.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}))}).catch(function(e){E(u),i.trigger(n.KEY_SESSION_CREATED,{data:null,error:new s.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)})})},removeKeySession:function(t){t.session.remove().then(function(){f.debug("DRM: Session removed.  SessionID = "+t.getSessionID()),i.trigger(n.KEY_SESSION_REMOVED,{data:t.getSessionID()})},function(e){i.trigger(n.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionID()+"). "+e.name})})},closeKeySession:function(t){b(t).catch(function(e){E(t),i.trigger(n.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionID()+") "+e.name})})},stop:function(){for(var t=void 0,e=0;e<v.length;e++)(t=v[e]).getUsable()||b(t).catch(function(){E(t)})},reset:function(){var t=v.length,e=void 0;0!==t?function(){for(var o=function(t){E(t),0===v.length&&(g?(g.removeEventListener("encrypted",y),g.setMediaKeys(null).then(function(){i.trigger(n.TEARDOWN_COMPLETE)})):i.trigger(n.TEARDOWN_COMPLETE))},r=0;r<t;r++)!function(t){e.session.closed.then(function(){o(t)}),b(e).catch(function(){o(t)})}(e=v[r])}():i.trigger(n.TEARDOWN_COMPLETE)}},f=h.getLogger(c),p=null,g=null,m=null,v=[],_=(0,o.default)(e).getInstance(),y={handleEvent:function(t){switch(t.type){case"encrypted":if(t.initData){var e=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;i.trigger(n.NEED_KEY,{key:new r.default(e,t.initDataType)})}}}},c}h.__dashjs_factory_name="ProtectionModel_21Jan2015",e.default=dashjs.FactoryMaker.getClassFactory(h),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(57)),r=n(i(79)),a=n(i(6)),s=n(i(44)),l=n(i(80)),u=n(i(76)),d=n(i(81));function h(t){t=t||{};var e=this.context,i=t.eventBus,n=t.events,h=t.debug,c=t.api,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0;function w(){try{for(var t=0;t<_.length;t++)T(_[t]);g&&g.removeEventListener(c.needkey,b),i.trigger(n.TEARDOWN_COMPLETE)}catch(t){i.trigger(n.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+t.message})}}function T(t){var e=t.session;e.removeEventListener(c.error,t),e.removeEventListener(c.message,t),e.removeEventListener(c.ready,t),e.removeEventListener(c.close,t);for(var i=0;i<_.length;i++)if(_[i]===t){_.splice(i,1);break}e[c.release]()}function S(){var t=null,e=function(){g.removeEventListener("loadedmetadata",t),g[c.setMediaKeys](v),i.trigger(n.VIDEO_ELEMENT_SELECTED)};g.readyState>=1?e():(t=e.bind(this),g.addEventListener("loadedmetadata",t))}return f={getAllInitData:function(){for(var t=[],e=0;e<_.length;e++)t.push(_[e].initData);return t},requestKeySystemAccess:function(t){for(var e=!1,o=0;o<t.length;o++)for(var r=t[o].ks.systemString,a=t[o].configs,s=null,l=null,h=0;h<a.length;h++){var f=a[h].audioCapabilities,p=a[h].videoCapabilities;if(f&&0!==f.length){s=[];for(var g=0;g<f.length;g++)window[c.MediaKeys].isTypeSupported(r,f[g].contentType)&&s.push(f[g])}if(p&&0!==p.length){l=[];for(var m=0;m<p.length;m++)window[c.MediaKeys].isTypeSupported(r,p[m].contentType)&&l.push(p[m])}if(!(!s&&!l||s&&0===s.length||l&&0===l.length)){e=!0;var v=new u.default(s,l),y=E.getKeySystemBySystemString(r);i.trigger(n.KEY_SYSTEM_ACCESS_COMPLETE,{data:new d.default(y,v)});break}}e||i.trigger(n.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return m},selectKeySystem:function(t){try{v=t.mediaKeys=new window[c.MediaKeys](t.keySystem.systemString),m=t.keySystem,y=t,g&&S(),i.trigger(n.INTERNAL_KEY_SYSTEM_SELECTED)}catch(t){i.trigger(n.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+m.systemString+")! Could not create MediaKeys -- TODO"})}},setMediaElement:function(t){g!==t&&(g&&g.removeEventListener(c.needkey,b),(g=t)&&(g.addEventListener(c.needkey,b),v&&S()))},createKeySession:function(t,e,o,r){if(!m||!v||!y)throw new Error("Can not create sessions until you have selected a key system");var u=null;if(y.ksConfiguration.videoCapabilities&&y.ksConfiguration.videoCapabilities.length>0&&(u=y.ksConfiguration.videoCapabilities[0]),null===u&&y.ksConfiguration.audioCapabilities&&y.ksConfiguration.audioCapabilities.length>0&&(u=y.ksConfiguration.audioCapabilities[0]),null===u)throw new Error("Can not create sessions for unknown content types.");var d=u.contentType,h=v.createSession(d,new Uint8Array(t),r?new Uint8Array(r):null),f=function(t,e){return{session:t,initData:e,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(t){switch(t.type){case c.error:i.trigger(n.KEY_ERROR,{data:new a.default(s.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case c.message:var e=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;i.trigger(n.INTERNAL_KEY_MESSAGE,{data:new l.default(this,e,t.destinationURL)});break;case c.ready:p.debug("DRM: Key added."),i.trigger(n.KEY_ADDED);break;case c.close:p.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),i.trigger(n.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}(h,t);h.addEventListener(c.error,f),h.addEventListener(c.message,f),h.addEventListener(c.ready,f),h.addEventListener(c.close,f),_.push(f),p.debug("DRM: Session created.  SessionID = "+f.getSessionID()),i.trigger(n.KEY_SESSION_CREATED,{data:f})},updateKeySession:function(t,e){var i=t.session;E.isClearKey(m)?i.update(new Uint8Array(e.toJWK())):i.update(new Uint8Array(e))},closeKeySession:T,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:w,reset:w},p=h.getLogger(f),g=null,m=null,v=null,y=null,_=[],E=(0,o.default)(e).getInstance(),b={handleEvent:function(t){switch(t.type){case c.needkey:if(t.initData){var e=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;i.trigger(n.NEED_KEY,{key:new r.default(e,"cenc")})}}}},f}h.__dashjs_factory_name="ProtectionModel_3Feb2014",e.default=dashjs.FactoryMaker.getClassFactory(h),t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(57)),r=n(i(79)),a=n(i(6)),s=n(i(80)),l=n(i(76)),u=n(i(81)),d=n(i(44));function h(t){t=t||{};var e=this.context,i=t.eventBus,n=t.events,h=t.debug,c=t.api,f=t.errHandler,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,w=void 0;function T(){m&&C();for(var t=0;t<b.length;t++)S(b[t]);i.trigger(n.TEARDOWN_COMPLETE)}function S(t){try{m[c.cancelKeyRequest](v.systemString,t.sessionID)}catch(e){i.trigger(n.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionID+") "+e.message})}}function x(t,e){if(e&&t){for(var i=t.length,n=0;n<i;n++)if(t[n].sessionID==e)return t[n];return null}return null}function C(){m.removeEventListener(c.keyerror,w),m.removeEventListener(c.needkey,w),m.removeEventListener(c.keymessage,w),m.removeEventListener(c.keyadded,w)}return p={getAllInitData:function(){for(var t=[],e=0;e<_.length;e++)t.push(_[e].initData);for(e=0;e<b.length;e++)t.push(b[e].initData);return t},requestKeySystemAccess:function(t){var e=m;e||(e=document.createElement("video"));for(var o=!1,r=0;r<t.length;r++)for(var a=t[r].ks.systemString,s=t[r].configs,d=null,h=0;h<s.length;h++){var c=s[h].videoCapabilities;if(c&&0!==c.length){d=[];for(var f=0;f<c.length;f++)""!==e.canPlayType(c[f].contentType,a)&&d.push(c[f])}if(d&&(!d||0!==d.length)){o=!0;var p=new l.default(null,d),g=y.getKeySystemBySystemString(a);i.trigger(n.KEY_SYSTEM_ACCESS_COMPLETE,{data:new u.default(g,p)});break}}o||i.trigger(n.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return v},selectKeySystem:function(t){v=t.keySystem,i.trigger(n.INTERNAL_KEY_SYSTEM_SELECTED)},setMediaElement:function(t){if(m!==t){if(m){C();for(var e=0;e<b.length;e++)S(b[e]);b=[]}(m=t)&&(m.addEventListener(c.keyerror,w),m.addEventListener(c.needkey,w),m.addEventListener(c.keymessage,w),m.addEventListener(c.keyadded,w),i.trigger(n.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(t){if(!v)throw new Error("Can not create sessions until you have selected a key system");if(E||0===b.length){var e={sessionID:null,initData:t,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return _.push(e),m[c.generateKeyRequest](v.systemString,new Uint8Array(t)),e}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(t,e){var i=t.sessionID;if(y.isClearKey(v))for(var n=0;n<e.keyPairs.length;n++)m[c.addKey](v.systemString,e.keyPairs[n].key,e.keyPairs[n].keyID,i);else m[c.addKey](v.systemString,new Uint8Array(e),new Uint8Array(t.initData),i)},closeKeySession:S,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:T,reset:T},g=h.getLogger(p),m=null,v=null,_=[],b=[],y=(0,o.default)(e).getInstance(),w={handleEvent:function(t){var e=null;switch(t.type){case c.needkey:var o=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;i.trigger(n.NEED_KEY,{key:new r.default(o,"cenc")});break;case c.keyerror:if((e=x(b,t.sessionId))||(e=x(_,t.sessionId)),e){var l=d.default.MEDIA_KEYERR_CODE,u="";switch(t.errorCode.code){case 1:l=d.default.MEDIA_KEYERR_UNKNOWN_CODE,u+="MEDIA_KEYERR_UNKNOWN - "+d.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:l=d.default.MEDIA_KEYERR_CLIENT_CODE,u+="MEDIA_KEYERR_CLIENT - "+d.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:l=d.default.MEDIA_KEYERR_SERVICE_CODE,u+="MEDIA_KEYERR_SERVICE - "+d.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:l=d.default.MEDIA_KEYERR_OUTPUT_CODE,u+="MEDIA_KEYERR_OUTPUT - "+d.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:l=d.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,u+="MEDIA_KEYERR_HARDWARECHANGE - "+d.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:l=d.default.MEDIA_KEYERR_DOMAIN_CODE,u+="MEDIA_KEYERR_DOMAIN - "+d.default.MEDIA_KEYERR_DOMAIN_MESSAGE}u+="  System Code = "+t.systemCode,i.trigger(n.KEY_ERROR,{data:new a.default(l,u,e)})}else g.error("No session token found for key error");break;case c.keyadded:(e=x(b,t.sessionId))||(e=x(_,t.sessionId)),e?(g.debug("DRM: Key added."),i.trigger(n.KEY_ADDED,{data:e})):g.debug("No session token found for key added");break;case c.keymessage:if((E=null!==t.sessionId&&void 0!==t.sessionId)?!(e=x(b,t.sessionId))&&_.length>0&&(e=_.shift(),b.push(e),e.sessionID=t.sessionId,i.trigger(n.KEY_SESSION_CREATED,{data:e})):_.length>0&&(e=_.shift(),b.push(e),0!==_.length&&(f.mediaKeyMessageError(d.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE),f.error(new a.default(d.default.MEDIA_KEY_MESSAGE_ERROR_CODE,d.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE)))),e){var h=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;e.keyMessage=h,i.trigger(n.INTERNAL_KEY_MESSAGE,{data:new s.default(e,h,t.defaultURL)})}else g.warn("No session token found for key message")}}},p}h.__dashjs_factory_name="ProtectionModel_01b",e.default=dashjs.FactoryMaker.getClassFactory(h),t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(105),r=(n=o)&&n.__esModule?n:{default:n};var a=function(){var t="application/dash+xml",e=void 0;function i(i,n,o){if(!i||!/^VIDEO$/i.test(i.nodeName))return null;if(i._dashjs_player)return i._dashjs_player;var a=void 0,s=i.id||i.name||"video element";if(!(n=n||[].slice.call(i.querySelectorAll("source")).filter(function(e){return e.type==t})[0])&&i.src)(n=document.createElement("source")).src=i.src;else if(!n&&!i.src)return null;return o=o||{},(a=(0,r.default)(o).create()).initialize(i,n.src,i.autoplay),e||(e=a.getDebug().getLogger()),e.debug("Converted "+s+" to dash.js player and added content: "+n.src),i._dashjs_player=a,a}function n(t){for(var e=!0;e;){var i=t;if(e=!1,/^VIDEO$/i.test(i.nodeName))return i;t=i.parentNode,e=!0}}return{create:i,createAll:function(e,o){var r=[];e=e||"[data-dashjs-player]";for(var a=(o=o||document).querySelectorAll(e),s=0;s<a.length;s++){var l=i(a[s],null);r.push(l)}var u=o.querySelectorAll('source[type="'+t+'"]');for(s=0;s<u.length;s++){l=i(n(u[s]),null);r.push(l)}return r}}}(),s=void 0;!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?a.createAll():s=window.setInterval(function(){window.dashjs&&(window.clearInterval(s),a.createAll())},500):window.addEventListener("load",function t(){window.removeEventListener("load",t),a.createAll()})),e.default=a,t.exports=e.default},function(t,e,i){i(82),i(129),i(130),i(328),i(329),i(331)},function(t,e,i){var n,o,r;o=[i(5),i(7)],void 0===(r="function"==typeof(n=function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Slider 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(130),i(129),i(7),i(82)],void 0===(r="function"==typeof(n=function(t){return t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,o=this.element.find(".ui-slider-handle"),r=[];for(i=n.values&&n.values.length||1,o.length>i&&(o.slice(i).remove(),o=o.slice(0,i)),e=o.length;e<i;e++)r.push("<span tabindex='0'></span>");this.handles=o.add(t(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,n,o,r,a,s,l,u=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-u.values(e));(o>i||o===i&&(e===u._lastChangedValue||u.values(e)===d.min))&&(o=i,r=t(this),a=e)}),!1!==this._start(e,a)&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),s=r.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-s.left-r.width()/2,top:e.pageY-s.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,o,r;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/e)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),r=this._valueMin()+n*o,this._trimAlignValue(r)},_uiHash:function(t,e,i){var n={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==e?e:this.values(t),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var n,o=this.value(),r=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(n,i):Math.max(n,i)),r[e]=i),i!==o&&!1!==this._trigger("slide",t,this._uiHash(e,i,r))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,o,r;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(n=this.options.values,o=arguments[0],r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(o[r]),this._change(null,r);this._refreshValue()},_setOption:function(e,i){var n,o=0;switch("range"===e&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(o=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=o-1;n>=0;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,n,o,r,a=this.options.range,s=this.options,l=this,u=!this._animateOff&&s.animate,d={};this._hasMultipleValues()?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[u?"animate":"css"](d,s.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[u?"animate":"css"]({left:i+"%"},s.animate),1===n&&l.range[u?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:s.animate})):(0===n&&l.range.stop(1,1)[u?"animate":"css"]({bottom:i+"%"},s.animate),1===n&&l.range[u?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:s.animate}))),e=i}):(n=this.value(),o=this._valueMin(),r=this._valueMax(),i=r!==o?(n-o)/(r-o)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[u?"animate":"css"](d,s.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:i+"%"},s.animate),"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:100-i+"%"},s.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:i+"%"},s.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:100-i+"%"},s.animate))},_handleEvents:{keydown:function(e){var i,n,o,r=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,r)))return}switch(o=this.options.step,i=n=this._hasMultipleValues()?this.values(r):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-o)}this._slide(e,r,n)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n=i(330);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(19)(n,o);n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(18)(!1)).push([t.i,'/*!\n * jQuery UI CSS Framework 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/theming/\n */\n\n/* Layout helpers\n----------------------------------*/\n.ui-helper-hidden {\n\tdisplay: none;\n}\n.ui-helper-hidden-accessible {\n\tborder: 0;\n\tclip: rect(0 0 0 0);\n\theight: 1px;\n\tmargin: -1px;\n\toverflow: hidden;\n\tpadding: 0;\n\tposition: absolute;\n\twidth: 1px;\n}\n.ui-helper-reset {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\toutline: 0;\n\tline-height: 1.3;\n\ttext-decoration: none;\n\tfont-size: 100%;\n\tlist-style: none;\n}\n.ui-helper-clearfix:before,\n.ui-helper-clearfix:after {\n\tcontent: "";\n\tdisplay: table;\n\tborder-collapse: collapse;\n}\n.ui-helper-clearfix:after {\n\tclear: both;\n}\n.ui-helper-zfix {\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\topacity: 0;\n\tfilter:Alpha(Opacity=0); /* support: IE8 */\n}\n\n.ui-front {\n\tz-index: 100;\n}\n\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-disabled {\n\tcursor: default !important;\n\tpointer-events: none;\n}\n\n\n/* Icons\n----------------------------------*/\n.ui-icon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tmargin-top: -.25em;\n\tposition: relative;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n}\n\n.ui-widget-icon-block {\n\tleft: 50%;\n\tmargin-left: -8px;\n\tdisplay: block;\n}\n\n/* Misc visuals\n----------------------------------*/\n\n/* Overlays */\n.ui-widget-overlay {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n',""])},function(t,e,i){var n=i(332);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(19)(n,o);n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(18)(!1)).push([t.i,"/*!\n * jQuery UI Slider 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/slider/#theming\n */\n.ui-slider {\n\tposition: relative;\n\ttext-align: left;\n}\n.ui-slider .ui-slider-handle {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 1.2em;\n\theight: 1.2em;\n\tcursor: default;\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n.ui-slider .ui-slider-range {\n\tposition: absolute;\n\tz-index: 1;\n\tfont-size: .7em;\n\tdisplay: block;\n\tborder: 0;\n\tbackground-position: 0 0;\n}\n\n/* support: IE8 - See #6727 */\n.ui-slider.ui-state-disabled .ui-slider-handle,\n.ui-slider.ui-state-disabled .ui-slider-range {\n\tfilter: inherit;\n}\n\n.ui-slider-horizontal {\n\theight: .8em;\n}\n.ui-slider-horizontal .ui-slider-handle {\n\ttop: -.3em;\n\tmargin-left: -.6em;\n}\n.ui-slider-horizontal .ui-slider-range {\n\ttop: 0;\n\theight: 100%;\n}\n.ui-slider-horizontal .ui-slider-range-min {\n\tleft: 0;\n}\n.ui-slider-horizontal .ui-slider-range-max {\n\tright: 0;\n}\n\n.ui-slider-vertical {\n\twidth: .8em;\n\theight: 100px;\n}\n.ui-slider-vertical .ui-slider-handle {\n\tleft: -.3em;\n\tmargin-left: 0;\n\tmargin-bottom: -.6em;\n}\n.ui-slider-vertical .ui-slider-range {\n\tleft: 0;\n\twidth: 100%;\n}\n.ui-slider-vertical .ui-slider-range-min {\n\tbottom: 0;\n}\n.ui-slider-vertical .ui-slider-range-max {\n\ttop: 0;\n}\n",""])},function(t,e,i){i(11),i(334),i(335),i(336),i(337),i(338),i(339),i(340),i(341),i(342),i(343),i(131),i(344),i(132),i(345),i(346)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Blind 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("blind","hide",function(e,i){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},o=t(this),r=e.direction||"up",a=o.cssClip(),s={clip:t.extend({},a)},l=t.effects.createPlaceholder(o);s.clip[n[r][0]]=s.clip[n[r][1]],"show"===e.mode&&(o.cssClip(s.clip),l&&l.css(t.effects.clipToBox(s)),s.clip=a),l&&l.animate(t.effects.clipToBox(s),e.duration,e.easing),o.animate(s,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Bounce 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("bounce",function(e,i){var n,o,r,a=t(this),s=e.mode,l="hide"===s,u="show"===s,d=e.direction||"up",h=e.distance,c=e.times||5,f=2*c+(u||l?1:0),p=e.duration/f,g=e.easing,m="up"===d||"down"===d?"top":"left",v="up"===d||"left"===d,y=0,_=a.queue().length;for(t.effects.createPlaceholder(a),r=a.css(m),h||(h=a["top"===m?"outerHeight":"outerWidth"]()/3),u&&((o={opacity:1})[m]=r,a.css("opacity",0).css(m,v?2*-h:2*h).animate(o,p,g)),l&&(h/=Math.pow(2,c-1)),(o={})[m]=r;y<c;y++)(n={})[m]=(v?"-=":"+=")+h,a.animate(n,p,g).animate(o,p,g),h=l?2*h:h/2;l&&((n={opacity:0})[m]=(v?"-=":"+=")+h,a.animate(n,p,g)),a.queue(i),t.effects.unshift(a,_,f+1)})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Clip 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("clip","hide",function(e,i){var n,o={},r=t(this),a=e.direction||"vertical",s="both"===a,l=s||"horizontal"===a,u=s||"vertical"===a;n=r.cssClip(),o.clip={top:u?(n.bottom-n.top)/2:n.top,right:l?(n.right-n.left)/2:n.right,bottom:u?(n.bottom-n.top)/2:n.bottom,left:l?(n.right-n.left)/2:n.left},t.effects.createPlaceholder(r),"show"===e.mode&&(r.cssClip(o.clip),o.clip=n),r.animate(o,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Drop 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("drop","hide",function(e,i){var n,o=t(this),r="show"===e.mode,a=e.direction||"left",s="up"===a||"down"===a?"top":"left",l="up"===a||"left"===a?"-=":"+=",u="+="===l?"-=":"+=",d={opacity:0};t.effects.createPlaceholder(o),n=e.distance||o["top"===s?"outerHeight":"outerWidth"](!0)/2,d[s]=l+n,r&&(o.css(d),d[s]=u+n,d.opacity=1),o.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Explode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("explode","hide",function(e,i){var n,o,r,a,s,l,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,h=t(this),c="show"===e.mode,f=h.show().css("visibility","hidden").offset(),p=Math.ceil(h.outerWidth()/d),g=Math.ceil(h.outerHeight()/u),m=[];function v(){m.push(this),m.length===u*d&&(h.css({visibility:"visible"}),t(m).remove(),i())}for(n=0;n<u;n++)for(a=f.top+n*g,l=n-(u-1)/2,o=0;o<d;o++)r=f.left+o*p,s=o-(d-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*p,top:-n*g}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:g,left:r+(c?s*p:0),top:a+(c?l*g:0),opacity:c?0:1}).animate({left:r+(c?0:s*p),top:a+(c?0:l*g),opacity:c?1:0},e.duration||500,e.easing,v)})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Fade 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("fade","toggle",function(e,i){var n="show"===e.mode;t(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:i})})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Fold 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("fold","hide",function(e,i){var n=t(this),o=e.mode,r="show"===o,a="hide"===o,s=e.size||15,l=/([0-9]+)%/.exec(s),u=e.horizFirst?["right","bottom"]:["bottom","right"],d=e.duration/2,h=t.effects.createPlaceholder(n),c=n.cssClip(),f={clip:t.extend({},c)},p={clip:t.extend({},c)},g=[c[u[0]],c[u[1]]],m=n.queue().length;l&&(s=parseInt(l[1],10)/100*g[a?0:1]),f.clip[u[0]]=s,p.clip[u[0]]=s,p.clip[u[1]]=0,r&&(n.cssClip(p.clip),h&&h.css(t.effects.clipToBox(p)),p.clip=c),n.queue(function(i){h&&h.animate(t.effects.clipToBox(f),d,e.easing).animate(t.effects.clipToBox(p),d,e.easing),i()}).animate(f,d,e.easing).animate(p,d,e.easing).queue(i),t.effects.unshift(n,m,4)})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Highlight 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("highlight","show",function(e,i){var n=t(this),o={backgroundColor:n.css("backgroundColor")};"hide"===e.mode&&(o.opacity=0),t.effects.saveStyle(n),n.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(o,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Puff 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11),i(131)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("puff","hide",function(e,i){var n=t.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150});t.effects.effect.scale.call(this,n,i)})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Pulsate 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("pulsate","show",function(e,i){var n=t(this),o=e.mode,r="show"===o,a=r||"hide"===o,s=2*(e.times||5)+(a?1:0),l=e.duration/s,u=0,d=1,h=n.queue().length;for(!r&&n.is(":visible")||(n.css("opacity",0).show(),u=1);d<s;d++)n.animate({opacity:u},l,e.easing),u=1-u;n.animate({opacity:u},l,e.easing),n.queue(i),t.effects.unshift(n,h,s+1)})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Shake 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("shake",function(e,i){var n=1,o=t(this),r=e.direction||"left",a=e.distance||20,s=e.times||3,l=2*s+1,u=Math.round(e.duration/l),d="up"===r||"down"===r?"top":"left",h="up"===r||"left"===r,c={},f={},p={},g=o.queue().length;for(t.effects.createPlaceholder(o),c[d]=(h?"-=":"+=")+a,f[d]=(h?"+=":"-=")+2*a,p[d]=(h?"-=":"+=")+2*a,o.animate(c,u,e.easing);n<s;n++)o.animate(f,u,e.easing).animate(p,u,e.easing);o.animate(f,u,e.easing).animate(c,u/2,e.easing).queue(i),t.effects.unshift(o,g,l+1)})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Slide 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11)],void 0===(r="function"==typeof(n=function(t){return t.effects.define("slide","show",function(e,i){var n,o,r=t(this),a={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},s=e.mode,l=e.direction||"left",u="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l,h=e.distance||r["top"===u?"outerHeight":"outerWidth"](!0),c={};t.effects.createPlaceholder(r),n=r.cssClip(),o=r.position()[u],c[u]=(d?-1:1)*h+o,c.clip=r.cssClip(),c.clip[a[l][1]]=c.clip[a[l][0]],"show"===s&&(r.cssClip(c.clip),r.css(u,c[u]),c.clip=n,c[u]=o),r.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;
/*!
 * jQuery UI Effects Transfer 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[i(5),i(7),i(11)],void 0===(r="function"==typeof(n=function(t){var e;return!1!==t.uiBackCompat&&(e=t.effects.define("transfer",function(e,i){t(this).transfer(e,i)})),e})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(348);i(416);var r,a,s;!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);e.default=t}(i(418));var l=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.elem=t,this.mediaduration=0,this.mediaready=!1)}return n(e,[{key:"init",value:function(t){(r=t).listen("player","mediaready",this,this.mediareadyListener),r.listen("player","timeupdate",this,this.timeUpdate),r.listen("annotationviewer","timeupdate",this,this.timeUpdate),r.listen("annotationeditor","addannotation",this,this.addAnnotation),r.listen("annotationeditor","annotationload",this,this.addAnnotation),r.listen("annotationeditor","updateannotation",this,this.updateAnnotation),r.listen("annotationeditor","deleteannotation",this,this.deleteAnnotation),r.listen("annotationeditor","selectannotation",this,this.selectAnnotation),r.listen("annotationeditor","deselectannotation",this,this.deselectAnnotation),r.listen("annotationviewer","edit",this,this.editClickedListener)}},{key:"createTimeline",value:function(e){t("#vis-timeline").length&&t("#vis-timeline").remove(),t(this.elem).append('<div class="loading-icon"><div></div><div></div><div></div><div></div></div>'),this.$timeline=t('<div id="vis-timeline"></div>'),t(this.elem).append(this.$timeline);var i={format:{minorLabels:{millisecond:"mm:ss.SSS",second:"mm:ss",minute:"mm:ss",hour:"HH:mm",weekday:"HH:mm",day:"HH:mm",month:"HH:mm",year:"HH:mm"},majorLabels:function(t,e,i){return""}},min:0,max:e,onInitialDrawComplete:this.hideLoading,editable:{add:!0,updateTime:!0,updateGroup:!1,remove:!0,overrideItems:!1}},n=new o.DataSet([]);a=new o.Timeline(this.$timeline[0],n,i),s=a.addCustomTime(0,"currenttime"),a.setCustomTimeTitle("","currenttime"),a.on("timechange",function(t){"currenttime"==t.id&&r.signal("timeline","timeupdate",t.time.getTime()/1e3)}),a.on("select",function(t){1==t.items.length&&r.signal("timeline","selectitem",t.items[0])}),a.on("click",function(t){null===t.item&&r.signal("timeline","click","")}),n.on("update",function(t,e){r.signal("timeline","itemupdate",{id:e.data[0].id,start:e.data[0].start,end:e.data[0].end})}),r.signal("timeline","loaded",null)}},{key:"mediareadyListener",value:function(t){this.handler.mediaready=!0,this.handler.mediaduration=t}},{key:"editClickedListener",value:function(t){this.handler.mediaready&&this.handler.createTimeline(this.handler.mediaduration)}},{key:"timeUpdate",value:function(t){var e=1e3*t;void 0!==a&&a.setCustomTime(e,s)}},{key:"addAnnotation",value:function(t){a.itemsData.add([{id:t.id,content:t.text,start:t.start,end:t.end}])}},{key:"updateAnnotation",value:function(t){var e={id:t.id,content:t.text,start:t.start,end:t.end};a.itemsData.update([e])}},{key:"deleteAnnotation",value:function(t){a.itemsData.remove(t.id)}},{key:"selectAnnotation",value:function(t){a.setSelection(t.id)}},{key:"deselectAnnotation",value:function(t){a.setSelection([])}},{key:"hideLoading",value:function(){t("#eups-timeline > .loading-icon").hide()}},{key:"IIIFAnnotationsToVisJS",value:function(){}}]),e}();e.default=l}).call(this,i(5))},function(t,e,i){"use strict";(function(t){var n,o,r,a,s=S(i(349)),l=S(i(354)),u=S(i(138)),d=S(i(368)),h=S(i(372)),c=S(i(374)),f=S(i(377)),p=S(i(380)),g=S(i(383)),m=S(i(386)),v=S(i(389)),y=S(i(392)),_=S(i(395)),b=S(i(397)),E=S(i(400)),w=S(i(403)),T=S(i(406));
/**
 * vis.js
 * https://github.com/almende/vis
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 4.21.0
 * @date    2017-10-12
 *
 * @license
 * Copyright (C) 2011-2017 Almende B.V, http://almende.com
 *
 * Vis.js is dual licensed under both
 *
 * * The Apache 2.0 License
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * and
 *
 * * The MIT License
 *   http://opensource.org/licenses/MIT
 *
 * Vis.js may be distributed under either license.
 */function S(t){return t&&t.__esModule?t:{default:t}}a=function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||(0,w.default)(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=123)}([function(t,e,i){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){e.__esModule=!0;var n,o=i(169),r=(n=o)&&n.__esModule?n:{default:n};e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,r.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()},function(t,e,i){var n=s(i(77)),o=s(i(29)),r=s(i(8)),a=s(i(6));function s(t){return t&&t.__esModule?t:{default:t}}var l=i(9),u=i(157);function d(t,e,i,n){var o=!1;!0===n&&(o=null===e[i]&&void 0!==t[i]),o?delete t[i]:t[i]=e[i]}e.isNumber=function(t){return t instanceof Number||"number"==typeof t},e.recursiveDOMDelete=function(t){if(t)for(;!0===t.hasChildNodes();)e.recursiveDOMDelete(t.firstChild),t.removeChild(t.firstChild)},e.giveRange=function(t,e,i,n){if(e==t)return.5;var o=1/(e-t);return Math.max(0,(n-t)*o)},e.isString=function(t){return t instanceof String||"string"==typeof t},e.isDate=function(t){if(t instanceof Date)return!0;if(e.isString(t)){if(h.exec(t))return!0;if(!isNaN(Date.parse(t)))return!0}return!1},e.randomUUID=function(){return u.v4()},e.assignAllKeys=function(t,e){for(var i in t)t.hasOwnProperty(i)&&"object"!==(0,a.default)(t[i])&&(t[i]=e)},e.fillIfDefined=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var o in t)void 0!==i[o]&&(null===i[o]||"object"!==(0,a.default)(i[o])?d(t,i,o,n):"object"===(0,a.default)(t[o])&&e.fillIfDefined(t[o],i[o],n))},e.extend=function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}return t},e.selectiveExtend=function(t,e,i){if(!Array.isArray(t))throw new Error("Array with property names expected as first argument");for(var n=2;n<arguments.length;n++)for(var o=arguments[n],r=0;r<t.length;r++){var a=t[r];o&&o.hasOwnProperty(a)&&(e[a]=o[a])}return e},e.selectiveDeepExtend=function(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r=0;r<t.length;r++){var a=t[r];if(n.hasOwnProperty(a))if(n[a]&&n[a].constructor===Object)void 0===i[a]&&(i[a]={}),i[a].constructor===Object?e.deepExtend(i[a],n[a],!1,o):d(i,n,a,o);else{if(Array.isArray(n[a]))throw new TypeError("Arrays are not supported by deepExtend");d(i,n,a,o)}}return i},e.selectiveNotDeepExtend=function(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r in n)if(n.hasOwnProperty(r)&&-1===t.indexOf(r))if(n[r]&&n[r].constructor===Object)void 0===i[r]&&(i[r]={}),i[r].constructor===Object?e.deepExtend(i[r],n[r]):d(i,n,r,o);else if(Array.isArray(n[r])){i[r]=[];for(var a=0;a<n[r].length;a++)i[r].push(n[r][a])}else d(i,n,r,o);return i},e.deepExtend=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r in i)if(i.hasOwnProperty(r)||!0===n)if(i[r]&&i[r].constructor===Object)void 0===t[r]&&(t[r]={}),t[r].constructor===Object?e.deepExtend(t[r],i[r],n):d(t,i,r,o);else if(Array.isArray(i[r])){t[r]=[];for(var a=0;a<i[r].length;a++)t[r].push(i[r][a])}else d(t,i,r,o);return t},e.equalArray=function(t,e){if(t.length!=e.length)return!1;for(var i=0,n=t.length;i<n;i++)if(t[i]!=e[i])return!1;return!0},e.convert=function(t,i){var n;if(void 0!==t){if(null===t)return null;if(!i)return t;if("string"!=typeof i&&!(i instanceof String))throw new Error("Type must be a string");switch(i){case"boolean":case"Boolean":return Boolean(t);case"number":case"Number":return e.isString(t)&&!isNaN(Date.parse(t))?l(t).valueOf():Number(t.valueOf());case"string":case"String":return String(t);case"Date":if(e.isNumber(t))return new Date(t);if(t instanceof Date)return new Date(t.valueOf());if(l.isMoment(t))return new Date(t.valueOf());if(e.isString(t))return(n=h.exec(t))?new Date(Number(n[1])):l(new Date(t)).toDate();throw new Error("Cannot convert object of type "+e.getType(t)+" to type Date");case"Moment":if(e.isNumber(t))return l(t);if(t instanceof Date)return l(t.valueOf());if(l.isMoment(t))return l(t);if(e.isString(t))return n=h.exec(t),l(n?Number(n[1]):t);throw new Error("Cannot convert object of type "+e.getType(t)+" to type Date");case"ISODate":if(e.isNumber(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(l.isMoment(t))return t.toDate().toISOString();if(e.isString(t))return(n=h.exec(t))?new Date(Number(n[1])).toISOString():l(t).format();throw new Error("Cannot convert object of type "+e.getType(t)+" to type ISODate");case"ASPDate":if(e.isNumber(t))return"/Date("+t+")/";if(t instanceof Date)return"/Date("+t.valueOf()+")/";if(e.isString(t))return"/Date("+((n=h.exec(t))?new Date(Number(n[1])).valueOf():new Date(t).valueOf())+")/";throw new Error("Cannot convert object of type "+e.getType(t)+" to type ASPDate");default:throw new Error('Unknown type "'+i+'"')}}};var h=/^\/?Date\((\-?\d+)/i;e.getType=function(t){var e=void 0===t?"undefined":(0,a.default)(t);return"object"==e?null===t?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":Array.isArray(t)?"Array":t instanceof Date?"Date":"Object":"number"==e?"Number":"boolean"==e?"Boolean":"string"==e?"String":void 0===e?"undefined":e},e.copyAndExtendArray=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(t[n]);return i.push(e),i},e.copyArray=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e},e.getAbsoluteLeft=function(t){return t.getBoundingClientRect().left},e.getAbsoluteRight=function(t){return t.getBoundingClientRect().right},e.getAbsoluteTop=function(t){return t.getBoundingClientRect().top},e.addClassName=function(t,e){var i=t.className.split(" "),n=e.split(" ");i=i.concat(n.filter(function(t){return i.indexOf(t)<0})),t.className=i.join(" ")},e.removeClassName=function(t,e){var i=t.className.split(" "),n=e.split(" ");i=i.filter(function(t){return n.indexOf(t)<0}),t.className=i.join(" ")},e.forEach=function(t,e){var i,n;if(Array.isArray(t))for(i=0,n=t.length;i<n;i++)e(t[i],i,t);else for(i in t)t.hasOwnProperty(i)&&e(t[i],i,t)},e.toArray=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e},e.updateProperty=function(t,e,i){return t[e]!==i&&(t[e]=i,!0)},e.throttle=function(t){var e=!1;return function(){e||(e=!0,requestAnimationFrame(function(){e=!1,t()}))}},e.addEventListener=function(t,e,i,n){t.addEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&navigator.userAgent.indexOf("Firefox")>=0&&(e="DOMMouseScroll"),t.addEventListener(e,i,n)):t.attachEvent("on"+e,i)},e.removeEventListener=function(t,e,i,n){t.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&navigator.userAgent.indexOf("Firefox")>=0&&(e="DOMMouseScroll"),t.removeEventListener(e,i,n)):t.detachEvent("on"+e,i)},e.preventDefault=function(t){t||(t=window.event),t.preventDefault?t.preventDefault():t.returnValue=!1},e.getTarget=function(t){var e;return t||(t=window.event),t.target?e=t.target:t.srcElement&&(e=t.srcElement),null!=e.nodeType&&3==e.nodeType&&(e=e.parentNode),e},e.hasParent=function(t,e){for(var i=t;i;){if(i===e)return!0;i=i.parentNode}return!1},e.option={},e.option.asBoolean=function(t,e){return"function"==typeof t&&(t=t()),null!=t?0!=t:e||null},e.option.asNumber=function(t,e){return"function"==typeof t&&(t=t()),null!=t?Number(t)||e||null:e||null},e.option.asString=function(t,e){return"function"==typeof t&&(t=t()),null!=t?String(t):e||null},e.option.asSize=function(t,i){return"function"==typeof t&&(t=t()),e.isString(t)?t:e.isNumber(t)?t+"px":i||null},e.option.asElement=function(t,e){return"function"==typeof t&&(t=t()),t||e||null},e.hexToRGB=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,n){return e+e+i+i+n+n});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},e.overrideOpacity=function(t,i){var n;return-1!=t.indexOf("rgba")?t:-1!=t.indexOf("rgb")?"rgba("+(n=t.substr(t.indexOf("(")+1).replace(")","").split(","))[0]+","+n[1]+","+n[2]+","+i+")":null==(n=e.hexToRGB(t))?t:"rgba("+n.r+","+n.g+","+n.b+","+i+")"},e.RGBToHex=function(t,e,i){return"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},e.parseColor=function(t){var i;if(!0===e.isString(t)){if(!0===e.isValidRGB(t)){var n=t.substr(4).substr(0,t.length-5).split(",").map(function(t){return parseInt(t)});t=e.RGBToHex(n[0],n[1],n[2])}if(!0===e.isValidHex(t)){var o=e.hexToHSV(t),r={h:o.h,s:.8*o.s,v:Math.min(1,1.02*o.v)},a={h:o.h,s:Math.min(1,1.25*o.s),v:.8*o.v},s=e.HSVToHex(a.h,a.s,a.v),l=e.HSVToHex(r.h,r.s,r.v);i={background:t,border:s,highlight:{background:l,border:s},hover:{background:l,border:s}}}else i={background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else(i={}).background=t.background||void 0,i.border=t.border||void 0,e.isString(t.highlight)?i.highlight={border:t.highlight,background:t.highlight}:(i.highlight={},i.highlight.background=t.highlight&&t.highlight.background||void 0,i.highlight.border=t.highlight&&t.highlight.border||void 0),e.isString(t.hover)?i.hover={border:t.hover,background:t.hover}:(i.hover={},i.hover.background=t.hover&&t.hover.background||void 0,i.hover.border=t.hover&&t.hover.border||void 0);return i},e.RGBToHSV=function(t,e,i){t/=255,e/=255,i/=255;var n=Math.min(t,Math.min(e,i)),o=Math.max(t,Math.max(e,i));return n==o?{h:0,s:0,v:n}:{h:60*((t==n?3:i==n?1:5)-(t==n?e-i:i==n?t-e:i-t)/(o-n))/360,s:(o-n)/o,v:o}};var c=function(t){var e={};return t.split(";").forEach(function(t){if(""!=t.trim()){var i=t.split(":"),n=i[0].trim(),o=i[1].trim();e[n]=o}}),e},f=function(t){return(0,r.default)(t).map(function(e){return e+": "+t[e]}).join("; ")};e.addCssText=function(t,i){var n=c(t.style.cssText),o=c(i),r=e.extend(n,o);t.style.cssText=f(r)},e.removeCssText=function(t,e){var i=c(t.style.cssText),n=c(e);for(var o in n)n.hasOwnProperty(o)&&delete i[o];t.style.cssText=f(i)},e.HSVToRGB=function(t,e,i){var n,o,r,a=Math.floor(6*t),s=6*t-a,l=i*(1-e),u=i*(1-s*e),d=i*(1-(1-s)*e);switch(a%6){case 0:n=i,o=d,r=l;break;case 1:n=u,o=i,r=l;break;case 2:n=l,o=i,r=d;break;case 3:n=l,o=u,r=i;break;case 4:n=d,o=l,r=i;break;case 5:n=i,o=l,r=u}return{r:Math.floor(255*n),g:Math.floor(255*o),b:Math.floor(255*r)}},e.HSVToHex=function(t,i,n){var o=e.HSVToRGB(t,i,n);return e.RGBToHex(o.r,o.g,o.b)},e.hexToHSV=function(t){var i=e.hexToRGB(t);return e.RGBToHSV(i.r,i.g,i.b)},e.isValidHex=function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},e.isValidRGB=function(t){return t=t.replace(" ",""),/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(t)},e.isValidRGBA=function(t){return t=t.replace(" ",""),/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(.{1,3})\)/i.test(t)},e.selectiveBridgeObject=function(t,i){if(null!==i&&"object"===(void 0===i?"undefined":(0,a.default)(i))){for(var n=(0,o.default)(i),r=0;r<t.length;r++)i.hasOwnProperty(t[r])&&"object"==(0,a.default)(i[t[r]])&&(n[t[r]]=e.bridgeObject(i[t[r]]));return n}return null},e.bridgeObject=function(t){if(null!==t&&"object"===(void 0===t?"undefined":(0,a.default)(t))){var i=(0,o.default)(t);if(t instanceof Element)i=t;else for(var n in i=(0,o.default)(t),t)t.hasOwnProperty(n)&&"object"==(0,a.default)(t[n])&&(i[n]=e.bridgeObject(t[n]));return i}return null},e.insertSort=function(t,e){for(var i=0;i<t.length;i++){for(var n=t[i],o=i;o>0&&e(n,t[o-1])<0;o--)t[o]=t[o-1];t[o]=n}return t},e.mergeOptions=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=function(t){return null!=t},s=function(t){return null!==t&&"object"===(void 0===t?"undefined":(0,a.default)(t))},l=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!r(i))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");var u=function(t,e,i){s(t[i])||(t[i]={});var n=e[i],o=t[i];for(var r in n)n.hasOwnProperty(r)&&(o[r]=n[r])},d=e[i],h=s(n)&&!l(n),c=h?n[i]:void 0,f=c?c.enabled:void 0;if(void 0!==d){if("boolean"==typeof d)return s(t[i])||(t[i]={}),void(t[i].enabled=d);if(null===d&&!s(t[i])){if(!r(c))return;t[i]=(0,o.default)(c)}if(s(d)){var p=!0;void 0!==d.enabled?p=d.enabled:void 0!==f&&(p=c.enabled),u(t,e,i),t[i].enabled=p}}},e.binarySearchCustom=function(t,e,i,n){for(var o=0,r=0,a=t.length-1;r<=a&&o<1e4;){var s=Math.floor((r+a)/2),l=t[s],u=e(void 0===n?l[i]:l[i][n]);if(0==u)return s;-1==u?r=s+1:a=s-1,o++}return-1},e.binarySearchValue=function(t,e,i,n,o){var r,a,s,l,u=0,d=0,h=t.length-1;for(o=null!=o?o:function(t,e){return t==e?0:t<e?-1:1};d<=h&&u<1e4;){if(l=Math.floor(.5*(h+d)),r=t[Math.max(0,l-1)][i],a=t[l][i],s=t[Math.min(t.length-1,l+1)][i],0==o(a,e))return l;if(o(r,e)<0&&o(a,e)>0)return"before"==n?Math.max(0,l-1):l;if(o(a,e)<0&&o(s,e)>0)return"before"==n?l:Math.min(t.length-1,l+1);o(a,e)<0?d=l+1:h=l-1,u++}return-1},e.easingFunctions={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},e.getScrollBarWidth=function(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;return i==n&&(n=e.clientWidth),document.body.removeChild(e),i-n},e.topMost=function(t,e){var i=void 0;Array.isArray(e)||(e=[e]);var o=!0,r=!1,a=void 0;try{for(var s,l=(0,n.default)(t);!(o=(s=l.next()).done);o=!0){var u=s.value;if(u){i=u[e[0]];for(var d=1;d<e.length;d++)i&&(i=i[e[d]]);if(void 0!==i)break}}}catch(t){r=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}return i}},function(t,e,i){t.exports={default:i(194),__esModule:!0}},function(t,e,i){e.__esModule=!0;var n,o=i(6),r=(n=o)&&n.__esModule?n:{default:n};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},function(t,e,i){e.__esModule=!0;var n=a(i(196)),o=a(i(29)),r=a(i(6));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,r.default)(e)));t.prototype=(0,o.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(n.default?(0,n.default)(t,e):t.__proto__=e)}},function(t,e,i){e.__esModule=!0;var n=a(i(142)),o=a(i(144)),r="function"==typeof o.default&&"symbol"===(0,T.default)(n.default)?function(t){return void 0===t?"undefined":(0,T.default)(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":(0,T.default)(t)};function a(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof o.default&&"symbol"===r(n.default)?function(t){return void 0===t?"undefined":r(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":r(t)}},function(t,e){var i=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=i)},function(t,e,i){t.exports={default:i(140),__esModule:!0}},function(t,e,i){t.exports="undefined"!=typeof window&&window.moment||i(154)},function(t,e,i){if("undefined"!=typeof window){var n=i(175),o=window.Hammer||i(176);t.exports=n(o,{preventDefault:"mouse"})}else t.exports=function(){return{on:t=function(){},off:t,destroy:t,emit:t,get:function(e){return{set:t}}};var t}},function(t,e,i){var n=a(i(19)),o=a(i(6)),r=a(i(8));function a(t){return t&&t.__esModule?t:{default:t}}var s=i(2),l=i(43);function u(t,e){if(t&&!Array.isArray(t)&&(e=t,t=null),this._options=e||{},this._data={},this.length=0,this._fieldId=this._options.fieldId||"id",this._type={},this._options.type)for(var i=(0,r.default)(this._options.type),n=0,o=i.length;n<o;n++){var a=i[n],s=this._options.type[a];this._type[a]="Date"==s||"ISODate"==s||"ASPDate"==s?"Date":s}this._subscribers={},t&&this.add(t),this.setOptions(e)}u.prototype.setOptions=function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),delete this._queue):(this._queue||(this._queue=l.extend(this,{replace:["add","update","remove"]})),"object"===(0,o.default)(t.queue)&&this._queue.setOptions(t.queue)))},u.prototype.on=function(t,e){var i=this._subscribers[t];i||(i=[],this._subscribers[t]=i),i.push({callback:e})},u.prototype.off=function(t,e){var i=this._subscribers[t];i&&(this._subscribers[t]=i.filter(function(t){return t.callback!=e}))},u.prototype._trigger=function(t,e,i){if("*"==t)throw new Error("Cannot trigger event *");var n=[];t in this._subscribers&&(n=n.concat(this._subscribers[t])),"*"in this._subscribers&&(n=n.concat(this._subscribers["*"]));for(var o=0,r=n.length;o<r;o++){var a=n[o];a.callback&&a.callback(t,e,i||null)}},u.prototype.add=function(t,e){var i,n=[];if(Array.isArray(t))for(var r=0,a=t.length;r<a;r++)i=this._addItem(t[r]),n.push(i);else{if(!t||"object"!==(void 0===t?"undefined":(0,o.default)(t)))throw new Error("Unknown dataType");i=this._addItem(t),n.push(i)}return n.length&&this._trigger("add",{items:n},e),n},u.prototype.update=function(t,e){var i=[],n=[],r=[],a=[],l=this,u=l._fieldId,d=function(t){var e=t[u];if(l._data[e]){var o=s.extend({},l._data[e]);e=l._updateItem(t),n.push(e),a.push(t),r.push(o)}else e=l._addItem(t),i.push(e)};if(Array.isArray(t))for(var h=0,c=t.length;h<c;h++)t[h]&&"object"===(0,o.default)(t[h])?d(t[h]):console.warn("Ignoring input item, which is not an object at index "+h);else{if(!t||"object"!==(void 0===t?"undefined":(0,o.default)(t)))throw new Error("Unknown dataType");d(t)}if(i.length&&this._trigger("add",{items:i},e),n.length){var f={items:n,oldData:r,data:a};this._trigger("update",f,e)}return i.concat(n)},u.prototype.get=function(t){var e,i,n,o,a=this,l=s.getType(arguments[0]);if("String"==l||"Number"==l?(e=arguments[0],n=arguments[1]):"Array"==l?(i=arguments[0],n=arguments[1]):n=arguments[0],n&&n.returnType){var u=["Array","Object"];o=-1==u.indexOf(n.returnType)?"Array":n.returnType}else o="Array";var d,h,c,f,p,g=n&&n.type||this._options.type,m=n&&n.filter,v=[];if(null!=e)(d=a._getItem(e,g))&&m&&!m(d)&&(d=null);else if(null!=i)for(f=0,p=i.length;f<p;f++)d=a._getItem(i[f],g),m&&!m(d)||v.push(d);else for(f=0,p=(h=(0,r.default)(this._data)).length;f<p;f++)c=h[f],d=a._getItem(c,g),m&&!m(d)||v.push(d);if(n&&n.order&&null==e&&this._sort(v,n.order),n&&n.fields){var y=n.fields;if(null!=e)d=this._filterFields(d,y);else for(f=0,p=v.length;f<p;f++)v[f]=this._filterFields(v[f],y)}if("Object"==o){var _,b={};for(f=0,p=v.length;f<p;f++)b[(_=v[f]).id]=_;return b}return null!=e?d:v},u.prototype.getIds=function(t){var e,i,n,o,a,s=this._data,l=t&&t.filter,u=t&&t.order,d=t&&t.type||this._options.type,h=(0,r.default)(s),c=[];if(l)if(u){for(a=[],e=0,i=h.length;e<i;e++)n=h[e],l(o=this._getItem(n,d))&&a.push(o);for(this._sort(a,u),e=0,i=a.length;e<i;e++)c.push(a[e][this._fieldId])}else for(e=0,i=h.length;e<i;e++)n=h[e],l(o=this._getItem(n,d))&&c.push(o[this._fieldId]);else if(u){for(a=[],e=0,i=h.length;e<i;e++)n=h[e],a.push(s[n]);for(this._sort(a,u),e=0,i=a.length;e<i;e++)c.push(a[e][this._fieldId])}else for(e=0,i=h.length;e<i;e++)o=s[n=h[e]],c.push(o[this._fieldId]);return c},u.prototype.getDataSet=function(){return this},u.prototype.forEach=function(t,e){var i,n,o,a,s=e&&e.filter,l=e&&e.type||this._options.type,u=this._data,d=(0,r.default)(u);if(e&&e.order){var h=this.get(e);for(i=0,n=h.length;i<n;i++)t(o=h[i],a=o[this._fieldId])}else for(i=0,n=d.length;i<n;i++)a=d[i],o=this._getItem(a,l),s&&!s(o)||t(o,a)},u.prototype.map=function(t,e){var i,n,o,a,s=e&&e.filter,l=e&&e.type||this._options.type,u=[],d=this._data,h=(0,r.default)(d);for(i=0,n=h.length;i<n;i++)o=h[i],a=this._getItem(o,l),s&&!s(a)||u.push(t(a,o));return e&&e.order&&this._sort(u,e.order),u},u.prototype._filterFields=function(t,e){if(!t)return t;var i,n,o={},a=(0,r.default)(t),s=a.length;if(Array.isArray(e))for(i=0;i<s;i++)n=a[i],-1!=e.indexOf(n)&&(o[n]=t[n]);else for(i=0;i<s;i++)n=a[i],e.hasOwnProperty(n)&&(o[e[n]]=t[n]);return o},u.prototype._sort=function(t,e){if(s.isString(e)){var i=e;t.sort(function(t,e){var n=t[i],o=e[i];return n>o?1:n<o?-1:0})}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");t.sort(e)}},u.prototype.remove=function(t,e){var i,n,o,r,a,s=[],l=[];for(n=0,o=(i=Array.isArray(t)?t:[t]).length;n<o;n++)(a=this._remove(i[n]))&&null!=(r=a[this._fieldId])&&(s.push(r),l.push(a));return s.length&&this._trigger("remove",{items:s,oldData:l},e),s},u.prototype._remove=function(t){var e,i;return s.isNumber(t)||s.isString(t)?i=t:t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&(i=t[this._fieldId]),void 0!==i&&this._data[i]?(e=this._data[i],delete this._data[i],this.length--,e):null},u.prototype.clear=function(t){var e,i,n=(0,r.default)(this._data),o=[];for(e=0,i=n.length;e<i;e++)o.push(this._data[n[e]]);return this._data={},this.length=0,this._trigger("remove",{items:n,oldData:o},t),n},u.prototype.max=function(t){var e,i,n=this._data,o=(0,r.default)(n),a=null,s=null;for(e=0,i=o.length;e<i;e++){var l=n[o[e]],u=l[t];null!=u&&(!a||u>s)&&(a=l,s=u)}return a},u.prototype.min=function(t){var e,i,n=this._data,o=(0,r.default)(n),a=null,s=null;for(e=0,i=o.length;e<i;e++){var l=n[o[e]],u=l[t];null!=u&&(!a||u<s)&&(a=l,s=u)}return a},u.prototype.distinct=function(t){var e,i,n,o=this._data,a=(0,r.default)(o),l=[],u=this._options.type&&this._options.type[t]||null,d=0;for(e=0,n=a.length;e<n;e++){var h=o[a[e]][t],c=!1;for(i=0;i<d;i++)if(l[i]==h){c=!0;break}c||void 0===h||(l[d]=h,d++)}if(u)for(e=0,n=l.length;e<n;e++)l[e]=s.convert(l[e],u);return l},u.prototype._addItem=function(t){var e=t[this._fieldId];if(null!=e){if(this._data[e])throw new Error("Cannot add item: item with id "+e+" already exists")}else e=s.randomUUID(),t[this._fieldId]=e;var i,n,o={},a=(0,r.default)(t);for(i=0,n=a.length;i<n;i++){var l=a[i],u=this._type[l];o[l]=s.convert(t[l],u)}return this._data[e]=o,this.length++,e},u.prototype._getItem=function(t,e){var i,n,o,a,l=this._data[t];if(!l)return null;var u={},d=(0,r.default)(l);if(e)for(o=0,a=d.length;o<a;o++)n=l[i=d[o]],u[i]=s.convert(n,e[i]);else for(o=0,a=d.length;o<a;o++)n=l[i=d[o]],u[i]=n;return u[this._fieldId]||(u[this._fieldId]=l.id),u},u.prototype._updateItem=function(t){var e=t[this._fieldId];if(null==e)throw new Error("Cannot update item: item has no id (item: "+(0,n.default)(t)+")");var i=this._data[e];if(!i)throw new Error("Cannot update item: no item with id "+e+" found");for(var o=(0,r.default)(t),a=0,l=o.length;a<l;a++){var u=o[a],d=this._type[u];i[u]=s.convert(t[u],d)}return e},t.exports=u},function(t,e,i){var n,o=i(8),r=(n=o)&&n.__esModule?n:{default:n},a=i(2),s=i(11);function l(t,e){this._data=null,this._ids={},this.length=0,this._options=e||{},this._fieldId="id",this._subscribers={};var i=this;this.listener=function(){i._onEvent.apply(i,arguments)},this.setData(t)}l.prototype.setData=function(t){var e,i,n,o,r;if(this._data){for(this._data.off&&this._data.off("*",this.listener),r=[],n=0,o=(e=this._data.getIds({filter:this._options&&this._options.filter})).length;n<o;n++)r.push(this._data._data[e[n]]);this._ids={},this.length=0,this._trigger("remove",{items:e,oldData:r})}if(this._data=t,this._data){for(this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id",n=0,o=(e=this._data.getIds({filter:this._options&&this._options.filter})).length;n<o;n++)i=e[n],this._ids[i]=!0;this.length=e.length,this._trigger("add",{items:e}),this._data.on&&this._data.on("*",this.listener)}},l.prototype.refresh=function(){var t,e,i,n=this._data.getIds({filter:this._options&&this._options.filter}),o=(0,r.default)(this._ids),a={},s=[],l=[],u=[];for(e=0,i=n.length;e<i;e++)a[t=n[e]]=!0,this._ids[t]||(s.push(t),this._ids[t]=!0);for(e=0,i=o.length;e<i;e++)a[t=o[e]]||(l.push(t),u.push(this._data._data[t]),delete this._ids[t]);this.length+=s.length-l.length,s.length&&this._trigger("add",{items:s}),l.length&&this._trigger("remove",{items:l,oldData:u})},l.prototype.get=function(t){var e,i,n,o=this,r=a.getType(arguments[0]);"String"==r||"Number"==r||"Array"==r?(e=arguments[0],i=arguments[1],n=arguments[2]):(i=arguments[0],n=arguments[1]);var s=a.extend({},this._options,i);this._options.filter&&i&&i.filter&&(s.filter=function(t){return o._options.filter(t)&&i.filter(t)});var l=[];return null!=e&&l.push(e),l.push(s),l.push(n),this._data&&this._data.get.apply(this._data,l)},l.prototype.getIds=function(t){var e;if(this._data){var i,n=this._options.filter;i=t&&t.filter?n?function(e){return n(e)&&t.filter(e)}:t.filter:n,e=this._data.getIds({filter:i,order:t&&t.order})}else e=[];return e},l.prototype.map=function(t,e){var i=[];if(this._data){var n,o=this._options.filter;n=e&&e.filter?o?function(t){return o(t)&&e.filter(t)}:e.filter:o,i=this._data.map(t,{filter:n,order:e&&e.order})}else i=[];return i},l.prototype.getDataSet=function(){for(var t=this;t instanceof l;)t=t._data;return t||null},l.prototype._onEvent=function(t,e,i){var n,o,r,a=e&&e.items,s=[],l=[],u=[],d=[],h=[],c=[];if(a&&this._data){switch(t){case"add":for(n=0,o=a.length;n<o;n++)r=a[n],this.get(r)&&(this._ids[r]=!0,s.push(r));break;case"update":for(n=0,o=a.length;n<o;n++)r=a[n],this.get(r)?this._ids[r]?(l.push(r),h.push(e.data[n]),d.push(e.oldData[n])):(this._ids[r]=!0,s.push(r)):this._ids[r]&&(delete this._ids[r],u.push(r),c.push(e.oldData[n]));break;case"remove":for(n=0,o=a.length;n<o;n++)r=a[n],this._ids[r]&&(delete this._ids[r],u.push(r),c.push(e.oldData[n]))}this.length+=s.length-u.length,s.length&&this._trigger("add",{items:s},i),l.length&&this._trigger("update",{items:l,oldData:d,data:h},i),u.length&&this._trigger("remove",{items:u,oldData:c},i)}},l.prototype.on=s.prototype.on,l.prototype.off=s.prototype.off,l.prototype._trigger=s.prototype._trigger,l.prototype.subscribe=l.prototype.on,l.prototype.unsubscribe=l.prototype.off,t.exports=l},function(t,e,i){var n=i(57)("wks"),o=i(40),r=i(18).Symbol,a="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=a&&r[t]||(a?r:o)("Symbol."+t))}).store=n},function(t,e,i){e.prepareElements=function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e].redundant=t[e].used,t[e].used=[])},e.cleanupElements=function(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e].redundant){for(var i=0;i<t[e].redundant.length;i++)t[e].redundant[i].parentNode.removeChild(t[e].redundant[i]);t[e].redundant=[]}},e.resetElements=function(t){e.prepareElements(t),e.cleanupElements(t),e.prepareElements(t)},e.getSVGElement=function(t,e,i){var n;return e.hasOwnProperty(t)?e[t].redundant.length>0?(n=e[t].redundant[0],e[t].redundant.shift()):(n=document.createElementNS("http://www.w3.org/2000/svg",t),i.appendChild(n)):(n=document.createElementNS("http://www.w3.org/2000/svg",t),e[t]={used:[],redundant:[]},i.appendChild(n)),e[t].used.push(n),n},e.getDOMElement=function(t,e,i,n){var o;return e.hasOwnProperty(t)?e[t].redundant.length>0?(o=e[t].redundant[0],e[t].redundant.shift()):(o=document.createElement(t),void 0!==n?i.insertBefore(o,n):i.appendChild(o)):(o=document.createElement(t),e[t]={used:[],redundant:[]},void 0!==n?i.insertBefore(o,n):i.appendChild(o)),e[t].used.push(o),o},e.drawPoint=function(t,i,n,o,r,a){var s;if("circle"==n.style?((s=e.getSVGElement("circle",o,r)).setAttributeNS(null,"cx",t),s.setAttributeNS(null,"cy",i),s.setAttributeNS(null,"r",.5*n.size)):((s=e.getSVGElement("rect",o,r)).setAttributeNS(null,"x",t-.5*n.size),s.setAttributeNS(null,"y",i-.5*n.size),s.setAttributeNS(null,"width",n.size),s.setAttributeNS(null,"height",n.size)),void 0!==n.styles&&s.setAttributeNS(null,"style",n.styles),s.setAttributeNS(null,"class",n.className+" vis-point"),a){var l=e.getSVGElement("text",o,r);a.xOffset&&(t+=a.xOffset),a.yOffset&&(i+=a.yOffset),a.content&&(l.textContent=a.content),a.className&&l.setAttributeNS(null,"class",a.className+" vis-label"),l.setAttributeNS(null,"x",t),l.setAttributeNS(null,"y",i)}return s},e.drawBar=function(t,i,n,o,r,a,s,l){if(0!=o){o<0&&(i-=o*=-1);var u=e.getSVGElement("rect",a,s);u.setAttributeNS(null,"x",t-.5*n),u.setAttributeNS(null,"y",i),u.setAttributeNS(null,"width",n),u.setAttributeNS(null,"height",o),u.setAttributeNS(null,"class",r),l&&u.setAttributeNS(null,"style",l)}}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.printStyle=void 0;var n=l(i(19)),o=l(i(6)),r=l(i(8)),a=l(i(0)),s=l(i(1));function l(t){return t&&t.__esModule?t:{default:t}}var u=i(2),d=!1,h=void 0,c="background: #FFeeee; color: #dd0000",f=function(){function t(){(0,a.default)(this,t)}return(0,s.default)(t,null,[{key:"validate",value:function(e,i,n){d=!1,h=i;var o=i;return void 0!==n&&(o=i[n]),t.parse(e,o,[]),d}},{key:"parse",value:function(e,i,n){for(var o in e)e.hasOwnProperty(o)&&t.check(o,e,i,n)}},{key:"check",value:function(e,i,n,o){if(void 0!==n[e]||void 0!==n.__any__){var r=e,a=!0;void 0===n[e]&&void 0!==n.__any__&&(r="__any__",a="object"===t.getType(i[e]));var s=n[r];a&&void 0!==s.__type__&&(s=s.__type__),t.checkFields(e,i,n,r,s,o)}else t.getSuggestion(e,n,o)}},{key:"checkFields",value:function(e,i,n,o,a,s){var l=function(i){console.log("%c"+i+t.printLocation(s,e),c)},h=t.getType(i[e]),f=a[h];void 0!==f?"array"===t.getType(f)&&-1===f.indexOf(i[e])?(l('Invalid option detected in "'+e+'". Allowed values are:'+t.print(f)+' not "'+i[e]+'". '),d=!0):"object"===h&&"__any__"!==o&&(s=u.copyAndExtendArray(s,e),t.parse(i[e],n[o],s)):void 0===a.any&&(l('Invalid type received for "'+e+'". Expected: '+t.print((0,r.default)(a))+". Received ["+h+'] "'+i[e]+'"'),d=!0)}},{key:"getType",value:function(t){var e=void 0===t?"undefined":(0,o.default)(t);return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Array.isArray(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}},{key:"getSuggestion",value:function(e,i,n){var o=t.findInOptions(e,i,n,!1),a=t.findInOptions(e,h,[],!0),s=void 0;s=void 0!==o.indexMatch?" in "+t.printLocation(o.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+o.indexMatch+'"?\n\n':a.distance<=4&&o.distance>a.distance?" in "+t.printLocation(o.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(a.path,a.closestMatch,""):o.distance<=8?'. Did you mean "'+o.closestMatch+'"?'+t.printLocation(o.path,e):". Did you mean one of these: "+t.print((0,r.default)(i))+t.printLocation(n,e),console.log('%cUnknown option detected: "'+e+'"'+s,c),d=!0}},{key:"findInOptions",value:function(e,i,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=1e9,a="",s=[],l=e.toLowerCase(),d=void 0;for(var h in i){var c=void 0;if(void 0!==i[h].__type__&&!0===o){var f=t.findInOptions(e,i[h],u.copyAndExtendArray(n,h));r>f.distance&&(a=f.closestMatch,s=f.path,r=f.distance,d=f.indexMatch)}else-1!==h.toLowerCase().indexOf(l)&&(d=h),r>(c=t.levenshteinDistance(e,h))&&(a=h,s=u.copyArray(n),r=c)}return{closestMatch:a,path:s,distance:r,indexMatch:d}}},{key:"printLocation",value:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n",n="\n\n"+i+"options = {\n",o=0;o<t.length;o++){for(var r=0;r<o+1;r++)n+="  ";n+=t[o]+": {\n"}for(var a=0;a<t.length+1;a++)n+="  ";n+=e+"\n";for(var s=0;s<t.length+1;s++){for(var l=0;l<t.length-s;l++)n+="  ";n+="}\n"}return n+"\n\n"}},{key:"print",value:function(t){return(0,n.default)(t).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var i,n,o=[];for(i=0;i<=e.length;i++)o[i]=[i];for(n=0;n<=t.length;n++)o[0][n]=n;for(i=1;i<=e.length;i++)for(n=1;n<=t.length;n++)e.charAt(i-1)==t.charAt(n-1)?o[i][n]=o[i-1][n-1]:o[i][n]=Math.min(o[i-1][n-1]+1,Math.min(o[i][n-1]+1,o[i-1][n]+1));return o[e.length][t.length]}}]),t}();e.default=f,e.printStyle=c},function(t,e,i){var n=i(2);function o(t,e){this.options=null,this.props=null}o.prototype.setOptions=function(t){t&&n.extend(this.options,t)},o.prototype.redraw=function(){return!1},o.prototype.destroy=function(){},o.prototype._isResized=function(){var t=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,t},t.exports=o},function(t,e,i){var n=i(18),o=i(7),r=i(80),a=i(26),s=function t(e,i,s){var l,u,d,h=e&t.F,c=e&t.G,f=e&t.S,p=e&t.P,g=e&t.B,m=e&t.W,v=c?o:o[i]||(o[i]={}),y=v.prototype,_=c?n:f?n[i]:(n[i]||{}).prototype;for(l in c&&(s=i),s)(u=!h&&_&&void 0!==_[l])&&l in v||(d=u?_[l]:s[l],v[l]=c&&"function"!=typeof _[l]?s[l]:g&&u?r(d,n):m&&_[l]==d?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(d):p&&"function"==typeof d?r(Function.call,d):d,p&&((v.virtual||(v.virtual={}))[l]=d,e&t.R&&y&&!y[l]&&a(y,l,d)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){t.exports={default:i(160),__esModule:!0}},function(t,e,i){var n=i(27),o=i(81),r=i(53),a=w.default;e.f=i(21)?w.default:function(t,e,i){if(n(t),e=r(e,!0),n(i),o)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){t.exports=!i(28)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(6)),o=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i,n){(0,o.default)(this,t),this.body=i,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return(0,r.default)(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&("object"==(0,n.default)(this.options.margin)?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,e){var i=this.options.borderWidth;return this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}},{key:"enableShadow",value:function(t,e){e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,e){if(!1!==e.borderDashes)if(void 0!==t.setLineDash){var i=e.borderDashes;!0===i&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,e){!1!==e.borderDashes&&(void 0!==t.setLineDash?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1))}},{key:"needsRefresh",value:function(t,e){return!0===this.refreshNeeded?(this.refreshNeeded=!1,!0):void 0===this.width||this.labelModule.differentState(t,e)}},{key:"initContextForDraw",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,i),t.strokeStyle=e.borderColor,t.fillStyle=e.color}},{key:"performStroke",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.save(),i>0&&(this.enableBorderDashes(t,e),t.stroke(),this.disableBorderDashes(t,e)),t.restore()}},{key:"performFill",value:function(t,e){this.enableShadow(t,e),t.fill(),this.disableShadow(t,e),this.performStroke(t,e)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,e,i,n,o){void 0!==i&&this.resize(i,n,o),this.left=t-this.width/2,this.top=e-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,e,i,n,o){this._updateBoundingBox(t,e,i,n,o)}},{key:"getDimensionsFromLabel",value:function(t,e,i){this.textSize=this.labelModule.getTextSize(t,e,i);var n=this.textSize.width,o=this.textSize.height;return 0===n&&(n=14,o=14),{width:n,height:o}}}]),t}();e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{size:this.options.size};if(this.needsRefresh(e,i)){this.labelModule.getTextSize(t,e,i);var o=2*n.size;this.width=o,this.height=o,this.radius=.5*this.width}}},{key:"_drawShape",value:function(t,e,i,n,o,r,a,s){if(this.resize(t,r,a,s),this.left=n-this.width/2,this.top=o-this.height/2,this.initContextForDraw(t,s),t[e](n,o,s.size),this.performFill(t,s),void 0!==this.options.label){this.labelModule.calculateLabelSize(t,r,a,n,o,"hanging");var l=o+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(t,n,l,r,a,"hanging")}this.updateBoundingBox(n,o)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),e}(l(i(23)).default);e.default=u},function(t,e,i){var n=i(78),o=i(51);t.exports=function(t){return n(o(t))}},function(t,e,i){var n=i(20),o=i(39);t.exports=i(21)?function(t,e,i){return n.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(32);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){t.exports={default:i(138),__esModule:!0}},function(t,e,i){e.__esModule=!0;var n=r(i(188)),o=r(i(77));function r(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(Array.isArray(t))return t;if((0,n.default)(Object(t)))return function(t,e){var i=[],n=!0,r=!1,a=void 0;try{for(var s,l=(0,o.default)(t);!(n=(s=l.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{!n&&l.return&&l.return()}finally{if(r)throw a}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){t.exports={}},function(t,e){t.exports=function(t){return"object"===(void 0===t?"undefined":(0,T.default)(t))?null!==t:"function"==typeof t}},function(t,e,i){var n=i(84),o=i(58);t.exports=E.default||function(t){return n(t,o)}},function(t,e,i){function n(t,e,i){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0,this.z=void 0!==i?i:0}n.subtract=function(t,e){var i=new n;return i.x=t.x-e.x,i.y=t.y-e.y,i.z=t.z-e.z,i},n.add=function(t,e){var i=new n;return i.x=t.x+e.x,i.y=t.y+e.y,i.z=t.z+e.z,i},n.avg=function(t,e){return new n((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2)},n.crossProduct=function(t,e){var i=new n;return i.x=t.y*e.z-t.z*e.y,i.y=t.z*e.x-t.x*e.z,i.z=t.x*e.y-t.y*e.x,i},n.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.exports=n},function(t,e,i){var n,o,r;o=[],void 0===(r="function"==typeof(n=function(){return function(t){var e,i=t&&t.preventDefault||!1,n=t&&t.container||window,o={},r={keydown:{},keyup:{}},a={};for(e=97;e<=122;e++)a[String.fromCharCode(e)]={code:e-97+65,shift:!1};for(e=65;e<=90;e++)a[String.fromCharCode(e)]={code:e,shift:!0};for(e=0;e<=9;e++)a[""+e]={code:48+e,shift:!1};for(e=1;e<=12;e++)a["F"+e]={code:111+e,shift:!1};for(e=0;e<=9;e++)a["num"+e]={code:96+e,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a.delete={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var s=function(t){u(t,"keydown")},l=function(t){u(t,"keyup")},u=function(t,e){if(void 0!==r[e][t.keyCode]){for(var n=r[e][t.keyCode],o=0;o<n.length;o++)void 0===n[o].shift?n[o].fn(t):1==n[o].shift&&1==t.shiftKey?n[o].fn(t):0==n[o].shift&&0==t.shiftKey&&n[o].fn(t);1==i&&t.preventDefault()}};return o.bind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===a[t])throw new Error("unsupported key: "+t);void 0===r[i][a[t].code]&&(r[i][a[t].code]=[]),r[i][a[t].code].push({fn:e,shift:a[t].shift})},o.bindAll=function(t,e){for(var i in void 0===e&&(e="keydown"),a)a.hasOwnProperty(i)&&o.bind(i,t,e)},o.getKey=function(t){for(var e in a)if(a.hasOwnProperty(e)){if(1==t.shiftKey&&1==a[e].shift&&t.keyCode==a[e].code)return e;if(0==t.shiftKey&&0==a[e].shift&&t.keyCode==a[e].code)return e;if(t.keyCode==a[e].code&&"shift"==e)return e}return"unknown key, currently not supported"},o.unbind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===a[t])throw new Error("unsupported key: "+t);if(void 0!==e){var n=[],o=r[i][a[t].code];if(void 0!==o)for(var s=0;s<o.length;s++)o[s].fn==e&&o[s].shift==a[t].shift||n.push(r[i][a[t].code][s]);r[i][a[t].code]=n}else r[i][a[t].code]=[]},o.reset=function(){r={keydown:{},keyup:{}}},o.destroy=function(){r={keydown:{},keyup:{}},n.removeEventListener("keydown",s,!0),n.removeEventListener("keyup",l,!0)},n.addEventListener("keydown",s,!0),n.addEventListener("keyup",l,!0),o}})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){e.convertHiddenOptions=function(t,i,n){if(n&&!Array.isArray(n))return e.convertHiddenOptions(t,i,[n]);if(i.hiddenDates=[],n&&1==Array.isArray(n)){for(var o=0;o<n.length;o++)if(void 0===n[o].repeat){var r={};r.start=t(n[o].start).toDate().valueOf(),r.end=t(n[o].end).toDate().valueOf(),i.hiddenDates.push(r)}i.hiddenDates.sort(function(t,e){return t.start-e.start})}},e.updateHiddenDates=function(t,i,n){if(n&&!Array.isArray(n))return e.updateHiddenDates(t,i,[n]);if(n&&void 0!==i.domProps.centerContainer.width){e.convertHiddenOptions(t,i,n);for(var o=t(i.range.start),r=t(i.range.end),a=(i.range.end-i.range.start)/i.domProps.centerContainer.width,s=0;s<n.length;s++)if(void 0!==n[s].repeat){var l=t(n[s].start),u=t(n[s].end);if("Invalid Date"==l._d)throw new Error("Supplied start date is not valid: "+n[s].start);if("Invalid Date"==u._d)throw new Error("Supplied end date is not valid: "+n[s].end);if(u-l>=4*a){var d=0,h=r.clone();switch(n[s].repeat){case"daily":l.day()!=u.day()&&(d=1),l.dayOfYear(o.dayOfYear()),l.year(o.year()),l.subtract(7,"days"),u.dayOfYear(o.dayOfYear()),u.year(o.year()),u.subtract(7-d,"days"),h.add(1,"weeks");break;case"weekly":var c=u.diff(l,"days"),f=l.day();l.date(o.date()),l.month(o.month()),l.year(o.year()),u=l.clone(),l.day(f),u.day(f),u.add(c,"days"),l.subtract(1,"weeks"),u.subtract(1,"weeks"),h.add(1,"weeks");break;case"monthly":l.month()!=u.month()&&(d=1),l.month(o.month()),l.year(o.year()),l.subtract(1,"months"),u.month(o.month()),u.year(o.year()),u.subtract(1,"months"),u.add(d,"months"),h.add(1,"months");break;case"yearly":l.year()!=u.year()&&(d=1),l.year(o.year()),l.subtract(1,"years"),u.year(o.year()),u.subtract(1,"years"),u.add(d,"years"),h.add(1,"years");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[s].repeat)}for(;l<h;)switch(i.hiddenDates.push({start:l.valueOf(),end:u.valueOf()}),n[s].repeat){case"daily":l.add(1,"days"),u.add(1,"days");break;case"weekly":l.add(1,"weeks"),u.add(1,"weeks");break;case"monthly":l.add(1,"months"),u.add(1,"months");break;case"yearly":l.add(1,"y"),u.add(1,"y");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[s].repeat)}i.hiddenDates.push({start:l.valueOf(),end:u.valueOf()})}}e.removeDuplicates(i);var p=e.isHidden(i.range.start,i.hiddenDates),g=e.isHidden(i.range.end,i.hiddenDates),m=i.range.start,v=i.range.end;1==p.hidden&&(m=1==i.range.startToFront?p.startDate-1:p.endDate+1),1==g.hidden&&(v=1==i.range.endToFront?g.startDate-1:g.endDate+1),1!=p.hidden&&1!=g.hidden||i.range._applyRange(m,v)}},e.removeDuplicates=function(t){for(var e=t.hiddenDates,i=[],n=0;n<e.length;n++)for(var o=0;o<e.length;o++)n!=o&&1!=e[o].remove&&1!=e[n].remove&&(e[o].start>=e[n].start&&e[o].end<=e[n].end?e[o].remove=!0:e[o].start>=e[n].start&&e[o].start<=e[n].end?(e[n].end=e[o].end,e[o].remove=!0):e[o].end>=e[n].start&&e[o].end<=e[n].end&&(e[n].start=e[o].start,e[o].remove=!0));for(n=0;n<e.length;n++)!0!==e[n].remove&&i.push(e[n]);t.hiddenDates=i,t.hiddenDates.sort(function(t,e){return t.start-e.start})},e.printDates=function(t){for(var e=0;e<t.length;e++)console.log(e,new Date(t[e].start),new Date(t[e].end),t[e].start,t[e].end,t[e].remove)},e.stepOverHiddenDates=function(t,e,i){for(var n=!1,o=e.current.valueOf(),r=0;r<e.hiddenDates.length;r++){var a=e.hiddenDates[r].start,s=e.hiddenDates[r].end;if(o>=a&&o<s){n=!0;break}}if(1==n&&o<e._end.valueOf()&&o!=i){var l=t(i),u=t(s);l.year()!=u.year()?e.switchedYear=!0:l.month()!=u.month()?e.switchedMonth=!0:l.dayOfYear()!=u.dayOfYear()&&(e.switchedDay=!0),e.current=u}},e.toScreen=function(t,i,n){var o;if(0==t.body.hiddenDates.length)return o=t.range.conversion(n),(i.valueOf()-o.offset)*o.scale;var r=e.isHidden(i,t.body.hiddenDates);1==r.hidden&&(i=r.startDate);var a=e.getHiddenDurationBetween(t.body.hiddenDates,t.range.start,t.range.end);if(i<t.range.start){o=t.range.conversion(n,a);var s=e.getHiddenDurationBeforeStart(t.body.hiddenDates,i,o.offset);return i=t.options.moment(i).toDate().valueOf(),i+=s,-(o.offset-i.valueOf())*o.scale}if(i>t.range.end){var l={start:t.range.start,end:i};return i=e.correctTimeForHidden(t.options.moment,t.body.hiddenDates,l,i),o=t.range.conversion(n,a),(i.valueOf()-o.offset)*o.scale}return i=e.correctTimeForHidden(t.options.moment,t.body.hiddenDates,t.range,i),o=t.range.conversion(n,a),(i.valueOf()-o.offset)*o.scale},e.toTime=function(t,i,n){if(0==t.body.hiddenDates.length){var o=t.range.conversion(n);return new Date(i/o.scale+o.offset)}var r=e.getHiddenDurationBetween(t.body.hiddenDates,t.range.start,t.range.end),a=(t.range.end-t.range.start-r)*i/n,s=e.getAccumulatedHiddenDuration(t.body.hiddenDates,t.range,a);return new Date(s+a+t.range.start)},e.getHiddenDurationBetween=function(t,e,i){for(var n=0,o=0;o<t.length;o++){var r=t[o].start,a=t[o].end;r>=e&&a<i&&(n+=a-r)}return n},e.getHiddenDurationBeforeStart=function(t,e,i){for(var n=0,o=0;o<t.length;o++){var r=t[o].start,a=t[o].end;r>=e&&a<=i&&(n+=a-r)}return n},e.correctTimeForHidden=function(t,i,n,o){return o=t(o).toDate().valueOf(),o-=e.getHiddenDurationBefore(t,i,n,o)},e.getHiddenDurationBefore=function(t,e,i,n){var o=0;n=t(n).toDate().valueOf();for(var r=0;r<e.length;r++){var a=e[r].start,s=e[r].end;a>=i.start&&s<i.end&&n>=s&&(o+=s-a)}return o},e.getAccumulatedHiddenDuration=function(t,e,i){for(var n=0,o=0,r=e.start,a=0;a<t.length;a++){var s=t[a].start,l=t[a].end;if(s>=e.start&&l<e.end){if(o+=s-r,r=l,o>=i)break;n+=l-s}}return n},e.snapAwayFromHidden=function(t,i,n,o){var r=e.isHidden(i,t);return 1==r.hidden?n<0?1==o?r.startDate-(r.endDate-i)-1:r.startDate-1:1==o?r.endDate+(i-r.startDate)+1:r.endDate+1:i},e.isHidden=function(t,e){for(var i=0;i<e.length;i++){var n=e[i].start,o=e[i].end;if(t>=n&&t<o)return{hidden:!0,startDate:n,endDate:o}}return{hidden:!1,startDate:n,endDate:o}}},function(t,e,i){e.onTouch=function(t,e){e.inputHandler=function(t){t.isFirst&&e(t)},t.on("hammer.input",e.inputHandler)},e.onRelease=function(t,e){return e.inputHandler=function(t){t.isFinal&&e(t)},t.on("hammer.input",e.inputHandler)},e.offTouch=function(t,e){t.off("hammer.input",e.inputHandler)},e.offRelease=e.offTouch,e.disablePreventDefaultVertically=function(t){return t.getTouchAction=function(){return["pan-y"]},t}},function(t,e,i){var n=r(i(6)),o=r(i(8));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(10),s=i(2),l=i(9);function u(t,e,i){this.id=null,this.parent=null,this.data=t,this.dom=null,this.conversion=e||{},this.options=i||{},this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.editable=null,this._updateEditStatus()}u.prototype.stack=!0,u.prototype.select=function(){this.selected=!0,this.dirty=!0,this.displayed&&this.redraw()},u.prototype.unselect=function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()},u.prototype.setData=function(t){null!=t.group&&this.data.group!=t.group&&null!=this.parent&&this.parent.itemSet._moveToGroup(this,t.group),this.parent&&(this.parent.stackDirty=!0),null!=t.subgroup&&this.data.subgroup!=t.subgroup&&null!=this.parent&&this.parent.changeSubgroup(this,this.data.subgroup,t.subgroup),this.data=t,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()},u.prototype.setParent=function(t){this.displayed?(this.hide(),this.parent=t,this.parent&&this.show()):this.parent=t},u.prototype.isVisible=function(t){return!1},u.prototype.show=function(){return!1},u.prototype.hide=function(){return!1},u.prototype.redraw=function(){},u.prototype.repositionX=function(){},u.prototype.repositionY=function(){},u.prototype._repaintDragCenter=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragCenter){var t=this,e=document.createElement("div");e.className="vis-drag-center",e.dragCenterItem=this;var i=new a(e);i.on("tap",function(e){t.parent.itemSet.body.emitter.emit("click",{event:e,item:t.id})}),i.on("doubletap",function(e){e.stopPropagation(),t.parent.itemSet._onUpdateItem(t),t.parent.itemSet.body.emitter.emit("doubleClick",{event:e,item:t.id})}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(e,this.dom.dragLeft):this.dom.box.appendChild(e):this.dom.point&&this.dom.point.appendChild(e),this.dom.dragCenter=e}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null)},u.prototype._repaintDeleteButton=function(t){var e=(this.options.editable.overrideItems||null==this.editable)&&this.options.editable.remove||!this.options.editable.overrideItems&&null!=this.editable&&this.editable.remove;if(this.selected&&e&&!this.dom.deleteButton){var i=this,n=document.createElement("div");this.options.rtl?n.className="vis-delete-rtl":n.className="vis-delete",n.title="Delete this item",new a(n).on("tap",function(t){t.stopPropagation(),i.parent.removeFromDataSet(i)}),t.appendChild(n),this.dom.deleteButton=n}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)},u.prototype._repaintOnItemUpdateTimeTooltip=function(t){if(this.options.tooltipOnItemUpdateTime){var e=(this.options.editable.updateTime||!0===this.data.editable)&&!1!==this.data.editable;if(this.selected&&e&&!this.dom.onItemUpdateTimeTooltip){var i=document.createElement("div");i.className="vis-onUpdateTime-tooltip",t.appendChild(i),this.dom.onItemUpdateTimeTooltip=i}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.options.rtl?this.dom.onItemUpdateTimeTooltip.style.right=this.dom.content.style.right:this.dom.onItemUpdateTimeTooltip.style.left=this.dom.content.style.left;var n,o=this.parent.itemSet.body.domProps.scrollTop;("top"==this.options.orientation.item?this.top:this.parent.height-this.top-this.height)+this.parent.top-50<-o?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top=this.height+2+"px"):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom=this.height+2+"px"),this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template?n=this.options.tooltipOnItemUpdateTime.template.bind(this)(this.data):(n="start: "+l(this.data.start).format("MM/DD/YYYY hh:mm"),this.data.end&&(n+="<br> end: "+l(this.data.end).format("MM/DD/YYYY hh:mm"))),this.dom.onItemUpdateTimeTooltip.innerHTML=n}}},u.prototype._updateContents=function(t){var e,i,n,o,r=this.parent.itemSet.itemsData.get(this.id),a=this.dom.box||this.dom.point,s=a.getElementsByClassName("vis-item-visible-frame")[0];if(n=this.options.visibleFrameTemplate?(o=this.options.visibleFrameTemplate.bind(this))(r,a):"",s)if(n instanceof Object&&!(n instanceof Element))o(r,s);else if(this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(n)){if(n instanceof Element)s.innerHTML="",s.appendChild(n);else if(null!=n)s.innerHTML=n;else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '+this.id);this.itemVisibleFrameContent=n}if((e=this.options.template?(i=this.options.template.bind(this))(r,t,this.data):this.data.content)instanceof Object&&!(e instanceof Element))i(r,t);else if(this._contentToString(this.content)!==this._contentToString(e)){if(e instanceof Element)t.innerHTML="",t.appendChild(e);else if(null!=e)t.innerHTML=e;else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '+this.id);this.content=e}},u.prototype._updateDataAttributes=function(t){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var e=[];if(Array.isArray(this.options.dataAttributes))e=this.options.dataAttributes;else{if("all"!=this.options.dataAttributes)return;e=(0,o.default)(this.data)}for(var i=0;i<e.length;i++){var n=e[i],r=this.data[n];null!=r?t.setAttribute("data-"+n,r):t.removeAttribute("data-"+n)}}},u.prototype._updateStyle=function(t){this.style&&(s.removeCssText(t,this.style),this.style=null),this.data.style&&(s.addCssText(t,this.data.style),this.style=this.data.style)},u.prototype._contentToString=function(t){return"string"==typeof t?t:t&&"outerHTML"in t?t.outerHTML:t},u.prototype._updateEditStatus=function(){this.options&&("boolean"==typeof this.options.editable?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:"object"===(0,n.default)(this.options.editable)&&(this.editable={},s.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),this.options&&this.options.editable&&!0===this.options.editable.overrideItems||this.data&&("boolean"==typeof this.data.editable?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:"object"===(0,n.default)(this.data.editable)&&(this.editable={},s.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))},u.prototype.getWidthLeft=function(){return 0},u.prototype.getWidthRight=function(){return 0},u.prototype.getTitle=function(){return this.data.title},t.exports=u},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){var n=i(51);t.exports=function(t){return Object(n(t))}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){function n(t){this.delay=null,this.max=1/0,this._queue=[],this._timeout=null,this._extended=null,this.setOptions(t)}n.prototype.setOptions=function(t){t&&void 0!==t.delay&&(this.delay=t.delay),t&&void 0!==t.max&&(this.max=t.max),this._flushIfNeeded()},n.extend=function(t,e){var i=new n(e);if(void 0!==t.flush)throw new Error("Target object already has a property flush");t.flush=function(){i.flush()};var o=[{name:"flush",original:void 0}];if(e&&e.replace)for(var r=0;r<e.replace.length;r++){var a=e.replace[r];o.push({name:a,original:t[a]}),i.replace(t,a)}return i._extended={object:t,methods:o},i},n.prototype.destroy=function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,i=0;i<e.length;i++){var n=e[i];n.original?t[n.name]=n.original:delete t[n.name]}this._extended=null}},n.prototype.replace=function(t,e){var i=this,n=t[e];if(!n)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.queue({args:t,fn:n,context:this})}},n.prototype.queue=function(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()},n.prototype._flushIfNeeded=function(){if(this._queue.length>this.max&&this.flush(),clearTimeout(this._timeout),this.queue.length>0&&"number"==typeof this.delay){var t=this;this._timeout=setTimeout(function(){t.flush()},this.delay)}},n.prototype.flush=function(){for(;this._queue.length>0;){var t=this._queue.shift();t.fn.apply(t.context||t.fn,t.args||[])}},t.exports=n},function(t,e){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},i.prototype.once=function(t,e){var i=this;function n(){i.off(t,n),e.apply(this,arguments)}return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var o=0;o<n.length;o++)if((i=n[o])===e||i.fn===e){n.splice(o,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i)for(var n=0,o=(i=i.slice(0)).length;n<o;++n)i[n].apply(this,e);return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,i){var n,o=i(6),r=(n=o)&&n.__esModule?n:{default:n},a=i(2),s=i(16),l=i(66),u=i(36),d=i(9);function h(t,e){this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,maxMinorChars:7,format:l.FORMAT,moment:d,timeAxis:null},this.options=a.extend({},this.defaultOptions),this.body=t,this._create(),this.setOptions(e)}h.prototype=new s,h.prototype.setOptions=function(t){t&&(a.selectiveExtend(["showMinorLabels","showMajorLabels","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,t),a.selectiveDeepExtend(["format"],this.options,t),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation.axis=t.orientation:"object"===(0,r.default)(t.orientation)&&"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis)),"locale"in t&&("function"==typeof d.locale?d.locale(t.locale):d.lang(t.locale)))},h.prototype._create=function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"},h.prototype.destroy=function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null},h.prototype.redraw=function(){var t=this.props,e=this.dom.foreground,i=this.dom.background,n="top"==this.options.orientation.axis?this.body.dom.top:this.body.dom.bottom,o=e.parentNode!==n;this._calculateCharSize();var r=this.options.showMinorLabels&&"none"!==this.options.orientation.axis,a=this.options.showMajorLabels&&"none"!==this.options.orientation.axis;t.minorLabelHeight=r?t.minorCharHeight:0,t.majorLabelHeight=a?t.majorCharHeight:0,t.height=t.minorLabelHeight+t.majorLabelHeight,t.width=e.offsetWidth,t.minorLineHeight=this.body.domProps.root.height-t.majorLabelHeight-("top"==this.options.orientation.axis?this.body.domProps.bottom.height:this.body.domProps.top.height),t.minorLineWidth=1,t.majorLineHeight=t.minorLineHeight+t.majorLabelHeight,t.majorLineWidth=1;var s=e.nextSibling,l=i.nextSibling;return e.parentNode&&e.parentNode.removeChild(e),i.parentNode&&i.parentNode.removeChild(i),e.style.height=this.props.height+"px",this._repaintLabels(),s?n.insertBefore(e,s):n.appendChild(e),l?this.body.dom.backgroundVertical.insertBefore(i,l):this.body.dom.backgroundVertical.appendChild(i),this._isResized()||o},h.prototype._repaintLabels=function(){var t=this.options.orientation.axis,e=a.convert(this.body.range.start,"Number"),i=a.convert(this.body.range.end,"Number"),n=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),o=n-u.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this.body.range,n);o-=this.body.util.toTime(0).valueOf();var r=new l(new Date(e),new Date(i),o,this.body.hiddenDates,this.options);r.setMoment(this.options.moment),this.options.format&&r.setFormat(this.options.format),this.options.timeAxis&&r.setScale(this.options.timeAxis),this.step=r;var s,d,h,f,p,g=this.dom;g.redundant.lines=g.lines,g.redundant.majorTexts=g.majorTexts,g.redundant.minorTexts=g.minorTexts,g.lines=[],g.majorTexts=[],g.minorTexts=[];var m,v,y,_,b=0,E=void 0,w=0;for(r.start(),s=r.getCurrent(),h=this.body.util.toScreen(s);r.hasNext()&&w<1e3;){switch(w++,f=r.isMajor(),_=r.getClassName(),y=r.getLabelMinor(),d=h,r.next(),s=r.getCurrent(),r.isMajor(),m=b,b=(h=this.body.util.toScreen(s))-d,r.scale){case"week":p=!0;break;default:p=b>=.4*m}if(this.options.showMinorLabels&&p){var T=this._repaintMinorText(d,y,t,_);T.style.width=b+"px"}f&&this.options.showMajorLabels?(d>0&&(null==E&&(E=d),T=this._repaintMajorText(d,r.getLabelMajor(),t,_)),v=this._repaintMajorLine(d,b,t,_)):p?v=this._repaintMinorLine(d,b,t,_):v&&(v.style.width=parseInt(v.style.width)+b+"px")}if(1e3!==w||c||(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to 1000 lines."),c=!0),this.options.showMajorLabels){var S=this.body.util.toTime(0),x=r.getLabelMajor(S),C=x.length*(this.props.majorCharWidth||10)+10;(null==E||C<E)&&this._repaintMajorText(0,x,t,_)}a.forEach(this.dom.redundant,function(t){for(;t.length;){var e=t.pop();e&&e.parentNode&&e.parentNode.removeChild(e)}})},h.prototype._repaintMinorText=function(t,e,i,n){var o=this.dom.redundant.minorTexts.shift();if(!o){var r=document.createTextNode("");(o=document.createElement("div")).appendChild(r),this.dom.foreground.appendChild(o)}return this.dom.minorTexts.push(o),o.innerHTML=e,o.style.top="top"==i?this.props.majorLabelHeight+"px":"0",this.options.rtl?(o.style.left="",o.style.right=t+"px"):o.style.left=t+"px",o.className="vis-text vis-minor "+n,o},h.prototype._repaintMajorText=function(t,e,i,n){var o=this.dom.redundant.majorTexts.shift();if(!o){var r=document.createElement("div");(o=document.createElement("div")).appendChild(r),this.dom.foreground.appendChild(o)}return o.childNodes[0].innerHTML=e,o.className="vis-text vis-major "+n,o.style.top="top"==i?"0":this.props.minorLabelHeight+"px",this.options.rtl?(o.style.left="",o.style.right=t+"px"):o.style.left=t+"px",this.dom.majorTexts.push(o),o},h.prototype._repaintMinorLine=function(t,e,i,n){var o=this.dom.redundant.lines.shift();o||(o=document.createElement("div"),this.dom.background.appendChild(o)),this.dom.lines.push(o);var r=this.props;return o.style.top="top"==i?r.majorLabelHeight+"px":this.body.domProps.top.height+"px",o.style.height=r.minorLineHeight+"px",this.options.rtl?(o.style.left="",o.style.right=t-r.minorLineWidth/2+"px",o.className="vis-grid vis-vertical-rtl vis-minor "+n):(o.style.left=t-r.minorLineWidth/2+"px",o.className="vis-grid vis-vertical vis-minor "+n),o.style.width=e+"px",o},h.prototype._repaintMajorLine=function(t,e,i,n){var o=this.dom.redundant.lines.shift();o||(o=document.createElement("div"),this.dom.background.appendChild(o)),this.dom.lines.push(o);var r=this.props;return o.style.top="top"==i?"0":this.body.domProps.top.height+"px",this.options.rtl?(o.style.left="",o.style.right=t-r.majorLineWidth/2+"px",o.className="vis-grid vis-vertical-rtl vis-major "+n):(o.style.left=t-r.majorLineWidth/2+"px",o.className="vis-grid vis-vertical vis-major "+n),o.style.height=r.majorLineHeight+"px",o.style.width=e+"px",o},h.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth};var c=!1;t.exports=h},function(t,e,i){var n=i(10),o=i(2),r=i(16),a=i(9),s=i(98);function l(t,e){this.body=t,this.defaultOptions={moment:a,locales:s,locale:"en",id:void 0,title:void 0},this.options=o.extend({},this.defaultOptions),e&&e.time?this.customTime=e.time:this.customTime=new Date,this.eventParams={},this.setOptions(e),this._create()}l.prototype=new r,l.prototype.setOptions=function(t){t&&o.selectiveExtend(["moment","locale","locales","id"],this.options,t)},l.prototype._create=function(){var t=document.createElement("div");t["custom-time"]=this,t.className="vis-custom-time "+(this.options.id||""),t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t;var e=document.createElement("div");function i(t){this.body.range._onMouseWheel(t)}e.style.position="relative",e.style.top="0px",e.style.left="-10px",e.style.height="100%",e.style.width="20px",e.addEventListener?(e.addEventListener("mousewheel",i.bind(this),!1),e.addEventListener("DOMMouseScroll",i.bind(this),!1)):e.attachEvent("onmousewheel",i.bind(this)),t.appendChild(e),this.hammer=new n(e),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:n.DIRECTION_HORIZONTAL})},l.prototype.destroy=function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null},l.prototype.redraw=function(){var t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar));var e=this.body.util.toScreen(this.customTime),i=this.options.locales[this.options.locale];i||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline/#Localization"),this.warned=!0),i=this.options.locales.en);var n=this.options.title;return void 0===n?n=(n=i.time+": "+this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")).charAt(0).toUpperCase()+n.substring(1):"function"==typeof n&&(n=n.call(this.customTime)),this.bar.style.left=e+"px",this.bar.title=n,!1},l.prototype.hide=function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)},l.prototype.setCustomTime=function(t){this.customTime=o.convert(t,"Date"),this.redraw()},l.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},l.prototype.setCustomTitle=function(t){this.options.title=t},l.prototype._onDragStart=function(t){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,t.stopPropagation()},l.prototype._onDrag=function(t){if(this.eventParams.dragging){var e=this.body.util.toScreen(this.eventParams.customTime)+t.deltaX,i=this.body.util.toTime(e);this.setCustomTime(i),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:t}),t.stopPropagation()}},l.prototype._onDragEnd=function(t){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:t}),t.stopPropagation())},l.customTimeFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("custom-time"))return e["custom-time"];e=e.parentNode}return null},t.exports=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(2),s=i(117).default,l=i(48).default,u=i(193).default,d=i(200).default,h=i(201).default,c=i(202).default,f=i(203).default,p=i(204).default,g=i(205).default,m=i(206).default,v=i(207).default,y=i(208).default,_=i(209).default,b=i(210).default,E=i(211).default,w=i(212).default,T=i(213).default,S=i(15).printStyle,x=function(){function t(e,i,o,r,l,u){(0,n.default)(this,t),this.options=a.bridgeObject(l),this.globalOptions=l,this.defaultOptions=u,this.body=i,this.edges=[],this.id=void 0,this.imagelist=o,this.grouplist=r,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new s(this.body,this.options,!1),this.setOptions(e)}return(0,o.default)(t,[{key:"attachEdge",value:function(t){-1===this.edges.indexOf(t)&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var e=this.edges.indexOf(t);-1!=e&&this.edges.splice(e,1)}},{key:"setOptions",value:function(e){var i=this.options.shape;if(e){if(void 0!==e.id&&(this.id=e.id),void 0===this.id)throw new Error("Node must have an id");t.checkMass(e,this.id),void 0!==e.x&&(null===e.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=parseInt(e.x),this.predefinedPosition=!0)),void 0!==e.y&&(null===e.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=parseInt(e.y),this.predefinedPosition=!0)),void 0!==e.size&&(this.baseSize=e.size),void 0!==e.value&&(e.value=parseFloat(e.value)),t.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);var n=[e,this.options,this.defaultOptions];return this.chooser=l.choosify("node",n),this._load_images(),this.updateLabelModule(e),this.updateShape(i),void 0!==e.hidden||void 0!==e.physics}}},{key:"_load_images",value:function(){if("circularImage"===this.options.shape||"image"===this.options.shape){if(void 0===this.options.image)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(void 0===this.imagelist)throw new Error("Internal Error: No images provided");if("string"==typeof this.options.image)this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(void 0===this.options.image.unselected)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),void 0!==this.options.image.selected?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};return this.selected||this.hover?!0===this.chooser?this.selected?(t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):"function"==typeof this.chooser&&(this.chooser(t,this.options.id,this.selected,this.hover),!1===t.shadow&&(t.shadowColor===this.options.shadow.color&&t.shadowSize===this.options.shadow.size&&t.shadowX===this.options.shadow.x&&t.shadowY===this.options.shadow.y||(t.shadow=!0))):t.shadow=this.options.shadow.enabled,t}},{key:"updateLabelModule",value:function(e){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),t.updateGroupOptions(this.options,e,this.grouplist);var i=this.grouplist.get(this.options.group,!1),n=[e,this.options,i,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new u(this.options,this.body,this.labelModule);break;case"circle":this.shape=new d(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new h(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"database":this.shape=new c(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new f(this.options,this.body,this.labelModule);break;case"dot":this.shape=new p(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new g(this.options,this.body,this.labelModule);break;case"icon":this.shape=new m(this.options,this.body,this.labelModule);break;case"image":this.shape=new v(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new y(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new _(this.options,this.body,this.labelModule);break;case"star":this.shape=new b(this.options,this.body,this.labelModule);break;case"text":this.shape=new E(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new w(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new T(this.options,this.body,this.labelModule);break;default:this.shape=new g(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,e){return this.shape.distanceToBorder(t,e)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var r=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*r}this.options.size=this.options.scaling.min+n*o}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var e=this.getFormattingValues();this.shape.draw(t,this.x,this.y,this.selected,this.hover,e)}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var e=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,e)}},{key:"getItemsOnPoint",value:function(t){var e=[];return this.labelModule.visible()&&l.pointInRect(this.labelModule.getSize(),t)&&e.push({nodeId:this.id,labelId:0}),l.pointInRect(this.shape.boundingBox,t)&&e.push({nodeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"updateGroupOptions",value:function(t,e,i){if(void 0!==i){var n=t.group;if(void 0!==e&&void 0!==e.group&&n!==e.group)throw new Error("updateGroupOptions: group values in options don't match.");if("number"==typeof n||"string"==typeof n&&""!=n){var o=i.get(n);a.selectiveNotDeepExtend(["font"],t,o),t.color=a.parseColor(t.color)}}}},{key:"parseOptions",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments[4],s=["color","fixed","shadow"];if(a.selectiveNotDeepExtend(s,e,i,n),t.checkMass(i),a.mergeOptions(e,i,"shadow",o),void 0!==i.color&&null!==i.color){var l=a.parseColor(i.color);a.fillIfDefined(e.color,l)}else!0===n&&null===i.color&&(e.color=a.bridgeObject(o.color));void 0!==i.fixed&&null!==i.fixed&&("boolean"==typeof i.fixed?(e.fixed.x=i.fixed,e.fixed.y=i.fixed):(void 0!==i.fixed.x&&"boolean"==typeof i.fixed.x&&(e.fixed.x=i.fixed.x),void 0!==i.fixed.y&&"boolean"==typeof i.fixed.y&&(e.fixed.y=i.fixed.y))),!0===n&&null===i.font&&(e.font=a.bridgeObject(o.font)),t.updateGroupOptions(e,i,r),void 0!==i.scaling&&a.mergeOptions(e.scaling,i.scaling,"label",o.scaling)}},{key:"checkMass",value:function(t,e){if(void 0!==t.mass&&t.mass<=0){var i="";void 0!==e&&(i=" in node id: "+e),console.log("%cNegative or zero mass disallowed"+i+", setting mass to 1.",S),t.mass=1}}}]),t}();e.default=x},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(6)),o=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var s=i(2),l=function(){function t(){(0,o.default)(this,t)}return(0,r.default)(t,null,[{key:"choosify",value:function(t,e){var i=["node","edge","label"],o=!0,r=s.topMost(e,"chosen");if("boolean"==typeof r)o=r;else if("object"===(void 0===r?"undefined":(0,n.default)(r))){if(-1===i.indexOf(t))throw new Error("choosify: subOption '"+t+"' should be one of '"+i.join("', '")+"'");var a=s.topMost(e,["chosen",t]);"boolean"!=typeof a&&"function"!=typeof a||(o=a)}return o}},{key:"pointInRect",value:function(t,e,i){if(t.width<=0||t.height<=0)return!1;if(void 0!==i){var n={x:e.x-i.x,y:e.y-i.y};if(0!==i.angle){var o=-i.angle;e={x:Math.cos(o)*n.x-Math.sin(o)*n.y,y:Math.sin(o)*n.x+Math.cos(o)*n.y}}else e=n}var r=t.x+t.width,a=t.y+t.width;return t.left<e.x&&r>e.x&&t.top<e.y&&a>e.y}},{key:"isValidLabel",value:function(t){return"string"==typeof t&&""!==t}}]),t}();e.default=l},function(t,e,i){i(125);for(var n=i(18),o=i(26),r=i(31),a=i(13)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],d=n[u],h=d&&d.prototype;h&&!h[a]&&o(h,a,u),r[u]=r.Array}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=!0},function(t,e,i){var n=i(32);t.exports=function(t,e){if(!n(t))return t;var i,o;if(e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;if("function"==typeof(i=t.valueOf)&&!n(o=i.call(t)))return o;if(!e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var n=i(27),o=i(130),r=i(58),a=i(56)("IE_PROTO"),s=function(){},l=function(){var t,e=i(82)("iframe"),n=r.length;for(e.style.display="none",i(134).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[r[n]];return l()};t.exports=b.default||function(t,e){var i;return null!==t?(s.prototype=n(t),i=new s,s.prototype=null,i[a]=t):i=l(),void 0===e?i:o(i,e)}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(57)("keys"),o=i(40);t.exports=function(t){return n[t]||(n[t]=o(t))}},function(t,e,i){var n=i(18),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(20).f,o=i(22),r=i(13)("toStringTag");t.exports=function(t,e,i){t&&!o(t=i?t:t.prototype,r)&&n(t,r,{configurable:!0,value:e})}},function(t,e,i){var n=i(135)(!0);i(79)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){e.f=i(13)},function(t,e,i){var n=i(18),o=i(7),r=i(52),a=i(61),s=i(20).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e){e.f=_.default},function(t,e,i){var n=a(i(8)),o=a(i(19)),r=a(i(6));function a(t){return t&&t.__esModule?t:{default:t}}var s=i(2),l=i(9),u=i(16),d=i(36);function h(t,e){var i=l().hours(0).minutes(0).seconds(0).milliseconds(0),n=i.clone().add(-3,"days").valueOf(),o=i.clone().add(3,"days").valueOf();this.millisecondsPerPixelCache=void 0,void 0===e?(this.start=n,this.end=o):(this.start=e.start||n,this.end=e.end||o),this.rolling=!1,this.body=t,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:l,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10,rollingMode:{follow:!1,offset:.5}},this.options=s.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.body.dom.rollingModeBtn.addEventListener("click",this.startRolling.bind(this)),this.setOptions(e)}function c(t){if("horizontal"!=t&&"vertical"!=t)throw new TypeError('Unknown direction "'+t+'". Choose "horizontal" or "vertical".')}h.prototype=new u,h.prototype.setOptions=function(t){t&&(s.selectiveExtend(["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","rtl","showCurrentTime","rollingMode","horizontalScroll"],this.options,t),t.rollingMode&&t.rollingMode.follow&&this.startRolling(),("start"in t||"end"in t)&&this.setRange(t.start,t.end))},h.prototype.startRolling=function(){var t=this;!function e(){t.stopRolling(),t.rolling=!0;var i=t.end-t.start,n=s.convert(new Date,"Date").valueOf(),o=n-i*t.options.rollingMode.offset,r=n+i*(1-t.options.rollingMode.offset);t.setRange(o,r,{animation:!1}),(i=1/t.conversion(t.body.domProps.center.width).scale/10)<30&&(i=30),i>1e3&&(i=1e3),t.body.dom.rollingModeBtn.style.visibility="hidden",t.currentTimeTimer=setTimeout(e,i)}()},h.prototype.stopRolling=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")},h.prototype.setRange=function(t,e,i,a,l){i||(i={}),!0!==i.byUser&&(i.byUser=!1);var u=this,h=null!=t?s.convert(t,"Date").valueOf():null,c=null!=e?s.convert(e,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,i.animation){var f=this.start,p=this.end,g="object"===(0,r.default)(i.animation)&&"duration"in i.animation?i.animation.duration:500,m="object"===(0,r.default)(i.animation)&&"easingFunction"in i.animation?i.animation.easingFunction:"easeInOutQuad",v=s.easingFunctions[m];if(!v)throw new Error("Unknown easing function "+(0,o.default)(m)+". Choose from: "+(0,n.default)(s.easingFunctions).join(", "));var y=(new Date).valueOf(),_=!1;return function t(){if(!u.props.touch.dragging){var e=(new Date).valueOf()-y,n=v(e/g),o=e>g,r=o||null===h?h:f+(h-f)*n,s=o||null===c?c:p+(c-p)*n;b=u._applyRange(r,s),d.updateHiddenDates(u.options.moment,u.body,u.options.hiddenDates),_=_||b;var m={start:new Date(u.start),end:new Date(u.end),byUser:i.byUser,event:i.event};if(l&&l(n,b,o),b&&u.body.emitter.emit("rangechange",m),o){if(_&&(u.body.emitter.emit("rangechanged",m),a))return a()}else u.animationTimer=setTimeout(t,20)}}()}var b=this._applyRange(h,c);if(d.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),b){var E={start:new Date(this.start),end:new Date(this.end),byUser:i.byUser,event:i.event};if(this.body.emitter.emit("rangechange",E),clearTimeout(u.timeoutID),u.timeoutID=setTimeout(function(){u.body.emitter.emit("rangechanged",E)},200),a)return a()}},h.prototype.getMillisecondsPerPixel=function(){return void 0===this.millisecondsPerPixelCache&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache},h.prototype._cancelAnimation=function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)},h.prototype._applyRange=function(t,e){var i,n=null!=t?s.convert(t,"Date").valueOf():this.start,o=null!=e?s.convert(e,"Date").valueOf():this.end,r=null!=this.options.max?s.convert(this.options.max,"Date").valueOf():null,a=null!=this.options.min?s.convert(this.options.min,"Date").valueOf():null;if(isNaN(n)||null===n)throw new Error('Invalid start "'+t+'"');if(isNaN(o)||null===o)throw new Error('Invalid end "'+e+'"');if(o<n&&(o=n),null!==a&&n<a&&(n+=i=a-n,o+=i,null!=r&&o>r&&(o=r)),null!==r&&o>r&&(n-=i=o-r,o-=i,null!=a&&n<a&&(n=a)),null!==this.options.zoomMin){var l=parseFloat(this.options.zoomMin);l<0&&(l=0),o-n<l&&(this.end-this.start===l&&n>=this.start-.5&&o<=this.end?(n=this.start,o=this.end):(n-=(i=l-(o-n))/2,o+=i/2))}if(null!==this.options.zoomMax){var u=parseFloat(this.options.zoomMax);u<0&&(u=0),o-n>u&&(this.end-this.start===u&&n<this.start&&o>this.end?(n=this.start,o=this.end):(n+=(i=o-n-u)/2,o-=i/2))}var d=this.start!=n||this.end!=o;return n>=this.start&&n<=this.end||o>=this.start&&o<=this.end||this.start>=n&&this.start<=o||this.end>=n&&this.end<=o||this.body.emitter.emit("checkRangedItems"),this.start=n,this.end=o,d},h.prototype.getRange=function(){return{start:this.start,end:this.end}},h.prototype.conversion=function(t,e){return h.conversion(this.start,this.end,t,e)},h.conversion=function(t,e,i,n){return void 0===n&&(n=0),0!=i&&e-t!=0?{offset:t,scale:i/(e-t-n)}:{offset:0,scale:1}},h.prototype._onDragStart=function(t){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(t)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))},h.prototype._onDrag=function(t){if(t&&this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging){var e=this.options.direction;c(e);var i="horizontal"==e?t.deltaX:t.deltaY;i-=this.deltaDifference;var n=this.props.touch.end-this.props.touch.start;n-=d.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);var o,r="horizontal"==e?this.body.domProps.center.width:this.body.domProps.center.height;o=this.options.rtl?i/r*n:-i/r*n;var a=this.props.touch.start+o,s=this.props.touch.end+o,l=d.snapAwayFromHidden(this.body.hiddenDates,a,this.previousDelta-i,!0),u=d.snapAwayFromHidden(this.body.hiddenDates,s,this.previousDelta-i,!0);if(l!=a||u!=s)return this.deltaDifference+=i,this.props.touch.start=l,this.props.touch.end=u,void this._onDrag(t);this.previousDelta=i,this._applyRange(a,s);var h=new Date(this.start),f=new Date(this.end);this.body.emitter.emit("rangechange",{start:h,end:f,byUser:!0,event:t}),this.body.emitter.emit("panmove")}},h.prototype._onDragEnd=function(t){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:t}))},h.prototype._onMouseWheel=function(t){var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),!(this.options.zoomKey&&!t[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(t)&&e){var i,n;if(i=e<0?1-e/5:1/(1+e/5),this.rolling)n=this.start+(this.end-this.start)*this.options.rollingMode.offset;else{var o=this.getPointer({x:t.clientX,y:t.clientY},this.body.dom.center);n=this._pointerToDate(o)}this.zoom(i,n,e,t),t.preventDefault()}},h.prototype._onTouch=function(t){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.scaleOffset=0,this.deltaDifference=0,s.preventDefault(t)},h.prototype._onPinch=function(t){if(this.options.zoomable&&this.options.moveable){s.preventDefault(t),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(t.center,this.body.dom.center)),this.stopRolling();var e=1/(t.scale+this.scaleOffset),i=this._pointerToDate(this.props.touch.center),n=d.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),o=d.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,i),r=n-o,a=i-o+(this.props.touch.start-(i-o))*e,l=i+r+(this.props.touch.end-(i+r))*e;this.startToFront=1-e<=0,this.endToFront=e-1<=0;var u=d.snapAwayFromHidden(this.body.hiddenDates,a,1-e,!0),h=d.snapAwayFromHidden(this.body.hiddenDates,l,e-1,!0);u==a&&h==l||(this.props.touch.start=u,this.props.touch.end=h,this.scaleOffset=1-t.scale,a=u,l=h);var c={animation:!1,byUser:!0,event:t};this.setRange(a,l,c),this.startToFront=!1,this.endToFront=!0}},h.prototype._isInsideRange=function(t){var e,i=t.center?t.center.x:t.clientX;e=this.options.rtl?i-s.getAbsoluteLeft(this.body.dom.centerContainer):s.getAbsoluteRight(this.body.dom.centerContainer)-i;var n=this.body.util.toTime(e);return n>=this.start&&n<=this.end},h.prototype._pointerToDate=function(t){var e,i=this.options.direction;if(c(i),"horizontal"==i)return this.body.util.toTime(t.x).valueOf();var n=this.body.domProps.center.height;return e=this.conversion(n),t.y/e.scale+e.offset},h.prototype.getPointer=function(t,e){return this.options.rtl?{x:s.getAbsoluteRight(e)-t.x,y:t.y-s.getAbsoluteTop(e)}:{x:t.x-s.getAbsoluteLeft(e),y:t.y-s.getAbsoluteTop(e)}},h.prototype.zoom=function(t,e,i,n){null==e&&(e=(this.start+this.end)/2);var o=d.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),r=d.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,e),a=o-r,s=e-r+(this.start-(e-r))*t,l=e+a+(this.end-(e+a))*t;this.startToFront=!(i>0),this.endToFront=!(-i>0);var u=d.snapAwayFromHidden(this.body.hiddenDates,s,i,!0),h=d.snapAwayFromHidden(this.body.hiddenDates,l,-i,!0);u==s&&h==l||(s=u,l=h);var c={animation:!1,byUser:!0,event:n};this.setRange(s,l,c),this.startToFront=!1,this.endToFront=!0},h.prototype.move=function(t){var e=this.end-this.start,i=this.start+e*t,n=this.end+e*t;this.start=i,this.end=n},h.prototype.moveTo=function(t){var e=(this.start+this.end)/2-t,i=this.start-e,n=this.end-e;this.setRange(i,n,{animation:!1,byUser:!0,event:null})},t.exports=h},function(t,e,i){var n=r(i(19)),o=r(i(6));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(44),s=i(10),l=i(37),u=i(2),d=i(45),h=i(97),c=i(36),f=i(46);function p(){}a(p.prototype),p.prototype._create=function(t){this.dom={},this.dom.container=t,this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",function(){!0===this.initialDrawDone&&this._redraw()}.bind(this)),this.on("rangechanged",function(){this.initialRangeChangeDone||(this.initialRangeChangeDone=!0)}.bind(this)),this.on("touch",this._onTouch.bind(this)),this.on("panmove",this._onDrag.bind(this));var e=this;this._origRedraw=this._redraw.bind(this),this._redraw=u.throttle(this._origRedraw),this.on("_change",function(t){e.itemSet&&e.itemSet.initialItemSetDrawn&&t&&1==t.queue?e._redraw():e._origRedraw()}),this.hammer=new s(this.dom.root);var i=this.hammer.get("pinch").set({enable:!0});function n(t){this.isActive()&&this.emit("mousewheel",t);var e=0,i=0;if("detail"in t&&(i=-1*t.detail),"wheelDelta"in t&&(i=t.wheelDelta),"wheelDeltaY"in t&&(i=t.wheelDeltaY),"wheelDeltaX"in t&&(e=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=-1*i,i=0),"deltaY"in t&&(i=-1*t.deltaY),"deltaX"in t&&(e=t.deltaX),this.options.zoomKey&&!t[this.options.zoomKey])if(t.preventDefault(),this.options.verticalScroll&&Math.abs(i)>=Math.abs(e)){var n=this.props.scrollTop+i;this.isActive()&&(this._setScrollTop(n),this._redraw(),this.emit("scroll",t))}else if(this.options.horizontalScroll){var o=(Math.abs(e)>=Math.abs(i)?e:i)/120*(this.range.end-this.range.start)/20,r=this.range.start+o,a=this.range.end+o,s={animation:!1,byUser:!0,event:t};this.range.setRange(r,a,s)}}function o(t){if(e.options.verticalScroll&&(t.preventDefault(),e.isActive())){var i=-t.target.scrollTop;e._setScrollTop(i),e._redraw(),e.emit("scrollSide",t)}}l.disablePreventDefaultVertically(i),this.hammer.get("pan").set({threshold:5,direction:s.DIRECTION_HORIZONTAL}),this.listeners={},["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(function(t){var i=function(i){e.isActive()&&e.emit(t,i)};e.hammer.on(t,i),e.listeners[t]=i}),l.onTouch(this.hammer,function(t){e.emit("touch",t)}.bind(this)),l.onRelease(this.hammer,function(t){e.emit("release",t)}.bind(this)),this.dom.centerContainer.addEventListener?(this.dom.centerContainer.addEventListener("mousewheel",n.bind(this),!1),this.dom.centerContainer.addEventListener("DOMMouseScroll",n.bind(this),!1)):this.dom.centerContainer.attachEvent("onmousewheel",n.bind(this)),this.dom.left.parentNode.addEventListener("scroll",o.bind(this)),this.dom.right.parentNode.addEventListener("scroll",o.bind(this));var r=!1;if(this.dom.center.addEventListener("dragover",function(t){if(t.preventDefault&&t.preventDefault(),!(!t.target.className.indexOf("vis")>-1||r))return t.dataTransfer.dropEffect="move",r=!0,!1}.bind(this),!1),this.dom.center.addEventListener("drop",function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation();try{var i=JSON.parse(t.dataTransfer.getData("text"));if(!i||!i.content)return}catch(t){return!1}return r=!1,t.center={x:t.clientX,y:t.clientY},"item"!==i.target?e.itemSet._onAddItem(t):e.itemSet._onDropObjectOnItem(t),e.emit("drop",e.getEventProperties(t)),!1}.bind(this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!t)throw new Error("No container provided");t.appendChild(this.dom.root)},p.prototype.setOptions=function(t){if(t){if(u.selectiveExtend(["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","rtl","zoomKey","horizontalScroll","verticalScroll"],this.options,t),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),"object"!==(0,o.default)(this.options.orientation)&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation={item:t.orientation,axis:t.orientation}:"object"===(0,o.default)(t.orientation)&&("item"in t.orientation&&(this.options.orientation.item=t.orientation.item),"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis))),"both"===this.options.orientation.axis){if(!this.timeAxis2){var e=this.timeAxis2=new d(this.body);e.setOptions=function(t){var i=t?u.extend({},t):{};i.orientation="top",d.prototype.setOptions.call(e,i)},this.components.push(e)}}else if(this.timeAxis2){var i=this.components.indexOf(this.timeAxis2);-1!==i&&this.components.splice(i,1),this.timeAxis2.destroy(),this.timeAxis2=null}if("function"==typeof t.drawPoints&&(t.drawPoints={onRender:t.drawPoints}),"hiddenDates"in this.options&&c.convertHiddenOptions(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in t&&(t.clickToUse?this.activator||(this.activator=new h(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),"showCustomTime"in t)throw new Error("Option `showCustomTime` is deprecated. Create a custom time bar via timeline.addCustomTime(time [, id])");this._initAutoResize()}if(this.components.forEach(function(e){return e.setOptions(t)}),"configure"in t){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(t.configure);var n=u.deepExtend({},this.options);this.components.forEach(function(t){u.deepExtend(n,t.options)}),this.configurator.setModuleOptions({global:n})}this._redraw()},p.prototype.isActive=function(){return!this.activator||this.activator.active},p.prototype.destroy=function(){for(var t in this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator),this.listeners)this.listeners.hasOwnProperty(t)&&delete this.listeners[t];this.listeners=null,this.hammer=null,this.components.forEach(function(t){return t.destroy()}),this.body=null},p.prototype.setCustomTime=function(t,e){var i=this.customTimes.filter(function(t){return e===t.options.id});if(0===i.length)throw new Error("No custom time bar found with id "+(0,n.default)(e));i.length>0&&i[0].setCustomTime(t)},p.prototype.getCustomTime=function(t){var e=this.customTimes.filter(function(e){return e.options.id===t});if(0===e.length)throw new Error("No custom time bar found with id "+(0,n.default)(t));return e[0].getCustomTime()},p.prototype.setCustomTimeTitle=function(t,e){var i=this.customTimes.filter(function(t){return t.options.id===e});if(0===i.length)throw new Error("No custom time bar found with id "+(0,n.default)(e));if(i.length>0)return i[0].setCustomTitle(t)},p.prototype.getEventProperties=function(t){return{event:t}},p.prototype.addCustomTime=function(t,e){var i=void 0!==t?u.convert(t,"Date").valueOf():new Date;if(this.customTimes.some(function(t){return t.options.id===e}))throw new Error("A custom time with id "+(0,n.default)(e)+" already exists");var o=new f(this.body,u.extend({},this.options,{time:i,id:e}));return this.customTimes.push(o),this.components.push(o),this._redraw(),e},p.prototype.removeCustomTime=function(t){var e=this.customTimes.filter(function(e){return e.options.id===t});if(0===e.length)throw new Error("No custom time bar found with id "+(0,n.default)(t));e.forEach(function(t){this.customTimes.splice(this.customTimes.indexOf(t),1),this.components.splice(this.components.indexOf(t),1),t.destroy()}.bind(this))},p.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]},p.prototype.fit=function(t,e){var i=this.getDataRange();if(null!==i.min||null!==i.max){var n=i.max-i.min,o=new Date(i.min.valueOf()-.01*n),r=new Date(i.max.valueOf()+.01*n),a=!t||void 0===t.animation||t.animation;this.range.setRange(o,r,{animation:a},e)}},p.prototype.getDataRange=function(){throw new Error("Cannot invoke abstract method getDataRange")},p.prototype.setWindow=function(t,e,i,n){var o,r;"function"==typeof arguments[2]&&(n=arguments[2],i={}),1==arguments.length?(o=void 0===(r=arguments[0]).animation||r.animation,this.range.setRange(r.start,r.end,{animation:o})):2==arguments.length&&"function"==typeof arguments[1]?(r=arguments[0],n=arguments[1],o=void 0===r.animation||r.animation,this.range.setRange(r.start,r.end,{animation:o},n)):(o=!i||void 0===i.animation||i.animation,this.range.setRange(t,e,{animation:o},n))},p.prototype.moveTo=function(t,e,i){"function"==typeof arguments[1]&&(i=arguments[1],e={});var n=this.range.end-this.range.start,o=u.convert(t,"Date").valueOf(),r=o-n/2,a=o+n/2,s=!e||void 0===e.animation||e.animation;this.range.setRange(r,a,{animation:s},i)},p.prototype.getWindow=function(){var t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}},p.prototype.zoomIn=function(t,e,i){if(!(!t||t<0||t>1)){"function"==typeof arguments[1]&&(i=arguments[1],e={});var n=this.getWindow(),o=n.start.valueOf(),r=n.end.valueOf(),a=r-o,s=a/(1+t),l=(a-s)/2,u=o+l,d=r-l;this.setWindow(u,d,e,i)}},p.prototype.zoomOut=function(t,e,i){if(!(!t||t<0||t>1)){"function"==typeof arguments[1]&&(i=arguments[1],e={});var n=this.getWindow(),o=n.start.valueOf(),r=n.end.valueOf(),a=r-o,s=o-a*t/2,l=r+a*t/2;this.setWindow(s,l,e,i)}},p.prototype.redraw=function(){this._redraw()},p.prototype._redraw=function(){this.redrawCount++;var t=!1,e=this.options,i=this.props,n=this.dom;if(n&&n.container&&0!=n.root.offsetWidth){c.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),"top"==e.orientation?(u.addClassName(n.root,"vis-top"),u.removeClassName(n.root,"vis-bottom")):(u.removeClassName(n.root,"vis-top"),u.addClassName(n.root,"vis-bottom")),n.root.style.maxHeight=u.option.asSize(e.maxHeight,""),n.root.style.minHeight=u.option.asSize(e.minHeight,""),n.root.style.width=u.option.asSize(e.width,""),i.border.left=(n.centerContainer.offsetWidth-n.centerContainer.clientWidth)/2,i.border.right=i.border.left,i.border.top=(n.centerContainer.offsetHeight-n.centerContainer.clientHeight)/2,i.border.bottom=i.border.top,i.borderRootHeight=n.root.offsetHeight-n.root.clientHeight,i.borderRootWidth=n.root.offsetWidth-n.root.clientWidth,0===n.centerContainer.clientHeight&&(i.border.left=i.border.top,i.border.right=i.border.left),0===n.root.clientHeight&&(i.borderRootWidth=i.borderRootHeight),i.center.height=n.center.offsetHeight,i.left.height=n.left.offsetHeight,i.right.height=n.right.offsetHeight,i.top.height=n.top.clientHeight||-i.border.top,i.bottom.height=n.bottom.clientHeight||-i.border.bottom;var o=Math.max(i.left.height,i.center.height,i.right.height),r=i.top.height+o+i.bottom.height+i.borderRootHeight+i.border.top+i.border.bottom;n.root.style.height=u.option.asSize(e.height,r+"px"),i.root.height=n.root.offsetHeight,i.background.height=i.root.height-i.borderRootHeight;var a=i.root.height-i.top.height-i.bottom.height-i.borderRootHeight;i.centerContainer.height=a,i.leftContainer.height=a,i.rightContainer.height=i.leftContainer.height,i.root.width=n.root.offsetWidth,i.background.width=i.root.width-i.borderRootWidth,this.initialDrawDone||(i.scrollbarWidth=u.getScrollBarWidth()),e.verticalScroll?e.rtl?(i.left.width=n.leftContainer.clientWidth||-i.border.left,i.right.width=n.rightContainer.clientWidth+i.scrollbarWidth||-i.border.right):(i.left.width=n.leftContainer.clientWidth+i.scrollbarWidth||-i.border.left,i.right.width=n.rightContainer.clientWidth||-i.border.right):(i.left.width=n.leftContainer.clientWidth||-i.border.left,i.right.width=n.rightContainer.clientWidth||-i.border.right),this._setDOM();var l=this._updateScrollTop();"top"!=e.orientation.item&&(l+=Math.max(i.centerContainer.height-i.center.height-i.border.top-i.border.bottom,0)),n.center.style.top=l+"px";var d=0==i.scrollTop?"hidden":"",h=i.scrollTop==i.scrollTopMin?"hidden":"";n.shadowTop.style.visibility=d,n.shadowBottom.style.visibility=h,n.shadowTopLeft.style.visibility=d,n.shadowBottomLeft.style.visibility=h,n.shadowTopRight.style.visibility=d,n.shadowBottomRight.style.visibility=h,e.verticalScroll&&(n.rightContainer.className="vis-panel vis-right vis-vertical-scroll",n.leftContainer.className="vis-panel vis-left vis-vertical-scroll",n.shadowTopRight.style.visibility="hidden",n.shadowBottomRight.style.visibility="hidden",n.shadowTopLeft.style.visibility="hidden",n.shadowBottomLeft.style.visibility="hidden",n.left.style.top="0px",n.right.style.top="0px"),(!e.verticalScroll||i.center.height<i.centerContainer.height)&&(n.left.style.top=l+"px",n.right.style.top=l+"px",n.rightContainer.className=n.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),n.leftContainer.className=n.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),i.left.width=n.leftContainer.clientWidth||-i.border.left,i.right.width=n.rightContainer.clientWidth||-i.border.right,this._setDOM());var f=i.center.height>i.centerContainer.height;if(this.hammer.get("pan").set({direction:f?s.DIRECTION_ALL:s.DIRECTION_HORIZONTAL}),this.components.forEach(function(e){t=e.redraw()||t}),t){if(this.redrawCount<5)return void this.body.emitter.emit("_change");console.log("WARNING: infinite loop in redraw?")}else this.redrawCount=0;this.body.emitter.emit("changed")}},p.prototype._setDOM=function(){var t=this.props,e=this.dom;t.leftContainer.width=t.left.width,t.rightContainer.width=t.right.width;var i=t.root.width-t.left.width-t.right.width-t.borderRootWidth;t.center.width=i,t.centerContainer.width=i,t.top.width=i,t.bottom.width=i,e.background.style.height=t.background.height+"px",e.backgroundVertical.style.height=t.background.height+"px",e.backgroundHorizontal.style.height=t.centerContainer.height+"px",e.centerContainer.style.height=t.centerContainer.height+"px",e.leftContainer.style.height=t.leftContainer.height+"px",e.rightContainer.style.height=t.rightContainer.height+"px",e.background.style.width=t.background.width+"px",e.backgroundVertical.style.width=t.centerContainer.width+"px",e.backgroundHorizontal.style.width=t.background.width+"px",e.centerContainer.style.width=t.center.width+"px",e.top.style.width=t.top.width+"px",e.bottom.style.width=t.bottom.width+"px",e.background.style.left="0",e.background.style.top="0",e.backgroundVertical.style.left=t.left.width+t.border.left+"px",e.backgroundVertical.style.top="0",e.backgroundHorizontal.style.left="0",e.backgroundHorizontal.style.top=t.top.height+"px",e.centerContainer.style.left=t.left.width+"px",e.centerContainer.style.top=t.top.height+"px",e.leftContainer.style.left="0",e.leftContainer.style.top=t.top.height+"px",e.rightContainer.style.left=t.left.width+t.center.width+"px",e.rightContainer.style.top=t.top.height+"px",e.top.style.left=t.left.width+"px",e.top.style.top="0",e.bottom.style.left=t.left.width+"px",e.bottom.style.top=t.top.height+t.centerContainer.height+"px",e.center.style.left="0",e.left.style.left="0",e.right.style.left="0"},p.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")},p.prototype.setCurrentTime=function(t){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(t)},p.prototype.getCurrentTime=function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()},p.prototype._toTime=function(t){return c.toTime(this,t,this.props.center.width)},p.prototype._toGlobalTime=function(t){return c.toTime(this,t,this.props.root.width)},p.prototype._toScreen=function(t){return c.toScreen(this,t,this.props.center.width)},p.prototype._toGlobalScreen=function(t){return c.toScreen(this,t,this.props.root.width)},p.prototype._initAutoResize=function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()},p.prototype._startAutoResize=function(){var t=this;this._stopAutoResize(),this._onResize=function(){1==t.options.autoResize?t.dom.root&&(t.dom.root.offsetWidth==t.props.lastWidth&&t.dom.root.offsetHeight==t.props.lastHeight||(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight,t.props.scrollbarWidth=u.getScrollBarWidth(),t.body.emitter.emit("_change"))):t._stopAutoResize()},u.addEventListener(window,"resize",this._onResize),t.dom.root&&(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight),this.watchTimer=setInterval(this._onResize,1e3)},p.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(u.removeEventListener(window,"resize",this._onResize),this._onResize=null)},p.prototype._onTouch=function(t){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop},p.prototype._onPinch=function(t){this.touch.allowDragging=!1},p.prototype._onDrag=function(t){if(t&&this.touch.allowDragging){var e=t.deltaY,i=this._getScrollTop(),n=this._setScrollTop(this.touch.initialScrollTop+e);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),n!=i&&this.emit("verticalDrag")}},p.prototype._setScrollTop=function(t){return this.props.scrollTop=t,this._updateScrollTop(),this.props.scrollTop},p.prototype._updateScrollTop=function(){var t=Math.min(this.props.centerContainer.height-this.props.center.height,0);return t!=this.props.scrollTopMin&&("top"!=this.options.orientation.item&&(this.props.scrollTop+=t-this.props.scrollTopMin),this.props.scrollTopMin=t),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<t&&(this.props.scrollTop=t),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop},p.prototype._getScrollTop=function(){return this.props.scrollTop},p.prototype._createConfigurator=function(){throw new Error("Cannot invoke abstract method _createConfigurator")},t.exports=p},function(t,e,i){var n=i(9),o=i(36),r=i(2);function a(t,e,i,o,r){this.moment=n,this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(t,e,i),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(o)?this.hiddenDates=o:this.hiddenDates=null!=o?[o]:[],this.format=a.FORMAT,this.options=r||{}}a.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},a.prototype.setMoment=function(t){this.moment=t,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())},a.prototype.setFormat=function(t){var e=r.deepExtend({},a.FORMAT);this.format=r.deepExtend(e,t)},a.prototype.setRange=function(t,e,i){if(!(t instanceof Date&&e instanceof Date))throw"No legal start or end date in method setRange";this._start=null!=t?this.moment(t.valueOf()):new Date,this._end=null!=e?this.moment(e.valueOf()):new Date,this.autoScale&&this.setMinimumStep(i)},a.prototype.start=function(){this.current=this._start.clone(),this.roundToMinor()},a.prototype.roundToMinor=function(){switch("week"==this.scale&&this.current.weekday(0),this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"week":case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(1!=this.step)switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year")}},a.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()},a.prototype.next=function(){var t=this.current.valueOf();switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.month()<6?this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!=0&&this.current.add(this.step-this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"week":if(0!==this.current.weekday())this.current.weekday(0),this.current.add(this.step,"week");else if(!1===this.options.showMajorLabels)this.current.add(this.step,"week");else{var e=this.current.clone();e.add(1,"week"),e.isSame(this.current,"month")?this.current.add(this.step,"week"):(this.current.add(this.step,"week"),this.current.date(1))}break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}if(1!=this.step)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"week":this.current.week()<this.step&&this.current.week(1);break;case"month":this.current.month()<this.step&&this.current.month(0)}this.current.valueOf()==t&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,o.stepOverHiddenDates(this.moment,this,t)},a.prototype.getCurrent=function(){return this.current},a.prototype.setScale=function(t){t&&"string"==typeof t.scale&&(this.scale=t.scale,this.step=t.step>0?t.step:1,this.autoScale=!1)},a.prototype.setAutoScale=function(t){this.autoScale=t},a.prototype.setMinimumStep=function(t){null!=t&&(31104e9>t&&(this.scale="year",this.step=1e3),15552e9>t&&(this.scale="year",this.step=500),31104e8>t&&(this.scale="year",this.step=100),15552e8>t&&(this.scale="year",this.step=50),31104e7>t&&(this.scale="year",this.step=10),15552e7>t&&(this.scale="year",this.step=5),31104e6>t&&(this.scale="year",this.step=1),7776e6>t&&(this.scale="month",this.step=3),2592e6>t&&(this.scale="month",this.step=1),432e6>t&&(this.scale="day",this.step=5),1728e5>t&&(this.scale="day",this.step=2),864e5>t&&(this.scale="day",this.step=1),432e5>t&&(this.scale="weekday",this.step=1),144e5>t&&(this.scale="hour",this.step=4),36e5>t&&(this.scale="hour",this.step=1),9e5>t&&(this.scale="minute",this.step=15),6e5>t&&(this.scale="minute",this.step=10),3e5>t&&(this.scale="minute",this.step=5),6e4>t&&(this.scale="minute",this.step=1),15e3>t&&(this.scale="second",this.step=15),1e4>t&&(this.scale="second",this.step=10),5e3>t&&(this.scale="second",this.step=5),1e3>t&&(this.scale="second",this.step=1),200>t&&(this.scale="millisecond",this.step=200),100>t&&(this.scale="millisecond",this.step=100),50>t&&(this.scale="millisecond",this.step=50),10>t&&(this.scale="millisecond",this.step=10),5>t&&(this.scale="millisecond",this.step=5),1>t&&(this.scale="millisecond",this.step=1))},a.snap=function(t,e,i){var o=n(t);if("year"==e){var r=o.year()+Math.round(o.month()/12);o.year(Math.round(r/i)*i),o.month(0),o.date(0),o.hours(0),o.minutes(0),o.seconds(0),o.milliseconds(0)}else if("month"==e)o.date()>15?(o.date(1),o.add(1,"month")):o.date(1),o.hours(0),o.minutes(0),o.seconds(0),o.milliseconds(0);else if("week"==e)o.weekday()>2?(o.weekday(0),o.add(1,"week")):o.weekday(0),o.hours(0),o.minutes(0),o.seconds(0),o.milliseconds(0);else if("day"==e){switch(i){case 5:case 2:o.hours(24*Math.round(o.hours()/24));break;default:o.hours(12*Math.round(o.hours()/12))}o.minutes(0),o.seconds(0),o.milliseconds(0)}else if("weekday"==e){switch(i){case 5:case 2:o.hours(12*Math.round(o.hours()/12));break;default:o.hours(6*Math.round(o.hours()/6))}o.minutes(0),o.seconds(0),o.milliseconds(0)}else if("hour"==e){switch(i){case 4:o.minutes(60*Math.round(o.minutes()/60));break;default:o.minutes(30*Math.round(o.minutes()/30))}o.seconds(0),o.milliseconds(0)}else if("minute"==e){switch(i){case 15:case 10:o.minutes(5*Math.round(o.minutes()/5)),o.seconds(0);break;case 5:o.seconds(60*Math.round(o.seconds()/60));break;default:o.seconds(30*Math.round(o.seconds()/30))}o.milliseconds(0)}else if("second"==e)switch(i){case 15:case 10:o.seconds(5*Math.round(o.seconds()/5)),o.milliseconds(0);break;case 5:o.milliseconds(1e3*Math.round(o.milliseconds()/1e3));break;default:o.milliseconds(500*Math.round(o.milliseconds()/500))}else if("millisecond"==e){var a=i>5?i/2:1;o.milliseconds(Math.round(o.milliseconds()/a)*a)}return o},a.prototype.isMajor=function(){if(1==this.switchedYear)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedMonth)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedDay)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var t=this.moment(this.current);switch(this.scale){case"millisecond":return 0==t.milliseconds();case"second":return 0==t.seconds();case"minute":return 0==t.hours()&&0==t.minutes();case"hour":return 0==t.hours();case"weekday":case"day":case"week":return 1==t.date();case"month":return 0==t.month();case"year":default:return!1}},a.prototype.getLabelMinor=function(t){if(null==t&&(t=this.current),t instanceof Date&&(t=this.moment(t)),"function"==typeof this.format.minorLabels)return this.format.minorLabels(t,this.scale,this.step);var e=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(this.isMajor()&&0!==t.weekday())return"";default:return e&&e.length>0?this.moment(t).format(e):""}},a.prototype.getLabelMajor=function(t){if(null==t&&(t=this.current),t instanceof Date&&(t=this.moment(t)),"function"==typeof this.format.majorLabels)return this.format.majorLabels(t,this.scale,this.step);var e=this.format.majorLabels[this.scale];return e&&e.length>0?this.moment(t).format(e):""},a.prototype.getClassName=function(){var t=this.moment,e=this.moment(this.current),i=e.locale?e.locale("en"):e.lang("en"),n=this.step,o=[];function r(t){return t/n%2==0?" vis-even":" vis-odd"}function a(e){return e.isSame(new Date,"day")?" vis-today":e.isSame(t().add(1,"day"),"day")?" vis-tomorrow":e.isSame(t().add(-1,"day"),"day")?" vis-yesterday":""}function s(t){return t.isSame(new Date,"week")?" vis-current-week":""}function l(t){return t.isSame(new Date,"month")?" vis-current-month":""}switch(this.scale){case"millisecond":o.push(a(i)),o.push(r(i.milliseconds()));break;case"second":o.push(a(i)),o.push(r(i.seconds()));break;case"minute":o.push(a(i)),o.push(r(i.minutes()));break;case"hour":o.push("vis-h"+i.hours()+(4==this.step?"-h"+(i.hours()+4):"")),o.push(a(i)),o.push(r(i.hours()));break;case"weekday":o.push("vis-"+i.format("dddd").toLowerCase()),o.push(a(i)),o.push(s(i)),o.push(r(i.date()));break;case"day":o.push("vis-day"+i.date()),o.push("vis-"+i.format("MMMM").toLowerCase()),o.push(a(i)),o.push(l(i)),o.push(this.step<=2?a(i):""),o.push(this.step<=2?"vis-"+i.format("dddd").toLowerCase():""),o.push(r(i.date()-1));break;case"week":o.push("vis-week"+i.format("w")),o.push(s(i)),o.push(r(i.week()));break;case"month":o.push("vis-"+i.format("MMMM").toLowerCase()),o.push(l(i)),o.push(r(i.month()));break;case"year":o.push("vis-year"+i.year()),o.push(i.isSame(new Date,"year")?" vis-current-year":""),o.push(r(i.year()))}return o.filter(String).join(" ")},t.exports=a},function(t,e,i){var n=i(2),o=i(16),r=i(9),a=i(98);function s(t,e){this.body=t,this.defaultOptions={rtl:!1,showCurrentTime:!0,moment:r,locales:a,locale:"en"},this.options=n.extend({},this.defaultOptions),this.offset=0,this._create(),this.setOptions(e)}s.prototype=new o,s.prototype._create=function(){var t=document.createElement("div");t.className="vis-current-time",t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t},s.prototype.destroy=function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null},s.prototype.setOptions=function(t){t&&n.selectiveExtend(["rtl","showCurrentTime","moment","locale","locales"],this.options,t)},s.prototype.redraw=function(){if(this.options.showCurrentTime){var t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar),this.start());var e=this.options.moment((new Date).valueOf()+this.offset),i=this.body.util.toScreen(e),n=this.options.locales[this.options.locale];n||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline/#Localization"),this.warned=!0),n=this.options.locales.en);var o=n.current+" "+n.time+": "+e.format("dddd, MMMM Do YYYY, H:mm:ss");o=o.charAt(0).toUpperCase()+o.substring(1),this.options.rtl?this.bar.style.right=i+"px":this.bar.style.left=i+"px",this.bar.title=o}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1},s.prototype.start=function(){var t=this;!function e(){t.stop();var i=1/t.body.range.conversion(t.body.domProps.center.width).scale/10;i<30&&(i=30),i>1e3&&(i=1e3),t.redraw(),t.body.emitter.emit("currentTimeTick"),t.currentTimeTimer=setTimeout(e,i)}()},s.prototype.stop=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)},s.prototype.setCurrentTime=function(t){var e=n.convert(t,"Date").valueOf(),i=(new Date).valueOf();this.offset=e-i,this.redraw()},s.prototype.getCurrentTime=function(){return new Date((new Date).valueOf()+this.offset)},t.exports=s},function(t,e,i){var n,o=i(8),r=(n=o)&&n.__esModule?n:{default:n},a=i(2),s=i(100);function l(t,e,i){if(this.groupId=t,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.doInnerStack=!1,this.subgroupIndex=0,this.subgroupOrderer=e&&e.subgroupOrder,this.itemSet=i,this.isVisible=null,this.stackDirty=!0,e&&e.nestedGroups&&(this.nestedGroups=e.nestedGroups,0==e.showNested?this.showNested=!1:this.showNested=!0),e&&e.subgroupStack)if("boolean"==typeof e.subgroupStack)this.doInnerStack=e.subgroupStack,this.subgroupStackAll=e.subgroupStack;else for(var n in e.subgroupStack)this.subgroupStack[n]=e.subgroupStack[n],this.doInnerStack=this.doInnerStack||e.subgroupStack[n];this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var o=this;this.itemSet.body.emitter.on("checkRangedItems",function(){o.checkRangedItems=!0}),this._create(),this.setData(e)}l.prototype._create=function(){var t=document.createElement("div");this.itemSet.options.groupEditable.order?t.className="vis-label draggable":t.className="vis-label",this.dom.label=t;var e=document.createElement("div");e.className="vis-inner",t.appendChild(e),this.dom.inner=e;var i=document.createElement("div");i.className="vis-group",i["timeline-group"]=this,this.dom.foreground=i,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)},l.prototype.setData=function(t){var e,i;if((e=this.itemSet.options&&this.itemSet.options.groupTemplate?(i=this.itemSet.options.groupTemplate.bind(this))(t,this.dom.inner):t&&t.content)instanceof Element){for(this.dom.inner.appendChild(e);this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(e)}else e instanceof Object?i(t,this.dom.inner):this.dom.inner.innerHTML=null!=e?e:this.groupId||"";if(this.dom.label.title=t&&t.title||"",this.dom.inner.firstChild?a.removeClassName(this.dom.inner,"vis-hidden"):a.addClassName(this.dom.inner,"vis-hidden"),t&&t.nestedGroups){this.nestedGroups&&this.nestedGroups==t.nestedGroups||(this.nestedGroups=t.nestedGroups),void 0===t.showNested&&void 0!==this.showNested||(0==t.showNested?this.showNested=!1:this.showNested=!0),a.addClassName(this.dom.label,"vis-nesting-group");var n=this.itemSet.options.rtl?"collapsed-rtl":"collapsed";this.showNested?(a.removeClassName(this.dom.label,n),a.addClassName(this.dom.label,"expanded")):(a.removeClassName(this.dom.label,"expanded"),a.addClassName(this.dom.label,n))}else this.nestedGroups&&(this.nestedGroups=null,n=this.itemSet.options.rtl?"collapsed-rtl":"collapsed",a.removeClassName(this.dom.label,n),a.removeClassName(this.dom.label,"expanded"),a.removeClassName(this.dom.label,"vis-nesting-group"));t&&t.nestedInGroup&&(a.addClassName(this.dom.label,"vis-nested-group"),this.itemSet.options&&this.itemSet.options.rtl?this.dom.inner.style.paddingRight="30px":this.dom.inner.style.paddingLeft="30px");var o=t&&t.className||null;o!=this.className&&(this.className&&(a.removeClassName(this.dom.label,this.className),a.removeClassName(this.dom.foreground,this.className),a.removeClassName(this.dom.background,this.className),a.removeClassName(this.dom.axis,this.className)),a.addClassName(this.dom.label,o),a.addClassName(this.dom.foreground,o),a.addClassName(this.dom.background,o),a.addClassName(this.dom.axis,o),this.className=o),this.style&&(a.removeCssText(this.dom.label,this.style),this.style=null),t&&t.style&&(a.addCssText(this.dom.label,t.style),this.style=t.style)},l.prototype.getLabelWidth=function(){return this.props.label.width},l.prototype._didMarkerHeightChange=function(){var t=this.dom.marker.clientHeight;if(t!=this.lastMarkerHeight){this.lastMarkerHeight=t;var e={},i=0;if(a.forEach(this.items,function(t,n){t.dirty=!0,t.displayed&&(e[n]=t.redraw(!0),i=e[n].length)}),i>0)for(var n=0;n<i;n++)a.forEach(e,function(t){t[n]()});return!0}},l.prototype._calculateGroupSizeAndPosition=function(){var t=this.dom.foreground.offsetTop,e=this.dom.foreground.offsetLeft,i=this.dom.foreground.offsetWidth;this.top=t,this.right=e,this.width=i},l.prototype._redrawItems=function(t,e,i,n){if(t||this.stackDirty||this.isVisible&&!e){var o={},r=null;if("function"==typeof this.itemSet.options.order){var l=this,u={},d=0;if(a.forEach(this.items,function(t,e){t.displayed||(u[e]=t.redraw(!0),d=u[e].length,l.visibleItems.push(t))}),d>0)for(var h=0;h<d;h++)a.forEach(u,function(t){t[h]()});if(a.forEach(this.items,function(t){t.repositionX(!1)}),this.doInnerStack&&this.itemSet.options.stackSubgroups){for(r in this.subgroups)o[r]=this.subgroups[r].items.slice().sort(function(t,e){return l.itemSet.options.order(t.data,e.data)});s.stackSubgroupsWithInnerStack(o,i,this.subgroups)}else{var c=this.orderedItems.byStart.slice().sort(function(t,e){return l.itemSet.options.order(t.data,e.data)});s.stack(c,i,!0)}this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,n)}else if(this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,n),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){for(r in this.subgroups)o[r]=this.subgroups[r].items;s.stackSubgroupsWithInnerStack(o,i,this.subgroups)}else s.stack(this.visibleItems,i,!0);else s.nostack(this.visibleItems,i,this.subgroups,this.itemSet.options.stackSubgroups);this.stackDirty=!1}},l.prototype._didResize=function(t,e){t=a.updateProperty(this,"height",e)||t;var i=this.dom.inner.clientWidth,n=this.dom.inner.clientHeight;return t=a.updateProperty(this.props.label,"width",i)||t,t=a.updateProperty(this.props.label,"height",n)||t},l.prototype._applyGroupHeight=function(t){this.dom.background.style.height=t+"px",this.dom.foreground.style.height=t+"px",this.dom.label.style.height=t+"px"},l.prototype._updateItemsVerticalPosition=function(t){for(var e=0,i=this.visibleItems.length;e<i;e++){var n=this.visibleItems[e];n.repositionY(t),this.isVisible||"__background__"==this.groupId||n.displayed&&n.hide()}},l.prototype.redraw=function(t,e,i,n){var o,r,a=!1,s=this.isVisible,l=[function(){i=this._didMarkerHeightChange.bind(this)}.bind(this),this._updateSubGroupHeights.bind(this,e),this._calculateGroupSizeAndPosition.bind(this),function(){this.isVisible=this._isGroupVisible.bind(this)(t,e)}.bind(this),function(){this._redrawItems.bind(this)(i,s,e,t)}.bind(this),this._updateSubgroupsSizes.bind(this),function(){o=this._calculateHeight.bind(this)(e)}.bind(this),this._calculateGroupSizeAndPosition.bind(this),function(){a=this._didResize.bind(this)(a,o)}.bind(this),function(){this._applyGroupHeight.bind(this)(o)}.bind(this),function(){this._updateItemsVerticalPosition.bind(this)(e)}.bind(this),function(){return!this.isVisible&&this.height&&(a=!1),a}];return n?l:(l.forEach(function(t){r=t()}),r)},l.prototype._updateSubGroupHeights=function(t){if((0,r.default)(this.subgroups).length>0){var e=this;this.resetSubgroups(),a.forEach(this.visibleItems,function(i){void 0!==i.data.subgroup&&(e.subgroups[i.data.subgroup].height=Math.max(e.subgroups[i.data.subgroup].height,i.height+t.item.vertical),e.subgroups[i.data.subgroup].visible=!0)})}},l.prototype._isGroupVisible=function(t,e){return this.top<=t.body.domProps.centerContainer.height-t.body.domProps.scrollTop+e.axis&&this.top+this.height+e.axis>=-t.body.domProps.scrollTop},l.prototype._calculateHeight=function(t){var e,i=this.visibleItems;if(i.length>0){var n=i[0].top,o=i[0].top+i[0].height;if(a.forEach(i,function(t){n=Math.min(n,t.top),o=Math.max(o,t.top+t.height)}),n>t.axis){var r=n-t.axis;o-=r,a.forEach(i,function(t){t.top-=r})}e=o+t.item.vertical/2}else e=0;return e=Math.max(e,this.props.label.height)},l.prototype.show=function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)},l.prototype.hide=function(){var t=this.dom.label;t.parentNode&&t.parentNode.removeChild(t);var e=this.dom.foreground;e.parentNode&&e.parentNode.removeChild(e);var i=this.dom.background;i.parentNode&&i.parentNode.removeChild(i);var n=this.dom.axis;n.parentNode&&n.parentNode.removeChild(n)},l.prototype.add=function(t){if(this.items[t.id]=t,t.setParent(this),this.stackDirty=!0,void 0!==t.data.subgroup&&(this._addToSubgroup(t),this.orderSubgroups()),-1==this.visibleItems.indexOf(t)){var e=this.itemSet.body.range;this._checkIfVisible(t,this.visibleItems,e)}},l.prototype._addToSubgroup=function(t,e){null!=(e=e||t.data.subgroup)&&void 0===this.subgroups[e]&&(this.subgroups[e]={height:0,top:0,start:t.data.start,end:t.data.end||t.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[e]||!1},this.subgroupIndex++),new Date(t.data.start)<new Date(this.subgroups[e].start)&&(this.subgroups[e].start=t.data.start);var i=t.data.end||t.data.start;new Date(i)>new Date(this.subgroups[e].end)&&(this.subgroups[e].end=i),this.subgroups[e].items.push(t)},l.prototype._updateSubgroupsSizes=function(){var t=this;if(t.subgroups)for(var e in t.subgroups){var i=t.subgroups[e].items[0].data.end||t.subgroups[e].items[0].data.start,n=t.subgroups[e].items[0].data.start,o=i-1;t.subgroups[e].items.forEach(function(t){new Date(t.data.start)<new Date(n)&&(n=t.data.start);var e=t.data.end||t.data.start;new Date(e)>new Date(o)&&(o=e)}),t.subgroups[e].start=n,t.subgroups[e].end=new Date(o-1)}},l.prototype.orderSubgroups=function(){if(void 0!==this.subgroupOrderer){var t,e=[];if("string"==typeof this.subgroupOrderer){for(t in this.subgroups)e.push({subgroup:t,sortField:this.subgroups[t].items[0].data[this.subgroupOrderer]});e.sort(function(t,e){return t.sortField-e.sortField})}else if("function"==typeof this.subgroupOrderer){for(t in this.subgroups)e.push(this.subgroups[t].items[0].data);e.sort(this.subgroupOrderer)}if(e.length>0)for(var i=0;i<e.length;i++)this.subgroups[e[i].subgroup].index=i}},l.prototype.resetSubgroups=function(){for(var t in this.subgroups)this.subgroups.hasOwnProperty(t)&&(this.subgroups[t].visible=!1,this.subgroups[t].height=0)},l.prototype.remove=function(t){delete this.items[t.id],t.setParent(null),this.stackDirty=!0;var e=this.visibleItems.indexOf(t);-1!=e&&this.visibleItems.splice(e,1),void 0!==t.data.subgroup&&(this._removeFromSubgroup(t),this.orderSubgroups())},l.prototype._removeFromSubgroup=function(t,e){if(null!=(e=e||t.data.subgroup)){var i=this.subgroups[e];if(i){var n=i.items.indexOf(t);n>=0&&(i.items.splice(n,1),i.items.length?this._updateSubgroupsSizes():delete this.subgroups[e])}}},l.prototype.removeFromDataSet=function(t){this.itemSet.removeItem(t.id)},l.prototype.order=function(){for(var t=a.toArray(this.items),e=[],i=[],n=0;n<t.length;n++)void 0!==t[n].data.end&&i.push(t[n]),e.push(t[n]);this.orderedItems={byStart:e,byEnd:i},s.orderByStart(this.orderedItems.byStart),s.orderByEnd(this.orderedItems.byEnd)},l.prototype._updateItemsInRange=function(t,e,i){var n=[],o={},r=(i.end-i.start)/4,s=i.start-r,l=i.end+r,u=function(t){return t<s?-1:t<=l?0:1};if(e.length>0)for(var d=0;d<e.length;d++)this._checkIfVisibleWithReference(e[d],n,o,i);var h=a.binarySearchCustom(t.byStart,u,"data","start");if(this._traceVisible(h,t.byStart,n,o,function(t){return t.data.start<s||t.data.start>l}),1==this.checkRangedItems)for(this.checkRangedItems=!1,d=0;d<t.byEnd.length;d++)this._checkIfVisibleWithReference(t.byEnd[d],n,o,i);else{var c=a.binarySearchCustom(t.byEnd,u,"data","end");this._traceVisible(c,t.byEnd,n,o,function(t){return t.data.end<s||t.data.end>l})}var f={},p=0;for(d=0;d<n.length;d++){var g=n[d];g.displayed||(f[d]=g.redraw(!0),p=f[d].length)}if(p>0)for(var m=0;m<p;m++)a.forEach(f,function(t){t[m]()});for(d=0;d<n.length;d++)n[d].repositionX();return n},l.prototype._traceVisible=function(t,e,i,n,o){if(-1!=t){var r,a;for(r=t;r>=0&&!o(a=e[r]);r--)void 0===n[a.id]&&(n[a.id]=!0,i.push(a));for(r=t+1;r<e.length&&!o(a=e[r]);r++)void 0===n[a.id]&&(n[a.id]=!0,i.push(a))}},l.prototype._checkIfVisible=function(t,e,i){t.isVisible(i)?(t.displayed||t.show(),t.repositionX(),e.push(t)):t.displayed&&t.hide()},l.prototype._checkIfVisibleWithReference=function(t,e,i,n){t.isVisible(n)?void 0===i[t.id]&&(i[t.id]=!0,e.push(t)):t.displayed&&t.hide()},l.prototype.changeSubgroup=function(t,e,i){this._removeFromSubgroup(t,e),this._addToSubgroup(t,i),this.orderSubgroups()},t.exports=l},function(t,e,i){var n,o=i(29),r=(n=o)&&n.__esModule?n:{default:n},a=i(68);function s(t,e,i){a.call(this,t,e,i),this.width=0,this.height=0,this.top=0,this.left=0}s.prototype=(0,r.default)(a.prototype),s.prototype.redraw=function(t,e,i){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,t),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var n=0,o=this.visibleItems.length;n<o;n++)this.visibleItems[n].repositionY(e);return!1},s.prototype.show=function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)},t.exports=s},function(t,e,i){var n=i(38);function o(t,e,i){if(this.props={content:{width:0}},this.overflow=!1,this.options=i,t){if(null==t.start)throw new Error('Property "start" missing in item '+t.id);if(null==t.end)throw new Error('Property "end" missing in item '+t.id)}n.call(this,t,e,i)}o.prototype=new n(null,null,null),o.prototype.baseClassName="vis-item vis-range",o.prototype.isVisible=function(t){return this.data.start<t.end&&this.data.end>t.start},o.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["timeline-item"]=this,this.dirty=!0)},o.prototype._appendDomElement=function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}this.displayed=!0},o.prototype._updateDirtyDomComponents=function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var t=this.editable.updateTime||this.editable.updateGroup,e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+e,this.dom.content.style.maxWidth="none"}},o.prototype._getDomComponentsSizes=function(){return this.overflow="hidden"!==window.getComputedStyle(this.dom.frame).overflow,{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}},o.prototype._updateDomComponentsSizes=function(t){this.props.content.width=t.content.width,this.height=t.box.height,this.dom.content.style.maxWidth="",this.dirty=!1},o.prototype._repaintDomAdditionals=function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()},o.prototype.redraw=function(t){var e,i,n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){this.dirty&&(e=this._getDomComponentsSizes.bind(this)())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(e)}.bind(this),this._repaintDomAdditionals.bind(this)];return t?n:(n.forEach(function(t){i=t()}),i)},o.prototype.show=function(){this.displayed||this.redraw()},o.prototype.hide=function(){if(this.displayed){var t=this.dom.box;t.parentNode&&t.parentNode.removeChild(t),this.displayed=!1}},o.prototype.repositionX=function(t){var e,i,n=this.parent.width,o=this.conversion.toScreen(this.data.start),r=this.conversion.toScreen(this.data.end),a=void 0===this.data.align?this.options.align:this.data.align;!1===this.data.limitSize||void 0!==t&&!0!==t||(o<-n&&(o=-n),r>2*n&&(r=2*n));var s=Math.max(r-o+.5,1);switch(this.overflow?(this.options.rtl?this.right=o:this.left=o,this.width=s+this.props.content.width,i=this.props.content.width):(this.options.rtl?this.right=o:this.left=o,this.width=s,i=Math.min(r-o,this.props.content.width)),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=s+"px",a){case"left":this.options.rtl?this.dom.content.style.right="0":this.dom.content.style.left="0";break;case"right":this.options.rtl?this.dom.content.style.right=Math.max(s-i,0)+"px":this.dom.content.style.left=Math.max(s-i,0)+"px";break;case"center":this.options.rtl?this.dom.content.style.right=Math.max((s-i)/2,0)+"px":this.dom.content.style.left=Math.max((s-i)/2,0)+"px";break;default:e=this.overflow?r>0?Math.max(-o,0):-i:o<0?-o:0,this.options.rtl?this.dom.content.style.right=e+"px":(this.dom.content.style.left=e+"px",this.dom.content.style.width="calc(100% - "+e+"px)")}},o.prototype.repositionY=function(){var t=this.options.orientation.item,e=this.dom.box;e.style.top="top"==t?this.top+"px":this.parent.height-this.top-this.height+"px"},o.prototype._repaintDragLeft=function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.options.editable.updateTime&&!this.dom.dragLeft){var t=document.createElement("div");t.className="vis-drag-left",t.dragLeftItem=this,this.dom.box.appendChild(t),this.dom.dragLeft=t}else this.selected||this.options.itemsAlwaysDraggable.range||!this.dom.dragLeft||(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)},o.prototype._repaintDragRight=function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.options.editable.updateTime&&!this.dom.dragRight){var t=document.createElement("div");t.className="vis-drag-right",t.dragRightItem=this,this.dom.box.appendChild(t),this.dom.dragRight=t}else this.selected||this.options.itemsAlwaysDraggable.range||!this.dom.dragRight||(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)},t.exports=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(19)),o=s(i(6)),r=s(i(0)),a=s(i(1));function s(t){return t&&t.__esModule?t:{default:t}}var l=i(2),u=i(179).default,d=function(){function t(e,i,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,r.default)(this,t),this.parent=e,this.changedOptions=[],this.container=i,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},l.extend(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new u(o),this.wrapper=void 0}return(0,a.default)(t,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var e=!0;"string"==typeof t?this.options.filter=t:t instanceof Array?this.options.filter=t.join():"object"===(void 0===t?"undefined":(0,o.default)(t))?(void 0!==t.container&&(this.options.container=t.container),void 0!==t.filter&&(this.options.filter=t.filter),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)):"boolean"==typeof t?(this.options.filter=!0,e=t):"function"==typeof t&&(this.options.filter=t,e=!0),!1===this.options.filter&&(e=!1),this.options.enabled=e}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){var t=this;this._clean(),this.changedOptions=[];var e=this.options.filter,i=0,n=!1;for(var o in this.configureOptions)this.configureOptions.hasOwnProperty(o)&&(this.allowCreation=!1,n=!1,"function"==typeof e?n=(n=e(o,[]))||this._handleObject(this.configureOptions[o],[o],!0):!0!==e&&-1===e.indexOf(o)||(n=!0),!1!==n&&(this.allowCreation=!0,i>0&&this._makeItem([]),this._makeHeader(o),this._handleObject(this.configureOptions[o],[o])),i++);if(!0===this.options.showButton){var r=document.createElement("div");r.className="vis-configuration vis-config-button",r.innerHTML="generate options",r.onclick=function(){t._printOptions()},r.onmouseover=function(){r.className="vis-configuration vis-config-button hover"},r.onmouseout=function(){r.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(r)}this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var e=this.moduleOptions,i=0;i<t.length;i++){if(void 0===e[t[i]]){e=void 0;break}e=e[t[i]]}return e}},{key:"_makeItem",value:function(t){if(!0===this.allowCreation){var e=document.createElement("div");e.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return n.forEach(function(t){e.appendChild(t)}),this.domElements.push(e),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerHTML=t,this._makeItem([],e)}},{key:"_makeLabel",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.createElement("div");return n.className="vis-configuration vis-config-label vis-config-s"+e.length,n.innerHTML=!0===i?"<i><b>"+t+":</b></i>":t+":",n}},{key:"_makeDropdown",value:function(t,e,i){var n=document.createElement("select");n.className="vis-configuration vis-config-select";var o=0;void 0!==e&&-1!==t.indexOf(e)&&(o=t.indexOf(e));for(var r=0;r<t.length;r++){var a=document.createElement("option");a.value=t[r],r===o&&(a.selected="selected"),a.innerHTML=t[r],n.appendChild(a)}var s=this;n.onchange=function(){s._update(this.value,i)};var l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,n)}},{key:"_makeRange",value:function(t,e,i){var n=t[0],o=t[1],r=t[2],a=t[3],s=document.createElement("input");s.className="vis-configuration vis-config-range";try{s.type="range",s.min=o,s.max=r}catch(t){}s.step=a;var l="",u=0;void 0!==e?(e<0&&1.2*e<o?(s.min=Math.ceil(1.2*e),u=s.min,l="range increased"):e/1.2<o&&(s.min=Math.ceil(e/1.2),u=s.min,l="range increased"),1.2*e>r&&1!==r&&(s.max=Math.ceil(1.2*e),u=s.max,l="range increased"),s.value=e):s.value=n;var d=document.createElement("input");d.className="vis-configuration vis-config-rangeinput",d.value=s.value;var h=this;s.onchange=function(){d.value=this.value,h._update(Number(this.value),i)},s.oninput=function(){d.value=this.value};var c=this._makeLabel(i[i.length-1],i),f=this._makeItem(i,c,s,d);""!==l&&this.popupHistory[f]!==u&&(this.popupHistory[f]=u,this._setupPopup(l,f))}},{key:"_setupPopup",value:function(t,e){var i=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerHTML=t,n.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:e}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var e=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=e.left+"px",this.popupDiv.html.style.top=e.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,e,i){var n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=t,void 0!==e&&(n.checked=e,e!==t&&("object"===(void 0===t?"undefined":(0,o.default)(t))?e!==t.enabled&&this.changedOptions.push({path:i,value:e}):this.changedOptions.push({path:i,value:e})));var r=this;n.onchange=function(){r._update(this.checked,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,n)}},{key:"_makeTextInput",value:function(t,e,i){var n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=e,e!==t&&this.changedOptions.push({path:i,value:e});var o=this;n.onchange=function(){o._update(this.value,i)};var r=this._makeLabel(i[i.length-1],i);this._makeItem(i,r,n)}},{key:"_makeColorField",value:function(t,e,i){var n=this,o=t[1],r=document.createElement("div");"none"!==(e=void 0===e?o:e)?(r.className="vis-configuration vis-config-colorBlock",r.style.backgroundColor=e):r.className="vis-configuration vis-config-colorBlock none",e=void 0===e?o:e,r.onclick=function(){n._showColorPicker(e,r,i)};var a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,r)}},{key:"_showColorPicker",value:function(t,e,i){var n=this;e.onclick=function(){},this.colorPicker.insertTo(e),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(t){var o="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";e.style.backgroundColor=o,n._update(o,i)}),this.colorPicker.setCloseCallback(function(){e.onclick=function(){n._showColorPicker(t,e,i)}})}},{key:"_handleObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1,o=this.options.filter,r=!1;for(var a in t)if(t.hasOwnProperty(a)){n=!0;var s=t[a],u=l.copyAndExtendArray(e,a);if("function"==typeof o&&!1===(n=o(a,e))&&!(s instanceof Array)&&"string"!=typeof s&&"boolean"!=typeof s&&s instanceof Object&&(this.allowCreation=!1,n=this._handleObject(s,u,!0),this.allowCreation=!1===i),!1!==n){r=!0;var d=this._getValue(u);if(s instanceof Array)this._handleArray(s,d,u);else if("string"==typeof s)this._makeTextInput(s,d,u);else if("boolean"==typeof s)this._makeCheckbox(s,d,u);else if(s instanceof Object){var h=!0;if(-1!==e.indexOf("physics")&&this.moduleOptions.physics.solver!==a&&(h=!1),!0===h)if(void 0!==s.enabled){var c=l.copyAndExtendArray(u,"enabled"),f=this._getValue(c);if(!0===f){var p=this._makeLabel(a,u,!0);this._makeItem(u,p),r=this._handleObject(s,u)||r}else this._makeCheckbox(s,f,u)}else{var g=this._makeLabel(a,u,!0);this._makeItem(u,g),r=this._handleObject(s,u)||r}}else console.error("dont know how to handle",s,a,u)}}return r}},{key:"_handleArray",value:function(t,e,i){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,i),t[1]!==e&&this.changedOptions.push({path:i,value:e})):"string"==typeof t[0]?(this._makeDropdown(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:e})):"number"==typeof t[0]&&(this._makeRange(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:Number(e)}))}},{key:"_update",value:function(t,e){var i=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i;t="false"!==(t="true"===t||t)&&t;for(var o=0;o<e.length;o++)"global"!==e[o]&&(void 0===n[e[o]]&&(n[e[o]]={}),o!==e.length-1?n=n[e[o]]:n[e[o]]=t);return i}},{key:"_printOptions",value:function(){var t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+(0,n.default)(t,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var t={},e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}}]),t}();e.default=d},function(t,e,i){var n,o=i(6),r=(n=o)&&n.__esModule?n:{default:n},a=i(14);function s(t,e){}function l(t,e){return{style:(e=void 0===e?{}:e).style||t.options.drawPoints.style,styles:e.styles||t.options.drawPoints.styles,size:e.size||t.options.drawPoints.size,className:e.className||t.className}}s.draw=function(t,e,i,n){n=n||0;for(var o=function(t,e){var i=void 0;return t.options&&t.options.drawPoints&&t.options.drawPoints.onRender&&"function"==typeof t.options.drawPoints.onRender&&(i=t.options.drawPoints.onRender),e.group.options&&e.group.options.drawPoints&&e.group.options.drawPoints.onRender&&"function"==typeof e.group.options.drawPoints.onRender&&(i=e.group.options.drawPoints.onRender),i}(i,e),s=0;s<t.length;s++)if(o){var u=o(t[s],e);!0!==u&&"object"!==(void 0===u?"undefined":(0,r.default)(u))||a.drawPoint(t[s].screen_x+n,t[s].screen_y,l(e,u),i.svgElements,i.svg,t[s].label)}else a.drawPoint(t[s].screen_x+n,t[s].screen_y,l(e),i.svgElements,i.svg,t[s].label)},s.drawIcon=function(t,e,i,n,o,r){var s=.5*o,u=a.getSVGElement("rect",r.svgElements,r.svg);u.setAttributeNS(null,"x",e),u.setAttributeNS(null,"y",i-s),u.setAttributeNS(null,"width",n),u.setAttributeNS(null,"height",2*s),u.setAttributeNS(null,"class","vis-outline"),a.drawPoint(e+.5*n,i,l(t),r.svgElements,r.svg)},t.exports=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){(0,o.default)(this,e);var s=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r));return s.labelOffset=0,s.selected=!1,s}return(0,s.default)(e,t),(0,r.default)(e,[{key:"setOptions",value:function(t,e,i){this.options=t,void 0===e&&void 0===i||this.setImages(e,i)}},{key:"setImages",value:function(t,e){e&&this.selected?(this.imageObj=e,this.imageObjAlt=t):(this.imageObj=t,this.imageObjAlt=e)}},{key:"switchImages",value:function(t){var e=t&&!this.selected||!t&&this.selected;if(this.selected=t,void 0!==this.imageObjAlt&&e){var i=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=i}}},{key:"_resizeImage",value:function(){var t,e;if(!1===this.options.shapeProperties.useImageSize){var i=1,n=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?i=this.imageObj.width/this.imageObj.height:n=this.imageObj.height/this.imageObj.width),t=2*this.options.size*i,e=2*this.options.size*n}else t=this.imageObj.width,e=this.imageObj.height;this.width=t,this.height=e,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(t,e,i,n){this.initContextForDraw(t,n),t.circle(e,i,n.size),this.performFill(t,n)}},{key:"_drawImageAtPosition",value:function(t,e){if(0!=this.imageObj.width){t.globalAlpha=1,this.enableShadow(t,e);var i=1;!0===this.options.shapeProperties.interpolation&&(i=this.imageObj.width/this.width/this.body.view.scale),this.imageObj.drawImageAtPosition(t,i,this.left,this.top,this.width,this.height),this.disableShadow(t,e)}}},{key:"_drawImageLabel",value:function(t,e,i,n,o){var r,a=0;if(void 0!==this.height){a=.5*this.height;var s=this.labelModule.getTextSize(t,n,o);s.lineCount>=1&&(a+=s.height/2)}r=i+a,this.options.label&&(this.labelOffset=a),this.labelModule.draw(t,e,r,n,o,"hanging")}}]),e}(l(i(23)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(19)),o=l(i(6)),r=l(i(29)),a=l(i(0)),s=l(i(1));function l(t){return t&&t.__esModule?t:{default:t}}var u=i(2),d=i(117).default,h=i(48).default,c=i(215).default,f=i(217).default,p=i(218).default,g=i(219).default,m=function(){function t(e,i,n,o){if((0,a.default)(this,t),void 0===i)throw new Error("No body provided");this.options=u.bridgeObject(n),this.globalOptions=n,this.defaultOptions=o,this.body=i,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new d(this.body,this.options,!0),this.setOptions(e)}return(0,s.default)(t,[{key:"setOptions",value:function(e){if(e){t.parseOptions(this.options,e,!0,this.globalOptions),void 0!==e.id&&(this.id=e.id),void 0!==e.from&&(this.fromId=e.from),void 0!==e.to&&(this.toId=e.to),void 0!==e.title&&(this.title=e.title),void 0!==e.value&&(e.value=parseFloat(e.value));var i=[e,this.options,this.defaultOptions];this.chooser=h.choosify("edge",i),this.updateLabelModule(e);var n=this.updateEdgeType();return this._setInteractionWidths(),this.connect(),void 0===e.hidden&&void 0===e.physics||(n=!0),n}}},{key:"getFormattingValues",value:function(){var t=!0===this.options.arrows.to||!0===this.options.arrows.to.enabled,e=!0===this.options.arrows.from||!0===this.options.arrows.from.enabled,i=!0===this.options.arrows.middle||!0===this.options.arrows.middle.enabled,n=this.options.color.inherit,o={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,fromArrow:e,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,arrowStrikethrough:this.options.arrowStrikethrough,color:n?void 0:this.options.color.color,inheritsColor:n,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width};if(this.selected||this.hover)if(!0===this.chooser){if(this.selected){var r=this.options.selectionWidth;"function"==typeof r?o.width=r(o.width):"number"==typeof r&&(o.width+=r),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.highlight,o.shadow=this.options.shadow.enabled}else if(this.hover){var a=this.options.hoverWidth;"function"==typeof a?o.width=a(o.width):"number"==typeof a&&(o.width+=a),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.hover,o.shadow=this.options.shadow.enabled}}else"function"==typeof this.chooser&&(this.chooser(o,this.options.id,this.selected,this.hover),void 0!==o.color&&(o.inheritsColor=!1),!1===o.shadow&&(o.shadowColor===this.options.shadow.color&&o.shadowSize===this.options.shadow.size&&o.shadowX===this.options.shadow.x&&o.shadowY===this.options.shadow.y||(o.shadow=!0)));else o.shadow=this.options.shadow.enabled,o.width=Math.max(o.width,.3/this.body.view.scale);return o}},{key:"updateLabelModule",value:function(t){var e=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,e),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,e=!1,i=!0;return void 0!==this.edgeType&&((this.edgeType instanceof f&&!0===t.enabled&&"dynamic"===t.type||this.edgeType instanceof c&&!0===t.enabled&&"cubicBezier"===t.type||this.edgeType instanceof p&&!0===t.enabled&&"dynamic"!==t.type&&"cubicBezier"!==t.type||this.edgeType instanceof g&&!1===t.type.enabled)&&(i=!1),!0===i&&(e=this.cleanup())),!0===i?!0===t.enabled?"dynamic"===t.type?(e=!0,this.edgeType=new f(this.options,this.body,this.labelModule)):"cubicBezier"===t.type?this.edgeType=new c(this.options,this.body,this.labelModule):this.edgeType=new p(this.options,this.body,this.labelModule):this.edgeType=new g(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var r=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*r}this.options.width=this.options.scaling.min+n*o}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var i=this.edgeType.getViaNode(),n={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,e.fromArrow&&(n.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.fromPoint=n.from.core)),e.toArrow&&(n.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.toPoint=n.to.core)),e.middleArrow&&(n.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,e)),this.edgeType.drawLine(t,e,this.selected,this.hover,i),this.drawArrows(t,n,e),this.drawLabel(t,i)}}},{key:"drawArrows",value:function(t,e,i){i.fromArrow&&this.edgeType.drawArrowHead(t,i,this.selected,this.hover,e.from),i.middleArrow&&this.edgeType.drawArrowHead(t,i,this.selected,this.hover,e.middle),i.toArrow&&this.edgeType.drawArrowHead(t,i,this.selected,this.hover,e.to)}},{key:"drawLabel",value:function(t,e){if(void 0!==this.options.label){var i=this.from,n=this.to;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover),i.id!=n.id){this.labelModule.pointToSelf=!1;var o=this.edgeType.getPoint(.5,e);t.save();var r=this._getRotation(t);0!=r.angle&&(t.translate(r.x,r.y),t.rotate(r.angle)),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover),t.restore()}else{var a,s;this.labelModule.pointToSelf=!0;var l=this.options.selfReferenceSize;i.shape.width>i.shape.height?(a=i.x+.5*i.shape.width,s=i.y-l):(a=i.x+l,s=i.y-.5*i.shape.height),o=this._pointOnCircle(a,s,l,.125),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var e=[];if(this.labelModule.visible()){var i=this._getRotation();h.pointInRect(this.labelModule.getSize(),t,i)&&e.push({edgeId:this.id,labelId:0})}var n={left:t.x,top:t.y};return this.isOverlappingWith(n)&&e.push({edgeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){if(this.connected){var e=this.from.x,i=this.from.y,n=this.to.x,o=this.to.y,r=t.left,a=t.top;return this.edgeType.getDistanceToEdge(e,i,n,o,r,a)<10}return!1}},{key:"_getRotation",value:function(t){var e=this.edgeType.getViaNode(),i=this.edgeType.getPoint(.5,e);void 0!==t&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,i.x,i.y);var n={x:i.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible())return n;if("horizontal"===this.options.font.align)return n;var o=this.from.y-this.to.y,r=this.from.x-this.to.x,a=Math.atan2(o,r);return(a<-1&&r<0||a>0&&r<0)&&(a+=Math.PI),n.angle=a,n}},{key:"_pointOnCircle",value:function(t,e,i,n){var o=2*n*Math.PI;return{x:t+i*Math.cos(o),y:e-i*Math.sin(o)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return void 0!==this.body.nodes[this.fromId]&&void 0!==this.body.nodes[this.toId]}}],[{key:"parseOptions",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=["arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","to","title","value","width","font","chosen","widthConstraint"];if(u.selectiveDeepExtend(l,t,e,i),h.isValidLabel(e.label)?t.label=e.label:t.label=void 0,u.mergeOptions(t,e,"smooth",a),u.mergeOptions(t,e,"shadow",a),void 0!==e.dashes&&null!==e.dashes?t.dashes=e.dashes:!0===i&&null===e.dashes&&(t.dashes=(0,r.default)(a.dashes)),void 0!==e.scaling&&null!==e.scaling?(void 0!==e.scaling.min&&(t.scaling.min=e.scaling.min),void 0!==e.scaling.max&&(t.scaling.max=e.scaling.max),u.mergeOptions(t.scaling,e.scaling,"label",a.scaling)):!0===i&&null===e.scaling&&(t.scaling=(0,r.default)(a.scaling)),void 0!==e.arrows&&null!==e.arrows)if("string"==typeof e.arrows){var d=e.arrows.toLowerCase();t.arrows.to.enabled=-1!=d.indexOf("to"),t.arrows.middle.enabled=-1!=d.indexOf("middle"),t.arrows.from.enabled=-1!=d.indexOf("from")}else{if("object"!==(0,o.default)(e.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+(0,n.default)(e.arrows));u.mergeOptions(t.arrows,e.arrows,"to",a.arrows),u.mergeOptions(t.arrows,e.arrows,"middle",a.arrows),u.mergeOptions(t.arrows,e.arrows,"from",a.arrows)}else!0===i&&null===e.arrows&&(t.arrows=(0,r.default)(a.arrows));if(void 0!==e.color&&null!==e.color){var c=e.color,f=t.color;if(s)u.deepExtend(f,a.color,!1,i);else for(var p in f)f.hasOwnProperty(p)&&delete f[p];if(u.isString(f))f.color=f,f.highlight=f,f.hover=f,f.inherit=!1,void 0===c.opacity&&(f.opacity=1);else{var g=!1;void 0!==c.color&&(f.color=c.color,g=!0),void 0!==c.highlight&&(f.highlight=c.highlight,g=!0),void 0!==c.hover&&(f.hover=c.hover,g=!0),void 0!==c.inherit&&(f.inherit=c.inherit),void 0!==c.opacity&&(f.opacity=Math.min(1,Math.max(0,c.opacity))),!0===g?f.inherit=!1:void 0===f.inherit&&(f.inherit="from")}}else!0===i&&null===e.color&&(t.color=u.bridgeObject(a.color));!0===i&&null===e.font&&(t.font=u.bridgeObject(a.font))}}]),t}();e.default=m},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"_findBorderPositionBezier",value:function(t,e){var i,n,o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getViaCoordinates(),a=10,s=0,l=0,u=1,d=.2,h=this.to,c=!1;for(t.id===this.from.id&&(h=this.from,c=!0);l<=u&&s<a;){var f=.5*(l+u);if(i=this.getPoint(f,r),n=Math.atan2(h.y-i.y,h.x-i.x),o=h.distanceToBorder(e,n)-Math.sqrt(Math.pow(i.x-h.x,2)+Math.pow(i.y-h.y,2)),Math.abs(o)<d)break;o<0?!1===c?l=f:u=f:!1===c?u=f:l=f,s++}return i.t=f,i}},{key:"_getDistanceToBezierEdge",value:function(t,e,i,n,o,r,a){var s=1e9,l=void 0,u=void 0,d=void 0,h=void 0,c=void 0,f=t,p=e;for(u=1;u<10;u++)d=.1*u,h=Math.pow(1-d,2)*t+2*d*(1-d)*a.x+Math.pow(d,2)*i,c=Math.pow(1-d,2)*e+2*d*(1-d)*a.y+Math.pow(d,2)*n,u>0&&(s=(l=this._getDistanceToLine(f,p,h,c,o,r))<s?l:s),f=h,p=c;return s}},{key:"_bezierCurve",value:function(t,e,i,n){var o=void 0!==i&&void 0!==i.x,r=void 0!==n&&void 0!==n.x;t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),o&&r?t.bezierCurveTo(i.x,i.y,n.x,n.y,this.toPoint.x,this.toPoint.y):o?t.quadraticCurveTo(i.x,i.y,this.toPoint.x,this.toPoint.y):t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),e}(l(i(118)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(2),s=function(){function t(){(0,n.default)(this,t)}return(0,o.default)(t,null,[{key:"getRange",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=1e9,o=-1e9,r=1e9,a=-1e9;if(i.length>0)for(var s=0;s<i.length;s++)r>(e=t[i[s]]).shape.boundingBox.left&&(r=e.shape.boundingBox.left),a<e.shape.boundingBox.right&&(a=e.shape.boundingBox.right),n>e.shape.boundingBox.top&&(n=e.shape.boundingBox.top),o<e.shape.boundingBox.bottom&&(o=e.shape.boundingBox.bottom);return 1e9===r&&-1e9===a&&1e9===n&&-1e9===o&&(n=0,o=0,r=0,a=0),{minX:r,maxX:a,minY:n,maxY:o}}},{key:"getRangeCore",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=1e9,o=-1e9,r=1e9,a=-1e9;if(i.length>0)for(var s=0;s<i.length;s++)r>(e=t[i[s]]).x&&(r=e.x),a<e.x&&(a=e.x),n>e.y&&(n=e.y),o<e.y&&(o=e.y);return 1e9===r&&-1e9===a&&1e9===n&&-1e9===o&&(n=0,o=0,r=0,a=0),{minX:r,maxX:a,minY:n,maxY:o}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,e){var i={};return void 0===e||"node"===e?(a.deepExtend(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):a.deepExtend(i,t.options,!0),i}}]),t}();e.default=s},function(t,e,i){t.exports={default:i(124),__esModule:!0}},function(t,e,i){var n=i(50);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(52),o=i(17),r=i(83),a=i(26),s=i(22),l=i(31),u=i(129),d=i(59),h=i(85),c=i(13)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,i,g,m,v,y){u(i,e,g);var _,b,E,w=function(t){if(!f&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},T=e+" Iterator",S="values"==m,x=!1,C=t.prototype,I=C[c]||C["@@iterator"]||m&&C[m],A=I||w(m),M=m?S?w("entries"):A:void 0,O="Array"==e&&C.entries||I;if(O&&(E=h(O.call(new t)))!==Object.prototype&&E.next&&(d(E,T,!0),n||s(E,c)||a(E,c,p)),S&&I&&"values"!==I.name&&(x=!0,A=function(){return I.call(this)}),n&&!y||!f&&!x&&C[c]||a(C,c,A),l[e]=A,l[T]=p,m)if(_={values:S?A:w("values"),keys:v?A:w("keys"),entries:M},y)for(b in _)b in C||r(C,b,_[b]);else o(o.P+o.F*(f||x),e,_);return _}},function(t,e,i){var n=i(128);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){t.exports=!i(21)&&!i(28)(function(){return 7!=Object.defineProperty(i(82)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(32),o=i(18).document,r=n(o)&&n(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},function(t,e,i){t.exports=i(26)},function(t,e,i){var n=i(22),o=i(25),r=i(131)(!1),a=i(56)("IE_PROTO");t.exports=function(t,e){var i,s=o(t),l=0,u=[];for(i in s)i!=a&&n(s,i)&&u.push(i);for(;e.length>l;)n(s,i=e[l++])&&(~r(u,i)||u.push(i));return u}},function(t,e,i){var n=i(22),o=i(41),r=i(56)("IE_PROTO"),a=Object.prototype;t.exports=y.default||function(t){return t=o(t),n(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,i){var n=i(50),o=i(13)("toStringTag"),r="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?i:r?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,i){var n=i(17),o=i(7),r=i(28);t.exports=function(t,e){var i=(o.Object||{})[t]||Object[t],a={};a[t]=e(i),n(n.S+n.F*r(function(){i(1)}),"Object",a)}},function(t,e,i){var n=i(84),o=i(58).concat("length","prototype");e.f=v.default||function(t){return n(t,o)}},function(t,e,i){var n=i(42),o=i(39),r=i(25),a=i(53),s=i(22),l=i(81),u=m.default;e.f=i(21)?u:function(t,e){if(t=r(t),e=a(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return o(!n.f.call(t,e),t[e])}},function(t,e,i){t.exports={default:i(162),__esModule:!0}},function(t,e,i){t.exports=function(t,e){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0}},function(t,e,i){var n=i(2);function o(t,e){if(void 0===t)throw new Error("No container element defined");if(this.container=t,this.visible=!e||null==e.visible||e.visible,this.visible){this.frame=document.createElement("DIV"),this.frame.style.width="100%",this.frame.style.position="relative",this.container.appendChild(this.frame),this.frame.prev=document.createElement("INPUT"),this.frame.prev.type="BUTTON",this.frame.prev.value="Prev",this.frame.appendChild(this.frame.prev),this.frame.play=document.createElement("INPUT"),this.frame.play.type="BUTTON",this.frame.play.value="Play",this.frame.appendChild(this.frame.play),this.frame.next=document.createElement("INPUT"),this.frame.next.type="BUTTON",this.frame.next.value="Next",this.frame.appendChild(this.frame.next),this.frame.bar=document.createElement("INPUT"),this.frame.bar.type="BUTTON",this.frame.bar.style.position="absolute",this.frame.bar.style.border="1px solid red",this.frame.bar.style.width="100px",this.frame.bar.style.height="6px",this.frame.bar.style.borderRadius="2px",this.frame.bar.style.MozBorderRadius="2px",this.frame.bar.style.border="1px solid #7F7F7F",this.frame.bar.style.backgroundColor="#E5E5E5",this.frame.appendChild(this.frame.bar),this.frame.slide=document.createElement("INPUT"),this.frame.slide.type="BUTTON",this.frame.slide.style.margin="0px",this.frame.slide.value=" ",this.frame.slide.style.position="relative",this.frame.slide.style.left="-100px",this.frame.appendChild(this.frame.slide);var i=this;this.frame.slide.onmousedown=function(t){i._onMouseDown(t)},this.frame.prev.onclick=function(t){i.prev(t)},this.frame.play.onclick=function(t){i.togglePlay(t)},this.frame.next.onclick=function(t){i.next(t)}}this.onChangeCallback=void 0,this.values=[],this.index=void 0,this.playTimeout=void 0,this.playInterval=1e3,this.playLoop=!0}o.prototype.prev=function(){var t=this.getIndex();t>0&&(t--,this.setIndex(t))},o.prototype.next=function(){var t=this.getIndex();t<this.values.length-1&&(t++,this.setIndex(t))},o.prototype.playNext=function(){var t=new Date,e=this.getIndex();e<this.values.length-1?(e++,this.setIndex(e)):this.playLoop&&(e=0,this.setIndex(e));var i=new Date-t,n=Math.max(this.playInterval-i,0),o=this;this.playTimeout=setTimeout(function(){o.playNext()},n)},o.prototype.togglePlay=function(){void 0===this.playTimeout?this.play():this.stop()},o.prototype.play=function(){this.playTimeout||(this.playNext(),this.frame&&(this.frame.play.value="Stop"))},o.prototype.stop=function(){clearInterval(this.playTimeout),this.playTimeout=void 0,this.frame&&(this.frame.play.value="Play")},o.prototype.setOnChangeCallback=function(t){this.onChangeCallback=t},o.prototype.setPlayInterval=function(t){this.playInterval=t},o.prototype.getPlayInterval=function(){return this.playInterval},o.prototype.setPlayLoop=function(t){this.playLoop=t},o.prototype.onChange=function(){void 0!==this.onChangeCallback&&this.onChangeCallback()},o.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px",this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var t=this.indexToLeft(this.index);this.frame.slide.style.left=t+"px"}},o.prototype.setValues=function(t){this.values=t,this.values.length>0?this.setIndex(0):this.index=void 0},o.prototype.setIndex=function(t){if(!(t<this.values.length))throw new Error("Index out of range");this.index=t,this.redraw(),this.onChange()},o.prototype.getIndex=function(){return this.index},o.prototype.get=function(){return this.values[this.index]},o.prototype._onMouseDown=function(t){if(t.which?1===t.which:1===t.button){this.startClientX=t.clientX,this.startSlideX=parseFloat(this.frame.slide.style.left),this.frame.style.cursor="move";var e=this;this.onmousemove=function(t){e._onMouseMove(t)},this.onmouseup=function(t){e._onMouseUp(t)},n.addEventListener(document,"mousemove",this.onmousemove),n.addEventListener(document,"mouseup",this.onmouseup),n.preventDefault(t)}},o.prototype.leftToIndex=function(t){var e=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,i=t-3,n=Math.round(i/e*(this.values.length-1));return n<0&&(n=0),n>this.values.length-1&&(n=this.values.length-1),n},o.prototype.indexToLeft=function(t){var e=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10;return t/(this.values.length-1)*e+3},o.prototype._onMouseMove=function(t){var e=t.clientX-this.startClientX,i=this.startSlideX+e,o=this.leftToIndex(i);this.setIndex(o),n.preventDefault()},o.prototype._onMouseUp=function(t){this.frame.style.cursor="auto",n.removeEventListener(document,"mousemove",this.onmousemove),n.removeEventListener(document,"mouseup",this.onmouseup),n.preventDefault()},t.exports=o},function(t,e,i){function n(t,e,i,n){this._start=0,this._end=0,this._step=1,this.prettyStep=!0,this.precision=5,this._current=0,this.setRange(t,e,i,n)}n.prototype.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},n.prototype.setRange=function(t,e,i,n){if(!this.isNumeric(t))throw new Error("Parameter 'start' is not numeric; value: "+t);if(!this.isNumeric(e))throw new Error("Parameter 'end' is not numeric; value: "+t);if(!this.isNumeric(i))throw new Error("Parameter 'step' is not numeric; value: "+t);this._start=t||0,this._end=e||0,this.setStep(i,n)},n.prototype.setStep=function(t,e){void 0===t||t<=0||(void 0!==e&&(this.prettyStep=e),!0===this.prettyStep?this._step=n.calculatePrettyStep(t):this._step=t)},n.calculatePrettyStep=function(t){var e=function(t){return Math.log(t)/Math.LN10},i=Math.pow(10,Math.round(e(t))),n=2*Math.pow(10,Math.round(e(t/2))),o=5*Math.pow(10,Math.round(e(t/5))),r=i;return Math.abs(n-t)<=Math.abs(r-t)&&(r=n),Math.abs(o-t)<=Math.abs(r-t)&&(r=o),r<=0&&(r=1),r},n.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))},n.prototype.getStep=function(){return this._step},n.prototype.start=function(t){void 0===t&&(t=!1),this._current=this._start-this._start%this._step,t&&this.getCurrent()<this._start&&this.next()},n.prototype.next=function(){this._current+=this._step},n.prototype.end=function(){return this._current>this._end},t.exports=n},function(t,e,i){var n,o=i(6),r=(n=o)&&n.__esModule?n:{default:n},a=i(2),s=i(95),l=i(34),u={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9},d={dot:u.DOT,"dot-line":u.DOTLINE,"dot-color":u.DOTCOLOR,"dot-size":u.DOTSIZE,line:u.LINE,grid:u.GRID,surface:u.SURFACE,bar:u.BAR,"bar-color":u.BARCOLOR,"bar-size":u.BARSIZE},h=["width","height","filterLabel","legendLabel","xLabel","yLabel","zLabel","xValueLabel","yValueLabel","zValueLabel","showXAxis","showYAxis","showZAxis","showGrid","showPerspective","showShadow","keepAspectRatio","verticalRatio","dotSizeRatio","dotSizeMinFraction","dotSizeMaxFraction","showAnimationControls","animationInterval","animationPreload","animationAutoStart","axisColor","gridColor","xCenter","yCenter"],c=["xBarWidth","yBarWidth","valueMin","valueMax","xMin","xMax","xStep","yMin","yMax","yStep","zMin","zMax","zStep"],f=void 0;function p(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function g(t,e){return void 0===t||""===t?e:t+(void 0===(i=e)||""===i||"string"!=typeof i?i:i.charAt(0).toUpperCase()+i.slice(1));var i}function m(t,e,i,n){for(var o,r=0;r<i.length;++r)e[g(n,o=i[r])]=t[o]}function v(t,e,i,n){for(var o,r=0;r<i.length;++r)void 0!==t[o=i[r]]&&(e[g(n,o)]=t[o])}function y(t,e){void 0!==t.backgroundColor&&function(t,e){var i="white",n="gray",o=1;if("string"==typeof t)i=t,n="none",o=0;else{if("object"!==(void 0===t?"undefined":(0,r.default)(t)))throw new Error("Unsupported type of backgroundColor");void 0!==t.fill&&(i=t.fill),void 0!==t.stroke&&(n=t.stroke),void 0!==t.strokeWidth&&(o=t.strokeWidth)}e.frame.style.backgroundColor=i,e.frame.style.borderColor=n,e.frame.style.borderWidth=o+"px",e.frame.style.borderStyle="solid"}(t.backgroundColor,e),function(t,e){void 0!==t&&(void 0===e.dataColor&&(e.dataColor={}),"string"==typeof t?(e.dataColor.fill=t,e.dataColor.stroke=t):(t.fill&&(e.dataColor.fill=t.fill),t.stroke&&(e.dataColor.stroke=t.stroke),void 0!==t.strokeWidth&&(e.dataColor.strokeWidth=t.strokeWidth)))}(t.dataColor,e),function(t,e){if(void 0!==t){var i,n;if("string"==typeof t){if(-1===(n=d[t],i=void 0===n?-1:n))throw new Error("Style '"+t+"' is invalid")}else{if(!function(t){var e=!1;for(var i in u)if(u[i]===t){e=!0;break}return e}(t))throw new Error("Style '"+t+"' is invalid");i=t}e.style=i}}(t.style,e),function(t,e){if(void 0===t){if(void 0===f.showLegend){var i=e.style===u.DOTCOLOR||e.style===u.DOTSIZE;e.showLegend=i}}else e.showLegend=t}(t.showLegend,e),_(t.cameraPosition,e),void 0!==t.tooltip&&(e.showTooltip=t.tooltip),null!=t.onclick&&(e.onclick_callback=t.onclick),void 0!==t.tooltipStyle&&a.selectiveDeepExtend(["tooltipStyle"],e,t)}function _(t,e){var i=t;void 0!==i&&(void 0===e.camera&&(e.camera=new s),e.camera.setArmRotation(i.horizontal,i.vertical),e.camera.setArmLength(i.distance))}t.exports.STYLE=u,t.exports.setDefaults=function(t,e){if(void 0===t||p(t))throw new Error("No DEFAULTS passed");if(void 0===e)throw new Error("No dst passed");f=t,m(t,e,h),m(t,e,c,"default"),y(t,e),e.margin=10,e.showGrayBottom=!1,e.showTooltip=!1,e.onclick_callback=null,e.eye=new l(0,0,-1)},t.exports.setOptions=function(t,e){if(void 0!==t){if(void 0===e)throw new Error("No dst passed");if(void 0===f||p(f))throw new Error("DEFAULTS not set for module Settings");v(t,e,h),v(t,e,c,"default"),y(t,e)}},t.exports.setCameraPosition=_},function(t,e,i){var n,o=i(165),r=(n=o)&&n.__esModule?n:{default:n},a=i(34);function s(){this.armLocation=new a,this.armRotation={},this.armRotation.horizontal=0,this.armRotation.vertical=0,this.armLength=1.7,this.cameraOffset=new a,this.offsetMultiplier=.6,this.cameraLocation=new a,this.cameraRotation=new a(.5*Math.PI,0,0),this.calculateCameraOrientation()}s.prototype.setOffset=function(t,e){var i=Math.abs,n=r.default,o=this.offsetMultiplier,a=this.armLength*o;i(t)>a&&(t=n(t)*a),i(e)>a&&(e=n(e)*a),this.cameraOffset.x=t,this.cameraOffset.y=e,this.calculateCameraOrientation()},s.prototype.getOffset=function(){return this.cameraOffset},s.prototype.setArmLocation=function(t,e,i){this.armLocation.x=t,this.armLocation.y=e,this.armLocation.z=i,this.calculateCameraOrientation()},s.prototype.setArmRotation=function(t,e){void 0!==t&&(this.armRotation.horizontal=t),void 0!==e&&(this.armRotation.vertical=e,this.armRotation.vertical<0&&(this.armRotation.vertical=0),this.armRotation.vertical>.5*Math.PI&&(this.armRotation.vertical=.5*Math.PI)),void 0===t&&void 0===e||this.calculateCameraOrientation()},s.prototype.getArmRotation=function(){var t={};return t.horizontal=this.armRotation.horizontal,t.vertical=this.armRotation.vertical,t},s.prototype.setArmLength=function(t){void 0!==t&&(this.armLength=t,this.armLength<.71&&(this.armLength=.71),this.armLength>5&&(this.armLength=5),this.setOffset(this.cameraOffset.x,this.cameraOffset.y),this.calculateCameraOrientation())},s.prototype.getArmLength=function(){return this.armLength},s.prototype.getCameraLocation=function(){return this.cameraLocation},s.prototype.getCameraRotation=function(){return this.cameraRotation},s.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical),this.cameraRotation.x=Math.PI/2-this.armRotation.vertical,this.cameraRotation.y=0,this.cameraRotation.z=-this.armRotation.horizontal;var t=this.cameraRotation.x,e=this.cameraRotation.z,i=this.cameraOffset.x,n=this.cameraOffset.y,o=Math.sin,r=Math.cos;this.cameraLocation.x=this.cameraLocation.x+i*r(e)+n*-o(e)*r(t),this.cameraLocation.y=this.cameraLocation.y+i*o(e)+n*r(e)*r(t),this.cameraLocation.z=this.cameraLocation.z+n*o(t)},t.exports=s},function(t,e,i){var n=i(12);function o(t,e,i){this.dataGroup=t,this.column=e,this.graph=i,this.index=void 0,this.value=void 0,this.values=t.getDistinctValues(this.column),this.values.length>0&&this.selectValue(0),this.dataPoints=[],this.loaded=!1,this.onLoadCallback=void 0,i.animationPreload?(this.loaded=!1,this.loadInBackground()):this.loaded=!0}o.prototype.isLoaded=function(){return this.loaded},o.prototype.getLoadedProgress=function(){for(var t=this.values.length,e=0;this.dataPoints[e];)e++;return Math.round(e/t*100)},o.prototype.getLabel=function(){return this.graph.filterLabel},o.prototype.getColumn=function(){return this.column},o.prototype.getSelectedValue=function(){if(void 0!==this.index)return this.values[this.index]},o.prototype.getValues=function(){return this.values},o.prototype.getValue=function(t){if(t>=this.values.length)throw new Error("Index out of range");return this.values[t]},o.prototype._getDataPoints=function(t){if(void 0===t&&(t=this.index),void 0===t)return[];var e;if(this.dataPoints[t])e=this.dataPoints[t];else{var i={};i.column=this.column,i.value=this.values[t];var o=new n(this.dataGroup.getDataSet(),{filter:function(t){return t[i.column]==i.value}}).get();e=this.dataGroup._getDataPoints(o),this.dataPoints[t]=e}return e},o.prototype.setOnLoadCallback=function(t){this.onLoadCallback=t},o.prototype.selectValue=function(t){if(t>=this.values.length)throw new Error("Index out of range");this.index=t,this.value=this.values[t]},o.prototype.loadInBackground=function(t){void 0===t&&(t=0);var e=this.graph.frame;if(t<this.values.length){void 0===e.progress&&(e.progress=document.createElement("DIV"),e.progress.style.position="absolute",e.progress.style.color="gray",e.appendChild(e.progress));var i=this.getLoadedProgress();e.progress.innerHTML="Loading animation... "+i+"%",e.progress.style.bottom="60px",e.progress.style.left="10px";var n=this;setTimeout(function(){n.loadInBackground(t+1)},10),this.loaded=!1}else this.loaded=!0,void 0!==e.progress&&(e.removeChild(e.progress),e.progress=void 0),this.onLoadCallback&&this.onLoadCallback()},t.exports=o},function(t,e,i){var n=i(35),o=i(44),r=i(10),a=i(2);function s(t){this.active=!1,this.dom={container:t},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=r(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var e=this;["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(function(t){e.hammer.on(t,function(t){t.stopPropagation()})}),document&&document.body&&(this.onClick=function(i){(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(i.target,t)||e.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=n(),this.escListener=this.deactivate.bind(this)}o(s.prototype),s.current=null,s.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.hammer.destroy(),this.hammer=null},s.prototype.activate=function(){s.current&&s.current.deactivate(),s.current=this,this.active=!0,this.dom.overlay.style.display="none",a.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},s.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="",a.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},s.prototype._onTapOverlay=function(t){this.activate(),t.stopPropagation()},t.exports=s},function(t,e,i){e.en={current:"current",time:"time"},e.en_EN=e.en,e.en_US=e.en,e.it={current:"attuale",time:"tempo"},e.it_IT=e.it,e.it_CH=e.it,e.nl={current:"huidige",time:"tijd"},e.nl_NL=e.nl,e.nl_BE=e.nl,e.de={current:"Aktuelle",time:"Zeit"},e.de_DE=e.de,e.fr={current:"actuel",time:"heure"},e.fr_FR=e.fr,e.fr_CA=e.fr,e.fr_BE=e.fr,e.es={current:"corriente",time:"hora"},e.es_ES=e.es},function(t,e,i){var n=r(i(29)),o=r(i(6));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(10),s=i(2),l=i(11),u=i(12),d=i(66),h=i(16),c=i(68),f=i(69),p=i(101),g=i(102),m=i(70),v=i(103),y=i(104).default,_="__ungrouped__",b="__background__";function E(t,e){this.body=t,this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap:function(t,e,i){var n=e.order;e.order=t.order,t.order=n},groupOrder:"order",selectable:!0,multiselect:!1,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:d.snap,onDropObjectOnItem:function(t,e,i){i(e)},onAdd:function(t,e){e(t)},onUpdate:function(t,e){e(t)},onMove:function(t,e){e(t)},onRemove:function(t,e){e(t)},onMoving:function(t,e){e(t)},onAddGroup:function(t,e){e(t)},onMoveGroup:function(t,e){e(t)},onRemoveGroup:function(t,e){e(t)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip"},tooltipOnItemUpdateTime:!1},this.options=s.extend({},this.defaultOptions),this.options.rtl=e.rtl,this.itemOptions={type:{start:"Date",end:"Date"}},this.conversion={toScreen:t.util.toScreen,toTime:t.util.toTime},this.dom={},this.props={},this.hammer=null;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(t,e,n){i._onAdd(e.items)},update:function(t,e,n){i._onUpdate(e.items)},remove:function(t,e,n){i._onRemove(e.items)}},this.groupListeners={add:function(t,e,n){if(i._onAddGroups(e.items),i.groupsData&&i.groupsData.length>0){var o=i.groupsData.getDataSet();o.get().forEach(function(t){if(t.nestedGroups){0!=t.showNested&&(t.showNested=!0);var e=[];t.nestedGroups.forEach(function(i){var n=o.get(i);n&&(n.nestedInGroup=t.id,0==t.showNested&&(n.visible=!1),e=e.concat(n))}),o.update(e,n)}})}},update:function(t,e,n){i._onUpdateGroups(e.items)},remove:function(t,e,n){i._onRemoveGroups(e.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.popup=null,this.touchParams={},this.groupTouchParams={},this._create(),this.setOptions(e)}E.prototype=new h,E.types={background:v,box:p,range:m,point:g},E.prototype._create=function(){var t=document.createElement("div");t.className="vis-itemset",t["timeline-itemset"]=this,this.dom.frame=t;var e=document.createElement("div");e.className="vis-background",t.appendChild(e),this.dom.background=e;var i=document.createElement("div");i.className="vis-foreground",t.appendChild(i),this.dom.foreground=i;var n=document.createElement("div");n.className="vis-axis",this.dom.axis=n;var o=document.createElement("div");o.className="vis-labelset",this.dom.labelSet=o,this._updateUngrouped();var r=new f(b,null,this);r.show(),this.groups[b]=r,this.hammer=new a(this.body.dom.centerContainer),this.hammer.on("hammer.input",function(t){t.isFirst&&this._onTouch(t)}.bind(this)),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:a.DIRECTION_HORIZONTAL}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.options.rtl?this.groupHammer=new a(this.body.dom.rightContainer):this.groupHammer=new a(this.body.dom.leftContainer),this.groupHammer.on("tap",this._onGroupClick.bind(this)),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:a.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",this._onMouseOver.bind(this)),this.body.dom.centerContainer.addEventListener("mouseout",this._onMouseOut.bind(this)),this.body.dom.centerContainer.addEventListener("mousemove",this._onMouseMove.bind(this)),this.body.dom.centerContainer.addEventListener("contextmenu",this._onDragEnd.bind(this)),this.body.dom.centerContainer.addEventListener("mousewheel",this._onMouseWheel.bind(this)),this.show()},E.prototype.setOptions=function(t){if(t){s.selectiveExtend(["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","multiselectPerGroup","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime"],this.options,t),"itemsAlwaysDraggable"in t&&("boolean"==typeof t.itemsAlwaysDraggable?(this.options.itemsAlwaysDraggable.item=t.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):"object"===(0,o.default)(t.itemsAlwaysDraggable)&&(s.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,t.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation.item="top"===t.orientation?"top":"bottom":"object"===(0,o.default)(t.orientation)&&"item"in t.orientation&&(this.options.orientation.item=t.orientation.item)),"margin"in t&&("number"==typeof t.margin?(this.options.margin.axis=t.margin,this.options.margin.item.horizontal=t.margin,this.options.margin.item.vertical=t.margin):"object"===(0,o.default)(t.margin)&&(s.selectiveExtend(["axis"],this.options.margin,t.margin),"item"in t.margin&&("number"==typeof t.margin.item?(this.options.margin.item.horizontal=t.margin.item,this.options.margin.item.vertical=t.margin.item):"object"===(0,o.default)(t.margin.item)&&s.selectiveExtend(["horizontal","vertical"],this.options.margin.item,t.margin.item)))),"editable"in t&&("boolean"==typeof t.editable?(this.options.editable.updateTime=t.editable,this.options.editable.updateGroup=t.editable,this.options.editable.add=t.editable,this.options.editable.remove=t.editable,this.options.editable.overrideItems=!1):"object"===(0,o.default)(t.editable)&&s.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,t.editable)),"groupEditable"in t&&("boolean"==typeof t.groupEditable?(this.options.groupEditable.order=t.groupEditable,this.options.groupEditable.add=t.groupEditable,this.options.groupEditable.remove=t.groupEditable):"object"===(0,o.default)(t.groupEditable)&&s.selectiveExtend(["order","add","remove"],this.options.groupEditable,t.groupEditable));var e=function(e){var i=t[e];if(i){if(!(i instanceof Function))throw new Error("option "+e+" must be a function "+e+"(item, callback)");this.options[e]=i}}.bind(this);["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(e),this.markDirty()}},E.prototype.markDirty=function(t){this.groupIds=[],t&&t.refreshItems&&s.forEach(this.items,function(t){t.dirty=!0,t.displayed&&t.redraw()})},E.prototype.destroy=function(){this.hide(),this.setItems(null),this.setGroups(null),this.hammer=null,this.body=null,this.conversion=null},E.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)},E.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))},E.prototype.setSelection=function(t){var e,i,n,o;for(null==t&&(t=[]),Array.isArray(t)||(t=[t]),e=0,i=this.selection.length;e<i;e++)n=this.selection[e],(o=this.items[n])&&o.unselect();for(this.selection=[],e=0,i=t.length;e<i;e++)n=t[e],(o=this.items[n])&&(this.selection.push(n),o.select())},E.prototype.getSelection=function(){return this.selection.concat([])},E.prototype.getVisibleItems=function(){var t,e,i=this.body.range.getRange();this.options.rtl?(t=this.body.util.toScreen(i.start),e=this.body.util.toScreen(i.end)):(e=this.body.util.toScreen(i.start),t=this.body.util.toScreen(i.end));var n=[];for(var o in this.groups)if(this.groups.hasOwnProperty(o))for(var r=this.groups[o],a=r.isVisible?r.visibleItems:[],s=0;s<a.length;s++){var l=a[s];this.options.rtl?l.right<e&&l.right+l.width>t&&n.push(l.id):l.left<t&&l.left+l.width>e&&n.push(l.id)}return n},E.prototype._deselect=function(t){for(var e=this.selection,i=0,n=e.length;i<n;i++)if(e[i]==t){e.splice(i,1);break}},E.prototype.redraw=function(){var t=this.options.margin,e=this.body.range,i=s.option.asSize,n=this.options,o=n.orientation.item,r=!1,a=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,a.className="vis-itemset",r=this._orderGroups()||r;var l=e.end-e.start,u=l!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,d=e.start!=this.lastRangeStart,h=n.stack!=this.lastStack,c=n.stackSubgroups!=this.lastStackSubgroups,f=u||d||h||c;this.lastVisibleInterval=l,this.lastRangeStart=e.start,this.lastStack=n.stack,this.lastStackSubgroups=n.stackSubgroups,this.props.lastWidth=this.props.width;var p=this._firstGroup(),g={item:t.item,axis:t.axis},m={item:t.item,axis:t.item.vertical/2},v=0,y=t.axis+t.item.vertical;this.groups[b].redraw(e,m,f);var _={},E=0;if(s.forEach(this.groups,function(t,i){if(i!==b){var n=t==p?g:m;_[i]=t.redraw(e,n,f,!0),E=_[i].length}}),E>0){for(var w={},T=0;T<E;T++)s.forEach(_,function(t,e){w[e]=t[T]()});s.forEach(this.groups,function(t,e){if(e!==b){var i=w[e];r=i||r,v+=t.height}}),v=Math.max(v,y)}return v=Math.max(v,y),a.style.height=i(v),this.props.width=a.offsetWidth,this.props.height=v,this.dom.axis.style.top=i("top"==o?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.initialItemSetDrawn=!0,r=this._isResized()||r},E.prototype._firstGroup=function(){var t="top"==this.options.orientation.item?0:this.groupIds.length-1,e=this.groupIds[t];return this.groups[e]||this.groups[_]||null},E.prototype._updateUngrouped=function(){var t,e,i=this.groups[_];if(this.groupsData){if(i)for(e in i.hide(),delete this.groups[_],this.items)if(this.items.hasOwnProperty(e)){(t=this.items[e]).parent&&t.parent.remove(t);var n=this._getGroupId(t.data),o=this.groups[n];o&&o.add(t)||t.hide()}}else if(!i){for(e in i=new c(null,null,this),this.groups[_]=i,this.items)this.items.hasOwnProperty(e)&&(t=this.items[e],i.add(t));i.show()}},E.prototype.getLabelSet=function(){return this.dom.labelSet},E.prototype.setItems=function(t){var e,i=this,n=this.itemsData;if(t){if(!(t instanceof l||t instanceof u))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=t}else this.itemsData=null;if(n&&(s.forEach(this.itemListeners,function(t,e){n.off(e,t)}),e=n.getIds(),this._onRemove(e)),this.itemsData){var o=this.id;s.forEach(this.itemListeners,function(t,e){i.itemsData.on(e,t,o)}),e=this.itemsData.getIds(),this._onAdd(e),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})},E.prototype.getItems=function(){return this.itemsData},E.prototype.setGroups=function(t){var e,i=this;if(this.groupsData&&(s.forEach(this.groupListeners,function(t,e){i.groupsData.off(e,t)}),e=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(e)),t){if(!(t instanceof l||t instanceof u))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var n=this.groupsData;this.groupsData instanceof u&&(n=this.groupsData.getDataSet()),n.get().forEach(function(t){t.nestedGroups&&t.nestedGroups.forEach(function(e){var i=n.get(e);i.nestedInGroup=t.id,0==t.showNested&&(i.visible=!1),n.update(i)})});var o=this.id;s.forEach(this.groupListeners,function(t,e){i.groupsData.on(e,t,o)}),e=this.groupsData.getIds(),this._onAddGroups(e)}this._updateUngrouped(),this._order(),this.body.emitter.emit("_change",{queue:!0})},E.prototype.getGroups=function(){return this.groupsData},E.prototype.removeItem=function(t){var e=this.itemsData.get(t),i=this.itemsData.getDataSet();e&&this.options.onRemove(e,function(e){e&&i.remove(t)})},E.prototype._getType=function(t){return t.type||this.options.type||(t.end?"range":"box")},E.prototype._getGroupId=function(t){return"background"==this._getType(t)&&null==t.group?b:this.groupsData?t.group:_},E.prototype._onUpdate=function(t){var e=this;t.forEach(function(t){var i,n=e.itemsData.get(t,e.itemOptions),o=e.items[t],r=n?e._getType(n):null,a=E.types[r];if(o&&(a&&o instanceof a?e._updateItem(o,n):(i=o.selected,e._removeItem(o),o=null)),!o&&n){if(!a)throw"rangeoverflow"==r?new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: .vis-item.vis-range .vis-item-content {overflow: visible;}'):new TypeError('Unknown item type "'+r+'"');(o=new a(n,e.conversion,e.options)).id=t,e._addItem(o),i&&(this.selection.push(t),o.select())}}.bind(this)),this._order(),this.body.emitter.emit("_change",{queue:!0})},E.prototype._onAdd=E.prototype._onUpdate,E.prototype._onRemove=function(t){var e=0,i=this;t.forEach(function(t){var n=i.items[t];n&&(e++,i._removeItem(n))}),e&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))},E.prototype._order=function(){s.forEach(this.groups,function(t){t.order()})},E.prototype._onUpdateGroups=function(t){this._onAddGroups(t)},E.prototype._onAddGroups=function(t){var e=this;t.forEach(function(t){var i=e.groupsData.get(t),o=e.groups[t];if(o)o.setData(i);else{if(t==_||t==b)throw new Error("Illegal group id. "+t+" is a reserved id.");var r=(0,n.default)(e.options);for(var a in s.extend(r,{height:null}),o=new c(t,i,e),e.groups[t]=o,e.items)if(e.items.hasOwnProperty(a)){var l=e.items[a];l.data.group==t&&o.add(l)}o.order(),o.show()}}),this.body.emitter.emit("_change",{queue:!0})},E.prototype._onRemoveGroups=function(t){var e=this.groups;t.forEach(function(t){var i=e[t];i&&(i.hide(),delete e[t])}),this.markDirty(),this.body.emitter.emit("_change",{queue:!0})},E.prototype._orderGroups=function(){if(this.groupsData){var t=this.groupsData.getIds({order:this.options.groupOrder});t=this._orderNestedGroups(t);var e=!s.equalArray(t,this.groupIds);if(e){var i=this.groups;t.forEach(function(t){i[t].hide()}),t.forEach(function(t){i[t].show()}),this.groupIds=t}return e}return!1},E.prototype._orderNestedGroups=function(t){var e=[];return t.forEach(function(t){var i=this.groupsData.get(t);if(i.nestedInGroup||e.push(t),i.nestedGroups){var n=this.groupsData.get({filter:function(e){return e.nestedInGroup==t},order:this.options.groupOrder}).map(function(t){return t.id});e=e.concat(n)}},this),e},E.prototype._addItem=function(t){this.items[t.id]=t;var e=this._getGroupId(t.data),i=this.groups[e];i?i&&i.data&&i.data.showNested&&(t.groupShowing=!0):t.groupShowing=!1,i&&i.add(t)},E.prototype._updateItem=function(t,e){t.setData(e);var i=this._getGroupId(t.data),n=this.groups[i];n?n&&n.data&&n.data.showNested&&(t.groupShowing=!0):t.groupShowing=!1},E.prototype._removeItem=function(t){t.hide(),delete this.items[t.id];var e=this.selection.indexOf(t.id);-1!=e&&this.selection.splice(e,1),t.parent&&t.parent.remove(t)},E.prototype._constructByEndArray=function(t){for(var e=[],i=0;i<t.length;i++)t[i]instanceof m&&e.push(t[i]);return e},E.prototype._onTouch=function(t){this.touchParams.item=this.itemFromTarget(t),this.touchParams.dragLeftItem=t.target.dragLeftItem||!1,this.touchParams.dragRightItem=t.target.dragRightItem||!1,this.touchParams.itemProps=null},E.prototype._getGroupIndex=function(t){for(var e=0;e<this.groupIds.length;e++)if(t==this.groupIds[e])return e},E.prototype._onDragStart=function(t){if(!this.touchParams.itemIsDragging){var e,i=this.touchParams.item||null,n=this;if(i&&(i.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;if(null!=i.editable&&!i.editable.updateTime&&!i.editable.updateGroup&&!this.options.editable.overrideItems)return;var o=this.touchParams.dragLeftItem,r=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=i,o)e={item:o,initialX:t.center.x,dragLeft:!0,data:this._cloneItemData(i.data)},this.touchParams.itemProps=[e];else if(r)e={item:r,initialX:t.center.x,dragRight:!0,data:this._cloneItemData(i.data)},this.touchParams.itemProps=[e];else if(this.options.editable.add&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey))this._onDragStartAddItem(t);else{this.groupIds.length<1&&this.redraw();var a=this._getGroupIndex(i.data.group),s=this.options.itemsAlwaysDraggable.item&&!i.selected?[i.id]:this.getSelection();this.touchParams.itemProps=s.map(function(e){var i=n.items[e],o=n._getGroupIndex(i.data.group);return{item:i,initialX:t.center.x,groupOffset:a-o,data:this._cloneItemData(i.data)}}.bind(this))}t.stopPropagation()}else this.options.editable.add&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey)&&this._onDragStartAddItem(t)}},E.prototype._onDragStartAddItem=function(t){var e,i,n=this.options.snap||null;this.options.rtl?i=(e=s.getAbsoluteRight(this.dom.frame))-t.center.x+10:(e=s.getAbsoluteLeft(this.dom.frame),i=t.center.x-e-10);var o=this.body.util.toTime(i),r=this.body.util.getScale(),a=this.body.util.getStep(),l=n?n(o,r,a):o,u={type:"range",start:l,end:l,content:"new item"},d=s.randomUUID();u[this.itemsData._fieldId]=d;var h=this.groupFromTarget(t);h&&(u.group=h.groupId);var c=new m(u,this.conversion,this.options);c.id=d,c.data=this._cloneItemData(u),this._addItem(c),this.touchParams.selectedItem=c;var f={item:c,initialX:t.center.x,data:c.data};this.options.rtl?f.dragLeft=!0:f.dragRight=!0,this.touchParams.itemProps=[f],t.stopPropagation()},E.prototype._onDrag=function(t){if(this.touchParams.itemProps){t.stopPropagation();var e,i=this,n=this.options.snap||null;e=this.options.rtl?this.body.dom.root.offsetLeft+this.body.domProps.right.width:this.body.dom.root.offsetLeft+this.body.domProps.left.width;var o=this.body.util.getScale(),r=this.body.util.getStep(),a=this.touchParams.selectedItem,l=(this.options.editable.overrideItems||null==a.editable)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&null!=a.editable&&a.editable.updateGroup,u=null;if(l&&a&&null!=a.data.group){var d=i.groupFromTarget(t);d&&(u=this._getGroupIndex(d.groupId))}this.touchParams.itemProps.forEach(function(d){var h,c,f,p,g,m=i.body.util.toTime(t.center.x-e),v=i.body.util.toTime(d.initialX-e);h=this.options.rtl?-(m-v):m-v;var y=this._cloneItemData(d.item.data);if(null==d.item.editable||d.item.editable.updateTime||d.item.editable.updateGroup||i.options.editable.overrideItems){if((this.options.editable.overrideItems||null==a.editable)&&this.options.editable.updateTime||!this.options.editable.overrideItems&&null!=a.editable&&a.editable.updateTime)if(d.dragLeft)this.options.rtl?null!=y.end&&(f=s.convert(d.data.end,"Date"),g=new Date(f.valueOf()+h),y.end=n?n(g,o,r):g):null!=y.start&&(c=s.convert(d.data.start,"Date"),p=new Date(c.valueOf()+h),y.start=n?n(p,o,r):p);else if(d.dragRight)this.options.rtl?null!=y.start&&(c=s.convert(d.data.start,"Date"),p=new Date(c.valueOf()+h),y.start=n?n(p,o,r):p):null!=y.end&&(f=s.convert(d.data.end,"Date"),g=new Date(f.valueOf()+h),y.end=n?n(g,o,r):g);else if(null!=y.start)if(c=s.convert(d.data.start,"Date").valueOf(),p=new Date(c+h),null!=y.end){var _=(f=s.convert(d.data.end,"Date")).valueOf()-c.valueOf();y.start=n?n(p,o,r):p,y.end=new Date(y.start.valueOf()+_)}else y.start=n?n(p,o,r):p;if(l&&!d.dragLeft&&!d.dragRight&&null!=u&&null!=y.group){var b=u-d.groupOffset;b=Math.max(0,b),b=Math.min(i.groupIds.length-1,b),y.group=i.groupIds[b]}y=this._cloneItemData(y),i.options.onMoving(y,function(t){t&&d.item.setData(this._cloneItemData(t,"Date"))}.bind(this))}}.bind(this)),this.body.emitter.emit("_change")}},E.prototype._moveToGroup=function(t,e){var i=this.groups[e];if(i&&i.groupId!=t.data.group){var n=t.parent;n.remove(t),n.order(),t.data.group=i.groupId,i.add(t),i.order()}},E.prototype._onDragEnd=function(t){if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){t.stopPropagation();var e=this,i=this.itemsData.getDataSet(),n=this.touchParams.itemProps;this.touchParams.itemProps=null,n.forEach(function(t){var n=t.item.id;if(null!=e.itemsData.get(n,e.itemOptions)){var o=this._cloneItemData(t.item.data);e.options.onMove(o,function(o){o?(o[i._fieldId]=n,i.update(o)):(t.item.setData(t.data),e.body.emitter.emit("_change"))})}else e.options.onAdd(t.item.data,function(i){e._removeItem(t.item),i&&e.itemsData.getDataSet().add(i),e.body.emitter.emit("_change")})}.bind(this))}},E.prototype._onGroupClick=function(t){var e=this.groupFromTarget(t);if(e&&e.nestedGroups){var i=this.groupsData.getDataSet(),n=i.get(e.groupId);null==n.showNested&&(n.showNested=!0),n.showNested=!n.showNested;var o=i.get(e.nestedGroups).map(function(t){return t.visible=n.showNested,t});if(i.update(o.concat(n)),n.showNested)s.removeClassName(e.dom.label,"collapsed"),s.addClassName(e.dom.label,"expanded");else{s.removeClassName(e.dom.label,"expanded");var r=this.options.rtl?"collapsed-rtl":"collapsed";s.addClassName(e.dom.label,r)}}},E.prototype._onGroupDragStart=function(t){this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(t),this.groupTouchParams.group&&(t.stopPropagation(),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))},E.prototype._onGroupDrag=function(t){if(this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();var e=this.groupsData;this.groupsData instanceof u&&(e=this.groupsData.getDataSet());var i=this.groupFromTarget(t);if(i&&i.height!=this.groupTouchParams.group.height){var n=i.top<this.groupTouchParams.group.top,o=t.center?t.center.y:t.clientY,r=s.getAbsoluteTop(i.dom.foreground),a=this.groupTouchParams.group.height;if(n){if(r+a<o)return}else if(r+i.height-a>o)return}if(i&&i!=this.groupTouchParams.group){var l=e.get(i.groupId),d=e.get(this.groupTouchParams.group.groupId);d&&l&&(this.options.groupOrderSwap(d,l,e),e.update(d),e.update(l));var h=e.getIds({order:this.options.groupOrder});if(!s.equalArray(h,this.groupTouchParams.originalOrder))for(var c=this.groupTouchParams.originalOrder,f=this.groupTouchParams.group.groupId,p=Math.min(c.length,h.length),g=0,m=0,v=0;g<p;){for(;g+m<p&&g+v<p&&h[g+m]==c[g+v];)g++;if(g+m>=p)break;if(h[g+m]==f)m=1;else if(c[g+v]==f)v=1;else{var y=h.indexOf(c[g+v]),_=e.get(h[g+m]),b=e.get(c[g+v]);this.options.groupOrderSwap(_,b,e),e.update(_),e.update(b);var E=h[g+m];h[g+m]=c[g+v],h[y]=E,g++}}}}},E.prototype._onGroupDragEnd=function(t){if(this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();var e=this,i=e.groupTouchParams.group.groupId,n=e.groupsData.getDataSet(),o=s.extend({},n.get(i));e.options.onMoveGroup(o,function(t){if(t)t[n._fieldId]=i,n.update(t);else{var o=n.getIds({order:e.options.groupOrder});if(!s.equalArray(o,e.groupTouchParams.originalOrder))for(var r=e.groupTouchParams.originalOrder,a=Math.min(r.length,o.length),l=0;l<a;){for(;l<a&&o[l]==r[l];)l++;if(l>=a)break;var u=o.indexOf(r[l]),d=n.get(o[l]),h=n.get(r[l]);e.options.groupOrderSwap(d,h,n),n.update(d),n.update(h);var c=o[l];o[l]=r[l],o[u]=c,l++}}}),e.body.emitter.emit("groupDragged",{groupId:i})}},E.prototype._onSelectItem=function(t){if(this.options.selectable){var e=t.srcEvent&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey),i=t.srcEvent&&t.srcEvent.shiftKey;if(e||i)this._onMultiSelectItem(t);else{var n=this.getSelection(),o=this.itemFromTarget(t),r=o?[o.id]:[];this.setSelection(r);var a=this.getSelection();(a.length>0||n.length>0)&&this.body.emitter.emit("select",{items:a,event:t})}}},E.prototype._onMouseOver=function(t){var e=this.itemFromTarget(t);if(e&&e!==this.itemFromRelatedTarget(t)){var i=e.getTitle();if(this.options.showTooltips&&i){null==this.popup&&(this.popup=new y(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(i);var n=this.body.dom.centerContainer;this.popup.setPosition(t.clientX-s.getAbsoluteLeft(n)+n.offsetLeft,t.clientY-s.getAbsoluteTop(n)+n.offsetTop),this.popup.show()}else null!=this.popup&&this.popup.hide();this.body.emitter.emit("itemover",{item:e.id,event:t})}},E.prototype._onMouseOut=function(t){var e=this.itemFromTarget(t);e&&e!==this.itemFromRelatedTarget(t)&&(null!=this.popup&&this.popup.hide(),this.body.emitter.emit("itemout",{item:e.id,event:t}))},E.prototype._onMouseMove=function(t){if(this.itemFromTarget(t)&&this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden){var e=this.body.dom.centerContainer;this.popup.setPosition(t.clientX-s.getAbsoluteLeft(e)+e.offsetLeft,t.clientY-s.getAbsoluteTop(e)+e.offsetTop),this.popup.show()}},E.prototype._onMouseWheel=function(t){this.touchParams.itemIsDragging&&this._onDragEnd(t)},E.prototype._onUpdateItem=function(t){if(this.options.selectable&&this.options.editable.add){var e=this;if(t){var i=e.itemsData.get(t.id);this.options.onUpdate(i,function(t){t&&e.itemsData.getDataSet().update(t)})}}},E.prototype._onDropObjectOnItem=function(t){var e=this.itemFromTarget(t),i=JSON.parse(t.dataTransfer.getData("text"));this.options.onDropObjectOnItem(i,e)},E.prototype._onAddItem=function(t){if(this.options.selectable&&this.options.editable.add){var e,i,n=this,o=this.options.snap||null;this.options.rtl?i=(e=s.getAbsoluteRight(this.dom.frame))-t.center.x:(e=s.getAbsoluteLeft(this.dom.frame),i=t.center.x-e);var r,a,l=this.body.util.toTime(i),u=this.body.util.getScale(),d=this.body.util.getStep();"drop"==t.type?((a=JSON.parse(t.dataTransfer.getData("text"))).content=a.content?a.content:"new item",a.start=a.start?a.start:o?o(l,u,d):l,a.type=a.type||"box",a[this.itemsData._fieldId]=a.id||s.randomUUID(),"range"!=a.type||a.end||(r=this.body.util.toTime(i+this.props.width/5),a.end=o?o(r,u,d):r)):((a={start:o?o(l,u,d):l,content:"new item"})[this.itemsData._fieldId]=s.randomUUID(),"range"===this.options.type&&(r=this.body.util.toTime(i+this.props.width/5),a.end=o?o(r,u,d):r));var h=this.groupFromTarget(t);h&&(a.group=h.groupId),a=this._cloneItemData(a),this.options.onAdd(a,function(e){e&&(n.itemsData.getDataSet().add(e),"drop"==t.type&&n.setSelection([e.id]))})}},E.prototype._onMultiSelectItem=function(t){if(this.options.selectable){var e=this.itemFromTarget(t);if(e){var i=this.options.multiselect?this.getSelection():[];if(t.srcEvent&&t.srcEvent.shiftKey&&this.options.multiselect){var n=this.itemsData.get(e.id).group,o=void 0;this.options.multiselectPerGroup&&i.length>0&&(o=this.itemsData.get(i[0]).group),this.options.multiselectPerGroup&&null!=o&&o!=n||i.push(e.id);var r=E._getItemRange(this.itemsData.get(i,this.itemOptions));if(!this.options.multiselectPerGroup||o==n)for(var a in i=[],this.items)if(this.items.hasOwnProperty(a)){var s=this.items[a],l=s.data.start,u=void 0!==s.data.end?s.data.end:l;!(l>=r.min&&u<=r.max)||this.options.multiselectPerGroup&&o!=this.itemsData.get(s.id).group||s instanceof v||i.push(s.id)}}else{var d=i.indexOf(e.id);-1==d?i.push(e.id):i.splice(d,1)}this.setSelection(i),this.body.emitter.emit("select",{items:this.getSelection(),event:t})}}},E._getItemRange=function(t){var e=null,i=null;return t.forEach(function(t){(null==i||t.start<i)&&(i=t.start),null!=t.end?(null==e||t.end>e)&&(e=t.end):(null==e||t.start>e)&&(e=t.start)}),{min:i,max:e}},E.prototype.itemFromElement=function(t){for(var e=t;e;){if(e.hasOwnProperty("timeline-item"))return e["timeline-item"];e=e.parentNode}return null},E.prototype.itemFromTarget=function(t){return this.itemFromElement(t.target)},E.prototype.itemFromRelatedTarget=function(t){return this.itemFromElement(t.relatedTarget)},E.prototype.groupFromTarget=function(t){var e=t.center?t.center.y:t.clientY,i=this.groupIds;i.length<=0&&this.groupsData&&(i=this.groupsData.getIds({order:this.options.groupOrder}));for(var n=0;n<i.length;n++){var o=i[n],r=this.groups[o],a=r.dom.foreground,l=s.getAbsoluteTop(a);if(e>l&&e<l+a.offsetHeight)return r;if("top"===this.options.orientation.item){if(n===this.groupIds.length-1&&e>l)return r}else if(0===n&&e<l+a.offset)return r}return null},E.itemSetFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("timeline-itemset"))return e["timeline-itemset"];e=e.parentNode}return null},E.prototype._cloneItemData=function(t,e){var i=s.extend({},t);return e||(e=this.itemsData.getDataSet()._options.type),null!=i.start&&(i.start=s.convert(i.start,e&&e.start||"Date")),null!=i.end&&(i.end=s.convert(i.end,e&&e.end||"Date")),i},t.exports=E},function(t,e,i){e.orderByStart=function(t){t.sort(function(t,e){return t.data.start-e.data.start})},e.orderByEnd=function(t){t.sort(function(t,e){return("end"in t.data?t.data.end:t.data.start)-("end"in e.data?e.data.end:e.data.start)})},e.stack=function(t,i,n){if(n)for(var o=0;o<t.length;o++)t[o].top=null;for(o=0;o<t.length;o++){var r=t[o];if(r.stack&&null===r.top){r.top=i.axis;do{for(var a=null,s=0,l=t.length;s<l;s++){var u=t[s];if(null!==u.top&&u!==r&&u.stack&&e.collision(r,u,i.item,u.options.rtl)){a=u;break}}null!=a&&(r.top=a.top+a.height+i.item.vertical)}while(a)}}},e.substack=function(t,i,n){for(var o=0;o<t.length;o++)t[o].top=null;var r=n.height;for(o=0;o<t.length;o++){var a=t[o];if(a.stack&&null===a.top){a.top=a.baseTop;do{for(var s=null,l=0,u=t.length;l<u;l++){var d=t[l];if(null!==d.top&&d!==a&&e.collision(a,d,i.item,d.options.rtl)){s=d;break}}null!=s&&(a.top=s.top+s.height+i.item.vertical),a.top+a.height>r&&(r=a.top+a.height)}while(s)}}n.height=r-n.top+.5*i.item.vertical},e.nostack=function(t,i,n,o){for(var r=0;r<t.length;r++)if(null==t[r].data.subgroup)t[r].top=i.item.vertical;else if(void 0!==t[r].data.subgroup&&o){var a=0;for(var s in n)n.hasOwnProperty(s)&&1==n[s].visible&&n[s].index<n[t[r].data.subgroup].index&&(a+=n[s].height,n[t[r].data.subgroup].top=a);t[r].top=a+.5*i.item.vertical}o||e.stackSubgroups(t,i,n)},e.stackSubgroups=function(t,i,n){for(var o in n)if(n.hasOwnProperty(o)){n[o].top=0;do{var r=null;for(var a in n)if(null!==n[a].top&&a!==o&&n[o].index>n[a].index&&e.collisionByTimes(n[o],n[a])){r=n[a];break}null!=r&&(n[o].top=r.top+r.height)}while(r)}for(var s=0;s<t.length;s++)void 0!==t[s].data.subgroup&&(t[s].top=n[t[s].data.subgroup].top+.5*i.item.vertical)},e.stackSubgroupsWithInnerStack=function(t,i,n){var o=!1,r=[];for(var a in n)n[a].hasOwnProperty("index")?r[n[a].index]=a:r.push(a);for(var s=0;s<r.length;s++)if(a=r[s],n.hasOwnProperty(a)){for(var l in o=o||n[a].stack,n[a].top=0,n)n[l].visible&&n[a].index>n[l].index&&(n[a].top+=n[l].height);for(var u=t[a],d=0;d<u.length;d++)void 0!==u[d].data.subgroup&&(u[d].top=n[u[d].data.subgroup].top+.5*i.item.vertical,n[a].stack&&(u[d].baseTop=u[d].top));o&&n[a].stack&&e.substack(t[a],i,n[a])}},e.collision=function(t,e,i,n){return n?t.right-i.horizontal+.001<e.right+e.width&&t.right+t.width+i.horizontal-.001>e.right&&t.top-i.vertical+.001<e.top+e.height&&t.top+t.height+i.vertical-.001>e.top:t.left-i.horizontal+.001<e.left+e.width&&t.left+t.width+i.horizontal-.001>e.left&&t.top-i.vertical+.001<e.top+e.height&&t.top+t.height+i.vertical-.001>e.top},e.collisionByTimes=function(t,e){return t.start<=e.start&&t.end>=e.start&&t.top<e.top+e.height&&t.top+t.height>e.top||e.start<=t.start&&e.end>=t.start&&e.top<t.top+t.height&&e.top+e.height>t.top}},function(t,e,i){var n=i(38);function o(t,e,i){if(this.props={dot:{width:0,height:0},line:{width:0,height:0}},this.options=i,t&&null==t.start)throw new Error('Property "start" missing in item '+t);n.call(this,t,e,i)}o.prototype=new n(null,null,null),o.prototype.isVisible=function(t){var e=this.options.align,i=this.width*t.getMillisecondsPerPixel();return"right"==e?this.data.start.getTime()>t.start&&this.data.start.getTime()-i<t.end:"left"==e?this.data.start.getTime()+i>t.start&&this.data.start.getTime()<t.end:this.data.start.getTime()+i/2>t.start&&this.data.start.getTime()-i/2<t.end},o.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["timeline-item"]=this,this.dirty=!0)},o.prototype._appendDomElement=function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var i=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");i.appendChild(this.dom.dot)}this.displayed=!0},o.prototype._updateDirtyDomComponents=function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var t=this.editable.updateTime||this.editable.updateGroup,e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.box.className="vis-item vis-box"+e,this.dom.line.className="vis-item vis-line"+e,this.dom.dot.className="vis-item vis-dot"+e}},o.prototype._getDomComponentsSizes=function(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}},o.prototype._updateDomComponentsSizes=function(t){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=t.dot.height,this.props.dot.width=t.dot.width,this.props.line.width=t.line.width,this.width=t.box.width,this.height=t.box.height,this.options.rtl?this.dom.box.style.right=t.previous.right:this.dom.box.style.left=t.previous.left,this.dirty=!1},o.prototype._repaintDomAdditionals=function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)},o.prototype.redraw=function(t){var e,i,n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){this.dirty&&(e=this._getDomComponentsSizes())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(e)}.bind(this),this._repaintDomAdditionals.bind(this)];return t?n:(n.forEach(function(t){i=t()}),i)},o.prototype.show=function(){this.displayed||this.redraw()},o.prototype.hide=function(){if(this.displayed){var t=this.dom;t.box.parentNode&&t.box.parentNode.removeChild(t.box),t.line.parentNode&&t.line.parentNode.removeChild(t.line),t.dot.parentNode&&t.dot.parentNode.removeChild(t.dot),this.displayed=!1}},o.prototype.repositionX=function(){var t=this.conversion.toScreen(this.data.start),e=this.options.align;"right"==e?this.options.rtl?(this.right=t-this.width,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=t-this.props.line.width+"px",this.dom.dot.style.right=t-this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=t-this.width,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=t-this.props.line.width+"px",this.dom.dot.style.left=t-this.props.line.width/2-this.props.dot.width/2+"px"):"left"==e?this.options.rtl?(this.right=t,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=t+"px",this.dom.dot.style.right=t+this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=t,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=t+"px",this.dom.dot.style.left=t+this.props.line.width/2-this.props.dot.width/2+"px"):this.options.rtl?(this.right=t-this.width/2,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=t-this.props.line.width+"px",this.dom.dot.style.right=t-this.props.dot.width/2+"px"):(this.left=t-this.width/2,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=t-this.props.line.width/2+"px",this.dom.dot.style.left=t-this.props.dot.width/2+"px")},o.prototype.repositionY=function(){var t=this.options.orientation.item,e=this.dom.box,i=this.dom.line,n=this.dom.dot;if("top"==t)e.style.top=(this.top||0)+"px",i.style.top="0",i.style.height=this.parent.top+this.top+1+"px",i.style.bottom="";else{var o=this.parent.itemSet.props.height,r=o-this.parent.top-this.parent.height+this.top;e.style.top=(this.parent.height-this.top-this.height||0)+"px",i.style.top=o-r+"px",i.style.bottom="0"}n.style.top=-this.props.dot.height/2+"px"},o.prototype.getWidthLeft=function(){return this.width/2},o.prototype.getWidthRight=function(){return this.width/2},t.exports=o},function(t,e,i){var n=i(38);function o(t,e,i){if(this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},this.options=i,t&&null==t.start)throw new Error('Property "start" missing in item '+t);n.call(this,t,e,i)}o.prototype=new n(null,null,null),o.prototype.isVisible=function(t){var e=this.width*t.getMillisecondsPerPixel();return this.data.start.getTime()+e>t.start&&this.data.start<t.end},o.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["timeline-item"]=this,this.dirty=!0)},o.prototype._appendDomElement=function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.point)}this.displayed=!0},o.prototype._updateDirtyDomComponents=function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var t=this.editable.updateTime||this.editable.updateGroup,e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.point.className="vis-item vis-point"+e,this.dom.dot.className="vis-item vis-dot"+e}},o.prototype._getDomComponentsSizes=function(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}},o.prototype._updateDomComponentsSizes=function(t){this.props.dot.width=t.dot.width,this.props.dot.height=t.dot.height,this.props.content.height=t.content.height,this.options.rtl?this.dom.content.style.marginRight=2*this.props.dot.width+"px":this.dom.content.style.marginLeft=2*this.props.dot.width+"px",this.width=t.point.width,this.height=t.point.height,this.dom.dot.style.top=(this.height-this.props.dot.height)/2+"px",this.options.rtl?this.dom.dot.style.right=this.props.dot.width/2+"px":this.dom.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1},o.prototype._repaintDomAdditionals=function(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)},o.prototype.redraw=function(t){var e,i,n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){this.dirty&&(e=this._getDomComponentsSizes())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(e)}.bind(this),this._repaintDomAdditionals.bind(this)];return t?n:(n.forEach(function(t){i=t()}),i)},o.prototype.show=function(){this.displayed||this.redraw()},o.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)},o.prototype.repositionX=function(){var t=this.conversion.toScreen(this.data.start);this.options.rtl?(this.right=t-this.props.dot.width,this.dom.point.style.right=this.right+"px"):(this.left=t-this.props.dot.width,this.dom.point.style.left=this.left+"px")},o.prototype.repositionY=function(){var t=this.options.orientation.item,e=this.dom.point;e.style.top="top"==t?this.top+"px":this.parent.height-this.top-this.height+"px"},o.prototype.getWidthLeft=function(){return this.props.dot.width},o.prototype.getWidthRight=function(){return this.props.dot.width},t.exports=o},function(t,e,i){var n=i(38),o=i(69),r=i(70);function a(t,e,i){if(this.props={content:{width:0}},this.overflow=!1,t){if(null==t.start)throw new Error('Property "start" missing in item '+t.id);if(null==t.end)throw new Error('Property "end" missing in item '+t.id)}n.call(this,t,e,i)}a.prototype=new n(null,null,null),a.prototype.baseClassName="vis-item vis-background",a.prototype.stack=!1,a.prototype.isVisible=function(t){return this.data.start<t.end&&this.data.end>t.start},a.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)},a.prototype._appendDomElement=function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var t=this.parent.dom.background;if(!t)throw new Error("Cannot redraw item: parent has no background container element");t.appendChild(this.dom.box)}this.displayed=!0},a.prototype._updateDirtyDomComponents=function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+t}},a.prototype._getDomComponentsSizes=function(){return this.overflow="hidden"!==window.getComputedStyle(this.dom.content).overflow,{content:{width:this.dom.content.offsetWidth}}},a.prototype._updateDomComponentsSizes=function(t){this.props.content.width=t.content.width,this.height=0,this.dirty=!1},a.prototype._repaintDomAdditionals=function(){},a.prototype.redraw=function(t){var e,i,n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){this.dirty&&(e=this._getDomComponentsSizes.bind(this)())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(e)}.bind(this),this._repaintDomAdditionals.bind(this)];return t?n:(n.forEach(function(t){i=t()}),i)},a.prototype.show=r.prototype.show,a.prototype.hide=r.prototype.hide,a.prototype.repositionX=r.prototype.repositionX,a.prototype.repositionY=function(t){var e,i=this.options.orientation.item;if(void 0!==this.data.subgroup){var n=this.data.subgroup;this.dom.box.style.height=this.parent.subgroups[n].height+"px",this.dom.box.style.top="top"==i?this.parent.top+this.parent.subgroups[n].top+"px":this.parent.top+this.parent.height-this.parent.subgroups[n].top-this.parent.subgroups[n].height+"px",this.dom.box.style.bottom=""}else this.parent instanceof o?(e=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom="bottom"==i?"0":"",this.dom.box.style.top="top"==i?"0":""):(e=this.parent.height,this.dom.box.style.top=this.parent.top+"px",this.dom.box.style.bottom="");this.dom.box.style.height=e+"px"},t.exports=a},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,i){(0,n.default)(this,t),this.container=e,this.overflowMethod=i||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return(0,o.default)(t,[{key:"setPosition",value:function(t,e){this.x=parseInt(t),this.y=parseInt(e)}},{key:"setText",value:function(t){t instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(t)):this.frame.innerHTML=t}},{key:"show",value:function(t){if(void 0===t&&(t=!0),!0===t){var e=this.frame.clientHeight,i=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,r=0,a=0;if("flip"==this.overflowMethod){var s=!1,l=!0;this.y-e<this.padding&&(l=!1),this.x+i>o-this.padding&&(s=!0),r=s?this.x-i:this.x,a=l?this.y-e:this.y}else(a=this.y-e)+e+this.padding>n&&(a=n-e-this.padding),a<this.padding&&(a=this.padding),(r=this.x)+i+this.padding>o&&(r=o-i-this.padding),r<this.padding&&(r=this.padding);this.frame.style.left=r+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),t}();e.default=a},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n="string",o="boolean",r="number",a="object",s={configure:{enabled:{boolean:o},filter:{boolean:o,function:"function"},container:{dom:"dom"},__type__:{object:a,boolean:o,function:"function"}},align:{string:n},rtl:{boolean:o,undefined:"undefined"},rollingMode:{follow:{boolean:o},offset:{number:r,undefined:"undefined"},__type__:{object:a}},verticalScroll:{boolean:o,undefined:"undefined"},horizontalScroll:{boolean:o,undefined:"undefined"},autoResize:{boolean:o},throttleRedraw:{number:r},clickToUse:{boolean:o},dataAttributes:{string:n,array:"array"},editable:{add:{boolean:o,undefined:"undefined"},remove:{boolean:o,undefined:"undefined"},updateGroup:{boolean:o,undefined:"undefined"},updateTime:{boolean:o,undefined:"undefined"},overrideItems:{boolean:o,undefined:"undefined"},__type__:{boolean:o,object:a}},end:{number:r,date:"date",string:n,moment:"moment"},format:{minorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},week:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:a,function:"function"}},majorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},week:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:a,function:"function"}},__type__:{object:a}},moment:{function:"function"},groupOrder:{string:n,function:"function"},groupEditable:{add:{boolean:o,undefined:"undefined"},remove:{boolean:o,undefined:"undefined"},order:{boolean:o,undefined:"undefined"},__type__:{boolean:o,object:a}},groupOrderSwap:{function:"function"},height:{string:n,number:r},hiddenDates:{start:{date:"date",number:r,string:n,moment:"moment"},end:{date:"date",number:r,string:n,moment:"moment"},repeat:{string:n},__type__:{object:a,array:"array"}},itemsAlwaysDraggable:{item:{boolean:o,undefined:"undefined"},range:{boolean:o,undefined:"undefined"},__type__:{boolean:o,object:a}},limitSize:{boolean:o},locale:{string:n},locales:{__any__:{any:"any"},__type__:{object:a}},margin:{axis:{number:r},item:{horizontal:{number:r,undefined:"undefined"},vertical:{number:r,undefined:"undefined"},__type__:{object:a,number:r}},__type__:{object:a,number:r}},max:{date:"date",number:r,string:n,moment:"moment"},maxHeight:{number:r,string:n},maxMinorChars:{number:r},min:{date:"date",number:r,string:n,moment:"moment"},minHeight:{number:r,string:n},moveable:{boolean:o},multiselect:{boolean:o},multiselectPerGroup:{boolean:o},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:n,undefined:"undefined"},item:{string:n,undefined:"undefined"},__type__:{string:n,object:a}},selectable:{boolean:o},showCurrentTime:{boolean:o},showMajorLabels:{boolean:o},showMinorLabels:{boolean:o},stack:{boolean:o},stackSubgroups:{boolean:o},snap:{function:"function",null:"null"},start:{date:"date",number:r,string:n,moment:"moment"},template:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:n,function:"function"},showTooltips:{boolean:o},tooltip:{followMouse:{boolean:o},overflowMethod:{string:["cap","flip"]},__type__:{object:a}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:o,object:a}},timeAxis:{scale:{string:n,undefined:"undefined"},step:{number:r,undefined:"undefined"},__type__:{object:a}},type:{string:n},width:{string:n,number:r},zoomable:{boolean:o},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:r},zoomMin:{number:r},__type__:{object:a}};e.allOptions=s,e.configureOptions={global:{align:["center","left","right"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupsDraggable:!1,height:"",locale:"",margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip"},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1]}}},function(t,e,i){var n,o=i(6),r=(n=o)&&n.__esModule?n:{default:n},a=i(2),s=i(14),l=i(11),u=i(12),d=i(16),h=i(107),c=i(109),f=i(112),p=i(110),g=i(111),m=i(72);function v(t,e){this.id=a.randomUUID(),this.body=t,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=a.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(t,e,n){i._onAdd(e.items)},update:function(t,e,n){i._onUpdate(e.items)},remove:function(t,e,n){i._onRemove(e.items)}},this.groupListeners={add:function(t,e,n){i._onAddGroups(e.items)},update:function(t,e,n){i._onUpdateGroups(e.items)},remove:function(t,e,n){i._onRemoveGroups(e.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){i.lastStart=i.body.range.start,i.svg.style.left=a.option.asSize(-i.props.width),i.forceGraphUpdate=!0,i.redraw.call(i)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}v.prototype=new d,v.prototype._create=function(){var t=document.createElement("div");t.className="vis-line-graph",this.dom.frame=t,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",t.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new h(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new h(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new f(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new f(this.body,this.options.legend,"right",this.options.groups),this.show()},v.prototype.setOptions=function(t){t&&(void 0===t.graphHeight&&void 0!==t.height?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):void 0!==this.body.domProps.centerContainer.height&&void 0!==t.graphHeight&&parseInt((t.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),a.selectiveDeepExtend(["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"],this.options,t),a.mergeOptions(this.options,t,"interpolation"),a.mergeOptions(this.options,t,"drawPoints"),a.mergeOptions(this.options,t,"shaded"),a.mergeOptions(this.options,t,"legend"),t.interpolation&&"object"==(0,r.default)(t.interpolation)&&t.interpolation.parametrization&&("uniform"==t.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==t.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&void 0!==t.dataAxis&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&void 0!==t.legend&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty("__ungrouped__")&&this.groups.__ungrouped__.setOptions(t)),this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))},v.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},v.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},v.prototype.setItems=function(t){var e,i=this,n=this.itemsData;if(t){if(!(t instanceof l||t instanceof u))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=t}else this.itemsData=null;if(n&&(a.forEach(this.itemListeners,function(t,e){n.off(e,t)}),e=n.getIds(),this._onRemove(e)),this.itemsData){var o=this.id;a.forEach(this.itemListeners,function(t,e){i.itemsData.on(e,t,o)}),e=this.itemsData.getIds(),this._onAdd(e)}},v.prototype.setGroups=function(t){var e,i=this;if(this.groupsData){a.forEach(this.groupListeners,function(t,e){i.groupsData.off(e,t)}),e=this.groupsData.getIds(),this.groupsData=null;for(var n=0;n<e.length;n++)this._removeGroup(e[n])}if(t){if(!(t instanceof l||t instanceof u))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var o=this.id;a.forEach(this.groupListeners,function(t,e){i.groupsData.on(e,t,o)}),e=this.groupsData.getIds(),this._onAddGroups(e)}},v.prototype._onUpdate=function(t){this._updateAllGroupData(t)},v.prototype._onAdd=function(t){this._onUpdate(t)},v.prototype._onRemove=function(t){this._onUpdate(t)},v.prototype._onUpdateGroups=function(t){this._updateAllGroupData(null,t)},v.prototype._onAddGroups=function(t){this._onUpdateGroups(t)},v.prototype._onRemoveGroups=function(t){for(var e=0;e<t.length;e++)this._removeGroup(t[e]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})},v.prototype._removeGroup=function(t){this.groups.hasOwnProperty(t)&&("right"==this.groups[t].options.yAxisOrientation?(this.yAxisRight.removeGroup(t),this.legendRight.removeGroup(t),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(t),this.legendLeft.removeGroup(t),this.legendLeft.redraw()),delete this.groups[t])},v.prototype._updateGroup=function(t,e){this.groups.hasOwnProperty(e)?(this.groups[e].update(t),"right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e]),this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e)):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]),this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e))):(this.groups[e]=new c(t,e,this.options,this.groupsUsingDefaultStyles),"right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()},v.prototype._updateAllGroupData=function(t,e){if(null!=this.itemsData){var i={},n=this.itemsData.get(),o=this.itemsData._fieldId,r={};t&&t.map(function(t){r[t]=t});for(var s={},l=0;l<n.length;l++){var u=n[l],d=u.group;null==d&&(d="__ungrouped__"),s.hasOwnProperty(d)?s[d]++:s[d]=1}var h={};if(!e&&t)for(d in this.groups)if(this.groups.hasOwnProperty(d)){var c=(m=this.groups[d]).getItems();i[d]=c.filter(function(t){return h[t[o]]=t[o],t[o]!==r[t[o]]});var f=s[d];s[d]-=i[d].length,i[d].length<f&&(i[d][f-1]={})}for(l=0;l<n.length;l++)if(null==(d=(u=n[l]).group)&&(d="__ungrouped__"),e||!t||u[o]===r[u[o]]||!h.hasOwnProperty(u[o])){i.hasOwnProperty(d)||(i[d]=new Array(s[d]));var p=a.bridgeObject(u);p.x=a.convert(u.x,"Date"),p.end=a.convert(u.end,"Date"),p.orginalY=u.y,p.y=Number(u.y),p[o]=u[o];var g=i[d].length-s[d]--;i[d][g]=p}for(d in this.groups)this.groups.hasOwnProperty(d)&&(i.hasOwnProperty(d)||(i[d]=new Array(0)));for(d in i)if(i.hasOwnProperty(d))if(0==i[d].length)this.groups.hasOwnProperty(d)&&this._removeGroup(d);else{var m=void 0;null!=this.groupsData&&(m=this.groupsData.get(d)),null==m&&(m={id:d,content:this.options.defaultGroup+d}),this._updateGroup(m,d),this.groups[d].setItems(i[d])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}},v.prototype.redraw=function(){var t=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,t=this._isResized()||t;var e=this.body.range.end-this.body.range.start,i=e!=this.lastVisibleInterval;if(this.lastVisibleInterval=e,1==t&&(this.svg.style.width=a.option.asSize(3*this.props.width),this.svg.style.left=a.option.asSize(-this.props.width),-1==(this.options.height+"").indexOf("%")&&1!=this.updateSVGheightOnResize||(this.updateSVGheight=!0)),1==this.updateSVGheight?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",1==t||1==i||1==this.abortedGraphUpdate||1==this.forceGraphUpdate)t=this._updateGraph()||t,this.forceGraphUpdate=!1;else if(0!=this.lastStart){var n=this.body.range.start-this.lastStart,o=this.body.range.end-this.body.range.start;if(0!=this.props.width){var r=n*(this.props.width/o);this.svg.style.left=-this.props.width-r+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),t},v.prototype._getSortedGroupIds=function(){var t=[];for(var e in this.groups)if(this.groups.hasOwnProperty(e)){var i=this.groups[e];1!=i.visible||void 0!==this.options.groups.visibility[e]&&1!=this.options.groups.visibility[e]||t.push({id:e,zIndex:i.options.zIndex})}a.insertSort(t,function(t,e){var i=t.zIndex,n=e.zIndex;return void 0===i&&(i=0),void 0===n&&(n=0),i==n?0:i<n?-1:1});for(var n=new Array(t.length),o=0;o<t.length;o++)n[o]=t[o].id;return n},v.prototype._updateGraph=function(){if(s.prepareElements(this.svgElements),0!=this.props.width&&null!=this.itemsData){var t,e,i={},n=this.body.util.toGlobalTime(-this.body.domProps.root.width),o=this.body.util.toGlobalTime(2*this.body.domProps.root.width),r=this._getSortedGroupIds();if(r.length>0){var a={};for(this._getRelevantData(r,a,n,o),this._applySampling(r,a),e=0;e<r.length;e++)this._convertXcoordinates(a[r[e]]);if(this._getYRanges(r,a,i),1==this._updateYAxis(r,i))return s.cleanupElements(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var l=void 0;for(e=0;e<r.length;e++)t=this.groups[r[e]],!0===this.options.stack&&"line"===this.options.style&&(null!=t.options.excludeFromStacking&&t.options.excludeFromStacking||(null!=l&&(this._stack(a[t.id],a[l.id]),1==t.options.shaded.enabled&&"group"!==t.options.shaded.orientation&&("top"==t.options.shaded.orientation&&"group"!==l.options.shaded.orientation?(l.options.shaded.orientation="group",l.options.shaded.groupId=t.id):(t.options.shaded.orientation="group",t.options.shaded.groupId=l.id))),l=t)),this._convertYcoordinates(a[r[e]],t);var u={};for(e=0;e<r.length;e++)if("line"===(t=this.groups[r[e]]).options.style&&1==t.options.shaded.enabled){var d=a[r[e]];if(null==d||0==d.length)continue;if(u.hasOwnProperty(r[e])||(u[r[e]]=g.calcPath(d,t)),"group"===t.options.shaded.orientation){var h=t.options.shaded.groupId;if(-1===r.indexOf(h)){console.log(t.id+": Unknown shading group target given:"+h);continue}u.hasOwnProperty(h)||(u[h]=g.calcPath(a[h],this.groups[h])),g.drawShading(u[r[e]],t,u[h],this.framework)}else g.drawShading(u[r[e]],t,void 0,this.framework)}for(p.draw(r,a,this.framework),e=0;e<r.length;e++)if(t=this.groups[r[e]],a[r[e]].length>0)switch(t.options.style){case"line":u.hasOwnProperty(r[e])||(u[r[e]]=g.calcPath(a[r[e]],t)),g.draw(u[r[e]],t,this.framework);case"point":case"points":"point"!=t.options.style&&"points"!=t.options.style&&1!=t.options.drawPoints.enabled||m.draw(a[r[e]],t,this.framework)}}}return s.cleanupElements(this.svgElements),!1},v.prototype._stack=function(t,e){var i,n,o,r,a;i=0;for(var s=0;s<t.length;s++){r=void 0,a=void 0;for(var l=i;l<e.length;l++){if(e[l].x===t[s].x){r=e[l],a=e[l],i=l;break}if(e[l].x>t[s].x){a=e[l],r=0==l?a:e[l-1],i=l;break}}void 0===a&&(r=e[e.length-1],a=e[e.length-1]),n=a.x-r.x,o=a.y-r.y,t[s].y=0==n?t[s].orginalY+a.y:t[s].orginalY+o/n*(t[s].x-r.x)+r.y}},v.prototype._getRelevantData=function(t,e,i,n){var o,r,s,l;if(t.length>0)for(r=0;r<t.length;r++){var u=(o=this.groups[t[r]]).getItems();if(1==o.options.sort){var d=function(t,e){return t.getTime()==e.getTime()?0:t<e?-1:1},h=Math.max(0,a.binarySearchValue(u,i,"x","before",d)),c=Math.min(u.length,a.binarySearchValue(u,n,"x","after",d)+1);c<=0&&(c=u.length);var f=new Array(c-h);for(s=h;s<c;s++)l=o.itemsData[s],f[s-h]=l;e[t[r]]=f}else e[t[r]]=o.itemsData}},v.prototype._applySampling=function(t,e){if(t.length>0)for(var i=0;i<t.length;i++)if(1==this.groups[t[i]].options.sampling){var n=e[t[i]];if(n.length>0){var o,r=n.length,a=r/(this.body.util.toGlobalScreen(n[n.length-1].x)-this.body.util.toGlobalScreen(n[0].x));o=Math.min(Math.ceil(.2*r),Math.max(1,Math.round(a)));for(var s=new Array(r),l=0;l<r;l+=o)s[Math.round(l/o)]=n[l];e[t[i]]=s.splice(0,Math.round(r/o))}}},v.prototype._getYRanges=function(t,e,i){var n,o,r,a,s=[],l=[];if(t.length>0){for(r=0;r<t.length;r++)n=e[t[r]],a=this.groups[t[r]].options,n.length>0&&(o=this.groups[t[r]],!0===a.stack&&"bar"===a.style?"left"===a.yAxisOrientation?s=s.concat(n):l=l.concat(n):i[t[r]]=o.getYRange(n,t[r]));p.getStackedYRange(s,i,t,"__barStackLeft","left"),p.getStackedYRange(l,i,t,"__barStackRight","right")}},v.prototype._updateYAxis=function(t,e){var i,n,o=!1,r=!1,a=!1,s=1e9,l=1e9,u=-1e9,d=-1e9;if(t.length>0){for(var h=0;h<t.length;h++){var c=this.groups[t[h]];c&&"right"!=c.options.yAxisOrientation?(r=!0,s=1e9,u=-1e9):c&&c.options.yAxisOrientation&&(a=!0,l=1e9,d=-1e9)}for(h=0;h<t.length;h++)e.hasOwnProperty(t[h])&&!0!==e[t[h]].ignore&&(i=e[t[h]].min,n=e[t[h]].max,"right"!=e[t[h]].yAxisOrientation?(r=!0,s=s>i?i:s,u=u<n?n:u):(a=!0,l=l>i?i:l,d=d<n?n:d));1==r&&this.yAxisLeft.setRange(s,u),1==a&&this.yAxisRight.setRange(l,d)}o=this._toggleAxisVisiblity(r,this.yAxisLeft)||o,o=this._toggleAxisVisiblity(a,this.yAxisRight)||o,1==a&&1==r?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!r,this.yAxisRight.masterAxis=this.yAxisLeft,0==this.yAxisRight.master?(this.yAxisLeft.lineOffset=1==a?this.yAxisRight.width:0,o=this.yAxisLeft.redraw()||o,o=this.yAxisRight.redraw()||o):o=this.yAxisRight.redraw()||o;var f=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(h=0;h<f.length;h++)-1!=t.indexOf(f[h])&&t.splice(t.indexOf(f[h]),1);return o},v.prototype._toggleAxisVisiblity=function(t,e){var i=!1;return 0==t?e.dom.frame.parentNode&&0==e.hidden&&(e.hide(),i=!0):e.dom.frame.parentNode||1!=e.hidden||(e.show(),i=!0),i},v.prototype._convertXcoordinates=function(t){for(var e=this.body.util.toScreen,i=0;i<t.length;i++)t[i].screen_x=e(t[i].x)+this.props.width,t[i].screen_y=t[i].y,null!=t[i].end?t[i].screen_end=e(t[i].end)+this.props.width:t[i].screen_end=void 0},v.prototype._convertYcoordinates=function(t,e){var i=this.yAxisLeft,n=Number(this.svg.style.height.replace("px",""));"right"==e.options.yAxisOrientation&&(i=this.yAxisRight);for(var o=0;o<t.length;o++)t[o].screen_y=Math.round(i.convertValue(t[o].y));e.setZeroPosition(Math.min(n,i.convertValue(0)))},t.exports=v},function(t,e,i){var n,o=i(8),r=(n=o)&&n.__esModule?n:{default:n},a=i(2),s=i(14),l=i(16),u=i(108);function d(t,e,i,n){this.id=a.randomUUID(),this.body=t,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(t){return""+parseFloat(t.toPrecision(3))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:function(t){return""+parseFloat(t.toPrecision(3))},title:{text:void 0,style:void 0}}},this.linegraphOptions=n,this.linegraphSVG=i,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=a.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(e),this.width=Number((""+this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};var o=this;this.body.emitter.on("verticalDrag",function(){o.dom.lineContainer.style.top=o.body.domProps.scrollTop+"px"})}d.prototype=new l,d.prototype.addGroup=function(t,e){this.groups.hasOwnProperty(t)||(this.groups[t]=e),this.amountOfGroups+=1},d.prototype.updateGroup=function(t,e){this.groups.hasOwnProperty(t)||(this.amountOfGroups+=1),this.groups[t]=e},d.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)},d.prototype.setOptions=function(t){if(t){var e=!1;this.options.orientation!=t.orientation&&void 0!==t.orientation&&(e=!0),a.selectiveDeepExtend(["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"],this.options,t),this.minWidth=Number((""+this.options.width).replace("px","")),!0===e&&this.dom.frame&&(this.hide(),this.show())}},d.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)},d.prototype._redrawGroupIcons=function(){var t;s.prepareElements(this.svgElements);var e=this.options.iconWidth,i=11.5;t="left"===this.options.orientation?4:this.width-e-4;var n=(0,r.default)(this.groups);n.sort(function(t,e){return t<e?-1:1});for(var o=0;o<n.length;o++){var a=n[o];!0!==this.groups[a].visible||void 0!==this.linegraphOptions.visibility[a]&&!0!==this.linegraphOptions.visibility[a]||(this.groups[a].getLegend(e,15,this.framework,t,i),i+=19)}s.cleanupElements(this.svgElements),this.iconsRemoved=!1},d.prototype._cleanupIcons=function(){!1===this.iconsRemoved&&(s.prepareElements(this.svgElements),s.cleanupElements(this.svgElements),this.iconsRemoved=!0)},d.prototype.show=function(){this.hidden=!1,this.dom.frame.parentNode||("left"===this.options.orientation?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)},d.prototype.hide=function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.parentNode&&this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)},d.prototype.setRange=function(t,e){this.range.start=t,this.range.end=e},d.prototype.redraw=function(){var t=!1,e=0;for(var i in this.dom.lineContainer.style.top=this.body.domProps.scrollTop+"px",this.groups)this.groups.hasOwnProperty(i)&&(!0!==this.groups[i].visible||void 0!==this.linegraphOptions.visibility[i]&&!0!==this.linegraphOptions.visibility[i]||e++);if(0===this.amountOfGroups||0===e)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=this.height+"px",this.width=!0===this.options.visible?Number((""+this.options.width).replace("px","")):0;var n=this.props,o=this.dom.frame;o.className="vis-data-axis",this._calculateCharSize();var r=this.options.orientation,a=this.options.showMinorLabels,s=this.options.showMajorLabels;n.minorLabelHeight=a?n.minorCharHeight:0,n.majorLabelHeight=s?n.majorCharHeight:0,n.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset,n.minorLineHeight=1,n.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset,n.majorLineHeight=1,"left"===r?(o.style.top="0",o.style.left="0",o.style.bottom="",o.style.width=this.width+"px",o.style.height=this.height+"px",this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(o.style.top="",o.style.bottom="0",o.style.left="0",o.style.width=this.width+"px",o.style.height=this.height+"px",this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),t=this._redrawLabels(),t=this._isResized()||t,!0===this.options.icons?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(r)}return t},d.prototype._redrawLabels=function(){var t=this,e=!1;s.prepareElements(this.DOMelements.lines),s.prepareElements(this.DOMelements.labels);var i=this.options.orientation,n=null!=this.options[i].range?this.options[i].range:{},o=!0;null!=n.max&&(this.range.end=n.max,o=!1);var r=!0;null!=n.min&&(this.range.start=n.min,r=!1),this.scale=new u(this.range.start,this.range.end,r,o,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[i].format),!1===this.master&&null!=this.masterAxis&&this.scale.followScale(this.masterAxis.scale),this.maxLabelSize=0,this.scale.getLines().forEach(function(e){var n=e.y,o=e.major;t.options.showMinorLabels&&!1===o&&t._redrawLabel(n-2,e.val,i,"vis-y-axis vis-minor",t.props.minorCharHeight),o&&n>=0&&t._redrawLabel(n-2,e.val,i,"vis-y-axis vis-major",t.props.majorCharHeight),!0===t.master&&(o?t._redrawLine(n,i,"vis-grid vis-horizontal vis-major",t.options.majorLinesOffset,t.props.majorLineWidth):t._redrawLine(n,i,"vis-grid vis-horizontal vis-minor",t.options.minorLinesOffset,t.props.minorLineWidth))});var a=0;void 0!==this.options[i].title&&void 0!==this.options[i].title.text&&(a=this.props.titleCharHeight);var l=!0===this.options.icons?Math.max(this.options.iconWidth,a)+this.options.labelOffsetX+15:a+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-l&&!0===this.options.visible?(this.width=this.maxLabelSize+l,this.options.width=this.width+"px",s.cleanupElements(this.DOMelements.lines),s.cleanupElements(this.DOMelements.labels),this.redraw(),e=!0):this.maxLabelSize<this.width-l&&!0===this.options.visible&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+l),this.options.width=this.width+"px",s.cleanupElements(this.DOMelements.lines),s.cleanupElements(this.DOMelements.labels),this.redraw(),e=!0):(s.cleanupElements(this.DOMelements.lines),s.cleanupElements(this.DOMelements.labels),e=!1),e},d.prototype.convertValue=function(t){return this.scale.convertValue(t)},d.prototype.screenToValue=function(t){return this.scale.screenToValue(t)},d.prototype._redrawLabel=function(t,e,i,n,o){var r=s.getDOMElement("div",this.DOMelements.labels,this.dom.frame);r.className=n,r.innerHTML=e,"left"===i?(r.style.left="-"+this.options.labelOffsetX+"px",r.style.textAlign="right"):(r.style.right="-"+this.options.labelOffsetX+"px",r.style.textAlign="left"),r.style.top=t-.5*o+this.options.labelOffsetY+"px",e+="";var a=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<e.length*a&&(this.maxLabelSize=e.length*a)},d.prototype._redrawLine=function(t,e,i,n,o){if(!0===this.master){var r=s.getDOMElement("div",this.DOMelements.lines,this.dom.lineContainer);r.className=i,r.innerHTML="","left"===e?r.style.left=this.width-n+"px":r.style.right=this.width-n+"px",r.style.width=o+"px",r.style.top=t+"px"}},d.prototype._redrawTitle=function(t){if(s.prepareElements(this.DOMelements.title),void 0!==this.options[t].title&&void 0!==this.options[t].title.text){var e=s.getDOMElement("div",this.DOMelements.title,this.dom.frame);e.className="vis-y-axis vis-title vis-"+t,e.innerHTML=this.options[t].title.text,void 0!==this.options[t].title.style&&a.addCssText(e,this.options[t].title.style),"left"===t?e.style.left=this.props.titleCharHeight+"px":e.style.right=this.props.titleCharHeight+"px",e.style.width=this.height+"px"}s.cleanupElements(this.DOMelements.title)},d.prototype._calculateCharSize=function(){if(!("minorCharHeight"in this.props)){var t=document.createTextNode("0"),e=document.createElement("div");e.className="vis-y-axis vis-minor vis-measure",e.appendChild(t),this.dom.frame.appendChild(e),this.props.minorCharHeight=e.clientHeight,this.props.minorCharWidth=e.clientWidth,this.dom.frame.removeChild(e)}if(!("majorCharHeight"in this.props)){var i=document.createTextNode("0"),n=document.createElement("div");n.className="vis-y-axis vis-major vis-measure",n.appendChild(i),this.dom.frame.appendChild(n),this.props.majorCharHeight=n.clientHeight,this.props.majorCharWidth=n.clientWidth,this.dom.frame.removeChild(n)}if(!("titleCharHeight"in this.props)){var o=document.createTextNode("0"),r=document.createElement("div");r.className="vis-y-axis vis-title vis-measure",r.appendChild(o),this.dom.frame.appendChild(r),this.props.titleCharHeight=r.clientHeight,this.props.titleCharWidth=r.clientWidth,this.dom.frame.removeChild(r)}},t.exports=d},function(t,e,i){function n(t,e,i,n,o,r){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=o,this.majorCharHeight=r,this._start=t,this._end=e,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=a,this.autoScaleStart=i,this.autoScaleEnd=n,this.formattingFunction=s,i||n){var l=this,u=function(t){var e=t-t%(l.magnitudefactor*l.minorSteps[l.minorStepIdx]);return t%(l.magnitudefactor*l.minorSteps[l.minorStepIdx])>l.magnitudefactor*l.minorSteps[l.minorStepIdx]*.5?e+l.magnitudefactor*l.minorSteps[l.minorStepIdx]:e};i&&(this._start-=2*this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._start=u(this._start)),n&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=u(this._end)),this.determineScale()}}n.prototype.setCharHeight=function(t){this.majorCharHeight=t},n.prototype.setHeight=function(t){this.containerHeight=t},n.prototype.determineScale=function(){var t=this._end-this._start;this.scale=this.containerHeight/t;var e=this.majorCharHeight/this.scale,i=t>0?Math.round(Math.log(t)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,i);var n=0;i<0&&(n=i);for(var o=!1,r=n;Math.abs(r)<=Math.abs(i);r++){this.magnitudefactor=Math.pow(10,r);for(var a=0;a<this.minorSteps.length;a++)if(this.magnitudefactor*this.minorSteps[a]>=e){o=!0,this.minorStepIdx=a;break}if(!0===o)break}},n.prototype.is_major=function(t){return t%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])==0},n.prototype.getStep=function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]},n.prototype.getFirstMajor=function(){var t=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(t-this._start%t)%t)},n.prototype.formatValue=function(t){var e=t.toPrecision(5);return"function"==typeof this.formattingFunction&&(e=this.formattingFunction(t)),"number"==typeof e?""+e:"string"==typeof e?e:t.toPrecision(5)},n.prototype.getLines=function(){for(var t=[],e=this.getStep(),i=(e-this._start%e)%e,n=this._start+i;this._end-n>1e-5;n+=e)n!=this._start&&t.push({major:this.is_major(n),y:this.convertValue(n),val:this.formatValue(n)});return t},n.prototype.followScale=function(t){var e=this.minorStepIdx,i=this._start,n=this._end,o=this,r=function(){o.magnitudefactor*=2},a=function(){o.magnitudefactor/=2};t.minorStepIdx<=1&&this.minorStepIdx<=1||t.minorStepIdx>1&&this.minorStepIdx>1||(t.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,2==e?r():(r(),r())):(this.minorStepIdx=2,1==e?a():(a(),a())));for(var s=t.convertValue(0),l=t.getStep()*t.scale,u=!1,d=0;!u&&d++<5;){this.scale=l/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var h=this.containerHeight/this.scale;this._start=i,this._end=this._start+h;var c=this._end*this.scale,f=this.magnitudefactor*this.majorSteps[this.minorStepIdx],p=this.getFirstMajor()-t.getFirstMajor();if(this.zeroAlign){var g=s-c;this._end+=g/this.scale,this._start=this._end-h}else this.autoScaleStart?(this._start-=p/this.scale,this._end=this._start+h):(this._start+=f-p/this.scale,this._end=this._start+h);if(!this.autoScaleEnd&&this._end>n+1e-5)a(),u=!1;else{if(!this.autoScaleStart&&this._start<i-1e-5){if(!(this.zeroAlign&&i>=0)){a(),u=!1;continue}console.warn("Can't adhere to given 'min' range, due to zeroalign")}this.autoScaleStart&&this.autoScaleEnd&&h<n-i?(r(),u=!1):u=!0}}},n.prototype.convertValue=function(t){return this.containerHeight-(t-this._start)*this.scale},n.prototype.screenToValue=function(t){return(this.containerHeight-t)/this.scale+this._start},t.exports=n},function(t,e,i){var n,o=i(6),r=(n=o)&&n.__esModule?n:{default:n},a=i(2),s=i(110),l=i(111),u=i(72);function d(t,e,i,n){this.id=e,this.options=a.selectiveBridgeObject(["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"],i),this.usingDefaultStyle=void 0===t.className,this.groupsUsingDefaultStyles=n,this.zeroPosition=0,this.update(t),1==this.usingDefaultStyle&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=void 0===t.visible||t.visible}d.prototype.setItems=function(t){null!=t?(this.itemsData=t,1==this.options.sort&&a.insertSort(this.itemsData,function(t,e){return t.x>e.x?1:-1})):this.itemsData=[]},d.prototype.getItems=function(){return this.itemsData},d.prototype.setZeroPosition=function(t){this.zeroPosition=t},d.prototype.setOptions=function(t){void 0!==t&&(a.selectiveDeepExtend(["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"],this.options,t),"function"==typeof t.drawPoints&&(t.drawPoints={onRender:t.drawPoints}),a.mergeOptions(this.options,t,"interpolation"),a.mergeOptions(this.options,t,"drawPoints"),a.mergeOptions(this.options,t,"shaded"),t.interpolation&&"object"==(0,r.default)(t.interpolation)&&t.interpolation.parametrization&&("uniform"==t.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==t.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)))},d.prototype.update=function(t){this.group=t,this.content=t.content||"graph",this.className=t.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=void 0===t.visible||t.visible,this.style=t.style,this.setOptions(t.options)},d.prototype.getLegend=function(t,e,i,n,o){switch(null!=i&&null!=i||(i={svg:document.createElementNS("http://www.w3.org/2000/svg","svg"),svgElements:{},options:this.options,groups:[this]}),null!=n&&null!=n||(n=0),null!=o&&null!=o||(o=.5*e),this.options.style){case"line":l.drawIcon(this,n,o,t,e,i);break;case"points":case"point":u.drawIcon(this,n,o,t,e,i);break;case"bar":s.drawIcon(this,n,o,t,e,i)}return{icon:i.svg,label:this.content,orientation:this.options.yAxisOrientation}},d.prototype.getYRange=function(t){for(var e=t[0].y,i=t[0].y,n=0;n<t.length;n++)e=e>t[n].y?t[n].y:e,i=i<t[n].y?t[n].y:i;return{min:e,max:i,yAxisOrientation:this.options.yAxisOrientation}},t.exports=d},function(t,e,i){var n=i(14),o=i(72);function r(t,e){}r.drawIcon=function(t,e,i,o,r,a){var s=.5*r,l=n.getSVGElement("rect",a.svgElements,a.svg);l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",i-s),l.setAttributeNS(null,"width",o),l.setAttributeNS(null,"height",2*s),l.setAttributeNS(null,"class","vis-outline");var u=Math.round(.3*o),d=t.options.barChart.width/u,h=Math.round(.4*r),c=Math.round(.75*r),f=Math.round((o-2*u)/3);if(n.drawBar(e+.5*u+f,i+s-h-1,u,h,t.className+" vis-bar",a.svgElements,a.svg,t.style),n.drawBar(e+1.5*u+f+2,i+s-c-1,u,c,t.className+" vis-bar",a.svgElements,a.svg,t.style),1==t.options.drawPoints.enabled){var p={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size/d,className:t.className};n.drawPoint(e+.5*u+f,i+s-h-1,p,a.svgElements,a.svg),n.drawPoint(e+1.5*u+f+2,i+s-c-1,p,a.svgElements,a.svg)}},r.draw=function(t,e,i){var a,s,l,u,d,h,c=[],f={},p=0;for(d=0;d<t.length;d++)if("bar"===(u=i.groups[t[d]]).options.style&&!0===u.visible&&(void 0===i.options.groups.visibility[t[d]]||!0===i.options.groups.visibility[t[d]]))for(h=0;h<e[t[d]].length;h++)c.push({screen_x:e[t[d]][h].screen_x,screen_end:e[t[d]][h].screen_end,screen_y:e[t[d]][h].screen_y,x:e[t[d]][h].x,end:e[t[d]][h].end,y:e[t[d]][h].y,groupId:t[d],label:e[t[d]][h].label}),p+=1;if(0!==p)for(c.sort(function(t,e){return t.screen_x===e.screen_x?t.groupId<e.groupId?-1:1:t.screen_x-e.screen_x}),r._getDataIntersections(f,c),d=0;d<c.length;d++){var g=null!=(u=i.groups[c[d].groupId]).options.barChart.minWidth?u.options.barChart.minWidth:.1*u.options.barChart.width,m=0;if(void 0===f[s=c[d].screen_x])d+1<c.length&&(a=Math.abs(c[d+1].screen_x-s)),l=r._getSafeDrawData(a,u,g);else{var v=d+(f[s].amount-f[s].resolved);v<c.length&&(a=Math.abs(c[v].screen_x-s)),l=r._getSafeDrawData(a,u,g),f[s].resolved+=1,!0===u.options.stack&&!0!==u.options.excludeFromStacking?c[d].screen_y<u.zeroPosition?(m=f[s].accumulatedNegative,f[s].accumulatedNegative+=u.zeroPosition-c[d].screen_y):(m=f[s].accumulatedPositive,f[s].accumulatedPositive+=u.zeroPosition-c[d].screen_y):!0===u.options.barChart.sideBySide&&(l.width=l.width/f[s].amount,l.offset+=f[s].resolved*l.width-.5*l.width*(f[s].amount+1))}var y=l.width,_=c[d].screen_x;if(null!=c[d].screen_end?_+=.5*(y=c[d].screen_end-c[d].screen_x):_+=l.offset,n.drawBar(_,c[d].screen_y-m,y,u.zeroPosition-c[d].screen_y,u.className+" vis-bar",i.svgElements,i.svg,u.style),!0===u.options.drawPoints.enabled){var b={screen_x:c[d].screen_x,screen_y:c[d].screen_y-m,x:c[d].x,y:c[d].y,groupId:c[d].groupId,label:c[d].label};o.draw([b],u,i,l.offset)}}},r._getDataIntersections=function(t,e){for(var i,n=0;n<e.length;n++)n+1<e.length&&(i=Math.abs(e[n+1].screen_x-e[n].screen_x)),n>0&&(i=Math.min(i,Math.abs(e[n-1].screen_x-e[n].screen_x))),0===i&&(void 0===t[e[n].screen_x]&&(t[e[n].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),t[e[n].screen_x].amount+=1)},r._getSafeDrawData=function(t,e,i){var n,o;return t<e.options.barChart.width&&t>0?(n=t<i?i:t,o=0,"left"===e.options.barChart.align?o-=.5*t:"right"===e.options.barChart.align&&(o+=.5*t)):(n=e.options.barChart.width,o=0,"left"===e.options.barChart.align?o-=.5*e.options.barChart.width:"right"===e.options.barChart.align&&(o+=.5*e.options.barChart.width)),{width:n,offset:o}},r.getStackedYRange=function(t,e,i,n,o){if(t.length>0){t.sort(function(t,e){return t.screen_x===e.screen_x?t.groupId<e.groupId?-1:1:t.screen_x-e.screen_x});var a={};r._getDataIntersections(a,t),e[n]=r._getStackedYRange(a,t),e[n].yAxisOrientation=o,i.push(n)}},r._getStackedYRange=function(t,e){for(var i,n=e[0].screen_y,o=e[0].screen_y,r=0;r<e.length;r++)void 0===t[i=e[r].screen_x]?(n=n>e[r].screen_y?e[r].screen_y:n,o=o<e[r].screen_y?e[r].screen_y:o):e[r].screen_y<0?t[i].accumulatedNegative+=e[r].screen_y:t[i].accumulatedPositive+=e[r].screen_y;for(var a in t)t.hasOwnProperty(a)&&(n=(n=n>t[a].accumulatedNegative?t[a].accumulatedNegative:n)>t[a].accumulatedPositive?t[a].accumulatedPositive:n,o=(o=o<t[a].accumulatedNegative?t[a].accumulatedNegative:o)<t[a].accumulatedPositive?t[a].accumulatedPositive:o);return{min:n,max:o}},t.exports=r},function(t,e,i){var n=i(14);function o(t,e){}o.calcPath=function(t,e){if(null!=t&&t.length>0)return 1==e.options.interpolation.enabled?o._catmullRom(t,e):o._linear(t)},o.drawIcon=function(t,e,i,o,r,a){var s,l,u=.5*r,d=n.getSVGElement("rect",a.svgElements,a.svg);if(d.setAttributeNS(null,"x",e),d.setAttributeNS(null,"y",i-u),d.setAttributeNS(null,"width",o),d.setAttributeNS(null,"height",2*u),d.setAttributeNS(null,"class","vis-outline"),(s=n.getSVGElement("path",a.svgElements,a.svg)).setAttributeNS(null,"class",t.className),void 0!==t.style&&s.setAttributeNS(null,"style",t.style),s.setAttributeNS(null,"d","M"+e+","+i+" L"+(e+o)+","+i),1==t.options.shaded.enabled&&(l=n.getSVGElement("path",a.svgElements,a.svg),"top"==t.options.shaded.orientation?l.setAttributeNS(null,"d","M"+e+", "+(i-u)+"L"+e+","+i+" L"+(e+o)+","+i+" L"+(e+o)+","+(i-u)):l.setAttributeNS(null,"d","M"+e+","+i+" L"+e+","+(i+u)+" L"+(e+o)+","+(i+u)+"L"+(e+o)+","+i),l.setAttributeNS(null,"class",t.className+" vis-icon-fill"),void 0!==t.options.shaded.style&&""!==t.options.shaded.style&&l.setAttributeNS(null,"style",t.options.shaded.style)),1==t.options.drawPoints.enabled){var h={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size,className:t.className};n.drawPoint(e+.5*o,i,h,a.svgElements,a.svg)}},o.drawShading=function(t,e,i,o){if(1==e.options.shaded.enabled){var r,a=Number(o.svg.style.height.replace("px","")),s=n.getSVGElement("path",o.svgElements,o.svg),l="L";1==e.options.interpolation.enabled&&(l="C");var u=0;u="top"==e.options.shaded.orientation?0:"bottom"==e.options.shaded.orientation?a:Math.min(Math.max(0,e.zeroPosition),a),r="group"==e.options.shaded.orientation&&null!=i&&null!=i?"M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,l,!1)+" L"+i[i.length-1][0]+","+i[i.length-1][1]+" "+this.serializePath(i,l,!0)+i[0][0]+","+i[0][1]+" Z":"M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,l,!1)+" V"+u+" H"+t[0][0]+" Z",s.setAttributeNS(null,"class",e.className+" vis-fill"),void 0!==e.options.shaded.style&&s.setAttributeNS(null,"style",e.options.shaded.style),s.setAttributeNS(null,"d",r)}},o.draw=function(t,e,i){if(null!=t&&null!=t){var o=n.getSVGElement("path",i.svgElements,i.svg);o.setAttributeNS(null,"class",e.className),void 0!==e.style&&o.setAttributeNS(null,"style",e.style);var r="L";1==e.options.interpolation.enabled&&(r="C"),o.setAttributeNS(null,"d","M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,r,!1))}},o.serializePath=function(t,e,i){if(t.length<2)return"";var n,o=e;if(i)for(n=t.length-2;n>0;n--)o+=t[n][0]+","+t[n][1]+" ";else for(n=1;n<t.length;n++)o+=t[n][0]+","+t[n][1]+" ";return o},o._catmullRomUniform=function(t){var e,i,n,o,r,a,s=[];s.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var l=t.length,u=0;u<l-1;u++)e=0==u?t[0]:t[u-1],i=t[u],n=t[u+1],o=u+2<l?t[u+2]:n,r={screen_x:(-e.screen_x+6*i.screen_x+n.screen_x)*(1/6),screen_y:(-e.screen_y+6*i.screen_y+n.screen_y)*(1/6)},a={screen_x:(i.screen_x+6*n.screen_x-o.screen_x)*(1/6),screen_y:(i.screen_y+6*n.screen_y-o.screen_y)*(1/6)},s.push([r.screen_x,r.screen_y]),s.push([a.screen_x,a.screen_y]),s.push([n.screen_x,n.screen_y]);return s},o._catmullRom=function(t,e){var i=e.options.interpolation.alpha;if(0==i||void 0===i)return this._catmullRomUniform(t);var n,o,r,a,s,l,u,d,h,c,f,p,g,m,v,y,_,b,E,w=[];w.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var T=t.length,S=0;S<T-1;S++)n=0==S?t[0]:t[S-1],o=t[S],r=t[S+1],a=S+2<T?t[S+2]:r,u=Math.sqrt(Math.pow(n.screen_x-o.screen_x,2)+Math.pow(n.screen_y-o.screen_y,2)),d=Math.sqrt(Math.pow(o.screen_x-r.screen_x,2)+Math.pow(o.screen_y-r.screen_y,2)),h=Math.sqrt(Math.pow(r.screen_x-a.screen_x,2)+Math.pow(r.screen_y-a.screen_y,2)),m=Math.pow(h,i),y=Math.pow(h,2*i),v=Math.pow(d,i),_=Math.pow(d,2*i),E=Math.pow(u,i),c=2*(b=Math.pow(u,2*i))+3*E*v+_,f=2*y+3*m*v+_,(p=3*E*(E+v))>0&&(p=1/p),(g=3*m*(m+v))>0&&(g=1/g),s={screen_x:(-_*n.screen_x+c*o.screen_x+b*r.screen_x)*p,screen_y:(-_*n.screen_y+c*o.screen_y+b*r.screen_y)*p},l={screen_x:(y*o.screen_x+f*r.screen_x-_*a.screen_x)*g,screen_y:(y*o.screen_y+f*r.screen_y-_*a.screen_y)*g},0==s.screen_x&&0==s.screen_y&&(s=o),0==l.screen_x&&0==l.screen_y&&(l=r),w.push([s.screen_x,s.screen_y]),w.push([l.screen_x,l.screen_y]),w.push([r.screen_x,r.screen_y]);return w},o._linear=function(t){for(var e=[],i=0;i<t.length;i++)e.push([t[i].screen_x,t[i].screen_y]);return e},t.exports=o},function(t,e,i){var n,o=i(8),r=(n=o)&&n.__esModule?n:{default:n},a=i(2),s=i(14),l=i(16);function u(t,e,i,n){this.body=t,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=i,this.options=a.extend({},this.defaultOptions),this.linegraphOptions=n,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(e)}u.prototype=new l,u.prototype.clear=function(){this.groups={},this.amountOfGroups=0},u.prototype.addGroup=function(t,e){1!=e.options.excludeFromLegend&&(this.groups.hasOwnProperty(t)||(this.groups[t]=e),this.amountOfGroups+=1)},u.prototype.updateGroup=function(t,e){this.groups[t]=e},u.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)},u.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},u.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},u.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},u.prototype.setOptions=function(t){a.selectiveDeepExtend(["enabled","orientation","icons","left","right"],this.options,t)},u.prototype.redraw=function(){var t=0,e=(0,r.default)(this.groups);e.sort(function(t,e){return t<e?-1:1});for(var i=0;i<e.length;i++){var n=e[i];1!=this.groups[n].visible||void 0!==this.linegraphOptions.visibility[n]&&1!=this.linegraphOptions.visibility[n]||t++}if(0==this.options[this.side].visible||0==this.amountOfGroups||0==this.options.enabled||0==t)this.hide();else{if(this.show(),"top-left"==this.options[this.side].position||"bottom-left"==this.options[this.side].position?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),"top-left"==this.options[this.side].position||"top-right"==this.options[this.side].position)this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var o=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+o+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}0==this.options.icons?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var a="";for(i=0;i<e.length;i++)n=e[i],1!=this.groups[n].visible||void 0!==this.linegraphOptions.visibility[n]&&1!=this.linegraphOptions.visibility[n]||(a+=this.groups[n].content+"<br />");this.dom.textArea.innerHTML=a,this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},u.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var t=(0,r.default)(this.groups);t.sort(function(t,e){return t<e?-1:1}),s.resetElements(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,i=Number(e.replace("px","")),n=i,o=this.options.iconSize,a=.75*this.options.iconSize,l=i+.5*a+3;this.svg.style.width=o+5+i+"px";for(var u=0;u<t.length;u++){var d=t[u];1!=this.groups[d].visible||void 0!==this.linegraphOptions.visibility[d]&&1!=this.linegraphOptions.visibility[d]||(this.groups[d].getLegend(o,a,this.framework,n,l),l+=a+this.options.iconSpacing)}}},t.exports=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n="string",o="boolean",r="number",a="object",s={configure:{enabled:{boolean:o},filter:{boolean:o,function:"function"},container:{dom:"dom"},__type__:{object:a,boolean:o,function:"function"}},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:n},sort:{boolean:o},sampling:{boolean:o},stack:{boolean:o},graphHeight:{string:n,number:r},shaded:{enabled:{boolean:o},orientation:{string:["bottom","top","zero","group"]},groupId:{object:a},__type__:{boolean:o,object:a}},style:{string:["line","bar","points"]},barChart:{width:{number:r},minWidth:{number:r},sideBySide:{boolean:o},align:{string:["left","center","right"]},__type__:{object:a}},interpolation:{enabled:{boolean:o},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:r},__type__:{object:a,boolean:o}},drawPoints:{enabled:{boolean:o},onRender:{function:"function"},size:{number:r},style:{string:["square","circle"]},__type__:{object:a,boolean:o,function:"function"}},dataAxis:{showMinorLabels:{boolean:o},showMajorLabels:{boolean:o},icons:{boolean:o},width:{string:n,number:r},visible:{boolean:o},alignZeros:{boolean:o},left:{range:{min:{number:r,undefined:"undefined"},max:{number:r,undefined:"undefined"},__type__:{object:a}},format:{function:"function"},title:{text:{string:n,number:r,undefined:"undefined"},style:{string:n,undefined:"undefined"},__type__:{object:a}},__type__:{object:a}},right:{range:{min:{number:r,undefined:"undefined"},max:{number:r,undefined:"undefined"},__type__:{object:a}},format:{function:"function"},title:{text:{string:n,number:r,undefined:"undefined"},style:{string:n,undefined:"undefined"},__type__:{object:a}},__type__:{object:a}},__type__:{object:a}},legend:{enabled:{boolean:o},icons:{boolean:o},left:{visible:{boolean:o},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:a}},right:{visible:{boolean:o},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:a}},__type__:{object:a,boolean:o}},groups:{visibility:{any:"any"},__type__:{object:a}},autoResize:{boolean:o},throttleRedraw:{number:r},clickToUse:{boolean:o},end:{number:r,date:"date",string:n,moment:"moment"},format:{minorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:a}},majorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:a}},__type__:{object:a}},moment:{function:"function"},height:{string:n,number:r},hiddenDates:{start:{date:"date",number:r,string:n,moment:"moment"},end:{date:"date",number:r,string:n,moment:"moment"},repeat:{string:n},__type__:{object:a,array:"array"}},locale:{string:n},locales:{__any__:{any:"any"},__type__:{object:a}},max:{date:"date",number:r,string:n,moment:"moment"},maxHeight:{number:r,string:n},maxMinorChars:{number:r},min:{date:"date",number:r,string:n,moment:"moment"},minHeight:{number:r,string:n},moveable:{boolean:o},multiselect:{boolean:o},orientation:{string:n},showCurrentTime:{boolean:o},showMajorLabels:{boolean:o},showMinorLabels:{boolean:o},start:{date:"date",number:r,string:n,moment:"moment"},timeAxis:{scale:{string:n,undefined:"undefined"},step:{number:r,undefined:"undefined"},__type__:{object:a}},width:{string:n,number:r},zoomable:{boolean:o},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:r},zoomMin:{number:r},zIndex:{number:r},__type__:{object:a}};e.allOptions=s,e.configureOptions={global:{sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}}},function(t,e,i){var n,o=i(29),r=(n=o)&&n.__esModule?n:{default:n};function a(t){return h=t,function(){var t={};if(c=0,f=h.charAt(0),x(),"strict"===p&&(t.strict=!0,x()),"graph"!==p&&"digraph"!==p||(t.type=p,x()),g===u.IDENTIFIER&&(t.id=p,x()),"{"!=p)throw D("Angle bracket { expected");if(x(),C(t),"}"!=p)throw D("Angle bracket } expected");if(x(),""!==p)throw D("End of file expected");return x(),delete t.node,delete t.edge,delete t.graph,t}()}var s={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},l=(0,r.default)(s);l.color="color.color",l.style="dashes";var u={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},d={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},h="",c=0,f="",p="",g=u.NULL;function m(){c++,f=h.charAt(c)}function v(){return h.charAt(c+1)}var y=/[a-zA-Z_0-9.:#]/;function _(t){return y.test(t)}function b(t,e){if(t||(t={}),e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function E(t,e,i){for(var n=e.split("."),o=t;n.length;){var r=n.shift();n.length?(o[r]||(o[r]={}),o=o[r]):o[r]=i}}function w(t,e){for(var i,n,o=null,r=[t],a=t;a.parent;)r.push(a.parent),a=a.parent;if(a.nodes)for(i=0,n=a.nodes.length;i<n;i++)if(e.id===a.nodes[i].id){o=a.nodes[i];break}for(o||(o={id:e.id},t.node&&(o.attr=b(o.attr,t.node))),i=r.length-1;i>=0;i--){var s=r[i];s.nodes||(s.nodes=[]),-1===s.nodes.indexOf(o)&&s.nodes.push(o)}e.attr&&(o.attr=b(o.attr,e.attr))}function T(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var i=b({},t.edge);e.attr=b(i,e.attr)}}function S(t,e,i,n,o){var r={from:e,to:i,type:n};return t.edge&&(r.attr=b({},t.edge)),r.attr=b(r.attr||{},o),r}function x(){for(g=u.NULL,p="";" "===f||"\t"===f||"\n"===f||"\r"===f;)m();do{var t=!1;if("#"===f){for(var e=c-1;" "===h.charAt(e)||"\t"===h.charAt(e);)e--;if("\n"===h.charAt(e)||""===h.charAt(e)){for(;""!=f&&"\n"!=f;)m();t=!0}}if("/"===f&&"/"===v()){for(;""!=f&&"\n"!=f;)m();t=!0}if("/"===f&&"*"===v()){for(;""!=f;){if("*"===f&&"/"===v()){m(),m();break}m()}t=!0}for(;" "===f||"\t"===f||"\n"===f||"\r"===f;)m()}while(t);if(""!==f){var i=f+v();if(d[i])return g=u.DELIMITER,p=i,m(),void m();if(d[f])return g=u.DELIMITER,p=f,void m();if(_(f)||"-"===f){for(p+=f,m();_(f);)p+=f,m();return"false"===p?p=!1:"true"===p?p=!0:isNaN(Number(p))||(p=Number(p)),void(g=u.IDENTIFIER)}if('"'===f){for(m();""!=f&&('"'!=f||'"'===f&&'"'===v());)'"'===f?(p+=f,m()):"\\"===f&&"n"===v()?(p+="\n",m()):p+=f,m();if('"'!=f)throw D('End of string " expected');return m(),void(g=u.IDENTIFIER)}for(g=u.UNKNOWN;""!=f;)p+=f,m();throw new SyntaxError('Syntax error in part "'+R(p,30)+'"')}g=u.DELIMITER}function C(t){for(;""!==p&&"}"!=p;)I(t),";"===p&&x()}function I(t){var e=A(t);if(e)M(t,e);else if(!function(t){return"node"===p?(x(),t.node=O(),"node"):"edge"===p?(x(),t.edge=O(),"edge"):"graph"===p?(x(),t.graph=O(),"graph"):null}(t)){if(g!=u.IDENTIFIER)throw D("Identifier expected");var i=p;if(x(),"="===p){if(x(),g!=u.IDENTIFIER)throw D("Identifier expected");t[i]=p,x()}else!function(t,e){var i={id:e},n=O();n&&(i.attr=n),w(t,i),M(t,e)}(t,i)}}function A(t){var e=null;if("subgraph"===p&&((e={}).type="subgraph",x(),g===u.IDENTIFIER&&(e.id=p,x())),"{"===p){if(x(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,C(e),"}"!=p)throw D("Angle bracket } expected");x(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function M(t,e){for(;"->"===p||"--"===p;){var i,n=p;x();var o=A(t);if(o)i=o;else{if(g!=u.IDENTIFIER)throw D("Identifier or subgraph expected");w(t,{id:i=p}),x()}T(t,S(t,e,i,n,O())),e=i}}function O(){for(var t=null,e={dashed:!0,solid:!1,dotted:[1,5]};"["===p;){for(x(),t={};""!==p&&"]"!=p;){if(g!=u.IDENTIFIER)throw D("Attribute name expected");var i=p;if(x(),"="!=p)throw D("Equal sign = expected");if(x(),g!=u.IDENTIFIER)throw D("Attribute value expected");var n=p;"style"===i&&(n=e[n]),E(t,i,n),x(),","==p&&x()}if("]"!=p)throw D("Bracket ] expected");x()}return t}function D(t){return new SyntaxError(t+', got "'+R(p,30)+'" (char '+c+")")}function R(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function N(t,e,i){for(var n=e.split("."),o=n.pop(),r=t,a=0;a<n.length;a++){var s=n[a];s in r||(r[s]={}),r=r[s]}return r[o]=i,t}function k(t,e){var i={};for(var n in t)if(t.hasOwnProperty(n)){var o=e[n];Array.isArray(o)?o.forEach(function(e){N(i,e,t[n])}):N(i,"string"==typeof o?o:n,t[n])}return i}e.parseDOT=a,e.DOTToGraph=function(t){var e=a(t),i={nodes:[],edges:[],options:{}};if(e.nodes&&e.nodes.forEach(function(t){var e={id:t.id,label:String(t.label||t.id)};b(e,k(t.attr,s)),e.image&&(e.shape="image"),i.nodes.push(e)}),e.edges){var n=function(t){var e={from:t.from,to:t.to};return b(e,k(t.attr,l)),e.arrows="->"===t.type?"to":void 0,e};e.edges.forEach(function(t){var e,o,r,a,s;e=t.from instanceof Object?t.from.nodes:{id:t.from},o=t.to instanceof Object?t.to.nodes:{id:t.to},t.from instanceof Object&&t.from.edges&&t.from.edges.forEach(function(t){var e=n(t);i.edges.push(e)}),r=e,a=o,s=function(e,o){var r=S(i,e.id,o.id,t.type,t.attr),a=n(r);i.edges.push(a)},Array.isArray(r)?r.forEach(function(t){Array.isArray(a)?a.forEach(function(e){s(t,e)}):s(t,a)}):Array.isArray(a)?a.forEach(function(t){s(r,t)}):s(r,a),t.to instanceof Object&&t.to.edges&&t.to.edges.forEach(function(t){var e=n(t);i.edges.push(e)})})}return e.attr&&(i.options=e.attr),i}},function(t,e,i){e.parseGephi=function(t,e){var i=[],n=[],o={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};void 0!==e&&(void 0!==e.fixed&&(o.nodes.fixed=e.fixed),void 0!==e.parseColor&&(o.nodes.parseColor=e.parseColor),void 0!==e.inheritColor&&(o.edges.inheritColor=e.inheritColor));for(var r=t.edges,a=t.nodes,s=0;s<r.length;s++){var l={},u=r[s];l.id=u.id,l.from=u.source,l.to=u.target,l.attributes=u.attributes,l.label=u.label,l.title=void 0!==u.attributes?u.attributes.title:void 0,"Directed"===u.type&&(l.arrows="to"),u.color&&!1===o.inheritColor&&(l.color=u.color),i.push(l)}for(var d=0;d<a.length;d++){var h={},c=a[d];h.id=c.id,h.attributes=c.attributes,h.x=c.x,h.y=c.y,h.label=c.label,h.title=void 0!==c.attributes?c.attributes.title:c.title,!0===o.nodes.parseColor?h.color=c.color:h.color=void 0!==c.color?{background:c.color,border:c.color,highlight:{background:c.color,border:c.color},hover:{background:c.color,border:c.color}}:void 0,h.size=c.size,h.fixed=o.nodes.fixed&&void 0!==c.x&&void 0!==c.y,n.push(h)}return{nodes:n,edges:i}}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),o=a(i(1)),r=a(i(185));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,n.default)(this,t),this.images={},this.imageBroken={},this.callback=e}return(0,o.default)(t,[{key:"_tryloadBrokenUrl",value:function(t,e,i){void 0!==t&&void 0!==i&&(void 0!==e?(i.onerror=function(){console.error("Could not load brokenImage:",e)},i.image.src=e):console.warn("No broken url image defined"))}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,e){var i=this,n=this.images[t];if(n)return n;var o=new r.default;return this.images[t]=o,o.image.onload=function(){i._fixImageCoordinates(o.image),o.init(),i._redrawWithImage(o)},o.image.onerror=function(){console.error("Could not load image:",t),i._tryloadBrokenUrl(t,e,o)},o.image.src=t,o}},{key:"_fixImageCoordinates",value:function(t){0===t.width&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),t}();e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(30)),o=s(i(6)),r=s(i(0)),a=s(i(1));function s(t){return t&&t.__esModule?t:{default:t}}var l=i(2),u=i(48).default,d=i(191).default,h=["bold","ital","boldital","mono"],c=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,r.default)(this,t),this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(i),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}return(0,a.default)(t,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),u.isValidLabel(t.label)?this.labelDirty=!0:t.label="",void 0!==t.font&&null!==t.font)if("string"==typeof t.font)this.baseSize=this.fontOptions.size;else if("object"===(0,o.default)(t.font)){var e=t.font.size;void 0!==e&&(this.baseSize=e)}}},{key:"initFontOptions",value:function(e){var i=this;l.forEach(h,function(t){i.fontOptions[t]={}}),t.parseFontString(this.fontOptions,e)?this.fontOptions.vadjust=0:l.forEach(e,function(t,e){null!=t&&"object"!==(void 0===t?"undefined":(0,o.default)(t))&&(i.fontOptions[e]=t)})}},{key:"constrain",value:function(t){var e={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=l.topMost(t,"widthConstraint");if("number"==typeof i)e.maxWdt=Number(i),e.minWdt=Number(i);else if("object"===(void 0===i?"undefined":(0,o.default)(i))){var n=l.topMost(t,["widthConstraint","maximum"]);"number"==typeof n&&(e.maxWdt=Number(n));var r=l.topMost(t,["widthConstraint","minimum"]);"number"==typeof r&&(e.minWdt=Number(r))}var a=l.topMost(t,"heightConstraint");if("number"==typeof a)e.minHgt=Number(a);else if("object"===(void 0===a?"undefined":(0,o.default)(a))){var s=l.topMost(t,["heightConstraint","minimum"]);"number"==typeof s&&(e.minHgt=Number(s));var u=l.topMost(t,["heightConstraint","valign"]);"string"==typeof u&&("top"!==u&&"bottom"!==u||(e.valign=u))}return e}},{key:"update",value:function(t,e){this.setOptions(t,!0),this.propagateFonts(e),l.deepExtend(this.fontOptions,this.constrain(e)),this.fontOptions.chooser=u.choosify("label",e)}},{key:"adjustSizes",value:function(t){var e=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=e,this.fontOptions.minWdt-=e);var i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}},{key:"addFontOptionsToPile",value:function(t,e){for(var i=0;i<e.length;++i)this.addFontToPile(t,e[i])}},{key:"addFontToPile",value:function(t,e){if(void 0!==e&&void 0!==e.font&&null!==e.font){var i=e.font;t.push(i)}}},{key:"getBasicOptions",value:function(e){for(var i={},n=0;n<e.length;++n){var o=e[n],r={};t.parseFontString(r,o)&&(o=r),l.forEach(o,function(t,e){void 0!==t&&(i.hasOwnProperty(e)||(-1!==h.indexOf(e)?i[e]={}:i[e]=t))})}return i}},{key:"getFontOption",value:function(e,i,n){for(var o=void 0,r=0;r<e.length;++r){var a=e[r];if(a.hasOwnProperty(i)){if(null==(o=a[i]))continue;var s={};if(t.parseFontString(s,o)&&(o=s),o.hasOwnProperty(n))return o[n]}}if(this.fontOptions.hasOwnProperty(n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}},{key:"getFontOptions",value:function(t,e){for(var i={},n=["color","size","face","mod","vadjust"],o=0;o<n.length;++o){var r=n[o];i[r]=this.getFontOption(t,e,r)}return i}},{key:"propagateFonts",value:function(t){var e=this,i=[];this.addFontOptionsToPile(i,t),this.fontOptions=this.getBasicOptions(i);for(var n=function(t){var n=h[t],o=e.fontOptions[n],r=e.getFontOptions(i,n);l.forEach(r,function(t,e){o[e]=t}),o.size=Number(o.size),o.vadjust=Number(o.vadjust)},o=0;o<h.length;++o)n(o)}},{key:"draw",value:function(t,e,i,n,o){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";if(void 0!==this.elementOptions.label){var a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,n,o,e,i,r),this._drawBackground(t),this._drawText(t,e,this.size.yLine,r,a))}}},{key:"_drawBackground",value:function(t){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){t.fillStyle=this.fontOptions.background;var e=this.getSize();t.fillRect(e.left,e.top,e.width,e.height)}}},{key:"_drawText",value:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle",r=arguments[4],a=this._setAlignment(t,e,i,o),s=(0,n.default)(a,2);e=s[0],i=s[1],t.textAlign="left",e-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&("top"===this.fontOptions.valign&&(i-=(this.size.height-this.size.labelHeight)/2),"bottom"===this.fontOptions.valign&&(i+=(this.size.height-this.size.labelHeight)/2));for(var l=0;l<this.lineCount;l++){var u=this.lines[l];if(u&&u.blocks){var d=0;this.isEdgeLabel||"center"===this.fontOptions.align?d+=(this.size.width-u.width)/2:"right"===this.fontOptions.align&&(d+=this.size.width-u.width);for(var h=0;h<u.blocks.length;h++){var c=u.blocks[h];t.font=c.font;var f=this._getColor(c.color,r,c.strokeColor),p=(0,n.default)(f,2),g=p[0],m=p[1];c.strokeWidth>0&&(t.lineWidth=c.strokeWidth,t.strokeStyle=m,t.lineJoin="round"),t.fillStyle=g,c.strokeWidth>0&&t.strokeText(c.text,e+d,i+c.vadjust),t.fillText(c.text,e+d,i+c.vadjust),d+=c.width}i+=u.height}}}},{key:"_setAlignment",value:function(t,e,i,n){return this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf?(e=0,i=0,"top"===this.fontOptions.align?(t.textBaseline="alphabetic",i-=4):"bottom"===this.fontOptions.align?(t.textBaseline="hanging",i+=4):t.textBaseline="middle"):t.textBaseline=n,[e,i]}},{key:"_getColor",value:function(t,e,i){var n=t||"#000000",o=i||"#ffffff";if(e<=this.elementOptions.scaling.label.drawThreshold){var r=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-e)));n=l.overrideOpacity(n,r),o=l.overrideOpacity(o,r)}return[n,o]}},{key:"getTextSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._processLabel(t,e,i),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=this.size.left,e=this.size.top-1;if(this.isEdgeLabel){var i=.5*-this.size.width;switch(this.fontOptions.align){case"middle":t=i,e=.5*-this.size.height;break;case"top":t=i,e=-(this.size.height+2);break;case"bottom":t=i,e=2}}return{left:t,top:e,width:this.size.width,height:this.size.height}}},{key:"calculateLabelSize",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";this._processLabel(t,e,i),this.size.left=n-.5*this.size.width,this.size.top=o-.5*this.size.height,this.size.yLine=o+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===r&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,e,i,n){var o=function(t,e,i){return"normal"===e?"mod"===i?"":t[i]:void 0!==t[e][i]?t[e][i]:t[i]},r={color:o(this.fontOptions,n,"color"),size:o(this.fontOptions,n,"size"),face:o(this.fontOptions,n,"face"),mod:o(this.fontOptions,n,"mod"),vadjust:o(this.fontOptions,n,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(e||i)&&("normal"===n&&!0===this.fontOptions.chooser&&this.elementOptions.labelHighlightBold?r.mod="bold":"function"==typeof this.fontOptions.chooser&&this.fontOptions.chooser(r,this.elementOptions.id,e,i));var a="";return void 0!==r.mod&&""!==r.mod&&(a+=r.mod+" "),a+=r.size+"px "+r.face,t.font=a.replace(/"/g,""),r.font=t.font,r.height=r.size,r}},{key:"differentState",value:function(t,e){return t!==this.selectedState||e!==this.hoverState}},{key:"_processLabelText",value:function(t,e,i,n){return new d(t,this,e,i).process(n)}},{key:"_processLabel",value:function(t,e,i){if(!1!==this.labelDirty||this.differentState(e,i)){var n=this._processLabelText(t,e,i,this.elementOptions.label);this.fontOptions.minWdt>0&&n.width<this.fontOptions.minWdt&&(n.width=this.fontOptions.minWdt),this.size.labelHeight=n.height,this.fontOptions.minHgt>0&&n.height<this.fontOptions.minHgt&&(n.height=this.fontOptions.minHgt),this.lines=n.lines,this.lineCount=n.lines.length,this.size.width=n.width,this.size.height=n.height,this.selectedState=e,this.hoverState=i,this.labelDirty=!1}}},{key:"visible",value:function(){return 0!==this.size.width&&0!==this.size.height&&void 0!==this.elementOptions.label&&!(this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,e){if(!e||"string"!=typeof e)return!1;var i=e.split(" ");return t.size=i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}}]),t}();e.default=c},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(30)),o=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var s=i(2),l=i(119).default,u=function(){function t(e,i,n){(0,o.default)(this,t),this.body=i,this.labelModule=n,this.options={},this.setOptions(e),this.colorDirty=!0,this.color={},this.selectionWidth=2,this.hoverWidth=1.5,this.fromPoint=this.from,this.toPoint=this.to}return(0,r.default)(t,[{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,e,i,n,o){t.strokeStyle=this.getColor(t,e,i,n),t.lineWidth=e.width,!1!==e.dashes?this._drawDashedLine(t,e,o):this._drawLine(t,e,o)}},{key:"_drawLine",value:function(t,e,i,o,r){if(this.from!=this.to)this._line(t,e,i,o,r);else{var a=this._getCircleData(t),s=(0,n.default)(a,3),l=s[0],u=s[1],d=s[2];this._circle(t,e,l,u,d)}}},{key:"_drawDashedLine",value:function(t,e,i,o,r){t.lineCap="round";var a=[5,5];if(!0===Array.isArray(e.dashes)&&(a=e.dashes),void 0!==t.setLineDash){if(t.save(),t.setLineDash(a),t.lineDashOffset=0,this.from!=this.to)this._line(t,e,i);else{var s=this._getCircleData(t),l=(0,n.default)(s,3),u=l[0],d=l[1],h=l[2];this._circle(t,e,u,d,h)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)t.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,a);else{var c=this._getCircleData(t),f=(0,n.default)(c,3),p=f[0],g=f[1],m=f[2];this._circle(t,e,p,g,m)}this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}}},{key:"findBorderPosition",value:function(t,e,i){return this.from!=this.to?this._findBorderPosition(t,e,i):this._findBorderPositionCircle(t,e,i)}},{key:"findBorderPositions",value:function(t){var e={},i={};if(this.from!=this.to)e=this._findBorderPosition(this.from,t),i=this._findBorderPosition(this.to,t);else{var o=this._getCircleData(t).slice(0,2),r=(0,n.default)(o,2),a=r[0],s=r[1];e=this._findBorderPositionCircle(this.from,t,{x:a,y:s,low:.25,high:.6,direction:-1}),i=this._findBorderPositionCircle(this.from,t,{x:a,y:s,low:.6,high:.8,direction:1})}return{from:e,to:i}}},{key:"_getCircleData",value:function(t){var e=void 0,i=void 0,n=this.from,o=this.options.selfReferenceSize;return void 0!==t&&void 0===n.shape.width&&n.shape.resize(t),n.shape.width>n.shape.height?(e=n.x+.5*n.shape.width,i=n.y-o):(e=n.x+o,i=n.y-.5*n.shape.height),[e,i,o]}},{key:"_pointOnCircle",value:function(t,e,i,n){var o=2*n*Math.PI;return{x:t+i*Math.cos(o),y:e-i*Math.sin(o)}}},{key:"_findBorderPositionCircle",value:function(t,e,i){for(var n=i.x,o=i.y,r=i.low,a=i.high,s=i.direction,l=0,u=this.options.selfReferenceSize,d=void 0,h=void 0,c=void 0,f=.5*(r+a);r<=a&&l<10&&(f=.5*(r+a),d=this._pointOnCircle(n,o,u,f),h=Math.atan2(t.y-d.y,t.x-d.x),c=t.distanceToBorder(e,h)-Math.sqrt(Math.pow(d.x-t.x,2)+Math.pow(d.y-t.y,2)),!(Math.abs(c)<.05));)c>0?s>0?r=f:a=f:s>0?a=f:r=f,l++;return d.t=f,d}},{key:"getLineWidth",value:function(t,e){return!0===t?Math.max(this.selectionWidth,.3/this.body.view.scale):!0===e?Math.max(this.hoverWidth,.3/this.body.view.scale):Math.max(this.options.width,.3/this.body.view.scale)}},{key:"getColor",value:function(t,e,i,n){if(!1!==e.inheritsColor){if("both"===e.inheritsColor&&this.from.id!==this.to.id){var o=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),r=void 0,a=void 0;return r=this.from.options.color.highlight.border,a=this.to.options.color.highlight.border,!1===this.from.selected&&!1===this.to.selected?(r=s.overrideOpacity(this.from.options.color.border,e.opacity),a=s.overrideOpacity(this.to.options.color.border,e.opacity)):!0===this.from.selected&&!1===this.to.selected?a=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(r=this.from.options.color.border),o.addColorStop(0,r),o.addColorStop(1,a),o}return"to"===e.inheritsColor?s.overrideOpacity(this.to.options.color.border,e.opacity):s.overrideOpacity(this.from.options.color.border,e.opacity)}return s.overrideOpacity(e.color,e.opacity)}},{key:"_circle",value:function(t,e,i,n,o){this.enableShadow(t,e),t.beginPath(),t.arc(i,n,o,0,2*Math.PI,!1),t.stroke(),this.disableShadow(t,e)}},{key:"getDistanceToEdge",value:function(t,e,i,o,r,a,s,l){var u=0;if(this.from!=this.to)u=this._getDistanceToEdge(t,e,i,o,r,a,s);else{var d=this._getCircleData(void 0),h=(0,n.default)(d,3),c=h[0],f=h[1],p=h[2],g=c-r,m=f-a;u=Math.abs(Math.sqrt(g*g+m*m)-p)}return u}},{key:"_getDistanceToLine",value:function(t,e,i,n,o,r){var a=i-t,s=n-e,l=((o-t)*a+(r-e)*s)/(a*a+s*s);l>1?l=1:l<0&&(l=0);var u=t+l*a-o,d=e+l*s-r;return Math.sqrt(u*u+d*d)}},{key:"getArrowData",value:function(t,e,i,o,r,a){var s=void 0,l=void 0,u=void 0,d=void 0,h=void 0,c=void 0,f=void 0,p=a.width;if("from"===e?(u=this.from,d=this.to,h=.1,c=a.fromArrowScale,f=a.fromArrowType):"to"===e?(u=this.to,d=this.from,h=-.1,c=a.toArrowScale,f=a.toArrowType):(u=this.to,d=this.from,c=a.middleArrowScale,f=a.middleArrowType),u!=d)if("middle"!==e)if(!0===this.options.smooth.enabled){l=this.findBorderPosition(u,t,{via:i});var g=this.getPoint(Math.max(0,Math.min(1,l.t+h)),i);s=Math.atan2(l.y-g.y,l.x-g.x)}else s=Math.atan2(u.y-d.y,u.x-d.x),l=this.findBorderPosition(u,t);else s=Math.atan2(u.y-d.y,u.x-d.x),l=this.getPoint(.5,i);else{var m=this._getCircleData(t),v=(0,n.default)(m,3),y=v[0],_=v[1],b=v[2];"from"===e?s=-2*(l=this.findBorderPosition(this.from,t,{x:y,y:_,low:.25,high:.6,direction:-1})).t*Math.PI+1.5*Math.PI+.1*Math.PI:"to"===e?s=-2*(l=this.findBorderPosition(this.from,t,{x:y,y:_,low:.6,high:1,direction:1})).t*Math.PI+1.5*Math.PI-1.1*Math.PI:(l=this._pointOnCircle(y,_,b,.175),s=3.9269908169872414)}"middle"===e&&c<0&&(p*=-1);var E=15*c+3*p;return{point:l,core:{x:l.x-.9*E*Math.cos(s),y:l.y-.9*E*Math.sin(s)},angle:s,length:E,type:f}}},{key:"drawArrowHead",value:function(t,e,i,n,o){t.strokeStyle=this.getColor(t,e,i,n),t.fillStyle=t.strokeStyle,t.lineWidth=e.width,l.draw(t,o),this.enableShadow(t,e),t.fill(),this.disableShadow(t,e)}},{key:"enableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}}]),t}();e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(4)),r=l(i(5)),a=l(i(0)),s=l(i(1));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,a.default)(this,t)}return(0,s.default)(t,null,[{key:"transform",value:function(t,e){t instanceof Array||(t=[t]);for(var i=e.point.x,n=e.point.y,o=e.angle,r=e.length,a=0;a<t.length;++a){var s=t[a],l=s.x*Math.cos(o)-s.y*Math.sin(o),u=s.x*Math.sin(o)+s.y*Math.cos(o);s.x=i+r*l,s.y=n+r*u}}},{key:"drawPath",value:function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;++i)t.lineTo(e[i].x,e[i].y);t.closePath()}}]),t}(),d=function(t){function e(){return(0,a.default)(this,e),(0,o.default)(this,(e.__proto__||(0,n.default)(e)).apply(this,arguments))}return(0,r.default)(e,t),(0,s.default)(e,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];u.transform(i,e),u.drawPath(t,i)}}]),e}(u),h=function(){function t(){(0,a.default)(this,t)}return(0,s.default)(t,null,[{key:"draw",value:function(t,e){var i={x:-.4,y:0};u.transform(i,e),t.circle(i.x,i.y,.4*e.length)}}]),t}(),c=function(){function t(){(0,a.default)(this,t)}return(0,s.default)(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];u.transform(i,e),u.drawPath(t,i)}}]),t}(),f=function(){function t(){(0,a.default)(this,t)}return(0,s.default)(t,null,[{key:"draw",value:function(t,e){var i;switch(e.type&&(i=e.type.toLowerCase()),i){case"circle":h.draw(t,e);break;case"bar":c.draw(t,e);break;case"arrow":default:d.draw(t,e)}}}]),t}();e.default=f},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,i,o){(0,n.default)(this,t),this.body=e,this.physicsBody=i,this.barnesHutTree,this.setOptions(o),this.randomSeed=5}return(0,o.default)(t,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"seededRandom",value:function(){var t=1e4*Math.sin(this.randomSeed++);return t-Math.floor(t)}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&this.physicsBody.physicsNodeIndices.length>0){var t=void 0,e=this.body.nodes,i=this.physicsBody.physicsNodeIndices,n=i.length,o=this._formBarnesHutTree(e,i);this.barnesHutTree=o;for(var r=0;r<n;r++)(t=e[i[r]]).options.mass>0&&this._getForceContributions(o.root,t)}}},{key:"_getForceContributions",value:function(t,e){this._getForceContribution(t.children.NW,e),this._getForceContribution(t.children.NE,e),this._getForceContribution(t.children.SW,e),this._getForceContribution(t.children.SE,e)}},{key:"_getForceContribution",value:function(t,e){var i,n,o;t.childrenCount>0&&(i=t.centerOfMass.x-e.x,n=t.centerOfMass.y-e.y,(o=Math.sqrt(i*i+n*n))*t.calcSize>this.thetaInversed?this._calculateForces(o,i,n,e,t):4===t.childrenCount?this._getForceContributions(t,e):t.children.data.id!=e.id&&this._calculateForces(o,i,n,e,t))}},{key:"_calculateForces",value:function(t,e,i,n,o){0===t&&(e=t=.1),this.overlapAvoidanceFactor<1&&n.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,t-n.shape.radius));var r=this.options.gravitationalConstant*o.mass*n.options.mass/Math.pow(t,3),a=e*r,s=i*r;this.physicsBody.forces[n.id].x+=a,this.physicsBody.forces[n.id].y+=s}},{key:"_formBarnesHutTree",value:function(t,e){for(var i=void 0,n=e.length,o=t[e[0]].x,r=t[e[0]].y,a=t[e[0]].x,s=t[e[0]].y,l=1;l<n;l++){var u=t[e[l]],d=u.x,h=u.y;u.options.mass>0&&(d<o&&(o=d),d>a&&(a=d),h<r&&(r=h),h>s&&(s=h))}var c=Math.abs(a-o)-Math.abs(s-r);c>0?(r-=.5*c,s+=.5*c):(o+=.5*c,a-=.5*c);var f=Math.max(1e-5,Math.abs(a-o)),p=.5*f,g=.5*(o+a),m=.5*(r+s),v={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:g-p,maxX:g+p,minY:m-p,maxY:m+p},size:f,calcSize:1/f,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(v.root);for(var y=0;y<n;y++)(i=t[e[y]]).options.mass>0&&this._placeInTree(v.root,i);return v}},{key:"_updateBranchMass",value:function(t,e){var i=t.centerOfMass,n=t.mass+e.options.mass,o=1/n;i.x=i.x*t.mass+e.x*e.options.mass,i.x*=o,i.y=i.y*t.mass+e.y*e.options.mass,i.y*=o,t.mass=n;var r=Math.max(Math.max(e.height,e.radius),e.width);t.maxWidth=t.maxWidth<r?r:t.maxWidth}},{key:"_placeInTree",value:function(t,e,i){1==i&&void 0!==i||this._updateBranchMass(t,e);var n=t.children.NW.range,o=void 0;o=n.maxX>e.x?n.maxY>e.y?"NW":"SW":n.maxY>e.y?"NE":"SE",this._placeInRegion(t,e,o)}},{key:"_placeInRegion",value:function(t,e,i){var n=t.children[i];switch(n.childrenCount){case 0:n.children.data=e,n.childrenCount=1,this._updateBranchMass(n,e);break;case 1:n.children.data.x===e.x&&n.children.data.y===e.y?(e.x+=this.seededRandom(),e.y+=this.seededRandom()):(this._splitBranch(n),this._placeInTree(n,e));break;case 4:this._placeInTree(n,e)}}},{key:"_splitBranch",value:function(t){var e=null;1===t.childrenCount&&(e=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),null!=e&&this._placeInTree(t,e)}},{key:"_insertRegion",value:function(t,e){var i=void 0,n=void 0,o=void 0,r=void 0,a=.5*t.size;switch(e){case"NW":i=t.range.minX,n=t.range.minX+a,o=t.range.minY,r=t.range.minY+a;break;case"NE":i=t.range.minX+a,n=t.range.maxX,o=t.range.minY,r=t.range.minY+a;break;case"SW":i=t.range.minX,n=t.range.minX+a,o=t.range.minY+a,r=t.range.maxY;break;case"SE":i=t.range.minX+a,n=t.range.maxX,o=t.range.minY+a,r=t.range.maxY}t.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:n,minY:o,maxY:r},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,e){void 0!==this.barnesHutTree&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,e))}},{key:"_drawBranch",value:function(t,e,i){void 0===i&&(i="#FF0000"),4===t.childrenCount&&(this._drawBranch(t.children.NW,e),this._drawBranch(t.children.NE,e),this._drawBranch(t.children.SE,e),this._drawBranch(t.children.SW,e)),e.strokeStyle=i,e.beginPath(),e.moveTo(t.range.minX,t.range.minY),e.lineTo(t.range.maxX,t.range.minY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.minY),e.lineTo(t.range.maxX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.maxY),e.lineTo(t.range.minX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.minX,t.range.maxY),e.lineTo(t.range.minX,t.range.minY),e.stroke()}}]),t}();e.default=a},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,i,o){(0,n.default)(this,t),this.body=e,this.physicsBody=i,this.setOptions(o)}return(0,o.default)(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t=void 0,e=void 0,i=void 0,n=void 0,o=this.body.nodes,r=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces,s=0;s<r.length;s++)t=-(n=o[r[s]]).x,e=-n.y,i=Math.sqrt(t*t+e*e),this._calculateForces(i,t,e,a,n)}},{key:"_calculateForces",value:function(t,e,i,n,o){var r=0===t?0:this.options.centralGravity/t;n[o.id].x=e*r,n[o.id].y=i*r}}]),t}();e.default=a},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n="string",o="boolean",r="number",a="object",s=["arrow","circle","bar"],l={configure:{enabled:{boolean:o},filter:{boolean:o,string:n,array:"array",function:"function"},container:{dom:"dom"},showButton:{boolean:o},__type__:{object:a,boolean:o,string:n,array:"array",function:"function"}},edges:{arrows:{to:{enabled:{boolean:o},scaleFactor:{number:r},type:{string:s},__type__:{object:a,boolean:o}},middle:{enabled:{boolean:o},scaleFactor:{number:r},type:{string:s},__type__:{object:a,boolean:o}},from:{enabled:{boolean:o},scaleFactor:{number:r},type:{string:s},__type__:{object:a,boolean:o}},__type__:{string:["from","to","middle"],object:a}},arrowStrikethrough:{boolean:o},chosen:{label:{boolean:o,function:"function"},edge:{boolean:o,function:"function"},__type__:{object:a,boolean:o}},color:{color:{string:n},highlight:{string:n},hover:{string:n},inherit:{string:["from","to","both"],boolean:o},opacity:{number:r},__type__:{object:a,string:n}},dashes:{boolean:o,array:"array"},font:{color:{string:n},size:{number:r},face:{string:n},background:{string:n},strokeWidth:{number:r},strokeColor:{string:n},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:r},multi:{boolean:o,string:n},bold:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:a,string:n}},boldital:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:a,string:n}},ital:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:a,string:n}},mono:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:a,string:n}},__type__:{object:a,string:n}},hidden:{boolean:o},hoverWidth:{function:"function",number:r},label:{string:n,undefined:"undefined"},labelHighlightBold:{boolean:o},length:{number:r,undefined:"undefined"},physics:{boolean:o},scaling:{min:{number:r},max:{number:r},label:{enabled:{boolean:o},min:{number:r},max:{number:r},maxVisible:{number:r},drawThreshold:{number:r},__type__:{object:a,boolean:o}},customScalingFunction:{function:"function"},__type__:{object:a}},selectionWidth:{function:"function",number:r},selfReferenceSize:{number:r},shadow:{enabled:{boolean:o},color:{string:n},size:{number:r},x:{number:r},y:{number:r},__type__:{object:a,boolean:o}},smooth:{enabled:{boolean:o},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:r},forceDirection:{string:["horizontal","vertical","none"],boolean:o},__type__:{object:a,boolean:o}},title:{string:n,undefined:"undefined"},width:{number:r},widthConstraint:{maximum:{number:r},__type__:{object:a,boolean:o,number:r}},value:{number:r,undefined:"undefined"},__type__:{object:a}},groups:{useDefaultGroups:{boolean:o},__any__:"get from nodes, will be overwritten below",__type__:{object:a}},interaction:{dragNodes:{boolean:o},dragView:{boolean:o},hideEdgesOnDrag:{boolean:o},hideNodesOnDrag:{boolean:o},hover:{boolean:o},keyboard:{enabled:{boolean:o},speed:{x:{number:r},y:{number:r},zoom:{number:r},__type__:{object:a}},bindToWindow:{boolean:o},__type__:{object:a,boolean:o}},multiselect:{boolean:o},navigationButtons:{boolean:o},selectable:{boolean:o},selectConnectedEdges:{boolean:o},hoverConnectedEdges:{boolean:o},tooltipDelay:{number:r},zoomView:{boolean:o},__type__:{object:a}},layout:{randomSeed:{undefined:"undefined",number:r},improvedLayout:{boolean:o},hierarchical:{enabled:{boolean:o},levelSeparation:{number:r},nodeSpacing:{number:r},treeSpacing:{number:r},blockShifting:{boolean:o},edgeMinimization:{boolean:o},parentCentralization:{boolean:o},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},__type__:{object:a,boolean:o}},__type__:{object:a}},manipulation:{enabled:{boolean:o},initiallyActive:{boolean:o},addNode:{boolean:o,function:"function"},addEdge:{boolean:o,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:a,boolean:o,function:"function"}},deleteNode:{boolean:o,function:"function"},deleteEdge:{boolean:o,function:"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:a,boolean:o}},nodes:{borderWidth:{number:r},borderWidthSelected:{number:r,undefined:"undefined"},brokenImage:{string:n,undefined:"undefined"},chosen:{label:{boolean:o,function:"function"},node:{boolean:o,function:"function"},__type__:{object:a,boolean:o}},color:{border:{string:n},background:{string:n},highlight:{border:{string:n},background:{string:n},__type__:{object:a,string:n}},hover:{border:{string:n},background:{string:n},__type__:{object:a,string:n}},__type__:{object:a,string:n}},fixed:{x:{boolean:o},y:{boolean:o},__type__:{object:a,boolean:o}},font:{align:{string:n},color:{string:n},size:{number:r},face:{string:n},background:{string:n},strokeWidth:{number:r},strokeColor:{string:n},vadjust:{number:r},multi:{boolean:o,string:n},bold:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:a,string:n}},boldital:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:a,string:n}},ital:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:a,string:n}},mono:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:a,string:n}},__type__:{object:a,string:n}},group:{string:n,number:r,undefined:"undefined"},heightConstraint:{minimum:{number:r},valign:{string:n},__type__:{object:a,boolean:o,number:r}},hidden:{boolean:o},icon:{face:{string:n},code:{string:n},size:{number:r},color:{string:n},__type__:{object:a}},id:{string:n,number:r},image:{selected:{string:n,undefined:"undefined"},unselected:{string:n,undefined:"undefined"},__type__:{object:a,string:n}},label:{string:n,undefined:"undefined"},labelHighlightBold:{boolean:o},level:{number:r,undefined:"undefined"},margin:{top:{number:r},right:{number:r},bottom:{number:r},left:{number:r},__type__:{object:a,number:r}},mass:{number:r},physics:{boolean:o},scaling:{min:{number:r},max:{number:r},label:{enabled:{boolean:o},min:{number:r},max:{number:r},maxVisible:{number:r},drawThreshold:{number:r},__type__:{object:a,boolean:o}},customScalingFunction:{function:"function"},__type__:{object:a}},shadow:{enabled:{boolean:o},color:{string:n},size:{number:r},x:{number:r},y:{number:r},__type__:{object:a,boolean:o}},shape:{string:["ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},shapeProperties:{borderDashes:{boolean:o,array:"array"},borderRadius:{number:r},interpolation:{boolean:o},useImageSize:{boolean:o},useBorderWithImage:{boolean:o},__type__:{object:a}},size:{number:r},title:{string:n,dom:"dom",undefined:"undefined"},value:{number:r,undefined:"undefined"},widthConstraint:{minimum:{number:r},maximum:{number:r},__type__:{object:a,boolean:o,number:r}},x:{number:r},y:{number:r},__type__:{object:a}},physics:{enabled:{boolean:o},barnesHut:{gravitationalConstant:{number:r},centralGravity:{number:r},springLength:{number:r},springConstant:{number:r},damping:{number:r},avoidOverlap:{number:r},__type__:{object:a}},forceAtlas2Based:{gravitationalConstant:{number:r},centralGravity:{number:r},springLength:{number:r},springConstant:{number:r},damping:{number:r},avoidOverlap:{number:r},__type__:{object:a}},repulsion:{centralGravity:{number:r},springLength:{number:r},springConstant:{number:r},nodeDistance:{number:r},damping:{number:r},__type__:{object:a}},hierarchicalRepulsion:{centralGravity:{number:r},springLength:{number:r},springConstant:{number:r},nodeDistance:{number:r},damping:{number:r},__type__:{object:a}},maxVelocity:{number:r},minVelocity:{number:r},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:o},iterations:{number:r},updateInterval:{number:r},onlyDynamicEdges:{boolean:o},fit:{boolean:o},__type__:{object:a,boolean:o}},timestep:{number:r},adaptiveTimestep:{boolean:o},__type__:{object:a,boolean:o}},autoResize:{boolean:o},clickToUse:{boolean:o},locale:{string:n},locales:{__any__:{any:"any"},__type__:{object:a}},height:{string:n},width:{string:n},__type__:{object:a}};l.groups.__any__=l.nodes,l.manipulation.controlNodeStyle=l.nodes,e.allOptions=l,e.configureOptions={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01]}}},function(t,e,i){var n=i(2);n.extend(e,i(159)),n.extend(e,i(177)),n.extend(e,i(181))},function(t,e,i){i(49),i(60),t.exports=i(136)},function(t,e,i){var n=i(126),o=i(127),r=i(31),a=i(25);t.exports=i(79)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(54),o=i(39),r=i(59),a={};i(26)(a,i(13)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(a,{next:o(1,i)}),r(t,e+" Iterator")}},function(t,e,i){var n=i(20),o=i(27),r=i(33);t.exports=i(21)?g.default:function(t,e){o(t);for(var i,a=r(e),s=a.length,l=0;s>l;)n.f(t,i=a[l++],e[i]);return t}},function(t,e,i){var n=i(25),o=i(132),r=i(133);t.exports=function(t){return function(e,i,a){var s,l=n(e),u=o(l.length),d=r(a,u);if(t&&i!=i){for(;u>d;)if((s=l[d++])!=s)return!0}else for(;u>d;d++)if((t||d in l)&&l[d]===i)return t||d||0;return!t&&-1}}},function(t,e,i){var n=i(55),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},function(t,e,i){var n=i(55),o=Math.max,r=Math.min;t.exports=function(t,e){return(t=n(t))<0?o(t+e,0):r(t,e)}},function(t,e,i){var n=i(18).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(55),o=i(51);t.exports=function(t){return function(e,i){var r,a,s=String(o(e)),l=n(i),u=s.length;return l<0||l>=u?t?"":void 0:(r=s.charCodeAt(l))<55296||r>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):r:t?s.slice(l,l+2):a-56320+(r-55296<<10)+65536}}},function(t,e,i){var n=i(27),o=i(137);t.exports=i(7).getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,i){var n=i(86),o=i(13)("iterator"),r=i(31);t.exports=i(7).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||r[n(t)]}},function(t,e,i){i(139);var n=i(7).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,i){var n=i(17);n(n.S,"Object",{create:i(54)})},function(t,e,i){i(141),t.exports=i(7).Object.keys},function(t,e,i){var n=i(41),o=i(33);i(87)("keys",function(){return function(t){return o(n(t))}})},function(t,e,i){t.exports={default:i(143),__esModule:!0}},function(t,e,i){i(60),i(49),t.exports=i(61).f("iterator")},function(t,e,i){t.exports={default:i(145),__esModule:!0}},function(t,e,i){i(146),i(151),i(152),i(153),t.exports=i(7).Symbol},function(t,e,i){var n=i(18),o=i(22),r=i(21),a=i(17),s=i(83),l=i(147).KEY,u=i(28),d=i(57),h=i(59),c=i(40),f=i(13),p=i(61),g=i(62),m=i(148),v=i(149),y=i(27),_=i(25),b=i(53),E=i(39),w=i(54),S=i(150),x=i(89),C=i(20),I=i(33),A=x.f,M=C.f,O=S.f,D=n.Symbol,R=n.JSON,N=R&&R.stringify,k=f("_hidden"),P=f("toPrimitive"),L={}.propertyIsEnumerable,F=d("symbol-registry"),B=d("symbols"),U=d("op-symbols"),j=Object.prototype,H="function"==typeof D,G=n.QObject,z=!G||!G.prototype||!G.prototype.findChild,Y=r&&u(function(){return 7!=w(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=A(j,e);n&&delete j[e],M(t,e,i),n&&t!==j&&M(j,e,n)}:M,V=function(t){var e=B[t]=w(D.prototype);return e._k=t,e},q=H&&"symbol"==(0,T.default)(D.iterator)?function(t){return"symbol"==(void 0===t?"undefined":(0,T.default)(t))}:function(t){return t instanceof D},W=function(t,e,i){return t===j&&W(U,e,i),y(t),e=b(e,!0),y(i),o(B,e)?(i.enumerable?(o(t,k)&&t[k][e]&&(t[k][e]=!1),i=w(i,{enumerable:E(0,!1)})):(o(t,k)||M(t,k,E(1,{})),t[k][e]=!0),Y(t,e,i)):M(t,e,i)},K=function(t,e){y(t);for(var i,n=m(e=_(e)),o=0,r=n.length;r>o;)W(t,i=n[o++],e[i]);return t},X=function(t){var e=L.call(this,t=b(t,!0));return!(this===j&&o(B,t)&&!o(U,t))&&(!(e||!o(this,t)||!o(B,t)||o(this,k)&&this[k][t])||e)},Q=function(t,e){if(t=_(t),e=b(e,!0),t!==j||!o(B,e)||o(U,e)){var i=A(t,e);return!i||!o(B,e)||o(t,k)&&t[k][e]||(i.enumerable=!0),i}},Z=function(t){for(var e,i=O(_(t)),n=[],r=0;i.length>r;)o(B,e=i[r++])||e==k||e==l||n.push(e);return n},J=function(t){for(var e,i=t===j,n=O(i?U:_(t)),r=[],a=0;n.length>a;)!o(B,e=n[a++])||i&&!o(j,e)||r.push(B[e]);return r};H||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=c(arguments.length>0?arguments[0]:void 0),e=function e(i){this===j&&e.call(U,i),o(this,k)&&o(this[k],t)&&(this[k][t]=!1),Y(this,t,E(1,i))};return r&&z&&Y(j,t,{configurable:!0,set:e}),V(t)}).prototype,"toString",function(){return this._k}),x.f=Q,C.f=W,i(88).f=S.f=Z,i(42).f=X,i(63).f=J,r&&!i(52)&&s(j,"propertyIsEnumerable",X,!0),p.f=function(t){return V(f(t))}),a(a.G+a.W+a.F*!H,{Symbol:D});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)f($[tt++]);for(var et=I(f.store),it=0;et.length>it;)g(et[it++]);a(a.S+a.F*!H,"Symbol",{for:function(t){return o(F,t+="")?F[t]:F[t]=D(t)},keyFor:function(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){z=!0},useSimple:function(){z=!1}}),a(a.S+a.F*!H,"Object",{create:function(t,e){return void 0===e?w(t):K(w(t),e)},defineProperty:W,defineProperties:K,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:J}),R&&a(a.S+a.F*(!H||u(function(){var t=D();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!q(t)){for(var e,i,n=[t],o=1;arguments.length>o;)n.push(arguments[o++]);return"function"==typeof(e=n[1])&&(i=e),!i&&v(e)||(e=function(t,e){if(i&&(e=i.call(this,t,e)),!q(e))return e}),n[1]=e,N.apply(R,n)}}}),D.prototype[P]||i(26)(D.prototype,P,D.prototype.valueOf),h(D,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},function(t,e,i){var n=i(40)("meta"),o=i(32),r=i(22),a=i(20).f,s=0,l=p.default||function(){return!0},u=!i(28)(function(){return l((0,f.default)({}))}),d=function(t){a(t,n,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==(void 0===t?"undefined":(0,T.default)(t))?t:("string"==typeof t?"S":"P")+t;if(!r(t,n)){if(!l(t))return"F";if(!e)return"E";d(t)}return t[n].i},getWeak:function(t,e){if(!r(t,n)){if(!l(t))return!0;if(!e)return!1;d(t)}return t[n].w},onFreeze:function(t){return u&&h.NEED&&l(t)&&!r(t,n)&&d(t),t}}},function(t,e,i){var n=i(33),o=i(63),r=i(42);t.exports=function(t){var e=n(t),i=o.f;if(i)for(var a,s=i(t),l=r.f,u=0;s.length>u;)l.call(t,a=s[u++])&&e.push(a);return e}},function(t,e,i){var n=i(50);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(25),o=i(88).f,r={}.toString,a="object"==("undefined"==typeof window?"undefined":(0,T.default)(window))&&window&&v.default?(0,v.default)(window):[];t.exports.f=function(t){return a&&"[object Window]"==r.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(n(t))}},function(t,e){},function(t,e,i){i(62)("asyncIterator")},function(t,e,i){i(62)("observable")},function(t,e,i){(function(t){t.exports=function(){var e,i;function n(){return e.apply(null,arguments)}function o(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function r(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function a(t){return void 0===t}function s(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function l(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function u(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h(t,e){for(var i in e)d(e,i)&&(t[i]=e[i]);return d(e,"toString")&&(t.toString=e.toString),d(e,"valueOf")&&(t.valueOf=e.valueOf),t}function f(t,e,i,n){return Re(t,e,i,n,!0).utc()}function p(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function g(t){if(null==t._isValid){var e=p(t),n=i.call(e.parsedDateParts,function(t){return null!=t}),o=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(o=o&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=c.default&&(0,c.default)(t))return o;t._isValid=o}return t._isValid}function m(t){var e=f(NaN);return null!=t?h(p(e),t):p(e).userInvalidated=!0,e}i=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var y=n.momentProperties=[];function _(t,e){var i,n,o;if(a(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),a(e._i)||(t._i=e._i),a(e._f)||(t._f=e._f),a(e._l)||(t._l=e._l),a(e._strict)||(t._strict=e._strict),a(e._tzm)||(t._tzm=e._tzm),a(e._isUTC)||(t._isUTC=e._isUTC),a(e._offset)||(t._offset=e._offset),a(e._pf)||(t._pf=p(e)),a(e._locale)||(t._locale=e._locale),y.length>0)for(i=0;i<y.length;i++)a(o=e[n=y[i]])||(t[n]=o);return t}var b=!1;function w(t){_(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,n.updateOffset(this),b=!1)}function S(t){return t instanceof w||null!=t&&null!=t._isAMomentObject}function x(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function C(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=x(e)),i}function I(t,e,i){var n,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),a=0;for(n=0;n<o;n++)(i&&t[n]!==e[n]||!i&&C(t[n])!==C(e[n]))&&a++;return a+r}function A(t){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function M(t,e){var i=!0;return h(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,t),i){for(var o,r=[],a=0;a<arguments.length;a++){if(o="","object"===(0,T.default)(arguments[a])){for(var s in o+="\n["+a+"] ",arguments[0])o+=s+": "+arguments[0][s]+", ";o=o.slice(0,-2)}else o=arguments[a];r.push(o)}A(t+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),i=!1}return e.apply(this,arguments)},e)}var O,D={};function R(t,e){null!=n.deprecationHandler&&n.deprecationHandler(t,e),D[t]||(A(e),D[t]=!0)}function N(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function k(t,e){var i,n=h({},t);for(i in e)d(e,i)&&(r(t[i])&&r(e[i])?(n[i]={},h(n[i],t[i]),h(n[i],e[i])):null!=e[i]?n[i]=e[i]:delete n[i]);for(i in t)d(t,i)&&!d(e,i)&&r(t[i])&&(n[i]=h({},n[i]));return n}function P(t){null!=t&&this.set(t)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,O=E.default?E.default:function(t){var e,i=[];for(e in t)d(t,e)&&i.push(e);return i};var L={};function F(t,e){var i=t.toLowerCase();L[i]=L[i+"s"]=L[e]=t}function B(t){return"string"==typeof t?L[t]||L[t.toLowerCase()]:void 0}function U(t){var e,i,n={};for(i in t)d(t,i)&&(e=B(i))&&(n[e]=t[i]);return n}var j={};function H(t,e){j[t]=e}function G(t,e,i){var n=""+Math.abs(t),o=e-n.length;return(t>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}var z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Y=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,V={},q={};function W(t,e,i,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),t&&(q[t]=o),e&&(q[e[0]]=function(){return G(o.apply(this,arguments),e[1],e[2])}),i&&(q[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function K(t,e){return t.isValid()?(e=X(e,t.localeData()),V[e]=V[e]||function(t){var e,i,n,o=t.match(z);for(e=0,i=o.length;e<i;e++)q[o[e]]?o[e]=q[o[e]]:o[e]=(n=o[e]).match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"");return function(e){var n,r="";for(n=0;n<i;n++)r+=N(o[n])?o[n].call(e,t):o[n];return r}}(e),V[e](t)):t.localeData().invalidDate()}function X(t,e){var i=5;function n(t){return e.longDateFormat(t)||t}for(Y.lastIndex=0;i>=0&&Y.test(t);)t=t.replace(Y,n),Y.lastIndex=0,i-=1;return t}var Q=/\d/,Z=/\d\d/,J=/\d{3}/,$=/\d{4}/,tt=/[+-]?\d{6}/,et=/\d\d?/,it=/\d\d\d\d?/,nt=/\d\d\d\d\d\d?/,ot=/\d{1,3}/,rt=/\d{1,4}/,at=/[+-]?\d{1,6}/,st=/\d+/,lt=/[+-]?\d+/,ut=/Z|[+-]\d\d:?\d\d/gi,dt=/Z|[+-]\d\d(?::?\d\d)?/gi,ht=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ct={};function ft(t,e,i){ct[t]=N(e)?e:function(t,n){return t&&i?i:e}}function pt(t,e){return d(ct,t)?ct[t](e._strict,e._locale):new RegExp(function(t){return gt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o}))}(t))}function gt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var mt={};function vt(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),s(e)&&(n=function(t,i){i[e]=C(t)}),i=0;i<t.length;i++)mt[t[i]]=n}function yt(t,e){vt(t,function(t,i,n,o){n._w=n._w||{},e(t,n._w,n,o)})}function _t(t,e,i){null!=e&&d(mt,t)&&mt[t](e,i._a,i,t)}var bt=0,Et=1,wt=2,Tt=3,St=4,xt=5,Ct=6,It=7,At=8;function Mt(t){return Ot(t)?366:365}function Ot(t){return t%4==0&&t%100!=0||t%400==0}W("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),W(0,["YY",2],0,function(){return this.year()%100}),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),F("year","y"),H("year",1),ft("Y",lt),ft("YY",et,Z),ft("YYYY",rt,$),ft("YYYYY",at,tt),ft("YYYYYY",at,tt),vt(["YYYYY","YYYYYY"],bt),vt("YYYY",function(t,e){e[bt]=2===t.length?n.parseTwoDigitYear(t):C(t)}),vt("YY",function(t,e){e[bt]=n.parseTwoDigitYear(t)}),vt("Y",function(t,e){e[bt]=parseInt(t,10)}),n.parseTwoDigitYear=function(t){return C(t)+(C(t)>68?1900:2e3)};var Dt,Rt=Nt("FullYear",!0);function Nt(t,e){return function(i){return null!=i?(Pt(this,t,i),n.updateOffset(this,e),this):kt(this,t)}}function kt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Pt(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&Ot(t.year())?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),Lt(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function Lt(t,e){if(isNaN(t)||isNaN(e))return NaN;var i,n=(e%(i=12)+i)%i;return t+=(e-n)/12,1===n?Ot(t)?29:28:31-n%7%2}Dt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},W("M",["MM",2],"Mo",function(){return this.month()+1}),W("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),W("MMMM",0,0,function(t){return this.localeData().months(this,t)}),F("month","M"),H("month",8),ft("M",et),ft("MM",et,Z),ft("MMM",function(t,e){return e.monthsShortRegex(t)}),ft("MMMM",function(t,e){return e.monthsRegex(t)}),vt(["M","MM"],function(t,e){e[Et]=C(t)-1}),vt(["MMM","MMMM"],function(t,e,i,n){var o=i._locale.monthsParse(t,n,i._strict);null!=o?e[Et]=o:p(i).invalidMonth=t});var Ft=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Bt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ut="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function jt(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=C(e);else if(!s(e=t.localeData().monthsParse(e)))return t;return i=Math.min(t.date(),Lt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function Ht(t){return null!=t?(jt(this,t),n.updateOffset(this,!0),this):kt(this,"Month")}var Gt=ht,zt=ht;function Yt(){function t(t,e){return e.length-t.length}var e,i,n=[],o=[],r=[];for(e=0;e<12;e++)i=f([2e3,e]),n.push(this.monthsShort(i,"")),o.push(this.months(i,"")),r.push(this.months(i,"")),r.push(this.monthsShort(i,""));for(n.sort(t),o.sort(t),r.sort(t),e=0;e<12;e++)n[e]=gt(n[e]),o[e]=gt(o[e]);for(e=0;e<24;e++)r[e]=gt(r[e]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Vt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function qt(t,e,i){var n=7+e-i;return-(7+Vt(t,0,n).getUTCDay()-e)%7+n-1}function Wt(t,e,i,n,o){var r,a,s=1+7*(e-1)+(7+i-n)%7+qt(t,n,o);return s<=0?a=Mt(r=t-1)+s:s>Mt(t)?(r=t+1,a=s-Mt(t)):(r=t,a=s),{year:r,dayOfYear:a}}function Kt(t,e,i){var n,o,r=qt(t.year(),e,i),a=Math.floor((t.dayOfYear()-r-1)/7)+1;return a<1?n=a+Xt(o=t.year()-1,e,i):a>Xt(t.year(),e,i)?(n=a-Xt(t.year(),e,i),o=t.year()+1):(o=t.year(),n=a),{week:n,year:o}}function Xt(t,e,i){var n=qt(t,e,i),o=qt(t+1,e,i);return(Mt(t)-n+o)/7}W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),F("week","w"),F("isoWeek","W"),H("week",5),H("isoWeek",5),ft("w",et),ft("ww",et,Z),ft("W",et),ft("WW",et,Z),yt(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=C(t)}),W("d",0,"do","day"),W("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),W("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),W("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),F("day","d"),F("weekday","e"),F("isoWeekday","E"),H("day",11),H("weekday",11),H("isoWeekday",11),ft("d",et),ft("e",et),ft("E",et),ft("dd",function(t,e){return e.weekdaysMinRegex(t)}),ft("ddd",function(t,e){return e.weekdaysShortRegex(t)}),ft("dddd",function(t,e){return e.weekdaysRegex(t)}),yt(["dd","ddd","dddd"],function(t,e,i,n){var o=i._locale.weekdaysParse(t,n,i._strict);null!=o?e.d=o:p(i).invalidWeekday=t}),yt(["d","e","E"],function(t,e,i,n){e[n]=C(t)});var Qt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Zt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Jt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),$t=ht,te=ht,ee=ht;function ie(){function t(t,e){return e.length-t.length}var e,i,n,o,r,a=[],s=[],l=[],u=[];for(e=0;e<7;e++)i=f([2e3,1]).day(e),n=this.weekdaysMin(i,""),o=this.weekdaysShort(i,""),r=this.weekdays(i,""),a.push(n),s.push(o),l.push(r),u.push(n),u.push(o),u.push(r);for(a.sort(t),s.sort(t),l.sort(t),u.sort(t),e=0;e<7;e++)s[e]=gt(s[e]),l[e]=gt(l[e]),u[e]=gt(u[e]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function ne(){return this.hours()%12||12}function oe(t,e){W(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function re(t,e){return e._meridiemParse}W("H",["HH",2],0,"hour"),W("h",["hh",2],0,ne),W("k",["kk",2],0,function(){return this.hours()||24}),W("hmm",0,0,function(){return""+ne.apply(this)+G(this.minutes(),2)}),W("hmmss",0,0,function(){return""+ne.apply(this)+G(this.minutes(),2)+G(this.seconds(),2)}),W("Hmm",0,0,function(){return""+this.hours()+G(this.minutes(),2)}),W("Hmmss",0,0,function(){return""+this.hours()+G(this.minutes(),2)+G(this.seconds(),2)}),oe("a",!0),oe("A",!1),F("hour","h"),H("hour",13),ft("a",re),ft("A",re),ft("H",et),ft("h",et),ft("k",et),ft("HH",et,Z),ft("hh",et,Z),ft("kk",et,Z),ft("hmm",it),ft("hmmss",nt),ft("Hmm",it),ft("Hmmss",nt),vt(["H","HH"],Tt),vt(["k","kk"],function(t,e,i){var n=C(t);e[Tt]=24===n?0:n}),vt(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),vt(["h","hh"],function(t,e,i){e[Tt]=C(t),p(i).bigHour=!0}),vt("hmm",function(t,e,i){var n=t.length-2;e[Tt]=C(t.substr(0,n)),e[St]=C(t.substr(n)),p(i).bigHour=!0}),vt("hmmss",function(t,e,i){var n=t.length-4,o=t.length-2;e[Tt]=C(t.substr(0,n)),e[St]=C(t.substr(n,2)),e[xt]=C(t.substr(o)),p(i).bigHour=!0}),vt("Hmm",function(t,e,i){var n=t.length-2;e[Tt]=C(t.substr(0,n)),e[St]=C(t.substr(n))}),vt("Hmmss",function(t,e,i){var n=t.length-4,o=t.length-2;e[Tt]=C(t.substr(0,n)),e[St]=C(t.substr(n,2)),e[xt]=C(t.substr(o))});var ae,se=Nt("Hours",!0),le={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Bt,monthsShort:Ut,week:{dow:0,doy:6},weekdays:Qt,weekdaysMin:Jt,weekdaysShort:Zt,meridiemParse:/[ap]\.?m?\.?/i},ue={},de={};function he(t){return t?t.toLowerCase().replace("_","-"):t}function ce(e){var i=null;if(!ue[e]&&void 0!==t&&t&&t.exports)try{i=ae._abbr,function(){var t=new Error('Cannot find module "./locale"');throw t.code="MODULE_NOT_FOUND",t}(),fe(i)}catch(t){}return ue[e]}function fe(t,e){var i;return t&&(i=a(e)?ge(t):pe(t,e))&&(ae=i),ae._abbr}function pe(t,e){if(null!==e){var i=le;if(e.abbr=t,null!=ue[t])R("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=ue[t]._config;else if(null!=e.parentLocale){if(null==ue[e.parentLocale])return de[e.parentLocale]||(de[e.parentLocale]=[]),de[e.parentLocale].push({name:t,config:e}),null;i=ue[e.parentLocale]._config}return ue[t]=new P(k(i,e)),de[t]&&de[t].forEach(function(t){pe(t.name,t.config)}),fe(t),ue[t]}return delete ue[t],null}function ge(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ae;if(!o(t)){if(e=ce(t))return e;t=[t]}return function(t){for(var e,i,n,o,r=0;r<t.length;){for(e=(o=he(t[r]).split("-")).length,i=(i=he(t[r+1]))?i.split("-"):null;e>0;){if(n=ce(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&I(o,i,!0)>=e-1)break;e--}r++}return null}(t)}function me(t){var e,i=t._a;return i&&-2===p(t).overflow&&(e=i[Et]<0||i[Et]>11?Et:i[wt]<1||i[wt]>Lt(i[bt],i[Et])?wt:i[Tt]<0||i[Tt]>24||24===i[Tt]&&(0!==i[St]||0!==i[xt]||0!==i[Ct])?Tt:i[St]<0||i[St]>59?St:i[xt]<0||i[xt]>59?xt:i[Ct]<0||i[Ct]>999?Ct:-1,p(t)._overflowDayOfYear&&(e<bt||e>wt)&&(e=wt),p(t)._overflowWeeks&&-1===e&&(e=It),p(t)._overflowWeekday&&-1===e&&(e=At),p(t).overflow=e),t}function ve(t,e,i){return null!=t?t:null!=e?e:i}function ye(t){var e,i,o,r,a=[];if(!t._d){for(o=function(t){var e=new Date(n.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[wt]&&null==t._a[Et]&&function(t){var e,i,n,o,r,a,s,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)r=1,a=4,i=ve(e.GG,t._a[bt],Kt(Ne(),1,4).year),n=ve(e.W,1),((o=ve(e.E,1))<1||o>7)&&(l=!0);else{r=t._locale._week.dow,a=t._locale._week.doy;var u=Kt(Ne(),r,a);i=ve(e.gg,t._a[bt],u.year),n=ve(e.w,u.week),null!=e.d?((o=e.d)<0||o>6)&&(l=!0):null!=e.e?(o=e.e+r,(e.e<0||e.e>6)&&(l=!0)):o=r}n<1||n>Xt(i,r,a)?p(t)._overflowWeeks=!0:null!=l?p(t)._overflowWeekday=!0:(s=Wt(i,n,o,r,a),t._a[bt]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(r=ve(t._a[bt],o[bt]),(t._dayOfYear>Mt(r)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),i=Vt(r,0,t._dayOfYear),t._a[Et]=i.getUTCMonth(),t._a[wt]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=o[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Tt]&&0===t._a[St]&&0===t._a[xt]&&0===t._a[Ct]&&(t._nextDay=!0,t._a[Tt]=0),t._d=(t._useUTC?Vt:function(t,e,i,n,o,r,a){var s=new Date(t,e,i,n,o,r,a);return t<100&&t>=0&&isFinite(s.getFullYear())&&s.setFullYear(t),s}).apply(null,a),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Tt]=24),t._w&&void 0!==t._w.d&&t._w.d!==t._d.getDay()&&(p(t).weekdayMismatch=!0)}}var _e=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,be=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ee=/Z|[+-]\d\d(?::?\d\d)?/,we=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Te=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Se=/^\/?Date\((\-?\d+)/i;function xe(t){var e,i,n,o,r,a,s=t._i,l=_e.exec(s)||be.exec(s);if(l){for(p(t).iso=!0,e=0,i=we.length;e<i;e++)if(we[e][1].exec(l[1])){o=we[e][0],n=!1!==we[e][2];break}if(null==o)return void(t._isValid=!1);if(l[3]){for(e=0,i=Te.length;e<i;e++)if(Te[e][1].exec(l[3])){r=(l[2]||" ")+Te[e][0];break}if(null==r)return void(t._isValid=!1)}if(!n&&null!=r)return void(t._isValid=!1);if(l[4]){if(!Ee.exec(l[4]))return void(t._isValid=!1);a="Z"}t._f=o+(r||"")+(a||""),Oe(t)}else t._isValid=!1}var Ce=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function Ie(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}var Ae={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Me(t){var e,i,n,o,r,a,s,l=Ce.exec(function(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(t._i));if(l){var u=(e=l[4],i=l[3],n=l[2],o=l[5],r=l[6],a=l[7],s=[Ie(e),Ut.indexOf(i),parseInt(n,10),parseInt(o,10),parseInt(r,10)],a&&s.push(parseInt(a,10)),s);if(!function(t,e,i){return!t||Zt.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(p(i).weekdayMismatch=!0,i._isValid=!1,!1)}(l[1],u,t))return;t._a=u,t._tzm=function(t,e,i){if(t)return Ae[t];if(e)return 0;var n=parseInt(i,10),o=n%100;return(n-o)/100*60+o}(l[8],l[9],l[10]),t._d=Vt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0}else t._isValid=!1}function Oe(t){if(t._f!==n.ISO_8601)if(t._f!==n.RFC_2822){t._a=[],p(t).empty=!0;var e,i,o,r,a,s=""+t._i,l=s.length,u=0;for(o=X(t._f,t._locale).match(z)||[],e=0;e<o.length;e++)r=o[e],(i=(s.match(pt(r,t))||[])[0])&&((a=s.substr(0,s.indexOf(i))).length>0&&p(t).unusedInput.push(a),s=s.slice(s.indexOf(i)+i.length),u+=i.length),q[r]?(i?p(t).empty=!1:p(t).unusedTokens.push(r),_t(r,i,t)):t._strict&&!i&&p(t).unusedTokens.push(r);p(t).charsLeftOver=l-u,s.length>0&&p(t).unusedInput.push(s),t._a[Tt]<=12&&!0===p(t).bigHour&&t._a[Tt]>0&&(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[Tt]=function(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?((n=t.isPM(i))&&e<12&&(e+=12),n||12!==e||(e=0),e):e}(t._locale,t._a[Tt],t._meridiem),ye(t),me(t)}else Me(t);else xe(t)}function De(t){var e=t._i,i=t._f;return t._locale=t._locale||ge(t._l),null===e||void 0===i&&""===e?m({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),S(e)?new w(me(e)):(l(e)?t._d=e:o(i)?function(t){var e,i,n,o,r;if(0===t._f.length)return p(t).invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)r=0,e=_({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],Oe(e),g(e)&&(r+=p(e).charsLeftOver,r+=10*p(e).unusedTokens.length,p(e).score=r,(null==n||r<n)&&(n=r,i=e));h(t,i||e)}(t):i?Oe(t):function(t){var e=t._i;a(e)?t._d=new Date(n.now()):l(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=Se.exec(t._i);null===e?(xe(t),!1===t._isValid&&(delete t._isValid,Me(t),!1===t._isValid&&(delete t._isValid,n.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):o(e)?(t._a=u(e.slice(0),function(t){return parseInt(t,10)}),ye(t)):r(e)?function(t){if(!t._d){var e=U(t._i);t._a=u([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),ye(t)}}(t):s(e)?t._d=new Date(e):n.createFromInputFallback(t)}(t),g(t)||(t._d=null),t))}function Re(t,e,i,n,a){var s,l={};return!0!==i&&!1!==i||(n=i,i=void 0),(r(t)&&function(t){if(v.default)return 0===(0,v.default)(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||o(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=a,l._l=i,l._i=t,l._f=e,l._strict=n,(s=new w(me(De(l))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Ne(t,e,i,n){return Re(t,e,i,n,!1)}n.createFromInputFallback=M("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){};var ke=M("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ne.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:m()}),Pe=M("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ne.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:m()});function Le(t,e){var i,n;if(1===e.length&&o(e[0])&&(e=e[0]),!e.length)return Ne();for(i=e[0],n=1;n<e.length;++n)e[n].isValid()&&!e[n][t](i)||(i=e[n]);return i}var Fe=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Be(t){var e=U(t),i=e.year||0,n=e.quarter||0,o=e.month||0,r=e.week||0,a=e.day||0,s=e.hour||0,l=e.minute||0,u=e.second||0,d=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===Dt.call(Fe,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<Fe.length;++n)if(t[Fe[n]]){if(i)return!1;parseFloat(t[Fe[n]])!==C(t[Fe[n]])&&(i=!0)}return!0}(e),this._milliseconds=+d+1e3*u+6e4*l+1e3*s*60*60,this._days=+a+7*r,this._months=+o+3*n+12*i,this._data={},this._locale=ge(),this._bubble()}function Ue(t){return t instanceof Be}function je(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function He(t,e){W(t,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+G(~~(t/60),2)+e+G(~~t%60,2)})}He("Z",":"),He("ZZ",""),ft("Z",dt),ft("ZZ",dt),vt(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=ze(dt,t)});var Ge=/([\+\-]|\d\d)/gi;function ze(t,e){var i=(e||"").match(t);if(null===i)return null;var n=((i[i.length-1]||[])+"").match(Ge)||["-",0,0],o=60*n[1]+C(n[2]);return 0===o?0:"+"===n[0]?o:-o}function Ye(t,e){var i,o;return e._isUTC?(i=e.clone(),o=(S(t)||l(t)?t.valueOf():Ne(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+o),n.updateOffset(i,!1),i):Ne(t).local()}function Ve(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function qe(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var We=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ke=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Xe(t,e){var i,n,o,r,a,l,u=t,h=null;return Ue(t)?u={ms:t._milliseconds,d:t._days,M:t._months}:s(t)?(u={},e?u[e]=t:u.milliseconds=t):(h=We.exec(t))?(i="-"===h[1]?-1:1,u={y:0,d:C(h[wt])*i,h:C(h[Tt])*i,m:C(h[St])*i,s:C(h[xt])*i,ms:C(je(1e3*h[Ct]))*i}):(h=Ke.exec(t))?(i="-"===h[1]?-1:(h[1],1),u={y:Qe(h[2],i),M:Qe(h[3],i),w:Qe(h[4],i),d:Qe(h[5],i),h:Qe(h[6],i),m:Qe(h[7],i),s:Qe(h[8],i)}):null==u?u={}:"object"===(void 0===u?"undefined":(0,T.default)(u))&&("from"in u||"to"in u)&&(r=Ne(u.from),a=Ne(u.to),o=r.isValid()&&a.isValid()?(a=Ye(a,r),r.isBefore(a)?l=Ze(r,a):((l=Ze(a,r)).milliseconds=-l.milliseconds,l.months=-l.months),l):{milliseconds:0,months:0},(u={}).ms=o.milliseconds,u.M=o.months),n=new Be(u),Ue(t)&&d(t,"_locale")&&(n._locale=t._locale),n}function Qe(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Ze(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Je(t,e){return function(i,n){var o;return null===n||isNaN(+n)||(R(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),$e(this,Xe(i="string"==typeof i?+i:i,n),t),this}}function $e(t,e,i,o){var r=e._milliseconds,a=je(e._days),s=je(e._months);t.isValid()&&(o=null==o||o,s&&jt(t,kt(t,"Month")+s*i),a&&Pt(t,"Date",kt(t,"Date")+a*i),r&&t._d.setTime(t._d.valueOf()+r*i),o&&n.updateOffset(t,a||s))}Xe.fn=Be.prototype,Xe.invalid=function(){return Xe(NaN)};var ti=Je(1,"add"),ei=Je(-1,"subtract");function ii(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(i,"months");return-(i+(e-n<0?(e-n)/(n-t.clone().add(i-1,"months")):(e-n)/(t.clone().add(i+1,"months")-n)))||0}function ni(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ge(t))&&(this._locale=e),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var oi=M("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function ri(){return this._locale}function ai(t,e){W(0,[t,t.length],0,e)}function si(t,e,i,n,o){var r;return null==t?Kt(this,n,o).year:(e>(r=Xt(t,n,o))&&(e=r),function(t,e,i,n,o){var r=Wt(t,e,i,n,o),a=Vt(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,t,e,i,n,o))}W(0,["gg",2],0,function(){return this.weekYear()%100}),W(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ai("gggg","weekYear"),ai("ggggg","weekYear"),ai("GGGG","isoWeekYear"),ai("GGGGG","isoWeekYear"),F("weekYear","gg"),F("isoWeekYear","GG"),H("weekYear",1),H("isoWeekYear",1),ft("G",lt),ft("g",lt),ft("GG",et,Z),ft("gg",et,Z),ft("GGGG",rt,$),ft("gggg",rt,$),ft("GGGGG",at,tt),ft("ggggg",at,tt),yt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=C(t)}),yt(["gg","GG"],function(t,e,i,o){e[o]=n.parseTwoDigitYear(t)}),W("Q",0,"Qo","quarter"),F("quarter","Q"),H("quarter",7),ft("Q",Q),vt("Q",function(t,e){e[Et]=3*(C(t)-1)}),W("D",["DD",2],"Do","date"),F("date","D"),H("date",9),ft("D",et),ft("DD",et,Z),ft("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),vt(["D","DD"],wt),vt("Do",function(t,e){e[wt]=C(t.match(et)[0])});var li=Nt("Date",!0);W("DDD",["DDDD",3],"DDDo","dayOfYear"),F("dayOfYear","DDD"),H("dayOfYear",4),ft("DDD",ot),ft("DDDD",J),vt(["DDD","DDDD"],function(t,e,i){i._dayOfYear=C(t)}),W("m",["mm",2],0,"minute"),F("minute","m"),H("minute",14),ft("m",et),ft("mm",et,Z),vt(["m","mm"],St);var ui=Nt("Minutes",!1);W("s",["ss",2],0,"second"),F("second","s"),H("second",15),ft("s",et),ft("ss",et,Z),vt(["s","ss"],xt);var di,hi=Nt("Seconds",!1);for(W("S",0,0,function(){return~~(this.millisecond()/100)}),W(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,function(){return 10*this.millisecond()}),W(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),W(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),W(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),W(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),W(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),F("millisecond","ms"),H("millisecond",16),ft("S",ot,Q),ft("SS",ot,Z),ft("SSS",ot,J),di="SSSS";di.length<=9;di+="S")ft(di,st);function ci(t,e){e[Ct]=C(1e3*("0."+t))}for(di="S";di.length<=9;di+="S")vt(di,ci);var fi=Nt("Milliseconds",!1);W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var pi=w.prototype;function gi(t){return t}pi.add=ti,pi.calendar=function(t,e){var i=t||Ne(),o=Ye(i,this).startOf("day"),r=n.calendarFormat(this,o)||"sameElse",a=e&&(N(e[r])?e[r].call(this,i):e[r]);return this.format(a||this.localeData().calendar(r,this,Ne(i)))},pi.clone=function(){return new w(this)},pi.diff=function(t,e,i){var n,o,r;if(!this.isValid())return NaN;if(!(n=Ye(t,this)).isValid())return NaN;switch(o=6e4*(n.utcOffset()-this.utcOffset()),e=B(e)){case"year":r=ii(this,n)/12;break;case"month":r=ii(this,n);break;case"quarter":r=ii(this,n)/3;break;case"second":r=(this-n)/1e3;break;case"minute":r=(this-n)/6e4;break;case"hour":r=(this-n)/36e5;break;case"day":r=(this-n-o)/864e5;break;case"week":r=(this-n-o)/6048e5;break;default:r=this-n}return i?r:x(r)},pi.endOf=function(t){return void 0===(t=B(t))||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))},pi.format=function(t){t||(t=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var e=K(this,t);return this.localeData().postformat(e)},pi.from=function(t,e){return this.isValid()&&(S(t)&&t.isValid()||Ne(t).isValid())?Xe({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},pi.fromNow=function(t){return this.from(Ne(),t)},pi.to=function(t,e){return this.isValid()&&(S(t)&&t.isValid()||Ne(t).isValid())?Xe({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},pi.toNow=function(t){return this.to(Ne(),t)},pi.get=function(t){return N(this[t=B(t)])?this[t]():this},pi.invalidAt=function(){return p(this).overflow},pi.isAfter=function(t,e){var i=S(t)?t:Ne(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=B(a(e)?"millisecond":e))?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())},pi.isBefore=function(t,e){var i=S(t)?t:Ne(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=B(a(e)?"millisecond":e))?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())},pi.isBetween=function(t,e,i,n){return("("===(n=n||"()")[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))},pi.isSame=function(t,e){var i,n=S(t)?t:Ne(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=B(e||"millisecond"))?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))},pi.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},pi.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},pi.isValid=function(){return g(this)},pi.lang=oi,pi.locale=ni,pi.localeData=ri,pi.max=Pe,pi.min=ke,pi.parsingFlags=function(){return h({},p(this))},pi.set=function(t,e){if("object"===(void 0===t?"undefined":(0,T.default)(t)))for(var i=function(t){var e=[];for(var i in t)e.push({unit:i,priority:j[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}(t=U(t)),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit]);else if(N(this[t=B(t)]))return this[t](e);return this},pi.startOf=function(t){switch(t=B(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},pi.subtract=ei,pi.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},pi.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},pi.toDate=function(){return new Date(this.valueOf())},pi.toISOString=function(){if(!this.isValid())return null;var t=this.clone().utc();return t.year()<0||t.year()>9999?K(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(Date.prototype.toISOString)?this.toDate().toISOString():K(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},pi.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o=e+'[")]';return this.format(i+n+"-MM-DD[T]HH:mm:ss.SSS"+o)},pi.toJSON=function(){return this.isValid()?this.toISOString():null},pi.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},pi.unix=function(){return Math.floor(this.valueOf()/1e3)},pi.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},pi.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},pi.year=Rt,pi.isLeapYear=function(){return Ot(this.year())},pi.weekYear=function(t){return si.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},pi.isoWeekYear=function(t){return si.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},pi.quarter=pi.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},pi.month=Ht,pi.daysInMonth=function(){return Lt(this.year(),this.month())},pi.week=pi.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},pi.isoWeek=pi.isoWeeks=function(t){var e=Kt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},pi.weeksInYear=function(){var t=this.localeData()._week;return Xt(this.year(),t.dow,t.doy)},pi.isoWeeksInYear=function(){return Xt(this.year(),1,4)},pi.date=li,pi.day=pi.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},pi.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},pi.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},pi.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},pi.hour=pi.hours=se,pi.minute=pi.minutes=ui,pi.second=pi.seconds=hi,pi.millisecond=pi.milliseconds=fi,pi.utcOffset=function(t,e,i){var o,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=ze(dt,t)))return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&e&&(o=Ve(this)),this._offset=t,this._isUTC=!0,null!=o&&this.add(o,"m"),r!==t&&(!e||this._changeInProgress?$e(this,Xe(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:Ve(this)},pi.utc=function(t){return this.utcOffset(0,t)},pi.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ve(this),"m")),this},pi.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=ze(ut,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},pi.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Ne(t).utcOffset():0,(this.utcOffset()-t)%60==0)},pi.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},pi.isLocal=function(){return!!this.isValid()&&!this._isUTC},pi.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},pi.isUtc=qe,pi.isUTC=qe,pi.zoneAbbr=function(){return this._isUTC?"UTC":""},pi.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},pi.dates=M("dates accessor is deprecated. Use date instead.",li),pi.months=M("months accessor is deprecated. Use month instead",Ht),pi.years=M("years accessor is deprecated. Use year instead",Rt),pi.zone=M("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),pi.isDSTShifted=M("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var t={};if(_(t,this),(t=De(t))._a){var e=t._isUTC?f(t._a):Ne(t._a);this._isDSTShifted=this.isValid()&&I(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var mi=P.prototype;function vi(t,e,i,n){var o=ge(),r=f().set(n,e);return o[i](r,t)}function yi(t,e,i){if(s(t)&&(e=t,t=void 0),t=t||"",null!=e)return vi(t,e,i,"month");var n,o=[];for(n=0;n<12;n++)o[n]=vi(t,n,i,"month");return o}function _i(t,e,i,n){"boolean"==typeof t?(s(e)&&(i=e,e=void 0),e=e||""):(i=e=t,t=!1,s(e)&&(i=e,e=void 0),e=e||"");var o,r=ge(),a=t?r._week.dow:0;if(null!=i)return vi(e,(i+a)%7,n,"day");var l=[];for(o=0;o<7;o++)l[o]=vi(e,(o+a)%7,n,"day");return l}mi.calendar=function(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return N(n)?n.call(e,i):n},mi.longDateFormat=function(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},mi.invalidDate=function(){return this._invalidDate},mi.ordinal=function(t){return this._ordinal.replace("%d",t)},mi.preparse=gi,mi.postformat=gi,mi.relativeTime=function(t,e,i,n){var o=this._relativeTime[i];return N(o)?o(t,e,i,n):o.replace(/%d/i,t)},mi.pastFuture=function(t,e){var i=this._relativeTime[t>0?"future":"past"];return N(i)?i(e):i.replace(/%s/i,e)},mi.set=function(t){var e,i;for(i in t)N(e=t[i])?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},mi.months=function(t,e){return t?o(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Ft).test(e)?"format":"standalone"][t.month()]:o(this._months)?this._months:this._months.standalone},mi.monthsShort=function(t,e){return t?o(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Ft.test(e)?"format":"standalone"][t.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},mi.monthsParse=function(t,e,i){var n,o,r;if(this._monthsParseExact)return function(t,e,i){var n,o,r,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)r=f([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase();return i?"MMM"===e?-1!==(o=Dt.call(this._shortMonthsParse,a))?o:null:-1!==(o=Dt.call(this._longMonthsParse,a))?o:null:"MMM"===e?-1!==(o=Dt.call(this._shortMonthsParse,a))?o:-1!==(o=Dt.call(this._longMonthsParse,a))?o:null:-1!==(o=Dt.call(this._longMonthsParse,a))?o:-1!==(o=Dt.call(this._shortMonthsParse,a))?o:null}.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=f([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}},mi.monthsRegex=function(t){return this._monthsParseExact?(d(this,"_monthsRegex")||Yt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(d(this,"_monthsRegex")||(this._monthsRegex=zt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},mi.monthsShortRegex=function(t){return this._monthsParseExact?(d(this,"_monthsRegex")||Yt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(d(this,"_monthsShortRegex")||(this._monthsShortRegex=Gt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},mi.week=function(t){return Kt(t,this._week.dow,this._week.doy).week},mi.firstDayOfYear=function(){return this._week.doy},mi.firstDayOfWeek=function(){return this._week.dow},mi.weekdays=function(t,e){return t?o(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:o(this._weekdays)?this._weekdays:this._weekdays.standalone},mi.weekdaysMin=function(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin},mi.weekdaysShort=function(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort},mi.weekdaysParse=function(t,e,i){var n,o,r;if(this._weekdaysParseExact)return function(t,e,i){var n,o,r,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)r=f([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase();return i?"dddd"===e?-1!==(o=Dt.call(this._weekdaysParse,a))?o:null:"ddd"===e?-1!==(o=Dt.call(this._shortWeekdaysParse,a))?o:null:-1!==(o=Dt.call(this._minWeekdaysParse,a))?o:null:"dddd"===e?-1!==(o=Dt.call(this._weekdaysParse,a))?o:-1!==(o=Dt.call(this._shortWeekdaysParse,a))?o:-1!==(o=Dt.call(this._minWeekdaysParse,a))?o:null:"ddd"===e?-1!==(o=Dt.call(this._shortWeekdaysParse,a))?o:-1!==(o=Dt.call(this._weekdaysParse,a))?o:-1!==(o=Dt.call(this._minWeekdaysParse,a))?o:null:-1!==(o=Dt.call(this._minWeekdaysParse,a))?o:-1!==(o=Dt.call(this._weekdaysParse,a))?o:-1!==(o=Dt.call(this._shortWeekdaysParse,a))?o:null}.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(o=f([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(r="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}},mi.weekdaysRegex=function(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ie.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(d(this,"_weekdaysRegex")||(this._weekdaysRegex=$t),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},mi.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ie.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=te),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},mi.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ie.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ee),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},mi.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},mi.meridiem=function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},fe("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===C(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),n.lang=M("moment.lang is deprecated. Use moment.locale instead.",fe),n.langData=M("moment.langData is deprecated. Use moment.localeData instead.",ge);var bi=Math.abs;function Ei(t,e,i,n){var o=Xe(e,i);return t._milliseconds+=n*o._milliseconds,t._days+=n*o._days,t._months+=n*o._months,t._bubble()}function wi(t){return t<0?Math.floor(t):Math.ceil(t)}function Ti(t){return 4800*t/146097}function Si(t){return 146097*t/4800}function xi(t){return function(){return this.as(t)}}var Ci=xi("ms"),Ii=xi("s"),Ai=xi("m"),Mi=xi("h"),Oi=xi("d"),Di=xi("w"),Ri=xi("M"),Ni=xi("y");function ki(t){return function(){return this.isValid()?this._data[t]:NaN}}var Pi=ki("milliseconds"),Li=ki("seconds"),Fi=ki("minutes"),Bi=ki("hours"),Ui=ki("days"),ji=ki("months"),Hi=ki("years"),Gi=Math.round,zi={ss:44,s:45,m:45,h:22,d:26,M:11},Yi=Math.abs;function Vi(t){return(t>0)-(t<0)||+t}function qi(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i=Yi(this._milliseconds)/1e3,n=Yi(this._days),o=Yi(this._months);t=x(i/60),e=x(t/60),i%=60,t%=60;var r=x(o/12),a=o%=12,s=n,l=e,u=t,d=i?i.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var c=h<0?"-":"",f=Vi(this._months)!==Vi(h)?"-":"",p=Vi(this._days)!==Vi(h)?"-":"",g=Vi(this._milliseconds)!==Vi(h)?"-":"";return c+"P"+(r?f+r+"Y":"")+(a?f+a+"M":"")+(s?p+s+"D":"")+(l||u||d?"T":"")+(l?g+l+"H":"")+(u?g+u+"M":"")+(d?g+d+"S":"")}var Wi=Be.prototype;return Wi.isValid=function(){return this._isValid},Wi.abs=function(){var t=this._data;return this._milliseconds=bi(this._milliseconds),this._days=bi(this._days),this._months=bi(this._months),t.milliseconds=bi(t.milliseconds),t.seconds=bi(t.seconds),t.minutes=bi(t.minutes),t.hours=bi(t.hours),t.months=bi(t.months),t.years=bi(t.years),this},Wi.add=function(t,e){return Ei(this,t,e,1)},Wi.subtract=function(t,e){return Ei(this,t,e,-1)},Wi.as=function(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=B(t))||"year"===t)return e=this._days+n/864e5,i=this._months+Ti(e),"month"===t?i:i/12;switch(e=this._days+Math.round(Si(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}},Wi.asMilliseconds=Ci,Wi.asSeconds=Ii,Wi.asMinutes=Ai,Wi.asHours=Mi,Wi.asDays=Oi,Wi.asWeeks=Di,Wi.asMonths=Ri,Wi.asYears=Ni,Wi.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*C(this._months/12):NaN},Wi._bubble=function(){var t,e,i,n,o,r=this._milliseconds,a=this._days,s=this._months,l=this._data;return r>=0&&a>=0&&s>=0||r<=0&&a<=0&&s<=0||(r+=864e5*wi(Si(s)+a),a=0,s=0),l.milliseconds=r%1e3,t=x(r/1e3),l.seconds=t%60,e=x(t/60),l.minutes=e%60,i=x(e/60),l.hours=i%24,a+=x(i/24),o=x(Ti(a)),s+=o,a-=wi(Si(o)),n=x(s/12),s%=12,l.days=a,l.months=s,l.years=n,this},Wi.clone=function(){return Xe(this)},Wi.get=function(t){return t=B(t),this.isValid()?this[t+"s"]():NaN},Wi.milliseconds=Pi,Wi.seconds=Li,Wi.minutes=Fi,Wi.hours=Bi,Wi.days=Ui,Wi.weeks=function(){return x(this.days()/7)},Wi.months=ji,Wi.years=Hi,Wi.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=function(t,e,i){var n=Xe(t).abs(),o=Gi(n.as("s")),r=Gi(n.as("m")),a=Gi(n.as("h")),s=Gi(n.as("d")),l=Gi(n.as("M")),u=Gi(n.as("y")),d=o<=zi.ss&&["s",o]||o<zi.s&&["ss",o]||r<=1&&["m"]||r<zi.m&&["mm",r]||a<=1&&["h"]||a<zi.h&&["hh",a]||s<=1&&["d"]||s<zi.d&&["dd",s]||l<=1&&["M"]||l<zi.M&&["MM",l]||u<=1&&["y"]||["yy",u];return d[2]=e,d[3]=+t>0,d[4]=i,function(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}.apply(null,d)}(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)},Wi.toISOString=qi,Wi.toString=qi,Wi.toJSON=qi,Wi.locale=ni,Wi.localeData=ri,Wi.toIsoString=M("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",qi),Wi.lang=oi,W("X",0,0,"unix"),W("x",0,0,"valueOf"),ft("x",lt),ft("X",/[+-]?\d+(\.\d{1,3})?/),vt("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),vt("x",function(t,e,i){i._d=new Date(C(t))}),n.version="2.19.1",e=Ne,n.fn=pi,n.min=function(){return Le("isBefore",[].slice.call(arguments,0))},n.max=function(){return Le("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=f,n.unix=function(t){return Ne(1e3*t)},n.months=function(t,e){return yi(t,e,"months")},n.isDate=l,n.locale=fe,n.invalid=m,n.duration=Xe,n.isMoment=S,n.weekdays=function(t,e,i){return _i(t,e,i,"weekdays")},n.parseZone=function(){return Ne.apply(null,arguments).parseZone()},n.localeData=ge,n.isDuration=Ue,n.monthsShort=function(t,e){return yi(t,e,"monthsShort")},n.weekdaysMin=function(t,e,i){return _i(t,e,i,"weekdaysMin")},n.defineLocale=pe,n.updateLocale=function(t,e){if(null!=e){var i,n=le;null!=ue[t]&&(n=ue[t]._config),e=k(n,e),(i=new P(e)).parentLocale=ue[t],ue[t]=i,fe(t)}else null!=ue[t]&&(null!=ue[t].parentLocale?ue[t]=ue[t].parentLocale:null!=ue[t]&&delete ue[t]);return ue[t]},n.locales=function(){return O(ue)},n.weekdaysShort=function(t,e,i){return _i(t,e,i,"weekdaysShort")},n.normalizeUnits=B,n.relativeTimeRounding=function(t){return void 0===t?Gi:"function"==typeof t&&(Gi=t,!0)},n.relativeTimeThreshold=function(t,e){return void 0!==zi[t]&&(void 0===e?zi[t]:(zi[t]=e,"s"===t&&(zi.ss=e-1),!0))},n.calendarFormat=function(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},n.prototype=pi,n}()}).call(e,i(155)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){function i(t){throw new Error("Cannot find module '"+t+"'.")}i.keys=function(){return[]},i.resolve=i,t.exports=i,i.id=156},function(t,e,i){(function(e){var i,n="undefined"!=typeof window?window:void 0!==e?e:null;if(n&&n.crypto&&crypto.getRandomValues){var o=new Uint8Array(16);i=function(){return crypto.getRandomValues(o),o}}if(!i){var r=new Array(16);i=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}for(var a=[],s={},l=0;l<256;l++)a[l]=(l+256).toString(16).substr(1),s[a[l]]=l;function u(t,e){var i=e||0,n=a;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}var d=i(),h=[1|d[0],d[1],d[2],d[3],d[4],d[5]],c=16383&(d[6]<<8|d[7]),f=0,p=0;function g(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var a=0;a<16;a++)e[o+a]=r[a];return e||u(r)}var m=g;m.v1=function(t,e,i){var n=e&&i||0,o=e||[],r=void 0!==(t=t||{}).clockseq?t.clockseq:c,a=void 0!==t.msecs?t.msecs:(new Date).getTime(),s=void 0!==t.nsecs?t.nsecs:p+1,l=a-f+(s-p)/1e4;if(l<0&&void 0===t.clockseq&&(r=r+1&16383),(l<0||a>f)&&void 0===t.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=a,p=s,c=r;var d=(1e4*(268435455&(a+=122192928e5))+s)%4294967296;o[n++]=d>>>24&255,o[n++]=d>>>16&255,o[n++]=d>>>8&255,o[n++]=255&d;var g=a/4294967296*1e4&268435455;o[n++]=g>>>8&255,o[n++]=255&g,o[n++]=g>>>24&15|16,o[n++]=g>>>16&255,o[n++]=r>>>8|128,o[n++]=255&r;for(var m=t.node||h,v=0;v<6;v++)o[n+v]=m[v];return e||u(o)},m.v4=g,m.parse=function(t,e,i){var n=e&&i||0,o=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){o<16&&(e[n+o++]=s[t])});o<16;)e[n+o++]=0;return e},m.unparse=u,t.exports=m}).call(e,i(158))},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":(0,T.default)(window))&&(i=window)}t.exports=i},function(t,e,i){e.util=i(2),e.DOMutil=i(14),e.DataSet=i(11),e.DataView=i(12),e.Queue=i(43),e.Graph3d=i(161),e.graph3d={Camera:i(95),Filter:i(96),Point2d:i(91),Point3d:i(34),Slider:i(92),StepNumber:i(93)},e.moment=i(9),e.Hammer=i(10),e.keycharm=i(35)},function(t,e,i){var n=i(7),o=n.JSON||(n.JSON={stringify:h.default});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,e,i){var n,o=i(90),r=(n=o)&&n.__esModule?n:{default:n},a=i(44),s=i(2),l=i(34),u=i(91),d=i(92),h=i(93),c=i(94),f=i(15).default,p=i(15).printStyle,g=i(172).allOptions,m=i(173);function v(t,e,i){if(!(this instanceof v))throw new SyntaxError("Constructor must be called with the new operator");this.containerElement=t,this.dataGroup=new m,this.dataPoints=null,this.create(),c.setDefaults(v.DEFAULTS,this),this.colX=void 0,this.colY=void 0,this.colZ=void 0,this.colValue=void 0,this.setOptions(i),this.setData(e)}function y(t){return"clientX"in t?t.clientX:t.targetTouches[0]&&t.targetTouches[0].clientX||0}function _(t){return"clientY"in t?t.clientY:t.targetTouches[0]&&t.targetTouches[0].clientY||0}v.STYLE=c.STYLE,v.DEFAULTS={width:"400px",height:"400px",filterLabel:"time",legendLabel:"value",xLabel:"x",yLabel:"y",zLabel:"z",xValueLabel:function(t){return t},yValueLabel:function(t){return t},zValueLabel:function(t){return t},showXAxis:!0,showYAxis:!0,showZAxis:!0,showGrid:!0,showPerspective:!0,showShadow:!1,keepAspectRatio:!0,verticalRatio:.5,dotSizeRatio:.02,dotSizeMinFraction:.5,dotSizeMaxFraction:2.5,showAnimationControls:void 0,animationInterval:1e3,animationPreload:!1,animationAutoStart:void 0,axisColor:"#4D4D4D",gridColor:"#D3D3D3",xCenter:"55%",yCenter:"50%",style:v.STYLE.DOT,tooltip:!1,tooltipStyle:{content:{padding:"10px",border:"1px solid #4d4d4d",color:"#1a1a1a",background:"rgba(255,255,255,0.7)",borderRadius:"2px",boxShadow:"5px 5px 10px rgba(128,128,128,0.5)"},line:{height:"40px",width:"0",borderLeft:"1px solid #4d4d4d"},dot:{height:"0",width:"0",border:"5px solid #4d4d4d",borderRadius:"5px"}},dataColor:{fill:"#7DC1FF",stroke:"#3267D2",strokeWidth:1},cameraPosition:{horizontal:1,vertical:.5,distance:1.7},showLegend:void 0,backgroundColor:void 0,xBarWidth:void 0,yBarWidth:void 0,valueMin:void 0,valueMax:void 0,xMin:void 0,xMax:void 0,xStep:void 0,yMin:void 0,yMax:void 0,yStep:void 0,zMin:void 0,zMax:void 0,zStep:void 0},a(v.prototype),v.prototype._setScale=function(){this.scale=new l(1/this.xRange.range(),1/this.yRange.range(),1/this.zRange.range()),this.keepAspectRatio&&(this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y),this.scale.z*=this.verticalRatio,void 0!==this.valueRange&&(this.scale.value=1/this.valueRange.range());var t=this.xRange.center()*this.scale.x,e=this.yRange.center()*this.scale.y,i=this.zRange.center()*this.scale.z;this.camera.setArmLocation(t,e,i)},v.prototype._convert3Dto2D=function(t){var e=this._convertPointToTranslation(t);return this._convertTranslationToScreen(e)},v.prototype._convertPointToTranslation=function(t){var e=this.camera.getCameraLocation(),i=this.camera.getCameraRotation(),n=t.x*this.scale.x,o=t.y*this.scale.y,r=t.z*this.scale.z,a=e.x,s=e.y,u=e.z,d=Math.sin(i.x),h=Math.cos(i.x),c=Math.sin(i.y),f=Math.cos(i.y),p=Math.sin(i.z),g=Math.cos(i.z);return new l(f*(p*(o-s)+g*(n-a))-c*(r-u),d*(f*(r-u)+c*(p*(o-s)+g*(n-a)))+h*(g*(o-s)-p*(n-a)),h*(f*(r-u)+c*(p*(o-s)+g*(n-a)))-d*(g*(o-s)-p*(n-a)))},v.prototype._convertTranslationToScreen=function(t){var e,i,n=this.eye.x,o=this.eye.y,r=this.eye.z,a=t.x,s=t.y,l=t.z;return this.showPerspective?(e=r/l*(a-n),i=r/l*(s-o)):(e=a*(-r/this.camera.getArmLength()),i=s*(-r/this.camera.getArmLength())),new u(this.currentXCenter+e*this.frame.canvas.clientWidth,this.currentYCenter-i*this.frame.canvas.clientWidth)},v.prototype._calcTranslations=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.trans=this._convertPointToTranslation(i.point),i.screen=this._convertTranslationToScreen(i.trans);var n=this._convertPointToTranslation(i.bottom);i.dist=this.showPerspective?n.length():-n.z}t.sort(function(t,e){return e.dist-t.dist})},v.prototype._initializeRanges=function(){var t=this.dataGroup;this.xRange=t.xRange,this.yRange=t.yRange,this.zRange=t.zRange,this.valueRange=t.valueRange,this.xStep=t.xStep,this.yStep=t.yStep,this.zStep=t.zStep,this.xBarWidth=t.xBarWidth,this.yBarWidth=t.yBarWidth,this.colX=t.colX,this.colY=t.colY,this.colZ=t.colZ,this.colValue=t.colValue,this._setScale()},v.prototype.getDataPoints=function(t){for(var e=[],i=0;i<t.length;i++){var n=new l;n.x=t[i][this.colX]||0,n.y=t[i][this.colY]||0,n.z=t[i][this.colZ]||0,n.data=t[i],void 0!==this.colValue&&(n.value=t[i][this.colValue]||0);var o={};o.point=n,o.bottom=new l(n.x,n.y,this.zRange.min),o.trans=void 0,o.screen=void 0,e.push(o)}return e},v.prototype._getDataPoints=function(t){var e,i,n,o,r=[];if(this.style===v.STYLE.GRID||this.style===v.STYLE.SURFACE){var a=this.dataGroup.getDistinctValues(this.colX,t),s=this.dataGroup.getDistinctValues(this.colY,t);r=this.getDataPoints(t);var l=[];for(n=0;n<r.length;n++){o=r[n];var u=a.indexOf(o.point.x),d=s.indexOf(o.point.y);void 0===l[u]&&(l[u]=[]),l[u][d]=o}for(e=0;e<l.length;e++)for(i=0;i<l[e].length;i++)l[e][i]&&(l[e][i].pointRight=e<l.length-1?l[e+1][i]:void 0,l[e][i].pointTop=i<l[e].length-1?l[e][i+1]:void 0,l[e][i].pointCross=e<l.length-1&&i<l[e].length-1?l[e+1][i+1]:void 0)}else if(this._checkValueField(t),r=this.getDataPoints(t),this.style===v.STYLE.LINE)for(n=0;n<r.length;n++)n>0&&(r[n-1].pointNext=r[n]);return r},v.prototype.create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div"),this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas);var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t),this.frame.filter=document.createElement("div"),this.frame.filter.style.position="absolute",this.frame.filter.style.bottom="0px",this.frame.filter.style.left="0px",this.frame.filter.style.width="100%",this.frame.appendChild(this.frame.filter);var e=this;s.addEventListener(this.frame.canvas,"mousedown",function(t){e._onMouseDown(t)}),s.addEventListener(this.frame.canvas,"touchstart",function(t){e._onTouchStart(t)}),s.addEventListener(this.frame.canvas,"mousewheel",function(t){e._onWheel(t)}),s.addEventListener(this.frame.canvas,"mousemove",function(t){e._onTooltip(t)}),s.addEventListener(this.frame.canvas,"click",function(t){e._onClick(t)}),this.containerElement.appendChild(this.frame)},v.prototype._setSize=function(t,e){this.frame.style.width=t,this.frame.style.height=e,this._resizeCanvas()},v.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,this.frame.filter.style.width=this.frame.canvas.clientWidth-20+"px"},v.prototype.animationStart=function(){if(this.animationAutoStart&&this.dataGroup.dataFilter){if(!this.frame.filter||!this.frame.filter.slider)throw new Error("No animation available");this.frame.filter.slider.play()}},v.prototype.animationStop=function(){this.frame.filter&&this.frame.filter.slider&&this.frame.filter.slider.stop()},v.prototype._resizeCenter=function(){"%"===this.xCenter.charAt(this.xCenter.length-1)?this.currentXCenter=parseFloat(this.xCenter)/100*this.frame.canvas.clientWidth:this.currentXCenter=parseFloat(this.xCenter),"%"===this.yCenter.charAt(this.yCenter.length-1)?this.currentYCenter=parseFloat(this.yCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight):this.currentYCenter=parseFloat(this.yCenter)},v.prototype.getCameraPosition=function(){var t=this.camera.getArmRotation();return t.distance=this.camera.getArmLength(),t},v.prototype._readData=function(t){this.dataPoints=this.dataGroup.initializeData(this,t,this.style),this._initializeRanges(),this._redrawFilter()},v.prototype.setData=function(t){null!=t&&(this._readData(t),this.redraw(),this.animationStart())},v.prototype.setOptions=function(t){void 0!==t&&(!0===f.validate(t,g)&&console.log("%cErrors have been found in the supplied options object.",p),this.animationStop(),c.setOptions(t,this),this.setPointDrawingMethod(),this._setSize(this.width,this.height),this.setData(this.dataGroup.getDataTable()),this.animationStart())},v.prototype.setPointDrawingMethod=function(){var t=void 0;switch(this.style){case v.STYLE.BAR:t=v.prototype._redrawBarGraphPoint;break;case v.STYLE.BARCOLOR:t=v.prototype._redrawBarColorGraphPoint;break;case v.STYLE.BARSIZE:t=v.prototype._redrawBarSizeGraphPoint;break;case v.STYLE.DOT:t=v.prototype._redrawDotGraphPoint;break;case v.STYLE.DOTLINE:t=v.prototype._redrawDotLineGraphPoint;break;case v.STYLE.DOTCOLOR:t=v.prototype._redrawDotColorGraphPoint;break;case v.STYLE.DOTSIZE:t=v.prototype._redrawDotSizeGraphPoint;break;case v.STYLE.SURFACE:t=v.prototype._redrawSurfaceGraphPoint;break;case v.STYLE.GRID:t=v.prototype._redrawGridGraphPoint;break;case v.STYLE.LINE:t=v.prototype._redrawLineGraphPoint;break;default:throw new Error("Can not determine point drawing method for graph style '"+this.style+"'")}this._pointDrawingMethod=t},v.prototype.redraw=function(){if(void 0===this.dataPoints)throw new Error("Graph data not initialized");this._resizeCanvas(),this._resizeCenter(),this._redrawSlider(),this._redrawClear(),this._redrawAxis(),this._redrawDataGraph(),this._redrawInfo(),this._redrawLegend()},v.prototype._getContext=function(){var t=this.frame.canvas.getContext("2d");return t.lineJoin="round",t.lineCap="round",t},v.prototype._redrawClear=function(){var t=this.frame.canvas;t.getContext("2d").clearRect(0,0,t.width,t.height)},v.prototype._dotSize=function(){return this.frame.clientWidth*this.dotSizeRatio},v.prototype._getLegendWidth=function(){return this.style===v.STYLE.DOTSIZE?this._dotSize()*this.dotSizeMaxFraction:this.style===v.STYLE.BARSIZE?this.xBarWidth:20},v.prototype._redrawLegend=function(){if(!0===this.showLegend&&this.style!==v.STYLE.LINE&&this.style!==v.STYLE.BARSIZE){var t=this.style===v.STYLE.BARSIZE||this.style===v.STYLE.DOTSIZE,e=this.style===v.STYLE.DOTSIZE||this.style===v.STYLE.DOTCOLOR||this.style===v.STYLE.BARCOLOR,i=Math.max(.25*this.frame.clientHeight,100),n=this.margin,o=this._getLegendWidth(),r=this.frame.clientWidth-this.margin,a=r-o,s=n+i,l=this._getContext();if(l.lineWidth=1,l.font="14px arial",!1===t){var d,c=i;for(d=0;d<c;d++){var f=(d-0)/(c-0)*240,p=this._hsv2rgb(f,1,1);l.strokeStyle=p,l.beginPath(),l.moveTo(a,n+d),l.lineTo(r,n+d),l.stroke()}l.strokeStyle=this.axisColor,l.strokeRect(a,n,o,i)}else{var g;this.style===v.STYLE.DOTSIZE?g=o*(this.dotSizeMinFraction/this.dotSizeMaxFraction):(this.style,v.STYLE.BARSIZE),l.strokeStyle=this.axisColor,l.fillStyle=this.dataColor.fill,l.beginPath(),l.moveTo(a,n),l.lineTo(r,n),l.lineTo(a+g,s),l.lineTo(a,s),l.closePath(),l.fill(),l.stroke()}var m,y,_=e?this.valueRange.min:this.zRange.min,b=e?this.valueRange.max:this.zRange.max,E=new h(_,b,(b-_)/5,!0);for(E.start(!0);!E.end();)d=s-(E.getCurrent()-_)/(b-_)*i,m=new u(a-5,d),y=new u(a,d),this._line(l,m,y),l.textAlign="right",l.textBaseline="middle",l.fillStyle=this.axisColor,l.fillText(E.getCurrent(),a-10,d),E.next();l.textAlign="right",l.textBaseline="top";var w=this.legendLabel;l.fillText(w,r,s+this.margin)}},v.prototype._redrawFilter=function(){var t=this.dataGroup.dataFilter,e=this.frame.filter;if(e.innerHTML="",t){var i={visible:this.showAnimationControls},n=new d(e,i);e.slider=n,e.style.padding="10px",n.setValues(t.values),n.setPlayInterval(this.animationInterval);var o=this;n.setOnChangeCallback(function(){var t=o.dataGroup.dataFilter,e=n.getIndex();t.selectValue(e),o.dataPoints=t._getDataPoints(),o.redraw()})}else e.slider=void 0},v.prototype._redrawSlider=function(){void 0!==this.frame.filter.slider&&this.frame.filter.slider.redraw()},v.prototype._redrawInfo=function(){var t=this.dataGroup.getInfo();if(void 0!==t){var e=this._getContext();e.font="14px arial",e.lineStyle="gray",e.fillStyle="gray",e.textAlign="left",e.textBaseline="top";var i=this.margin,n=this.margin;e.fillText(t,i,n)}},v.prototype._line=function(t,e,i,n){void 0!==n&&(t.strokeStyle=n),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(i.x,i.y),t.stroke()},v.prototype.drawAxisLabelX=function(t,e,i,n,o){void 0===o&&(o=0);var r=this._convert3Dto2D(e);Math.cos(2*n)>0?(t.textAlign="center",t.textBaseline="top",r.y+=o):Math.sin(2*n)<0?(t.textAlign="right",t.textBaseline="middle"):(t.textAlign="left",t.textBaseline="middle"),t.fillStyle=this.axisColor,t.fillText(i,r.x,r.y)},v.prototype.drawAxisLabelY=function(t,e,i,n,o){void 0===o&&(o=0);var r=this._convert3Dto2D(e);Math.cos(2*n)<0?(t.textAlign="center",t.textBaseline="top",r.y+=o):Math.sin(2*n)>0?(t.textAlign="right",t.textBaseline="middle"):(t.textAlign="left",t.textBaseline="middle"),t.fillStyle=this.axisColor,t.fillText(i,r.x,r.y)},v.prototype.drawAxisLabelZ=function(t,e,i,n){void 0===n&&(n=0);var o=this._convert3Dto2D(e);t.textAlign="right",t.textBaseline="middle",t.fillStyle=this.axisColor,t.fillText(i,o.x-n,o.y)},v.prototype._line3d=function(t,e,i,n){var o=this._convert3Dto2D(e),r=this._convert3Dto2D(i);this._line(t,o,r,n)},v.prototype._redrawAxis=function(){var t,e,i,n,o,r,a,s,d,c,f=this._getContext();f.font=24/this.camera.getArmLength()+"px arial";var p,g,m,v=.025/this.scale.x,y=.025/this.scale.y,_=5/this.camera.getArmLength(),b=this.camera.getArmRotation().horizontal,E=new u(Math.cos(b),Math.sin(b)),w=this.xRange,T=this.yRange,S=this.zRange;for(f.lineWidth=1,n=void 0===this.defaultXStep,(i=new h(w.min,w.max,this.xStep,n)).start(!0);!i.end();){var x=i.getCurrent();if(this.showGrid?(t=new l(x,T.min,S.min),e=new l(x,T.max,S.min),this._line3d(f,t,e,this.gridColor)):this.showXAxis&&(t=new l(x,T.min,S.min),e=new l(x,T.min+v,S.min),this._line3d(f,t,e,this.axisColor),t=new l(x,T.max,S.min),e=new l(x,T.max-v,S.min),this._line3d(f,t,e,this.axisColor)),this.showXAxis){a=E.x>0?T.min:T.max,p=new l(x,a,S.min);var C="  "+this.xValueLabel(x)+"  ";this.drawAxisLabelX(f,p,C,b,_)}i.next()}for(f.lineWidth=1,n=void 0===this.defaultYStep,(i=new h(T.min,T.max,this.yStep,n)).start(!0);!i.end();){var I=i.getCurrent();if(this.showGrid?(t=new l(w.min,I,S.min),e=new l(w.max,I,S.min),this._line3d(f,t,e,this.gridColor)):this.showYAxis&&(t=new l(w.min,I,S.min),e=new l(w.min+y,I,S.min),this._line3d(f,t,e,this.axisColor),t=new l(w.max,I,S.min),e=new l(w.max-y,I,S.min),this._line3d(f,t,e,this.axisColor)),this.showYAxis){r=E.y>0?w.min:w.max,p=new l(r,I,S.min);var A="  "+this.yValueLabel(I)+"  ";this.drawAxisLabelY(f,p,A,b,_)}i.next()}if(this.showZAxis){for(f.lineWidth=1,n=void 0===this.defaultZStep,(i=new h(S.min,S.max,this.zStep,n)).start(!0),r=E.x>0?w.min:w.max,a=E.y<0?T.min:T.max;!i.end();){var M=i.getCurrent(),O=new l(r,a,M),D=this._convert3Dto2D(O);e=new u(D.x-_,D.y),this._line(f,D,e,this.axisColor);var R=this.zValueLabel(M)+" ";this.drawAxisLabelZ(f,O,R,5),i.next()}f.lineWidth=1,t=new l(r,a,S.min),e=new l(r,a,S.max),this._line3d(f,t,e,this.axisColor)}this.showXAxis&&(f.lineWidth=1,g=new l(w.min,T.min,S.min),m=new l(w.max,T.min,S.min),this._line3d(f,g,m,this.axisColor),g=new l(w.min,T.max,S.min),m=new l(w.max,T.max,S.min),this._line3d(f,g,m,this.axisColor)),this.showYAxis&&(f.lineWidth=1,t=new l(w.min,T.min,S.min),e=new l(w.min,T.max,S.min),this._line3d(f,t,e,this.axisColor),t=new l(w.max,T.min,S.min),e=new l(w.max,T.max,S.min),this._line3d(f,t,e,this.axisColor));var N=this.xLabel;N.length>0&&this.showXAxis&&(c=.1/this.scale.y,r=(w.max+3*w.min)/4,a=E.x>0?T.min-c:T.max+c,o=new l(r,a,S.min),this.drawAxisLabelX(f,o,N,b));var k=this.yLabel;k.length>0&&this.showYAxis&&(d=.1/this.scale.x,r=E.y>0?w.min-d:w.max+d,a=(T.max+3*T.min)/4,o=new l(r,a,S.min),this.drawAxisLabelY(f,o,k,b));var P=this.zLabel;P.length>0&&this.showZAxis&&(r=E.x>0?w.min:w.max,a=E.y<0?T.min:T.max,s=(S.max+3*S.min)/4,o=new l(r,a,s),this.drawAxisLabelZ(f,o,P,30))},v.prototype._hsv2rgb=function(t,e,i){var n,o,r,a,s,l;switch(a=i*e,s=Math.floor(t/60),l=a*(1-Math.abs(t/60%2-1)),s){case 0:n=a,o=l,r=0;break;case 1:n=l,o=a,r=0;break;case 2:n=0,o=a,r=l;break;case 3:n=0,o=l,r=a;break;case 4:n=l,o=0,r=a;break;case 5:n=a,o=0,r=l;break;default:n=0,o=0,r=0}return"RGB("+parseInt(255*n)+","+parseInt(255*o)+","+parseInt(255*r)+")"},v.prototype._getStrokeWidth=function(t){return void 0!==t?this.showPerspective?1/-t.trans.z*this.dataColor.strokeWidth:-this.eye.z/this.camera.getArmLength()*this.dataColor.strokeWidth:this.dataColor.strokeWidth},v.prototype._redrawBar=function(t,e,i,n,o,r){var a,s=this,u=e.point,d=this.zRange.min,h=[{point:new l(u.x-i,u.y-n,u.z)},{point:new l(u.x+i,u.y-n,u.z)},{point:new l(u.x+i,u.y+n,u.z)},{point:new l(u.x-i,u.y+n,u.z)}],c=[{point:new l(u.x-i,u.y-n,d)},{point:new l(u.x+i,u.y-n,d)},{point:new l(u.x+i,u.y+n,d)},{point:new l(u.x-i,u.y+n,d)}];h.forEach(function(t){t.screen=s._convert3Dto2D(t.point)}),c.forEach(function(t){t.screen=s._convert3Dto2D(t.point)});var f=[{corners:h,center:l.avg(c[0].point,c[2].point)},{corners:[h[0],h[1],c[1],c[0]],center:l.avg(c[1].point,c[0].point)},{corners:[h[1],h[2],c[2],c[1]],center:l.avg(c[2].point,c[1].point)},{corners:[h[2],h[3],c[3],c[2]],center:l.avg(c[3].point,c[2].point)},{corners:[h[3],h[0],c[0],c[3]],center:l.avg(c[0].point,c[3].point)}];e.surfaces=f;for(var p=0;p<f.length;p++){a=f[p];var g=this._convertPointToTranslation(a.center);a.dist=this.showPerspective?g.length():-g.z}f.sort(function(t,e){var i=e.dist-t.dist;return i||(t.corners===h?1:e.corners===h?-1:0)}),t.lineWidth=this._getStrokeWidth(e),t.strokeStyle=r,t.fillStyle=o;for(var m=2;m<f.length;m++)a=f[m],this._polygon(t,a.corners)},v.prototype._polygon=function(t,e,i,n){if(!(e.length<2)){void 0!==i&&(t.fillStyle=i),void 0!==n&&(t.strokeStyle=n),t.beginPath(),t.moveTo(e[0].screen.x,e[0].screen.y);for(var o=1;o<e.length;++o){var r=e[o];t.lineTo(r.screen.x,r.screen.y)}t.closePath(),t.fill(),t.stroke()}},v.prototype._drawCircle=function(t,e,i,n,o){var r=this._calcRadius(e,o);t.lineWidth=this._getStrokeWidth(e),t.strokeStyle=n,t.fillStyle=i,t.beginPath(),t.arc(e.screen.x,e.screen.y,r,0,2*Math.PI,!0),t.fill(),t.stroke()},v.prototype._getColorsRegular=function(t){var e=240*(1-(t.point.z-this.zRange.min)*this.scale.z/this.verticalRatio);return{fill:this._hsv2rgb(e,1,1),border:this._hsv2rgb(e,1,.8)}},v.prototype._getColorsColor=function(t){var e,i;if("string"==typeof t.point.value)e=t.point.value,i=t.point.value;else{var n=240*(1-(t.point.value-this.valueRange.min)*this.scale.value);e=this._hsv2rgb(n,1,1),i=this._hsv2rgb(n,1,.8)}return{fill:e,border:i}},v.prototype._getColorsSize=function(){return{fill:this.dataColor.fill,border:this.dataColor.stroke}},v.prototype._calcRadius=function(t,e){var i;return void 0===e&&(e=this._dotSize()),(i=this.showPerspective?e/-t.trans.z:e*(-this.eye.z/this.camera.getArmLength()))<0&&(i=0),i},v.prototype._redrawBarGraphPoint=function(t,e){var i=this.xBarWidth/2,n=this.yBarWidth/2,o=this._getColorsRegular(e);this._redrawBar(t,e,i,n,o.fill,o.border)},v.prototype._redrawBarColorGraphPoint=function(t,e){var i=this.xBarWidth/2,n=this.yBarWidth/2,o=this._getColorsColor(e);this._redrawBar(t,e,i,n,o.fill,o.border)},v.prototype._redrawBarSizeGraphPoint=function(t,e){var i=(e.point.value-this.valueRange.min)/this.valueRange.range(),n=this.xBarWidth/2*(.8*i+.2),o=this.yBarWidth/2*(.8*i+.2),r=this._getColorsSize();this._redrawBar(t,e,n,o,r.fill,r.border)},v.prototype._redrawDotGraphPoint=function(t,e){var i=this._getColorsRegular(e);this._drawCircle(t,e,i.fill,i.border)},v.prototype._redrawDotLineGraphPoint=function(t,e){var i=this._convert3Dto2D(e.bottom);t.lineWidth=1,this._line(t,i,e.screen,this.gridColor),this._redrawDotGraphPoint(t,e)},v.prototype._redrawDotColorGraphPoint=function(t,e){var i=this._getColorsColor(e);this._drawCircle(t,e,i.fill,i.border)},v.prototype._redrawDotSizeGraphPoint=function(t,e){var i=this._dotSize(),n=(e.point.value-this.valueRange.min)/this.valueRange.range(),o=i*this.dotSizeMinFraction,r=o+(i*this.dotSizeMaxFraction-o)*n,a=this._getColorsSize();this._drawCircle(t,e,a.fill,a.border,r)},v.prototype._redrawSurfaceGraphPoint=function(t,e){var i=e.pointRight,n=e.pointTop,o=e.pointCross;if(void 0!==e&&void 0!==i&&void 0!==n&&void 0!==o){var r,a,s=!0;if(this.showGrayBottom||this.showShadow){var u=l.subtract(o.trans,e.trans),d=l.subtract(n.trans,i.trans),h=l.crossProduct(u,d),c=h.length();s=h.z>0}if(s){var f,p=240*(1-((e.point.z+i.point.z+n.point.z+o.point.z)/4-this.zRange.min)*this.scale.z/this.verticalRatio);this.showShadow?(f=Math.min(1+h.x/c/2,1),a=r=this._hsv2rgb(p,1,f)):(f=1,r=this._hsv2rgb(p,1,f),a=this.axisColor)}else r="gray",a=this.axisColor;t.lineWidth=this._getStrokeWidth(e);var g=[e,i,o,n];this._polygon(t,g,r,a)}},v.prototype._drawGridLine=function(t,e,i){if(void 0!==e&&void 0!==i){var n=240*(1-((e.point.z+i.point.z)/2-this.zRange.min)*this.scale.z/this.verticalRatio);t.lineWidth=2*this._getStrokeWidth(e),t.strokeStyle=this._hsv2rgb(n,1,1),this._line(t,e.screen,i.screen)}},v.prototype._redrawGridGraphPoint=function(t,e){this._drawGridLine(t,e,e.pointRight),this._drawGridLine(t,e,e.pointTop)},v.prototype._redrawLineGraphPoint=function(t,e){void 0!==e.pointNext&&(t.lineWidth=this._getStrokeWidth(e),t.strokeStyle=this.dataColor.stroke,this._line(t,e.screen,e.pointNext.screen))},v.prototype._redrawDataGraph=function(){var t,e=this._getContext();if(!(void 0===this.dataPoints||this.dataPoints.length<=0))for(this._calcTranslations(this.dataPoints),t=0;t<this.dataPoints.length;t++){var i=this.dataPoints[t];this._pointDrawingMethod.call(this,e,i)}},v.prototype._storeMousePosition=function(t){this.startMouseX=y(t),this.startMouseY=_(t),this._startCameraOffset=this.camera.getOffset()},v.prototype._onMouseDown=function(t){if(t=t||window.event,this.leftButtonDown&&this._onMouseUp(t),this.leftButtonDown=t.which?1===t.which:1===t.button,this.leftButtonDown||this.touchDown){this._storeMousePosition(t),this.startStart=new Date(this.start),this.startEnd=new Date(this.end),this.startArmRotation=this.camera.getArmRotation(),this.frame.style.cursor="move";var e=this;this.onmousemove=function(t){e._onMouseMove(t)},this.onmouseup=function(t){e._onMouseUp(t)},s.addEventListener(document,"mousemove",e.onmousemove),s.addEventListener(document,"mouseup",e.onmouseup),s.preventDefault(t)}},v.prototype._onMouseMove=function(t){this.moving=!0,t=t||window.event;var e=parseFloat(y(t))-this.startMouseX,i=parseFloat(_(t))-this.startMouseY;if(t&&!0===t.ctrlKey){var n=.5*this.frame.clientWidth,o=.5*this.frame.clientHeight,r=(this._startCameraOffset.x||0)-e/n*this.camera.armLength*.8,a=(this._startCameraOffset.y||0)+i/o*this.camera.armLength*.8;this.camera.setOffset(r,a),this._storeMousePosition(t)}else{var l=this.startArmRotation.horizontal+e/200,u=this.startArmRotation.vertical+i/200,d=Math.sin(4/360*2*Math.PI);Math.abs(Math.sin(l))<d&&(l=Math.round(l/Math.PI)*Math.PI-.001),Math.abs(Math.cos(l))<d&&(l=(Math.round(l/Math.PI-.5)+.5)*Math.PI-.001),Math.abs(Math.sin(u))<d&&(u=Math.round(u/Math.PI)*Math.PI),Math.abs(Math.cos(u))<d&&(u=(Math.round(u/Math.PI-.5)+.5)*Math.PI),this.camera.setArmRotation(l,u)}this.redraw();var h=this.getCameraPosition();this.emit("cameraPositionChange",h),s.preventDefault(t)},v.prototype._onMouseUp=function(t){this.frame.style.cursor="auto",this.leftButtonDown=!1,s.removeEventListener(document,"mousemove",this.onmousemove),s.removeEventListener(document,"mouseup",this.onmouseup),s.preventDefault(t)},v.prototype._onClick=function(t){if(this.onclick_callback){if(this.moving)this.moving=!1;else{var e=this.frame.getBoundingClientRect(),i=y(t)-e.left,n=_(t)-e.top,o=this._dataPointFromXY(i,n);o&&this.onclick_callback(o.point.data)}s.preventDefault(t)}},v.prototype._onTooltip=function(t){var e=this.frame.getBoundingClientRect(),i=y(t)-e.left,n=_(t)-e.top;if(this.showTooltip)if(this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.leftButtonDown)this._hideTooltip();else if(this.tooltip&&this.tooltip.dataPoint){var o=this._dataPointFromXY(i,n);o!==this.tooltip.dataPoint&&(o?this._showTooltip(o):this._hideTooltip())}else{var r=this;this.tooltipTimeout=setTimeout(function(){r.tooltipTimeout=null;var t=r._dataPointFromXY(i,n);t&&r._showTooltip(t)},300)}},v.prototype._onTouchStart=function(t){this.touchDown=!0;var e=this;this.ontouchmove=function(t){e._onTouchMove(t)},this.ontouchend=function(t){e._onTouchEnd(t)},s.addEventListener(document,"touchmove",e.ontouchmove),s.addEventListener(document,"touchend",e.ontouchend),this._onMouseDown(t)},v.prototype._onTouchMove=function(t){this._onMouseMove(t)},v.prototype._onTouchEnd=function(t){this.touchDown=!1,s.removeEventListener(document,"touchmove",this.ontouchmove),s.removeEventListener(document,"touchend",this.ontouchend),this._onMouseUp(t)},v.prototype._onWheel=function(t){t||(t=window.event);var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e){var i=this.camera.getArmLength()*(1-e/10);this.camera.setArmLength(i),this.redraw(),this._hideTooltip()}var n=this.getCameraPosition();this.emit("cameraPositionChange",n),s.preventDefault(t)},v.prototype._insideTriangle=function(t,e){var i=e[0],n=e[1],o=e[2];function r(t){return t>0?1:t<0?-1:0}var a=r((n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x)),s=r((o.x-n.x)*(t.y-n.y)-(o.y-n.y)*(t.x-n.x)),l=r((i.x-o.x)*(t.y-o.y)-(i.y-o.y)*(t.x-o.x));return!(0!=a&&0!=s&&a!=s||0!=s&&0!=l&&s!=l||0!=a&&0!=l&&a!=l)},v.prototype._dataPointFromXY=function(t,e){var i,n=null,o=null,r=null,a=new u(t,e);if(this.style===v.STYLE.BAR||this.style===v.STYLE.BARCOLOR||this.style===v.STYLE.BARSIZE)for(i=this.dataPoints.length-1;i>=0;i--){var s=(n=this.dataPoints[i]).surfaces;if(s)for(var l=s.length-1;l>=0;l--){var d=s[l].corners,h=[d[0].screen,d[1].screen,d[2].screen],c=[d[2].screen,d[3].screen,d[0].screen];if(this._insideTriangle(a,h)||this._insideTriangle(a,c))return n}}else for(i=0;i<this.dataPoints.length;i++){var f=(n=this.dataPoints[i]).screen;if(f){var p=Math.abs(t-f.x),g=Math.abs(e-f.y),m=Math.sqrt(p*p+g*g);(null===r||m<r)&&m<100&&(r=m,o=n)}}return o},v.prototype.hasBars=function(t){return t==v.STYLE.BAR||t==v.STYLE.BARCOLOR||t==v.STYLE.BARSIZE},v.prototype._showTooltip=function(t){var e,i,n;this.tooltip?(e=this.tooltip.dom.content,i=this.tooltip.dom.line,n=this.tooltip.dom.dot):(e=document.createElement("div"),(0,r.default)(e.style,{},this.tooltipStyle.content),e.style.position="absolute",i=document.createElement("div"),(0,r.default)(i.style,{},this.tooltipStyle.line),i.style.position="absolute",n=document.createElement("div"),(0,r.default)(n.style,{},this.tooltipStyle.dot),n.style.position="absolute",this.tooltip={dataPoint:null,dom:{content:e,line:i,dot:n}}),this._hideTooltip(),this.tooltip.dataPoint=t,"function"==typeof this.showTooltip?e.innerHTML=this.showTooltip(t.point):e.innerHTML="<table><tr><td>"+this.xLabel+":</td><td>"+t.point.x+"</td></tr><tr><td>"+this.yLabel+":</td><td>"+t.point.y+"</td></tr><tr><td>"+this.zLabel+":</td><td>"+t.point.z+"</td></tr></table>",e.style.left="0",e.style.top="0",this.frame.appendChild(e),this.frame.appendChild(i),this.frame.appendChild(n);var o=e.offsetWidth,a=e.offsetHeight,s=i.offsetHeight,l=n.offsetWidth,u=n.offsetHeight,d=t.screen.x-o/2;d=Math.min(Math.max(d,10),this.frame.clientWidth-10-o),i.style.left=t.screen.x+"px",i.style.top=t.screen.y-s+"px",e.style.left=d+"px",e.style.top=t.screen.y-s-a+"px",n.style.left=t.screen.x-l/2+"px",n.style.top=t.screen.y-u/2+"px"},v.prototype._hideTooltip=function(){if(this.tooltip)for(var t in this.tooltip.dataPoint=null,this.tooltip.dom)if(this.tooltip.dom.hasOwnProperty(t)){var e=this.tooltip.dom[t];e&&e.parentNode&&e.parentNode.removeChild(e)}},v.prototype.setCameraPosition=function(t){c.setCameraPosition(t,this),this.redraw()},v.prototype.setSize=function(t,e){this._setSize(t,e),this.redraw()},t.exports=v},function(t,e,i){i(163),t.exports=i(7).Object.assign},function(t,e,i){var n=i(17);n(n.S+n.F,"Object",{assign:i(164)})},function(t,e,i){var n=i(33),o=i(63),r=i(42),a=i(41),s=i(78),l=d.default;t.exports=!l||i(28)(function(){var t={},e={},i=(0,u.default)(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=l({},t)[i]||(0,E.default)(l({},e)).join("")!=n})?function(t,e){for(var i=a(t),l=arguments.length,u=1,d=o.f,h=r.f;l>u;)for(var c,f=s(arguments[u++]),p=d?n(f).concat(d(f)):n(f),g=p.length,m=0;g>m;)h.call(f,c=p[m++])&&(i[c]=f[c]);return i}:l},function(t,e,i){t.exports={default:i(166),__esModule:!0}},function(t,e,i){i(167),t.exports=i(7).Math.sign},function(t,e,i){var n=i(17);n(n.S,"Math",{sign:i(168)})},function(t,e){t.exports=l.default||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,i){t.exports={default:i(170),__esModule:!0}},function(t,e,i){i(171);var n=i(7).Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},function(t,e,i){var n=i(17);n(n.S+n.F*!i(21),"Object",{defineProperty:i(20).f})},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n="string",o="boolean",r="number",a={fill:{string:n},stroke:{string:n},strokeWidth:{number:r},__type__:{string:n,object:"object",undefined:"undefined"}},s={animationAutoStart:{boolean:o,undefined:"undefined"},animationInterval:{number:r},animationPreload:{boolean:o},axisColor:{string:n},backgroundColor:a,xBarWidth:{number:r,undefined:"undefined"},yBarWidth:{number:r,undefined:"undefined"},cameraPosition:{distance:{number:r},horizontal:{number:r},vertical:{number:r},__type__:{object:"object"}},xCenter:{string:n},yCenter:{string:n},dataColor:a,dotSizeMinFraction:{number:r},dotSizeMaxFraction:{number:r},dotSizeRatio:{number:r},filterLabel:{string:n},gridColor:{string:n},onclick:{function:"function"},keepAspectRatio:{boolean:o},xLabel:{string:n},yLabel:{string:n},zLabel:{string:n},legendLabel:{string:n},xMin:{number:r,undefined:"undefined"},yMin:{number:r,undefined:"undefined"},zMin:{number:r,undefined:"undefined"},xMax:{number:r,undefined:"undefined"},yMax:{number:r,undefined:"undefined"},zMax:{number:r,undefined:"undefined"},showAnimationControls:{boolean:o,undefined:"undefined"},showGrid:{boolean:o},showLegend:{boolean:o,undefined:"undefined"},showPerspective:{boolean:o},showShadow:{boolean:o},showXAxis:{boolean:o},showYAxis:{boolean:o},showZAxis:{boolean:o},xStep:{number:r,undefined:"undefined"},yStep:{number:r,undefined:"undefined"},zStep:{number:r,undefined:"undefined"},style:{number:r,string:["bar","bar-color","bar-size","dot","dot-line","dot-color","dot-size","line","grid","surface"]},tooltip:{boolean:o,function:"function"},tooltipStyle:{content:{color:{string:n},background:{string:n},border:{string:n},borderRadius:{string:n},boxShadow:{string:n},padding:{string:n},__type__:{object:"object"}},line:{borderLeft:{string:n},height:{string:n},width:{string:n},__type__:{object:"object"}},dot:{border:{string:n},borderRadius:{string:n},height:{string:n},width:{string:n},__type__:{object:"object"}},__type__:{object:"object"}},xValueLabel:{function:"function"},yValueLabel:{function:"function"},zValueLabel:{function:"function"},valueMax:{number:r,undefined:"undefined"},valueMin:{number:r,undefined:"undefined"},verticalRatio:{number:r},height:{string:n},width:{string:n},__type__:{object:"object"}};e.allOptions=s},function(t,e,i){var n=i(11),o=i(12),r=i(174),a=i(96),s=i(94),l=i(34);function u(){this.dataTable=null}u.prototype.initializeData=function(t,e,i){if(void 0!==e){var r;if(Array.isArray(e)&&(e=new n(e)),!(e instanceof n||e instanceof o))throw new Error("Array, DataSet, or DataView expected");if(0!=(r=e.get()).length){this.style=i,this.dataSet&&this.dataSet.off("*",this._onChange),this.dataSet=e,this.dataTable=r;var s=this;this._onChange=function(){t.setData(s.dataSet)},this.dataSet.on("*",this._onChange),this.colX="x",this.colY="y",this.colZ="z";var l=t.hasBars(i);if(l&&(void 0!==t.defaultXBarWidth?this.xBarWidth=t.defaultXBarWidth:this.xBarWidth=this.getSmallestDifference(r,this.colX)||1,void 0!==t.defaultYBarWidth?this.yBarWidth=t.defaultYBarWidth:this.yBarWidth=this.getSmallestDifference(r,this.colY)||1),this._initializeRange(r,this.colX,t,l),this._initializeRange(r,this.colY,t,l),this._initializeRange(r,this.colZ,t,!1),r[0].hasOwnProperty("style")){this.colValue="style";var u=this.getColumnRange(r,this.colValue);this._setRangeDefaults(u,t.defaultValueMin,t.defaultValueMax),this.valueRange=u}return this.getDataTable()[0].hasOwnProperty("filter")&&void 0===this.dataFilter&&(this.dataFilter=new a(this,"filter",t),this.dataFilter.setOnLoadCallback(function(){t.redraw()})),this.dataFilter?this.dataFilter._getDataPoints():this._getDataPoints(this.getDataTable())}}},u.prototype._collectRangeSettings=function(t,e){if(-1==["x","y","z"].indexOf(t))throw new Error("Column '"+t+"' invalid");var i=t.toUpperCase();return{barWidth:this[t+"BarWidth"],min:e["default"+i+"Min"],max:e["default"+i+"Max"],step:e["default"+i+"Step"],range_label:t+"Range",step_label:t+"Step"}},u.prototype._initializeRange=function(t,e,i,n){var o=this._collectRangeSettings(e,i),r=this.getColumnRange(t,e);n&&"z"!=e&&r.expand(o.barWidth/2),this._setRangeDefaults(r,o.min,o.max),this[o.range_label]=r,this[o.step_label]=void 0!==o.step?o.step:r.range()/5},u.prototype.getDistinctValues=function(t,e){void 0===e&&(e=this.dataTable);for(var i=[],n=0;n<e.length;n++){var o=e[n][t]||0;-1===i.indexOf(o)&&i.push(o)}return i.sort(function(t,e){return t-e})},u.prototype.getSmallestDifference=function(t,e){for(var i=this.getDistinctValues(t,e),n=null,o=1;o<i.length;o++){var r=i[o]-i[o-1];(null==n||n>r)&&(n=r)}return n},u.prototype.getColumnRange=function(t,e){for(var i=new r,n=0;n<t.length;n++){var o=t[n][e];i.adjust(o)}return i},u.prototype.getNumberOfRows=function(){return this.dataTable.length},u.prototype._setRangeDefaults=function(t,e,i){void 0!==e&&(t.min=e),void 0!==i&&(t.max=i),t.max<=t.min&&(t.max=t.min+1)},u.prototype.getDataTable=function(){return this.dataTable},u.prototype.getDataSet=function(){return this.dataSet},u.prototype.getDataPoints=function(t){for(var e=[],i=0;i<t.length;i++){var n=new l;n.x=t[i][this.colX]||0,n.y=t[i][this.colY]||0,n.z=t[i][this.colZ]||0,n.data=t[i],void 0!==this.colValue&&(n.value=t[i][this.colValue]||0);var o={};o.point=n,o.bottom=new l(n.x,n.y,this.zRange.min),o.trans=void 0,o.screen=void 0,e.push(o)}return e},u.prototype.initDataAsMatrix=function(t){var e,i,n,o,r=this.getDistinctValues(this.colX,t),a=this.getDistinctValues(this.colY,t),s=this.getDataPoints(t),l=[];for(n=0;n<s.length;n++){o=s[n];var u=r.indexOf(o.point.x),d=a.indexOf(o.point.y);void 0===l[u]&&(l[u]=[]),l[u][d]=o}for(e=0;e<l.length;e++)for(i=0;i<l[e].length;i++)l[e][i]&&(l[e][i].pointRight=e<l.length-1?l[e+1][i]:void 0,l[e][i].pointTop=i<l[e].length-1?l[e][i+1]:void 0,l[e][i].pointCross=e<l.length-1&&i<l[e].length-1?l[e+1][i+1]:void 0);return s},u.prototype.getInfo=function(){var t=this.dataFilter;if(t)return t.getLabel()+": "+t.getSelectedValue()},u.prototype.reload=function(){this.dataTable&&this.setData(this.dataTable)},u.prototype._getDataPoints=function(t){var e=[];if(this.style===s.STYLE.GRID||this.style===s.STYLE.SURFACE)e=this.initDataAsMatrix(t);else if(this._checkValueField(t),e=this.getDataPoints(t),this.style===s.STYLE.LINE)for(var i=0;i<e.length;i++)i>0&&(e[i-1].pointNext=e[i]);return e},u.prototype._checkValueField=function(t){if(this.style===s.STYLE.BARCOLOR||this.style===s.STYLE.BARSIZE||this.style===s.STYLE.DOTCOLOR||this.style===s.STYLE.DOTSIZE){if(void 0===this.colValue)throw new Error("Expected data to have  field 'style'  for graph style '"+this.style+"'");if(void 0===t[0][this.colValue])throw new Error("Expected data to have  field '"+this.colValue+"'  for graph style '"+this.style+"'")}},t.exports=u},function(t,e,i){function n(){this.min=void 0,this.max=void 0}n.prototype.adjust=function(t){void 0!==t&&((void 0===this.min||this.min>t)&&(this.min=t),(void 0===this.max||this.max<t)&&(this.max=t))},n.prototype.combine=function(t){this.add(t.min),this.add(t.max)},n.prototype.expand=function(t){if(void 0!==t){var e=this.min-t,i=this.max+t;if(e>i)throw new Error("Passed expansion value makes range invalid");this.min=e,this.max=i}},n.prototype.range=function(){return this.max-this.min},n.prototype.center=function(){return(this.min+this.max)/2},t.exports=n},function(t,e,i){var n,o,r;o=[],void 0===(r="function"==typeof(n=function(){var t=null;return function e(i,n){var o=n||{preventDefault:!1};if(i.Manager){var r=i,a=function(t,i){var n=(0,b.default)(o);return i&&r.assign(n,i),e(new r(t,n),n)};return r.assign(a,r),a.Manager=function(t,i){var n=(0,b.default)(o);return i&&r.assign(n,i),e(new r.Manager(t,n),n)},a}var s=(0,b.default)(i),l=i.element;function u(t){return t.match(/[^ ]+/g)}function d(e){if("hammer.input"!==e.type){if(e.srcEvent._handled||(e.srcEvent._handled={}),e.srcEvent._handled[e.type])return;e.srcEvent._handled[e.type]=!0}var i=!1;e.stopPropagation=function(){i=!0};var n=e.srcEvent.stopPropagation.bind(e.srcEvent);"function"==typeof n&&(e.srcEvent.stopPropagation=function(){n(),e.stopPropagation()}),e.firstTarget=t;for(var o=t;o&&!i;){var r=o.hammer;if(r)for(var a,s=0;s<r.length;s++)if(a=r[s]._handlers[e.type])for(var l=0;l<a.length&&!i;l++)a[l](e);o=o.parentNode}}return l.hammer||(l.hammer=[]),l.hammer.push(s),i.on("hammer.input",function(e){!0!==o.preventDefault&&o.preventDefault!==e.pointerType||e.preventDefault(),e.isFirst&&(t=e.target)}),s._handlers={},s.on=function(t,e){return u(t).forEach(function(t){var n=s._handlers[t];n||(s._handlers[t]=n=[],i.on(t,d)),n.push(e)}),s},s.off=function(t,e){return u(t).forEach(function(t){var n=s._handlers[t];n&&((n=e?n.filter(function(t){return t!==e}):[]).length>0?s._handlers[t]=n:(i.off(t,d),delete s._handlers[t]))}),s},s.emit=function(e,n){t=n.target,i.emit(e,n)},s.destroy=function(){var t=i.element.hammer,e=t.indexOf(s);-1!==e&&t.splice(e,1),t.length||delete i.element.hammer,s._handlers={},i.destroy()},s}})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(o,r,a,s){var l,u=["","webkit","Moz","MS","ms","o"],h=r.createElement("div"),c="function",f=Math.round,p=Math.abs,g=Date.now;function m(t,e,i){return setTimeout(C(t,i),e)}function v(t,e,i){return!!Array.isArray(t)&&(y(t,i[e],i),!0)}function y(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==s)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function _(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=o.console&&(o.console.warn||o.console.log);return r&&r.call(o.console,n,i),t.apply(this,arguments)}}l="function"!=typeof d.default?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==s&&null!==n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}:d.default;var w=_(function(t,e,i){for(var n=(0,E.default)(e),o=0;o<n.length;)(!i||i&&t[n[o]]===s)&&(t[n[o]]=e[n[o]]),o++;return t},"extend","Use `assign`."),S=_(function(t,e){return w(t,e,!0)},"merge","Use `assign`.");function x(t,e,i){var n,o=e.prototype;(n=t.prototype=(0,b.default)(o)).constructor=t,n._super=o,i&&l(n,i)}function C(t,e){return function(){return t.apply(e,arguments)}}function I(t,e){return(void 0===t?"undefined":(0,T.default)(t))==c?t.apply(e&&e[0]||s,e):t}function A(t,e){return t===s?e:t}function M(t,e,i){y(N(e),function(e){t.addEventListener(e,i,!1)})}function O(t,e,i){y(N(e),function(e){t.removeEventListener(e,i,!1)})}function D(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function R(t,e){return t.indexOf(e)>-1}function N(t){return t.trim().split(/\s+/g)}function k(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function P(t){return Array.prototype.slice.call(t,0)}function L(t,e,i){for(var n=[],o=[],r=0;r<t.length;){var a=e?t[r][e]:t[r];k(o,a)<0&&n.push(t[r]),o[r]=a,r++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function F(t,e){for(var i,n,o=e[0].toUpperCase()+e.slice(1),r=0;r<u.length;){if((n=(i=u[r])?i+o:e)in t)return n;r++}return s}var B=1;function U(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}var j="ontouchstart"in o,H=F(o,"PointerEvent")!==s,G=j&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),z=25,Y=1,V=2,q=4,W=8,K=1,X=2,Q=4,Z=8,J=16,$=X|Q,tt=Z|J,et=$|tt,it=["x","y"],nt=["clientX","clientY"];function ot(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){I(t.options.enable,[t])&&i.handler(e)},this.init()}function rt(t,e,i){var n=i.pointers.length,o=i.changedPointers.length,r=e&Y&&n-o==0,a=e&(q|W)&&n-o==0;i.isFirst=!!r,i.isFinal=!!a,r&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,o=n.length;i.firstInput||(i.firstInput=at(e)),o>1&&!i.firstMultiple?i.firstMultiple=at(e):1===o&&(i.firstMultiple=!1);var r=i.firstInput,a=i.firstMultiple,l=a?a.center:r.center,u=e.center=st(n);e.timeStamp=g(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=ht(l,u),e.distance=dt(l,u),function(t,e){var i=e.center,n=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};e.eventType!==Y&&r.eventType!==q||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=o.x+(i.x-n.x),e.deltaY=o.y+(i.y-n.y)}(i,e),e.offsetDirection=ut(e.deltaX,e.deltaY);var d,h,c=lt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=p(c.x)>p(c.y)?c.x:c.y,e.scale=a?(d=a.pointers,dt((h=n)[0],h[1],nt)/dt(d[0],d[1],nt)):1,e.rotation=a?function(t,e){return ht(e[1],e[0],nt)+ht(t[1],t[0],nt)}(a.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,o,r,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=W&&(l>z||a.velocity===s)){var u=e.deltaX-a.deltaX,d=e.deltaY-a.deltaY,h=lt(l,u,d);n=h.x,o=h.y,i=p(h.x)>p(h.y)?h.x:h.y,r=ut(u,d),t.lastInterval=e}else i=a.velocity,n=a.velocityX,o=a.velocityY,r=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=o,e.direction=r}(i,e);var f=t.element;D(e.srcEvent.target,f)&&(f=e.srcEvent.target),e.target=f}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function at(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:f(t.pointers[i].clientX),clientY:f(t.pointers[i].clientY)},i++;return{timeStamp:g(),pointers:e,center:st(e),deltaX:t.deltaX,deltaY:t.deltaY}}function st(t){var e=t.length;if(1===e)return{x:f(t[0].clientX),y:f(t[0].clientY)};for(var i=0,n=0,o=0;o<e;)i+=t[o].clientX,n+=t[o].clientY,o++;return{x:f(i/e),y:f(n/e)}}function lt(t,e,i){return{x:e/t||0,y:i/t||0}}function ut(t,e){return t===e?K:p(t)>=p(e)?t<0?X:Q:e<0?Z:J}function dt(t,e,i){i||(i=it);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return Math.sqrt(n*n+o*o)}function ht(t,e,i){i||(i=it);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return 180*Math.atan2(o,n)/Math.PI}ot.prototype={handler:function(){},init:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(U(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(U(this.element),this.evWin,this.domHandler)}};var ct={mousedown:Y,mousemove:V,mouseup:q},ft="mousedown",pt="mousemove mouseup";function gt(){this.evEl=ft,this.evWin=pt,this.pressed=!1,ot.apply(this,arguments)}x(gt,ot,{handler:function(t){var e=ct[t.type];e&Y&&0===t.button&&(this.pressed=!0),e&V&&1!==t.which&&(e=q),this.pressed&&(e&q&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var mt={pointerdown:Y,pointermove:V,pointerup:q,pointercancel:W,pointerout:W},vt={2:"touch",3:"pen",4:"mouse",5:"kinect"},yt="pointerdown",_t="pointermove pointerup pointercancel";function bt(){this.evEl=yt,this.evWin=_t,ot.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(yt="MSPointerDown",_t="MSPointerMove MSPointerUp MSPointerCancel"),x(bt,ot,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),o=mt[n],r=vt[t.pointerType]||t.pointerType,a="touch"==r,s=k(e,t.pointerId,"pointerId");o&Y&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):o&(q|W)&&(i=!0),s<0||(e[s]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(s,1))}});var Et={touchstart:Y,touchmove:V,touchend:q,touchcancel:W},wt="touchstart",Tt="touchstart touchmove touchend touchcancel";function St(){this.evTarget=wt,this.evWin=Tt,this.started=!1,ot.apply(this,arguments)}x(St,ot,{handler:function(t){var e=Et[t.type];if(e===Y&&(this.started=!0),this.started){var i=function(t,e){var i=P(t.touches),n=P(t.changedTouches);return e&(q|W)&&(i=L(i.concat(n),"identifier",!0)),[i,n]}.call(this,t,e);e&(q|W)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var xt={touchstart:Y,touchmove:V,touchend:q,touchcancel:W},Ct="touchstart touchmove touchend touchcancel";function It(){this.evTarget=Ct,this.targetIds={},ot.apply(this,arguments)}x(It,ot,{handler:function(t){var e=xt[t.type],i=function(t,e){var i=P(t.touches),n=this.targetIds;if(e&(Y|V)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,r,a=P(t.changedTouches),s=[],l=this.target;if(r=i.filter(function(t){return D(t.target,l)}),e===Y)for(o=0;o<r.length;)n[r[o].identifier]=!0,o++;for(o=0;o<a.length;)n[a[o].identifier]&&s.push(a[o]),e&(q|W)&&delete n[a[o].identifier],o++;return s.length?[L(r.concat(s),"identifier",!0),s]:void 0}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var At=2500,Mt=25;function Ot(){ot.apply(this,arguments);var t=C(this.handler,this);this.touch=new It(this.manager,t),this.mouse=new gt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Dt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)},At)}}x(Ot,ot,{handler:function(t,e,i){var n="touch"==i.pointerType,o="mouse"==i.pointerType;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&Y?(this.primaryTouch=e.changedPointers[0].identifier,Dt.call(this,e)):t&(q|W)&&Dt.call(this,e)}).call(this,e,i);else if(o&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],r=Math.abs(e-o.x),a=Math.abs(i-o.y);if(r<=Mt&&a<=Mt)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Rt=F(h.style,"touchAction"),Nt=Rt!==s,kt="auto",Pt="manipulation",Lt="none",Ft="pan-x",Bt="pan-y",Ut=function(){if(!Nt)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!e||o.CSS.supports("touch-action",i)}),t}();function jt(t,e){this.manager=t,this.set(e)}jt.prototype={set:function(t){"compute"==t&&(t=this.compute()),Nt&&this.manager.element.style&&Ut[t]&&(this.manager.element.style[Rt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return y(this.manager.recognizers,function(e){I(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(R(t,Lt))return Lt;var e=R(t,Ft),i=R(t,Bt);return e&&i?Lt:e||i?e?Ft:Bt:R(t,Pt)?Pt:kt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,o=R(n,Lt)&&!Ut[Lt],r=R(n,Bt)&&!Ut[Bt],a=R(n,Ft)&&!Ut[Ft];if(o){var s=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(s&&l&&u)return}if(!a||!r)return o||r&&i&$||a&&i&tt?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Ht=1,Gt=2,zt=4,Yt=8,Vt=Yt,qt=16;function Wt(t){this.options=l({},this.defaults,t||{}),this.id=B++,this.manager=null,this.options.enable=A(this.options.enable,!0),this.state=Ht,this.simultaneous={},this.requireFail=[]}function Kt(t){return t&qt?"cancel":t&Yt?"end":t&zt?"move":t&Gt?"start":""}function Xt(t){return t==J?"down":t==Z?"up":t==X?"left":t==Q?"right":""}function Qt(t,e){var i=e.manager;return i?i.get(t):t}function Zt(){Wt.apply(this,arguments)}function Jt(){Zt.apply(this,arguments),this.pX=null,this.pY=null}function $t(){Zt.apply(this,arguments)}function te(){Wt.apply(this,arguments),this._timer=null,this._input=null}function ee(){Zt.apply(this,arguments)}function ie(){Zt.apply(this,arguments)}function ne(){Wt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function oe(t,e){return(e=e||{}).recognizers=A(e.recognizers,oe.defaults.preset),new re(t,e)}function re(t,e){var i;this.options=l({},oe.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(H?bt:G?It:j?Ot:gt))(i,rt),this.touchAction=new jt(this,this.options.touchAction),ae(this,!0),y(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ae(t,e){var i,n=t.element;n.style&&(y(t.options.cssProps,function(o,r){i=F(n.style,r),e?(t.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={}))}Wt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(v(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Qt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return v(t,"dropRecognizeWith",this)?this:(t=Qt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(v(t,"requireFailure",this))return this;var e=this.requireFail;return-1===k(e,t=Qt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(v(t,"dropRequireFailure",this))return this;t=Qt(t,this);var e=k(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<Yt&&n(e.options.event+Kt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=Yt&&n(e.options.event+Kt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Ht)))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!I(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Vt|qt|32)&&(this.state=Ht),this.state=this.process(e),this.state&(Gt|zt|Yt|qt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},x(Zt,Wt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Gt|zt),o=this.attrTest(t);return n&&(i&W||!o)?e|qt:n||o?i&q?e|Yt:e&Gt?e|zt:Gt:32}}),x(Jt,Zt,{defaults:{event:"pan",threshold:10,pointers:1,direction:et},getTouchAction:function(){var t=this.options.direction,e=[];return t&$&&e.push(Bt),t&tt&&e.push(Ft),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,o=t.direction,r=t.deltaX,a=t.deltaY;return o&e.direction||(e.direction&$?(o=0===r?K:r<0?X:Q,i=r!=this.pX,n=Math.abs(t.deltaX)):(o=0===a?K:a<0?Z:J,i=a!=this.pY,n=Math.abs(t.deltaY))),t.direction=o,i&&n>e.threshold&&o&e.direction},attrTest:function(t){return Zt.prototype.attrTest.call(this,t)&&(this.state&Gt||!(this.state&Gt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Xt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),x($t,Zt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Lt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Gt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),x(te,Wt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[kt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(q|W)&&!o)this.reset();else if(t.eventType&Y)this.reset(),this._timer=m(function(){this.state=Vt,this.tryEmit()},e.time,this);else if(t.eventType&q)return Vt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Vt&&(t&&t.eventType&q?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=g(),this.manager.emit(this.options.event,this._input)))}}),x(ee,Zt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Lt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Gt)}}),x(ie,Zt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:$|tt,pointers:1},getTouchAction:function(){return Jt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&($|tt)?e=t.overallVelocity:i&$?e=t.overallVelocityX:i&tt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&t.eventType&q},emit:function(t){var e=Xt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),x(ne,Wt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Pt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&Y&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=q)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||dt(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&r?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=m(function(){this.state=Vt,this.tryEmit()},e.interval,this),Gt):Vt}return 32},failTimeout:function(){return this._timer=m(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Vt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),oe.VERSION="2.0.7",oe.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ee,{enable:!1}],[$t,{enable:!1},["rotate"]],[ie,{direction:$}],[Jt,{direction:$},["swipe"]],[ne],[ne,{event:"doubletap",taps:2},["tap"]],[te]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},re.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&Vt)&&(o=e.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],2===e.stopped||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&i.state&(Gt|zt|Yt)&&(o=e.curRecognizer=i),r++}},get:function(t){if(t instanceof Wt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(v(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(v(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=k(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var i=this.handlers;return y(N(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==s){var i=this.handlers;return y(N(t),function(t){e?i[t]&&i[t].splice(k(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=r.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ae(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(oe,{INPUT_START:Y,INPUT_MOVE:V,INPUT_END:q,INPUT_CANCEL:W,STATE_POSSIBLE:Ht,STATE_BEGAN:Gt,STATE_CHANGED:zt,STATE_ENDED:Yt,STATE_RECOGNIZED:Vt,STATE_CANCELLED:qt,STATE_FAILED:32,DIRECTION_NONE:K,DIRECTION_LEFT:X,DIRECTION_RIGHT:Q,DIRECTION_UP:Z,DIRECTION_DOWN:J,DIRECTION_HORIZONTAL:$,DIRECTION_VERTICAL:tt,DIRECTION_ALL:et,Manager:re,Input:ot,TouchAction:jt,TouchInput:It,MouseInput:gt,PointerEventInput:bt,TouchMouseInput:Ot,SingleTouchInput:St,Recognizer:Wt,AttrRecognizer:Zt,Tap:ne,Pan:Jt,Swipe:ie,Pinch:$t,Rotate:ee,Press:te,on:M,off:O,each:y,merge:S,extend:w,assign:l,inherit:x,bindFn:C,prefixed:F}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=oe,(n=function(){return oe}.call(e,i,e,t))===s||(t.exports=n)}(window,document)},function(t,e,i){e.util=i(2),e.DOMutil=i(14),e.DataSet=i(11),e.DataView=i(12),e.Queue=i(43),e.Timeline=i(178),e.Graph2d=i(180),e.timeline={Core:i(65),DateUtil:i(36),Range:i(64),stack:i(100),TimeStep:i(66),components:{items:{Item:i(38),BackgroundItem:i(103),BoxItem:i(101),PointItem:i(102),RangeItem:i(70)},BackgroundGroup:i(69),Component:i(16),CurrentTime:i(67),CustomTime:i(46),DataAxis:i(107),DataScale:i(108),GraphGroup:i(109),Group:i(68),ItemSet:i(99),Legend:i(112),LineGraph:i(106),TimeAxis:i(45)}},e.moment=i(9),e.Hammer=i(10),e.keycharm=i(35)},function(t,e,i){var n=i(9),o=i(2),r=i(11),a=i(12),s=i(64),l=i(65),u=i(45),d=i(67),h=i(46),c=i(99),f=i(15).printStyle,p=i(105).allOptions,g=i(105).configureOptions,m=i(71).default,v=i(15).default;function y(t,e,i,l){if(!(this instanceof y))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(i)||i instanceof r||i instanceof a)&&i instanceof Object){var h=l;l=i,i=h}l&&l.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var f=this;if(this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:n,width:null,height:null,maxHeight:null,minHeight:null},this.options=o.deepExtend({},this.defaultOptions),this._create(t),!l||l&&void 0===l.rtl){this.dom.root.style.visibility="hidden";for(var p,g=this.dom.root;!p&&g;)p=window.getComputedStyle(g,null).direction,g=g.parentElement;this.options.rtl=p&&"rtl"==p.toLowerCase()}else this.options.rtl=l.rtl;this.options.rollingMode=l&&l.rollingMode,this.options.onInitialDrawComplete=l&&l.onInitialDrawComplete,this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:function(){return f.timeAxis.step.scale},getStep:function(){return f.timeAxis.step.step},toScreen:f._toScreen.bind(f),toGlobalScreen:f._toGlobalScreen.bind(f),toTime:f._toTime.bind(f),toGlobalTime:f._toGlobalTime.bind(f)}},this.range=new s(this.body,this.options),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new u(this.body,this.options),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new d(this.body,this.options),this.components.push(this.currentTime),this.itemSet=new c(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null,this.dom.root.onclick=function(t){f.emit("click",f.getEventProperties(t))},this.dom.root.ondblclick=function(t){f.emit("doubleClick",f.getEventProperties(t))},this.dom.root.oncontextmenu=function(t){f.emit("contextmenu",f.getEventProperties(t))},this.dom.root.onmouseover=function(t){f.emit("mouseOver",f.getEventProperties(t))},window.PointerEvent?(this.dom.root.onpointerdown=function(t){f.emit("mouseDown",f.getEventProperties(t))},this.dom.root.onpointermove=function(t){f.emit("mouseMove",f.getEventProperties(t))},this.dom.root.onpointerup=function(t){f.emit("mouseUp",f.getEventProperties(t))}):(this.dom.root.onmousemove=function(t){f.emit("mouseMove",f.getEventProperties(t))},this.dom.root.onmousedown=function(t){f.emit("mouseDown",f.getEventProperties(t))},this.dom.root.onmouseup=function(t){f.emit("mouseUp",f.getEventProperties(t))}),this.initialFitDone=!1,this.on("changed",function(){if(null!=this.itemsData&&!this.options.rollingMode){if(!f.initialFitDone)if(f.initialFitDone=!0,null!=f.options.start||null!=f.options.end){if(null==f.options.start||null==f.options.end)var t=f.getItemRange();var e=null!=f.options.start?f.options.start:t.min,i=null!=f.options.end?f.options.end:t.max;f.setWindow(e,i,{animation:!1})}else f.fit({animation:!1});!f.initialDrawDone&&f.initialRangeChangeDone&&(f.initialDrawDone=!0,f.dom.root.style.visibility="visible",f.options.onInitialDrawComplete&&setTimeout(function(){return f.options.onInitialDrawComplete()},0))}}),l&&this.setOptions(l),i&&this.setGroups(i),e&&this.setItems(e),this._redraw()}function _(t){return o.convert(t.data.start,"Date").valueOf()}function b(t){var e=null!=t.data.end?t.data.end:t.data.start;return o.convert(e,"Date").valueOf()}function E(t,e){var i=t.props.leftContainer.height,n=t.props.left.height,o=e.parent,r=o.top,a=!0,s=t.timeAxis.options.orientation.axis,l=function(){return"bottom"==s?o.height-e.top-e.height:e.top},u=-1*t._getScrollTop(),d=r+l(),h=e.height;return d<u?r+i<=r+l()+h&&(r+=l()-t.itemSet.options.margin.item.vertical):d+h>u+i?r+=l()+h-i+t.itemSet.options.margin.item.vertical:a=!1,{shouldScroll:a,scrollOffset:r=Math.min(r,n-i),itemTop:d}}y.prototype=new l,y.prototype._createConfigurator=function(){return new m(this,this.dom.container,g)},y.prototype.redraw=function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()},y.prototype.setOptions=function(t){if(!0===v.validate(t,p)&&console.log("%cErrors have been found in the supplied options object.",f),l.prototype.setOptions.call(this,t),"type"in t&&t.type!==this.options.type){this.options.type=t.type;var e=this.itemsData;if(e){var i=this.getSelection();this.setItems(null),this.setItems(e),this.setSelection(i)}}},y.prototype.setItems=function(t){var e;e=t?t instanceof r||t instanceof a?t:new r(t,{type:{start:"Date",end:"Date"}}):null,this.itemsData=e,this.itemSet&&this.itemSet.setItems(e)},y.prototype.setGroups=function(t){var e;if(t){var i=function(t){return!1!==t.visible};e=t instanceof r||t instanceof a?new a(t,{filter:i}):new r(t.filter(i))}else e=null;this.groupsData=e,this.itemSet.setGroups(e)},y.prototype.setData=function(t){t&&t.groups&&this.setGroups(t.groups),t&&t.items&&this.setItems(t.items)},y.prototype.setSelection=function(t,e){this.itemSet&&this.itemSet.setSelection(t),e&&e.focus&&this.focus(t,e)},y.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]},y.prototype.focus=function(t,e){if(this.itemsData&&null!=t){var i=Array.isArray(t)?t:[t],n=this.itemsData.getDataSet().get(i,{type:{start:"Date",end:"Date"}}),o=null,r=null;if(n.forEach(function(t){var e=t.start.valueOf(),i="end"in t?t.end.valueOf():t.start.valueOf();(null===o||e<o)&&(o=e),(null===r||i>r)&&(r=i)}),null!==o&&null!==r){var a=this,s=this.itemSet.items[i[0]],l=-1*this._getScrollTop(),u=null,d=function(){var t=E(a,s);t.shouldScroll&&t.itemTop!=u.itemTop&&(a._setScrollTop(-t.scrollOffset),a._redraw())},h=(o+r)/2,c=Math.max(this.range.end-this.range.start,1.1*(r-o)),f=!e||void 0===e.animation||e.animation;f||(u={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.setRange(h-c/2,h+c/2,{animation:f},function(){d(),setTimeout(d,100)},function(t,e,i){var n=E(a,s);if(u||(u=n),u.itemTop!=n.itemTop||u.shouldScroll){u.itemTop!=n.itemTop&&n.shouldScroll&&(u=n,l=-1*a._getScrollTop());var o=l,r=u.scrollOffset,d=i?r:o+(r-o)*t;a._setScrollTop(-d),e||a._redraw()}})}}},y.prototype.fit=function(t,e){var i,n=!t||void 0===t.animation||t.animation,o=this.itemsData&&this.itemsData.getDataSet();1===o.length&&void 0===o.get()[0].end?(i=this.getDataRange(),this.moveTo(i.min.valueOf(),{animation:n},e)):(i=this.getItemRange(),this.range.setRange(i.min,i.max,{animation:n},e))},y.prototype.getItemRange=function(){var t=this.getDataRange(),e=null!==t.min?t.min.valueOf():null,i=null!==t.max?t.max.valueOf():null,n=null,r=null;if(null!=e&&null!=i){var a=i-e;a<=0&&(a=10);var s=a/this.props.center.width,l={},u=0;if(o.forEach(this.itemSet.items,function(t,e){t.groupShowing&&(l[e]=t.redraw(!0),u=l[e].length)}),u>0)for(var d=0;d<u;d++)o.forEach(l,function(t){t[d]()});if(o.forEach(this.itemSet.items,function(t){var o,a,l=_(t),u=b(t);this.options.rtl?(o=l-(t.getWidthRight()+10)*s,a=u+(t.getWidthLeft()+10)*s):(o=l-(t.getWidthLeft()+10)*s,a=u+(t.getWidthRight()+10)*s),o<e&&(e=o,n=t),a>i&&(i=a,r=t)}.bind(this)),n&&r){var h=n.getWidthLeft()+10,c=r.getWidthRight()+10,f=this.props.center.width-h-c;f>0&&(this.options.rtl?(e=_(n)-c*a/f,i=b(r)+h*a/f):(e=_(n)-h*a/f,i=b(r)+c*a/f))}}return{min:null!=e?new Date(e):null,max:null!=i?new Date(i):null}},y.prototype.getDataRange=function(){var t=null,e=null,i=this.itemsData&&this.itemsData.getDataSet();return i&&i.forEach(function(i){var n=o.convert(i.start,"Date").valueOf(),r=o.convert(null!=i.end?i.end:i.start,"Date").valueOf();(null===t||n<t)&&(t=n),(null===e||r>e)&&(e=r)}),{min:null!=t?new Date(t):null,max:null!=e?new Date(e):null}},y.prototype.getEventProperties=function(t){var e,i=t.center?t.center.x:t.clientX,n=t.center?t.center.y:t.clientY;e=this.options.rtl?o.getAbsoluteRight(this.dom.centerContainer)-i:i-o.getAbsoluteLeft(this.dom.centerContainer);var r=n-o.getAbsoluteTop(this.dom.centerContainer),a=this.itemSet.itemFromTarget(t),s=this.itemSet.groupFromTarget(t),l=h.customTimeFromTarget(t),u=this.itemSet.options.snap||null,d=this.body.util.getScale(),c=this.body.util.getStep(),f=this._toTime(e),p=u?u(f,d,c):f,g=o.getTarget(t),m=null;return null!=a?m="item":null!=l?m="custom-time":o.hasParent(g,this.timeAxis.dom.foreground)?m="axis":this.timeAxis2&&o.hasParent(g,this.timeAxis2.dom.foreground)?m="axis":o.hasParent(g,this.itemSet.dom.labelSet)?m="group-label":o.hasParent(g,this.currentTime.bar)?m="current-time":o.hasParent(g,this.dom.center)&&(m="background"),{event:t,item:a?a.id:null,group:s?s.groupId:null,what:m,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:e,y:r,time:f,snappedTime:p}},y.prototype.toggleRollingMode=function(){this.range.rolling?this.range.stopRolling():(null==this.options.rollingMode&&this.setOptions(this.options),this.range.startRolling())},t.exports=y},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(19)),o=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var s=i(10),l=i(37),u=i(2),d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,o.default)(this,t),this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return(0,r.default)(t,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}},{key:"setCloseCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}},{key:"_isColorString",value:function(t){if("string"==typeof t)return{black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"}[t]}},{key:"setColor",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("none"!==t){var i=void 0,o=this._isColorString(t);if(void 0!==o&&(t=o),!0===u.isString(t)){if(!0===u.isValidRGB(t)){var r=t.substr(4).substr(0,t.length-5).split(",");i={r:r[0],g:r[1],b:r[2],a:1}}else if(!0===u.isValidRGBA(t)){var a=t.substr(5).substr(0,t.length-6).split(",");i={r:a[0],g:a[1],b:a[2],a:a[3]}}else if(!0===u.isValidHex(t)){var s=u.hexToRGB(t);i={r:s.r,g:s.g,b:s.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var l=void 0!==t.a?t.a:"1.0";i={r:t.r,g:t.g,b:t.b,a:l}}if(void 0===i)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+(0,n.default)(t));this._setColor(i,e)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!0===e&&(this.previousColor=u.extend({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(function(){void 0!==t.closeCallback&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!0===e&&(this.initialColor=u.extend({},t)),this.color=t;var i=u.RGBToHSV(t.r,t.g,t.b),n=2*Math.PI,o=this.r*i.s,r=this.centerCoordinates.x+o*Math.sin(n*i.h),a=this.centerCoordinates.y+o*Math.cos(n*i.h);this.colorPickerSelector.style.left=r-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var e=u.RGBToHSV(this.color.r,this.color.g,this.color.b);e.v=t/100;var i=u.HSVToRGB(e.h,e.s,e.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.color,e=u.RGBToHSV(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,n,o),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-e.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),i.fill(),this.brightnessRange.value=100*e.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(e)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(t){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(t){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var i=this;this.opacityRange.onchange=function(){i._setOpacity(this.value)},this.opacityRange.oninput=function(){i._setOpacity(this.value)},this.brightnessRange.onchange=function(){i._setBrightness(this.value)},this.brightnessRange.oninput=function(){i._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new s(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),l.onTouch(this.hammer,function(e){t._moveSelector(e)}),this.hammer.on("tap",function(e){t._moveSelector(e)}),this.hammer.on("panstart",function(e){t._moveSelector(e)}),this.hammer.on("panmove",function(e){t._moveSelector(e)}),this.hammer.on("panend",function(e){t._moveSelector(e)})}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var e=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,e,i);var n=void 0,o=void 0,r=void 0,a=void 0;this.centerCoordinates={x:.5*e,y:.5*i},this.r=.49*e;var s=2*Math.PI/360,l=1/this.r,d=void 0;for(r=0;r<360;r++)for(a=0;a<this.r;a++)n=this.centerCoordinates.x+a*Math.sin(s*r),o=this.centerCoordinates.y+a*Math.cos(s*r),d=u.HSVToRGB(r*(1/360),a*l,1),t.fillStyle="rgb("+d.r+","+d.g+","+d.b+")",t.fillRect(n-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,e,i)}this.generated=!0}},{key:"_moveSelector",value:function(t){var e=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-e.left,n=t.center.y-e.top,o=.5*this.colorPickerDiv.clientHeight,r=.5*this.colorPickerDiv.clientWidth,a=i-r,s=n-o,l=Math.atan2(a,s),d=.98*Math.min(Math.sqrt(a*a+s*s),r),h=Math.cos(l)*d+o,c=Math.sin(l)*d+r;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=c-.5*this.colorPickerSelector.clientWidth+"px";var f=l/(2*Math.PI);f=f<0?f+1:f;var p=d/this.r,g=u.RGBToHSV(this.color.r,this.color.g,this.color.b);g.h=f,g.s=p;var m=u.HSVToRGB(g.h,g.s,g.v);m.a=this.color.a,this.color=m,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}();e.default=d},function(t,e,i){var n=i(9),o=i(2),r=i(11),a=i(12),s=i(64),l=i(65),u=i(45),d=i(67),h=i(46),c=i(106),f=i(15).printStyle,p=i(113).allOptions,g=i(113).configureOptions,m=i(71).default,v=i(15).default;function y(t,e,i,l){if(!(Array.isArray(i)||i instanceof r||i instanceof a)&&i instanceof Object){var h=l;l=i,i=h}l&&l.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var f=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:n,width:null,height:null,maxHeight:null,minHeight:null},this.options=o.deepExtend({},this.defaultOptions),this._create(t),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{toScreen:f._toScreen.bind(f),toGlobalScreen:f._toGlobalScreen.bind(f),toTime:f._toTime.bind(f),toGlobalTime:f._toGlobalTime.bind(f)}},this.range=new s(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new u(this.body),this.components.push(this.timeAxis),this.currentTime=new d(this.body),this.components.push(this.currentTime),this.linegraph=new c(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(t){f.emit("click",f.getEventProperties(t))}),this.on("doubletap",function(t){f.emit("doubleClick",f.getEventProperties(t))}),this.dom.root.oncontextmenu=function(t){f.emit("contextmenu",f.getEventProperties(t))},l&&this.setOptions(l),i&&this.setGroups(i),e&&this.setItems(e),this._redraw()}y.prototype=new l,y.prototype.setOptions=function(t){!0===v.validate(t,p)&&console.log("%cErrors have been found in the supplied options object.",f),l.prototype.setOptions.call(this,t)},y.prototype.setItems=function(t){var e,i=null==this.itemsData;if(e=t?t instanceof r||t instanceof a?t:new r(t,{type:{start:"Date",end:"Date"}}):null,this.itemsData=e,this.linegraph&&this.linegraph.setItems(e),i)if(null!=this.options.start||null!=this.options.end){var n=null!=this.options.start?this.options.start:null,o=null!=this.options.end?this.options.end:null;this.setWindow(n,o,{animation:!1})}else this.fit({animation:!1})},y.prototype.setGroups=function(t){var e;e=t?t instanceof r||t instanceof a?t:new r(t):null,this.groupsData=e,this.linegraph.setGroups(e)},y.prototype.getLegend=function(t,e,i){return void 0===e&&(e=15),void 0===i&&(i=15),void 0!==this.linegraph.groups[t]?this.linegraph.groups[t].getLegend(e,i):"cannot find group:'"+t+"'"},y.prototype.isGroupVisible=function(t){return void 0!==this.linegraph.groups[t]&&this.linegraph.groups[t].visible&&(void 0===this.linegraph.options.groups.visibility[t]||1==this.linegraph.options.groups.visibility[t])},y.prototype.getDataRange=function(){var t=null,e=null;for(var i in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(i)&&1==this.linegraph.groups[i].visible)for(var n=0;n<this.linegraph.groups[i].itemsData.length;n++){var r=this.linegraph.groups[i].itemsData[n],a=o.convert(r.x,"Date").valueOf();t=null==t?a:t>a?a:t,e=null==e?a:e<a?a:e}return{min:null!=t?new Date(t):null,max:null!=e?new Date(e):null}},y.prototype.getEventProperties=function(t){var e=t.center?t.center.x:t.clientX,i=t.center?t.center.y:t.clientY,n=e-o.getAbsoluteLeft(this.dom.centerContainer),r=i-o.getAbsoluteTop(this.dom.centerContainer),a=this._toTime(n),s=h.customTimeFromTarget(t),l=o.getTarget(t),u=null;o.hasParent(l,this.timeAxis.dom.foreground)?u="axis":this.timeAxis2&&o.hasParent(l,this.timeAxis2.dom.foreground)?u="axis":o.hasParent(l,this.linegraph.yAxisLeft.dom.frame)?u="data-axis":o.hasParent(l,this.linegraph.yAxisRight.dom.frame)?u="data-axis":o.hasParent(l,this.linegraph.legendLeft.dom.frame)?u="legend":o.hasParent(l,this.linegraph.legendRight.dom.frame)?u="legend":null!=s?u="custom-time":o.hasParent(l,this.currentTime.bar)?u="current-time":o.hasParent(l,this.dom.center)&&(u="background");var d=[],c=this.linegraph.yAxisLeft,f=this.linegraph.yAxisRight;return!c.hidden&&this.itemsData.length>0&&d.push(c.screenToValue(r)),!f.hidden&&this.itemsData.length>0&&d.push(f.screenToValue(r)),{event:t,what:u,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:n,y:r,time:a,value:d}},y.prototype._createConfigurator=function(){return new m(this,this.dom.container,g)},t.exports=y},function(t,e,i){e.util=i(2),e.DOMutil=i(14),e.DataSet=i(11),e.DataView=i(12),e.Queue=i(43),e.Network=i(182),e.network={Images:i(116),dotparser:i(114),gephiParser:i(115),allOptions:i(122)},e.network.convertDot=function(t){return e.network.dotparser.DOTToGraph(t)},e.network.convertGephi=function(t,i){return e.network.gephiParser.parseGephi(t,i)},e.moment=i(9),e.Hammer=i(10),e.keycharm=i(35)},function(t,e,i){i(183);var n=i(44),o=i(2),r=i(114),a=i(115),s=i(97),l=i(184),u=i(116).default,d=i(186).default,h=i(187).default,c=i(214).default,f=i(220).default,p=i(227).default,g=i(229).default,m=i(230).default,v=i(231).default,y=i(232).default,_=i(234).default,b=i(235).default,E=i(237).default,w=i(71).default,T=i(15).default,S=i(15).printStyle,x=i(122),C=x.allOptions,I=x.configureOptions,A=i(238).default;function M(t,e,i){var n=this;if(!(this instanceof M))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:l,clickToUse:!1},o.extend(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this),once:this.once.bind(this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}}},this.bindEventListeners(),this.images=new u(function(){return n.body.emitter.emit("_requestRedraw")}),this.groups=new d,this.canvas=new m(this.body),this.selectionHandler=new _(this.body,this.canvas),this.interactionHandler=new y(this.body,this.canvas,this.selectionHandler),this.view=new v(this.body,this.canvas),this.renderer=new g(this.body,this.canvas),this.physics=new f(this.body),this.layoutEngine=new b(this.body),this.clustering=new p(this.body),this.manipulation=new E(this.body,this.canvas,this.selectionHandler),this.nodesHandler=new h(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new c(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new A(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(i),this.setData(e)}n(M.prototype),M.prototype.setOptions=function(t){var e=this;if(void 0!==t){if(!0===T.validate(t,C)&&console.log("%cErrors have been found in the supplied options object.",S),o.selectiveDeepExtend(["locale","locales","clickToUse"],this.options,t),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),void 0!==t.groups&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new w(this,this.body.container,I,this.canvas.pixelRatio)),this.configurator.setOptions(t.configure)),this.configurator&&!0===this.configurator.options.enabled){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};o.deepExtend(i.nodes,this.nodesHandler.options),o.deepExtend(i.edges,this.edgesHandler.options),o.deepExtend(i.layout,this.layoutEngine.options),o.deepExtend(i.interaction,this.selectionHandler.options),o.deepExtend(i.interaction,this.renderer.options),o.deepExtend(i.interaction,this.interactionHandler.options),o.deepExtend(i.manipulation,this.manipulation.options),o.deepExtend(i.physics,this.physics.options),o.deepExtend(i.global,this.canvas.options),o.deepExtend(i.global,this.options),this.configurator.setModuleOptions(i)}void 0!==t.clickToUse?!0===t.clickToUse?void 0===this.activator&&(this.activator=new s(this.canvas.frame),this.activator.on("change",function(){e.body.emitter.emit("activate")})):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},M.prototype._updateVisibleIndices=function(){var t=this.body.nodes,e=this.body.edges;for(var i in this.body.nodeIndices=[],this.body.edgeIndices=[],t)t.hasOwnProperty(i)&&(this.clustering._isClusteredNode(i)||!1!==t[i].options.hidden||this.body.nodeIndices.push(t[i].id));for(var n in e)if(e.hasOwnProperty(n)){var o=e[n],r=t[o.fromId],a=t[o.toId],s=void 0!==r&&void 0!==a;!this.clustering._isClusteredEdge(n)&&!1===o.options.hidden&&s&&!1===r.options.hidden&&!1===a.options.hidden&&this.body.edgeIndices.push(o.id)}},M.prototype.bindEventListeners=function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.edgesHandler._updateState(),t.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){t.clustering._updateState(),t._updateVisibleIndices(),t._updateValueRange(t.body.nodes),t._updateValueRange(t.body.edges),t.body.emitter.emit("startSimulation"),t.body.emitter.emit("_requestRedraw")})},M.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.log("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var e=r.DOTToGraph(t.dot);this.setData(e)}else if(t&&t.gephi){console.log("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var i=a.parseGephi(t.gephi);this.setData(i)}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},M.prototype.destroy=function(){for(var t in this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images,this.body.nodes)this.body.nodes.hasOwnProperty(t)&&delete this.body.nodes[t];for(var e in this.body.edges)this.body.edges.hasOwnProperty(e)&&delete this.body.edges[e];o.recursiveDOMDelete(this.body.container)},M.prototype._updateValueRange=function(t){var e,i=void 0,n=void 0,o=0;for(e in t)if(t.hasOwnProperty(e)){var r=t[e].getValue();void 0!==r&&(i=void 0===i?r:Math.min(r,i),n=void 0===n?r:Math.max(r,n),o+=r)}if(void 0!==i&&void 0!==n)for(e in t)t.hasOwnProperty(e)&&t[e].setValueRange(i,n,o)},M.prototype.isActive=function(){return!this.activator||this.activator.active},M.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},M.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},M.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},M.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},M.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},M.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},M.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},M.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},M.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},M.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},M.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},M.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},M.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},M.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},M.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},M.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},M.prototype.editNodeMode=function(){return console.log("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},M.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},M.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},M.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},M.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},M.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},M.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},M.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},M.prototype.getConnectedNodes=function(t){return void 0!==this.body.nodes[t]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},M.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},M.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},M.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},M.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},M.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},M.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},M.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments)},M.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments)},M.prototype.getNodeAt=function(){var t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},M.prototype.getEdgeAt=function(){var t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},M.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},M.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},M.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.redraw()},M.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},M.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},M.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},M.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},M.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},M.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},M.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},M.prototype.getOptionsFromConfigurator=function(){var t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t},t.exports=M},function(t,e,i){"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.circle=function(t,e,i){this.beginPath(),this.arc(t,e,i,0,2*Math.PI,!1),this.closePath()},CanvasRenderingContext2D.prototype.square=function(t,e,i){this.beginPath(),this.rect(t-i,e-i,2*i,2*i),this.closePath()},CanvasRenderingContext2D.prototype.triangle=function(t,e,i){this.beginPath(),e+=.275*(i*=1.15);var n=2*i,o=n/2,r=Math.sqrt(3)/6*n,a=Math.sqrt(n*n-o*o);this.moveTo(t,e-(a-r)),this.lineTo(t+o,e+r),this.lineTo(t-o,e+r),this.lineTo(t,e-(a-r)),this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(t,e,i){this.beginPath(),e-=.275*(i*=1.15);var n=2*i,o=n/2,r=Math.sqrt(3)/6*n,a=Math.sqrt(n*n-o*o);this.moveTo(t,e+(a-r)),this.lineTo(t+o,e-r),this.lineTo(t-o,e-r),this.lineTo(t,e+(a-r)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(t,e,i){this.beginPath(),e+=.1*(i*=.82);for(var n=0;n<10;n++){var o=n%2==0?1.3*i:.5*i;this.lineTo(t+o*Math.sin(2*n*Math.PI/10),e-o*Math.cos(2*n*Math.PI/10))}this.closePath()},CanvasRenderingContext2D.prototype.diamond=function(t,e,i){this.beginPath(),this.lineTo(t,e+i),this.lineTo(t+i,e),this.lineTo(t,e-i),this.lineTo(t-i,e),this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,n,o){var r=Math.PI/180;i-2*o<0&&(o=i/2),n-2*o<0&&(o=n/2),this.beginPath(),this.moveTo(t+o,e),this.lineTo(t+i-o,e),this.arc(t+i-o,e+o,o,270*r,360*r,!1),this.lineTo(t+i,e+n-o),this.arc(t+i-o,e+n-o,o,0,90*r,!1),this.lineTo(t+o,e+n),this.arc(t+o,e+n-o,o,90*r,180*r,!1),this.lineTo(t,e+o),this.arc(t+o,e+o,o,180*r,270*r,!1),this.closePath()},CanvasRenderingContext2D.prototype.ellipse_vis=function(t,e,i,n){var o=i/2*.5522848,r=n/2*.5522848,a=t+i,s=e+n,l=t+i/2,u=e+n/2;this.beginPath(),this.moveTo(t,u),this.bezierCurveTo(t,u-r,l-o,e,l,e),this.bezierCurveTo(l+o,e,a,u-r,a,u),this.bezierCurveTo(a,u+r,l+o,s,l,s),this.bezierCurveTo(l-o,s,t,u+r,t,u),this.closePath()},CanvasRenderingContext2D.prototype.database=function(t,e,i,n){var o=n*(1/3),r=i/2*.5522848,a=o/2*.5522848,s=t+i,l=e+o,u=t+i/2,d=e+o/2,h=e+(n-o/2),c=e+n;this.beginPath(),this.moveTo(s,d),this.bezierCurveTo(s,d+a,u+r,l,u,l),this.bezierCurveTo(u-r,l,t,d+a,t,d),this.bezierCurveTo(t,d-a,u-r,e,u,e),this.bezierCurveTo(u+r,e,s,d-a,s,d),this.lineTo(s,h),this.bezierCurveTo(s,h+a,u+r,c,u,c),this.bezierCurveTo(u-r,c,t,h+a,t,h),this.lineTo(t,d)},CanvasRenderingContext2D.prototype.dashedLine=function(t,e,i,n,o){this.beginPath(),this.moveTo(t,e);for(var r=o.length,a=i-t,s=n-e,l=s/a,u=Math.sqrt(a*a+s*s),d=0,h=!0,c=0,f=o[0];u>=.1;)(f=o[d++%r])>u&&(f=u),c=Math.sqrt(f*f/(1+l*l)),t+=c=a<0?-c:c,e+=l*c,!0===h?this.lineTo(t,e):this.moveTo(t,e),u-=f,h=!h},CanvasRenderingContext2D.prototype.hexagon=function(t,e,i){this.beginPath();var n=2*Math.PI/6;this.moveTo(t+i,e);for(var o=1;o<6;o++)this.lineTo(t+i*Math.cos(n*o),e+i*Math.sin(n*o));this.closePath()})},function(t,e,i){e.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."},e.en_EN=e.en,e.en_US=e.en,e.de={edit:"Editieren",del:"Lösche Auswahl",back:"Zurück",addNode:"Knoten hinzufügen",addEdge:"Kante hinzufügen",editNode:"Knoten editieren",editEdge:"Kante editieren",addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",deleteClusterError:"Cluster können nicht gelöscht werden.",editClusterError:"Cluster können nicht editiert werden."},e.de_DE=e.de,e.es={edit:"Editar",del:"Eliminar selección",back:"Átras",addNode:"Añadir nodo",addEdge:"Añadir arista",editNode:"Editar nodo",editEdge:"Editar arista",addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",createEdgeError:"No se puede conectar una arista a un grupo.",deleteClusterError:"No es posible eliminar grupos.",editClusterError:"No es posible editar grupos."},e.es_ES=e.es,e.it={edit:"Modifica",del:"Cancella la selezione",back:"Indietro",addNode:"Aggiungi un nodo",addEdge:"Aggiungi un vertice",editNode:"Modifica il nodo",editEdge:"Modifica il vertice",addDescription:"Clicca per aggiungere un nuovo nodo",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",createEdgeError:"Non si possono collegare vertici ad un cluster",deleteClusterError:"I cluster non possono essere cancellati",editClusterError:"I clusters non possono essere modificati."},e.it_IT=e.it,e.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd.",editClusterError:"Clusters kunnen niet worden aangepast."},e.nl_NL=e.nl,e.nl_BE=e.nl,e["pt-br"]={edit:"Editar",del:"Remover selecionado",back:"Voltar",addNode:"Adicionar nó",addEdge:"Adicionar aresta",editNode:"Editar nó",editEdge:"Editar aresta",addDescription:"Clique em um espaço em branco para adicionar um novo nó",edgeDescription:"Clique em um nó e arraste a aresta até outro nó para conectá-los",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nó para conectá-los",createEdgeError:"Não foi possível linkar arestas a um cluster.",deleteClusterError:"Clusters não puderam ser removidos.",editClusterError:"Clusters não puderam ser editados."},e["pt-BR"]=e["pt-br"],e.pt_BR=e["pt-br"],e.pt_br=e["pt-br"],e.ru={edit:"Редактировать",del:"Удалить выбранное",back:"Назад",addNode:"Добавить узел",addEdge:"Добавить ребро",editNode:"Редактировать узел",editEdge:"Редактировать ребро",addDescription:"Кликните в свободное место, чтобы добавить новый узел.",edgeDescription:"Кликните на узел и протяните ребро к другому узлу, чтобы соединить их.",editEdgeDescription:"Кликните на контрольные точки и перетащите их в узел, чтобы подключиться к нему.",createEdgeError:"Невозможно соединить ребра в кластер.",deleteClusterError:"Кластеры не могут быть удалены",editClusterError:"Кластеры недоступны для редактирования."},e.ru_RU=e.ru,e.cn={edit:"编辑",del:"删除选定",back:"返回",addNode:"添加节点",addEdge:"添加连接线",editNode:"编辑节点",editEdge:"编辑连接线",addDescription:"单击空白处放置新节点。",edgeDescription:"单击某个节点并将该连接线拖动到另一个节点以连接它们。",editEdgeDescription:"单击控制节点并将它们拖到节点上连接。",createEdgeError:"无法将连接线连接到群集。",deleteClusterError:"无法删除群集。",editClusterError:"无法编辑群集。"},e.zh_CN=e.cn},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,n.default)(this,t),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return(0,o.default)(t,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,e=this.image.height;this.width=t,this.height=e;var i=Math.floor(e/2),n=Math.floor(e/4),o=Math.floor(e/8),r=Math.floor(e/16),a=Math.floor(t/2),s=Math.floor(t/4),l=Math.floor(t/8),u=Math.floor(t/16);this.canvas.width=3*s,this.canvas.height=i,this.coordinates=[[0,0,a,i],[a,0,s,n],[a,n,l,o],[5*l,n,u,r]],this._fillMipMap()}}},{key:"initialized",value:function(){return void 0!==this.coordinates}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),e=this.coordinates[0];t.drawImage(this.image,e[0],e[1],e[2],e[3]);for(var i=1;i<this.NUM_ITERATIONS;i++){var n=this.coordinates[i-1],o=this.coordinates[i];t.drawImage(this.canvas,n[0],n[1],n[2],n[3],o[0],o[1],o[2],o[3])}}},{key:"drawImageAtPosition",value:function(t,e,i,n,o,r){if(this.initialized())if(e>2){e*=.5;for(var a=0;e>2&&a<this.NUM_ITERATIONS;)e*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);var s=this.coordinates[a];t.drawImage(this.canvas,s[0],s[1],s[2],s[3],i,n,o,r)}else t.drawImage(this.image,i,n,o,r)}}]),t}();e.default=a},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(2),s=function(){function t(){(0,n.default)(this,t),this.clear(),this.defaultIndex=0,this.groupsArray=[],this.groupIndex=0,this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},a.extend(this.options,this.defaultOptions)}return(0,o.default)(t,[{key:"setOptions",value:function(t){var e=["useDefaultGroups"];if(void 0!==t)for(var i in t)if(t.hasOwnProperty(i)&&-1===e.indexOf(i)){var n=t[i];this.add(i,n)}}},{key:"clear",value:function(){this.groups={},this.groupsArray=[]}},{key:"get",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.groups[t];if(void 0===i&&e)if(!1===this.options.useDefaultGroups&&this.groupsArray.length>0){var n=this.groupIndex%this.groupsArray.length;this.groupIndex++,(i={}).color=this.groups[this.groupsArray[n]],this.groups[t]=i}else{var o=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++,(i={}).color=this.defaultGroups[o],this.groups[t]=i}return i}},{key:"add",value:function(t,e){return this.groups[t]=e,this.groupsArray.push(t),e}}]),t}();e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(2),s=i(11),l=i(12),u=i(47).default,d=function(){function t(e,i,o,r){var s=this;if((0,n.default)(this,t),this.body=e,this.images=i,this.groups=o,this.layoutEngine=r,this.body.functions.createNode=this.create.bind(this),this.nodesListeners={add:function(t,e){s.add(e.items)},update:function(t,e){s.update(e.items,e.data,e.oldData)},remove:function(t,e){s.remove(e.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,n){if(e===t)return.5;var o=1/(e-t);return Math.max(0,(n-t)*o)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=a.bridgeObject(this.defaultOptions),this.bindEventListeners()}return(0,o.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("refreshNodes",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){a.forEach(t.nodesListeners,function(e,i){t.body.data.nodes&&t.body.data.nodes.off(i,e)}),delete t.body.functions.createNode,delete t.nodesListeners.add,delete t.nodesListeners.update,delete t.nodesListeners.remove,delete t.nodesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){if(u.parseOptions(this.options,t),void 0!==t.shape)for(var e in this.body.nodes)this.body.nodes.hasOwnProperty(e)&&this.body.nodes[e].updateShape();if(void 0!==t.font)for(var i in this.body.nodes)this.body.nodes.hasOwnProperty(i)&&(this.body.nodes[i].updateLabelModule(),this.body.nodes[i].needsRefresh());if(void 0!==t.size)for(var n in this.body.nodes)this.body.nodes.hasOwnProperty(n)&&this.body.nodes[n].needsRefresh();void 0===t.hidden&&void 0===t.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.data.nodes;if(t instanceof s||t instanceof l)this.body.data.nodes=t;else if(Array.isArray(t))this.body.data.nodes=new s,this.body.data.nodes.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new s}if(i&&a.forEach(this.nodesListeners,function(t,e){i.off(e,t)}),this.body.nodes={},this.body.data.nodes){var n=this;a.forEach(this.nodesListeners,function(t,e){n.body.data.nodes.on(e,t)});var o=this.body.data.nodes.getIds();this.add(o,!0)}!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=void 0,n=[],o=0;o<t.length;o++){i=t[o];var r=this.body.data.nodes.get(i),a=this.create(r);n.push(a),this.body.nodes[i]=a}this.layoutEngine.positionInitially(n),!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,e,i){for(var n=this.body.nodes,o=!1,r=0;r<t.length;r++){var a=t[r],s=n[a],l=e[r];void 0!==s?s.setOptions(l)&&(o=!0):(o=!0,s=this.create(l),n[a]=s)}o||void 0===i||(o=e.some(function(t,e){var n=i[e];return n&&n.level!==t.level})),!0===o?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var e=this.body.nodes,i=0;i<t.length;i++)delete e[t[i]];this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return new e(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.forEach(this.body.nodes,function(i,n){var o=t.body.data.nodes.get(n);void 0!==o&&(!0===e&&i.setOptions({x:null,y:null}),i.setOptions({fixed:!1}),i.setOptions(o))})}},{key:"getPositions",value:function(t){var e={};if(void 0!==t){if(!0===Array.isArray(t)){for(var i=0;i<t.length;i++)if(void 0!==this.body.nodes[t[i]]){var n=this.body.nodes[t[i]];e[t[i]]={x:Math.round(n.x),y:Math.round(n.y)}}}else if(void 0!==this.body.nodes[t]){var o=this.body.nodes[t];e[t]={x:Math.round(o.x),y:Math.round(o.y)}}}else for(var r=0;r<this.body.nodeIndices.length;r++){var a=this.body.nodes[this.body.nodeIndices[r]];e[this.body.nodeIndices[r]]={x:Math.round(a.x),y:Math.round(a.y)}}return e}},{key:"storePositions",value:function(){var t=[],e=this.body.data.nodes.getDataSet();for(var i in e._data)if(e._data.hasOwnProperty(i)){var n=this.body.nodes[i];e._data[i].x==Math.round(n.x)&&e._data[i].y==Math.round(n.y)||t.push({id:n.id,x:Math.round(n.x),y:Math.round(n.y)})}e.update(t)}},{key:"getBoundingBox",value:function(t){if(void 0!==this.body.nodes[t])return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,e){var i=[];if(void 0!==this.body.nodes[t])for(var n=this.body.nodes[t],o={},r=0;r<n.edges.length;r++){var a=n.edges[r];"to"!==e&&a.toId==n.id?void 0===o[a.fromId]&&(i.push(a.fromId),o[a.fromId]=!0):"from"!==e&&a.fromId==n.id&&void 0===o[a.toId]&&(i.push(a.toId),o[a.toId]=!0)}return i}},{key:"getConnectedEdges",value:function(t){var e=[];if(void 0!==this.body.nodes[t])for(var i=this.body.nodes[t],n=0;n<i.edges.length;n++)e.push(i.edges[n].id);else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return e}},{key:"moveNode",value:function(t,e,i){var n=this;void 0!==this.body.nodes[t]?(this.body.nodes[t].x=Number(e),this.body.nodes[t].y=Number(i),setTimeout(function(){n.body.emitter.emit("startSimulation")},0)):console.log("Node id supplied to moveNode does not exist. Provided: ",t)}}]),t}();e.default=d},function(t,e,i){t.exports={default:i(189),__esModule:!0}},function(t,e,i){i(49),i(60),t.exports=i(190)},function(t,e,i){var n=i(86),o=i(13)("iterator"),r=i(31);t.exports=i(7).isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||r.hasOwnProperty(n(e))}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(192).default,s=i(48).default,l=function(){function t(e,i,o,r){var s=this;(0,n.default)(this,t),this.ctx=e,this.parent=i,this.lines=new a(function(t,i){if(void 0===t)return 0;var n=s.parent.getFormattingValues(e,o,r,i),a=0;return""!==t&&(a=s.ctx.measureText(t).width),{width:a,values:n}})}return(0,o.default)(t,[{key:"process",value:function(t){if(!s.isValidLabel(t))return this.lines.finalize();var e=this.parent.fontOptions;t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n");var i=String(t).split("\n"),n=i.length;if(e.multi)for(var o=0;o<n;o++){var r=this.splitBlocks(i[o],e.multi);if(void 0!==r)if(0!==r.length){if(e.maxWdt>0)for(var a=0;a<r.length;a++){var l=r[a].mod,u=r[a].text;this.splitStringIntoLines(u,l,!0)}else for(var d=0;d<r.length;d++){var h=r[d].mod,c=r[d].text;this.lines.append(c,h)}this.lines.newLine()}else this.lines.newLine("")}else if(e.maxWdt>0)for(var f=0;f<n;f++)this.splitStringIntoLines(i[f]);else for(var p=0;p<n;p++)this.lines.newLine(i[p]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var e="none";return"markdown"===t||"md"===t?e="markdown":!0!==t&&"html"!==t||(e="html"),e}},{key:"splitHtmlBlocks",value:function(t){for(var e=[],i={bold:!1,ital:!1,mono:!1,spacing:!1,position:0,buffer:"",modStack:[],mod:function(){return 0===this.modStack.length?"normal":this.modStack[0]},modName:function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":i.bold&&i.ital?"boldital":i.bold?"bold":i.ital?"ital":void 0},emitBlock:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(e.push({text:this.buffer,mod:this.modName()}),this.buffer="")},add:function(t){" "===t&&(i.spacing=!0),i.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=t&&(this.buffer+=t)}};i.position<t.length;){var n=t.charAt(i.position);/[ \t]/.test(n)?i.mono?i.add(n):i.spacing=!0:/</.test(n)?i.mono||i.bold||!/<b>/.test(t.substr(i.position,3))?i.mono||i.ital||!/<i>/.test(t.substr(i.position,3))?!i.mono&&/<code>/.test(t.substr(i.position,6))?(i.emitBlock(),i.mono=!0,i.modStack.unshift("mono"),i.position+=5):!i.mono&&"bold"===i.mod()&&/<\/b>/.test(t.substr(i.position,4))?(i.emitBlock(),i.bold=!1,i.modStack.shift(),i.position+=3):!i.mono&&"ital"===i.mod()&&/<\/i>/.test(t.substr(i.position,4))?(i.emitBlock(),i.ital=!1,i.modStack.shift(),i.position+=3):"mono"===i.mod()&&/<\/code>/.test(t.substr(i.position,7))?(i.emitBlock(),i.mono=!1,i.modStack.shift(),i.position+=6):i.add(n):(i.emitBlock(),i.ital=!0,i.modStack.unshift("ital"),i.position+=2):(i.emitBlock(),i.bold=!0,i.modStack.unshift("bold"),i.position+=2):/&/.test(n)?/&lt;/.test(t.substr(i.position,4))?(i.add("<"),i.position+=3):/&amp;/.test(t.substr(i.position,5))?(i.add("&"),i.position+=4):i.add("&"):i.add(n),i.position++}return i.emitBlock(),e}},{key:"splitMarkdownBlocks",value:function(t){for(var e=[],i={bold:!1,ital:!1,mono:!1,beginable:!0,spacing:!1,position:0,buffer:"",modStack:[],mod:function(){return 0===this.modStack.length?"normal":this.modStack[0]},modName:function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":i.bold&&i.ital?"boldital":i.bold?"bold":i.ital?"ital":void 0},emitBlock:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(e.push({text:this.buffer,mod:this.modName()}),this.buffer="")},add:function(t){" "===t&&(i.spacing=!0),i.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=t&&(this.buffer+=t)}};i.position<t.length;){var n=t.charAt(i.position);/[ \t]/.test(n)?(i.mono?i.add(n):i.spacing=!0,i.beginable=!0):/\\/.test(n)?i.position<t.length+1&&(i.position++,n=t.charAt(i.position),/ \t/.test(n)?i.spacing=!0:(i.add(n),i.beginable=!1)):i.mono||i.bold||!i.beginable&&!i.spacing||!/\*/.test(n)?i.mono||i.ital||!i.beginable&&!i.spacing||!/\_/.test(n)?!i.mono&&(i.beginable||i.spacing)&&/`/.test(n)?(i.emitBlock(),i.mono=!0,i.modStack.unshift("mono")):!i.mono&&"bold"===i.mod()&&/\*/.test(n)?i.position===t.length-1||/[.,_` \t\n]/.test(t.charAt(i.position+1))?(i.emitBlock(),i.bold=!1,i.modStack.shift()):i.add(n):!i.mono&&"ital"===i.mod()&&/\_/.test(n)?i.position===t.length-1||/[.,*` \t\n]/.test(t.charAt(i.position+1))?(i.emitBlock(),i.ital=!1,i.modStack.shift()):i.add(n):i.mono&&"mono"===i.mod()&&/`/.test(n)?i.position===t.length-1||/[.,*_ \t\n]/.test(t.charAt(i.position+1))?(i.emitBlock(),i.mono=!1,i.modStack.shift()):i.add(n):(i.add(n),i.beginable=!1):(i.emitBlock(),i.ital=!0,i.modStack.unshift("ital")):(i.emitBlock(),i.bold=!0,i.modStack.unshift("bold")),i.position++}return i.emitBlock(),e}},{key:"splitBlocks",value:function(t,e){var i=this.decodeMarkupSystem(e);return"none"===i?[{text:t,mod:"normal"}]:"markdown"===i?this.splitMarkdownBlocks(t):"html"===i?this.splitHtmlBlocks(t):void 0}},{key:"overMaxWidth",value:function(t){var e=this.ctx.measureText(t).width;return this.lines.curWidth()+e>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var e="",i=0;i<t.length;){var n=e+(""===e?"":" ")+t[i];if(this.overMaxWidth(n))break;e=n,i++}return i}},{key:"getLongestFitWord",value:function(t){for(var e=0;e<t.length&&!this.overMaxWidth(t.slice(0,e));)e++;return e}},{key:"splitStringIntoLines",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(t=(t=t.replace(/^( +)/g,"$1\r")).replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r")).split("\r");n.length>0;){var o=this.getLongestFit(n);if(0===o){var r=n[0],a=this.getLongestFitWord(r);this.lines.newLine(r.slice(0,a),e),n[0]=r.slice(a)}else{var s=o;" "===n[o-1]?o--:" "===n[s]&&s++;var l=n.slice(0,o).join("");o==n.length&&i?this.lines.append(l,e):this.lines.newLine(l,e),n=n.slice(s)}}}}]),t}();e.default=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(90)),o=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,o.default)(this,t),this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}return(0,r.default)(t,[{key:"_add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";void 0===this.lines[t]&&(this.lines[t]={width:0,height:0,blocks:[]});var o=e;void 0!==e&&""!==e||(o=" ");var r=this.measureText(o,i),a=(0,n.default)({},r.values);a.text=e,a.width=r.width,a.mod=i,void 0!==e&&""!==e||(a.width=0),this.lines[t].blocks.push(a),this.lines[t].width+=a.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return void 0===t?0:t.width}},{key:"append",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e)}},{key:"newLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var e=this.lines[t],i=0;if(void 0!==e.blocks)for(var n=0;n<e.blocks.length;n++){var o=e.blocks[n];i<o.height&&(i=o.height)}e.height=i}}},{key:"determineLabelSize",value:function(){for(var t=0,e=0,i=0;i<this.lines.length;i++){var n=this.lines[i];n.width>t&&(t=n.width),e+=n.height}this.width=t,this.height=e}},{key:"removeEmptyBlocks",value:function(){for(var t=[],e=0;e<this.lines.length;e++){var i=this.lines[e];if(0!==i.blocks.length&&(e!==this.lines.length-1||0!==i.width)){var o={};(0,n.default)(o,i),o.blocks=[];for(var r=void 0,a=[],s=0;s<i.blocks.length;s++){var l=i.blocks[s];0!==l.width?a.push(l):void 0===r&&(r=l)}0===a.length&&void 0!==r&&a.push(r),o.blocks=a,t.push(o)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),t}();e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){(0,o.default)(this,e);var s=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r));return s._setMargins(r),s}return(0,s.default)(e,t),(0,r.default)(e,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i);this.width=n.width+this.margin.right+this.margin.left,this.height=n.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,o,r){this.resize(t,n,o),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,r),t.roundRect(this.left,this.top,this.width,this.height,r.borderRadius),this.performFill(t,r),this.updateBoundingBox(e,i,t,n,o),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,o)}},{key:"updateBoundingBox",value:function(t,e,i,n,o){this._updateBoundingBox(t,e,i,n,o);var r=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(r)}},{key:"distanceToBorder",value:function(t,e){this.resize(t);var i=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}}]),e}(l(i(23)).default);e.default=u},function(t,e,i){i(195),t.exports=i(7).Object.getPrototypeOf},function(t,e,i){var n=i(41),o=i(85);i(87)("getPrototypeOf",function(){return function(t){return o(n(t))}})},function(t,e,i){t.exports={default:i(197),__esModule:!0}},function(t,e,i){i(198),t.exports=i(7).Object.setPrototypeOf},function(t,e,i){var n=i(17);n(n.S,"Object",{setPrototypeOf:i(199).set})},function(t,e,i){var n=i(32),o=i(27),r=function(t,e){if(o(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:s.default||("__proto__"in{}?function(t,e,n){try{(n=i(80)(Function.call,i(89).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return r(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:r}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){(0,o.default)(this,e);var s=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r));return s._setMargins(r),s}return(0,s.default)(e,t),(0,r.default)(e,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i),o=Math.max(n.width+this.margin.right+this.margin.left,n.height+this.margin.top+this.margin.bottom);this.options.size=o/2,this.width=o,this.height=o,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,o,r){this.resize(t,n,o),this.left=e-this.width/2,this.top=i-this.height/2,this._drawRawCircle(t,e,i,r),this.updateBoundingBox(e,i),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,i,n,o)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size}},{key:"distanceToBorder",value:function(t,e){return this.resize(t),.5*this.width}}]),e}(l(i(73)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r,s,l){(0,o.default)(this,e);var u=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r));return u.setImages(s,l),u}return(0,s.default)(e,t),(0,r.default)(e,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,n=void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height;if(n){var o=2*this.options.size;return this.width=o,this.height=o,void(this.radius=.5*this.width)}this.needsRefresh(e,i)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,n,o,r){this.switchImages(n),this.resize(),this.left=e-this.width/2,this.top=i-this.height/2,this._drawRawCircle(t,e,i,r),t.save(),t.clip(),this._drawImageAtPosition(t,r),t.restore(),this._drawImageLabel(t,e,i,n,o),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(t,e){return this.resize(t),.5*this.width}}]),e}(l(i(73)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){(0,o.default)(this,e);var s=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r));return s._setMargins(r),s}return(0,s.default)(e,t),(0,r.default)(e,[{key:"resize",value:function(t,e,i){if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i).width+this.margin.right+this.margin.left;this.width=n,this.height=n,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,o,r){this.resize(t,n,o),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,r),t.database(e-this.width/2,i-this.height/2,this.width,this.height),this.performFill(t,r),this.updateBoundingBox(e,i,t,n,o),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l(i(23)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"diamond",4,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l(i(24)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"circle",2,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t,e){return this.resize(t),this.options.size}}]),e}(l(i(24)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i);this.height=2*n.height,this.width=n.width+n.height,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,i,n,o,r){this.resize(t,n,o),this.left=e-.5*this.width,this.top=i-.5*this.height,this.initContextForDraw(t,r),t.ellipse_vis(this.left,this.top,this.width,this.height),this.performFill(t,r),this.updateBoundingBox(e,i,t,n,o),this.labelModule.draw(t,e,i,n,o)}},{key:"distanceToBorder",value:function(t,e){this.resize(t);var i=.5*this.width,n=.5*this.height,o=Math.sin(e)*i,r=Math.cos(e)*n;return i*n/Math.sqrt(o*o+r*r)}}]),e}(l(i(23)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){(0,o.default)(this,e);var s=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r));return s._setMargins(r),s}return(0,s.default)(e,t),(0,r.default)(e,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,n,o,r){this.resize(t,n,o),this.options.icon.size=this.options.icon.size||50,this.left=e-this.width/2,this.top=i-this.height/2,this._icon(t,e,i,n,o,r),void 0!==this.options.label&&this.labelModule.draw(t,this.left+this.iconSize.width/2+this.margin.left,i+this.height/2+5,n),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-.5*this.options.icon.size,this.boundingBox.left=t-.5*this.options.icon.size,this.boundingBox.right=t+.5*this.options.icon.size,this.boundingBox.bottom=e+.5*this.options.icon.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}},{key:"_icon",value:function(t,e,i,n,o,r){var a=Number(this.options.icon.size);void 0!==this.options.icon.code?(t.font=(n?"bold ":"")+a+"px "+this.options.icon.face,t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",this.enableShadow(t,r),t.fillText(this.options.icon.code,e,i),this.disableShadow(t,r)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l(i(23)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r,s,l){(0,o.default)(this,e);var u=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r));return u.setImages(s,l),u}return(0,s.default)(e,t),(0,r.default)(e,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,n=void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height;if(n){var o=2*this.options.size;return this.width=o,void(this.height=o)}this.needsRefresh(e,i)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,n,o,r){if(this.switchImages(n),this.resize(),this.left=e-this.width/2,this.top=i-this.height/2,!0===this.options.shapeProperties.useBorderWithImage){var a=this.options.borderWidth,s=this.options.borderWidthSelected||2*this.options.borderWidth,l=(n?s:a)/this.body.view.scale;t.lineWidth=Math.min(this.width,l),t.beginPath(),t.strokeStyle=n?this.options.color.highlight.border:o?this.options.color.hover.border:this.options.color.border,t.fillStyle=n?this.options.color.highlight.background:o?this.options.color.hover.background:this.options.color.background,t.rect(this.left-.5*t.lineWidth,this.top-.5*t.lineWidth,this.width+t.lineWidth,this.height+t.lineWidth),t.fill(),this.performStroke(t,r),t.closePath()}this._drawImageAtPosition(t,r),this._drawImageLabel(t,e,i,n,o),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){this.resize(),this._updateBoundingBox(t,e),void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l(i(73)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"square",2,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l(i(24)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"hexagon",4,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l(i(24)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"star",4,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l(i(24)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){(0,o.default)(this,e);var s=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r));return s._setMargins(r),s}return(0,s.default)(e,t),(0,r.default)(e,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.textSize=this.labelModule.getTextSize(t,e,i),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,n,o,r){this.resize(t,n,o),this.left=e-this.width/2,this.top=i-this.height/2,this.enableShadow(t,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,o),this.disableShadow(t,r),this.updateBoundingBox(e,i,t,n,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l(i(23)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"triangle",3,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l(i(24)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"triangleDown",3,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(l(i(24)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(2),s=i(11),l=i(12),u=i(74).default,d=function(){function t(e,i,o){var r=this;(0,n.default)(this,t),this.body=e,this.images=i,this.groups=o,this.body.functions.createEdge=this.create.bind(this),this.edgesListeners={add:function(t,e){r.add(e.items)},update:function(t,e){r.update(e.items)},remove:function(t,e){r.remove(e.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,n){if(e===t)return.5;var o=1/(e-t);return Math.max(0,(n-t)*o)}},selectionWidth:1.5,selfReferenceSize:20,shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},a.deepExtend(this.options,this.defaultOptions),this.bindEventListeners()}return(0,o.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_forceDisableDynamicCurves",function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"dynamic"===e&&(e="continuous");var n=!1;for(var o in t.body.edges)if(t.body.edges.hasOwnProperty(o)){var r=t.body.edges[o],a=t.body.data.edges._data[o];if(void 0!==a){var s=a.smooth;void 0!==s&&!0===s.enabled&&"dynamic"===s.type&&(void 0===e?r.setOptions({smooth:!1}):r.setOptions({smooth:{type:e}}),n=!0)}}!0===i&&!0===n&&t.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){t.reconnectEdges()}),this.body.emitter.on("refreshEdges",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){a.forEach(t.edgesListeners,function(e,i){t.body.data.edges&&t.body.data.edges.off(i,e)}),delete t.body.functions.createEdge,delete t.edgesListeners.add,delete t.edgesListeners.update,delete t.edgesListeners.remove,delete t.edgesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){u.parseOptions(this.options,t,!0,this.defaultOptions,!0);var e=!1;if(void 0!==t.smooth)for(var i in this.body.edges)this.body.edges.hasOwnProperty(i)&&(e=this.body.edges[i].updateEdgeType()||e);if(void 0!==t.font)for(var n in this.body.edges)this.body.edges.hasOwnProperty(n)&&this.body.edges[n].updateLabelModule();void 0===t.hidden&&void 0===t.physics&&!0!==e||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.body.data.edges;if(t instanceof s||t instanceof l)this.body.data.edges=t;else if(Array.isArray(t))this.body.data.edges=new s,this.body.data.edges.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.edges=new s}if(n&&a.forEach(this.edgesListeners,function(t,e){n.off(e,t)}),this.body.edges={},this.body.data.edges){a.forEach(this.edgesListeners,function(t,i){e.body.data.edges.on(i,t)});var o=this.body.data.edges.getIds();this.add(o,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.edges,n=this.body.data.edges,o=0;o<t.length;o++){var r=t[o],a=i[r];a&&a.disconnect();var s=n.get(r,{showInternalIds:!0});i[r]=this.create(s)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var e=this.body.edges,i=this.body.data.edges,n=!1,o=0;o<t.length;o++){var r=t[o],a=i.get(r),s=e[r];void 0!==s?(s.disconnect(),n=s.setOptions(a)||n,s.connect()):(this.body.edges[r]=this.create(a),n=!0)}!0===n?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!==t.length){var i=this.body.edges;a.forEach(t,function(t){var e=i[t];void 0!==e&&e.remove()}),e&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;a.forEach(this.body.edges,function(e,i){var n=t.body.data.edges._data[i];void 0!==n&&e.setOptions(n)})}},{key:"create",value:function(t){return new u(t,this.body,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,e=this.body.nodes,i=this.body.edges;for(t in e)e.hasOwnProperty(t)&&(e[t].edges=[]);for(t in i)if(i.hasOwnProperty(t)){var n=i[t];n.from=null,n.to=null,n.connect()}}},{key:"getConnectedNodes",value:function(t){var e=[];if(void 0!==this.body.edges[t]){var i=this.body.edges[t];void 0!==i.fromId&&e.push(i.fromId),void 0!==i.toId&&e.push(i.toId)}return e}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,e=[];a.forEach(this.body.edges,function(i,n){var o=t.body.nodes[i.toId],r=t.body.nodes[i.fromId];void 0!==o&&!0===o.isCluster||void 0!==r&&!0===r.isCluster||void 0!==o&&void 0!==r||e.push(n)}),this.remove(e,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.edges,e=this.body.data.edges,i=[];e.forEach(function(e,n){void 0===t[n]&&i.push(n)}),this.add(i,!0)}}]),t}();e.default=d},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(30)),o=u(i(3)),r=u(i(0)),a=u(i(1)),s=u(i(4)),l=u(i(5));function u(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,i,n){return(0,r.default)(this,e),(0,s.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,l.default)(e,t),(0,a.default)(e,[{key:"_line",value:function(t,e,i){var n=i[0],o=i[1];this._bezierCurve(t,e,n,o)}},{key:"_getViaCoordinates",value:function(){var t=this.from.x-this.to.x,e=this.from.y-this.to.y,i=void 0,n=void 0,o=void 0,r=void 0,a=this.options.smooth.roundness;return(Math.abs(t)>Math.abs(e)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(n=this.from.y,r=this.to.y,i=this.from.x-a*t,o=this.to.x+a*t):(n=this.from.y-a*e,r=this.to.y+a*e,i=this.from.x,o=this.to.x),[{x:i,y:n},{x:o,y:r}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e)}},{key:"_getDistanceToEdge",value:function(t,e,i,o,r,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates(),l=(0,n.default)(s,2),u=l[0],d=l[1];return this._getDistanceToBezierEdge(t,e,i,o,r,a,u,d)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),i=(0,n.default)(e,2),o=i[0],r=i[1],a=t,s=[];s[0]=Math.pow(1-a,3),s[1]=3*a*Math.pow(1-a,2),s[2]=3*Math.pow(a,2)*(1-a),s[3]=Math.pow(a,3);var l=s[0]*this.fromPoint.x+s[1]*o.x+s[2]*r.x+s[3]*this.toPoint.x,u=s[0]*this.fromPoint.y+s[1]*o.y+s[2]*r.y+s[3]*this.toPoint.y;return{x:l,y:u}}}]),e}(u(i(216)).default);e.default=d},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"_getDistanceToBezierEdge",value:function(t,e,i,n,o,r,a,s){var l=1e9,u=void 0,d=void 0,h=void 0,c=void 0,f=void 0,p=t,g=e,m=[0,0,0,0];for(d=1;d<10;d++)h=.1*d,m[0]=Math.pow(1-h,3),m[1]=3*h*Math.pow(1-h,2),m[2]=3*Math.pow(h,2)*(1-h),m[3]=Math.pow(h,3),c=m[0]*t+m[1]*a.x+m[2]*s.x+m[3]*i,f=m[0]*e+m[1]*a.y+m[2]*s.y+m[3]*n,d>0&&(l=(u=this._getDistanceToLine(p,g,c,f,o,r))<l?u:l),p=c,g=f;return l}}]),e}(l(i(75)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(30)),o=u(i(3)),r=u(i(0)),a=u(i(1)),s=u(i(4)),l=u(i(5));function u(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,i,n){(0,r.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n));return a._boundFunction=function(){a.positionBezierNode()},a.body.emitter.on("_repositionBezierNodes",a._boundFunction),a}return(0,l.default)(e,t),(0,a.default)(e,[{key:"setOptions",value:function(t){var e=!1;this.options.physics!==t.physics&&(e=!0),this.options=t,this.id=this.options.id,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.setupSupportNode(),this.connect(),!0===e&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this.body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this.body.nodes[this.via.id],this.via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var t="edgeId:"+this.id,e=this.body.functions.createNode({id:t,shape:"circle",physics:!0,hidden:!0});this.body.nodes[t]=e,this.via=e,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.via,i=t,o=void 0,r=void 0;if(this.from===this.to){var a=this._getCircleData(this.from),s=(0,n.default)(a,3),l=s[0],u=s[1],d=s[2],h=2*Math.PI*(1-i);o=l+d*Math.sin(h),r=u+d-d*(1-Math.cos(h))}else o=Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*e.x+Math.pow(i,2)*this.toPoint.x,r=Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*e.y+Math.pow(i,2)*this.toPoint.y;return{x:o,y:r}}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e,this.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,o,r){return this._getDistanceToBezierEdge(t,e,i,n,o,r,this.via)}}]),e}(u(i(75)).default);e.default=d},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var t=void 0,e=void 0,i=this.options.smooth.roundness,n=this.options.smooth.type,o=Math.abs(this.from.x-this.to.x),r=Math.abs(this.from.y-this.to.y);if("discrete"===n||"diagonalCross"===n){var a=void 0,s=void 0;a=s=o<=r?i*r:i*o,this.from.x>this.to.x&&(a=-a),this.from.y>=this.to.y&&(s=-s),t=this.from.x+a,e=this.from.y+s,"discrete"===n&&(o<=r?t=o<i*r?this.from.x:t:e=r<i*o?this.from.y:e)}else if("straightCross"===n){var l=(1-i)*o,u=(1-i)*r;o<=r?(l=0,this.from.y<this.to.y&&(u=-u)):(this.from.x<this.to.x&&(l=-l),u=0),t=this.to.x+l,e=this.to.y+u}else if("horizontal"===n){var d=(1-i)*o;this.from.x<this.to.x&&(d=-d),t=this.to.x+d,e=this.from.y}else if("vertical"===n){var h=(1-i)*r;this.from.y<this.to.y&&(h=-h),t=this.from.x,e=this.to.y+h}else if("curvedCW"===n){o=this.to.x-this.from.x,r=this.from.y-this.to.y;var c=Math.sqrt(o*o+r*r),f=Math.PI,p=(Math.atan2(r,o)+(.5*i+.5)*f)%(2*f);t=this.from.x+(.5*i+.5)*c*Math.sin(p),e=this.from.y+(.5*i+.5)*c*Math.cos(p)}else if("curvedCCW"===n){o=this.to.x-this.from.x,r=this.from.y-this.to.y;var g=Math.sqrt(o*o+r*r),m=Math.PI,v=(Math.atan2(r,o)+(.5*-i+.5)*m)%(2*m);t=this.from.x+(.5*i+.5)*g*Math.sin(v),e=this.from.y+(.5*i+.5)*g*Math.cos(v)}else{var y=void 0,_=void 0;y=_=o<=r?i*r:i*o,this.from.x>this.to.x&&(y=-y),this.from.y>=this.to.y&&(_=-_),t=this.from.x+y,e=this.from.y+_,o<=r?t=this.from.x<=this.to.x?this.to.x<t?this.to.x:t:this.to.x>t?this.to.x:t:e=this.from.y>=this.to.y?this.to.y>e?this.to.y:e:this.to.y<e?this.to.y:e}return{x:t,y:e}}},{key:"_findBorderPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._findBorderPositionBezier(t,e,i.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,o,r){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(t,e,i,n,o,r,a)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),i=t,n=Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*e.x+Math.pow(i,2)*this.toPoint.x,o=Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*e.y+Math.pow(i,2)*this.toPoint.y;return{x:n,y:o}}}]),e}(l(i(75)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"_line",value:function(t,e){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(t){return{x:(1-t)*this.fromPoint.x+t*this.toPoint.x,y:(1-t)*this.fromPoint.y+t*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){var i=this.to,n=this.from;t.id===this.from.id&&(i=this.from,n=this.to);var o=Math.atan2(i.y-n.y,i.x-n.x),r=i.x-n.x,a=i.y-n.y,s=Math.sqrt(r*r+a*a),l=(s-t.distanceToBorder(e,o))/s,u={};return u.x=(1-l)*n.x+l*i.x,u.y=(1-l)*n.y+l*i.y,u}},{key:"_getDistanceToEdge",value:function(t,e,i,n,o,r){return this._getDistanceToLine(t,e,i,n,o,r)}}]),e}(l(i(118)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(8)),o=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var s=i(120).default,l=i(221).default,u=i(222).default,d=i(223).default,h=i(224).default,c=i(121).default,f=i(225).default,p=i(226).default,g=i(2),m=i(119).default,v=function(){function t(e){(0,o.default)(this,t),this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0},g.extend(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return(0,r.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){t.stopSimulation(),t.ready=!1}),this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=!1,t.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options),!0===t.ready&&t.startSimulation()}),this.body.emitter.on("startSimulation",function(){!0===t.ready&&t.startSimulation()}),this.body.emitter.on("stopSimulation",function(){t.stopSimulation()}),this.body.emitter.on("destroy",function(){t.stopSimulation(!1),t.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function(t){void 0!==t&&(!1===t?(this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation()):!0===t?(this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation()):(this.physicsEnabled=!0,g.selectiveNotDeepExtend(["stabilization"],this.options,t),g.mergeOptions(this.options,t,"stabilization"),void 0===t.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation()),this.timestep=this.options.timestep)),this.init()}},{key:"init",value:function(){var t;"forceAtlas2Based"===this.options.solver?(t=this.options.forceAtlas2Based,this.nodesSolver=new f(this.body,this.physicsBody,t),this.edgesSolver=new d(this.body,this.physicsBody,t),this.gravitySolver=new p(this.body,this.physicsBody,t)):"repulsion"===this.options.solver?(t=this.options.repulsion,this.nodesSolver=new l(this.body,this.physicsBody,t),this.edgesSolver=new d(this.body,this.physicsBody,t),this.gravitySolver=new c(this.body,this.physicsBody,t)):"hierarchicalRepulsion"===this.options.solver?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new u(this.body,this.physicsBody,t),this.edgesSolver=new h(this.body,this.physicsBody,t),this.gravitySolver=new c(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new s(this.body,this.physicsBody,t),this.edgesSolver=new d(this.body,this.physicsBody,t),this.gravitySolver=new c(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=this.simulationStep.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.stabilized=!0,!0===t&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,!0===t&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=Date.now();this.physicsTick(),(Date.now()-t<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||!0===this.startedStabilization)&&setTimeout(function(){t.body.emitter.emit("stabilized",{iterations:e}),t.startedStabilization=!1,t.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}},{key:"physicsTick",value:function(){this._startStabilizing(),!0!==this.stabilized&&(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled?(this.adaptiveCounter%this.adaptiveInterval==0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),!0===this.stabilized&&this.revert(),this.stabilizationIterations++)}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,e=this.body.edges;for(var i in t)t.hasOwnProperty(i)&&!0===t[i].options.physics&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var n in e)e.hasOwnProperty(n)&&!0===e[n].options.physics&&this.physicsBody.physicsEdgeIndices.push(e[n].id);for(var o=0;o<this.physicsBody.physicsNodeIndices.length;o++){var r=this.physicsBody.physicsNodeIndices[o];this.physicsBody.forces[r]={x:0,y:0},void 0===this.physicsBody.velocities[r]&&(this.physicsBody.velocities[r]={x:0,y:0})}for(var a in this.physicsBody.velocities)void 0===t[a]&&delete this.physicsBody.velocities[a]}},{key:"revert",value:function(){var t=(0,n.default)(this.previousStates),e=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var o=0;o<t.length;o++){var r=t[o];void 0!==e[r]?!0===e[r].options.physics&&(this.referenceState[r]={positions:{x:e[r].x,y:e[r].y}},i[r].x=this.previousStates[r].vx,i[r].y=this.previousStates[r].vy,e[r].x=this.previousStates[r].x,e[r].y=this.previousStates[r].y):delete this.previousStates[r]}}},{key:"_evaluateStepQuality",value:function(){var t=void 0,e=void 0,i=this.body.nodes,n=this.referenceState;for(var o in this.referenceState)if(this.referenceState.hasOwnProperty(o)&&void 0!==i[o]&&(t=i[o].x-n[o].positions.x,e=i[o].y-n[o].positions.y,Math.sqrt(Math.pow(t,2)+Math.pow(e,2))>.3))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,e=0,i=0,n=0;n<t.length;n++){var o=t[n],r=this._performStep(o);e=Math.max(e,r),i+=r}this.adaptiveTimestepEnabled=i/t.length<5,this.stabilized=e<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,e,i){t+=(e-this.modelOptions.damping*t)/i*this.timestep;var n=this.options.maxVelocity||1e9;return Math.abs(t)>n&&(t=t>0?n:-n),t}},{key:"_performStep",value:function(t){var e=this.body.nodes[t],i=this.physicsBody.forces[t],n=this.physicsBody.velocities[t];return this.previousStates[t]={x:e.x,y:e.y,vx:n.x,vy:n.y},!1===e.options.fixed.x?(n.x=this.calculateComponentVelocity(n.x,i.x,e.options.mass),e.x+=n.x*this.timestep):(i.x=0,n.x=0),!1===e.options.fixed.y?(n.y=this.calculateComponentVelocity(n.y,i.y,e.options.mass),e.y+=n.y*this.timestep):(i.y=0,n.y=0),Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var e in t)if(t.hasOwnProperty(e)&&t[e].x&&t[e].y){var i=t[e].options.fixed;this.freezeCache[e]={x:i.x,y:i.y},i.x=!0,i.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var e in t)t.hasOwnProperty(e)&&void 0!==this.freezeCache[e]&&(t[e].options.fixed.x=this.freezeCache[e].x,t[e].options.fixed.y=this.freezeCache[e].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.stabilization.iterations;"number"!=typeof e&&(e=this.options.stabilization.iterations,console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),0!==this.physicsBody.physicsNodeIndices.length?(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,setTimeout(function(){return t._stabilizationBatch()},0)):this.ready=!0}},{key:"_startStabilizing",value:function(){return!0!==this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,e=function(){return!1===t.stabilized&&t.stabilizationIterations<t.targetIterations},i=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&i();for(var n=0;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;i(),e()?setTimeout(this._stabilizationBatch.bind(this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var e=0;e<this.physicsBody.physicsNodeIndices.length;e++){var i=this.physicsBody.physicsNodeIndices[e],n=this.body.nodes[i],o=this.physicsBody.forces[i],r=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.x,2)),a=Math.min(Math.max(5,r),15),s=3*a,l=g.HSVToHex((180-180*Math.min(1,Math.max(0,.03*r)))/360,1,1),u={x:n.x+20*o.x,y:n.y+20*o.y};t.lineWidth=a,t.strokeStyle=l,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(u.x,u.y),t.stroke();var d=Math.atan2(o.y,o.x);t.fillStyle=l,m.draw(t,{type:"arrow",point:u,angle:d,length:s}),t.fill()}}}]),t}();e.default=v},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,i,o){(0,n.default)(this,t),this.body=e,this.physicsBody=i,this.setOptions(o)}return(0,o.default)(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,n,o,r,a,s,l=this.body.nodes,u=this.physicsBody.physicsNodeIndices,d=this.physicsBody.forces,h=this.options.nodeDistance,c=-2/3/h,f=0;f<u.length-1;f++){a=l[u[f]];for(var p=f+1;p<u.length;p++)t=(s=l[u[p]]).x-a.x,e=s.y-a.y,0===(i=Math.sqrt(t*t+e*e))&&(t=i=.1*Math.random()),i<2*h&&(r=i<.5*h?1:c*i+4/3,n=t*(r/=i),o=e*r,d[a.id].x-=n,d[a.id].y-=o,d[s.id].x+=n,d[s.id].y+=o)}}}]),t}();e.default=a},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,i,o){(0,n.default)(this,t),this.body=e,this.physicsBody=i,this.setOptions(o)}return(0,o.default)(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){var t,e,i,n,o,r,a,s,l,u,d=this.body.nodes,h=this.physicsBody.physicsNodeIndices,c=this.physicsBody.forces,f=this.options.nodeDistance;for(l=0;l<h.length-1;l++)for(a=d[h[l]],u=l+1;u<h.length;u++)s=d[h[u]],a.level===s.level&&(t=s.x-a.x,e=s.y-a.y,r=(i=Math.sqrt(t*t+e*e))<f?-Math.pow(.05*i,2)+Math.pow(.05*f,2):0,0===i?i=.01:r/=i,n=t*r,o=e*r,c[a.id].x-=n,c[a.id].y-=o,c[s.id].x+=n,c[s.id].y+=o)}}]),t}();e.default=a},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,i,o){(0,n.default)(this,t),this.body=e,this.physicsBody=i,this.setOptions(o)}return(0,o.default)(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t=void 0,e=void 0,i=this.physicsBody.physicsEdgeIndices,n=this.body.edges,o=void 0,r=void 0,a=void 0,s=0;s<i.length;s++)!0===(e=n[i[s]]).connected&&e.toId!==e.fromId&&void 0!==this.body.nodes[e.toId]&&void 0!==this.body.nodes[e.fromId]&&(void 0!==e.edgeType.via?(t=void 0===e.options.length?this.options.springLength:e.options.length,o=e.to,r=e.edgeType.via,a=e.from,this._calculateSpringForce(o,r,.5*t),this._calculateSpringForce(r,a,.5*t)):(t=void 0===e.options.length?1.5*this.options.springLength:e.options.length,this._calculateSpringForce(e.from,e.to,t)))}},{key:"_calculateSpringForce",value:function(t,e,i){var n=t.x-e.x,o=t.y-e.y,r=Math.max(Math.sqrt(n*n+o*o),.01),a=this.options.springConstant*(i-r)/r,s=n*a,l=o*a;void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x+=s,this.physicsBody.forces[t.id].y+=l),void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x-=s,this.physicsBody.forces[e.id].y-=l)}}]),t}();e.default=a},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,i,o){(0,n.default)(this,t),this.body=e,this.physicsBody=i,this.setOptions(o)}return(0,o.default)(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,n,o,r,a,s,l,u,d=this.body.edges,h=this.physicsBody.physicsEdgeIndices,c=this.physicsBody.physicsNodeIndices,f=this.physicsBody.forces,p=0;p<c.length;p++){var g=c[p];f[g].springFx=0,f[g].springFy=0}for(var m=0;m<h.length;m++)!0===(e=d[h[m]]).connected&&(t=void 0===e.options.length?this.options.springLength:e.options.length,i=e.from.x-e.to.x,n=e.from.y-e.to.y,s=0===(s=Math.sqrt(i*i+n*n))?.01:s,o=i*(a=this.options.springConstant*(t-s)/s),r=n*a,e.to.level!=e.from.level?(void 0!==f[e.toId]&&(f[e.toId].springFx-=o,f[e.toId].springFy-=r),void 0!==f[e.fromId]&&(f[e.fromId].springFx+=o,f[e.fromId].springFy+=r)):(void 0!==f[e.toId]&&(f[e.toId].x-=.5*o,f[e.toId].y-=.5*r),void 0!==f[e.fromId]&&(f[e.fromId].x+=.5*o,f[e.fromId].y+=.5*r)));a=1;for(var v=0;v<c.length;v++){var y=c[v];l=Math.min(a,Math.max(-a,f[y].springFx)),u=Math.min(a,Math.max(-a,f[y].springFy)),f[y].x+=l,f[y].y+=u}for(var _=0,b=0,E=0;E<c.length;E++){var w=c[E];_+=f[w].x,b+=f[w].y}for(var T=_/c.length,S=b/c.length,x=0;x<c.length;x++){var C=c[x];f[C].x-=T,f[C].y-=S}}}]),t}();e.default=a},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"_calculateForces",value:function(t,e,i,n,o){0===t&&(e=t=.1*Math.random()),this.overlapAvoidanceFactor<1&&n.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,t-n.shape.radius));var r=n.edges.length+1,a=this.options.gravitationalConstant*o.mass*n.options.mass*r/Math.pow(t,2),s=e*a,l=i*a;this.physicsBody.forces[n.id].x+=s,this.physicsBody.forces[n.id].y+=l}}]),e}(l(i(120)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,r){return(0,o.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r))}return(0,s.default)(e,t),(0,r.default)(e,[{key:"_calculateForces",value:function(t,e,i,n,o){if(t>0){var r=o.edges.length+1,a=this.options.centralGravity*r*o.options.mass;n[o.id].x=e*a,n[o.id].y=i*a}}}]),e}(l(i(121)).default);e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(8)),o=s(i(6)),r=s(i(0)),a=s(i(1));function s(t){return t&&t.__esModule?t:{default:t}}var l=i(2),u=i(76).default,d=i(228).default,h=i(74).default,c=i(47).default,f=function(){function t(e){var i=this;(0,r.default)(this,t),this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},l.extend(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){i.clusteredNodes={},i.clusteredEdges={}})}return(0,a.default)(t,[{key:"clusterByHubsize",value:function(t,e){void 0===t?t=this._getHubSize():"object"===(void 0===t?"undefined":(0,o.default)(t))&&(e=this._checkOptions(t),t=this._getHubSize());for(var i=[],n=0;n<this.body.nodeIndices.length;n++){var r=this.body.nodes[this.body.nodeIndices[n]];r.edges.length>=t&&i.push(r.id)}for(var a=0;a<i.length;a++)this.clusterByConnection(i[a],e,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===e.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);var n={},o={};l.forEach(this.body.nodes,function(i,r){var a=u.cloneOptions(i);!0===e.joinCondition(a)&&(n[r]=i,l.forEach(i.edges,function(e){void 0===t.clusteredEdges[e.id]&&(o[e.id]=e)}))}),this._cluster(n,o,e,i)}},{key:"clusterByEdgeCount",value:function(t,e){var i=this,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=this._checkOptions(e);for(var r=[],a={},s=void 0,l=void 0,d=void 0,h=function(o){var h={},c={},g=i.body.nodeIndices[o],m=i.body.nodes[g];if(void 0===a[g]){d=0,l=[];for(var v=0;v<m.edges.length;v++)s=m.edges[v],void 0===i.clusteredEdges[s.id]&&(s.toId!==s.fromId&&d++,l.push(s));if(d===t){f=function(t){if(void 0===e.joinCondition||null===e.joinCondition)return!0;var i=u.cloneOptions(t);return e.joinCondition(i)};for(var y=!0,_=0;_<l.length;_++){s=l[_];var b=i._getConnectedId(s,g);if(!f(m)){y=!1;break}c[s.id]=s,h[g]=m,h[b]=i.body.nodes[b],a[g]=!0}if((0,n.default)(h).length>0&&(0,n.default)(c).length>0&&!0===y)if(void 0!==(p=function(){for(var t=0;t<r.length;++t)for(var e in h)if(void 0!==r[t].nodes[e])return r[t]}())){for(var E in h)void 0===p.nodes[E]&&(p.nodes[E]=h[E]);for(var w in c)void 0===p.edges[w]&&(p.edges[w]=c[w])}else r.push({nodes:h,edges:c})}}},c=0;c<this.body.nodeIndices.length;c++){var f,p;h(c)}for(c=0;c<r.length;c++)this._cluster(r[c].nodes,r[c].edges,e,!1);!0===o&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(1,t,e)}},{key:"clusterBridges",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(2,t,e)}},{key:"clusterByConnection",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[t])throw new Error("The nodeId given to clusterByConnection does not exist!");var o=this.body.nodes[t];void 0===(e=this._checkOptions(e,o)).clusterNodeProperties.x&&(e.clusterNodeProperties.x=o.x),void 0===e.clusterNodeProperties.y&&(e.clusterNodeProperties.y=o.y),void 0===e.clusterNodeProperties.fixed&&(e.clusterNodeProperties.fixed={},e.clusterNodeProperties.fixed.x=o.options.fixed.x,e.clusterNodeProperties.fixed.y=o.options.fixed.y);var r={},a={},s=o.id,l=u.cloneOptions(o);r[s]=o;for(var d=0;d<o.edges.length;d++){var h=o.edges[d];if(void 0===this.clusteredEdges[h.id]){var c=this._getConnectedId(h,s);if(void 0===this.clusteredNodes[c])if(c!==s)if(void 0===e.joinCondition)a[h.id]=h,r[c]=this.body.nodes[c];else{var f=u.cloneOptions(this.body.nodes[c]);!0===e.joinCondition(l,f)&&(a[h.id]=h,r[c]=this.body.nodes[c])}else a[h.id]=h}}var p=(0,n.default)(r).map(function(t){return r[t].id});for(g in r)if(r.hasOwnProperty(g))for(var g=r[g],m=0;m<g.edges.length;m++){var v=g.edges[m];p.indexOf(this._getConnectedId(v,g.id))>-1&&(a[v.id]=v)}this._cluster(r,a,e,i)}},{key:"_createClusterEdges",value:function(t,e,i,o){for(var r=void 0,a=void 0,s=void 0,l=void 0,u=void 0,d=void 0,h=(0,n.default)(t),c=[],f=0;f<h.length;f++){s=t[a=h[f]];for(var p=0;p<s.edges.length;p++)r=s.edges[p],void 0===this.clusteredEdges[r.id]&&(r.toId==r.fromId?e[r.id]=r:r.toId==a?(l=i.id,d=u=r.fromId):(l=r.toId,u=i.id,d=l),void 0===t[d]&&c.push({edge:r,fromId:u,toId:l}))}for(var g=[],m=function(t){for(var e=0;e<g.length;e++){var i=g[e],n=t.fromId===i.fromId&&t.toId===i.toId,o=t.fromId===i.toId&&t.toId===i.fromId;if(n||o)return i}return null},v=0;v<c.length;v++){var y=c[v],_=y.edge,b=m(y);null===b?(b=this._createClusteredEdge(y.fromId,y.toId,_,o),g.push(b)):b.clusteringEdgeReplacingIds.push(_.id),this.body.edges[_.id].edgeReplacedById=b.id,this._backupEdgeOptions(_),_.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===t.clusterEdgeProperties&&(t.clusterEdgeProperties={}),void 0===t.clusterNodeProperties&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=[];for(var a in t)t.hasOwnProperty(a)&&void 0!==this.clusteredNodes[a]&&r.push(a);for(var s=0;s<r.length;++s)delete t[r[s]];if(0!=(0,n.default)(t).length&&(1!=(0,n.default)(t).length||1==i.clusterNodeProperties.allowSingleNodeCluster)){var h=l.deepExtend({},i.clusterNodeProperties);if(void 0!==i.processProperties){var c=[];for(var f in t)if(t.hasOwnProperty(f)){var p=u.cloneOptions(t[f]);c.push(p)}var g=[];for(var m in e)if(e.hasOwnProperty(m)&&"clusterEdge:"!==m.substr(0,12)){var v=u.cloneOptions(e[m],"edge");g.push(v)}if(!(h=i.processProperties(h,c,g)))throw new Error("The processProperties function does not return properties!")}void 0===h.id&&(h.id="cluster:"+l.randomUUID());var y=h.id;void 0===h.label&&(h.label="cluster");var _=void 0;void 0===h.x&&(_=this._getClusterPosition(t),h.x=_.x),void 0===h.y&&(void 0===_&&(_=this._getClusterPosition(t)),h.y=_.y),h.id=y;var b=this.body.functions.createNode(h,d);b.containedNodes=t,b.containedEdges=e,b.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[h.id]=b,this._clusterEdges(t,e,h,i.clusterEdgeProperties),h.id=void 0,!0===o&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){void 0===this.clusteredEdges[t.id]&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var e=this.clusteredEdges[t.id];void 0!==e&&(t.setOptions({physics:e.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return void 0!==this.body.nodes[t]?!0===this.body.nodes[t].isCluster:(console.log("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var e=(0,n.default)(t),i=t[e[0]].x,o=t[e[0]].x,r=t[e[0]].y,a=t[e[0]].y,s=void 0,l=1;l<e.length;l++)i=(s=t[e[l]]).x<i?s.x:i,o=s.x>o?s.x:o,r=s.y<r?s.y:r,a=s.y>a?s.y:a;return{x:.5*(i+o),y:.5*(r+a)}}},{key:"openCluster",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No clusterNodeId supplied to openCluster.");var n=this.body.nodes[t];if(void 0===n)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==n.isCluster||void 0===n.containedNodes||void 0===n.containedEdges)throw new Error("The node:"+t+" is not a valid cluster.");var o=this.findNode(t),r=o.indexOf(t)-1;if(r>=0){var a=o[r],s=this.body.nodes[a];return s._openChildCluster(t),delete this.body.nodes[t],void(!0===i&&this.body.emitter.emit("_dataChanged"))}var u=n.containedNodes,d=n.containedEdges;if(void 0!==e&&void 0!==e.releaseFunction&&"function"==typeof e.releaseFunction){var h={},c={x:n.x,y:n.y};for(var f in u)if(u.hasOwnProperty(f)){var p=this.body.nodes[f];h[f]={x:p.x,y:p.y}}var g=e.releaseFunction(c,h);for(var m in u)if(u.hasOwnProperty(m)){var v=this.body.nodes[m];void 0!==g[m]&&(v.x=void 0===g[m].x?n.x:g[m].x,v.y=void 0===g[m].y?n.y:g[m].y)}}else l.forEach(u,function(t){!1===t.options.fixed.x&&(t.x=n.x),!1===t.options.fixed.y&&(t.y=n.y)});for(var y in u)if(u.hasOwnProperty(y)){var _=this.body.nodes[y];_.vx=n.vx,_.vy=n.vy,_.setOptions({physics:!0}),delete this.clusteredNodes[y]}for(var b=[],E=0;E<n.edges.length;E++)b.push(n.edges[E]);for(var w=0;w<b.length;w++){for(var T=b[w],S=this._getConnectedId(T,t),x=this.clusteredNodes[S],C=0;C<T.clusteringEdgeReplacingIds.length;C++){var I=T.clusteringEdgeReplacingIds[C],A=this.body.edges[I];if(void 0!==A)if(void 0!==x){var M=this.body.nodes[x.clusterId];M.containedEdges[A.id]=A,delete d[A.id];var O=A.fromId,D=A.toId;A.toId==S?D=x.clusterId:O=x.clusterId,this._createClusteredEdge(O,D,A,M.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(A)}T.remove()}for(var R in d)d.hasOwnProperty(R)&&this._restoreEdge(d[R]);delete this.body.nodes[t],!0===i&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var e=[];if(!0===this.isCluster(t)){var i=this.body.nodes[t].containedNodes;for(var n in i)i.hasOwnProperty(n)&&e.push(this.body.nodes[n].id)}return e}},{key:"findNode",value:function(t){for(var e=[],i=0,n=void 0;void 0!==this.clusteredNodes[t]&&i<100;){if(void 0===(n=this.body.nodes[t]))return[];e.push(n.id),t=this.clusteredNodes[t].clusterId,i++}return void 0===(n=this.body.nodes[t])?[]:(e.push(n.id),e.reverse(),e)}},{key:"updateClusteredNode",value:function(t,e){if(void 0===t)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===e)throw new Error("No newOptions supplied to updateClusteredNode.");if(void 0===this.body.nodes[t])throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(e),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,e){if(void 0===t)throw new Error("No startEdgeId supplied to updateEdge.");if(void 0===e)throw new Error("No newOptions supplied to updateEdge.");if(void 0===this.body.edges[t])throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var i=this.getClusteredEdges(t),n=0;n<i.length;n++)this.body.edges[i[n]].setOptions(e);this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var e=[],i=0;void 0!==t&&void 0!==this.body.edges[t]&&i<100;)e.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,i++;return e.reverse(),e}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var e=[t],i=[],n=[],o=0;e.length>0&&o<100;){var r=e.pop();if(void 0!==r){var a=this.body.edges[r];if(void 0!==a){o++;var s=a.clusteringEdgeReplacingIds;if(void 0===s)n.push(r);else for(var l=0;l<s.length;++l){var u=s[l];-1===e.indexOf(s)&&-1===i.indexOf(s)&&e.push(u)}i.push(r)}}}return n}},{key:"_getConnectedId",value:function(t,e){return t.toId!=e?t.toId:(t.fromId,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,e=0,i=0,n=0,o=0;o<this.body.nodeIndices.length;o++){var r=this.body.nodes[this.body.nodeIndices[o]];r.edges.length>n&&(n=r.edges.length),t+=r.edges.length,e+=Math.pow(r.edges.length,2),i+=1}t/=i;var a=(e/=i)-Math.pow(t,2),s=Math.sqrt(a),l=Math.floor(t+2*s);return l>n&&(l=n),l}},{key:"_createClusteredEdge",value:function(t,e,i,n,o){var r=u.cloneOptions(i,"edge");l.deepExtend(r,n),r.from=t,r.to=e,r.id="clusterEdge:"+l.randomUUID(),void 0!==o&&l.deepExtend(r,o);var a=this.body.functions.createEdge(r);return a.clusteringEdgeReplacingIds=[i.id],a.connect(),this.body.edges[a.id]=a,a}},{key:"_clusterEdges",value:function(t,e,i,n){if(e instanceof h){var o=e,r={};r[o.id]=o,e=r}if(t instanceof c){var a=t,s={};s[a.id]=a,t=s}if(null==i)throw new Error("_clusterEdges: parameter clusterNode required");for(var l in void 0===n&&(n=i.clusterEdgeProperties),this._createClusterEdges(t,e,i,n),e)if(e.hasOwnProperty(l)&&void 0!==this.body.edges[l]){var u=this.body.edges[l];this._backupEdgeOptions(u),u.setOptions({physics:!1})}for(var d in t)t.hasOwnProperty(d)&&(this.clusteredNodes[d]={clusterId:i.id,node:this.body.nodes[d]},this.body.nodes[d].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(void 0!==t){var e=this.clusteredNodes[t];if(void 0!==e){var i=e.clusterId;if(void 0!==i)return this.body.nodes[i]}}}},{key:"_filter",value:function(t,e){var i=[];return l.forEach(t,function(t){e(t)&&i.push(t)}),i}},{key:"_updateState",value:function(){var t=this,e=void 0,i=[],o=[],r=function(e){l.forEach(t.body.nodes,function(t){!0===t.isCluster&&e(t)})};for(e in this.clusteredNodes)this.clusteredNodes.hasOwnProperty(e)&&void 0===this.body.nodes[e]&&i.push(e);r(function(t){for(var e=0;e<i.length;e++)delete t.containedNodes[i[e]]});for(var a=0;a<i.length;a++)delete this.clusteredNodes[i[a]];l.forEach(this.clusteredEdges,function(e){var i=t.body.edges[e];void 0!==i&&i.endPointsValid()||o.push(e)}),r(function(t){l.forEach(t.containedEdges,function(t,e){t.endPointsValid()||-1!==o.indexOf(e)||o.push(e)})}),l.forEach(this.body.edges,function(e,i){var n=!0,r=e.clusteringEdgeReplacingIds;if(void 0!==r){var a=0;l.forEach(r,function(e){var i=t.body.edges[e];void 0!==i&&i.endPointsValid()&&(a+=1)}),n=a>0}e.endPointsValid()&&n||o.push(i)}),r(function(e){l.forEach(o,function(i){delete e.containedEdges[i],l.forEach(e.edges,function(n,r){n.id!==i?n.clusteringEdgeReplacingIds=t._filter(n.clusteringEdgeReplacingIds,function(t){return-1===o.indexOf(t)}):e.edges[r]=null}),e.edges=t._filter(e.edges,function(t){return null!==t})})}),l.forEach(o,function(e){delete t.clusteredEdges[e]}),l.forEach(o,function(e){delete t.body.edges[e]});var s=(0,n.default)(this.body.edges);l.forEach(s,function(e){var i=t.body.edges[e],n=t._isClusteredNode(i.fromId)||t._isClusteredNode(i.toId);if(n!==t._isClusteredEdge(i.id)){if(!n)throw new Error("remove edge from clustering not implemented!");var o=t._getClusterNodeForNode(i.fromId);void 0!==o&&t._clusterEdges(t.body.nodes[i.fromId],i,o);var r=t._getClusterNodeForNode(i.toId);void 0!==r&&t._clusterEdges(t.body.nodes[i.toId],i,r)}});for(var u=!1,d=!0,h=function(){var e=[];r(function(t){var i=(0,n.default)(t.containedNodes).length,o=!0===t.options.allowSingleNodeCluster;(o&&i<1||!o&&i<2)&&e.push(t.id)});for(var i=0;i<e.length;++i)t.openCluster(e[i],{},!1);d=e.length>0,u=u||d};d;)h();u&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return void 0!==this.clusteredNodes[t]}},{key:"_isClusteredEdge",value:function(t){return void 0!==this.clusteredEdges[t]}}]),t}();e.default=f},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),o=l(i(0)),r=l(i(1)),a=l(i(4)),s=l(i(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=i(2),d=function(t){function e(t,i,r,s,l,u){(0,o.default)(this,e);var d=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r,s,l,u));return d.isCluster=!0,d.containedNodes={},d.containedEdges={},d}return(0,s.default)(e,t),(0,r.default)(e,[{key:"_openChildCluster",value:function(t){var e=this,i=this.body.nodes[t];if(void 0===this.containedNodes[t])throw new Error("node with id: "+t+" not in current cluster");if(!i.isCluster)throw new Error("node with id: "+t+" is not a cluster");delete this.containedNodes[t],u.forEach(i.edges,function(t){delete e.containedEdges[t.id]}),u.forEach(i.containedNodes,function(t,i){e.containedNodes[i]=t}),i.containedNodes={},u.forEach(i.containedEdges,function(t,i){e.containedEdges[i]=t}),i.containedEdges={},u.forEach(i.edges,function(t){u.forEach(e.edges,function(i){var n=i.clusteringEdgeReplacingIds.indexOf(t.id);-1!==n&&(u.forEach(t.clusteringEdgeReplacingIds,function(t){i.clusteringEdgeReplacingIds.push(t),e.body.edges[t].edgeReplacedById=i.id}),i.clusteringEdgeReplacingIds.splice(n,1))})}),i.edges=[]}}]),e}(i(47).default);e.default=d},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(2),s=function(){function t(e,i){var o;(0,n.default)(this,t),void 0!==window&&(o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=void 0===o?function(t){t()}:o,this.body=e,this.canvas=i,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideNodesOnDrag:!1},a.extend(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return(0,o.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("dragStart",function(){t.dragging=!0}),this.body.emitter.on("dragEnd",function(){t.dragging=!1}),this.body.emitter.on("_resizeNodes",function(){t._resizeNodes()}),this.body.emitter.on("_redraw",function(){!1===t.renderingActive&&t._redraw()}),this.body.emitter.on("_blockRedraw",function(){t.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){t.allowRedraw=!0,t.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",this._requestRedraw.bind(this)),this.body.emitter.on("_startRendering",function(){t.renderRequests+=1,t.renderingActive=!0,t._startRendering()}),this.body.emitter.on("_stopRendering",function(){t.renderRequests-=1,t.renderingActive=t.renderRequests>0,t.renderTimer=void 0}),this.body.emitter.on("destroy",function(){t.renderRequests=0,t.allowRedraw=!1,t.renderingActive=!1,!0===t.requiresTimeout?clearTimeout(t.renderTimer):window.cancelAnimationFrame(t.renderTimer),t.body.emitter.off()})}},{key:"setOptions",value:function(t){void 0!==t&&a.selectiveDeepExtend(["hideEdgesOnDrag","hideNodesOnDrag"],this.options,t)}},{key:"_requestNextFrame",value:function(t,e){if("undefined"!=typeof window){var i=void 0,n=window;return!0===this.requiresTimeout?i=n.setTimeout(t,e):n.requestAnimationFrame&&(i=n.requestAnimationFrame(t)),i}}},{key:"_startRendering",value:function(){!0===this.renderingActive&&void 0===this.renderTimer&&(this.renderTimer=this._requestNextFrame(this._renderStep.bind(this),this.simulationInterval))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(this.renderTimer=void 0,!0===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,this._requestNextFrame(function(){t._redraw(!1)},0))}},{key:"_redraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1,0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.canvas.setTransform();var e=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,n=this.canvas.frame.canvas.clientHeight;if(e.clearRect(0,0,i,n),0===this.canvas.frame.clientWidth)return;e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale),e.beginPath(),this.body.emitter.emit("beforeDrawing",e),e.closePath(),!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&this._drawEdges(e),(!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag)&&this._drawNodes(e,t),e.beginPath(),this.body.emitter.emit("afterDrawing",e),e.closePath(),e.restore(),!0===t&&e.clearRect(0,0,i,n)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var e=this.body.nodes,i=void 0;for(var n in e)e.hasOwnProperty(n)&&((i=e[n]).resize(t),i.updateBoundingBox(t,i.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.nodes,n=this.body.nodeIndices,o=void 0,r=[],a=20,s=this.canvas.DOMtoCanvas({x:-a,y:-a}),l=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+a,y:this.canvas.frame.canvas.clientHeight+a}),u={top:s.y,left:s.x,bottom:l.y,right:l.x},d=0;d<n.length;d++)(o=i[n[d]]).isSelected()?r.push(n[d]):!0===e?o.draw(t):!0===o.isBoundingBoxOverlappingWith(u)?o.draw(t):o.updateBoundingBox(t,o.selected);for(var h=0;h<r.length;h++)(o=i[r[h]]).draw(t)}},{key:"_drawEdges",value:function(t){for(var e=this.body.edges,i=this.body.edgeIndices,n=void 0,o=0;o<i.length;o++)!0===(n=e[i[o]]).connected&&n.draw(t)}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,-1!=t.indexOf("msie 9.0")?this.requiresTimeout=!0:-1!=t.indexOf("safari")&&t.indexOf("chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}}]),t}();e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(10),s=i(37),l=i(2),u=function(){function t(e){(0,n.default)(this,t),this.body=e,this.pixelRatio=1,this.resizeTimer=void 0,this.resizeFunction=this._onResize.bind(this),this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},l.extend(this.options,this.defaultOptions),this.bindEventListeners()}return(0,o.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.once("resize",function(e){0!==e.width&&(t.body.view.translation.x=.5*e.width),0!==e.height&&(t.body.view.translation.y=.5*e.height)}),this.body.emitter.on("setSize",this.setSize.bind(this)),this.body.emitter.on("destroy",function(){t.hammerFrame.destroy(),t.hammer.destroy(),t._cleanUp()})}},{key:"setOptions",value:function(t){var e=this;void 0!==t&&l.selectiveDeepExtend(["width","height","autoResize"],this.options,t),!0===this.options.autoResize&&(this._cleanUp(),this.resizeTimer=setInterval(function(){!0===e.setSize()&&e.body.emitter.emit("_requestRedraw")},1e3),this.resizeFunction=this._onResize.bind(this),l.addEventListener(window,"resize",this.resizeFunction))}},{key:"_cleanUp",value:function(){void 0!==this.resizeTimer&&clearInterval(this.resizeTimer),l.removeEventListener(window,"resize",this.resizeFunction),this.resizeFunction=void 0}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pixelRatio;!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&this.cameraState.previousWidth>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,e=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;1!=t&&1!=e?i=.5*this.cameraState.scale*(t+e):1!=t?i=this.cameraState.scale*t:1!=e&&(i=this.cameraState.scale*e),this.body.view.scale=i;var n=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),o={x:n.x-this.cameraState.position.x,y:n.y-this.cameraState.position.y};this.body.view.translation.x+=o.x*this.body.view.scale,this.body.view.translation.y+=o.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if("number"==typeof t)return t+"px";if("string"==typeof t){if(-1!==t.indexOf("%")||-1!==t.indexOf("px"))return t;if(-1===t.indexOf("%"))return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new a(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:a.DIRECTION_ALL}),s.onTouch(this.hammer,function(e){t.body.eventListeners.onTouch(e)}),this.hammer.on("tap",function(e){t.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",function(e){t.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",function(e){t.body.eventListeners.onHold(e)}),this.hammer.on("panstart",function(e){t.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",function(e){t.body.eventListeners.onDrag(e)}),this.hammer.on("panend",function(e){t.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",function(e){t.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("mousewheel",function(e){t.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("DOMMouseScroll",function(e){t.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",function(e){t.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",function(e){t.body.eventListeners.onContext(e)}),this.hammerFrame=new a(this.frame),s.onRelease(this.hammerFrame,function(e){t.body.eventListeners.onRelease(e)})}},{key:"setSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.height;t=this._prepareValue(t),e=this._prepareValue(e);var i=!1,n=this.frame.canvas.width,o=this.frame.canvas.height,r=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||e!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=e)this._getCameraState(r),this.frame.style.width=t,this.frame.style.height=e,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=e,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},i=!0;else{var a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),s=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.frame.canvas.width===a&&this.frame.canvas.height===s||this._getCameraState(r),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,i=!0),this.frame.canvas.height!==s&&(this.frame.canvas.height=s,i=!0)}return!0===i&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(n/this.pixelRatio),oldHeight:Math.round(o/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");var e=1;return"undefined"!=typeof window&&(e=window.devicePixelRatio||1),e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),t}();e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(2),s=i(76).default,l=function(){function t(e,i){var o=this;(0,n.default)(this,t),this.body=e,this.canvas=i,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",this.fit.bind(this)),this.body.emitter.on("animationFinished",function(){o.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",this.releaseNode.bind(this))}return(0,o.default)(t,[{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t}},{key:"fit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{nodes:[]},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=void 0,n=void 0;if(void 0!==t.nodes&&0!==t.nodes.length||(t.nodes=this.body.nodeIndices),!0===e){var o=0;for(var r in this.body.nodes)if(this.body.nodes.hasOwnProperty(r)){var a=this.body.nodes[r];!0===a.predefinedPosition&&(o+=1)}if(o>.5*this.body.nodeIndices.length)return void this.fit(t,!1);i=s.getRange(this.body.nodes,t.nodes);var l=this.body.nodeIndices.length;n=12.662/(l+7.4147)+.0964822;var u=Math.min(this.canvas.frame.canvas.clientWidth/600,this.canvas.frame.canvas.clientHeight/600);n*=u}else{this.body.emitter.emit("_resizeNodes"),i=s.getRange(this.body.nodes,t.nodes);var d=1.1*Math.abs(i.maxX-i.minX),h=1.1*Math.abs(i.maxY-i.minY),c=this.canvas.frame.canvas.clientWidth/d,f=this.canvas.frame.canvas.clientHeight/h;n=c<=f?c:f}n>1?n=1:0===n&&(n=1);var p=s.findCenter(i),g={position:p,scale:n,animation:t.animation};this.moveTo(g)}},{key:"focus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==this.body.nodes[t]){var i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};e.position=i,e.lockedOnNode=t,this.moveTo(e)}else console.log("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){void 0!==t?(void 0===t.offset&&(t.offset={x:0,y:0}),void 0===t.offset.x&&(t.offset.x=0),void 0===t.offset.y&&(t.offset.y=0),void 0===t.scale&&(t.scale=this.body.view.scale),void 0===t.position&&(t.position=this.getViewPosition()),void 0===t.animation&&(t.animation={duration:0}),!1===t.animation&&(t.animation={duration:0}),!0===t.animation&&(t.animation={}),void 0===t.animation.duration&&(t.animation.duration=1e3),void 0===t.animation.easingFunction&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)):t={}}},{key:"animateView",value:function(t){if(void 0!==t){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),!0===t.locked&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var e=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i=e.x-t.position.x,n=e.y-t.position.y;this.targetTranslation={x:this.sourceTranslation.x+i*this.targetScale+t.offset.x,y:this.sourceTranslation.y+n*this.targetScale+t.offset.y},0===t.animation.duration?null!=this.lockedOnNodeId?(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=this._transitionRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var t=this.body.nodes[this.lockedOnNodeId].x,e=this.body.nodes[this.lockedOnNodeId].y,i=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n=i.x-t,o=i.y-e,r=this.body.view.translation,a={x:r.x+n*this.body.view.scale+this.lockedOnNodeOffset.x,y:r.y+o*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=a}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=!0===t?1:this.easingTime;var e=a.easingFunctions[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*e,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*e,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*e},this.easingTime>=1&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,null!=this.lockedOnNodeId&&(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),t}();e.default=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(2),s=i(233).default,l=i(104).default,u=function(){function t(e,i,o){(0,n.default)(this,t),this.body=e,this.canvas=i,this.selectionHandler=o,this.navigationHandler=new s(e,i),this.body.eventListeners.onTap=this.onTap.bind(this),this.body.eventListeners.onTouch=this.onTouch.bind(this),this.body.eventListeners.onDoubleTap=this.onDoubleTap.bind(this),this.body.eventListeners.onHold=this.onHold.bind(this),this.body.eventListeners.onDragStart=this.onDragStart.bind(this),this.body.eventListeners.onDrag=this.onDrag.bind(this),this.body.eventListeners.onDragEnd=this.onDragEnd.bind(this),this.body.eventListeners.onMouseWheel=this.onMouseWheel.bind(this),this.body.eventListeners.onPinch=this.onPinch.bind(this),this.body.eventListeners.onMouseMove=this.onMouseMove.bind(this),this.body.eventListeners.onRelease=this.onRelease.bind(this),this.body.eventListeners.onContext=this.onContext.bind(this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=this.getPointer.bind(this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0},a.extend(this.options,this.defaultOptions),this.bindEventListeners()}return(0,o.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer})}},{key:"setOptions",value:function(t){void 0!==t&&(a.selectiveNotDeepExtend(["hideEdgesOnDrag","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,t),a.mergeOptions(this.options,t,"keyboard"),t.tooltip&&(a.extend(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=a.parseColor(t.tooltip.color)))),this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-a.getAbsoluteLeft(this.canvas.frame.canvas),y:t.y-a.getAbsoluteTop(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(t){(new Date).valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(e,t,i),this.selectionHandler._generateClickEvent("click",t,e)}},{key:"onDoubleTap",value:function(t){var e=this.getPointer(t.center);this.selectionHandler._generateClickEvent("doubleClick",t,e)}},{key:"onHold",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(e,t,i),this.selectionHandler._generateClickEvent("click",t,e),this.selectionHandler._generateClickEvent("hold",t,e)}},{key:"onRelease",value:function(t){if((new Date).valueOf()-this.touchTime>10){var e=this.getPointer(t.center);this.selectionHandler._generateClickEvent("release",t,e),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(t){var e=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler._generateClickEvent("oncontext",t,e)}},{key:"checkSelectionChanges",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.selectionHandler.getSelection(),o=!1;o=!0===i?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t);var r=this.selectionHandler.getSelection(),a=this._determineDifference(n,r),s=this._determineDifference(r,n);a.edges.length>0&&(this.selectionHandler._generateClickEvent("deselectEdge",e,t,n),o=!0),a.nodes.length>0&&(this.selectionHandler._generateClickEvent("deselectNode",e,t,n),o=!0),s.nodes.length>0&&(this.selectionHandler._generateClickEvent("selectNode",e,t),o=!0),s.edges.length>0&&(this.selectionHandler._generateClickEvent("selectEdge",e,t),o=!0),!0===o&&this.selectionHandler._generateClickEvent("select",e,t)}},{key:"_determineDifference",value:function(t,e){var i=function(t,e){for(var i=[],n=0;n<t.length;n++){var o=t[n];-1===e.indexOf(o)&&i.push(o)}return i};return{nodes:i(t.nodes,e.nodes),edges:i(t.edges,e.edges)}}},{key:"onDragStart",value:function(t){void 0===this.drag.pointer&&this.onTouch(t);var e=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=a.extend({},this.body.view.translation),this.drag.nodeId=void 0,void 0!==e&&!0===this.options.dragNodes){this.drag.nodeId=e.id,!1===e.isSelected()&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(e)),this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer);var i=this.selectionHandler.selectionObj.nodes;for(var n in i)if(i.hasOwnProperty(n)){var o=i[n],r={id:o.id,node:o,x:o.x,y:o.y,xFixed:o.options.fixed.x,yFixed:o.options.fixed.y};o.options.fixed.x=!0,o.options.fixed.y=!0,this.drag.selection.push(r)}}else this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}},{key:"onDrag",value:function(t){var e=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var i=this.getPointer(t.center),n=this.drag.selection;if(n&&n.length&&!0===this.options.dragNodes){this.selectionHandler._generateClickEvent("dragging",t,i);var o=i.x-this.drag.pointer.x,r=i.y-this.drag.pointer.y;n.forEach(function(t){var i=t.node;!1===t.xFixed&&(i.x=e.canvas._XconvertDOMtoCanvas(e.canvas._XconvertCanvasToDOM(t.x)+o)),!1===t.yFixed&&(i.y=e.canvas._YconvertDOMtoCanvas(e.canvas._YconvertCanvasToDOM(t.y)+r))}),this.body.emitter.emit("startSimulation")}else if(!0===this.options.dragView){if(this.selectionHandler._generateClickEvent("dragging",t,i,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);var a=i.x-this.drag.pointer.x,s=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+a,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}},{key:"onDragEnd",value:function(t){this.drag.dragging=!1;var e=this.drag.selection;e&&e.length?(e.forEach(function(t){t.node.options.fixed.x=t.xFixed,t.node.options.fixed.y=t.yFixed}),this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}},{key:"onPinch",value:function(t){var e=this.getPointer(t.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,e)}},{key:"zoom",value:function(t,e){if(!0===this.options.zoomView){var i=this.body.view.scale;t<1e-5&&(t=1e-5),t>10&&(t=10);var n=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(n=this.canvas.DOMtoCanvas(this.drag.pointer));var o=this.body.view.translation,r=t/i,a=(1-r)*e.x+o.x*r,s=(1-r)*e.y+o.y*r;if(this.body.view.scale=t,this.body.view.translation={x:a,y:s},null!=n){var l=this.canvas.canvasToDOM(n);this.drag.pointer.x=l.x,this.drag.pointer.y=l.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:e}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:e})}}},{key:"onMouseWheel",value:function(t){if(!0===this.options.zoomView){var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),0!==e){var i=this.body.view.scale,n=e/10;e<0&&(n/=1-n),i*=1+n;var o=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(i,o)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var e=this,i=this.getPointer({x:t.clientX,y:t.clientY}),n=!1;void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(i),!1===this.popup.hidden&&(n=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===n&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=setTimeout(function(){return e._checkShowPopup(i)},this.options.tooltipDelay))),!0===this.options.hover&&this.selectionHandler.hoverObject(t,i)}},{key:"_checkShowPopup",value:function(t){var e=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),n={left:e,top:i,right:e,bottom:i},o=void 0===this.popupObj?void 0:this.popupObj.id,r=!1,a="node";if(void 0===this.popupObj){for(var s=this.body.nodeIndices,u=this.body.nodes,d=void 0,h=[],c=0;c<s.length;c++)!0===(d=u[s[c]]).isOverlappingWith(n)&&void 0!==d.getTitle()&&h.push(s[c]);h.length>0&&(this.popupObj=u[h[h.length-1]],r=!0)}if(void 0===this.popupObj&&!1===r){for(var f=this.body.edgeIndices,p=this.body.edges,g=void 0,m=[],v=0;v<f.length;v++)!0===(g=p[f[v]]).isOverlappingWith(n)&&!0===g.connected&&void 0!==g.getTitle()&&m.push(f[v]);m.length>0&&(this.popupObj=p[m[m.length-1]],a="edge")}void 0!==this.popupObj?this.popupObj.id!==o&&(void 0===this.popup&&(this.popup=new l(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var e=this.selectionHandler._pointerToPositionObject(t),i=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(e))){var n=this.selectionHandler.getNodeAt(t);i=void 0!==n&&n.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(t)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(e));!1===i&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),t}();e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(10),s=i(37),l=i(35),u=function(){function t(e,i){var o=this;(0,n.default)(this,t),this.body=e,this.canvas=i,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){o.activated=!0,o.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){o.activated=!1,o.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){void 0!==o.keycharm&&o.keycharm.destroy()}),this.options={}}return(0,o.default)(t,[{key:"setOptions",value:function(t){void 0!==t&&(this.options=t,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var n=0;n<e.length;n++){this.navigationDOM[e[n]]=document.createElement("div"),this.navigationDOM[e[n]].className="vis-button vis-"+e[n],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[n]]);var o=new a(this.navigationDOM[e[n]]);"_fit"===i[n]?s.onTouch(o,this._fit.bind(this)):s.onTouch(o,this.bindToRedraw.bind(this,i[n])),this.navigationHammers.push(o)}var r=new a(this.canvas.frame);s.onRelease(r,function(){t._stopMovement()}),this.navigationHammers.push(r),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){void 0===this.boundFunctions[t]&&(this.boundFunctions[t]=this[t].bind(this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(t){void 0!==this.boundFunctions[t]&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){(new Date).valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)this.boundFunctions.hasOwnProperty(t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,e=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,n=e/t,o=(1-n)*this.canvas.canvasViewCenter.x+i.x*n,r=(1-n)*this.canvas.canvasViewCenter.y+i.y*n;this.body.view.scale=e,this.body.view.translation={x:o,y:r},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,e=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,n=e/t,o=(1-n)*this.canvas.canvasViewCenter.x+i.x*n,r=(1-n)*this.canvas.canvasViewCenter.y+i.y*n;this.body.view.scale=e,this.body.view.translation={x:o,y:r},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t=this;void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled&&(!0===this.options.keyboard.bindToWindow?this.keycharm=l({container:window,preventDefault:!0}):this.keycharm=l({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(this.keycharm.bind("up",function(){t.bindToRedraw("_moveUp")},"keydown"),this.keycharm.bind("down",function(){t.bindToRedraw("_moveDown")},"keydown"),this.keycharm.bind("left",function(){t.bindToRedraw("_moveLeft")},"keydown"),this.keycharm.bind("right",function(){t.bindToRedraw("_moveRight")},"keydown"),this.keycharm.bind("=",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num+",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num-",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("-",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("[",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("]",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pageup",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pagedown",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("up",function(){t.unbindFromRedraw("_moveUp")},"keyup"),this.keycharm.bind("down",function(){t.unbindFromRedraw("_moveDown")},"keyup"),this.keycharm.bind("left",function(){t.unbindFromRedraw("_moveLeft")},"keyup"),this.keycharm.bind("right",function(){t.unbindFromRedraw("_moveRight")},"keyup"),this.keycharm.bind("=",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num+",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("[",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("]",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pageup",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pagedown",function(){t.unbindFromRedraw("_zoomOut")},"keyup")))}}]),t}();e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=i(47).default,s=i(74).default,l=i(2),u=function(){function t(e,i){var o=this;(0,n.default)(this,t),this.body=e,this.canvas=i,this.selectionObj={nodes:[],edges:[]},this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},l.extend(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){o.updateSelection()})}return(0,o.default)(t,[{key:"setOptions",value:function(t){void 0!==t&&l.selectiveDeepExtend(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,t)}},{key:"selectOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),void 0!==i&&(e=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return e}},{key:"selectAdditionalOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);void 0!==i&&(e=!0,!0===i.isSelected()?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return e}},{key:"_initBaseEvent",value:function(t,e){var i={};return i.pointer={DOM:{x:e.x,y:e.y},canvas:this.canvas.DOMtoCanvas(e)},i.event=t,i}},{key:"_generateClickEvent",value:function(t,e,i,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=this._initBaseEvent(e,i);if(!0===o)r.nodes=[],r.edges=[];else{var a=this.getSelection();r.nodes=a.nodes,r.edges=a.edges}void 0!==n&&(r.previousSelection=n),"click"==t&&(r.items=this.getClickedItems(i)),this.body.emitter.emit(t,r)}},{key:"selectObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.selectConnectedEdges;return void 0!==t&&(t instanceof a&&!0===e&&this._selectConnectedEdges(t),t.select(),this._addToSelection(t),!0)}},{key:"deselectObject",value:function(t){!0===t.isSelected()&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var e=[],i=this.body.nodes,n=0;n<this.body.nodeIndices.length;n++){var o=this.body.nodeIndices[n];i[o].isOverlappingWith(t)&&e.push(o)}return e}},{key:"_pointerToPositionObject",value:function(t){var e=this.canvas.DOMtoCanvas(t);return{left:e.x-1,top:e.y+1,right:e.x+1,bottom:e.y-1}}},{key:"getNodeAt",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._pointerToPositionObject(t),n=this._getAllNodesOverlappingWith(i);return n.length>0?!0===e?this.body.nodes[n[n.length-1]]:n[n.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(t,e){for(var i=this.body.edges,n=0;n<this.body.edgeIndices.length;n++){var o=this.body.edgeIndices[n];i[o].isOverlappingWith(t)&&e.push(o)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var e=[];return this._getEdgesOverlappingWith(t,e),e}},{key:"getEdgeAt",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.canvas.DOMtoCanvas(t),n=10,o=null,r=this.body.edges,a=0;a<this.body.edgeIndices.length;a++){var s=this.body.edgeIndices[a],l=r[s];if(l.connected){var u=l.from.x,d=l.from.y,h=l.to.x,c=l.to.y,f=l.edgeType.getDistanceToEdge(u,d,h,c,i.x,i.y);f<n&&(o=s,n=f)}}return null!==o?!0===e?this.body.edges[o]:o:void 0}},{key:"_addToSelection",value:function(t){t instanceof a?this.selectionObj.nodes[t.id]=t:this.selectionObj.edges[t.id]=t}},{key:"_addToHover",value:function(t){t instanceof a?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){t instanceof a?(delete this.selectionObj.nodes[t.id],this._unselectConnectedEdges(t)):delete this.selectionObj.edges[t.id]}},{key:"unselectAll",value:function(){for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].unselect();for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&this.selectionObj.edges[e].unselect();this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);return t}},{key:"_getSelectedNode",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return this.selectionObj.nodes[t]}},{key:"_getSelectedEdge",value:function(){for(var t in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(t))return this.selectionObj.edges[t]}},{key:"_getSelectedEdgeCount",value:function(){var t=0;for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(t+=1);return t}},{key:"_getSelectedObjectCount",value:function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&(t+=1);return t}},{key:"_selectionIsEmpty",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return!1;for(var e in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(e))return!1;return!0}},{key:"_clusterInSelection",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].clusterSize>1)return!0;return!1}},{key:"_selectConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.select(),this._addToSelection(i)}}},{key:"_hoverConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.hover=!0,this._addToHover(i)}}},{key:"_unselectConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.unselect(),this._removeFromSelection(i)}}},{key:"emitBlurEvent",value:function(t,e,i){var n=this._initBaseEvent(t,e);!0===i.hover&&(i.hover=!1,i instanceof a?(n.node=i.id,this.body.emitter.emit("blurNode",n)):(n.edge=i.id,this.body.emitter.emit("blurEdge",n)))}},{key:"emitHoverEvent",value:function(t,e,i){var n=this._initBaseEvent(t,e),o=!1;return!1===i.hover&&(i.hover=!0,this._addToHover(i),o=!0,i instanceof a?(n.node=i.id,this.body.emitter.emit("hoverNode",n)):(n.edge=i.id,this.body.emitter.emit("hoverEdge",n))),o}},{key:"hoverObject",value:function(t,e){var i=this.getNodeAt(e);void 0===i&&(i=this.getEdgeAt(e));var n=!1;for(var o in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(o)&&(void 0===i||i instanceof a&&i.id!=o||i instanceof s)&&(this.emitBlurEvent(t,e,this.hoverObj.nodes[o]),delete this.hoverObj.nodes[o],n=!0);for(var r in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(r)&&(!0===n?(this.hoverObj.edges[r].hover=!1,delete this.hoverObj.edges[r]):(void 0===i||i instanceof s&&i.id!=r||i instanceof a&&!i.hover)&&(this.emitBlurEvent(t,e,this.hoverObj.edges[r]),delete this.hoverObj.edges[r],n=!0));void 0!==i&&(n=n||this.emitHoverEvent(t,e,i),i instanceof a&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(i)),!0===n&&this.body.emitter.emit("_requestRedraw")}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodes(),edges:this.getSelectedEdges()}}},{key:"getSelectedNodes",value:function(){var t=[];if(!0===this.options.selectable)for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&t.push(this.selectionObj.nodes[e].id);return t}},{key:"getSelectedEdges",value:function(){var t=[];if(!0===this.options.selectable)for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&t.push(this.selectionObj.edges[e].id);return t}},{key:"setSelection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=void 0,n=void 0;if(!t||!t.nodes&&!t.edges)throw"Selection must be an object with nodes and/or edges properties";if((e.unselectAll||void 0===e.unselectAll)&&this.unselectAll(),t.nodes)for(i=0;i<t.nodes.length;i++){n=t.nodes[i];var o=this.body.nodes[n];if(!o)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(o,e.highlightEdges)}if(t.edges)for(i=0;i<t.edges.length;i++){n=t.edges[i];var r=this.body.edges[n];if(!r)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(r)}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:e})}},{key:"selectEdges",value:function(t){if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(this.body.nodes.hasOwnProperty(t)||delete this.selectionObj.nodes[t]);for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(this.body.edges.hasOwnProperty(e)||delete this.selectionObj.edges[e])}},{key:"getClickedItems",value:function(t){for(var e=this.canvas.DOMtoCanvas(t),i=[],n=this.body.nodeIndices,o=this.body.nodes,r=n.length-1;r>=0;r--){var a=o[n[r]].getItemsOnPoint(e);i.push.apply(i,a)}for(var s=this.body.edgeIndices,l=this.body.edges,u=s.length-1;u>=0;u--){var d=l[s[u]].getItemsOnPoint(e);i.push.apply(i,d)}return i}}]),t}();e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(30)),o=l(i(6)),r=l(i(8)),a=l(i(0)),s=l(i(1));function l(t){return t&&t.__esModule?t:{default:t}}var u=i(2),d=i(76).default,h=i(236),c=h.HorizontalStrategy,f=h.VerticalStrategy,p=function(){function t(){(0,a.default)(this,t),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return(0,s.default)(t,[{key:"addRelation",value:function(t,e){void 0===this.childrenReference[t]&&(this.childrenReference[t]=[]),this.childrenReference[t].push(e),void 0===this.parentReference[e]&&(this.parentReference[e]=[]),this.parentReference[e].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(this.parentReference[t].length>1)return void(this.isTree=!1);this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,e){void 0!==e&&void 0===this.trees[t.id]&&(this.trees[t.id]=e,this.treeIndex=Math.max(e,this.treeIndex))}},{key:"ensureLevel",value:function(t){void 0===this.levels[t]&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var e=this,i={};return function t(n){if(void 0!==i[n])return i[n];var o=e.levels[n];if(e.childrenReference[n]){var r=e.childrenReference[n];if(r.length>0)for(var a=0;a<r.length;a++)o=Math.max(o,t(r[a]))}return i[n]=o,o}(t)}},{key:"levelDownstream",value:function(t,e){void 0===this.levels[e.id]&&(void 0===this.levels[t.id]&&(this.levels[t.id]=0),this.levels[e.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var e=1e9;for(var i in t)t.hasOwnProperty(i)&&void 0!==this.levels[i]&&(e=Math.min(this.levels[i],e));for(var n in t)t.hasOwnProperty(n)&&void 0!==this.levels[n]&&(this.levels[n]-=e)}},{key:"getTreeSize",value:function(t,e){var i=1e9,n=-1e9,o=1e9,r=-1e9;for(var a in this.trees)if(this.trees.hasOwnProperty(a)&&this.trees[a]===e){var s=t[a];i=Math.min(s.x,i),n=Math.max(s.x,n),o=Math.min(s.y,o),r=Math.max(s.y,r)}return{min_x:i,max_x:n,min_y:o,max_y:r}}},{key:"hasSameParent",value:function(t,e){var i=this.parentReference[t.id],n=this.parentReference[e.id];if(void 0===i||void 0===n)return!1;for(var o=0;o<i.length;o++)for(var r=0;r<n.length;r++)if(i[o]==n[r])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,e){return this.trees[t.id]===this.trees[e.id]}},{key:"getLevels",value:function(){return(0,r.default)(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,e){void 0===this.distributionOrdering[e]&&(this.distributionOrdering[e]=[]);var i=!1,n=this.distributionOrdering[e];for(var o in n)if(n[o]===t){i=!0;break}i||(this.distributionOrdering[e].push(t),this.distributionIndex[t.id]=this.distributionOrdering[e].length-1)}}]),t}(),g=function(){function t(e){(0,a.default)(this,t),this.body=e,this.initialRandomSeed=Math.round(1e6*Math.random()),this.randomSeed=this.initialRandomSeed,this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},u.extend(this.options,this.defaultOptions),this.bindEventListeners()}return(0,s.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){t.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(!0===t.options.hierarchical.enabled){var e=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",e,!1)}})}},{key:"setOptions",value:function(t,e){if(void 0!==t){var i=this.options.hierarchical,n=i.enabled;if(u.selectiveDeepExtend(["randomSeed","improvedLayout"],this.options,t),u.mergeOptions(this.options,t,"hierarchical"),void 0!==t.randomSeed&&(this.initialRandomSeed=t.randomSeed),!0===i.enabled)return!0===n&&this.body.emitter.emit("refresh",!0),"RL"===i.direction||"DU"===i.direction?i.levelSeparation>0&&(i.levelSeparation*=-1):i.levelSeparation<0&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(e);if(!0===n)return this.body.emitter.emit("refresh"),u.deepExtend(e,this.optionsBackup)}return e}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(!0===this.options.hierarchical.enabled){var e=this.optionsBackup.physics;void 0===t.physics||!0===t.physics?(t.physics={enabled:void 0===e.enabled||e.enabled,solver:"hierarchicalRepulsion"},e.enabled=void 0===e.enabled||e.enabled,e.solver=e.solver||"barnesHut"):"object"===(0,o.default)(t.physics)?(e.enabled=void 0===t.physics.enabled||t.physics.enabled,e.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):!1!==t.physics&&(e.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var i=this.direction.curveType();if(void 0===t.edges)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(void 0===t.edges.smooth)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if("boolean"==typeof t.edges.smooth)this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{var n=t.edges.smooth;void 0!==n.type&&"dynamic"!==n.type&&(i=n.type),this.optionsBackup.edges={smooth:void 0===n.enabled||n.enabled,type:void 0===n.type?"dynamic":n.type,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection},t.edges.smooth={enabled:void 0===n.enabled||n.enabled,type:i,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"seededRandom",value:function(){var t=1e4*Math.sin(this.randomSeed++);return t-Math.floor(t)}},{key:"positionInitially",value:function(t){if(!0!==this.options.hierarchical.enabled){this.randomSeed=this.initialRandomSeed;for(var e=t.length+50,i=0;i<t.length;i++){var n=t[i],o=2*Math.PI*this.seededRandom();void 0===n.x&&(n.x=e*Math.cos(o)),void 0===n.y&&(n.y=e*Math.sin(o))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var t=this.body.nodeIndices,e=0,i=0;i<t.length;i++)!0===this.body.nodes[t[i]].predefinedPosition&&(e+=1);if(e<.5*t.length){var n=0,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>150){for(var r=t.length;t.length>150&&n<=10;){n+=1;var a=t.length;if(n%3==0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o),a==t.length&&n%3!=0)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*r)})}n>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var s=0;s<t.length;s++){var l=this.body.nodes[t[s]];!1===l.predefinedPosition&&(l.x+=70*(.5-this.seededRandom()),l.y+=70*(.5-this.seededRandom()))}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=d.getRangeCore(this.body.nodes,this.body.nodeIndices),e=d.findCenter(t),i=0;i<this.body.nodeIndices.length;i++){var n=this.body.nodes[this.body.nodeIndices[i]];n.x-=e.x,n.y-=e.y}}},{key:"_declusterAll",value:function(){for(var t=!0;!0===t;){t=!1;for(var e=0;e<this.body.nodeIndices.length;e++)!0===this.body.nodes[this.body.nodeIndices[e]].isCluster&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[e],{},!1));!0===t&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&this.body.nodeIndices.length>0){var t=void 0,e=void 0,i=!1,n=!1;for(e in this.lastNodeOnLevel={},this.hierarchical=new p,this.body.nodes)this.body.nodes.hasOwnProperty(e)&&(void 0!==(t=this.body.nodes[e]).options.level?(i=!0,this.hierarchical.levels[e]=t.options.level):n=!0);if(!0===n&&!0===i)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(!0===n){var o=this.options.hierarchical.sortMethod;"hubsize"===o?this._determineLevelsByHubsize():"directed"===o?this._determineLevelsDirected():"custom"===o&&this._determineLevelsCustomCallback()}for(var r in this.body.nodes)this.body.nodes.hasOwnProperty(r)&&this.hierarchical.ensureLevel(r);var a=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(a),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,e=!1,i={},o=function(e,i){var n=t.hierarchical.trees;for(var o in n)n.hasOwnProperty(o)&&n[o]===e&&t.direction.shift(o,i)},r=function(){for(var e=[],i=0;i<t.hierarchical.numTrees();i++)e.push(t.direction.getTreeSize(i));return e},a=function e(i,n){if(!n[i.id]&&(n[i.id]=!0,t.hierarchical.childrenReference[i.id])){var o=t.hierarchical.childrenReference[i.id];if(o.length>0)for(var r=0;r<o.length;r++)e(t.body.nodes[o[r]],n)}},s=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e9,o=1e9,r=1e9,a=1e9,s=-1e9;for(var l in e)if(e.hasOwnProperty(l)){var u=t.body.nodes[l],d=t.hierarchical.levels[u.id],h=t.direction.getPosition(u),c=t._getSpaceAroundNode(u,e),f=(0,n.default)(c,2),p=f[0],g=f[1];o=Math.min(p,o),r=Math.min(g,r),d<=i&&(a=Math.min(h,a),s=Math.max(h,s))}return[a,s,o,r]},l=function(e,i){var n=t.hierarchical.getMaxLevel(e.id),o=t.hierarchical.getMaxLevel(i.id);return Math.min(n,o)},u=function(e,i,n){for(var o=t.hierarchical,r=0;r<i.length;r++){var a=i[r],s=o.distributionOrdering[a];if(s.length>1)for(var l=0;l<s.length-1;l++){var u=s[l],d=s[l+1];o.hasSameParent(u,d)&&o.inSameSubNetwork(u,d)&&e(u,d,n)}}},d=function(i,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.direction.getPosition(i),u=t.direction.getPosition(n),d=Math.abs(u-r),h=t.options.hierarchical.nodeSpacing;if(d>h){var c={},f={};a(i,c),a(n,f);var p=l(i,n),g=s(c,p),m=s(f,p),v=g[1],y=m[0],_=m[2],b=Math.abs(v-y);if(b>h){var E=v-y+h;E<-_+h&&(E=-_+h),E<0&&(t._shiftBlock(n.id,E),e=!0,!0===o&&t._centerParent(n))}}},h=function(o,r){for(var l=r.id,u=r.edges,d=t.hierarchical.levels[r.id],h=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,c={},f=[],p=0;p<u.length;p++){var g=u[p];if(g.toId!=g.fromId){var m=g.toId==l?g.from:g.to;c[u[p].id]=m,t.hierarchical.levels[m.id]<d&&f.push(g)}}var v=function(e,i){for(var n=0,o=0;o<i.length;o++)if(void 0!==c[i[o].id]){var r=t.direction.getPosition(c[i[o].id])-e;n+=r/Math.sqrt(r*r+h)}return n},y=function(e,i){for(var n=0,o=0;o<i.length;o++)if(void 0!==c[i[o].id]){var r=t.direction.getPosition(c[i[o].id])-e;n-=h*Math.pow(r*r+h,-1.5)}return n},_=function(e,i){for(var n=t.direction.getPosition(r),o={},a=0;a<e;a++){var s=v(n,i),l=y(n,i);if(void 0!==o[n-=Math.max(-40,Math.min(40,Math.round(s/l)))])break;o[n]=a}return n},b=_(o,f);!function(n){var o=t.direction.getPosition(r);if(void 0===i[r.id]){var l={};a(r,l),i[r.id]=l}var u=s(i[r.id]),d=u[2],h=u[3],c=n-o,f=0;c>0?f=Math.min(c,h-t.options.hierarchical.nodeSpacing):c<0&&(f=-Math.min(-c,d-t.options.hierarchical.nodeSpacing)),0!=f&&(t._shiftBlock(r.id,f),e=!0)}(b),function(i){var o=t.direction.getPosition(r),a=t._getSpaceAroundNode(r),s=(0,n.default)(a,2),l=s[0],u=s[1],d=i-o,h=o;d>0?h=Math.min(o+(u-t.options.hierarchical.nodeSpacing),i):d<0&&(h=Math.max(o-(l-t.options.hierarchical.nodeSpacing),i)),h!==o&&(t.direction.setPosition(r,h),e=!0)}(b=_(o,u))};!0===this.options.hierarchical.blockShifting&&(function(i){var n=t.hierarchical.getLevels();n=n.reverse();for(var o=0;o<i&&(e=!1,u(d,n,!0),!0===e);o++);}(5),function(){for(var e in t.body.nodes)t.body.nodes.hasOwnProperty(e)&&t._centerParent(t.body.nodes[e])}()),!0===this.options.hierarchical.edgeMinimization&&function(i){var n=t.hierarchical.getLevels();n=n.reverse();for(var o=0;o<i;o++){e=!1;for(var r=0;r<n.length;r++)for(var a=n[r],s=t.hierarchical.distributionOrdering[a],l=0;l<s.length;l++)h(1e3,s[l]);if(!0!==e)break}}(20),!0===this.options.hierarchical.parentCentralization&&function(){var e=t.hierarchical.getLevels();e=e.reverse();for(var i=0;i<e.length;i++)for(var n=e[i],o=t.hierarchical.distributionOrdering[n],r=0;r<o.length;r++)t._centerParent(o[r])}(),function(){for(var e=r(),i=0,n=0;n<e.length-1;n++)i+=e[n].max-e[n+1].min+t.options.hierarchical.treeSpacing,o(n+1,i)}()}},{key:"_getSpaceAroundNode",value:function(t,e){var i=!0;void 0===e&&(i=!1);var n=this.hierarchical.levels[t.id];if(void 0!==n){var o=this.hierarchical.distributionIndex[t.id],r=this.direction.getPosition(t),a=this.hierarchical.distributionOrdering[n],s=1e9,l=1e9;if(0!==o){var u=a[o-1];(!0===i&&void 0===e[u.id]||!1===i)&&(s=r-this.direction.getPosition(u))}if(o!=a.length-1){var d=a[o+1];if(!0===i&&void 0===e[d.id]||!1===i){var h=this.direction.getPosition(d);l=Math.min(l,h-r)}}return[s,l]}return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var e=this.hierarchical.parentReference[t.id],i=0;i<e.length;i++){var o=e[i],r=this.body.nodes[o],a=this.hierarchical.childrenReference[o];if(void 0!==a){var s=this._getCenterPosition(a),l=this.direction.getPosition(r),u=this._getSpaceAroundNode(r),d=(0,n.default)(u,2),h=d[0],c=d[1],f=l-s;(f<0&&Math.abs(f)<c-this.options.hierarchical.nodeSpacing||f>0&&Math.abs(f)<h-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(r,s)}}}},{key:"_placeNodesByHierarchy",value:function(t){for(var e in this.positionedNodes={},t)if(t.hasOwnProperty(e)){var i=(0,r.default)(t[e]);i=this._indexArrayToNodes(i),this.direction.sort(i);for(var n=0,o=0;o<i.length;o++){var a=i[o];if(void 0===this.positionedNodes[a.id]){var s=this.options.hierarchical.nodeSpacing,l=s*n;n>0&&(l=this.direction.getPosition(i[o-1])+s),this.direction.setPosition(a,l,e),this._validatePositionAndContinue(a,e,l),n++}}}}},{key:"_placeBranchNodes",value:function(t,e){var i=this.hierarchical.childrenReference[t];if(void 0!==i){for(var n=[],o=0;o<i.length;o++)n.push(this.body.nodes[i[o]]);this.direction.sort(n);for(var r=0;r<n.length;r++){var a=n[r],s=this.hierarchical.levels[a.id];if(!(s>e&&void 0===this.positionedNodes[a.id]))return;var l=this.options.hierarchical.nodeSpacing,u=void 0;u=0===r?this.direction.getPosition(this.body.nodes[t]):this.direction.getPosition(n[r-1])+l,this.direction.setPosition(a,u,s),this._validatePositionAndContinue(a,s,u)}var d=this._getCenterPosition(n);this.direction.setPosition(this.body.nodes[t],d,e)}}},{key:"_validatePositionAndContinue",value:function(t,e,i){if(this.hierarchical.isTree){if(void 0!==this.lastNodeOnLevel[e]){var n=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[e]]);if(i-n<this.options.hierarchical.nodeSpacing){var o=n+this.options.hierarchical.nodeSpacing-i,r=this._findCommonParent(this.lastNodeOnLevel[e],t.id);this._shiftBlock(r.withChild,o)}}this.lastNodeOnLevel[e]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,e)}}},{key:"_indexArrayToNodes",value:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.body.nodes[t[i]]);return e}},{key:"_getDistribution",value:function(){var t={},e=void 0,i=void 0;for(e in this.body.nodes)if(this.body.nodes.hasOwnProperty(e)){i=this.body.nodes[e];var n=void 0===this.hierarchical.levels[e]?0:this.hierarchical.levels[e];this.direction.fix(i,n),void 0===t[n]&&(t[n]={}),t[n][e]=i}return t}},{key:"_getActiveEdges",value:function(t){var e=this,i=[];return u.forEach(t.edges,function(t){-1!==e.body.edgeIndices.indexOf(t.id)&&i.push(t)}),i}},{key:"_getHubSizes",value:function(){var t=this,e={},i=this.body.nodeIndices;u.forEach(i,function(i){var n=t.body.nodes[i],o=t._getActiveEdges(n).length;e[o]=!0});var n=[];return u.forEach(e,function(t){n.push(Number(t))}),n.sort(function(t,e){return e-t}),n}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,e=function(e,i){t.hierarchical.levelDownstream(e,i)},i=this._getHubSizes(),n=function(n){var o=i[n];if(0===o)return"break";u.forEach(t.body.nodeIndices,function(i){var n=t.body.nodes[i];o===t._getActiveEdges(n).length&&t._crawlNetwork(e,i)})},o=0;o<i.length&&"break"!==n(o);++o);}},{key:"_determineLevelsCustomCallback",value:function(){var t=this;this._crawlNetwork(function(e,i,n){var o=t.hierarchical.levels[e.id];void 0===o&&(o=t.hierarchical.levels[e.id]=1e5);var r=(d.cloneOptions(e,"node"),d.cloneOptions(i,"node"),void d.cloneOptions(n,"edge"));t.hierarchical.levels[i.id]=o+r}),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t=this;this._crawlNetwork(function(e,i,n){var o=t.hierarchical.levels[e.id],r=t.hierarchical.levels[i.id];(function(e){return u.forEach(t.body.edges,function(t){if(t.toId===e.fromId&&t.fromId===e.toId)return!0}),!1})(n)&&void 0!==o&&void 0!==r||(void 0===o&&(o=t.hierarchical.levels[e.id]=1e4),n.toId==i.id?t.hierarchical.levels[i.id]=o+1:t.hierarchical.levels[i.id]=o-1)}),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this;this._crawlNetwork(function(e,i){t.hierarchical.levels[i.id]>t.hierarchical.levels[e.id]&&t.hierarchical.addRelation(e.id,i.id)}),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},i=arguments[1],n={},o=function i(o,r){if(void 0===n[o.id]){t.hierarchical.setTreeIndex(o,r),n[o.id]=!0;for(var a=void 0,s=t._getActiveEdges(o),l=0;l<s.length;l++){var u=s[l];!0===u.connected&&(a=u.toId==o.id?u.from:u.to,o.id!=a.id&&(e(o,a,u),i(a,r)))}}};if(void 0===i)for(var r=0,a=0;a<this.body.nodeIndices.length;a++){var s=this.body.nodeIndices[a];if(void 0===n[s]){var l=this.body.nodes[s];o(l,r),r+=1}}else{var u=this.body.nodes[i];if(void 0===u)return void console.error("Node not found:",i);o(u)}}},{key:"_shiftBlock",value:function(t,e){var i=this,n={};!function t(o){if(!n[o]){n[o]=!0,i.direction.shift(o,e);var r=i.hierarchical.childrenReference[o];if(void 0!==r)for(var a=0;a<r.length;a++)t(r[a])}}(t)}},{key:"_findCommonParent",value:function(t,e){var i=this,n={};return function t(e,n){var o=i.hierarchical.parentReference[n];if(void 0!==o)for(var r=0;r<o.length;r++){var a=o[r];e[a]=!0,t(e,a)}}(n,t),function t(e,n){var o=i.hierarchical.parentReference[n];if(void 0!==o)for(var r=0;r<o.length;r++){var a=o[r];if(void 0!==e[a])return{foundParent:a,withChild:n};var s=t(e,a);if(null!==s.foundParent)return s}return{foundParent:null,withChild:n}}(n,e)}},{key:"setDirectionStrategy",value:function(){var t="UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction;this.direction=t?new f(this):new c(this)}},{key:"_getCenterPosition",value:function(t){for(var e=1e9,i=-1e9,n=0;n<t.length;n++){var o=void 0;if(void 0!==t[n].id)o=t[n];else{var r=t[n];o=this.body.nodes[r]}var a=this.direction.getPosition(o);e=Math.min(e,a),i=Math.max(i,a)}return.5*(e+i)}}]),t}();e.default=g},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.VerticalStrategy=e.HorizontalStrategy=void 0;var n=l(i(3)),o=l(i(4)),r=l(i(5)),a=l(i(0)),s=l(i(1));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,a.default)(this,t)}return(0,s.default)(t,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.fake_use(t,e,i),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,e){this.fake_use(t,e),this.abstract()}},{key:"shift",value:function(t,e){this.fake_use(t,e),this.abstract()}}]),t}(),d=function(t){function e(t){(0,a.default)(this,e);var i=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return i.layout=t,i}return(0,r.default)(e,t),(0,s.default)(e,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(t){return t.x}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==i&&this.layout.hierarchical.addToOrdering(t,i),t.x=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_x,max:e.max_x}}},{key:"sort",value:function(t){t.sort(function(t,e){return void 0===t.x||void 0===e.x?0:t.x-e.x})}},{key:"fix",value:function(t,e){t.y=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.y=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].x+=e}}]),e}(u),h=function(t){function e(t){(0,a.default)(this,e);var i=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return i.layout=t,i}return(0,r.default)(e,t),(0,s.default)(e,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(t){return t.y}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==i&&this.layout.hierarchical.addToOrdering(t,i),t.y=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_y,max:e.max_y}}},{key:"sort",value:function(t){t.sort(function(t,e){return void 0===t.y||void 0===e.y?0:t.y-e.y})}},{key:"fix",value:function(t,e){t.x=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.x=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].y+=e}}]),e}(u);e.HorizontalStrategy=h,e.VerticalStrategy=d},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(8)),o=l(i(19)),r=l(i(6)),a=l(i(0)),s=l(i(1));function l(t){return t&&t.__esModule?t:{default:t}}var u=i(2),d=i(10),h=i(37),c=function(){function t(e,i,n){var o=this;(0,a.default)(this,t),this.body=e,this.canvas=i,this.selectionHandler=n,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this.manipulationHammers=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},u.extend(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){o._clean()}),this.body.emitter.on("_dataChanged",this._restore.bind(this)),this.body.emitter.on("_resetData",this._restore.bind(this))}return(0,s.default)(t,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,e,i){void 0!==e&&(void 0!==e.locale?this.options.locale=e.locale:this.options.locale=i.locale,void 0!==e.locales?this.options.locales=e.locales:this.options.locales=i.locales),void 0!==t&&("boolean"==typeof t?this.options.enabled=t:(this.options.enabled=!0,u.deepExtend(this.options,t)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var t=this.selectionHandler._getSelectedNodeCount(),e=this.selectionHandler._getSelectedEdgeCount(),i=t+e,n=this.options.locales[this.options.locale],o=!1;!1!==this.options.addNode&&(this._createAddNodeButton(n),o=!0),!1!==this.options.addEdge&&(!0===o?this._createSeperator(1):o=!0,this._createAddEdgeButton(n)),1===t&&"function"==typeof this.options.editNode?(!0===o?this._createSeperator(2):o=!0,this._createEditNodeButton(n)):1===e&&0===t&&!1!==this.options.editEdge&&(!0===o?this._createSeperator(3):o=!0,this._createEditEdgeButton(n)),0!==i&&(t>0&&!1!==this.options.deleteNode?(!0===o&&this._createSeperator(4),this._createDeleteButton(n)):0===t&&!1!==this.options.deleteEdge&&(!0===o&&this._createSeperator(4),this._createDeleteButton(n))),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this)),this._temporaryBindEvent("select",this.showManipulatorToolbar.bind(this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.addDescription||this.options.locales.en.addDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindEvent("click",this._performAddNode.bind(this))}},{key:"editNode",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var e=this.selectionHandler._getSelectedNode();if(void 0!==e){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==e.isCluster){var i=u.deepExtend({},e.options,!1);if(i.x=e.x,i.y=e.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(i,function(e){null!=e&&"editNode"===t.inMode&&t.body.data.nodes.getDataSet().update(e),t.showManipulatorToolbar()})}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.edgeDescription||this.options.locales.en.edgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindUI("onTouch",this._handleConnect.bind(this)),this._temporaryBindUI("onDragEnd",this._finishConnect.bind(this)),this._temporaryBindUI("onDrag",this._dragControlNode.bind(this)),this._temporaryBindUI("onRelease",this._finishConnect.bind(this)),this._temporaryBindUI("onDragStart",this._dragStartEdge.bind(this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge","object"!==(0,r.default)(this.options.editEdge)||"function"!=typeof this.options.editEdge.editWithoutDrag||(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0===this.edgeBeingEditedId)){if(!0===this.guiEnabled){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId){var e=this.body.edges[this.edgeBeingEditedId],i=this._getNewTargetNode(e.from.x,e.from.y),n=this._getNewTargetNode(e.to.x,e.to.y);this.temporaryIds.nodes.push(i.id),this.temporaryIds.nodes.push(n.id),this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id),this.body.nodes[n.id]=n,this.body.nodeIndices.push(n.id),this._temporaryBindUI("onTouch",this._controlNodeTouch.bind(this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",this._controlNodeDragStart.bind(this)),this._temporaryBindUI("onDrag",this._controlNodeDrag.bind(this)),this._temporaryBindUI("onDragEnd",this._controlNodeDragEnd.bind(this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(t){var o=e.edgeType.findBorderPositions(t);!1===i.selected&&(i.x=o.from.x,i.y=o.from.y),!1===n.selected&&(n.x=o.to.x,n.y=o.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}else{var o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from,o.to)}}},{key:"deleteSelected",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var e=this.selectionHandler.getSelectedNodes(),i=this.selectionHandler.getSelectedEdges(),n=void 0;if(e.length>0){for(var o=0;o<e.length;o++)if(!0===this.body.nodes[e[o]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(n=this.options.deleteNode)}else i.length>0&&"function"==typeof this.options.deleteEdge&&(n=this.options.deleteEdge);if("function"==typeof n){var r={nodes:e,edges:i};if(2!==n.length)throw new Error("The function for delete does not support two arguments (data, callback)");n(r,function(e){null!=e&&"delete"===t.inMode?(t.body.data.edges.getDataSet().remove(e.edges),t.body.data.nodes.getDataSet().remove(e.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",!0===this.editMode?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",!0===this.editMode?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(t,e){var i=u.deepExtend({},this.options.controlNodeStyle);i.id="targetNode"+u.randomUUID(),i.hidden=!1,i.physics=!1,i.x=t,i.y=e;var n=this.body.functions.createNode(i);return n.shape.boundingBox={left:t,right:t,top:e,bottom:e},n}},{key:"_createEditButton",value:function(){this._clean(),this.manipulationDOM={},u.recursiveDOMDelete(this.editModeDiv);var t=this.options.locales[this.options.locale],e=this._createButton("editMode","vis-button vis-edit vis-edit-mode",t.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(e),this._bindHammerToDiv(e,this.toggleEditMode.bind(this))}},{key:"_clean",value:function(){this.inMode=!1,!0===this.guiEnabled&&(u.recursiveDOMDelete(this.editModeDiv),u.recursiveDOMDelete(this.manipulationDiv),this._cleanManipulatorHammers()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function(){if(0!=this.manipulationHammers.length){for(var t=0;t<this.manipulationHammers.length;t++)this.manipulationHammers[t].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean(),u.recursiveDOMDelete(this.manipulationDiv),u.recursiveDOMDelete(this.editModeDiv),u.recursiveDOMDelete(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var e=this._createButton("addNode","vis-button vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.addNodeMode.bind(this))}},{key:"_createAddEdgeButton",value:function(t){var e=this._createButton("addEdge","vis-button vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.addEdgeMode.bind(this))}},{key:"_createEditNodeButton",value:function(t){var e=this._createButton("editNode","vis-button vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.editNode.bind(this))}},{key:"_createEditEdgeButton",value:function(t){var e=this._createButton("editEdge","vis-button vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.editEdgeMode.bind(this))}},{key:"_createDeleteButton",value:function(t){var e;e=this.options.rtl?"vis-button vis-delete-rtl":"vis-button vis-delete";var i=this._createButton("delete",e,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,this.deleteSelected.bind(this))}},{key:"_createBackButton",value:function(t){var e=this._createButton("back","vis-button vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.showManipulatorToolbar.bind(this))}},{key:"_createButton",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("div"),this.manipulationDOM[t+"Div"].className=e,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=n,this.manipulationDOM[t+"Label"].innerHTML=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",t))}},{key:"_temporaryBindEvent",value:function(t,e){this.temporaryEventFunctions.push({event:t,boundFunction:e}),this.body.emitter.on(t,e)}},{key:"_temporaryBindUI",value:function(t,e){if(void 0===this.body.eventListeners[t])throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+(0,o.default)((0,n.default)(this.body.eventListeners)));this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=e}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)this.temporaryUIFunctions.hasOwnProperty(t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var e=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(e,i)}this.temporaryEventFunctions=[]}},{key:"_bindHammerToDiv",value:function(t,e){var i=new d(t,{});h.onTouch(i,e),this.manipulationHammers.push(i)}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var e=this.body.edgeIndices.indexOf(this.temporaryIds.edges[t]);-1!==e&&this.body.edgeIndices.splice(e,1)}for(var i=0;i<this.temporaryIds.nodes.length;i++){delete this.body.nodes[this.temporaryIds.nodes[i]];var n=this.body.nodeIndices.indexOf(this.temporaryIds.nodes[i]);-1!==n&&this.body.nodeIndices.splice(n,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=u.extend({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(t){var e=this.lastTouch,i=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],o=this.body.nodes[this.temporaryIds.nodes[1]],r=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var a=n.isOverlappingWith(i),s=o.isOverlappingWith(i);!0===a?(this.selectedControlNode=n,r.edgeType.from=n):!0===s&&(this.selectedControlNode=o,r.edgeType.to=o),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var e=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(e);if(void 0!==this.selectedControlNode)this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y;else{var n=e.x-this.lastTouch.x,o=e.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+n,y:this.lastTouch.translation.y+o}}this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),r=void 0,a=o.length-1;a>=0;a--)if(o[a]!==this.selectedControlNode.id){r=this.body.nodes[o[a]];break}if(void 0!==r&&void 0!==this.selectedControlNode)if(!0===r.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var s=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===s.id?this._performEditEdge(r.id,n.to.id):this._performEditEdge(n.from.id,r.id)}else n.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=u.extend({},this.body.view.translation);var e=this.lastTouch,i=this.selectionHandler.getNodeAt(e);if(void 0!==i)if(!0===i.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var n=this._getNewTargetNode(i.x,i.y);this.body.nodes[n.id]=n,this.body.nodeIndices.push(n.id);var o=this.body.functions.createEdge({id:"connectionEdge"+u.randomUUID(),from:i.id,to:n.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[o.id]=o,this.body.edgeIndices.push(o.id),this.temporaryIds.nodes.push(n.id),this.temporaryIds.edges.push(o.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(t){var e=this.body.functions.getPointer(t.center);if(void 0!==this.temporaryIds.nodes[0]){var i=this.body.nodes[this.temporaryIds.nodes[0]];i.x=this.canvas._XconvertDOMtoCanvas(e.x),i.y=this.canvas._YconvertDOMtoCanvas(e.y),this.body.emitter.emit("_redraw")}else{var n=e.x-this.lastTouch.x,o=e.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+n,y:this.lastTouch.translation.y+o}}}},{key:"_finishConnect",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=void 0;void 0!==this.temporaryIds.edges[0]&&(n=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),r=void 0,a=o.length-1;a>=0;a--)if(-1===this.temporaryIds.nodes.indexOf(o[a])){r=this.body.nodes[o[a]];break}this._cleanupTemporaryNodesAndEdges(),void 0!==r&&(!0===r.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[n]&&void 0!==this.body.nodes[r.id]&&this._performAddEdge(n,r.id)),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var e=this.lastTouch;this.selectionHandler._generateClickEvent("dragStart",t,e,void 0,!0)}},{key:"_performAddNode",value:function(t){var e=this,i={id:u.randomUUID(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(i,function(t){null!=t&&"addNode"===e.inMode&&(e.body.data.nodes.getDataSet().add(t),e.showManipulatorToolbar())})}else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,e){var i=this,n={from:t,to:e};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(n,function(t){null!=t&&"addEdge"===i.inMode&&(i.body.data.edges.getDataSet().add(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,e){var i=this,n={id:this.edgeBeingEditedId,from:t,to:e,label:this.body.data.edges._data[this.edgeBeingEditedId].label},o=this.options.editEdge;if("object"===(void 0===o?"undefined":(0,r.default)(o))&&(o=o.editWithoutDrag),"function"==typeof o){if(2!==o.length)throw new Error("The function for edit does not support two arguments (data, callback)");o(n,function(t){null==t||"editEdge"!==i.inMode?(i.body.edges[n.id].updateEdgeType(),i.body.emitter.emit("_redraw"),i.showManipulatorToolbar()):(i.body.data.edges.getDataSet().update(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),t}();e.default=c},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(30)),o=s(i(0)),r=s(i(1)),a=s(i(239));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,i,n){(0,o.default)(this,t),this.body=e,this.springLength=i,this.springConstant=n,this.distanceSolver=new a.default}return(0,r.default)(t,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.distanceSolver.getDistances(this.body,t,e);this._createL_matrix(o),this._createK_matrix(o),this._createE_matrix();for(var r=.01,a=1,s=0,l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),u=5,d=1e9,h=0,c=0,f=0,p=0,g=0;d>r&&s<l;){s+=1;var m=this._getHighestEnergyNode(i),v=(0,n.default)(m,4);for(h=v[0],d=v[1],c=v[2],f=v[3],p=d,g=0;p>a&&g<u;){g+=1,this._moveNode(h,c,f);var y=this._getEnergy(h),_=(0,n.default)(y,3);p=_[0],c=_[1],f=_[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,o=0,r=e[0],a=0,s=0,l=0;l<e.length;l++){var u=e[l];if(!1===i[u].predefinedPosition||!0===i[u].isCluster&&!0===t||!0===i[u].options.fixed.x||!0===i[u].options.fixed.y){var d=this._getEnergy(u),h=(0,n.default)(d,3),c=h[0],f=h[1],p=h[2];o<c&&(o=c,r=u,a=f,s=p)}}return[r,o,a,s]}},{key:"_getEnergy",value:function(t){var e=(0,n.default)(this.E_sums[t],2),i=e[0],o=e[1];return[Math.sqrt(Math.pow(i,2)+Math.pow(o,2)),i,o]}},{key:"_moveNode",value:function(t,e,i){for(var n=this.body.nodeIndices,o=this.body.nodes,r=0,a=0,s=0,l=o[t].x,u=o[t].y,d=this.K_matrix[t],h=this.L_matrix[t],c=0;c<n.length;c++){var f=n[c];if(f!==t){var p=o[f].x,g=o[f].y,m=d[f],v=h[f],y=1/Math.pow(Math.pow(l-p,2)+Math.pow(u-g,2),1.5);r+=m*(1-v*Math.pow(u-g,2)*y),a+=m*(v*(l-p)*(u-g)*y),s+=m*(1-v*Math.pow(l-p,2)*y)}}var _=(e/r+i/a)/(a/r-s/a),b=-(a*_+e)/r;o[t].x+=b,o[t].y+=_,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var n=0;n<e.length;n++){this.L_matrix[e[n]]={};for(var o=0;o<e.length;o++)this.L_matrix[e[n]][e[o]]=i*t[e[n]][e[o]]}}},{key:"_createK_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var n=0;n<e.length;n++){this.K_matrix[e[n]]={};for(var o=0;o<e.length;o++)this.K_matrix[e[n]][e[o]]=i*Math.pow(t[e[n]][e[o]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,e=this.body.nodes;this.E_matrix={},this.E_sums={};for(var i=0;i<t.length;i++)this.E_matrix[t[i]]=[];for(var n=0;n<t.length;n++){for(var o=t[n],r=e[o].x,a=e[o].y,s=0,l=0,u=n;u<t.length;u++){var d=t[u];if(d!==o){var h=e[d].x,c=e[d].y,f=1/Math.sqrt(Math.pow(r-h,2)+Math.pow(a-c,2));this.E_matrix[o][u]=[this.K_matrix[o][d]*(r-h-this.L_matrix[o][d]*(r-h)*f),this.K_matrix[o][d]*(a-c-this.L_matrix[o][d]*(a-c)*f)],this.E_matrix[d][n]=this.E_matrix[o][u],s+=this.E_matrix[o][u][0],l+=this.E_matrix[o][u][1]}}this.E_sums[o]=[s,l]}}},{key:"_updateE_matrix",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,n=this.E_matrix[t],o=this.K_matrix[t],r=this.L_matrix[t],a=i[t].x,s=i[t].y,l=0,u=0,d=0;d<e.length;d++){var h=e[d];if(h!==t){var c=n[d],f=c[0],p=c[1],g=i[h].x,m=i[h].y,v=1/Math.sqrt(Math.pow(a-g,2)+Math.pow(s-m,2)),y=o[h]*(a-g-r[h]*(a-g)*v),_=o[h]*(s-m-r[h]*(s-m)*v);n[d]=[y,_],l+=y,u+=_;var b=this.E_sums[h];b[0]+=y-f,b[1]+=_-p}}this.E_sums[t]=[l,u]}}]),t}();e.default=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,n.default)(this,t)}return(0,o.default)(t,[{key:"getDistances",value:function(t,e,i){for(var n={},o=t.edges,r=0;r<e.length;r++){var a={};n[e[r]]=a;for(var s=0;s<e.length;s++)a[e[s]]=r==s?0:1e9}for(var l=0;l<i.length;l++){var u=o[i[l]];!0===u.connected&&void 0!==n[u.fromId]&&void 0!==n[u.toId]&&(n[u.fromId][u.toId]=1,n[u.toId][u.fromId]=1)}for(var d=e.length,h=0;h<d;h++)for(var c=e[h],f=n[c],p=0;p<d-1;p++)for(var g=e[p],m=n[g],v=p+1;v<d;v++){var y=e[v],_=n[y],b=Math.min(m[y],m[c]+f[y]);m[y]=b,_[g]=b}return n}}]),t}();e.default=a}])},"object"===(0,T.default)(e)&&"object"===(0,T.default)(t)?t.exports=a():(o=[],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r))}).call(this,i(104)(t))},function(t,e,i){t.exports={default:i(350),__esModule:!0}},function(t,e,i){i(351),t.exports=i(8).Object.setPrototypeOf},function(t,e,i){var n=i(15);n(n.S,"Object",{setPrototypeOf:i(353).set})},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(16),o=i(45),r=function(t,e){if(o(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(133)(Function.call,i(84).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return r(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:r}},function(t,e,i){t.exports={default:i(355),__esModule:!0}},function(t,e,i){i(356),t.exports=i(8).Math.sign},function(t,e,i){var n=i(15);n(n.S,"Math",{sign:i(357)})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,i){i(139),i(365),i(366),i(367),t.exports=i(8).Symbol},function(t,e,i){var n=i(46),o=i(93),r=i(59);t.exports=function(t){var e=n(t),i=o.f;if(i)for(var a,s=i(t),l=r.f,u=0;s.length>u;)l.call(t,a=s[u++])&&e.push(a);return e}},function(t,e,i){var n=i(31),o=i(361),r=i(362);t.exports=function(t){return function(e,i,a){var s,l=n(e),u=o(l.length),d=r(a,u);if(t&&i!=i){for(;u>d;)if((s=l[d++])!=s)return!0}else for(;u>d;d++)if((t||d in l)&&l[d]===i)return t||d||0;return!t&&-1}}},function(t,e,i){var n=i(90),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},function(t,e,i){var n=i(90),o=Math.max,r=Math.min;t.exports=function(t,e){return(t=n(t))<0?o(t+e,0):r(t,e)}},function(t,e,i){var n=i(137);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(22).document;t.exports=n&&n.documentElement},function(t,e){},function(t,e,i){i(89)("asyncIterator")},function(t,e,i){i(89)("observable")},function(t,e,i){t.exports={default:i(369),__esModule:!0}},function(t,e,i){i(370),t.exports=i(8).Object.assign},function(t,e,i){var n=i(15);n(n.S+n.F,"Object",{assign:i(371)})},function(t,e,i){"use strict";var n=i(17),o=i(46),r=i(93),a=i(59),s=i(47),l=i(136),u=Object.assign;t.exports=!u||i(38)(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=u({},t)[i]||Object.keys(u({},e)).join("")!=n})?function(t,e){for(var i=s(t),u=arguments.length,d=1,h=r.f,c=a.f;u>d;)for(var f,p=l(arguments[d++]),g=h?o(p).concat(h(p)):o(p),m=g.length,v=0;m>v;)f=g[v++],n&&!c.call(p,f)||(i[f]=p[f]);return i}:u},function(t,e,i){t.exports={default:i(373),__esModule:!0}},function(t,e,i){var n=i(8),o=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,e,i){t.exports={default:i(375),__esModule:!0}},function(t,e,i){i(376),t.exports=i(8).Object.isFrozen},function(t,e,i){var n=i(16);i(32)("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,i){t.exports={default:i(378),__esModule:!0}},function(t,e,i){i(379),t.exports=i(8).Object.preventExtensions},function(t,e,i){var n=i(16),o=i(141).onFreeze;i(32)("preventExtensions",function(t){return function(e){return t&&n(e)?t(o(e)):e}})},function(t,e,i){t.exports={default:i(381),__esModule:!0}},function(t,e,i){i(382),t.exports=i(8).Object.isExtensible},function(t,e,i){var n=i(16);i(32)("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},function(t,e,i){t.exports={default:i(384),__esModule:!0}},function(t,e,i){i(385);var n=i(8).Object;t.exports=function(t,e){return n.defineProperties(t,e)}},function(t,e,i){var n=i(15);n(n.S+n.F*!i(17),"Object",{defineProperties:i(143)})},function(t,e,i){t.exports={default:i(387),__esModule:!0}},function(t,e,i){i(388);var n=i(8).Object;t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)}},function(t,e,i){var n=i(31),o=i(84).f;i(32)("getOwnPropertyDescriptor",function(){return function(t,e){return o(n(t),e)}})},function(t,e,i){t.exports={default:i(390),__esModule:!0}},function(t,e,i){i(391);var n=i(8).Object;t.exports=function(t){return n.getOwnPropertyNames(t)}},function(t,e,i){i(32)("getOwnPropertyNames",function(){return i(144).f})},function(t,e,i){t.exports={default:i(393),__esModule:!0}},function(t,e,i){i(394),t.exports=i(8).Object.getPrototypeOf},function(t,e,i){var n=i(47),o=i(146);i(32)("getPrototypeOf",function(){return function(t){return o(n(t))}})},function(t,e,i){t.exports={default:i(396),__esModule:!0}},function(t,e,i){i(139),t.exports=i(8).Object.getOwnPropertySymbols},function(t,e,i){t.exports={default:i(398),__esModule:!0}},function(t,e,i){i(399);var n=i(8).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,i){var n=i(15);n(n.S,"Object",{create:i(94)})},function(t,e,i){t.exports={default:i(401),__esModule:!0}},function(t,e,i){i(402),t.exports=i(8).Object.keys},function(t,e,i){var n=i(47),o=i(46);i(32)("keys",function(){return function(t){return o(n(t))}})},function(t,e,i){t.exports={default:i(404),__esModule:!0}},function(t,e,i){i(405);var n=i(8).Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},function(t,e,i){var n=i(15);n(n.S+n.F*!i(17),"Object",{defineProperty:i(29).f})},function(t,e,i){"use strict";e.__esModule=!0;var n=a(i(407)),o=a(i(138)),r="function"==typeof o.default&&"symbol"==typeof n.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};function a(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof o.default&&"symbol"===r(n.default)?function(t){return void 0===t?"undefined":r(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":r(t)}},function(t,e,i){t.exports={default:i(408),__esModule:!0}},function(t,e,i){i(409),i(412),t.exports=i(88).f("iterator")},function(t,e,i){"use strict";var n=i(410)(!0);i(147)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){var n=i(90),o=i(85);t.exports=function(t){return function(e,i){var r,a,s=String(o(e)),l=n(i),u=s.length;return l<0||l>=u?t?"":void 0:(r=s.charCodeAt(l))<55296||r>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):r:t?s.slice(l,l+2):a-56320+(r-55296<<10)+65536}}},function(t,e,i){"use strict";var n=i(94),o=i(58),r=i(87),a={};i(37)(a,i(39)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(a,{next:o(1,i)}),r(t,e+" Iterator")}},function(t,e,i){i(413);for(var n=i(22),o=i(37),r=i(95),a=i(39)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],d=n[u],h=d&&d.prototype;h&&!h[a]&&o(h,a,u),r[u]=r.Array}},function(t,e,i){"use strict";var n=i(414),o=i(415),r=i(95),a=i(31);t.exports=i(147)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){var n=i(417);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(19)(n,o);n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(18)(!1)).push([t.i,'.vis .overlay{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10}.vis-active{box-shadow:0 0 10px #86d5f8}.vis [class*=span]{min-height:0;width:auto}div.vis-configuration{position:relative;display:block;float:left;font-size:12px}div.vis-configuration-wrapper{display:block;width:700px}div.vis-configuration-wrapper::after{clear:both;content:"";display:block}div.vis-configuration.vis-config-option-container{display:block;width:495px;background-color:#fff;border:2px solid #f7f8fa;border-radius:4px;margin-top:20px;left:10px;padding-left:5px}div.vis-configuration.vis-config-button{display:block;width:495px;height:25px;vertical-align:middle;line-height:25px;background-color:#f7f8fa;border:2px solid #ceced0;border-radius:4px;margin-top:20px;left:10px;padding-left:5px;cursor:pointer;margin-bottom:30px}div.vis-configuration.vis-config-button.hover{background-color:#4588e6;border:2px solid #214373;color:#fff}div.vis-configuration.vis-config-item{display:block;float:left;width:495px;height:25px;vertical-align:middle;line-height:25px}div.vis-configuration.vis-config-item.vis-config-s2{left:10px;background-color:#f7f8fa;padding-left:5px;border-radius:3px}div.vis-configuration.vis-config-item.vis-config-s3{left:20px;background-color:#e4e9f0;padding-left:5px;border-radius:3px}div.vis-configuration.vis-config-item.vis-config-s4{left:30px;background-color:#cfd8e6;padding-left:5px;border-radius:3px}div.vis-configuration.vis-config-header{font-size:18px;font-weight:700}div.vis-configuration.vis-config-label{width:120px;height:25px;line-height:25px}div.vis-configuration.vis-config-label.vis-config-s3{width:110px}div.vis-configuration.vis-config-label.vis-config-s4{width:100px}div.vis-configuration.vis-config-colorBlock{top:1px;width:30px;height:19px;border:1px solid #444;border-radius:2px;padding:0;margin:0;cursor:pointer}input.vis-configuration.vis-config-checkbox{left:-5px}input.vis-configuration.vis-config-rangeinput{position:relative;top:-5px;width:60px;padding:1px;margin:0;pointer-events:none}input.vis-configuration.vis-config-range{-webkit-appearance:none;border:0 solid #fff;background-color:rgba(0,0,0,0);width:300px;height:20px}input.vis-configuration.vis-config-range::-webkit-slider-runnable-track{width:300px;height:5px;background:#dedede;background:-moz-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#dedede),color-stop(99%,#c8c8c8));background:-webkit-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-o-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-ms-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:linear-gradient(to bottom,#dedede 0,#c8c8c8 99%);border:1px solid #999;box-shadow:#aaa 0 0 3px 0;border-radius:3px}input.vis-configuration.vis-config-range::-webkit-slider-thumb{-webkit-appearance:none;border:1px solid #14334b;height:17px;width:17px;border-radius:50%;background:#3876c2;background:-moz-linear-gradient(top,#3876c2 0,#385380 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#3876c2),color-stop(100%,#385380));background:-webkit-linear-gradient(top,#3876c2 0,#385380 100%);background:-o-linear-gradient(top,#3876c2 0,#385380 100%);background:-ms-linear-gradient(top,#3876c2 0,#385380 100%);background:linear-gradient(to bottom,#3876c2 0,#385380 100%);box-shadow:#111927 0 0 1px 0;margin-top:-7px}input.vis-configuration.vis-config-range:focus{outline:0}input.vis-configuration.vis-config-range:focus::-webkit-slider-runnable-track{background:#9d9d9d;background:-moz-linear-gradient(top,#9d9d9d 0,#c8c8c8 99%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#9d9d9d),color-stop(99%,#c8c8c8));background:-webkit-linear-gradient(top,#9d9d9d 0,#c8c8c8 99%);background:-o-linear-gradient(top,#9d9d9d 0,#c8c8c8 99%);background:-ms-linear-gradient(top,#9d9d9d 0,#c8c8c8 99%);background:linear-gradient(to bottom,#9d9d9d 0,#c8c8c8 99%)}input.vis-configuration.vis-config-range::-moz-range-track{width:300px;height:10px;background:#dedede;background:-moz-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#dedede),color-stop(99%,#c8c8c8));background:-webkit-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-o-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-ms-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:linear-gradient(to bottom,#dedede 0,#c8c8c8 99%);border:1px solid #999;box-shadow:#aaa 0 0 3px 0;border-radius:3px}input.vis-configuration.vis-config-range::-moz-range-thumb{border:none;height:16px;width:16px;border-radius:50%;background:#385380}input.vis-configuration.vis-config-range:-moz-focusring{outline:1px solid #fff;outline-offset:-1px}input.vis-configuration.vis-config-range::-ms-track{width:300px;height:5px;background:0 0;border-color:transparent;border-width:6px 0;color:transparent}input.vis-configuration.vis-config-range::-ms-fill-lower{background:#777;border-radius:10px}input.vis-configuration.vis-config-range::-ms-fill-upper{background:#ddd;border-radius:10px}input.vis-configuration.vis-config-range::-ms-thumb{border:none;height:16px;width:16px;border-radius:50%;background:#385380}input.vis-configuration.vis-config-range:focus::-ms-fill-lower{background:#888}input.vis-configuration.vis-config-range:focus::-ms-fill-upper{background:#ccc}.vis-configuration-popup{position:absolute;background:rgba(57,76,89,.85);border:2px solid #f2faff;line-height:30px;height:30px;width:150px;text-align:center;color:#fff;font-size:14px;border-radius:4px;-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out}.vis-configuration-popup:after,.vis-configuration-popup:before{left:100%;top:50%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.vis-configuration-popup:after{border-color:rgba(136,183,213,0);border-left-color:rgba(57,76,89,.85);border-width:8px;margin-top:-8px}.vis-configuration-popup:before{border-color:rgba(194,225,245,0);border-left-color:#f2faff;border-width:12px;margin-top:-12px}div.vis-tooltip{position:absolute;visibility:hidden;padding:5px;white-space:nowrap;font-family:verdana;font-size:14px;color:#000;background-color:#f5f4ed;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;border:1px solid #808074;box-shadow:3px 3px 10px rgba(0,0,0,.2);pointer-events:none;z-index:5}.vis-current-time{background-color:#ff7f6e;width:2px;z-index:1;pointer-events:none}.vis-rolling-mode-btn{height:40px;width:40px;position:absolute;top:7px;right:20px;border-radius:50%;font-size:28px;cursor:pointer;opacity:.8;color:#fff;font-weight:700;text-align:center;background:#3876c2}.vis-rolling-mode-btn:before{content:"\\26F6"}.vis-rolling-mode-btn:hover{opacity:1}.vis-custom-time{background-color:#6e94ff;width:2px;cursor:move;z-index:1}.vis-panel.vis-background.vis-horizontal .vis-grid.vis-horizontal{position:absolute;width:100%;height:0;border-bottom:1px solid}.vis-panel.vis-background.vis-horizontal .vis-grid.vis-minor{border-color:#e5e5e5}.vis-panel.vis-background.vis-horizontal .vis-grid.vis-major{border-color:#bfbfbf}.vis-data-axis .vis-y-axis.vis-major{width:100%;position:absolute;color:#4d4d4d;white-space:nowrap}.vis-data-axis .vis-y-axis.vis-major.vis-measure{padding:0;margin:0;border:0;visibility:hidden;width:auto}.vis-data-axis .vis-y-axis.vis-minor{position:absolute;width:100%;color:#bebebe;white-space:nowrap}.vis-data-axis .vis-y-axis.vis-minor.vis-measure{padding:0;margin:0;border:0;visibility:hidden;width:auto}.vis-data-axis .vis-y-axis.vis-title{position:absolute;color:#4d4d4d;white-space:nowrap;bottom:20px;text-align:center}.vis-data-axis .vis-y-axis.vis-title.vis-measure{padding:0;margin:0;visibility:hidden;width:auto}.vis-data-axis .vis-y-axis.vis-title.vis-left{bottom:0;-webkit-transform-origin:left top;-moz-transform-origin:left top;-ms-transform-origin:left top;-o-transform-origin:left top;transform-origin:left bottom;-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg);transform:rotate(-90deg)}.vis-data-axis .vis-y-axis.vis-title.vis-right{bottom:0;-webkit-transform-origin:right bottom;-moz-transform-origin:right bottom;-ms-transform-origin:right bottom;-o-transform-origin:right bottom;transform-origin:right bottom;-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-ms-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg)}.vis-legend{background-color:rgba(247,252,255,.65);padding:5px;border:1px solid #b3b3b3;box-shadow:2px 2px 10px rgba(154,154,154,.55)}.vis-legend-text{white-space:nowrap;display:inline-block}.vis-item{position:absolute;color:#1a1a1a;border-color:#97b0f8;border-width:1px;background-color:#d5ddf6;display:inline-block;z-index:1}.vis-item.vis-selected{border-color:#ffc200;background-color:#fff785;z-index:2}.vis-editable.vis-selected{cursor:move}.vis-item.vis-point.vis-selected{background-color:#fff785}.vis-item.vis-box{text-align:center;border-style:solid;border-radius:2px}.vis-item.vis-point{background:0 0}.vis-item.vis-dot{position:absolute;padding:0;border-width:4px;border-style:solid;border-radius:4px}.vis-item.vis-range{border-style:solid;border-radius:2px;box-sizing:border-box}.vis-item.vis-background{border:none;background-color:rgba(213,221,246,.4);box-sizing:border-box;padding:0;margin:0}.vis-item .vis-item-overflow{position:relative;width:100%;height:100%;padding:0;margin:0;overflow:hidden}.vis-item-visible-frame{white-space:nowrap}.vis-item.vis-range .vis-item-content{position:relative;display:inline-block}.vis-item.vis-background .vis-item-content{position:absolute;display:inline-block}.vis-item.vis-line{padding:0;position:absolute;width:0;border-left-width:1px;border-left-style:solid}.vis-item .vis-item-content{white-space:nowrap;box-sizing:border-box;padding:5px}.vis-item .vis-onUpdateTime-tooltip{position:absolute;background:#4f81bd;color:#fff;width:200px;text-align:center;white-space:nowrap;padding:5px;border-radius:1px;transition:.4s;-o-transition:.4s;-moz-transition:.4s;-webkit-transition:.4s}.vis-item .vis-delete,.vis-item .vis-delete-rtl{position:absolute;top:0;width:24px;height:24px;box-sizing:border-box;padding:0 5px;cursor:pointer;-webkit-transition:background .2s linear;-moz-transition:background .2s linear;-ms-transition:background .2s linear;-o-transition:background .2s linear;transition:background .2s linear}.vis-item .vis-delete{right:-24px}.vis-item .vis-delete-rtl{left:-24px}.vis-item .vis-delete-rtl:after,.vis-item .vis-delete:after{content:"\\00D7";color:red;font-family:arial,sans-serif;font-size:22px;font-weight:700;-webkit-transition:color .2s linear;-moz-transition:color .2s linear;-ms-transition:color .2s linear;-o-transition:color .2s linear;transition:color .2s linear}.vis-item .vis-delete-rtl:hover,.vis-item .vis-delete:hover{background:red}.vis-item .vis-delete-rtl:hover:after,.vis-item .vis-delete:hover:after{color:#fff}.vis-item .vis-drag-center{position:absolute;width:100%;height:100%;top:0;left:0;cursor:move}.vis-item.vis-range .vis-drag-left{position:absolute;width:24px;max-width:20%;min-width:2px;height:100%;top:0;left:-4px;cursor:w-resize}.vis-item.vis-range .vis-drag-right{position:absolute;width:24px;max-width:20%;min-width:2px;height:100%;top:0;right:-4px;cursor:e-resize}.vis-range.vis-item.vis-readonly .vis-drag-left,.vis-range.vis-item.vis-readonly .vis-drag-right{cursor:auto}.vis-itemset{position:relative;padding:0;margin:0;box-sizing:border-box}.vis-itemset .vis-background,.vis-itemset .vis-foreground{position:absolute;width:100%;height:100%;overflow:visible}.vis-axis{position:absolute;width:100%;height:0;left:0;z-index:1}.vis-foreground .vis-group{position:relative;box-sizing:border-box;border-bottom:1px solid #bfbfbf}.vis-foreground .vis-group:last-child{border-bottom:none}.vis-nesting-group{cursor:pointer}.vis-nested-group{background:#f5f5f5}.vis-label.vis-nesting-group.expanded:before{content:"\\25BC"}.vis-label.vis-nesting-group.collapsed-rtl:before{content:"\\25C0"}.vis-label.vis-nesting-group.collapsed:before{content:"\\25B6"}.vis-overlay{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10}.vis-labelset{position:relative;overflow:hidden;box-sizing:border-box}.vis-labelset .vis-label{position:relative;left:0;top:0;width:100%;color:#4d4d4d;box-sizing:border-box}.vis-labelset .vis-label{border-bottom:1px solid #bfbfbf}.vis-labelset .vis-label.draggable{cursor:pointer}.vis-labelset .vis-label:last-child{border-bottom:none}.vis-labelset .vis-label .vis-inner{display:inline-block;padding:5px}.vis-labelset .vis-label .vis-inner.vis-hidden{padding:0}.vis-panel{position:absolute;padding:0;margin:0;box-sizing:border-box}.vis-panel.vis-bottom,.vis-panel.vis-center,.vis-panel.vis-left,.vis-panel.vis-right,.vis-panel.vis-top{border:1px #bfbfbf}.vis-panel.vis-center,.vis-panel.vis-left,.vis-panel.vis-right{border-top-style:solid;border-bottom-style:solid;overflow:hidden}.vis-left.vis-panel.vis-vertical-scroll,.vis-right.vis-panel.vis-vertical-scroll{height:100%;overflow-x:hidden;overflow-y:scroll}.vis-left.vis-panel.vis-vertical-scroll{direction:rtl}.vis-left.vis-panel.vis-vertical-scroll .vis-content{direction:ltr}.vis-right.vis-panel.vis-vertical-scroll{direction:ltr}.vis-right.vis-panel.vis-vertical-scroll .vis-content{direction:rtl}.vis-panel.vis-bottom,.vis-panel.vis-center,.vis-panel.vis-top{border-left-style:solid;border-right-style:solid}.vis-background{overflow:hidden}.vis-panel>.vis-content{position:relative}.vis-panel .vis-shadow{position:absolute;width:100%;height:1px;box-shadow:0 0 10px rgba(0,0,0,.8)}.vis-panel .vis-shadow.vis-top{top:-1px;left:0}.vis-panel .vis-shadow.vis-bottom{bottom:-1px;left:0}.vis-graph-group0{fill:#4f81bd;fill-opacity:0;stroke-width:2px;stroke:#4f81bd}.vis-graph-group1{fill:#f79646;fill-opacity:0;stroke-width:2px;stroke:#f79646}.vis-graph-group2{fill:#8c51cf;fill-opacity:0;stroke-width:2px;stroke:#8c51cf}.vis-graph-group3{fill:#75c841;fill-opacity:0;stroke-width:2px;stroke:#75c841}.vis-graph-group4{fill:#ff0100;fill-opacity:0;stroke-width:2px;stroke:#ff0100}.vis-graph-group5{fill:#37d8e6;fill-opacity:0;stroke-width:2px;stroke:#37d8e6}.vis-graph-group6{fill:#042662;fill-opacity:0;stroke-width:2px;stroke:#042662}.vis-graph-group7{fill:#00ff26;fill-opacity:0;stroke-width:2px;stroke:#00ff26}.vis-graph-group8{fill:#f0f;fill-opacity:0;stroke-width:2px;stroke:#f0f}.vis-graph-group9{fill:#8f3938;fill-opacity:0;stroke-width:2px;stroke:#8f3938}.vis-timeline .vis-fill{fill-opacity:.1;stroke:none}.vis-timeline .vis-bar{fill-opacity:.5;stroke-width:1px}.vis-timeline .vis-point{stroke-width:2px;fill-opacity:1}.vis-timeline .vis-legend-background{stroke-width:1px;fill-opacity:.9;fill:#fff;stroke:#c2c2c2}.vis-timeline .vis-outline{stroke-width:1px;fill-opacity:1;fill:#fff;stroke:#e5e5e5}.vis-timeline .vis-icon-fill{fill-opacity:.3;stroke:none}.vis-time-axis{position:relative;overflow:hidden}.vis-time-axis.vis-foreground{top:0;left:0;width:100%}.vis-time-axis.vis-background{position:absolute;top:0;left:0;width:100%;height:100%}.vis-time-axis .vis-text{position:absolute;color:#4d4d4d;padding:3px;overflow:hidden;box-sizing:border-box;white-space:nowrap}.vis-time-axis .vis-text.vis-measure{position:absolute;padding-left:0;padding-right:0;margin-left:0;margin-right:0;visibility:hidden}.vis-time-axis .vis-grid.vis-vertical{position:absolute;border-left:1px solid}.vis-time-axis .vis-grid.vis-vertical-rtl{position:absolute;border-right:1px solid}.vis-time-axis .vis-grid.vis-minor{border-color:#e5e5e5}.vis-time-axis .vis-grid.vis-major{border-color:#bfbfbf}.vis-timeline{position:relative;border:1px solid #bfbfbf;overflow:hidden;padding:0;margin:0;box-sizing:border-box}',""])},function(t,e,i){var n=i(419);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(19)(n,o);n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(18)(!1)).push([t.i,".vis-minor {\n    text-align: left;\n    font-size: 12px;\n}\n\n.vis-custom-time {\n    z-index: 9999;\n}\n\n.vis-item-content {\n    text-overflow: ellipsis;\n    overflow: hidden;\n}\n\n.loading-icon {\n    display: inline-block;\n    position: relative;\n    width: 64px;\n    height: 64px;\n  }\n  .loading-icon div {\n    box-sizing: border-box;\n    display: block;\n    position: absolute;\n    width: 51px;\n    height: 51px;\n    margin: 6px;\n    border: 6px solid #bbb;\n    border-radius: 50%;\n    animation: loading-icon 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n    border-color: #bbb transparent transparent transparent;\n  }\n  .loading-icon div:nth-child(1) {\n    animation-delay: -0.45s;\n  }\n  .loading-icon div:nth-child(2) {\n    animation-delay: -0.3s;\n  }\n  .loading-icon div:nth-child(3) {\n    animation-delay: -0.15s;\n  }\n  @keyframes loading-icon {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }",""])},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);e.default=t}(i(421));var r=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.elem=t,this.mediaduration=0,this.annotations=[],this.mediaready=!1)}return o(e,[{key:"init",value:function(t){(n=t).listen("player","mediaready",this,this.mediareadyListener),n.listen("player","timeupdate",this,this.timeUpdate),n.listen("timeline","timeupdate",this,this.timeUpdate),n.listen("annotationviewer","timeupdate",this,this.timeUpdate),n.listen("timeline","selectitem",this,this.selectItem),n.listen("timeline","click",this,this.deselectAnnotation),n.listen("timeline","loaded",this,this.timelineLoaded),n.listen("timeline","itemupdate",this,this.itemUpdate),n.listen("main","loadannotations",this,this.loadAnnotations),n.listen("annotationviewer","edit",this,this.editClickedListener)}},{key:"mediareadyListener",value:function(t){this.handler.mediaready=!0,this.handler.mediaduration=t}},{key:"editClickedListener",value:function(e){if(this.handler.mediaready){this.handler.elem&&(this.handler.elem.innerHTML='\n\t\t\t<form id="annotation-form">\n\t\t\t<div id="annotationtype-wrapper" class="annotation-element">\n\t\t\t\t<select id="annotationtype" required>\n\t\t\t\t\t<option selected value="" disabled>Add annotation type</option>\n\t\t\t\t\t<option value="note">Note</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div id="annotationlist-wrapper" class="annotation-element">\n\t\t\t\t<select id="annotationlist" disabled>\n\t\t\t\t\t<option value="0">Select an annotation</option>\n\t\t\t\t\t\x3c!--TODO: load existing annotations from IIIF AV manifest --\x3e\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div id="annotationtext-wrapper" class="annotation-element">\n\t\t\t\t<span id="annotationtypedisplay"><i class="fas fa-sticky-note"></i> Note</span>\n\t\t\t\t<i id="deleteannotation" class="fa fa-trash rightelement pointer" aria-hidden="true"></i><br/>\n\t\t\t\t<textarea id="annotationtext" required placeholder="Enter your annotation here" maxlength="60"></textarea>\n\t\t\t</div>\n\t\t\t<div id="annotationtiming-wrapper" class="annotation-element">\n\t\t\t\tTiming<br/>\n\t\t\t\t<i id="stepbackward" class="fas fa-step-backward leftelement pointer"></i>\n\t\t\t\t<input type="text" id="annotationtiming-start" class="annotationtiming-element" value="00:00.000" pattern="((?:2[0-3]|[01]?[0-9]):)?[0-5][0-9]:[0-5][0-9].[0-9]{3}">\n\t\t\t\t<span class="fa fa-stack leftelement"><i id="startup" class="fas fa-sort-up pointer"></i><i id="startdown" class="fas fa-sort-down pointer"></i></span>\n\t\t\t\t<i id="stepforward" class="fas fa-step-forward rightelement pointer"></i>\n\t\t\t\t<span class="fa fa-stack rightelement"><i id="endup" class="fas fa-sort-up pointer"></i><i id="enddown" class="fas fa-sort-down pointer"></i></span>\n\t\t\t\t<input type="text" id="annotationtiming-end" class="annotationtiming-element" value="00:10.000" pattern="((?:2[0-3]|[01]?[0-9]):)?[0-5][0-9]:[0-5][0-9].[0-9]{3}">\n\t\t\t</div>\n\t\t\t<div id="annotationsave-wrapper" class="annotation-element">\n\t\t\t\t<div id="annotationsave-button">Save</div>\n\t\t\t</div>\n\t\t\t<button id="annotationsave-submit" type="submit">submit</button>\n\t\t\t</form>\n\t\t');var i=this.handler;this.handler.annotations.length>0&&this.handler.updateAnnotationList(this.handler),t("#annotationsave-button").click(function(){var e=t("#annotation-form");if(e[0].checkValidity()){var o=i.deformatTime(t("#annotationtiming-end").val())>i.mediaduration?i.mediaduration:i.deformatTime(t("#annotationtiming-end").val());t("#annotationtiming-end").val(i.formatTime(o));var r=i.deformatTime(t("#annotationtiming-start").val());r=i.validateStartTime(r),t("#annotationtiming-start").val(i.formatTime(r));var a=parseInt(t("#annotationlist").find("option:selected").attr("value")),s={};s.text=t("#annotationtext").val(),s.start=r,s.end=o,s.type=t("#annotationtype").val(),s.id=0!=a?a:Math.floor(1e8+9e8*Math.random()),0!=a?i.annotations[i.annotations.findIndex(function(t){return t.id===s.id})]=s:i.annotations.push(s),i.updateAnnotationList(i),0!=a?n.signal("annotationeditor","updateannotation",s):n.signal("annotationeditor","addannotation",s),i.deselectAnnotation()}else e.find(":submit").click()}),t("#annotationlist").change(function(){var e=parseInt(t("#annotationlist").find("option:selected").attr("value"));t("#annotationtype").val(i.annotations.find(function(t){return t.id===e}).type),t("#annotationtype").trigger("change"),t("#annotationtext").val(i.annotations.find(function(t){return t.id===e}).text),t("#annotationtiming-start").val(i.formatTime(i.annotations.find(function(t){return t.id===e}).start)),t("#annotationtiming-end").val(i.formatTime(i.annotations.find(function(t){return t.id===e}).end)),t("#deleteannotation").show(),n.signal("annotationeditor","selectannotation",i.annotations.find(function(t){return t.id===e}))}),t("#annotationtype").change(function(){t("#annotationtype").find("option:selected").attr("value");t("#annotationtypedisplay").show()}),t("#stepbackward").click(function(){t("#annotationtiming-start").val(i.formatTime(0))}),t("#stepforward").click(function(){t("#annotationtiming-end").val(i.formatTime(i.mediaduration))}),t("#startup").mousedown(function(){i.starttimeChange(500)}),t("#startdown").mousedown(function(){i.starttimeChange(-500)}),t("#endup").mousedown(function(){i.endtimeChange(500)}),t("#enddown").mousedown(function(){i.endtimeChange(-500)}),t("#deleteannotation").click(function(){var e=parseInt(t("#annotationlist").find("option:selected").attr("value"));n.signal("annotationeditor","deleteannotation",i.annotations.find(function(t){return t.id===e})),i.annotations.splice(i.annotations.findIndex(function(t){return t.id===e}),1),i.deselectAnnotation(),i.updateAnnotationList(i)})}}},{key:"timeUpdate",value:function(e){var i=1e3*e<0?0:1e3*e,n=(i=i>this.handler.mediaduration?this.handler.mediaduration:i)+1e4>this.handler.mediaduration?this.handler.mediaduration:i+1e4;t("#annotationtiming-start").val(this.handler.formatTime(i)),t("#annotationtiming-end").val(this.handler.formatTime(n))}},{key:"selectItem",value:function(e){this.handler.annotations.find(function(t){return t.id===e})?(t("#annotationlist").val(e),t("#annotationlist").trigger("change")):this.handler.deselectAnnotation()}},{key:"deselectAnnotation",value:function(e){t("#annotationtype").val(""),t("#annotationlist").val("0"),t("#annotationtext").val(""),t("#annotationtypedisplay").hide(),t("#deleteannotation").hide(),n.signal("annotationeditor","deselectannotation",null)}},{key:"updateAnnotationList",value:function(e){var i=t("#annotationlist");i.empty(),0==Object.keys(e.annotations).length?i.attr("disabled","disabled"):i.removeAttr("disabled"),i.append(t("<option></option>").attr("value",0).text("Select an annotation")),e.annotations.sort(function(t,e){return t.start-e.start}),Object.keys(e.annotations).forEach(function(n,o){i.append(t("<option></option>").attr("value",e.annotations[n].id).text(e.annotations[n].text+" ["+e.formatTime(e.annotations[n].start)+"]"))})}},{key:"starttimeChange",value:function(e){var i=this.deformatTime(t("#annotationtiming-start").val())+e<0?0:this.deformatTime(t("#annotationtiming-start").val())+e;i=this.validateStartTime(i),t("#annotationtiming-start").val(this.formatTime(i))}},{key:"endtimeChange",value:function(e){var i=this.deformatTime(t("#annotationtiming-end").val())+e>this.mediaduration?this.mediaduration:this.deformatTime(t("#annotationtiming-end").val())+e;i=this.validateEndTime(i),t("#annotationtiming-end").val(this.formatTime(i))}},{key:"validateStartTime",value:function(e){return e=e>this.mediaduration?this.mediaduration:e,this.deformatTime(t("#annotationtiming-end").val())<e&&(e=this.deformatTime(t("#annotationtiming-end").val())),e}},{key:"validateEndTime",value:function(e){return e=e<0?0:e,this.deformatTime(t("#annotationtiming-start").val())>e&&(e=this.deformatTime(t("#annotationtiming-start").val())),e}},{key:"formatTime",value:function(t){var e=Math.floor(t/36e5),i=Math.floor(t/6e4),n=Math.floor(t%6e4/1e3),o=t%1e3,r=e>0?e+":":"";return r+=i<10?"0"+i+":":i+":",r+=n<10?"0"+n+".":n+".",r+=o<10?"00"+o:o<100?"0"+o:o}},{key:"deformatTime",value:function(t){for(var e=t.split(":"),i=(e=e.length>3?e.slice(e.length-3):e).length;i<3;i++)e.unshift(0);var n=parseInt(e[0]),o=parseInt(e[1]),r=e[2].split(".");return 1e3*(3600*n+60*o+parseInt(r[0]))+parseInt(r[1])}},{key:"getAnnotations",value:function(){return this.annotations}},{key:"loadAnnotations",value:function(t){this.handler.annotations=t,this.handler.updateAnnotationList(this.handler),this.handler.annotations.length>0&&this.handler.annotations.forEach(function(t){n.signal("annotationeditor","annotationload",t)})}},{key:"timelineLoaded",value:function(t){this.handler.annotations.length>0&&this.handler.annotations.forEach(function(t){n.signal("annotationeditor","annotationload",t)})}},{key:"itemUpdate",value:function(e){var i=this.handler.annotations[this.handler.annotations.findIndex(function(t){return t.id===e.id})];i.start=e.start instanceof Date?e.start.getTime():e.start,i.end=e.end instanceof Date?e.end.getTime():e.end,this.handler.annotations[this.handler.annotations.findIndex(function(t){return t.id===e.id})]=i,this.handler.updateAnnotationList(this.handler),n.signal("annotationeditor","updateAnnotationfromtimeline",i),t("#annotationtiming-start").val(this.handler.formatTime(i.start)),t("#annotationtiming-end").val(this.handler.formatTime(i.end))}}]),e}();e.default=r}).call(this,i(5))},function(t,e,i){var n=i(422);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(19)(n,o);n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(18)(!1)).push([t.i,".annotation-element {\n    text-align: left;\n    margin: 10px 30px;   \n}\n\n#annotationtext {\n    width: 250px;\n    height: 60px;\n    resize: none;\n}\n\n.annotationtiming-element {\n    width: 70px;\n}\n\n#annotationtiming-start {\n    float: left;\n}\n\n.pointer {\n    cursor: pointer;\n}\n\n.leftelement {\n    float: left;\n}\n\n.fa-step-backward.leftelement {\n    width: 1.25em;\n}\n\n#annotationtiming-end {\n    float: right;\n}\n\n.rightelement {\n    float: right;\n}\n\n.fa-stack {\n    height: 1em;\n    line-height: 1em;\n    width: 1em;\n}\n  \n.fa-stack .fa-sort-down {\n    position: absolute;\n    bottom: 0;\n    height: 0.5em;\n    /*line-height: 0.5em;*/\n}\n  \n.fa-stack .fa-sort-up {\n  position: absolute;\n  top: 0;\n  height: 0.5em;\n}\n\n#annotationsave-button {\n    border-radius: 6px;\n    color: #FFFFFF;\n    font-size: 16px;\n    padding: 6px;\n    background-color: #3D94F6;\n    text-decoration: none;\n    display: inline-block;\n    cursor: pointer;\n    margin-top: 10px;\n}\n\n#deleteannotation {\n    display: none;\n}\n\n#annotationtypedisplay {\n    display: none;\n}\n\n#annotationsave-submit {\n    display: none;\n}",""])},function(t,e,i){var n=i(424);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(19)(n,o);n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(18)(!1)).push([t.i,"#eups-content-wrapper {\n    float: left;\n    height: 100%;\n}\n\n#eups-player {\n    height: 100%;\n    width: 100%;\n}\n\n.editor {\n    width: 60%;\n}\n\n.no-editor {\n    width: 100%;\n    float: left;\n}\n\n#eups-editor-wrapper {\n    float: left;\n}\n\n#eups-annotationeditor {\n    padding-left: 5%;\n}",""])},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n,o,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);e.default=t}(i(426));var a=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.elem=t,this.mediaduration=0,this.annotations=[],this.mediaready=!1,this.manifest,this.eupsId)}return r(e,[{key:"init",value:function(t,e){o=e,(n=t).listen("player","manifest",this,this.manifestHandler),n.listen("player","mediaready",this,this.mediareadyListener),n.listen("main","loadannotations",this,this.loadAnnotations),n.listen("main","eupsId",this,this.getEupsId)}},{key:"mediareadyListener",value:function(t){this.handler.mediaready=!0,this.handler.mediaduration=t}},{key:"moreClickedListener",value:function(e){if(this.handler.mediaready&&this.handler.elem){this.handler.elem.innerHTML='<div id="annotationviewer-header">\n            <span id="annotationviewer-edit-icon"><i class="far fa-edit pointer"></i></span>\n            </div>\n            <div id="annotationviewer-content">\n            </div>\n            ';var i=this;t("#annotationviewer-edit-icon").on("click",function(){void 0!==o?(console.log("opening external editor"),window.open(o+"?mode=editor&manifest="+encodeURIComponent(i.handler.manifest)+"&eupsid="+i.handler.eupsId,"_blank")):(console.log("Showing internal editor"),t(i.handler.elem).hide(),n.signal("annotationviewer","edit",null))}),this.handler.showAnnotations()}}},{key:"loadAnnotations",value:function(t){this.handler.annotations=t}},{key:"showAnnotations",value:function(){if(this.annotations.length>0){this.annotations.sort(function(t,e){return t.start-e.start});var e=this;Object.keys(this.annotations).forEach(function(i,n){t("#annotationviewer-content").append('<div id="annotationviewer-content-id_'+e.annotations[i].id+'" class="annotationviewer-content-item">\n                <div class="annotationviewer-timing-info pointer" data-start="'+e.annotations[i].start+'">'+e.formatTime(e.annotations[i].start)+" - "+e.formatTime(e.annotations[i].end)+' </div>\n                <div class="annotationviewer-text pointer" data-start="'+e.annotations[i].start+'">'+e.annotations[i].text+"</div></div>")}),t(".annotationviewer-timing-info,.annotationviewer-text").on("click",function(){var e=t(this).data("start")/1e3;n.signal("annotationviewer","timeupdate",e)})}else t("#annotationviewer-content").append("No annotations yet added")}},{key:"formatTime",value:function(t){var e=Math.floor(t/36e5),i=Math.floor(t/6e4),n=Math.floor(t%6e4/1e3),o=t%1e3,r=e>0?e+":":"";return r+=i<10?"0"+i+":":i+":",r+=n<10?"0"+n+".":n+".",r+=o<10?"00"+o:o<100?"0"+o:o}},{key:"getEupsId",value:function(t){this.handler.eupsId=t}},{key:"manifestHandler",value:function(t){this.handler.manifest=t}}]),e}();e.default=a}).call(this,i(5))},function(t,e,i){var n=i(427);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(19)(n,o);n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(18)(!1)).push([t.i,"#annotationviewer-header {\n    height: 25px;\n}\n\n#annotationviewer-edit-icon {\n    float: right;\n}\n\n.pointer {\n    cursor: pointer;\n}\n\n#annotationviewer-content {\n    max-height: 250px;\n    overflow: auto;\n}\n\n.annotationviewer-timing-info {\n    background-color: #ccc;\n    float: left;\n    margin: 5px;\n}\n\n.annotationviewer-text {\n    background-color: #ddd;\n    float: left;\n    margin: 5px;\n}\n\n.annotationviewer-content-item {\n    clear: both;\n}",""])}])});
//# sourceMappingURL=europeanamediaplayer.js.map